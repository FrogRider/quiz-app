(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function kw(e,t){const n=Object.create(null),r=e.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return t?i=>!!n[i.toLowerCase()]:i=>!!n[i]}function Rw(e){if(Te(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],i=Bt(r)?aj(r):Rw(r);if(i)for(const s in i)t[s]=i[s]}return t}else{if(Bt(e))return e;if(gt(e))return e}}const ij=/;(?![^(]*\))/g,oj=/:([^]+)/,sj=/\/\*.*?\*\//gs;function aj(e){const t={};return e.replace(sj,"").split(ij).forEach(n=>{if(n){const r=n.split(oj);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function Nw(e){let t="";if(Bt(e))t=e;else if(Te(e))for(let n=0;n<e.length;n++){const r=Nw(e[n]);r&&(t+=r+" ")}else if(gt(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const uj="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",cj=kw(uj);function QR(e){return!!e||e===""}const wl=e=>Bt(e)?e:e==null?"":Te(e)||gt(e)&&(e.toString===ZR||!ke(e.toString))?JSON.stringify(e,YR,2):String(e),YR=(e,t)=>t&&t.__v_isRef?YR(e,t.value):tu(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,i])=>(n[`${r} =>`]=i,n),{})}:XR(t)?{[`Set(${t.size})`]:[...t.values()]}:gt(t)&&!Te(t)&&!eN(t)?String(t):t,ct={},eu=[],Jr=()=>{},lj=()=>!1,fj=/^on[^a-z]/,pp=e=>fj.test(e),Pw=e=>e.startsWith("onUpdate:"),Tn=Object.assign,Ow=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},hj=Object.prototype.hasOwnProperty,qe=(e,t)=>hj.call(e,t),Te=Array.isArray,tu=e=>vp(e)==="[object Map]",XR=e=>vp(e)==="[object Set]",ke=e=>typeof e=="function",Bt=e=>typeof e=="string",Dw=e=>typeof e=="symbol",gt=e=>e!==null&&typeof e=="object",JR=e=>gt(e)&&ke(e.then)&&ke(e.catch),ZR=Object.prototype.toString,vp=e=>ZR.call(e),dj=e=>vp(e).slice(8,-1),eN=e=>vp(e)==="[object Object]",xw=e=>Bt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,id=kw(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),gp=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},pj=/-(\w)/g,Ii=gp(e=>e.replace(pj,(t,n)=>n?n.toUpperCase():"")),vj=/\B([A-Z])/g,ju=gp(e=>e.replace(vj,"-$1").toLowerCase()),mp=gp(e=>e.charAt(0).toUpperCase()+e.slice(1)),cy=gp(e=>e?`on${mp(e)}`:""),bl=(e,t)=>!Object.is(e,t),ly=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},md=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},tN=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let uC;const gj=()=>uC||(uC=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let ur;class nN{constructor(t=!1){this.detached=t,this.active=!0,this.effects=[],this.cleanups=[],this.parent=ur,!t&&ur&&(this.index=(ur.scopes||(ur.scopes=[])).push(this)-1)}run(t){if(this.active){const n=ur;try{return ur=this,t()}finally{ur=n}}}on(){ur=this}off(){ur=this.parent}stop(t){if(this.active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this.active=!1}}}function rN(e){return new nN(e)}function mj(e,t=ur){t&&t.active&&t.effects.push(e)}function yj(){return ur}function _j(e){ur&&ur.cleanups.push(e)}const Lw=e=>{const t=new Set(e);return t.w=0,t.n=0,t},iN=e=>(e.w&Uo)>0,oN=e=>(e.n&Uo)>0,wj=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=Uo},bj=e=>{const{deps:t}=e;if(t.length){let n=0;for(let r=0;r<t.length;r++){const i=t[r];iN(i)&&!oN(i)?i.delete(e):t[n++]=i,i.w&=~Uo,i.n&=~Uo}t.length=n}},n_=new WeakMap;let Jc=0,Uo=1;const r_=30;let Qr;const Us=Symbol(""),i_=Symbol("");class Mw{constructor(t,n=null,r){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,mj(this,r)}run(){if(!this.active)return this.fn();let t=Qr,n=No;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=Qr,Qr=this,No=!0,Uo=1<<++Jc,Jc<=r_?wj(this):cC(this),this.fn()}finally{Jc<=r_&&bj(this),Uo=1<<--Jc,Qr=this.parent,No=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Qr===this?this.deferStop=!0:this.active&&(cC(this),this.onStop&&this.onStop(),this.active=!1)}}function cC(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let No=!0;const sN=[];function Vu(){sN.push(No),No=!1}function Bu(){const e=sN.pop();No=e===void 0?!0:e}function mr(e,t,n){if(No&&Qr){let r=n_.get(e);r||n_.set(e,r=new Map);let i=r.get(n);i||r.set(n,i=Lw()),aN(i)}}function aN(e,t){let n=!1;Jc<=r_?oN(e)||(e.n|=Uo,n=!iN(e)):n=!e.has(Qr),n&&(e.add(Qr),Qr.deps.push(e))}function Qi(e,t,n,r,i,s){const a=n_.get(e);if(!a)return;let c=[];if(t==="clear")c=[...a.values()];else if(n==="length"&&Te(e)){const l=tN(r);a.forEach((h,d)=>{(d==="length"||d>=l)&&c.push(h)})}else switch(n!==void 0&&c.push(a.get(n)),t){case"add":Te(e)?xw(n)&&c.push(a.get("length")):(c.push(a.get(Us)),tu(e)&&c.push(a.get(i_)));break;case"delete":Te(e)||(c.push(a.get(Us)),tu(e)&&c.push(a.get(i_)));break;case"set":tu(e)&&c.push(a.get(Us));break}if(c.length===1)c[0]&&o_(c[0]);else{const l=[];for(const h of c)h&&l.push(...h);o_(Lw(l))}}function o_(e,t){const n=Te(e)?e:[...e];for(const r of n)r.computed&&lC(r);for(const r of n)r.computed||lC(r)}function lC(e,t){(e!==Qr||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const Ej=kw("__proto__,__v_isRef,__isVue"),uN=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Dw)),Tj=Fw(),Ij=Fw(!1,!0),Sj=Fw(!0),fC=Cj();function Cj(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const r=He(this);for(let s=0,a=this.length;s<a;s++)mr(r,"get",s+"");const i=r[t](...n);return i===-1||i===!1?r[t](...n.map(He)):i}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){Vu();const r=He(this)[t].apply(this,n);return Bu(),r}}),e}function Fw(e=!1,t=!1){return function(r,i,s){if(i==="__v_isReactive")return!e;if(i==="__v_isReadonly")return e;if(i==="__v_isShallow")return t;if(i==="__v_raw"&&s===(e?t?qj:dN:t?hN:fN).get(r))return r;const a=Te(r);if(!e&&a&&qe(fC,i))return Reflect.get(fC,i,s);const c=Reflect.get(r,i,s);return(Dw(i)?uN.has(i):Ej(i))||(e||mr(r,"get",i),t)?c:It(c)?a&&xw(i)?c:c.value:gt(c)?e?pN(c):qu(c):c}}const Aj=cN(),kj=cN(!0);function cN(e=!1){return function(n,r,i,s){let a=n[r];if(cu(a)&&It(a)&&!It(i))return!1;if(!e&&(!yd(i)&&!cu(i)&&(a=He(a),i=He(i)),!Te(n)&&It(a)&&!It(i)))return a.value=i,!0;const c=Te(n)&&xw(r)?Number(r)<n.length:qe(n,r),l=Reflect.set(n,r,i,s);return n===He(s)&&(c?bl(i,a)&&Qi(n,"set",r,i):Qi(n,"add",r,i)),l}}function Rj(e,t){const n=qe(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&n&&Qi(e,"delete",t,void 0),r}function Nj(e,t){const n=Reflect.has(e,t);return(!Dw(t)||!uN.has(t))&&mr(e,"has",t),n}function Pj(e){return mr(e,"iterate",Te(e)?"length":Us),Reflect.ownKeys(e)}const lN={get:Tj,set:Aj,deleteProperty:Rj,has:Nj,ownKeys:Pj},Oj={get:Sj,set(e,t){return!0},deleteProperty(e,t){return!0}},Dj=Tn({},lN,{get:Ij,set:kj}),Uw=e=>e,yp=e=>Reflect.getPrototypeOf(e);function Mh(e,t,n=!1,r=!1){e=e.__v_raw;const i=He(e),s=He(t);n||(t!==s&&mr(i,"get",t),mr(i,"get",s));const{has:a}=yp(i),c=r?Uw:n?Bw:El;if(a.call(i,t))return c(e.get(t));if(a.call(i,s))return c(e.get(s));e!==i&&e.get(t)}function Fh(e,t=!1){const n=this.__v_raw,r=He(n),i=He(e);return t||(e!==i&&mr(r,"has",e),mr(r,"has",i)),e===i?n.has(e):n.has(e)||n.has(i)}function Uh(e,t=!1){return e=e.__v_raw,!t&&mr(He(e),"iterate",Us),Reflect.get(e,"size",e)}function hC(e){e=He(e);const t=He(this);return yp(t).has.call(t,e)||(t.add(e),Qi(t,"add",e,e)),this}function dC(e,t){t=He(t);const n=He(this),{has:r,get:i}=yp(n);let s=r.call(n,e);s||(e=He(e),s=r.call(n,e));const a=i.call(n,e);return n.set(e,t),s?bl(t,a)&&Qi(n,"set",e,t):Qi(n,"add",e,t),this}function pC(e){const t=He(this),{has:n,get:r}=yp(t);let i=n.call(t,e);i||(e=He(e),i=n.call(t,e)),r&&r.call(t,e);const s=t.delete(e);return i&&Qi(t,"delete",e,void 0),s}function vC(){const e=He(this),t=e.size!==0,n=e.clear();return t&&Qi(e,"clear",void 0,void 0),n}function jh(e,t){return function(r,i){const s=this,a=s.__v_raw,c=He(a),l=t?Uw:e?Bw:El;return!e&&mr(c,"iterate",Us),a.forEach((h,d)=>r.call(i,l(h),l(d),s))}}function Vh(e,t,n){return function(...r){const i=this.__v_raw,s=He(i),a=tu(s),c=e==="entries"||e===Symbol.iterator&&a,l=e==="keys"&&a,h=i[e](...r),d=n?Uw:t?Bw:El;return!t&&mr(s,"iterate",l?i_:Us),{next(){const{value:v,done:m}=h.next();return m?{value:v,done:m}:{value:c?[d(v[0]),d(v[1])]:d(v),done:m}},[Symbol.iterator](){return this}}}}function vo(e){return function(...t){return e==="delete"?!1:this}}function xj(){const e={get(s){return Mh(this,s)},get size(){return Uh(this)},has:Fh,add:hC,set:dC,delete:pC,clear:vC,forEach:jh(!1,!1)},t={get(s){return Mh(this,s,!1,!0)},get size(){return Uh(this)},has:Fh,add:hC,set:dC,delete:pC,clear:vC,forEach:jh(!1,!0)},n={get(s){return Mh(this,s,!0)},get size(){return Uh(this,!0)},has(s){return Fh.call(this,s,!0)},add:vo("add"),set:vo("set"),delete:vo("delete"),clear:vo("clear"),forEach:jh(!0,!1)},r={get(s){return Mh(this,s,!0,!0)},get size(){return Uh(this,!0)},has(s){return Fh.call(this,s,!0)},add:vo("add"),set:vo("set"),delete:vo("delete"),clear:vo("clear"),forEach:jh(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{e[s]=Vh(s,!1,!1),n[s]=Vh(s,!0,!1),t[s]=Vh(s,!1,!0),r[s]=Vh(s,!0,!0)}),[e,n,t,r]}const[Lj,Mj,Fj,Uj]=xj();function jw(e,t){const n=t?e?Uj:Fj:e?Mj:Lj;return(r,i,s)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?r:Reflect.get(qe(n,i)&&i in r?n:r,i,s)}const jj={get:jw(!1,!1)},Vj={get:jw(!1,!0)},Bj={get:jw(!0,!1)},fN=new WeakMap,hN=new WeakMap,dN=new WeakMap,qj=new WeakMap;function Hj(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Kj(e){return e.__v_skip||!Object.isExtensible(e)?0:Hj(dj(e))}function qu(e){return cu(e)?e:Vw(e,!1,lN,jj,fN)}function Wj(e){return Vw(e,!1,Dj,Vj,hN)}function pN(e){return Vw(e,!0,Oj,Bj,dN)}function Vw(e,t,n,r,i){if(!gt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=i.get(e);if(s)return s;const a=Kj(e);if(a===0)return e;const c=new Proxy(e,a===2?r:n);return i.set(e,c),c}function Wi(e){return cu(e)?Wi(e.__v_raw):!!(e&&e.__v_isReactive)}function cu(e){return!!(e&&e.__v_isReadonly)}function yd(e){return!!(e&&e.__v_isShallow)}function vN(e){return Wi(e)||cu(e)}function He(e){const t=e&&e.__v_raw;return t?He(t):e}function lu(e){return md(e,"__v_skip",!0),e}const El=e=>gt(e)?qu(e):e,Bw=e=>gt(e)?pN(e):e;function gN(e){No&&Qr&&(e=He(e),aN(e.dep||(e.dep=Lw())))}function mN(e,t){e=He(e),e.dep&&o_(e.dep)}function It(e){return!!(e&&e.__v_isRef===!0)}function qw(e){return yN(e,!1)}function Gj(e){return yN(e,!0)}function yN(e,t){return It(e)?e:new zj(e,t)}class zj{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:He(t),this._value=n?t:El(t)}get value(){return gN(this),this._value}set value(t){const n=this.__v_isShallow||yd(t)||cu(t);t=n?t:He(t),bl(t,this._rawValue)&&(this._rawValue=t,this._value=n?t:El(t),mN(this))}}function jn(e){return It(e)?e.value:e}const $j={get:(e,t,n)=>jn(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const i=e[t];return It(i)&&!It(n)?(i.value=n,!0):Reflect.set(e,t,n,r)}};function _N(e){return Wi(e)?e:new Proxy(e,$j)}function Qj(e){const t=Te(e)?new Array(e.length):{};for(const n in e)t[n]=wN(e,n);return t}class Yj{constructor(t,n,r){this._object=t,this._key=n,this._defaultValue=r,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}}function wN(e,t,n){const r=e[t];return It(r)?r:new Yj(e,t,n)}var bN;class Xj{constructor(t,n,r,i){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this[bN]=!1,this._dirty=!0,this.effect=new Mw(t,()=>{this._dirty||(this._dirty=!0,mN(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=r}get value(){const t=He(this);return gN(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}bN="__v_isReadonly";function Jj(e,t,n=!1){let r,i;const s=ke(e);return s?(r=e,i=Jr):(r=e.get,i=e.set),new Xj(r,i,s||!i,n)}function Po(e,t,n,r){let i;try{i=r?e(...r):e()}catch(s){_p(s,t,n)}return i}function Pr(e,t,n,r){if(ke(e)){const s=Po(e,t,n,r);return s&&JR(s)&&s.catch(a=>{_p(a,t,n)}),s}const i=[];for(let s=0;s<e.length;s++)i.push(Pr(e[s],t,n,r));return i}function _p(e,t,n,r=!0){const i=t?t.vnode:null;if(t){let s=t.parent;const a=t.proxy,c=n;for(;s;){const h=s.ec;if(h){for(let d=0;d<h.length;d++)if(h[d](e,a,c)===!1)return}s=s.parent}const l=t.appContext.config.errorHandler;if(l){Po(l,null,10,[e,a,c]);return}}Zj(e,n,i,r)}function Zj(e,t,n,r=!0){console.error(e)}let Tl=!1,s_=!1;const yn=[];let mi=0;const nu=[];let Vi=null,Ss=0;const EN=Promise.resolve();let Hw=null;function Kw(e){const t=Hw||EN;return e?t.then(this?e.bind(this):e):t}function e4(e){let t=mi+1,n=yn.length;for(;t<n;){const r=t+n>>>1;Il(yn[r])<e?t=r+1:n=r}return t}function Ww(e){(!yn.length||!yn.includes(e,Tl&&e.allowRecurse?mi+1:mi))&&(e.id==null?yn.push(e):yn.splice(e4(e.id),0,e),TN())}function TN(){!Tl&&!s_&&(s_=!0,Hw=EN.then(SN))}function t4(e){const t=yn.indexOf(e);t>mi&&yn.splice(t,1)}function n4(e){Te(e)?nu.push(...e):(!Vi||!Vi.includes(e,e.allowRecurse?Ss+1:Ss))&&nu.push(e),TN()}function gC(e,t=Tl?mi+1:0){for(;t<yn.length;t++){const n=yn[t];n&&n.pre&&(yn.splice(t,1),t--,n())}}function IN(e){if(nu.length){const t=[...new Set(nu)];if(nu.length=0,Vi){Vi.push(...t);return}for(Vi=t,Vi.sort((n,r)=>Il(n)-Il(r)),Ss=0;Ss<Vi.length;Ss++)Vi[Ss]();Vi=null,Ss=0}}const Il=e=>e.id==null?1/0:e.id,r4=(e,t)=>{const n=Il(e)-Il(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function SN(e){s_=!1,Tl=!0,yn.sort(r4);const t=Jr;try{for(mi=0;mi<yn.length;mi++){const n=yn[mi];n&&n.active!==!1&&Po(n,null,14)}}finally{mi=0,yn.length=0,IN(),Tl=!1,Hw=null,(yn.length||nu.length)&&SN()}}function i4(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||ct;let i=n;const s=t.startsWith("update:"),a=s&&t.slice(7);if(a&&a in r){const d=`${a==="modelValue"?"model":a}Modifiers`,{number:v,trim:m}=r[d]||ct;m&&(i=n.map(y=>Bt(y)?y.trim():y)),v&&(i=n.map(tN))}let c,l=r[c=cy(t)]||r[c=cy(Ii(t))];!l&&s&&(l=r[c=cy(ju(t))]),l&&Pr(l,e,6,i);const h=r[c+"Once"];if(h){if(!e.emitted)e.emitted={};else if(e.emitted[c])return;e.emitted[c]=!0,Pr(h,e,6,i)}}function CN(e,t,n=!1){const r=t.emitsCache,i=r.get(e);if(i!==void 0)return i;const s=e.emits;let a={},c=!1;if(!ke(e)){const l=h=>{const d=CN(h,t,!0);d&&(c=!0,Tn(a,d))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!s&&!c?(gt(e)&&r.set(e,null),null):(Te(s)?s.forEach(l=>a[l]=null):Tn(a,s),gt(e)&&r.set(e,a),a)}function wp(e,t){return!e||!pp(t)?!1:(t=t.slice(2).replace(/Once$/,""),qe(e,t[0].toLowerCase()+t.slice(1))||qe(e,ju(t))||qe(e,t))}let dr=null,AN=null;function _d(e){const t=dr;return dr=e,AN=e&&e.type.__scopeId||null,t}function o4(e,t=dr,n){if(!t||e._n)return e;const r=(...i)=>{r._d&&CC(-1);const s=_d(t);let a;try{a=e(...i)}finally{_d(s),r._d&&CC(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function fy(e){const{type:t,vnode:n,proxy:r,withProxy:i,props:s,propsOptions:[a],slots:c,attrs:l,emit:h,render:d,renderCache:v,data:m,setupState:y,ctx:w,inheritAttrs:E}=e;let T,A;const P=_d(e);try{if(n.shapeFlag&4){const H=i||r;T=gi(d.call(H,H,v,s,y,m,w)),A=l}else{const H=t;T=gi(H.length>1?H(s,{attrs:l,slots:c,emit:h}):H(s,null)),A=t.props?l:s4(l)}}catch(H){nl.length=0,_p(H,e,1),T=Jn(Zr)}let O=T;if(A&&E!==!1){const H=Object.keys(A),{shapeFlag:K}=O;H.length&&K&7&&(a&&H.some(Pw)&&(A=a4(A,a)),O=jo(O,A))}return n.dirs&&(O=jo(O),O.dirs=O.dirs?O.dirs.concat(n.dirs):n.dirs),n.transition&&(O.transition=n.transition),T=O,_d(P),T}const s4=e=>{let t;for(const n in e)(n==="class"||n==="style"||pp(n))&&((t||(t={}))[n]=e[n]);return t},a4=(e,t)=>{const n={};for(const r in e)(!Pw(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function u4(e,t,n){const{props:r,children:i,component:s}=e,{props:a,children:c,patchFlag:l}=t,h=s.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?mC(r,a,h):!!a;if(l&8){const d=t.dynamicProps;for(let v=0;v<d.length;v++){const m=d[v];if(a[m]!==r[m]&&!wp(h,m))return!0}}}else return(i||c)&&(!c||!c.$stable)?!0:r===a?!1:r?a?mC(r,a,h):!0:!!a;return!1}function mC(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(t[s]!==e[s]&&!wp(n,s))return!0}return!1}function c4({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}const l4=e=>e.__isSuspense;function f4(e,t){t&&t.pendingBranch?Te(e)?t.effects.push(...e):t.effects.push(e):n4(e)}function od(e,t){if($t){let n=$t.provides;const r=$t.parent&&$t.parent.provides;r===n&&(n=$t.provides=Object.create(r)),n[e]=t}}function Or(e,t,n=!1){const r=$t||dr;if(r){const i=r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(i&&e in i)return i[e];if(arguments.length>1)return n&&ke(t)?t.call(r.proxy):t}}const Bh={};function js(e,t,n){return kN(e,t,n)}function kN(e,t,{immediate:n,deep:r,flush:i,onTrack:s,onTrigger:a}=ct){const c=$t;let l,h=!1,d=!1;if(It(e)?(l=()=>e.value,h=yd(e)):Wi(e)?(l=()=>e,r=!0):Te(e)?(d=!0,h=e.some(O=>Wi(O)||yd(O)),l=()=>e.map(O=>{if(It(O))return O.value;if(Wi(O))return Ns(O);if(ke(O))return Po(O,c,2)})):ke(e)?t?l=()=>Po(e,c,2):l=()=>{if(!(c&&c.isUnmounted))return v&&v(),Pr(e,c,3,[m])}:l=Jr,t&&r){const O=l;l=()=>Ns(O())}let v,m=O=>{v=A.onStop=()=>{Po(O,c,4)}},y;if(Cl)if(m=Jr,t?n&&Pr(t,c,3,[l(),d?[]:void 0,m]):l(),i==="sync"){const O=aV();y=O.__watcherHandles||(O.__watcherHandles=[])}else return Jr;let w=d?new Array(e.length).fill(Bh):Bh;const E=()=>{if(A.active)if(t){const O=A.run();(r||h||(d?O.some((H,K)=>bl(H,w[K])):bl(O,w)))&&(v&&v(),Pr(t,c,3,[O,w===Bh?void 0:d&&w[0]===Bh?[]:w,m]),w=O)}else A.run()};E.allowRecurse=!!t;let T;i==="sync"?T=E:i==="post"?T=()=>Yn(E,c&&c.suspense):(E.pre=!0,c&&(E.id=c.uid),T=()=>Ww(E));const A=new Mw(l,T);t?n?E():w=A.run():i==="post"?Yn(A.run.bind(A),c&&c.suspense):A.run();const P=()=>{A.stop(),c&&c.scope&&Ow(c.scope.effects,A)};return y&&y.push(P),P}function h4(e,t,n){const r=this.proxy,i=Bt(e)?e.includes(".")?RN(r,e):()=>r[e]:e.bind(r,r);let s;ke(t)?s=t:(s=t.handler,n=t);const a=$t;fu(this);const c=kN(i,s.bind(r),n);return a?fu(a):Vs(),c}function RN(e,t){const n=t.split(".");return()=>{let r=e;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function Ns(e,t){if(!gt(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),It(e))Ns(e.value,t);else if(Te(e))for(let n=0;n<e.length;n++)Ns(e[n],t);else if(XR(e)||tu(e))e.forEach(n=>{Ns(n,t)});else if(eN(e))for(const n in e)Ns(e[n],t);return e}function d4(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return LN(()=>{e.isMounted=!0}),MN(()=>{e.isUnmounting=!0}),e}const Sr=[Function,Array],p4={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Sr,onEnter:Sr,onAfterEnter:Sr,onEnterCancelled:Sr,onBeforeLeave:Sr,onLeave:Sr,onAfterLeave:Sr,onLeaveCancelled:Sr,onBeforeAppear:Sr,onAppear:Sr,onAfterAppear:Sr,onAppearCancelled:Sr},setup(e,{slots:t}){const n=QN(),r=d4();let i;return()=>{const s=t.default&&PN(t.default(),!0);if(!s||!s.length)return;let a=s[0];if(s.length>1){for(const E of s)if(E.type!==Zr){a=E;break}}const c=He(e),{mode:l}=c;if(r.isLeaving)return hy(a);const h=yC(a);if(!h)return hy(a);const d=a_(h,c,r,n);u_(h,d);const v=n.subTree,m=v&&yC(v);let y=!1;const{getTransitionKey:w}=h.type;if(w){const E=w();i===void 0?i=E:E!==i&&(i=E,y=!0)}if(m&&m.type!==Zr&&(!Cs(h,m)||y)){const E=a_(m,c,r,n);if(u_(m,E),l==="out-in")return r.isLeaving=!0,E.afterLeave=()=>{r.isLeaving=!1,n.update.active!==!1&&n.update()},hy(a);l==="in-out"&&h.type!==Zr&&(E.delayLeave=(T,A,P)=>{const O=NN(r,m);O[String(m.key)]=m,T._leaveCb=()=>{A(),T._leaveCb=void 0,delete d.delayedLeave},d.delayedLeave=P})}return a}}},v4=p4;function NN(e,t){const{leavingVNodes:n}=e;let r=n.get(t.type);return r||(r=Object.create(null),n.set(t.type,r)),r}function a_(e,t,n,r){const{appear:i,mode:s,persisted:a=!1,onBeforeEnter:c,onEnter:l,onAfterEnter:h,onEnterCancelled:d,onBeforeLeave:v,onLeave:m,onAfterLeave:y,onLeaveCancelled:w,onBeforeAppear:E,onAppear:T,onAfterAppear:A,onAppearCancelled:P}=t,O=String(e.key),H=NN(n,e),K=(F,ge)=>{F&&Pr(F,r,9,ge)},U=(F,ge)=>{const R=ge[1];K(F,ge),Te(F)?F.every(tt=>tt.length<=1)&&R():F.length<=1&&R()},ie={mode:s,persisted:a,beforeEnter(F){let ge=c;if(!n.isMounted)if(i)ge=E||c;else return;F._leaveCb&&F._leaveCb(!0);const R=H[O];R&&Cs(e,R)&&R.el._leaveCb&&R.el._leaveCb(),K(ge,[F])},enter(F){let ge=l,R=h,tt=d;if(!n.isMounted)if(i)ge=T||l,R=A||h,tt=P||d;else return;let lt=!1;const An=F._enterCb=Lt=>{lt||(lt=!0,Lt?K(tt,[F]):K(R,[F]),ie.delayedLeave&&ie.delayedLeave(),F._enterCb=void 0)};ge?U(ge,[F,An]):An()},leave(F,ge){const R=String(e.key);if(F._enterCb&&F._enterCb(!0),n.isUnmounting)return ge();K(v,[F]);let tt=!1;const lt=F._leaveCb=An=>{tt||(tt=!0,ge(),An?K(w,[F]):K(y,[F]),F._leaveCb=void 0,H[R]===e&&delete H[R])};H[R]=e,m?U(m,[F,lt]):lt()},clone(F){return a_(F,t,n,r)}};return ie}function hy(e){if(bp(e))return e=jo(e),e.children=null,e}function yC(e){return bp(e)?e.children?e.children[0]:void 0:e}function u_(e,t){e.shapeFlag&6&&e.component?u_(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function PN(e,t=!1,n){let r=[],i=0;for(let s=0;s<e.length;s++){let a=e[s];const c=n==null?a.key:String(n)+String(a.key!=null?a.key:s);a.type===Xn?(a.patchFlag&128&&i++,r=r.concat(PN(a.children,t,c))):(t||a.type!==Zr)&&r.push(c!=null?jo(a,{key:c}):a)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}function ON(e){return ke(e)?{setup:e,name:e.name}:e}const sd=e=>!!e.type.__asyncLoader,bp=e=>e.type.__isKeepAlive;function g4(e,t){DN(e,"a",t)}function m4(e,t){DN(e,"da",t)}function DN(e,t,n=$t){const r=e.__wdc||(e.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(Ep(t,r,n),n){let i=n.parent;for(;i&&i.parent;)bp(i.parent.vnode)&&y4(r,t,n,i),i=i.parent}}function y4(e,t,n,r){const i=Ep(t,e,r,!0);FN(()=>{Ow(r[t],i)},n)}function Ep(e,t,n=$t,r=!1){if(n){const i=n[e]||(n[e]=[]),s=t.__weh||(t.__weh=(...a)=>{if(n.isUnmounted)return;Vu(),fu(n);const c=Pr(t,n,e,a);return Vs(),Bu(),c});return r?i.unshift(s):i.push(s),s}}const eo=e=>(t,n=$t)=>(!Cl||e==="sp")&&Ep(e,(...r)=>t(...r),n),xN=eo("bm"),LN=eo("m"),_4=eo("bu"),w4=eo("u"),MN=eo("bum"),FN=eo("um"),b4=eo("sp"),E4=eo("rtg"),T4=eo("rtc");function I4(e,t=$t){Ep("ec",e,t)}function S4(e,t){const n=dr;if(n===null)return e;const r=Sp(n)||n.proxy,i=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[a,c,l,h=ct]=t[s];a&&(ke(a)&&(a={mounted:a,updated:a}),a.deep&&Ns(c),i.push({dir:a,instance:r,value:c,oldValue:void 0,arg:l,modifiers:h}))}return e}function ys(e,t,n,r){const i=e.dirs,s=t&&t.dirs;for(let a=0;a<i.length;a++){const c=i[a];s&&(c.oldValue=s[a].value);let l=c.dir[r];l&&(Vu(),Pr(l,n,8,[e.el,c,e,t]),Bu())}}const UN="components";function C4(e,t){return k4(UN,e,!0,t)||e}const A4=Symbol();function k4(e,t,n=!0,r=!1){const i=dr||$t;if(i){const s=i.type;if(e===UN){const c=iV(s,!1);if(c&&(c===t||c===Ii(t)||c===mp(Ii(t))))return s}const a=_C(i[e]||s[e],t)||_C(i.appContext[e],t);return!a&&r?s:a}}function _C(e,t){return e&&(e[t]||e[Ii(t)]||e[mp(Ii(t))])}function c_(e,t,n,r){let i;const s=n&&n[r];if(Te(e)||Bt(e)){i=new Array(e.length);for(let a=0,c=e.length;a<c;a++)i[a]=t(e[a],a,void 0,s&&s[a])}else if(typeof e=="number"){i=new Array(e);for(let a=0;a<e;a++)i[a]=t(a+1,a,void 0,s&&s[a])}else if(gt(e))if(e[Symbol.iterator])i=Array.from(e,(a,c)=>t(a,c,void 0,s&&s[c]));else{const a=Object.keys(e);i=new Array(a.length);for(let c=0,l=a.length;c<l;c++){const h=a[c];i[c]=t(e[h],h,c,s&&s[c])}}else i=[];return n&&(n[r]=i),i}const l_=e=>e?YN(e)?Sp(e)||e.proxy:l_(e.parent):null,tl=Tn(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>l_(e.parent),$root:e=>l_(e.root),$emit:e=>e.emit,$options:e=>Gw(e),$forceUpdate:e=>e.f||(e.f=()=>Ww(e.update)),$nextTick:e=>e.n||(e.n=Kw.bind(e.proxy)),$watch:e=>h4.bind(e)}),dy=(e,t)=>e!==ct&&!e.__isScriptSetup&&qe(e,t),R4={get({_:e},t){const{ctx:n,setupState:r,data:i,props:s,accessCache:a,type:c,appContext:l}=e;let h;if(t[0]!=="$"){const y=a[t];if(y!==void 0)switch(y){case 1:return r[t];case 2:return i[t];case 4:return n[t];case 3:return s[t]}else{if(dy(r,t))return a[t]=1,r[t];if(i!==ct&&qe(i,t))return a[t]=2,i[t];if((h=e.propsOptions[0])&&qe(h,t))return a[t]=3,s[t];if(n!==ct&&qe(n,t))return a[t]=4,n[t];f_&&(a[t]=0)}}const d=tl[t];let v,m;if(d)return t==="$attrs"&&mr(e,"get",t),d(e);if((v=c.__cssModules)&&(v=v[t]))return v;if(n!==ct&&qe(n,t))return a[t]=4,n[t];if(m=l.config.globalProperties,qe(m,t))return m[t]},set({_:e},t,n){const{data:r,setupState:i,ctx:s}=e;return dy(i,t)?(i[t]=n,!0):r!==ct&&qe(r,t)?(r[t]=n,!0):qe(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:i,propsOptions:s}},a){let c;return!!n[a]||e!==ct&&qe(e,a)||dy(t,a)||(c=s[0])&&qe(c,a)||qe(r,a)||qe(tl,a)||qe(i.config.globalProperties,a)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:qe(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};let f_=!0;function N4(e){const t=Gw(e),n=e.proxy,r=e.ctx;f_=!1,t.beforeCreate&&wC(t.beforeCreate,e,"bc");const{data:i,computed:s,methods:a,watch:c,provide:l,inject:h,created:d,beforeMount:v,mounted:m,beforeUpdate:y,updated:w,activated:E,deactivated:T,beforeDestroy:A,beforeUnmount:P,destroyed:O,unmounted:H,render:K,renderTracked:U,renderTriggered:ie,errorCaptured:F,serverPrefetch:ge,expose:R,inheritAttrs:tt,components:lt,directives:An,filters:Lt}=t;if(h&&P4(h,r,null,e.appContext.config.unwrapInjectedRef),a)for(const Ye in a){const Ce=a[Ye];ke(Ce)&&(r[Ye]=Ce.bind(n))}if(i){const Ye=i.call(n,n);gt(Ye)&&(e.data=qu(Ye))}if(f_=!0,s)for(const Ye in s){const Ce=s[Ye],kn=ke(Ce)?Ce.bind(n,n):ke(Ce.get)?Ce.get.bind(n,n):Jr,Kn=!ke(Ce)&&ke(Ce.set)?Ce.set.bind(n):Jr,Rn=sn({get:kn,set:Kn});Object.defineProperty(r,Ye,{enumerable:!0,configurable:!0,get:()=>Rn.value,set:Zt=>Rn.value=Zt})}if(c)for(const Ye in c)jN(c[Ye],r,n,Ye);if(l){const Ye=ke(l)?l.call(n):l;Reflect.ownKeys(Ye).forEach(Ce=>{od(Ce,Ye[Ce])})}d&&wC(d,e,"c");function ot(Ye,Ce){Te(Ce)?Ce.forEach(kn=>Ye(kn.bind(n))):Ce&&Ye(Ce.bind(n))}if(ot(xN,v),ot(LN,m),ot(_4,y),ot(w4,w),ot(g4,E),ot(m4,T),ot(I4,F),ot(T4,U),ot(E4,ie),ot(MN,P),ot(FN,H),ot(b4,ge),Te(R))if(R.length){const Ye=e.exposed||(e.exposed={});R.forEach(Ce=>{Object.defineProperty(Ye,Ce,{get:()=>n[Ce],set:kn=>n[Ce]=kn})})}else e.exposed||(e.exposed={});K&&e.render===Jr&&(e.render=K),tt!=null&&(e.inheritAttrs=tt),lt&&(e.components=lt),An&&(e.directives=An)}function P4(e,t,n=Jr,r=!1){Te(e)&&(e=h_(e));for(const i in e){const s=e[i];let a;gt(s)?"default"in s?a=Or(s.from||i,s.default,!0):a=Or(s.from||i):a=Or(s),It(a)&&r?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>a.value,set:c=>a.value=c}):t[i]=a}}function wC(e,t,n){Pr(Te(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function jN(e,t,n,r){const i=r.includes(".")?RN(n,r):()=>n[r];if(Bt(e)){const s=t[e];ke(s)&&js(i,s)}else if(ke(e))js(i,e.bind(n));else if(gt(e))if(Te(e))e.forEach(s=>jN(s,t,n,r));else{const s=ke(e.handler)?e.handler.bind(n):t[e.handler];ke(s)&&js(i,s,e)}}function Gw(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:i,optionsCache:s,config:{optionMergeStrategies:a}}=e.appContext,c=s.get(t);let l;return c?l=c:!i.length&&!n&&!r?l=t:(l={},i.length&&i.forEach(h=>wd(l,h,a,!0)),wd(l,t,a)),gt(t)&&s.set(t,l),l}function wd(e,t,n,r=!1){const{mixins:i,extends:s}=t;s&&wd(e,s,n,!0),i&&i.forEach(a=>wd(e,a,n,!0));for(const a in t)if(!(r&&a==="expose")){const c=O4[a]||n&&n[a];e[a]=c?c(e[a],t[a]):t[a]}return e}const O4={data:bC,props:bs,emits:bs,methods:bs,computed:bs,beforeCreate:xn,created:xn,beforeMount:xn,mounted:xn,beforeUpdate:xn,updated:xn,beforeDestroy:xn,beforeUnmount:xn,destroyed:xn,unmounted:xn,activated:xn,deactivated:xn,errorCaptured:xn,serverPrefetch:xn,components:bs,directives:bs,watch:x4,provide:bC,inject:D4};function bC(e,t){return t?e?function(){return Tn(ke(e)?e.call(this,this):e,ke(t)?t.call(this,this):t)}:t:e}function D4(e,t){return bs(h_(e),h_(t))}function h_(e){if(Te(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function xn(e,t){return e?[...new Set([].concat(e,t))]:t}function bs(e,t){return e?Tn(Tn(Object.create(null),e),t):t}function x4(e,t){if(!e)return t;if(!t)return e;const n=Tn(Object.create(null),e);for(const r in t)n[r]=xn(e[r],t[r]);return n}function L4(e,t,n,r=!1){const i={},s={};md(s,Ip,1),e.propsDefaults=Object.create(null),VN(e,t,i,s);for(const a in e.propsOptions[0])a in i||(i[a]=void 0);n?e.props=r?i:Wj(i):e.type.props?e.props=i:e.props=s,e.attrs=s}function M4(e,t,n,r){const{props:i,attrs:s,vnode:{patchFlag:a}}=e,c=He(i),[l]=e.propsOptions;let h=!1;if((r||a>0)&&!(a&16)){if(a&8){const d=e.vnode.dynamicProps;for(let v=0;v<d.length;v++){let m=d[v];if(wp(e.emitsOptions,m))continue;const y=t[m];if(l)if(qe(s,m))y!==s[m]&&(s[m]=y,h=!0);else{const w=Ii(m);i[w]=d_(l,c,w,y,e,!1)}else y!==s[m]&&(s[m]=y,h=!0)}}}else{VN(e,t,i,s)&&(h=!0);let d;for(const v in c)(!t||!qe(t,v)&&((d=ju(v))===v||!qe(t,d)))&&(l?n&&(n[v]!==void 0||n[d]!==void 0)&&(i[v]=d_(l,c,v,void 0,e,!0)):delete i[v]);if(s!==c)for(const v in s)(!t||!qe(t,v))&&(delete s[v],h=!0)}h&&Qi(e,"set","$attrs")}function VN(e,t,n,r){const[i,s]=e.propsOptions;let a=!1,c;if(t)for(let l in t){if(id(l))continue;const h=t[l];let d;i&&qe(i,d=Ii(l))?!s||!s.includes(d)?n[d]=h:(c||(c={}))[d]=h:wp(e.emitsOptions,l)||(!(l in r)||h!==r[l])&&(r[l]=h,a=!0)}if(s){const l=He(n),h=c||ct;for(let d=0;d<s.length;d++){const v=s[d];n[v]=d_(i,l,v,h[v],e,!qe(h,v))}}return a}function d_(e,t,n,r,i,s){const a=e[n];if(a!=null){const c=qe(a,"default");if(c&&r===void 0){const l=a.default;if(a.type!==Function&&ke(l)){const{propsDefaults:h}=i;n in h?r=h[n]:(fu(i),r=h[n]=l.call(null,t),Vs())}else r=l}a[0]&&(s&&!c?r=!1:a[1]&&(r===""||r===ju(n))&&(r=!0))}return r}function BN(e,t,n=!1){const r=t.propsCache,i=r.get(e);if(i)return i;const s=e.props,a={},c=[];let l=!1;if(!ke(e)){const d=v=>{l=!0;const[m,y]=BN(v,t,!0);Tn(a,m),y&&c.push(...y)};!n&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!s&&!l)return gt(e)&&r.set(e,eu),eu;if(Te(s))for(let d=0;d<s.length;d++){const v=Ii(s[d]);EC(v)&&(a[v]=ct)}else if(s)for(const d in s){const v=Ii(d);if(EC(v)){const m=s[d],y=a[v]=Te(m)||ke(m)?{type:m}:Object.assign({},m);if(y){const w=SC(Boolean,y.type),E=SC(String,y.type);y[0]=w>-1,y[1]=E<0||w<E,(w>-1||qe(y,"default"))&&c.push(v)}}}const h=[a,c];return gt(e)&&r.set(e,h),h}function EC(e){return e[0]!=="$"}function TC(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function IC(e,t){return TC(e)===TC(t)}function SC(e,t){return Te(t)?t.findIndex(n=>IC(n,e)):ke(t)&&IC(t,e)?0:-1}const qN=e=>e[0]==="_"||e==="$stable",zw=e=>Te(e)?e.map(gi):[gi(e)],F4=(e,t,n)=>{if(t._n)return t;const r=o4((...i)=>zw(t(...i)),n);return r._c=!1,r},HN=(e,t,n)=>{const r=e._ctx;for(const i in e){if(qN(i))continue;const s=e[i];if(ke(s))t[i]=F4(i,s,r);else if(s!=null){const a=zw(s);t[i]=()=>a}}},KN=(e,t)=>{const n=zw(t);e.slots.default=()=>n},U4=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=He(t),md(t,"_",n)):HN(t,e.slots={})}else e.slots={},t&&KN(e,t);md(e.slots,Ip,1)},j4=(e,t,n)=>{const{vnode:r,slots:i}=e;let s=!0,a=ct;if(r.shapeFlag&32){const c=t._;c?n&&c===1?s=!1:(Tn(i,t),!n&&c===1&&delete i._):(s=!t.$stable,HN(t,i)),a=t}else t&&(KN(e,t),a={default:1});if(s)for(const c in i)!qN(c)&&!(c in a)&&delete i[c]};function WN(){return{app:null,config:{isNativeTag:lj,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let V4=0;function B4(e,t){return function(r,i=null){ke(r)||(r=Object.assign({},r)),i!=null&&!gt(i)&&(i=null);const s=WN(),a=new Set;let c=!1;const l=s.app={_uid:V4++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:uV,get config(){return s.config},set config(h){},use(h,...d){return a.has(h)||(h&&ke(h.install)?(a.add(h),h.install(l,...d)):ke(h)&&(a.add(h),h(l,...d))),l},mixin(h){return s.mixins.includes(h)||s.mixins.push(h),l},component(h,d){return d?(s.components[h]=d,l):s.components[h]},directive(h,d){return d?(s.directives[h]=d,l):s.directives[h]},mount(h,d,v){if(!c){const m=Jn(r,i);return m.appContext=s,d&&t?t(m,h):e(m,h,v),c=!0,l._container=h,h.__vue_app__=l,Sp(m.component)||m.component.proxy}},unmount(){c&&(e(null,l._container),delete l._container.__vue_app__)},provide(h,d){return s.provides[h]=d,l}};return l}}function p_(e,t,n,r,i=!1){if(Te(e)){e.forEach((m,y)=>p_(m,t&&(Te(t)?t[y]:t),n,r,i));return}if(sd(r)&&!i)return;const s=r.shapeFlag&4?Sp(r.component)||r.component.proxy:r.el,a=i?null:s,{i:c,r:l}=e,h=t&&t.r,d=c.refs===ct?c.refs={}:c.refs,v=c.setupState;if(h!=null&&h!==l&&(Bt(h)?(d[h]=null,qe(v,h)&&(v[h]=null)):It(h)&&(h.value=null)),ke(l))Po(l,c,12,[a,d]);else{const m=Bt(l),y=It(l);if(m||y){const w=()=>{if(e.f){const E=m?qe(v,l)?v[l]:d[l]:l.value;i?Te(E)&&Ow(E,s):Te(E)?E.includes(s)||E.push(s):m?(d[l]=[s],qe(v,l)&&(v[l]=d[l])):(l.value=[s],e.k&&(d[e.k]=l.value))}else m?(d[l]=a,qe(v,l)&&(v[l]=a)):y&&(l.value=a,e.k&&(d[e.k]=a))};a?(w.id=-1,Yn(w,n)):w()}}}const Yn=f4;function q4(e){return H4(e)}function H4(e,t){const n=gj();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:a,createText:c,createComment:l,setText:h,setElementText:d,parentNode:v,nextSibling:m,setScopeId:y=Jr,insertStaticContent:w}=e,E=(I,N,x,M=null,j=null,Q=null,Z=!1,$=null,X=!!N.dynamicChildren)=>{if(I===N)return;I&&!Cs(I,N)&&(M=ne(I),Zt(I,j,Q,!0),I=null),N.patchFlag===-2&&(X=!1,N.dynamicChildren=null);const{type:W,ref:he,shapeFlag:ue}=N;switch(W){case Tp:T(I,N,x,M);break;case Zr:A(I,N,x,M);break;case py:I==null&&P(N,x,M,Z);break;case Xn:lt(I,N,x,M,j,Q,Z,$,X);break;default:ue&1?K(I,N,x,M,j,Q,Z,$,X):ue&6?An(I,N,x,M,j,Q,Z,$,X):(ue&64||ue&128)&&W.process(I,N,x,M,j,Q,Z,$,X,Ve)}he!=null&&j&&p_(he,I&&I.ref,Q,N||I,!N)},T=(I,N,x,M)=>{if(I==null)r(N.el=c(N.children),x,M);else{const j=N.el=I.el;N.children!==I.children&&h(j,N.children)}},A=(I,N,x,M)=>{I==null?r(N.el=l(N.children||""),x,M):N.el=I.el},P=(I,N,x,M)=>{[I.el,I.anchor]=w(I.children,N,x,M,I.el,I.anchor)},O=({el:I,anchor:N},x,M)=>{let j;for(;I&&I!==N;)j=m(I),r(I,x,M),I=j;r(N,x,M)},H=({el:I,anchor:N})=>{let x;for(;I&&I!==N;)x=m(I),i(I),I=x;i(N)},K=(I,N,x,M,j,Q,Z,$,X)=>{Z=Z||N.type==="svg",I==null?U(N,x,M,j,Q,Z,$,X):ge(I,N,j,Q,Z,$,X)},U=(I,N,x,M,j,Q,Z,$)=>{let X,W;const{type:he,props:ue,shapeFlag:de,transition:we,dirs:xe}=I;if(X=I.el=a(I.type,Q,ue&&ue.is,ue),de&8?d(X,I.children):de&16&&F(I.children,X,null,M,j,Q&&he!=="foreignObject",Z,$),xe&&ys(I,null,M,"created"),ue){for(const Ke in ue)Ke!=="value"&&!id(Ke)&&s(X,Ke,null,ue[Ke],Q,I.children,M,j,re);"value"in ue&&s(X,"value",null,ue.value),(W=ue.onVnodeBeforeMount)&&pi(W,M,I)}ie(X,I,I.scopeId,Z,M),xe&&ys(I,null,M,"beforeMount");const ve=(!j||j&&!j.pendingBranch)&&we&&!we.persisted;ve&&we.beforeEnter(X),r(X,N,x),((W=ue&&ue.onVnodeMounted)||ve||xe)&&Yn(()=>{W&&pi(W,M,I),ve&&we.enter(X),xe&&ys(I,null,M,"mounted")},j)},ie=(I,N,x,M,j)=>{if(x&&y(I,x),M)for(let Q=0;Q<M.length;Q++)y(I,M[Q]);if(j){let Q=j.subTree;if(N===Q){const Z=j.vnode;ie(I,Z,Z.scopeId,Z.slotScopeIds,j.parent)}}},F=(I,N,x,M,j,Q,Z,$,X=0)=>{for(let W=X;W<I.length;W++){const he=I[W]=$?bo(I[W]):gi(I[W]);E(null,he,N,x,M,j,Q,Z,$)}},ge=(I,N,x,M,j,Q,Z)=>{const $=N.el=I.el;let{patchFlag:X,dynamicChildren:W,dirs:he}=N;X|=I.patchFlag&16;const ue=I.props||ct,de=N.props||ct;let we;x&&_s(x,!1),(we=de.onVnodeBeforeUpdate)&&pi(we,x,N,I),he&&ys(N,I,x,"beforeUpdate"),x&&_s(x,!0);const xe=j&&N.type!=="foreignObject";if(W?R(I.dynamicChildren,W,$,x,M,xe,Q):Z||Ce(I,N,$,null,x,M,xe,Q,!1),X>0){if(X&16)tt($,N,ue,de,x,M,j);else if(X&2&&ue.class!==de.class&&s($,"class",null,de.class,j),X&4&&s($,"style",ue.style,de.style,j),X&8){const ve=N.dynamicProps;for(let Ke=0;Ke<ve.length;Ke++){const rt=ve[Ke],Wn=ue[rt],Oi=de[rt];(Oi!==Wn||rt==="value")&&s($,rt,Wn,Oi,j,I.children,x,M,re)}}X&1&&I.children!==N.children&&d($,N.children)}else!Z&&W==null&&tt($,N,ue,de,x,M,j);((we=de.onVnodeUpdated)||he)&&Yn(()=>{we&&pi(we,x,N,I),he&&ys(N,I,x,"updated")},M)},R=(I,N,x,M,j,Q,Z)=>{for(let $=0;$<N.length;$++){const X=I[$],W=N[$],he=X.el&&(X.type===Xn||!Cs(X,W)||X.shapeFlag&70)?v(X.el):x;E(X,W,he,null,M,j,Q,Z,!0)}},tt=(I,N,x,M,j,Q,Z)=>{if(x!==M){if(x!==ct)for(const $ in x)!id($)&&!($ in M)&&s(I,$,x[$],null,Z,N.children,j,Q,re);for(const $ in M){if(id($))continue;const X=M[$],W=x[$];X!==W&&$!=="value"&&s(I,$,W,X,Z,N.children,j,Q,re)}"value"in M&&s(I,"value",x.value,M.value)}},lt=(I,N,x,M,j,Q,Z,$,X)=>{const W=N.el=I?I.el:c(""),he=N.anchor=I?I.anchor:c("");let{patchFlag:ue,dynamicChildren:de,slotScopeIds:we}=N;we&&($=$?$.concat(we):we),I==null?(r(W,x,M),r(he,x,M),F(N.children,x,he,j,Q,Z,$,X)):ue>0&&ue&64&&de&&I.dynamicChildren?(R(I.dynamicChildren,de,x,j,Q,Z,$),(N.key!=null||j&&N===j.subTree)&&GN(I,N,!0)):Ce(I,N,x,he,j,Q,Z,$,X)},An=(I,N,x,M,j,Q,Z,$,X)=>{N.slotScopeIds=$,I==null?N.shapeFlag&512?j.ctx.activate(N,x,M,Z,X):Lt(N,x,M,j,Q,Z,X):ft(I,N,X)},Lt=(I,N,x,M,j,Q,Z)=>{const $=I.component=Z4(I,M,j);if(bp(I)&&($.ctx.renderer=Ve),eV($),$.asyncDep){if(j&&j.registerDep($,ot),!I.el){const X=$.subTree=Jn(Zr);A(null,X,N,x)}return}ot($,I,N,x,j,Q,Z)},ft=(I,N,x)=>{const M=N.component=I.component;if(u4(I,N,x))if(M.asyncDep&&!M.asyncResolved){Ye(M,N,x);return}else M.next=N,t4(M.update),M.update();else N.el=I.el,M.vnode=N},ot=(I,N,x,M,j,Q,Z)=>{const $=()=>{if(I.isMounted){let{next:he,bu:ue,u:de,parent:we,vnode:xe}=I,ve=he,Ke;_s(I,!1),he?(he.el=xe.el,Ye(I,he,Z)):he=xe,ue&&ly(ue),(Ke=he.props&&he.props.onVnodeBeforeUpdate)&&pi(Ke,we,he,xe),_s(I,!0);const rt=fy(I),Wn=I.subTree;I.subTree=rt,E(Wn,rt,v(Wn.el),ne(Wn),I,j,Q),he.el=rt.el,ve===null&&c4(I,rt.el),de&&Yn(de,j),(Ke=he.props&&he.props.onVnodeUpdated)&&Yn(()=>pi(Ke,we,he,xe),j)}else{let he;const{el:ue,props:de}=N,{bm:we,m:xe,parent:ve}=I,Ke=sd(N);if(_s(I,!1),we&&ly(we),!Ke&&(he=de&&de.onVnodeBeforeMount)&&pi(he,ve,N),_s(I,!0),ue&&Ie){const rt=()=>{I.subTree=fy(I),Ie(ue,I.subTree,I,j,null)};Ke?N.type.__asyncLoader().then(()=>!I.isUnmounted&&rt()):rt()}else{const rt=I.subTree=fy(I);E(null,rt,x,M,I,j,Q),N.el=rt.el}if(xe&&Yn(xe,j),!Ke&&(he=de&&de.onVnodeMounted)){const rt=N;Yn(()=>pi(he,ve,rt),j)}(N.shapeFlag&256||ve&&sd(ve.vnode)&&ve.vnode.shapeFlag&256)&&I.a&&Yn(I.a,j),I.isMounted=!0,N=x=M=null}},X=I.effect=new Mw($,()=>Ww(W),I.scope),W=I.update=()=>X.run();W.id=I.uid,_s(I,!0),W()},Ye=(I,N,x)=>{N.component=I;const M=I.vnode.props;I.vnode=N,I.next=null,M4(I,N.props,M,x),j4(I,N.children,x),Vu(),gC(),Bu()},Ce=(I,N,x,M,j,Q,Z,$,X=!1)=>{const W=I&&I.children,he=I?I.shapeFlag:0,ue=N.children,{patchFlag:de,shapeFlag:we}=N;if(de>0){if(de&128){Kn(W,ue,x,M,j,Q,Z,$,X);return}else if(de&256){kn(W,ue,x,M,j,Q,Z,$,X);return}}we&8?(he&16&&re(W,j,Q),ue!==W&&d(x,ue)):he&16?we&16?Kn(W,ue,x,M,j,Q,Z,$,X):re(W,j,Q,!0):(he&8&&d(x,""),we&16&&F(ue,x,M,j,Q,Z,$,X))},kn=(I,N,x,M,j,Q,Z,$,X)=>{I=I||eu,N=N||eu;const W=I.length,he=N.length,ue=Math.min(W,he);let de;for(de=0;de<ue;de++){const we=N[de]=X?bo(N[de]):gi(N[de]);E(I[de],we,x,null,j,Q,Z,$,X)}W>he?re(I,j,Q,!0,!1,ue):F(N,x,M,j,Q,Z,$,X,ue)},Kn=(I,N,x,M,j,Q,Z,$,X)=>{let W=0;const he=N.length;let ue=I.length-1,de=he-1;for(;W<=ue&&W<=de;){const we=I[W],xe=N[W]=X?bo(N[W]):gi(N[W]);if(Cs(we,xe))E(we,xe,x,null,j,Q,Z,$,X);else break;W++}for(;W<=ue&&W<=de;){const we=I[ue],xe=N[de]=X?bo(N[de]):gi(N[de]);if(Cs(we,xe))E(we,xe,x,null,j,Q,Z,$,X);else break;ue--,de--}if(W>ue){if(W<=de){const we=de+1,xe=we<he?N[we].el:M;for(;W<=de;)E(null,N[W]=X?bo(N[W]):gi(N[W]),x,xe,j,Q,Z,$,X),W++}}else if(W>de)for(;W<=ue;)Zt(I[W],j,Q,!0),W++;else{const we=W,xe=W,ve=new Map;for(W=xe;W<=de;W++){const bt=N[W]=X?bo(N[W]):gi(N[W]);bt.key!=null&&ve.set(bt.key,W)}let Ke,rt=0;const Wn=de-xe+1;let Oi=!1,wt=0;const oo=new Array(Wn);for(W=0;W<Wn;W++)oo[W]=0;for(W=we;W<=ue;W++){const bt=I[W];if(rt>=Wn){Zt(bt,j,Q,!0);continue}let ir;if(bt.key!=null)ir=ve.get(bt.key);else for(Ke=xe;Ke<=de;Ke++)if(oo[Ke-xe]===0&&Cs(bt,N[Ke])){ir=Ke;break}ir===void 0?Zt(bt,j,Q,!0):(oo[ir-xe]=W+1,ir>=wt?wt=ir:Oi=!0,E(bt,N[ir],x,null,j,Q,Z,$,X),rt++)}const oi=Oi?K4(oo):eu;for(Ke=oi.length-1,W=Wn-1;W>=0;W--){const bt=xe+W,ir=N[bt],en=bt+1<he?N[bt+1].el:M;oo[W]===0?E(null,ir,x,en,j,Q,Z,$,X):Oi&&(Ke<0||W!==oi[Ke]?Rn(ir,x,en,2):Ke--)}}},Rn=(I,N,x,M,j=null)=>{const{el:Q,type:Z,transition:$,children:X,shapeFlag:W}=I;if(W&6){Rn(I.component.subTree,N,x,M);return}if(W&128){I.suspense.move(N,x,M);return}if(W&64){Z.move(I,N,x,Ve);return}if(Z===Xn){r(Q,N,x);for(let ue=0;ue<X.length;ue++)Rn(X[ue],N,x,M);r(I.anchor,N,x);return}if(Z===py){O(I,N,x);return}if(M!==2&&W&1&&$)if(M===0)$.beforeEnter(Q),r(Q,N,x),Yn(()=>$.enter(Q),j);else{const{leave:ue,delayLeave:de,afterLeave:we}=$,xe=()=>r(Q,N,x),ve=()=>{ue(Q,()=>{xe(),we&&we()})};de?de(Q,xe,ve):ve()}else r(Q,N,x)},Zt=(I,N,x,M=!1,j=!1)=>{const{type:Q,props:Z,ref:$,children:X,dynamicChildren:W,shapeFlag:he,patchFlag:ue,dirs:de}=I;if($!=null&&p_($,null,x,I,!0),he&256){N.ctx.deactivate(I);return}const we=he&1&&de,xe=!sd(I);let ve;if(xe&&(ve=Z&&Z.onVnodeBeforeUnmount)&&pi(ve,N,I),he&6)V(I.component,x,M);else{if(he&128){I.suspense.unmount(x,M);return}we&&ys(I,null,N,"beforeUnmount"),he&64?I.type.remove(I,N,x,j,Ve,M):W&&(Q!==Xn||ue>0&&ue&64)?re(W,N,x,!1,!0):(Q===Xn&&ue&384||!j&&he&16)&&re(X,N,x),M&&Pi(I)}(xe&&(ve=Z&&Z.onVnodeUnmounted)||we)&&Yn(()=>{ve&&pi(ve,N,I),we&&ys(I,null,N,"unmounted")},x)},Pi=I=>{const{type:N,el:x,anchor:M,transition:j}=I;if(N===Xn){Jo(x,M);return}if(N===py){H(I);return}const Q=()=>{i(x),j&&!j.persisted&&j.afterLeave&&j.afterLeave()};if(I.shapeFlag&1&&j&&!j.persisted){const{leave:Z,delayLeave:$}=j,X=()=>Z(x,Q);$?$(I.el,Q,X):X()}else Q()},Jo=(I,N)=>{let x;for(;I!==N;)x=m(I),i(I),I=x;i(N)},V=(I,N,x)=>{const{bum:M,scope:j,update:Q,subTree:Z,um:$}=I;M&&ly(M),j.stop(),Q&&(Q.active=!1,Zt(Z,I,N,x)),$&&Yn($,N),Yn(()=>{I.isUnmounted=!0},N),N&&N.pendingBranch&&!N.isUnmounted&&I.asyncDep&&!I.asyncResolved&&I.suspenseId===N.pendingId&&(N.deps--,N.deps===0&&N.resolve())},re=(I,N,x,M=!1,j=!1,Q=0)=>{for(let Z=Q;Z<I.length;Z++)Zt(I[Z],N,x,M,j)},ne=I=>I.shapeFlag&6?ne(I.component.subTree):I.shapeFlag&128?I.suspense.next():m(I.anchor||I.el),J=(I,N,x)=>{I==null?N._vnode&&Zt(N._vnode,null,null,!0):E(N._vnode||null,I,N,null,null,null,x),gC(),IN(),N._vnode=I},Ve={p:E,um:Zt,m:Rn,r:Pi,mt:Lt,mc:F,pc:Ce,pbc:R,n:ne,o:e};let at,Ie;return t&&([at,Ie]=t(Ve)),{render:J,hydrate:at,createApp:B4(J,at)}}function _s({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function GN(e,t,n=!1){const r=e.children,i=t.children;if(Te(r)&&Te(i))for(let s=0;s<r.length;s++){const a=r[s];let c=i[s];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=i[s]=bo(i[s]),c.el=a.el),n||GN(a,c)),c.type===Tp&&(c.el=a.el)}}function K4(e){const t=e.slice(),n=[0];let r,i,s,a,c;const l=e.length;for(r=0;r<l;r++){const h=e[r];if(h!==0){if(i=n[n.length-1],e[i]<h){t[r]=i,n.push(r);continue}for(s=0,a=n.length-1;s<a;)c=s+a>>1,e[n[c]]<h?s=c+1:a=c;h<e[n[s]]&&(s>0&&(t[r]=n[s-1]),n[s]=r)}}for(s=n.length,a=n[s-1];s-- >0;)n[s]=a,a=t[a];return n}const W4=e=>e.__isTeleport,Xn=Symbol(void 0),Tp=Symbol(void 0),Zr=Symbol(void 0),py=Symbol(void 0),nl=[];let Yr=null;function vn(e=!1){nl.push(Yr=e?null:[])}function G4(){nl.pop(),Yr=nl[nl.length-1]||null}let Sl=1;function CC(e){Sl+=e}function zN(e){return e.dynamicChildren=Sl>0?Yr||eu:null,G4(),Sl>0&&Yr&&Yr.push(e),e}function cr(e,t,n,r,i,s){return zN(Oo(e,t,n,r,i,s,!0))}function $w(e,t,n,r,i){return zN(Jn(e,t,n,r,i,!0))}function v_(e){return e?e.__v_isVNode===!0:!1}function Cs(e,t){return e.type===t.type&&e.key===t.key}const Ip="__vInternal",$N=({key:e})=>e??null,ad=({ref:e,ref_key:t,ref_for:n})=>e!=null?Bt(e)||It(e)||ke(e)?{i:dr,r:e,k:t,f:!!n}:e:null;function Oo(e,t=null,n=null,r=0,i=null,s=e===Xn?0:1,a=!1,c=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&$N(t),ref:t&&ad(t),scopeId:AN,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:dr};return c?(Qw(l,n),s&128&&e.normalize(l)):n&&(l.shapeFlag|=Bt(n)?8:16),Sl>0&&!a&&Yr&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&Yr.push(l),l}const Jn=z4;function z4(e,t=null,n=null,r=0,i=null,s=!1){if((!e||e===A4)&&(e=Zr),v_(e)){const c=jo(e,t,!0);return n&&Qw(c,n),Sl>0&&!s&&Yr&&(c.shapeFlag&6?Yr[Yr.indexOf(e)]=c:Yr.push(c)),c.patchFlag|=-2,c}if(oV(e)&&(e=e.__vccOpts),t){t=$4(t);let{class:c,style:l}=t;c&&!Bt(c)&&(t.class=Nw(c)),gt(l)&&(vN(l)&&!Te(l)&&(l=Tn({},l)),t.style=Rw(l))}const a=Bt(e)?1:l4(e)?128:W4(e)?64:gt(e)?4:ke(e)?2:0;return Oo(e,t,n,r,i,a,s,!0)}function $4(e){return e?vN(e)||Ip in e?Tn({},e):e:null}function jo(e,t,n=!1){const{props:r,ref:i,patchFlag:s,children:a}=e,c=t?Y4(r||{},t):r;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&$N(c),ref:t&&t.ref?n&&i?Te(i)?i.concat(ad(t)):[i,ad(t)]:ad(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Xn?s===-1?16:s|16:s,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&jo(e.ssContent),ssFallback:e.ssFallback&&jo(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx}}function ru(e=" ",t=0){return Jn(Tp,null,e,t)}function Q4(e="",t=!1){return t?(vn(),$w(Zr,null,e)):Jn(Zr,null,e)}function gi(e){return e==null||typeof e=="boolean"?Jn(Zr):Te(e)?Jn(Xn,null,e.slice()):typeof e=="object"?bo(e):Jn(Tp,null,String(e))}function bo(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:jo(e)}function Qw(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(Te(t))n=16;else if(typeof t=="object")if(r&65){const i=t.default;i&&(i._c&&(i._d=!1),Qw(e,i()),i._c&&(i._d=!0));return}else{n=32;const i=t._;!i&&!(Ip in t)?t._ctx=dr:i===3&&dr&&(dr.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ke(t)?(t={default:t,_ctx:dr},n=32):(t=String(t),r&64?(n=16,t=[ru(t)]):n=8);e.children=t,e.shapeFlag|=n}function Y4(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const i in r)if(i==="class")t.class!==r.class&&(t.class=Nw([t.class,r.class]));else if(i==="style")t.style=Rw([t.style,r.style]);else if(pp(i)){const s=t[i],a=r[i];a&&s!==a&&!(Te(s)&&s.includes(a))&&(t[i]=s?[].concat(s,a):a)}else i!==""&&(t[i]=r[i])}return t}function pi(e,t,n,r=null){Pr(e,t,7,[n,r])}const X4=WN();let J4=0;function Z4(e,t,n){const r=e.type,i=(t?t.appContext:e.appContext)||X4,s={uid:J4++,vnode:e,type:r,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new nN(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:BN(r,i),emitsOptions:CN(r,i),emit:null,emitted:null,propsDefaults:ct,inheritAttrs:r.inheritAttrs,ctx:ct,data:ct,props:ct,attrs:ct,slots:ct,refs:ct,setupState:ct,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=i4.bind(null,s),e.ce&&e.ce(s),s}let $t=null;const QN=()=>$t||dr,fu=e=>{$t=e,e.scope.on()},Vs=()=>{$t&&$t.scope.off(),$t=null};function YN(e){return e.vnode.shapeFlag&4}let Cl=!1;function eV(e,t=!1){Cl=t;const{props:n,children:r}=e.vnode,i=YN(e);L4(e,n,i,t),U4(e,r);const s=i?tV(e,t):void 0;return Cl=!1,s}function tV(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=lu(new Proxy(e.ctx,R4));const{setup:r}=n;if(r){const i=e.setupContext=r.length>1?rV(e):null;fu(e),Vu();const s=Po(r,e,0,[e.props,i]);if(Bu(),Vs(),JR(s)){if(s.then(Vs,Vs),t)return s.then(a=>{AC(e,a,t)}).catch(a=>{_p(a,e,0)});e.asyncDep=s}else AC(e,s,t)}else XN(e,t)}function AC(e,t,n){ke(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:gt(t)&&(e.setupState=_N(t)),XN(e,n)}let kC;function XN(e,t,n){const r=e.type;if(!e.render){if(!t&&kC&&!r.render){const i=r.template||Gw(e).template;if(i){const{isCustomElement:s,compilerOptions:a}=e.appContext.config,{delimiters:c,compilerOptions:l}=r,h=Tn(Tn({isCustomElement:s,delimiters:c},a),l);r.render=kC(i,h)}}e.render=r.render||Jr}fu(e),Vu(),N4(e),Bu(),Vs()}function nV(e){return new Proxy(e.attrs,{get(t,n){return mr(e,"get","$attrs"),t[n]}})}function rV(e){const t=r=>{e.exposed=r||{}};let n;return{get attrs(){return n||(n=nV(e))},slots:e.slots,emit:e.emit,expose:t}}function Sp(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(_N(lu(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in tl)return tl[n](e)},has(t,n){return n in t||n in tl}}))}function iV(e,t=!0){return ke(e)?e.displayName||e.name:e.name||t&&e.__name}function oV(e){return ke(e)&&"__vccOpts"in e}const sn=(e,t)=>Jj(e,t,Cl);function Yw(e,t,n){const r=arguments.length;return r===2?gt(t)&&!Te(t)?v_(t)?Jn(e,null,[t]):Jn(e,t):Jn(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&v_(n)&&(n=[n]),Jn(e,t,n))}const sV=Symbol(""),aV=()=>Or(sV),uV="3.2.45",cV="http://www.w3.org/2000/svg",As=typeof document<"u"?document:null,RC=As&&As.createElement("template"),lV={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const i=t?As.createElementNS(cV,e):As.createElement(e,n?{is:n}:void 0);return e==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:e=>As.createTextNode(e),createComment:e=>As.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>As.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,i,s){const a=n?n.previousSibling:t.lastChild;if(i&&(i===s||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{RC.innerHTML=r?`<svg>${e}</svg>`:e;const c=RC.content;if(r){const l=c.firstChild;for(;l.firstChild;)c.appendChild(l.firstChild);c.removeChild(l)}t.insertBefore(c,n)}return[a?a.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function fV(e,t,n){const r=e._vtc;r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function hV(e,t,n){const r=e.style,i=Bt(n);if(n&&!i){for(const s in n)g_(r,s,n[s]);if(t&&!Bt(t))for(const s in t)n[s]==null&&g_(r,s,"")}else{const s=r.display;i?t!==n&&(r.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(r.display=s)}}const NC=/\s*!important$/;function g_(e,t,n){if(Te(n))n.forEach(r=>g_(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=dV(e,t);NC.test(n)?e.setProperty(ju(r),n.replace(NC,""),"important"):e[r]=n}}const PC=["Webkit","Moz","ms"],vy={};function dV(e,t){const n=vy[t];if(n)return n;let r=Ii(t);if(r!=="filter"&&r in e)return vy[t]=r;r=mp(r);for(let i=0;i<PC.length;i++){const s=PC[i]+r;if(s in e)return vy[t]=s}return t}const OC="http://www.w3.org/1999/xlink";function pV(e,t,n,r,i){if(r&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(OC,t.slice(6,t.length)):e.setAttributeNS(OC,t,n);else{const s=cj(t);n==null||s&&!QR(n)?e.removeAttribute(t):e.setAttribute(t,s?"":n)}}function vV(e,t,n,r,i,s,a){if(t==="innerHTML"||t==="textContent"){r&&a(r,i,s),e[t]=n??"";return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=n;const l=n??"";(e.value!==l||e.tagName==="OPTION")&&(e.value=l),n==null&&e.removeAttribute(t);return}let c=!1;if(n===""||n==null){const l=typeof e[t];l==="boolean"?n=QR(n):n==null&&l==="string"?(n="",c=!0):l==="number"&&(n=0,c=!0)}try{e[t]=n}catch{}c&&e.removeAttribute(t)}function gV(e,t,n,r){e.addEventListener(t,n,r)}function mV(e,t,n,r){e.removeEventListener(t,n,r)}function yV(e,t,n,r,i=null){const s=e._vei||(e._vei={}),a=s[t];if(r&&a)a.value=r;else{const[c,l]=_V(t);if(r){const h=s[t]=EV(r,i);gV(e,c,h,l)}else a&&(mV(e,c,a,l),s[t]=void 0)}}const DC=/(?:Once|Passive|Capture)$/;function _V(e){let t;if(DC.test(e)){t={};let r;for(;r=e.match(DC);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):ju(e.slice(2)),t]}let gy=0;const wV=Promise.resolve(),bV=()=>gy||(wV.then(()=>gy=0),gy=Date.now());function EV(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Pr(TV(r,n.value),t,5,[r])};return n.value=e,n.attached=bV(),n}function TV(e,t){if(Te(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>i=>!i._stopped&&r&&r(i))}else return t}const xC=/^on[a-z]/,IV=(e,t,n,r,i=!1,s,a,c,l)=>{t==="class"?fV(e,r,i):t==="style"?hV(e,n,r):pp(t)?Pw(t)||yV(e,t,n,r,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):SV(e,t,r,i))?vV(e,t,r,s,a,c,l):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),pV(e,t,r,i))};function SV(e,t,n,r){return r?!!(t==="innerHTML"||t==="textContent"||t in e&&xC.test(t)&&ke(n)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||xC.test(t)&&Bt(n)?!1:t in e}const CV={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};v4.props;const AV={beforeMount(e,{value:t},{transition:n}){e._vod=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):Hc(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:r}){!t!=!n&&(r?t?(r.beforeEnter(e),Hc(e,!0),r.enter(e)):r.leave(e,()=>{Hc(e,!1)}):Hc(e,t))},beforeUnmount(e,{value:t}){Hc(e,t)}};function Hc(e,t){e.style.display=t?e._vod:"none"}const kV=Tn({patchProp:IV},lV);let LC;function RV(){return LC||(LC=q4(kV))}const NV=(...e)=>{const t=RV().createApp(...e),{mount:n}=t;return t.mount=r=>{const i=PV(r);if(!i)return;const s=t._component;!ke(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.innerHTML="";const a=n(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),a},t};function PV(e){return Bt(e)?document.querySelector(e):e}var OV=!1;/*!
  * pinia v2.0.29
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */let JN;const Cp=e=>JN=e,ZN=Symbol();function m_(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var rl;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(rl||(rl={}));function DV(){const e=rN(!0),t=e.run(()=>qw({}));let n=[],r=[];const i=lu({install(s){Cp(i),i._a=s,s.provide(ZN,i),s.config.globalProperties.$pinia=i,r.forEach(a=>n.push(a)),r=[]},use(s){return!this._a&&!OV?r.push(s):n.push(s),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return i}const e1=()=>{};function MC(e,t,n,r=e1){e.push(t);const i=()=>{const s=e.indexOf(t);s>-1&&(e.splice(s,1),r())};return!n&&yj()&&_j(i),i}function qa(e,...t){e.slice().forEach(n=>{n(...t)})}function y_(e,t){e instanceof Map&&t instanceof Map&&t.forEach((n,r)=>e.set(r,n)),e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const r=t[n],i=e[n];m_(i)&&m_(r)&&e.hasOwnProperty(n)&&!It(r)&&!Wi(r)?e[n]=y_(i,r):e[n]=r}return e}const xV=Symbol();function LV(e){return!m_(e)||!e.hasOwnProperty(xV)}const{assign:Eo}=Object;function MV(e){return!!(It(e)&&e.effect)}function FV(e,t,n,r){const{state:i,actions:s,getters:a}=t,c=n.state.value[e];let l;function h(){c||(n.state.value[e]=i?i():{});const d=Qj(n.state.value[e]);return Eo(d,s,Object.keys(a||{}).reduce((v,m)=>(v[m]=lu(sn(()=>{Cp(n);const y=n._s.get(e);return a[m].call(y,y)})),v),{}))}return l=t1(e,h,t,n,r,!0),l.$reset=function(){const v=i?i():{};this.$patch(m=>{Eo(m,v)})},l}function t1(e,t,n={},r,i,s){let a;const c=Eo({actions:{}},n),l={deep:!0};let h,d,v=lu([]),m=lu([]),y;const w=r.state.value[e];!s&&!w&&(r.state.value[e]={}),qw({});let E;function T(ie){let F;h=d=!1,typeof ie=="function"?(ie(r.state.value[e]),F={type:rl.patchFunction,storeId:e,events:y}):(y_(r.state.value[e],ie),F={type:rl.patchObject,payload:ie,storeId:e,events:y});const ge=E=Symbol();Kw().then(()=>{E===ge&&(h=!0)}),d=!0,qa(v,F,r.state.value[e])}const A=e1;function P(){a.stop(),v=[],m=[],r._s.delete(e)}function O(ie,F){return function(){Cp(r);const ge=Array.from(arguments),R=[],tt=[];function lt(ft){R.push(ft)}function An(ft){tt.push(ft)}qa(m,{args:ge,name:ie,store:K,after:lt,onError:An});let Lt;try{Lt=F.apply(this&&this.$id===e?this:K,ge)}catch(ft){throw qa(tt,ft),ft}return Lt instanceof Promise?Lt.then(ft=>(qa(R,ft),ft)).catch(ft=>(qa(tt,ft),Promise.reject(ft))):(qa(R,Lt),Lt)}}const H={_p:r,$id:e,$onAction:MC.bind(null,m),$patch:T,$reset:A,$subscribe(ie,F={}){const ge=MC(v,ie,F.detached,()=>R()),R=a.run(()=>js(()=>r.state.value[e],tt=>{(F.flush==="sync"?d:h)&&ie({storeId:e,type:rl.direct,events:y},tt)},Eo({},l,F)));return ge},$dispose:P},K=qu(H);r._s.set(e,K);const U=r._e.run(()=>(a=rN(),a.run(()=>t())));for(const ie in U){const F=U[ie];if(It(F)&&!MV(F)||Wi(F))s||(w&&LV(F)&&(It(F)?F.value=w[ie]:y_(F,w[ie])),r.state.value[e][ie]=F);else if(typeof F=="function"){const ge=O(ie,F);U[ie]=ge,c.actions[ie]=F}}return Eo(K,U),Eo(He(K),U),Object.defineProperty(K,"$state",{get:()=>r.state.value[e],set:ie=>{T(F=>{Eo(F,ie)})}}),r._p.forEach(ie=>{Eo(K,a.run(()=>ie({store:K,app:r._a,pinia:r,options:c})))}),w&&s&&n.hydrate&&n.hydrate(K.$state,w),h=!0,d=!0,K}function n1(e,t,n){let r,i;const s=typeof t=="function";typeof e=="string"?(r=e,i=s?n:t):(i=e,r=e.id);function a(c,l){const h=QN();return c=c||h&&Or(ZN,null),c&&Cp(c),c=JN,c._s.has(r)||(s?t1(r,t,i,c):FV(r,i,c)),c._s.get(r)}return a.$id=r,a}function bd(e){{e=He(e);const t={};for(const n in e){const r=e[n];(It(r)||Wi(r))&&(t[n]=wN(e,n))}return t}}var __=function(e,t){return __=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},__(e,t)};function te(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");__(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var me=function(){return me=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},me.apply(this,arguments)};function k(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function c(d){try{h(r.next(d))}catch(v){a(v)}}function l(d){try{h(r.throw(d))}catch(v){a(v)}}function h(d){d.done?s(d.value):i(d.value).then(c,l)}h((r=r.apply(e,t||[])).next())})}function C(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(h){return function(d){return l([h,d])}}function l(h){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,h[0]&&(n=0)),n;)try{if(r=1,i&&(s=h[0]&2?i.return:h[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,h[1])).done)return s;switch(i=0,s&&(h=[h[0]&2,s.value]),h[0]){case 0:case 1:s=h;break;case 4:return n.label++,{value:h[1],done:!1};case 5:n.label++,i=h[1],h=[0];continue;case 7:h=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(h[0]===6||h[0]===2)){n=0;continue}if(h[0]===3&&(!s||h[1]>s[0]&&h[1]<s[3])){n.label=h[1];break}if(h[0]===6&&n.label<s[1]){n.label=s[1],s=h;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(h);break}s[2]&&n.ops.pop(),n.trys.pop();continue}h=t.call(e,n)}catch(d){h=[6,d],i=0}finally{r=s=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function Xt(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function an(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,s=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return s}function Ne(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var r1={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var z=function(e,t){if(!e)throw Hu(t)},Hu=function(e){return new Error("Firebase Database ("+r1.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var i1=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},UV=function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){var s=e[n++],a=e[n++],c=e[n++],l=((i&7)<<18|(s&63)<<12|(a&63)<<6|c&63)-65536;t[r++]=String.fromCharCode(55296+(l>>10)),t[r++]=String.fromCharCode(56320+(l&1023))}else{var s=e[n++],a=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return t.join("")},Ap={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var s=e[i],a=i+1<e.length,c=a?e[i+1]:0,l=i+2<e.length,h=l?e[i+2]:0,d=s>>2,v=(s&3)<<4|c>>4,m=(c&15)<<2|h>>6,y=h&63;l||(y=64,a||(m=64)),r.push(n[d],n[v],n[m],n[y])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(i1(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):UV(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var s=n[e.charAt(i++)],a=i<e.length,c=a?n[e.charAt(i)]:0;++i;var l=i<e.length,h=l?n[e.charAt(i)]:64;++i;var d=i<e.length,v=d?n[e.charAt(i)]:64;if(++i,s==null||c==null||h==null||v==null)throw Error();var m=s<<2|c>>4;if(r.push(m),h!==64){var y=c<<4&240|h>>2;if(r.push(y),v!==64){var w=h<<6&192|v;r.push(w)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},o1=function(e){var t=i1(e);return Ap.encodeByteArray(t,!0)},FC=function(e){return o1(e).replace(/\./g,"")},UC=function(e){try{return Ap.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s1(e){return Al(void 0,e)}function Al(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:var n=t;return new Date(n.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return t}for(var r in t)!t.hasOwnProperty(r)||!jV(r)||(e[r]=Al(e[r],t[r]));return e}function jV(e){return e!=="__proto__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qt=function(){function e(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(n,r){t.resolve=n,t.reject=r})}return e.prototype.wrapCallback=function(t){var n=this;return function(r,i){r?n.reject(r):n.resolve(i),typeof t=="function"&&(n.promise.catch(function(){}),t.length===1?t(r):t(r,i))}},e}();/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xw(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=me({iss:"https://securetoken.google.com/"+r,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e),c="";return[FC(JSON.stringify(n)),FC(JSON.stringify(a)),c].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zs(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Jw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(zs())}function a1(){try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function VV(){return typeof self=="object"&&self.self===self}function Zw(){var e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function u1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function BV(){return zs().indexOf("Electron/")>=0}function qV(){var e=zs();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function HV(){return zs().indexOf("MSAppHost/")>=0}function c1(){return r1.NODE_ADMIN===!0}function KV(){return!a1()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function nf(){return"indexedDB"in self&&indexedDB!=null}function eb(){return new Promise(function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(s){t(s)}})}function l1(){return!(!navigator||!navigator.cookieEnabled)}function WV(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var GV="FirebaseError",Ku=function(e){te(t,e);function t(n,r,i){var s=e.call(this,r)||this;return s.code=n,s.customData=i,s.name=GV,Object.setPrototypeOf(s,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(s,to.prototype.create),s}return t}(Error),to=function(){function e(t,n,r){this.service=t,this.serviceName=n,this.errors=r}return e.prototype.create=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=n[0]||{},s=this.service+"/"+t,a=this.errors[t],c=a?zV(a,i):"Error",l=this.serviceName+": "+c+" ("+s+").",h=new Ku(s,l,i);return h},e}();function zV(e,t){return e.replace($V,function(n,r){var i=t[r];return i!=null?String(i):"<"+r+"?>"})}var $V=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kl(e){return JSON.parse(e)}function Ut(e){return JSON.stringify(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tb=function(e){var t={},n={},r={},i="";try{var s=e.split(".");t=kl(UC(s[0])||""),n=kl(UC(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:t,claims:n,data:r,signature:i}},QV=function(e){var t=tb(e).claims;return typeof t=="object"&&t.hasOwnProperty("iat")?t.iat:null},YV=function(e){var t=tb(e),n=t.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},XV=function(e){var t=tb(e).claims;return typeof t=="object"&&t.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yr(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function $s(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function w_(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Ed(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JV(e){for(var t=[],n=function(l,h){Array.isArray(h)?h.forEach(function(d){t.push(encodeURIComponent(l)+"="+encodeURIComponent(d))}):t.push(encodeURIComponent(l)+"="+encodeURIComponent(h))},r=0,i=Object.entries(e);r<i.length;r++){var s=i[r],a=s[0],c=s[1];n(a,c)}return t.length?"&"+t.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ZV=function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(t,n){n||(n=0);var r=this.W_;if(typeof t=="string")for(var i=0;i<16;i++)r[i]=t.charCodeAt(n)<<24|t.charCodeAt(n+1)<<16|t.charCodeAt(n+2)<<8|t.charCodeAt(n+3),n+=4;else for(var i=0;i<16;i++)r[i]=t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3],n+=4;for(var i=16;i<80;i++){var s=r[i-3]^r[i-8]^r[i-14]^r[i-16];r[i]=(s<<1|s>>>31)&4294967295}for(var a=this.chain_[0],c=this.chain_[1],l=this.chain_[2],h=this.chain_[3],d=this.chain_[4],v,m,i=0;i<80;i++){i<40?i<20?(v=h^c&(l^h),m=1518500249):(v=c^l^h,m=1859775393):i<60?(v=c&l|h&(c|l),m=2400959708):(v=c^l^h,m=3395469782);var s=(a<<5|a>>>27)+v+d+m+r[i]&4294967295;d=h,h=l,l=(c<<30|c>>>2)&4294967295,c=a,a=s}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+c&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295},e.prototype.update=function(t,n){if(t!=null){n===void 0&&(n=t.length);for(var r=n-this.blockSize,i=0,s=this.buf_,a=this.inbuf_;i<n;){if(a===0)for(;i<=r;)this.compress_(t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<n;)if(s[a]=t.charCodeAt(i),++a,++i,a===this.blockSize){this.compress_(s),a=0;break}}else for(;i<n;)if(s[a]=t[i],++a,++i,a===this.blockSize){this.compress_(s),a=0;break}}this.inbuf_=a,this.total_+=n}},e.prototype.digest=function(){var t=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);for(var i=0,r=0;r<5;r++)for(var s=24;s>=0;s-=8)t[i]=this.chain_[r]>>s&255,++i;return t},e}();function eB(e,t){var n=new tB(e,t);return n.subscribe.bind(n)}var tB=function(){function e(t,n){var r=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(function(){t(r)}).catch(function(i){r.error(i)})}return e.prototype.next=function(t){this.forEachObserver(function(n){n.next(t)})},e.prototype.error=function(t){this.forEachObserver(function(n){n.error(t)}),this.close(t)},e.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},e.prototype.subscribe=function(t,n,r){var i=this,s;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");nB(t,["next","error","complete"])?s=t:s={next:t,error:n,complete:r},s.next===void 0&&(s.next=my),s.error===void 0&&(s.error=my),s.complete===void 0&&(s.complete=my);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?s.error(i.finalError):s.complete()}catch{}}),this.observers.push(s),a},e.prototype.unsubscribeOne=function(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))},e.prototype.forEachObserver=function(t){if(!this.finalized)for(var n=0;n<this.observers.length;n++)this.sendOne(n,t)},e.prototype.sendOne=function(t,n){var r=this;this.task.then(function(){if(r.observers!==void 0&&r.observers[t]!==void 0)try{n(r.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})},e.prototype.close=function(t){var n=this;this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(function(){n.observers=void 0,n.onNoObservers=void 0}))},e}();function nB(e,t){if(typeof e!="object"||e===null)return!1;for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i in e&&typeof e[i]=="function")return!0}return!1}function my(){}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ye=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=n===0?"none":"no more than "+n),i){var s=e+" failed: Was called with "+r+(r===1?" argument.":" arguments.")+" Expects "+i+".";throw new Error(s)}};function er(e,t){return e+" failed: "+t+" argument "}function Wt(e,t,n,r){if(!(r&&!n)&&typeof n!="function")throw new Error(er(e,t)+"must be a valid function.")}function jC(e,t,n,r){if(!(r&&!n)&&(typeof n!="object"||n===null))throw new Error(er(e,t)+"must be a valid context object.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rB=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var s=i-55296;r++,z(r<e.length,"Surrogate pair missing trail surrogate.");var a=e.charCodeAt(r)-56320;i=65536+(s<<10)+a}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},kp=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var iB=1e3,oB=2,sB=4*60*60*1e3,aB=.5;function b_(e,t,n){t===void 0&&(t=iB),n===void 0&&(n=oB);var r=t*Math.pow(n,e),i=Math.round(aB*r*(Math.random()-.5)*2);return Math.min(sB,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(e){return e&&e._delegate?e._delegate:e}var In=function(){function e(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return e.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},e.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},e.prototype.setServiceProps=function(t){return this.serviceProps=t,this},e.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Es="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var f1=function(){function e(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return e.prototype.get=function(t){var n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){var r=new Qt;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{var i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise},e.prototype.getImmediate=function(t){var n,r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error("Service "+this.name+" is not available")}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(t){var n,r;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,!!this.shouldAutoInitialize()){if(cB(t))try{this.getOrInitializeService({instanceIdentifier:Es})}catch{}try{for(var i=Xt(this.instancesDeferred.entries()),s=i.next();!s.done;s=i.next()){var a=an(s.value,2),c=a[0],l=a[1],h=this.normalizeInstanceIdentifier(c);try{var d=this.getOrInitializeService({instanceIdentifier:h});l.resolve(d)}catch{}}}catch(v){n={error:v}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}},e.prototype.clearInstance=function(t){t===void 0&&(t=Es),this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)},e.prototype.delete=function(){return k(this,void 0,void 0,function(){var t;return C(this,function(n){switch(n.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Ne(Ne([],an(t.filter(function(r){return"INTERNAL"in r}).map(function(r){return r.INTERNAL.delete()}))),an(t.filter(function(r){return"_delete"in r}).map(function(r){return r._delete()}))))];case 1:return n.sent(),[2]}})})},e.prototype.isComponentSet=function(){return this.component!=null},e.prototype.isInitialized=function(t){return t===void 0&&(t=Es),this.instances.has(t)},e.prototype.getOptions=function(t){return t===void 0&&(t=Es),this.instancesOptions.get(t)||{}},e.prototype.initialize=function(t){var n,r;t===void 0&&(t={});var i=t.options,s=i===void 0?{}:i,a=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(a))throw Error(this.name+"("+a+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var c=this.getOrInitializeService({instanceIdentifier:a,options:s});try{for(var l=Xt(this.instancesDeferred.entries()),h=l.next();!h.done;h=l.next()){var d=an(h.value,2),v=d[0],m=d[1],y=this.normalizeInstanceIdentifier(v);a===y&&m.resolve(c)}}catch(w){n={error:w}}finally{try{h&&!h.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}return c},e.prototype.onInit=function(t,n){var r,i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);var a=this.instances.get(i);return a&&t(a,i),function(){s.delete(t)}},e.prototype.invokeOnInitCallbacks=function(t,n){var r,i,s=this.onInitCallbacks.get(n);if(s)try{for(var a=Xt(s),c=a.next();!c.done;c=a.next()){var l=c.value;try{l(t,n)}catch{}}}catch(h){r={error:h}}finally{try{c&&!c.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}},e.prototype.getOrInitializeService=function(t){var n=t.instanceIdentifier,r=t.options,i=r===void 0?{}:r,s=this.instances.get(n);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:uB(n),options:i}),this.instances.set(n,s),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(s,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,s)}catch{}return s||null},e.prototype.normalizeInstanceIdentifier=function(t){return t===void 0&&(t=Es),this.component?this.component.multipleInstances?t:Es:t},e.prototype.shouldAutoInitialize=function(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"},e}();function uB(e){return e===Es?void 0:e}function cB(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var h1=function(){function e(t){this.name=t,this.providers=new Map}return e.prototype.addComponent=function(t){var n=this.getProvider(t.name);if(n.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);n.setComponent(t)},e.prototype.addOrOverwriteComponent=function(t){var n=this.getProvider(t.name);n.isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},e.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var n=new f1(t,this);return this.providers.set(t,n),n},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function zr(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var s=arguments[t],a=0,c=s.length;a<c;a++,i++)r[i]=s[a];return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ws,nb=[],Le;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Le||(Le={}));var d1={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},lB=Le.INFO,fB=(ws={},ws[Le.DEBUG]="log",ws[Le.VERBOSE]="log",ws[Le.INFO]="info",ws[Le.WARN]="warn",ws[Le.ERROR]="error",ws),hB=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(t<e.logLevel)){var i=new Date().toISOString(),s=fB[t];if(s)console[s].apply(console,zr(["["+i+"]  "+e.name+":"],n));else throw new Error("Attempted to log a message with an invalid logType (value: "+t+")")}},sa=function(){function e(t){this.name=t,this._logLevel=lB,this._logHandler=hB,this._userLogHandler=null,nb.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in Le))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),e.prototype.setLogLevel=function(t){this._logLevel=typeof t=="string"?d1[t]:t},Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),e.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,zr([this,Le.DEBUG],t)),this._logHandler.apply(this,zr([this,Le.DEBUG],t))},e.prototype.log=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,zr([this,Le.VERBOSE],t)),this._logHandler.apply(this,zr([this,Le.VERBOSE],t))},e.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,zr([this,Le.INFO],t)),this._logHandler.apply(this,zr([this,Le.INFO],t))},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,zr([this,Le.WARN],t)),this._logHandler.apply(this,zr([this,Le.WARN],t))},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,zr([this,Le.ERROR],t)),this._logHandler.apply(this,zr([this,Le.ERROR],t))},e}();function dB(e){nb.forEach(function(t){t.setLogLevel(e)})}function pB(e,t){for(var n=function(a){var c=null;t&&t.level&&(c=d1[t.level]),e===null?a.userLogHandler=null:a.userLogHandler=function(l,h){for(var d=[],v=2;v<arguments.length;v++)d[v-2]=arguments[v];var m=d.map(function(y){if(y==null)return null;if(typeof y=="string")return y;if(typeof y=="number"||typeof y=="boolean")return y.toString();if(y instanceof Error)return y.message;try{return JSON.stringify(y)}catch{return null}}).filter(function(y){return y}).join(" ");h>=(c??l.logLevel)&&e({level:Le[h].toLowerCase(),message:m,args:d,type:l.name})}},r=0,i=nb;r<i.length;r++){var s=i[r];n(s)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var go,vB=(go={},go["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",go["bad-app-name"]="Illegal App name: '{$appName}",go["duplicate-app"]="Firebase App named '{$appName}' already exists",go["app-deleted"]="Firebase App named '{$appName}' already deleted",go["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",go["invalid-log-argument"]="First argument to `onLog` must be null or a function.",go),$a=new to("app","Firebase",vB),p1="@firebase/app",gB="0.6.30",mB="@firebase/analytics",yB="@firebase/app-check",_B="@firebase/auth",wB="@firebase/database",bB="@firebase/functions",EB="@firebase/installations",TB="@firebase/messaging",IB="@firebase/performance",SB="@firebase/remote-config",CB="@firebase/storage",AB="@firebase/firestore",kB="firebase-wrapper";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pn,Td="[DEFAULT]",RB=(pn={},pn[p1]="fire-core",pn[mB]="fire-analytics",pn[yB]="fire-app-check",pn[_B]="fire-auth",pn[wB]="fire-rtdb",pn[bB]="fire-fn",pn[EB]="fire-iid",pn[TB]="fire-fcm",pn[IB]="fire-perf",pn[SB]="fire-rc",pn[CB]="fire-gcs",pn[AB]="fire-fst",pn["fire-js"]="fire-js",pn[kB]="fire-js-all",pn);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hu=new sa("@firebase/app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ud=function(){function e(t,n,r){var i=this;this.firebase_=r,this.isDeleted_=!1,this.name_=n.name,this.automaticDataCollectionEnabled_=n.automaticDataCollectionEnabled||!1,this.options_=s1(t),this.container=new h1(n.name),this._addComponent(new In("app",function(){return i},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(s){return i._addComponent(s)})}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),e.prototype.delete=function(){var t=this;return new Promise(function(n){t.checkDestroyed_(),n()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(n){return n.delete()}))}).then(function(){t.isDeleted_=!0})},e.prototype._getService=function(t,n){var r;n===void 0&&(n=Td),this.checkDestroyed_();var i=this.container.getProvider(t);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})},e.prototype._removeServiceInstance=function(t,n){n===void 0&&(n=Td),this.container.getProvider(t).clearInstance(n)},e.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(n){hu.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,n)}},e.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},e.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw $a.create("app-deleted",{appName:this.name_})},e}();ud.prototype.name&&ud.prototype.options||ud.prototype.delete||console.log("dc");var NB="8.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PB(e){var t={},n=new Map,r={__esModule:!0,initializeApp:a,app:s,registerVersion:h,setLogLevel:dB,onLog:d,apps:null,SDK_VERSION:NB,INTERNAL:{registerComponent:l,removeApp:i,components:n,useAsService:v}};r.default=r,Object.defineProperty(r,"apps",{get:c});function i(m){delete t[m]}function s(m){if(m=m||Td,!yr(t,m))throw $a.create("no-app",{appName:m});return t[m]}s.App=e;function a(m,y){if(y===void 0&&(y={}),typeof y!="object"||y===null){var w=y;y={name:w}}var E=y;E.name===void 0&&(E.name=Td);var T=E.name;if(typeof T!="string"||!T)throw $a.create("bad-app-name",{appName:String(T)});if(yr(t,T))throw $a.create("duplicate-app",{appName:T});var A=new e(m,E,r);return t[T]=A,A}function c(){return Object.keys(t).map(function(m){return t[m]})}function l(m){var y=m.name;if(n.has(y))return hu.debug("There were multiple attempts to register component "+y+"."),m.type==="PUBLIC"?r[y]:null;if(n.set(y,m),m.type==="PUBLIC"){var w=function(P){if(P===void 0&&(P=s()),typeof P[y]!="function")throw $a.create("invalid-app-argument",{appName:y});return P[y]()};m.serviceProps!==void 0&&Al(w,m.serviceProps),r[y]=w,e.prototype[y]=function(){for(var P=[],O=0;O<arguments.length;O++)P[O]=arguments[O];var H=this._getService.bind(this,y);return H.apply(this,m.multipleInstances?P:[])}}for(var E=0,T=Object.keys(t);E<T.length;E++){var A=T[E];t[A]._addComponent(m)}return m.type==="PUBLIC"?r[y]:null}function h(m,y,w){var E,T=(E=RB[m])!==null&&E!==void 0?E:m;w&&(T+="-"+w);var A=T.match(/\s|\//),P=y.match(/\s|\//);if(A||P){var O=['Unable to register library "'+T+'" with version "'+y+'":'];A&&O.push('library name "'+T+'" contains illegal characters (whitespace or "/")'),A&&P&&O.push("and"),P&&O.push('version name "'+y+'" contains illegal characters (whitespace or "/")'),hu.warn(O.join(" "));return}l(new In(T+"-version",function(){return{library:T,version:y}},"VERSION"))}function d(m,y){if(m!==null&&typeof m!="function")throw $a.create("invalid-log-argument");pB(m,y)}function v(m,y){if(y==="serverAuth")return null;var w=y;return w}return r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1(){var e=PB(ud);e.INTERNAL=me(me({},e.INTERNAL),{createFirebaseNamespace:v1,extendNamespace:t,createSubscribe:eB,ErrorFactory:to,deepExtend:Al});function t(n){Al(e,n)}return e}var rb=v1();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var OB=function(){function e(t){this.container=t}return e.prototype.getPlatformInfoString=function(){var t=this.container.getProviders();return t.map(function(n){if(DB(n)){var r=n.getImmediate();return r.library+"/"+r.version}else return null}).filter(function(n){return n}).join(" ")},e}();function DB(e){var t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xB(e,t){e.INTERNAL.registerComponent(new In("platform-logger",function(n){return new OB(n)},"PRIVATE")),e.registerVersion(p1,gB,t),e.registerVersion("fire-js","")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(VV()&&self.firebase!==void 0){hu.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);var VC=self.firebase.SDK_VERSION;VC&&VC.indexOf("LITE")>=0&&hu.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}var LB=rb.initializeApp;rb.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a1()&&hu.warn(`
      Warning: This is a browser-targeted Firebase bundle but it appears it is being
      run in a Node environment.  If running in a Node environment, make sure you
      are using the bundle specified by the "main" field in package.json.
      
      If you are using Webpack, you can specify "main" as the first item in
      "resolve.mainFields":
      https://webpack.js.org/configuration/resolve/#resolvemainfields
      
      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"
      as the first item in "mainFields", e.g. ['main', 'module'].
      https://github.com/rollup/@rollup/plugin-node-resolve
      `),LB.apply(void 0,e)};var ce=rb;xB(ce);(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,u,f){o!=Array.prototype&&o!=Object.prototype&&(o[u]=f.value)};function n(o){o=[typeof window=="object"&&window,typeof self=="object"&&self,typeof global=="object"&&global,o];for(var u=0;u<o.length;++u){var f=o[u];if(f&&f.Math==Math)return f}return globalThis}var r=n(this);function i(o,u){if(u){var f=r;o=o.split(".");for(var p=0;p<o.length-1;p++){var g=o[p];g in f||(f[g]={}),f=f[g]}o=o[o.length-1],p=f[o],u=u(p),u!=p&&u!=null&&t(f,o,{configurable:!0,writable:!0,value:u})}}function s(o){var u=0;return function(){return u<o.length?{done:!1,value:o[u++]}:{done:!0}}}function a(o){var u=typeof Symbol<"u"&&Symbol.iterator&&o[Symbol.iterator];return u?u.call(o):{next:s(o)}}i("Promise",function(o){function u(b){this.b=0,this.c=void 0,this.a=[];var S=this.f();try{b(S.resolve,S.reject)}catch(L){S.reject(L)}}function f(){this.a=null}function p(b){return b instanceof u?b:new u(function(S){S(b)})}if(o)return o;f.prototype.b=function(b){if(this.a==null){this.a=[];var S=this;this.c(function(){S.g()})}this.a.push(b)};var g=r.setTimeout;f.prototype.c=function(b){g(b,0)},f.prototype.g=function(){for(;this.a&&this.a.length;){var b=this.a;this.a=[];for(var S=0;S<b.length;++S){var L=b[S];b[S]=null;try{L()}catch(B){this.f(B)}}}this.a=null},f.prototype.f=function(b){this.c(function(){throw b})},u.prototype.f=function(){function b(B){return function(be){L||(L=!0,B.call(S,be))}}var S=this,L=!1;return{resolve:b(this.m),reject:b(this.g)}},u.prototype.m=function(b){if(b===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(b instanceof u)this.s(b);else{e:switch(typeof b){case"object":var S=b!=null;break e;case"function":S=!0;break e;default:S=!1}S?this.v(b):this.h(b)}},u.prototype.v=function(b){var S=void 0;try{S=b.then}catch(L){this.g(L);return}typeof S=="function"?this.u(S,b):this.h(b)},u.prototype.g=function(b){this.i(2,b)},u.prototype.h=function(b){this.i(1,b)},u.prototype.i=function(b,S){if(this.b!=0)throw Error("Cannot settle("+b+", "+S+"): Promise already settled in state"+this.b);this.b=b,this.c=S,this.l()},u.prototype.l=function(){if(this.a!=null){for(var b=0;b<this.a.length;++b)_.b(this.a[b]);this.a=null}};var _=new f;return u.prototype.s=function(b){var S=this.f();b.Ra(S.resolve,S.reject)},u.prototype.u=function(b,S){var L=this.f();try{b.call(S,L.resolve,L.reject)}catch(B){L.reject(B)}},u.prototype.then=function(b,S){function L(We,Ht){return typeof We=="function"?function(Fi){try{B(We(Fi))}catch(uy){be(uy)}}:Ht}var B,be,Xe=new u(function(We,Ht){B=We,be=Ht});return this.Ra(L(b,B),L(S,be)),Xe},u.prototype.catch=function(b){return this.then(void 0,b)},u.prototype.Ra=function(b,S){function L(){switch(B.b){case 1:b(B.c);break;case 2:S(B.c);break;default:throw Error("Unexpected state: "+B.b)}}var B=this;this.a==null?_.b(L):this.a.push(L)},u.resolve=p,u.reject=function(b){return new u(function(S,L){L(b)})},u.race=function(b){return new u(function(S,L){for(var B=a(b),be=B.next();!be.done;be=B.next())p(be.value).Ra(S,L)})},u.all=function(b){var S=a(b),L=S.next();return L.done?p([]):new u(function(B,be){function Xe(Fi){return function(uy){We[Fi]=uy,Ht--,Ht==0&&B(We)}}var We=[],Ht=0;do We.push(void 0),Ht++,p(L.value).Ra(Xe(We.length-1),be),L=S.next();while(!L.done)})},u});var c=c||{},l=this||self,h=/^[\w+/_-]+[=]{0,2}$/,d=null;function v(o){return(o=o.querySelector&&o.querySelector("script[nonce]"))&&(o=o.nonce||o.getAttribute("nonce"))&&h.test(o)?o:""}function m(){}function y(o){var u=typeof o;return u!="object"?u:o?Array.isArray(o)?"array":u:"null"}function w(o){var u=y(o);return u=="array"||u=="object"&&typeof o.length=="number"}function E(o){return y(o)=="function"}function T(o){var u=typeof o;return u=="object"&&o!=null||u=="function"}function A(o){return Object.prototype.hasOwnProperty.call(o,P)&&o[P]||(o[P]=++O)}var P="closure_uid_"+(1e9*Math.random()>>>0),O=0;function H(o,u,f){return o.call.apply(o.bind,arguments)}function K(o,u,f){if(!o)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var g=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(g,p),o.apply(u,g)}}return function(){return o.apply(u,arguments)}}function U(o,u,f){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?U=H:U=K,U.apply(null,arguments)}function ie(o,u){var f=Array.prototype.slice.call(arguments,1);return function(){var p=f.slice();return p.push.apply(p,arguments),o.apply(this,p)}}function F(o,u){function f(){}f.prototype=u.prototype,o.bb=u.prototype,o.prototype=new f,o.prototype.constructor=o}function ge(o){return o}function R(o,u,f){this.code=lt+o,this.message=u||An[o]||"",this.a=f||null}F(R,Error),R.prototype.w=function(){var o={code:this.code,message:this.message};return this.a&&(o.serverResponse=this.a),o},R.prototype.toJSON=function(){return this.w()};function tt(o){var u=o&&o.code;return u?new R(u.substring(lt.length),o.message,o.serverResponse):null}var lt="auth/",An={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},Lt={ld:{Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ua:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://securetoken.googleapis.com/v1/token",Xa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ua:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ua:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",$a:"https://test-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function ft(o){for(var u in Lt)if(Lt[u].id===o)return o=Lt[u],{firebaseEndpoint:o.Ua,secureTokenEndpoint:o.$a,identityPlatformEndpoint:o.Xa};return null}var ot;ot=ft("__EID__")?"__EID__":void 0;function Ye(o){if(!o)return!1;try{return!!o.$goog_Thenable}catch{return!1}}function Ce(o){if(Error.captureStackTrace)Error.captureStackTrace(this,Ce);else{var u=Error().stack;u&&(this.stack=u)}o&&(this.message=String(o))}F(Ce,Error),Ce.prototype.name="CustomError";function kn(o,u){o=o.split("%s");for(var f="",p=o.length-1,g=0;g<p;g++)f+=o[g]+(g<u.length?u[g]:"%s");Ce.call(this,f+o[p])}F(kn,Ce),kn.prototype.name="AssertionError";function Kn(o,u){throw new kn("Failure"+(o?": "+o:""),Array.prototype.slice.call(arguments,1))}function Rn(o,u){this.c=o,this.f=u,this.b=0,this.a=null}Rn.prototype.get=function(){if(0<this.b){this.b--;var o=this.a;this.a=o.next,o.next=null}else o=this.c();return o};function Zt(o,u){o.f(u),100>o.b&&(o.b++,u.next=o.a,o.a=u)}function Pi(){this.b=this.a=null}var Jo=new Rn(function(){return new re},function(o){o.reset()});Pi.prototype.add=function(o,u){var f=Jo.get();f.set(o,u),this.b?this.b.next=f:this.a=f,this.b=f};function V(){var o=zE,u=null;return o.a&&(u=o.a,o.a=o.a.next,o.a||(o.b=null),u.next=null),u}function re(){this.next=this.b=this.a=null}re.prototype.set=function(o,u){this.a=o,this.b=u,this.next=null},re.prototype.reset=function(){this.next=this.b=this.a=null};var ne=Array.prototype.indexOf?function(o,u){return Array.prototype.indexOf.call(o,u,void 0)}:function(o,u){if(typeof o=="string")return typeof u!="string"||u.length!=1?-1:o.indexOf(u,0);for(var f=0;f<o.length;f++)if(f in o&&o[f]===u)return f;return-1},J=Array.prototype.forEach?function(o,u,f){Array.prototype.forEach.call(o,u,f)}:function(o,u,f){for(var p=o.length,g=typeof o=="string"?o.split(""):o,_=0;_<p;_++)_ in g&&u.call(f,g[_],_,o)};function Ve(o,u){for(var f=typeof o=="string"?o.split(""):o,p=o.length-1;0<=p;--p)p in f&&u.call(void 0,f[p],p,o)}var at=Array.prototype.filter?function(o,u){return Array.prototype.filter.call(o,u,void 0)}:function(o,u){for(var f=o.length,p=[],g=0,_=typeof o=="string"?o.split(""):o,b=0;b<f;b++)if(b in _){var S=_[b];u.call(void 0,S,b,o)&&(p[g++]=S)}return p},Ie=Array.prototype.map?function(o,u){return Array.prototype.map.call(o,u,void 0)}:function(o,u){for(var f=o.length,p=Array(f),g=typeof o=="string"?o.split(""):o,_=0;_<f;_++)_ in g&&(p[_]=u.call(void 0,g[_],_,o));return p},I=Array.prototype.some?function(o,u){return Array.prototype.some.call(o,u,void 0)}:function(o,u){for(var f=o.length,p=typeof o=="string"?o.split(""):o,g=0;g<f;g++)if(g in p&&u.call(void 0,p[g],g,o))return!0;return!1};function N(o){e:{for(var u=FF,f=o.length,p=typeof o=="string"?o.split(""):o,g=0;g<f;g++)if(g in p&&u.call(void 0,p[g],g,o)){u=g;break e}u=-1}return 0>u?null:typeof o=="string"?o.charAt(u):o[u]}function x(o,u){return 0<=ne(o,u)}function M(o,u){u=ne(o,u);var f;return(f=0<=u)&&Array.prototype.splice.call(o,u,1),f}function j(o,u){var f=0;Ve(o,function(p,g){u.call(void 0,p,g,o)&&Array.prototype.splice.call(o,g,1).length==1&&f++})}function Q(o){return Array.prototype.concat.apply([],arguments)}function Z(o){var u=o.length;if(0<u){for(var f=Array(u),p=0;p<u;p++)f[p]=o[p];return f}return[]}var $=String.prototype.trim?function(o){return o.trim()}:function(o){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(o)[1]},X=/&/g,W=/</g,he=/>/g,ue=/"/g,de=/'/g,we=/\x00/g,xe=/[\x00&<>"']/;function ve(o,u){return o.indexOf(u)!=-1}function Ke(o,u){return o<u?-1:o>u?1:0}var rt;e:{var Wn=l.navigator;if(Wn){var Oi=Wn.userAgent;if(Oi){rt=Oi;break e}}rt=""}function wt(o){return ve(rt,o)}function oo(o,u){for(var f in o)u.call(void 0,o[f],f,o)}function oi(o){for(var u in o)return!1;return!0}function bt(o){var u={},f;for(f in o)u[f]=o[f];return u}var ir="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function en(o,u){for(var f,p,g=1;g<arguments.length;g++){p=arguments[g];for(f in p)o[f]=p[f];for(var _=0;_<ir.length;_++)f=ir[_],Object.prototype.hasOwnProperty.call(p,f)&&(o[f]=p[f])}}function AE(o,u){e:{try{var f=o&&o.ownerDocument,p=f&&(f.defaultView||f.parentWindow);if(p=p||l,p.Element&&p.Location){var g=p;break e}}catch{}g=null}if(g&&typeof g[u]<"u"&&(!o||!(o instanceof g[u])&&(o instanceof g.Location||o instanceof g.Element))){if(T(o))try{var _=o.constructor.displayName||o.constructor.name||Object.prototype.toString.call(o)}catch{_="<object could not be stringified>"}else _=o===void 0?"undefined":o===null?"null":typeof o;Kn("Argument is not a %s (or a non-Element, non-Location mock); got: %s",u,_)}}function si(o,u){this.a=o===Lf&&u||"",this.b=kE}si.prototype.ta=!0,si.prototype.sa=function(){return this.a},si.prototype.toString=function(){return"Const{"+this.a+"}"};function Lv(o){return o instanceof si&&o.constructor===si&&o.b===kE?o.a:(Kn("expected object of type Const, got '"+o+"'"),"type_error:Const")}var kE={},Lf={},Mf;function RE(){if(Mf===void 0){var o=null,u=l.trustedTypes;if(u&&u.createPolicy){try{o=u.createPolicy("goog#html",{createHTML:ge,createScript:ge,createScriptURL:ge})}catch(f){l.console&&l.console.error(f.message)}Mf=o}else Mf=o}return Mf}function _a(o,u){this.a=u===PE?o:""}_a.prototype.ta=!0,_a.prototype.sa=function(){return this.a.toString()},_a.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};function NE(o){return o instanceof _a&&o.constructor===_a?o.a:(Kn("expected object of type TrustedResourceUrl, got '"+o+"' of type "+y(o)),"type_error:TrustedResourceUrl")}function Mv(o,u){var f=Lv(o);if(!dM.test(f))throw Error("Invalid TrustedResourceUrl format: "+f);return o=f.replace(hM,function(p,g){if(!Object.prototype.hasOwnProperty.call(u,g))throw Error('Found marker, "'+g+'", in format string, "'+f+'", but no valid label mapping found in args: '+JSON.stringify(u));return p=u[g],p instanceof si?Lv(p):encodeURIComponent(String(p))}),pM(o)}var hM=/%{(\w+)}/g,dM=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,PE={};function pM(o){var u=RE();return o=u?u.createScriptURL(o):o,new _a(o,PE)}function Gn(o,u){this.a=u===ac?o:""}Gn.prototype.ta=!0,Gn.prototype.sa=function(){return this.a.toString()},Gn.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};function Ff(o){return o instanceof Gn&&o.constructor===Gn?o.a:(Kn("expected object of type SafeUrl, got '"+o+"' of type "+y(o)),"type_error:SafeUrl")}var vM=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,gM=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,OE=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function DE(o){if(o instanceof Gn)return o;if(o=typeof o=="object"&&o.ta?o.sa():String(o),OE.test(o))o=new Gn(o,ac);else{o=String(o),o=o.replace(/(%0A|%0D)/g,"");var u=o.match(gM);o=u&&vM.test(u[1])?new Gn(o,ac):null}return o}function xE(o){return o instanceof Gn?o:(o=typeof o=="object"&&o.ta?o.sa():String(o),OE.test(o)||(o="about:invalid#zClosurez"),new Gn(o,ac))}var ac={},LE=new Gn("about:invalid#zClosurez",ac);function wa(o,u,f){this.a=f===ME?o:""}wa.prototype.ta=!0,wa.prototype.sa=function(){return this.a.toString()},wa.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};function mM(o){return o instanceof wa&&o.constructor===wa?o.a:(Kn("expected object of type SafeHtml, got '"+o+"' of type "+y(o)),"type_error:SafeHtml")}var ME={};function yM(o,u){AE(o,"HTMLScriptElement"),o.src=NE(u),(u=o.ownerDocument&&o.ownerDocument.defaultView)&&u!=l?u=v(u.document):(d===null&&(d=v(l.document)),u=d),u&&o.setAttribute("nonce",u)}function FE(o,u,f,p){return o=o instanceof Gn?o:xE(o),u=u||l,f=f instanceof si?Lv(f):f||"",u.open(Ff(o),f,p,void 0)}function UE(o,u){for(var f=o.split("%s"),p="",g=Array.prototype.slice.call(arguments,1);g.length&&1<f.length;)p+=f.shift()+g.shift();return p+f.join("%s")}function Fv(o){return xe.test(o)&&(o.indexOf("&")!=-1&&(o=o.replace(X,"&amp;")),o.indexOf("<")!=-1&&(o=o.replace(W,"&lt;")),o.indexOf(">")!=-1&&(o=o.replace(he,"&gt;")),o.indexOf('"')!=-1&&(o=o.replace(ue,"&quot;")),o.indexOf("'")!=-1&&(o=o.replace(de,"&#39;")),o.indexOf("\0")!=-1&&(o=o.replace(we,"&#0;"))),o}function Uv(o){return Uv[" "](o),o}Uv[" "]=m;function _M(o,u){var f=TM;return Object.prototype.hasOwnProperty.call(f,o)?f[o]:f[o]=u(o)}var wM=wt("Opera"),Ur=wt("Trident")||wt("MSIE"),jE=wt("Edge"),bM=jE||Ur,VE=wt("Gecko")&&!(ve(rt.toLowerCase(),"webkit")&&!wt("Edge"))&&!(wt("Trident")||wt("MSIE"))&&!wt("Edge"),EM=ve(rt.toLowerCase(),"webkit")&&!wt("Edge");function BE(){var o=l.document;return o?o.documentMode:void 0}var Uf;e:{var jv="",Vv=function(){var o=rt;if(VE)return/rv:([^\);]+)(\)|;)/.exec(o);if(jE)return/Edge\/([\d\.]+)/.exec(o);if(Ur)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(o);if(EM)return/WebKit\/(\S+)/.exec(o);if(wM)return/(?:Version)[ \/]?(\S+)/.exec(o)}();if(Vv&&(jv=Vv?Vv[1]:""),Ur){var Bv=BE();if(Bv!=null&&Bv>parseFloat(jv)){Uf=String(Bv);break e}}Uf=jv}var TM={};function qE(o){return _M(o,function(){for(var u=0,f=$(String(Uf)).split("."),p=$(String(o)).split("."),g=Math.max(f.length,p.length),_=0;u==0&&_<g;_++){var b=f[_]||"",S=p[_]||"";do{if(b=/(\d*)(\D*)(.*)/.exec(b)||["","","",""],S=/(\d*)(\D*)(.*)/.exec(S)||["","","",""],b[0].length==0&&S[0].length==0)break;u=Ke(b[1].length==0?0:parseInt(b[1],10),S[1].length==0?0:parseInt(S[1],10))||Ke(b[2].length==0,S[2].length==0)||Ke(b[2],S[2]),b=b[3],S=S[3]}while(u==0)}return 0<=u})}var qv;if(l.document&&Ur){var HE=BE();qv=HE||parseInt(Uf,10)||void 0}else qv=void 0;var so=qv;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch{}var IM=!Ur||9<=Number(so);function uc(o){var u=document;return typeof o=="string"?u.getElementById(o):o}function KE(o,u){oo(u,function(f,p){f&&typeof f=="object"&&f.ta&&(f=f.sa()),p=="style"?o.style.cssText=f:p=="class"?o.className=f:p=="for"?o.htmlFor=f:WE.hasOwnProperty(p)?o.setAttribute(WE[p],f):p.lastIndexOf("aria-",0)==0||p.lastIndexOf("data-",0)==0?o.setAttribute(p,f):o[p]=f})}var WE={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function SM(o,u,f){var p=arguments,g=document,_=String(p[0]),b=p[1];if(!IM&&b&&(b.name||b.type)){if(_=["<",_],b.name&&_.push(' name="',Fv(b.name),'"'),b.type){_.push(' type="',Fv(b.type),'"');var S={};en(S,b),delete S.type,b=S}_.push(">"),_=_.join("")}return _=jf(g,_),b&&(typeof b=="string"?_.className=b:Array.isArray(b)?_.className=b.join(" "):KE(_,b)),2<p.length&&CM(g,_,p),_}function CM(o,u,f){function p(S){S&&u.appendChild(typeof S=="string"?o.createTextNode(S):S)}for(var g=2;g<f.length;g++){var _=f[g];if(!w(_)||T(_)&&0<_.nodeType)p(_);else{e:{if(_&&typeof _.length=="number"){if(T(_)){var b=typeof _.item=="function"||typeof _.item=="string";break e}if(E(_)){b=typeof _.item=="function";break e}}b=!1}J(b?Z(_):_,p)}}}function jf(o,u){return u=String(u),o.contentType==="application/xhtml+xml"&&(u=u.toLowerCase()),o.createElement(u)}function GE(o){l.setTimeout(function(){throw o},0)}var Hv;function AM(){var o=l.MessageChannel;if(typeof o>"u"&&typeof window<"u"&&window.postMessage&&window.addEventListener&&!wt("Presto")&&(o=function(){var g=jf(document,"IFRAME");g.style.display="none",document.documentElement.appendChild(g);var _=g.contentWindow;g=_.document,g.open(),g.close();var b="callImmediate"+Math.random(),S=_.location.protocol=="file:"?"*":_.location.protocol+"//"+_.location.host;g=U(function(L){(S=="*"||L.origin==S)&&L.data==b&&this.port1.onmessage()},this),_.addEventListener("message",g,!1),this.port1={},this.port2={postMessage:function(){_.postMessage(b,S)}}}),typeof o<"u"&&!wt("Trident")&&!wt("MSIE")){var u=new o,f={},p=f;return u.port1.onmessage=function(){if(f.next!==void 0){f=f.next;var g=f.Hb;f.Hb=null,g()}},function(g){p.next={Hb:g},p=p.next,u.port2.postMessage(0)}}return function(g){l.setTimeout(g,0)}}function Vf(o,u){Bf||kM(),Kv||(Bf(),Kv=!0),zE.add(o,u)}var Bf;function kM(){if(l.Promise&&l.Promise.resolve){var o=l.Promise.resolve(void 0);Bf=function(){o.then($E)}}else Bf=function(){var u=$E;!E(l.setImmediate)||l.Window&&l.Window.prototype&&!wt("Edge")&&l.Window.prototype.setImmediate==l.setImmediate?(Hv||(Hv=AM()),Hv(u)):l.setImmediate(u)}}var Kv=!1,zE=new Pi;function $E(){for(var o;o=V();){try{o.a.call(o.b)}catch(u){GE(u)}Zt(Jo,o)}Kv=!1}function Me(o,u){if(this.a=Zo,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,o!=m)try{var f=this;o.call(u,function(p){es(f,cc,p)},function(p){if(!(p instanceof ba))try{throw p instanceof Error?p:Error("Promise rejected.")}catch{}es(f,Di,p)})}catch(p){es(this,Di,p)}}var Zo=0,cc=2,Di=3;function QE(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}QE.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var YE=new Rn(function(){return new QE},function(o){o.reset()});function Wv(o,u,f){var p=YE.get();return p.g=o,p.b=u,p.f=f,p}function pe(o){if(o instanceof Me)return o;var u=new Me(m);return es(u,cc,o),u}function ht(o){return new Me(function(u,f){f(o)})}function XE(o,u,f){tT(o,u,f,null)||Vf(ie(u,o))}function RM(o){return new Me(function(u,f){var p=o.length,g=[];if(p)for(var _=function(B,be){p--,g[B]=be,p==0&&u(g)},b=function(B){f(B)},S=0,L;S<o.length;S++)L=o[S],XE(L,ie(_,S),b);else u(g)})}function JE(o){return new Me(function(u){var f=o.length,p=[];if(f)for(var g=function(S,L,B){f--,p[S]=L?{Qb:!0,value:B}:{Qb:!1,reason:B},f==0&&u(p)},_=0,b;_<o.length;_++)b=o[_],XE(b,ie(g,_,!0),ie(g,_,!1));else u(p)})}Me.prototype.then=function(o,u,f){return eT(this,E(o)?o:null,E(u)?u:null,f)},Me.prototype.$goog_Thenable=!0,e=Me.prototype,e.oa=function(o,u){return o=Wv(o,o,u),o.c=!0,Gv(this,o),this},e.o=function(o,u){return eT(this,null,o,u)},e.cancel=function(o){if(this.a==Zo){var u=new ba(o);Vf(function(){ZE(this,u)},this)}};function ZE(o,u){if(o.a==Zo)if(o.c){var f=o.c;if(f.b){for(var p=0,g=null,_=null,b=f.b;b&&(b.c||(p++,b.a==o&&(g=b),!(g&&1<p)));b=b.next)g||(_=b);g&&(f.a==Zo&&p==1?ZE(f,u):(_?(p=_,p.next==f.f&&(f.f=p),p.next=p.next.next):rT(f),iT(f,g,Di,u)))}o.c=null}else es(o,Di,u)}function Gv(o,u){o.b||o.a!=cc&&o.a!=Di||nT(o),o.f?o.f.next=u:o.b=u,o.f=u}function eT(o,u,f,p){var g=Wv(null,null,null);return g.a=new Me(function(_,b){g.g=u?function(S){try{var L=u.call(p,S);_(L)}catch(B){b(B)}}:_,g.b=f?function(S){try{var L=f.call(p,S);L===void 0&&S instanceof ba?b(S):_(L)}catch(B){b(B)}}:b}),g.a.c=o,Gv(o,g),g.a}e.$c=function(o){this.a=Zo,es(this,cc,o)},e.ad=function(o){this.a=Zo,es(this,Di,o)};function es(o,u,f){o.a==Zo&&(o===f&&(u=Di,f=new TypeError("Promise cannot resolve to itself")),o.a=1,tT(f,o.$c,o.ad,o)||(o.i=f,o.a=u,o.c=null,nT(o),u!=Di||f instanceof ba||PM(o,f)))}function tT(o,u,f,p){if(o instanceof Me)return Gv(o,Wv(u||m,f||null,p)),!0;if(Ye(o))return o.then(u,f,p),!0;if(T(o))try{var g=o.then;if(E(g))return NM(o,g,u,f,p),!0}catch(_){return f.call(p,_),!0}return!1}function NM(o,u,f,p,g){function _(L){S||(S=!0,p.call(g,L))}function b(L){S||(S=!0,f.call(g,L))}var S=!1;try{u.call(o,b,_)}catch(L){_(L)}}function nT(o){o.h||(o.h=!0,Vf(o.gc,o))}function rT(o){var u=null;return o.b&&(u=o.b,o.b=u.next,u.next=null),o.b||(o.f=null),u}e.gc=function(){for(var o;o=rT(this);)iT(this,o,this.a,this.i);this.h=!1};function iT(o,u,f,p){if(f==Di&&u.b&&!u.c)for(;o&&o.g;o=o.c)o.g=!1;if(u.a)u.a.c=null,oT(u,f,p);else try{u.c?u.g.call(u.f):oT(u,f,p)}catch(g){sT.call(null,g)}Zt(YE,u)}function oT(o,u,f){u==cc?o.g.call(o.f,f):o.b&&o.b.call(o.f,f)}function PM(o,u){o.g=!0,Vf(function(){o.g&&sT.call(null,u)})}var sT=GE;function ba(o){Ce.call(this,o)}F(ba,Ce),ba.prototype.name="cancel";function qf(){this.ya=this.ya,this.pa=this.pa}var OM=0;qf.prototype.ya=!1;function aT(o){!o.ya&&(o.ya=!0,o.Da(),OM!=0)&&A(o)}qf.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var DM=Object.freeze||function(o){return o},uT=!Ur||9<=Number(so),xM=Ur&&!qE("9"),LM=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,u=Object.defineProperty({},"passive",{get:function(){o=!0}});try{l.addEventListener("test",m,u),l.removeEventListener("test",m,u)}catch{}return o}();function zn(o,u){this.type=o,this.b=this.target=u,this.defaultPrevented=!1}zn.prototype.preventDefault=function(){this.defaultPrevented=!0};function ts(o,u){if(zn.call(this,o?o.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,o){var f=this.type=o.type,p=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.b=u,u=o.relatedTarget){if(VE){e:{try{Uv(u.nodeName);var g=!0;break e}catch{}g=!1}g||(u=null)}}else f=="mouseover"?u=o.fromElement:f=="mouseout"&&(u=o.toElement);this.relatedTarget=u,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:MM[o.pointerType]||"",this.a=o,o.defaultPrevented&&this.preventDefault()}}F(ts,zn);var MM=DM({2:"touch",3:"pen",4:"mouse"});ts.prototype.preventDefault=function(){ts.bb.preventDefault.call(this);var o=this.a;if(o.preventDefault)o.preventDefault();else if(o.returnValue=!1,xM)try{(o.ctrlKey||112<=o.keyCode&&123>=o.keyCode)&&(o.keyCode=-1)}catch{}},ts.prototype.g=function(){return this.a};var lc="closure_listenable_"+(1e6*Math.random()|0),FM=0;function UM(o,u,f,p,g){this.listener=o,this.proxy=null,this.src=u,this.type=f,this.capture=!!p,this.Wa=g,this.key=++FM,this.wa=this.Qa=!1}function Hf(o){o.wa=!0,o.listener=null,o.proxy=null,o.src=null,o.Wa=null}function Kf(o){this.src=o,this.a={},this.b=0}Kf.prototype.add=function(o,u,f,p,g){var _=o.toString();o=this.a[_],o||(o=this.a[_]=[],this.b++);var b=$v(o,u,p,g);return-1<b?(u=o[b],f||(u.Qa=!1)):(u=new UM(u,this.src,_,!!p,g),u.Qa=f,o.push(u)),u};function zv(o,u){var f=u.type;f in o.a&&M(o.a[f],u)&&(Hf(u),o.a[f].length==0&&(delete o.a[f],o.b--))}function $v(o,u,f,p){for(var g=0;g<o.length;++g){var _=o[g];if(!_.wa&&_.listener==u&&_.capture==!!f&&_.Wa==p)return g}return-1}var Qv="closure_lm_"+(1e6*Math.random()|0),Yv={};function br(o,u,f,p,g){if(p&&p.once)Xv(o,u,f,p,g);else if(Array.isArray(u))for(var _=0;_<u.length;_++)br(o,u[_],f,p,g);else f=Zv(f),o&&o[lc]?pT(o,u,f,T(p)?!!p.capture:!!p,g):cT(o,u,f,!1,p,g)}function cT(o,u,f,p,g,_){if(!u)throw Error("Invalid event type");var b=T(g)?!!g.capture:!!g,S=Wf(o);if(S||(o[Qv]=S=new Kf(o)),f=S.add(u,f,p,b,_),!f.proxy)if(p=jM(),f.proxy=p,p.src=o,p.listener=f,o.addEventListener)LM||(g=b),g===void 0&&(g=!1),o.addEventListener(u.toString(),p,g);else if(o.attachEvent)o.attachEvent(fT(u.toString()),p);else if(o.addListener&&o.removeListener)o.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.")}function jM(){var o=VM,u=uT?function(f){return o.call(u.src,u.listener,f)}:function(f){if(f=o.call(u.src,u.listener,f),!f)return f};return u}function Xv(o,u,f,p,g){if(Array.isArray(u))for(var _=0;_<u.length;_++)Xv(o,u[_],f,p,g);else f=Zv(f),o&&o[lc]?eg(o,u,f,T(p)?!!p.capture:!!p,g):cT(o,u,f,!0,p,g)}function or(o,u,f,p,g){if(Array.isArray(u))for(var _=0;_<u.length;_++)or(o,u[_],f,p,g);else p=T(p)?!!p.capture:!!p,f=Zv(f),o&&o[lc]?(o=o.v,u=String(u).toString(),u in o.a&&(_=o.a[u],f=$v(_,f,p,g),-1<f&&(Hf(_[f]),Array.prototype.splice.call(_,f,1),_.length==0&&(delete o.a[u],o.b--)))):o&&(o=Wf(o))&&(u=o.a[u.toString()],o=-1,u&&(o=$v(u,f,p,g)),(f=-1<o?u[o]:null)&&lT(f))}function lT(o){if(typeof o!="number"&&o&&!o.wa){var u=o.src;if(u&&u[lc])zv(u.v,o);else{var f=o.type,p=o.proxy;u.removeEventListener?u.removeEventListener(f,p,o.capture):u.detachEvent?u.detachEvent(fT(f),p):u.addListener&&u.removeListener&&u.removeListener(p),(f=Wf(u))?(zv(f,o),f.b==0&&(f.src=null,u[Qv]=null)):Hf(o)}}}function fT(o){return o in Yv?Yv[o]:Yv[o]="on"+o}function hT(o,u,f,p){var g=!0;if((o=Wf(o))&&(u=o.a[u.toString()]))for(u=u.concat(),o=0;o<u.length;o++){var _=u[o];_&&_.capture==f&&!_.wa&&(_=dT(_,p),g=g&&_!==!1)}return g}function dT(o,u){var f=o.listener,p=o.Wa||o.src;return o.Qa&&lT(o),f.call(p,u)}function VM(o,u){if(o.wa)return!0;if(!uT){if(!u)e:{u=["window","event"];for(var f=l,p=0;p<u.length;p++)if(f=f[u[p]],f==null){u=null;break e}u=f}if(p=u,u=new ts(p,this),f=!0,!(0>p.keyCode||p.returnValue!=null)){e:{var g=!1;if(p.keyCode==0)try{p.keyCode=-1;break e}catch{g=!0}(g||p.returnValue==null)&&(p.returnValue=!0)}for(p=[],g=u.b;g;g=g.parentNode)p.push(g);for(o=o.type,g=p.length-1;0<=g;g--){u.b=p[g];var _=hT(p[g],o,!0,u);f=f&&_}for(g=0;g<p.length;g++)u.b=p[g],_=hT(p[g],o,!1,u),f=f&&_}return f}return dT(o,new ts(u,this))}function Wf(o){return o=o[Qv],o instanceof Kf?o:null}var Jv="__closure_events_fn_"+(1e9*Math.random()>>>0);function Zv(o){return E(o)?o:(o[Jv]||(o[Jv]=function(u){return o.handleEvent(u)}),o[Jv])}function Nn(){qf.call(this),this.v=new Kf(this),this.bc=this,this.hb=null}F(Nn,qf),Nn.prototype[lc]=!0,Nn.prototype.addEventListener=function(o,u,f,p){br(this,o,u,f,p)},Nn.prototype.removeEventListener=function(o,u,f,p){or(this,o,u,f,p)},Nn.prototype.dispatchEvent=function(o){var u,f=this.hb;if(f)for(u=[];f;f=f.hb)u.push(f);f=this.bc;var p=o.type||o;if(typeof o=="string")o=new zn(o,f);else if(o instanceof zn)o.target=o.target||f;else{var g=o;o=new zn(p,f),en(o,g)}if(g=!0,u)for(var _=u.length-1;0<=_;_--){var b=o.b=u[_];g=Gf(b,p,!0,o)&&g}if(b=o.b=f,g=Gf(b,p,!0,o)&&g,g=Gf(b,p,!1,o)&&g,u)for(_=0;_<u.length;_++)b=o.b=u[_],g=Gf(b,p,!1,o)&&g;return g},Nn.prototype.Da=function(){if(Nn.bb.Da.call(this),this.v){var o=this.v,u;for(u in o.a){for(var f=o.a[u],p=0;p<f.length;p++)Hf(f[p]);delete o.a[u],o.b--}}this.hb=null};function pT(o,u,f,p,g){o.v.add(String(u),f,!1,p,g)}function eg(o,u,f,p,g){o.v.add(String(u),f,!0,p,g)}function Gf(o,u,f,p){if(u=o.v.a[String(u)],!u)return!0;u=u.concat();for(var g=!0,_=0;_<u.length;++_){var b=u[_];if(b&&!b.wa&&b.capture==f){var S=b.listener,L=b.Wa||b.src;b.Qa&&zv(o.v,b),g=S.call(L,p)!==!1&&g}}return g&&!p.defaultPrevented}function tg(o,u,f){if(E(o))f&&(o=U(o,f));else if(o&&typeof o.handleEvent=="function")o=U(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:l.setTimeout(o,u||0)}function Ea(o){var u=null;return new Me(function(f,p){u=tg(function(){f(void 0)},o),u==-1&&p(Error("Failed to schedule timer."))}).o(function(f){throw l.clearTimeout(u),f})}function vT(o){if(o.X&&typeof o.X=="function")return o.X();if(typeof o=="string")return o.split("");if(w(o)){for(var u=[],f=o.length,p=0;p<f;p++)u.push(o[p]);return u}u=[],f=0;for(p in o)u[f++]=o[p];return u}function gT(o){if(o.Y&&typeof o.Y=="function")return o.Y();if(!o.X||typeof o.X!="function"){if(w(o)||typeof o=="string"){var u=[];o=o.length;for(var f=0;f<o;f++)u.push(f);return u}u=[],f=0;for(var p in o)u[f++]=p;return u}}function BM(o,u){if(o.forEach&&typeof o.forEach=="function")o.forEach(u,void 0);else if(w(o)||typeof o=="string")J(o,u,void 0);else for(var f=gT(o),p=vT(o),g=p.length,_=0;_<g;_++)u.call(void 0,p[_],f&&f[_],o)}function Ta(o,u){this.b={},this.a=[],this.c=0;var f=arguments.length;if(1<f){if(f%2)throw Error("Uneven number of arguments");for(var p=0;p<f;p+=2)this.set(arguments[p],arguments[p+1])}else if(o)if(o instanceof Ta)for(f=o.Y(),p=0;p<f.length;p++)this.set(f[p],o.get(f[p]));else for(p in o)this.set(p,o[p])}e=Ta.prototype,e.X=function(){ng(this);for(var o=[],u=0;u<this.a.length;u++)o.push(this.b[this.a[u]]);return o},e.Y=function(){return ng(this),this.a.concat()},e.clear=function(){this.b={},this.c=this.a.length=0};function ng(o){if(o.c!=o.a.length){for(var u=0,f=0;u<o.a.length;){var p=o.a[u];ns(o.b,p)&&(o.a[f++]=p),u++}o.a.length=f}if(o.c!=o.a.length){var g={};for(f=u=0;u<o.a.length;)p=o.a[u],ns(g,p)||(o.a[f++]=p,g[p]=1),u++;o.a.length=f}}e.get=function(o,u){return ns(this.b,o)?this.b[o]:u},e.set=function(o,u){ns(this.b,o)||(this.c++,this.a.push(o)),this.b[o]=u},e.forEach=function(o,u){for(var f=this.Y(),p=0;p<f.length;p++){var g=f[p],_=this.get(g);o.call(u,_,g,this)}};function ns(o,u){return Object.prototype.hasOwnProperty.call(o,u)}var mT=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function qM(o,u){if(o){o=o.split("&");for(var f=0;f<o.length;f++){var p=o[f].indexOf("="),g=null;if(0<=p){var _=o[f].substring(0,p);g=o[f].substring(p+1)}else _=o[f];u(_,g?decodeURIComponent(g.replace(/\+/g," ")):"")}}}function ao(o,u){this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1;var f;o instanceof ao?(this.i=u!==void 0?u:o.i,fc(this,o.c),this.l=o.l,this.a=o.a,hc(this,o.g),this.f=o.f,rg(this,bT(o.b)),this.h=o.h):o&&(f=String(o).match(mT))?(this.i=!!u,fc(this,f[1]||"",!0),this.l=dc(f[2]||""),this.a=dc(f[3]||"",!0),hc(this,f[4]),this.f=dc(f[5]||"",!0),rg(this,f[6]||"",!0),this.h=dc(f[7]||"")):(this.i=!!u,this.b=new rs(null,this.i))}ao.prototype.toString=function(){var o=[],u=this.c;u&&o.push(pc(u,yT,!0),":");var f=this.a;return(f||u=="file")&&(o.push("//"),(u=this.l)&&o.push(pc(u,yT,!0),"@"),o.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.g,f!=null&&o.push(":",String(f))),(f=this.f)&&(this.a&&f.charAt(0)!="/"&&o.push("/"),o.push(pc(f,f.charAt(0)=="/"?WM:KM,!0))),(f=this.b.toString())&&o.push("?",f),(f=this.h)&&o.push("#",pc(f,zM)),o.join("")},ao.prototype.resolve=function(o){var u=new ao(this),f=!!o.c;f?fc(u,o.c):f=!!o.l,f?u.l=o.l:f=!!o.a,f?u.a=o.a:f=o.g!=null;var p=o.f;if(f)hc(u,o.g);else if(f=!!o.f){if(p.charAt(0)!="/")if(this.a&&!this.f)p="/"+p;else{var g=u.f.lastIndexOf("/");g!=-1&&(p=u.f.substr(0,g+1)+p)}if(g=p,g==".."||g==".")p="";else if(ve(g,"./")||ve(g,"/.")){p=g.lastIndexOf("/",0)==0,g=g.split("/");for(var _=[],b=0;b<g.length;){var S=g[b++];S=="."?p&&b==g.length&&_.push(""):S==".."?((1<_.length||_.length==1&&_[0]!="")&&_.pop(),p&&b==g.length&&_.push("")):(_.push(S),p=!0)}p=_.join("/")}else p=g}return f?u.f=p:f=o.b.toString()!=="",f?rg(u,bT(o.b)):f=!!o.h,f&&(u.h=o.h),u};function fc(o,u,f){o.c=f?dc(u,!0):u,o.c&&(o.c=o.c.replace(/:$/,""))}function hc(o,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);o.g=u}else o.g=null}function rg(o,u,f){u instanceof rs?(o.b=u,$M(o.b,o.i)):(f||(u=pc(u,GM)),o.b=new rs(u,o.i))}function St(o,u,f){o.b.set(u,f)}function Er(o,u){return o.b.get(u)}function $n(o){return o instanceof ao?new ao(o):new ao(o,void 0)}function zf(o,u,f,p){var g=new ao(null,void 0);return o&&fc(g,o),u&&(g.a=u),f&&hc(g,f),p&&(g.f=p),g}function dc(o,u){return o?u?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function pc(o,u,f){return typeof o=="string"?(o=encodeURI(o).replace(u,HM),f&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function HM(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var yT=/[#\/\?@]/g,KM=/[#\?:]/g,WM=/[#\?]/g,GM=/[#\?@]/g,zM=/#/g;function rs(o,u){this.b=this.a=null,this.c=o||null,this.f=!!u}function uo(o){o.a||(o.a=new Ta,o.b=0,o.c&&qM(o.c,function(u,f){o.add(decodeURIComponent(u.replace(/\+/g," ")),f)}))}function _T(o){var u=gT(o);if(typeof u>"u")throw Error("Keys are undefined");var f=new rs(null,void 0);o=vT(o);for(var p=0;p<u.length;p++){var g=u[p],_=o[p];Array.isArray(_)?wT(f,g,_):f.add(g,_)}return f}e=rs.prototype,e.add=function(o,u){uo(this),this.c=null,o=Ia(this,o);var f=this.a.get(o);return f||this.a.set(o,f=[]),f.push(u),this.b+=1,this};function ai(o,u){uo(o),u=Ia(o,u),ns(o.a.b,u)&&(o.c=null,o.b-=o.a.get(u).length,o=o.a,ns(o.b,u)&&(delete o.b[u],o.c--,o.a.length>2*o.c&&ng(o)))}e.clear=function(){this.a=this.c=null,this.b=0};function ig(o,u){return uo(o),u=Ia(o,u),ns(o.a.b,u)}e.forEach=function(o,u){uo(this),this.a.forEach(function(f,p){J(f,function(g){o.call(u,g,p,this)},this)},this)},e.Y=function(){uo(this);for(var o=this.a.X(),u=this.a.Y(),f=[],p=0;p<u.length;p++)for(var g=o[p],_=0;_<g.length;_++)f.push(u[p]);return f},e.X=function(o){uo(this);var u=[];if(typeof o=="string")ig(this,o)&&(u=Q(u,this.a.get(Ia(this,o))));else{o=this.a.X();for(var f=0;f<o.length;f++)u=Q(u,o[f])}return u},e.set=function(o,u){return uo(this),this.c=null,o=Ia(this,o),ig(this,o)&&(this.b-=this.a.get(o).length),this.a.set(o,[u]),this.b+=1,this},e.get=function(o,u){return o?(o=this.X(o),0<o.length?String(o[0]):u):u};function wT(o,u,f){ai(o,u),0<f.length&&(o.c=null,o.a.set(Ia(o,u),Z(f)),o.b+=f.length)}e.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var o=[],u=this.a.Y(),f=0;f<u.length;f++){var p=u[f],g=encodeURIComponent(String(p));p=this.X(p);for(var _=0;_<p.length;_++){var b=g;p[_]!==""&&(b+="="+encodeURIComponent(String(p[_]))),o.push(b)}}return this.c=o.join("&")};function bT(o){var u=new rs;return u.c=o.c,o.a&&(u.a=new Ta(o.a),u.b=o.b),u}function Ia(o,u){return u=String(u),o.f&&(u=u.toLowerCase()),u}function $M(o,u){u&&!o.f&&(uo(o),o.c=null,o.a.forEach(function(f,p){var g=p.toLowerCase();p!=g&&(ai(this,p),wT(this,g,f))},o)),o.f=u}function ET(o){var u=[];return og(new QM,o,u),u.join("")}function QM(){}function og(o,u,f){if(u==null)f.push("null");else{if(typeof u=="object"){if(Array.isArray(u)){var p=u;u=p.length,f.push("[");for(var g="",_=0;_<u;_++)f.push(g),og(o,p[_],f),g=",";f.push("]");return}if(u instanceof String||u instanceof Number||u instanceof Boolean)u=u.valueOf();else{f.push("{"),g="";for(p in u)Object.prototype.hasOwnProperty.call(u,p)&&(_=u[p],typeof _!="function"&&(f.push(g),IT(p,f),f.push(":"),og(o,_,f),g=","));f.push("}");return}}switch(typeof u){case"string":IT(u,f);break;case"number":f.push(isFinite(u)&&!isNaN(u)?String(u):"null");break;case"boolean":f.push(String(u));break;case"function":f.push("null");break;default:throw Error("Unknown type: "+typeof u)}}}var TT={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\u000b"},YM=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function IT(o,u){u.push('"',o.replace(YM,function(f){var p=TT[f];return p||(p="\\u"+(f.charCodeAt(0)|65536).toString(16).substr(1),TT[f]=p),p}),'"')}function sg(){var o=tn();return Ur&&!!so&&so==11||/Edge\/\d+/.test(o)}function vc(){return l.window&&l.window.location.href||self&&self.location&&self.location.href||""}function ST(o,u){u=u||l.window;var f="about:blank";o&&(f=Ff(DE(o)||LE)),u.location.href=f}function CT(o,u){var f=[],p;for(p in o)p in u?typeof o[p]!=typeof u[p]?f.push(p):typeof o[p]=="object"&&o[p]!=null&&u[p]!=null?0<CT(o[p],u[p]).length&&f.push(p):o[p]!==u[p]&&f.push(p):f.push(p);for(p in u)p in o||f.push(p);return f}function XM(){var o=tn();return o=Sa(o)!=NT?null:(o=o.match(/\sChrome\/(\d+)/i))&&o.length==2?parseInt(o[1],10):null,o&&30>o?!1:!Ur||!so||9<so}function AT(o){return o=(o||tn()).toLowerCase(),!!(o.match(/android/)||o.match(/webos/)||o.match(/iphone|ipad|ipod/)||o.match(/blackberry/)||o.match(/windows phone/)||o.match(/iemobile/))}function is(o){o=o||l.window;try{o.close()}catch{}}function kT(o,u,f){var p=Math.floor(1e9*Math.random()).toString();u=u||500,f=f||600;var g=(window.screen.availHeight-f)/2,_=(window.screen.availWidth-u)/2;u={width:u,height:f,top:0<g?g:0,left:0<_?_:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},f=tn().toLowerCase(),p&&(u.target=p,ve(f,"crios/")&&(u.target="_blank")),Sa(tn())==cg&&(o=o||"http://localhost",u.scrollbars=!0),f=o||"",(o=u)||(o={}),p=window,u=f instanceof Gn?f:DE(typeof f.href<"u"?f.href:String(f))||LE,f=o.target||f.target,g=[];for(b in o)switch(b){case"width":case"height":case"top":case"left":g.push(b+"="+o[b]);break;case"target":case"noopener":case"noreferrer":break;default:g.push(b+"="+(o[b]?1:0))}var b=g.join(",");if((wt("iPhone")&&!wt("iPod")&&!wt("iPad")||wt("iPad")||wt("iPod"))&&p.navigator&&p.navigator.standalone&&f&&f!="_self"?(b=jf(document,"A"),AE(b,"HTMLAnchorElement"),u=u instanceof Gn?u:xE(u),b.href=Ff(u),b.setAttribute("target",f),o.noreferrer&&b.setAttribute("rel","noreferrer"),o=document.createEvent("MouseEvent"),o.initMouseEvent("click",!0,!0,p,1),b.dispatchEvent(o),b={}):o.noreferrer?(b=FE("",p,f,b),o=Ff(u),b&&(bM&&ve(o,";")&&(o="'"+o.replace(/'/g,"%27")+"'"),b.opener=null,o='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Fv(o)+'">',o=(p=RE())?p.createHTML(o):o,o=new wa(o,null,ME),p=b.document)&&(p.write(mM(o)),p.close())):(b=FE(u,p,f,b))&&o.noopener&&(b.opener=null),b)try{b.focus()}catch{}return b}function JM(o){return new Me(function(u){function f(){Ea(2e3).then(function(){if(!o||o.closed)u();else return f()})}return f()})}var ZM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,eF=/^[^@]+@[^@]+$/;function $f(){var o=null;return new Me(function(u){l.document.readyState=="complete"?u():(o=function(){u()},Xv(window,"load",o))}).o(function(u){throw or(window,"load",o),u})}function tF(){return ag(void 0)?$f().then(function(){return new Me(function(o,u){var f=l.document,p=setTimeout(function(){u(Error("Cordova framework is not ready."))},1e3);f.addEventListener("deviceready",function(){clearTimeout(p),o()},!1)})}):ht(Error("Cordova must run in an Android or iOS file scheme."))}function ag(o){return o=o||tn(),!(Aa()!=="file:"&&Aa()!=="ionic:"||!o.toLowerCase().match(/iphone|ipad|ipod|android/))}function ug(){var o=l.window;try{return!(!o||o==o.top)}catch{return!1}}function jr(){return typeof l.WorkerGlobalScope<"u"&&typeof l.importScripts=="function"}function ui(){return ce.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":ce.INTERNAL.hasOwnProperty("node")?"Node":jr()?"Worker":"Browser"}function RT(){var o=ui();return o==="ReactNative"||o==="Node"}function nF(){for(var o=50,u=[];0<o;)u.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),o--;return u.join("")}var cg="Firefox",NT="Chrome";function Sa(o){var u=o.toLowerCase();if(ve(u,"opera/")||ve(u,"opr/")||ve(u,"opios/"))return"Opera";if(ve(u,"iemobile"))return"IEMobile";if(ve(u,"msie")||ve(u,"trident/"))return"IE";if(ve(u,"edge/"))return"Edge";if(ve(u,"firefox/"))return cg;if(ve(u,"silk/"))return"Silk";if(ve(u,"blackberry"))return"Blackberry";if(ve(u,"webos"))return"Webos";if(!ve(u,"safari/")||ve(u,"chrome/")||ve(u,"crios/")||ve(u,"android"))if(!ve(u,"chrome/")&&!ve(u,"crios/")||ve(u,"edge/")){if(ve(u,"android"))return"Android";if((o=o.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&o.length==2)return o[1]}else return NT;else return"Safari";return"Other"}var PT={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Ca(o,u){u=u||[];var f=[],p={},g;for(g in PT)p[PT[g]]=!0;for(g=0;g<u.length;g++)typeof p[u[g]]<"u"&&(delete p[u[g]],f.push(u[g]));return f.sort(),u=f,u.length||(u=["FirebaseCore-web"]),f=ui(),f==="Browser"?(p=tn(),f=Sa(p)):f==="Worker"&&(p=tn(),f=Sa(p)+"-"+f),f+"/JsCore/"+o+"/"+u.join(",")}function tn(){return l.navigator&&l.navigator.userAgent||""}function dt(o,u){o=o.split("."),u=u||l;for(var f=0;f<o.length&&typeof u=="object"&&u!=null;f++)u=u[o[f]];return f!=o.length&&(u=void 0),u}function lg(){try{var o=l.localStorage,u=ss();if(o)return o.setItem(u,"1"),o.removeItem(u),sg()?!!l.indexedDB:!0}catch{return jr()&&!!l.indexedDB}return!1}function os(){return(Qf()||Aa()==="chrome-extension:"||ag())&&!RT()&&lg()&&!jr()}function Qf(){return Aa()==="http:"||Aa()==="https:"}function Aa(){return l.location&&l.location.protocol||null}function gc(o){return o=o||tn(),!(AT(o)||Sa(o)==cg)}function mc(o){return typeof o>"u"?null:ET(o)}function OT(o){var u={},f;for(f in o)o.hasOwnProperty(f)&&o[f]!==null&&o[f]!==void 0&&(u[f]=o[f]);return u}function ka(o){if(o!==null)return JSON.parse(o)}function ss(o){return o||Math.floor(1e9*Math.random()).toString()}function DT(o){return o=o||tn(),!(Sa(o)=="Safari"||o.toLowerCase().match(/iphone|ipad|ipod/))}function xT(){var o=l.___jsl;if(o&&o.H){for(var u in o.H)if(o.H[u].r=o.H[u].r||[],o.H[u].L=o.H[u].L||[],o.H[u].r=o.H[u].L.concat(),o.CP)for(var f=0;f<o.CP.length;f++)o.CP[f]=null}}function co(o,u){if(o>u)throw Error("Short delay should be less than long delay!");this.a=o,this.c=u,o=tn(),u=ui(),this.b=AT(o)||u==="ReactNative"}co.prototype.get=function(){var o=l.navigator;return!(o&&typeof o.onLine=="boolean"&&(Qf()||Aa()==="chrome-extension:"||typeof o.connection<"u"))||o.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};function fg(){var o=l.document;return o&&typeof o.visibilityState<"u"?o.visibilityState=="visible":!0}function rF(){var o=l.document,u=null;return fg()||!o?pe():new Me(function(f){u=function(){fg()&&(o.removeEventListener("visibilitychange",u,!1),f())},o.addEventListener("visibilitychange",u,!1)}).o(function(f){throw o.removeEventListener("visibilitychange",u,!1),f})}function yc(o){try{var u=new Date(parseInt(o,10));if(!isNaN(u.getTime())&&!/[^0-9]/.test(o))return u.toUTCString()}catch{}return null}function LT(){return!(!dt("fireauth.oauthhelper",l)&&!dt("fireauth.iframe",l))}function iF(){var o=l.navigator;return o&&o.serviceWorker&&o.serviceWorker.controller||null}function oF(){var o=l.navigator;return o&&o.serviceWorker?pe().then(function(){return o.serviceWorker.ready}).then(function(u){return u.active||null}).o(function(){return null}):pe(null)}var MT={};function hg(o){MT[o]||(MT[o]=!0,typeof console<"u"&&typeof console.warn=="function"&&console.warn(o))}var dg;try{var pg={};Object.defineProperty(pg,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(pg,"abcd",{configurable:!0,enumerable:!0,value:2}),dg=pg.abcd==2}catch{dg=!1}function ae(o,u,f){dg?Object.defineProperty(o,u,{configurable:!0,enumerable:!0,value:f}):o[u]=f}function Pn(o,u){if(u)for(var f in u)u.hasOwnProperty(f)&&ae(o,f,u[f])}function ci(o){var u={};return Pn(u,o),u}function sF(o){var u={},f;for(f in o)o.hasOwnProperty(f)&&(u[f]=o[f]);return u}function aF(o,u){if(!u||!u.length)return!0;if(!o)return!1;for(var f=0;f<u.length;f++){var p=o[u[f]];if(p==null||p==="")return!1}return!0}function vg(o){var u=o;if(typeof o=="object"&&o!=null){u="length"in o?[]:{};for(var f in o)ae(u,f,vg(o[f]))}return u}function gg(o){var u=o&&(o[wg]?"phone":null);if(u&&o&&o[_g]){ae(this,"uid",o[_g]),ae(this,"displayName",o[FT]||null);var f=null;o[yg]&&(f=new Date(o[yg]).toUTCString()),ae(this,"enrollmentTime",f),ae(this,"factorId",u)}else throw new R("internal-error","Internal assert: invalid MultiFactorInfo object")}gg.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};function mg(o){try{var u=new _c(o)}catch{u=null}return u}var FT="displayName",yg="enrolledAt",_g="mfaEnrollmentId",wg="phoneInfo";function _c(o){gg.call(this,o),ae(this,"phoneNumber",o[wg])}F(_c,gg),_c.prototype.w=function(){var o=_c.bb.w.call(this);return o.phoneNumber=this.phoneNumber,o};function uF(o){var u={},f=o[cF],p=o[fF],g=o[hF];if(o=mg(o[lF]),!g||g!=Yf&&g!=wc&&!f||g==wc&&!p||g==bg&&!o)throw Error("Invalid checkActionCode response!");g==wc?(u[jT]=f||null,u[VT]=f||null,u[UT]=p):(u[jT]=p||null,u[VT]=p||null,u[UT]=f||null),u[dF]=o||null,ae(this,vF,g),ae(this,pF,vg(u))}var bg="REVERT_SECOND_FACTOR_ADDITION",Yf="EMAIL_SIGNIN",wc="VERIFY_AND_CHANGE_EMAIL",cF="email",lF="mfaInfo",fF="newEmail",hF="requestType",UT="email",jT="fromEmail",dF="multiFactorInfo",VT="previousEmail",pF="data",vF="operation";function Eg(o){o=$n(o);var u=Er(o,BT)||null,f=Er(o,qT)||null,p=Er(o,HT)||null;if(p=p&&_F[p]||null,!u||!f||!p)throw new R("argument-error",BT+", "+qT+"and "+HT+" are required in a valid action code URL.");Pn(this,{apiKey:u,operation:p,code:f,continueUrl:Er(o,gF)||null,languageCode:Er(o,mF)||null,tenantId:Er(o,yF)||null})}var BT="apiKey",qT="oobCode",gF="continueUrl",mF="languageCode",HT="mode",yF="tenantId",_F={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:bg,signIn:Yf,verifyAndChangeEmail:wc,verifyEmail:"VERIFY_EMAIL"};function KT(o){try{return new Eg(o)}catch{return null}}function Xf(o){var u=o[wF];if(typeof u>"u")throw new R("missing-continue-uri");if(typeof u!="string"||typeof u=="string"&&!u.length)throw new R("invalid-continue-uri");this.h=u,this.b=this.a=null,this.g=!1;var f=o[WT];if(f&&typeof f=="object"){u=f[YT];var p=f[$T];if(f=f[QT],typeof u=="string"&&u.length){if(this.a=u,typeof p<"u"&&typeof p!="boolean")throw new R("argument-error",$T+" property must be a boolean when specified.");if(this.g=!!p,typeof f<"u"&&(typeof f!="string"||typeof f=="string"&&!f.length))throw new R("argument-error",QT+" property must be a non empty string when specified.");this.b=f||null}else{if(typeof u<"u")throw new R("argument-error",YT+" property must be a non empty string when specified.");if(typeof p<"u"||typeof f<"u")throw new R("missing-android-pkg-name")}}else if(typeof f<"u")throw new R("argument-error",WT+" property must be a non null object when specified.");if(this.f=null,(u=o[zT])&&typeof u=="object"){if(u=u[XT],typeof u=="string"&&u.length)this.f=u;else if(typeof u<"u")throw new R("argument-error",XT+" property must be a non empty string when specified.")}else if(typeof u<"u")throw new R("argument-error",zT+" property must be a non null object when specified.");if(u=o[Tg],typeof u<"u"&&typeof u!="boolean")throw new R("argument-error",Tg+" property must be a boolean when specified.");if(this.c=!!u,o=o[GT],typeof o<"u"&&(typeof o!="string"||typeof o=="string"&&!o.length))throw new R("argument-error",GT+" property must be a non empty string when specified.");this.i=o||null}var WT="android",GT="dynamicLinkDomain",Tg="handleCodeInApp",zT="iOS",wF="url",$T="installApp",QT="minimumVersion",YT="packageName",XT="bundleId";function Jf(o){var u={};u.continueUrl=o.h,u.canHandleCodeInApp=o.c,(u.androidPackageName=o.a)&&(u.androidMinimumVersion=o.b,u.androidInstallApp=o.g),u.iOSBundleId=o.f,u.dynamicLinkDomain=o.i;for(var f in u)u[f]===null&&delete u[f];return u}function bF(o){return Ie(o,function(u){return u=u.toString(16),1<u.length?u:"0"+u}).join("")}var bc=null;function EF(o){var u=[];return TF(o,function(f){u.push(f)}),u}function TF(o,u){function f(L){for(;p<o.length;){var B=o.charAt(p++),be=bc[B];if(be!=null)return be;if(!/^[\s\xa0]*$/.test(B))throw Error("Unknown base64 encoding at char: "+B)}return L}IF();for(var p=0;;){var g=f(-1),_=f(0),b=f(64),S=f(64);if(S===64&&g===-1)break;u(g<<2|_>>4),b!=64&&(u(_<<4&240|b>>2),S!=64&&u(b<<6&192|S))}}function IF(){if(!bc){bc={};for(var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),u=["+/=","+/","-_=","-_.","-_"],f=0;5>f;f++)for(var p=o.concat(u[f].split("")),g=0;g<p.length;g++){var _=p[g];bc[_]===void 0&&(bc[_]=g)}}}function Zf(o){var u=JT(o);if(!(u&&u.sub&&u.iss&&u.aud&&u.exp))throw Error("Invalid JWT");this.h=o,this.a=u.exp,this.i=u.sub,o=Date.now()/1e3,this.g=u.iat||(o>this.a?this.a:o),this.b=u.provider_id||u.firebase&&u.firebase.sign_in_provider||null,this.f=u.firebase&&u.firebase.tenant||null,this.c=!!u.is_anonymous||this.b=="anonymous"}Zf.prototype.T=function(){return this.f},Zf.prototype.l=function(){return this.c},Zf.prototype.toString=function(){return this.h};function eh(o){try{return new Zf(o)}catch{return null}}function JT(o){if(!o||(o=o.split("."),o.length!=3))return null;o=o[1];for(var u=(4-o.length%4)%4,f=0;f<u;f++)o+=".";try{var p=EF(o);for(o=[],f=u=0;u<p.length;){var g=p[u++];if(128>g)o[f++]=String.fromCharCode(g);else if(191<g&&224>g){var _=p[u++];o[f++]=String.fromCharCode((g&31)<<6|_&63)}else if(239<g&&365>g){_=p[u++];var b=p[u++],S=p[u++],L=((g&7)<<18|(_&63)<<12|(b&63)<<6|S&63)-65536;o[f++]=String.fromCharCode(55296+(L>>10)),o[f++]=String.fromCharCode(56320+(L&1023))}else _=p[u++],b=p[u++],o[f++]=String.fromCharCode((g&15)<<12|(_&63)<<6|b&63)}return JSON.parse(o.join(""))}catch{}return null}var ZT="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),th=["client_id","response_type","scope","redirect_uri","state"],Ig={nd:{Ja:"locale",va:700,ua:600,fa:"facebook.com",Ya:th},pd:{Ja:null,va:500,ua:750,fa:"github.com",Ya:th},qd:{Ja:"hl",va:515,ua:680,fa:"google.com",Ya:th},wd:{Ja:"lang",va:485,ua:705,fa:"twitter.com",Ya:ZT},kd:{Ja:"locale",va:640,ua:600,fa:"apple.com",Ya:[]}};function Sg(o){for(var u in Ig)if(Ig[u].fa==o)return Ig[u];return null}function eI(o){var u={};u["facebook.com"]=nI,u["google.com"]=iI,u["github.com"]=rI,u["twitter.com"]=oI;var f=o&&o[tI];try{if(f)return u[f]?new u[f](o):new li(o);if(typeof o[Cg]<"u")return new Ag(o)}catch{}return null}var Cg="idToken",tI="providerId";function Ag(o){var u=o[tI];if(!u&&o[Cg]){var f=eh(o[Cg]);f&&f.b&&(u=f.b)}if(!u)throw Error("Invalid additional user info!");(u=="anonymous"||u=="custom")&&(u=null),f=!1,typeof o.isNewUser<"u"?f=!!o.isNewUser:o.kind==="identitytoolkit#SignupNewUserResponse"&&(f=!0),ae(this,"providerId",u),ae(this,"isNewUser",f)}function li(o){Ag.call(this,o),o=ka(o.rawUserInfo||"{}"),ae(this,"profile",vg(o||{}))}F(li,Ag);function nI(o){if(li.call(this,o),this.providerId!="facebook.com")throw Error("Invalid provider ID!")}F(nI,li);function rI(o){if(li.call(this,o),this.providerId!="github.com")throw Error("Invalid provider ID!");ae(this,"username",this.profile&&this.profile.login||null)}F(rI,li);function iI(o){if(li.call(this,o),this.providerId!="google.com")throw Error("Invalid provider ID!")}F(iI,li);function oI(o){if(li.call(this,o),this.providerId!="twitter.com")throw Error("Invalid provider ID!");ae(this,"username",o.screenName||null)}F(oI,li);function sI(o){var u=$n(o),f=Er(u,"link"),p=Er($n(f),"link");return u=Er(u,"deep_link_id"),Er($n(u),"link")||u||p||f||o}function nh(o,u){if(!o&&!u)throw new R("internal-error","Internal assert: no raw session string available");if(o&&u)throw new R("internal-error","Internal assert: unable to determine the session type");this.a=o||null,this.b=u||null,this.type=this.a?Ec:rh}var Ec="enroll",rh="signin";nh.prototype.Ha=function(){return this.a?pe(this.a):pe(this.b)},nh.prototype.w=function(){return this.type==Ec?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}};function Ra(){}Ra.prototype.ka=function(){},Ra.prototype.b=function(){},Ra.prototype.c=function(){},Ra.prototype.w=function(){};function Na(o,u){return o.then(function(f){if(f[qr]){var p=eh(f[qr]);if(!p||u!=p.i)throw new R("user-mismatch");return f}throw new R("user-mismatch")}).o(function(f){throw f&&f.code&&f.code==lt+"user-not-found"?new R("user-mismatch"):f})}function as(o,u){if(u)this.a=u;else throw new R("internal-error","failed to construct a credential");ae(this,"providerId",o),ae(this,"signInMethod",o)}as.prototype.ka=function(o){return Xg(o,kg(this))},as.prototype.b=function(o,u){var f=kg(this);return f.idToken=u,Jg(o,f)},as.prototype.c=function(o,u){return Na(Zg(o,kg(this)),u)};function kg(o){return{pendingToken:o.a,requestUri:"http://localhost"}}as.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}};function SF(o){if(o&&o.providerId&&o.signInMethod&&o.providerId.indexOf("saml.")==0&&o.pendingToken)try{return new as(o.providerId,o.pendingToken)}catch{}return null}function xi(o,u,f){if(this.a=null,u.idToken||u.accessToken)u.idToken&&ae(this,"idToken",u.idToken),u.accessToken&&ae(this,"accessToken",u.accessToken),u.nonce&&!u.pendingToken&&ae(this,"nonce",u.nonce),u.pendingToken&&(this.a=u.pendingToken);else if(u.oauthToken&&u.oauthTokenSecret)ae(this,"accessToken",u.oauthToken),ae(this,"secret",u.oauthTokenSecret);else throw new R("internal-error","failed to construct a credential");ae(this,"providerId",o),ae(this,"signInMethod",f)}xi.prototype.ka=function(o){return Xg(o,Rg(this))},xi.prototype.b=function(o,u){var f=Rg(this);return f.idToken=u,Jg(o,f)},xi.prototype.c=function(o,u){var f=Rg(this);return Na(Zg(o,f),u)};function Rg(o){var u={};return o.idToken&&(u.id_token=o.idToken),o.accessToken&&(u.access_token=o.accessToken),o.secret&&(u.oauth_token_secret=o.secret),u.providerId=o.providerId,o.nonce&&!o.a&&(u.nonce=o.nonce),u={postBody:_T(u).toString(),requestUri:"http://localhost"},o.a&&(delete u.postBody,u.pendingToken=o.a),u}xi.prototype.w=function(){var o={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(o.oauthIdToken=this.idToken),this.accessToken&&(o.oauthAccessToken=this.accessToken),this.secret&&(o.oauthTokenSecret=this.secret),this.nonce&&(o.nonce=this.nonce),this.a&&(o.pendingToken=this.a),o};function CF(o){if(o&&o.providerId&&o.signInMethod){var u={idToken:o.oauthIdToken,accessToken:o.oauthTokenSecret?null:o.oauthAccessToken,oauthTokenSecret:o.oauthTokenSecret,oauthToken:o.oauthTokenSecret&&o.oauthAccessToken,nonce:o.nonce,pendingToken:o.pendingToken};try{return new xi(o.providerId,u,o.signInMethod)}catch{}}return null}function us(o,u){this.Qc=u||[],Pn(this,{providerId:o,isOAuthProvider:!0}),this.Jb={},this.qb=(Sg(o)||{}).Ja||null,this.pb=null}us.prototype.Ka=function(o){return this.Jb=bt(o),this};function aI(o){if(typeof o!="string"||o.indexOf("saml.")!=0)throw new R("argument-error",'SAML provider IDs must be prefixed with "saml."');us.call(this,o,[])}F(aI,us);function sr(o){us.call(this,o,th),this.a=[]}F(sr,us),sr.prototype.Ca=function(o){return x(this.a,o)||this.a.push(o),this},sr.prototype.Rb=function(){return Z(this.a)},sr.prototype.credential=function(o,u){var f;if(T(o)?f={idToken:o.idToken||null,accessToken:o.accessToken||null,nonce:o.rawNonce||null}:f={idToken:o||null,accessToken:u||null},!f.idToken&&!f.accessToken)throw new R("argument-error","credential failed: must provide the ID token and/or the access token.");return new xi(this.providerId,f,this.providerId)};function cs(){sr.call(this,"facebook.com")}F(cs,sr),ae(cs,"PROVIDER_ID","facebook.com"),ae(cs,"FACEBOOK_SIGN_IN_METHOD","facebook.com");function uI(o){if(!o)throw new R("argument-error","credential failed: expected 1 argument (the OAuth access token).");var u=o;return T(o)&&(u=o.accessToken),new cs().credential({accessToken:u})}function ls(){sr.call(this,"github.com")}F(ls,sr),ae(ls,"PROVIDER_ID","github.com"),ae(ls,"GITHUB_SIGN_IN_METHOD","github.com");function cI(o){if(!o)throw new R("argument-error","credential failed: expected 1 argument (the OAuth access token).");var u=o;return T(o)&&(u=o.accessToken),new ls().credential({accessToken:u})}function fs(){sr.call(this,"google.com"),this.Ca("profile")}F(fs,sr),ae(fs,"PROVIDER_ID","google.com"),ae(fs,"GOOGLE_SIGN_IN_METHOD","google.com");function lI(o,u){var f=o;return T(o)&&(f=o.idToken,u=o.accessToken),new fs().credential({idToken:f,accessToken:u})}function Pa(){us.call(this,"twitter.com",ZT)}F(Pa,us),ae(Pa,"PROVIDER_ID","twitter.com"),ae(Pa,"TWITTER_SIGN_IN_METHOD","twitter.com");function fI(o,u){var f=o;if(T(f)||(f={oauthToken:o,oauthTokenSecret:u}),!f.oauthToken||!f.oauthTokenSecret)throw new R("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new xi("twitter.com",f,"twitter.com")}function lo(o,u,f){this.a=o,this.f=u,ae(this,"providerId","password"),ae(this,"signInMethod",f===Tr.EMAIL_LINK_SIGN_IN_METHOD?Tr.EMAIL_LINK_SIGN_IN_METHOD:Tr.EMAIL_PASSWORD_SIGN_IN_METHOD)}lo.prototype.ka=function(o){return this.signInMethod==Tr.EMAIL_LINK_SIGN_IN_METHOD?Fe(o,l2,{email:this.a,oobCode:this.f}):Fe(o,jI,{email:this.a,password:this.f})},lo.prototype.b=function(o,u){return this.signInMethod==Tr.EMAIL_LINK_SIGN_IN_METHOD?Fe(o,f2,{idToken:u,email:this.a,oobCode:this.f}):Fe(o,UI,{idToken:u,email:this.a,password:this.f})},lo.prototype.c=function(o,u){return Na(this.ka(o),u)},lo.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}};function AF(o){return o&&o.email&&o.password?new lo(o.email,o.password,o.signInMethod):null}function Tr(){Pn(this,{providerId:"password",isOAuthProvider:!1})}function hI(o,u){if(u=Ng(u),!u)throw new R("argument-error","Invalid email link!");return new lo(o,u.code,Tr.EMAIL_LINK_SIGN_IN_METHOD)}function Ng(o){return o=sI(o),(o=KT(o))&&o.operation===Yf?o:null}Pn(Tr,{PROVIDER_ID:"password"}),Pn(Tr,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Pn(Tr,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"});function fo(o){if(!(o.fb&&o.eb||o.La&&o.ea))throw new R("internal-error");this.a=o,ae(this,"providerId","phone"),this.fa="phone",ae(this,"signInMethod","phone")}fo.prototype.ka=function(o){return o.gb(Tc(this))},fo.prototype.b=function(o,u){var f=Tc(this);return f.idToken=u,Fe(o,P2,f)},fo.prototype.c=function(o,u){var f=Tc(this);return f.operation="REAUTH",o=Fe(o,O2,f),Na(o,u)},fo.prototype.w=function(){var o={providerId:"phone"};return this.a.fb&&(o.verificationId=this.a.fb),this.a.eb&&(o.verificationCode=this.a.eb),this.a.La&&(o.temporaryProof=this.a.La),this.a.ea&&(o.phoneNumber=this.a.ea),o};function kF(o){if(o&&o.providerId==="phone"&&(o.verificationId&&o.verificationCode||o.temporaryProof&&o.phoneNumber)){var u={};return J(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(f){o[f]&&(u[f]=o[f])}),new fo(u)}return null}function Tc(o){return o.a.La&&o.a.ea?{temporaryProof:o.a.La,phoneNumber:o.a.ea}:{sessionInfo:o.a.fb,code:o.a.eb}}function Li(o){try{this.a=o||ce.auth()}catch{throw new R("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Pn(this,{providerId:"phone",isOAuthProvider:!1})}Li.prototype.gb=function(o,u){var f=this.a.a;return pe(u.verify()).then(function(p){if(typeof p!="string")throw new R("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(u.type){case"recaptcha":var g=T(o)?o.session:null,_=T(o)?o.phoneNumber:o,b;return g&&g.type==Ec?b=g.Ha().then(function(S){return t2(f,{idToken:S,phoneEnrollmentInfo:{phoneNumber:_,recaptchaToken:p}})}):g&&g.type==rh?b=g.Ha().then(function(S){return n2(f,{mfaPendingCredential:S,mfaEnrollmentId:o.multiFactorHint&&o.multiFactorHint.uid||o.multiFactorUid,phoneSignInInfo:{recaptchaToken:p}})}):b=e2(f,{phoneNumber:_,recaptchaToken:p}),b.then(function(S){return typeof u.reset=="function"&&u.reset(),S},function(S){throw typeof u.reset=="function"&&u.reset(),S});default:throw new R("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})};function dI(o,u){if(!o)throw new R("missing-verification-id");if(!u)throw new R("missing-verification-code");return new fo({fb:o,eb:u})}Pn(Li,{PROVIDER_ID:"phone"}),Pn(Li,{PHONE_SIGN_IN_METHOD:"phone"});function Pg(o){if(o.temporaryProof&&o.phoneNumber)return new fo({La:o.temporaryProof,ea:o.phoneNumber});var u=o&&o.providerId;if(!u||u==="password")return null;var f=o&&o.oauthAccessToken,p=o&&o.oauthTokenSecret,g=o&&o.nonce,_=o&&o.oauthIdToken,b=o&&o.pendingToken;try{switch(u){case"google.com":return lI(_,f);case"facebook.com":return uI(f);case"github.com":return cI(f);case"twitter.com":return fI(f,p);default:return f||p||_||b?b?u.indexOf("saml.")==0?new as(u,b):new xi(u,{pendingToken:b,idToken:o.oauthIdToken,accessToken:o.oauthAccessToken},u):new sr(u).credential({idToken:_,accessToken:f,rawNonce:g}):null}}catch{return null}}function Og(o){if(!o.isOAuthProvider)throw new R("invalid-oauth-provider")}function Vr(o,u,f,p,g,_,b){if(this.c=o,this.b=u||null,this.g=f||null,this.f=p||null,this.i=_||null,this.h=b||null,this.a=g||null,this.g||this.a){if(this.g&&this.a)throw new R("invalid-auth-event");if(this.g&&!this.f)throw new R("invalid-auth-event")}else throw new R("invalid-auth-event")}Vr.prototype.getUid=function(){var o=[];return o.push(this.c),this.b&&o.push(this.b),this.f&&o.push(this.f),this.h&&o.push(this.h),o.join("-")},Vr.prototype.T=function(){return this.h},Vr.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};function pI(o){return o=o||{},o.type?new Vr(o.type,o.eventId,o.urlResponse,o.sessionId,o.error&&tt(o.error),o.postBody,o.tenantId):null}function RF(){this.b=null,this.a=[]}var Dg=null;function NF(o){var u=Dg;u.a.push(o),u.b||(u.b=function(f){for(var p=0;p<u.a.length;p++)u.a[p](f)},o=dt("universalLinks.subscribe",l),typeof o=="function"&&o(null,u.b))}function xg(o){var u="unauthorized-domain",f=void 0,p=$n(o);o=p.a,p=p.c,p=="chrome-extension"?f=UE("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",o):p=="http"||p=="https"?f=UE("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",o):u="operation-not-supported-in-this-environment",R.call(this,u,f)}F(xg,R);function Ic(o,u,f){R.call(this,o,f),o=u||{},o.Kb&&ae(this,"email",o.Kb),o.ea&&ae(this,"phoneNumber",o.ea),o.credential&&ae(this,"credential",o.credential),o.$b&&ae(this,"tenantId",o.$b)}F(Ic,R),Ic.prototype.w=function(){var o={code:this.code,message:this.message};this.email&&(o.email=this.email),this.phoneNumber&&(o.phoneNumber=this.phoneNumber),this.tenantId&&(o.tenantId=this.tenantId);var u=this.credential&&this.credential.w();return u&&en(o,u),o},Ic.prototype.toJSON=function(){return this.w()};function ih(o){if(o.code){var u=o.code||"";u.indexOf(lt)==0&&(u=u.substring(lt.length));var f={credential:Pg(o),$b:o.tenantId};if(o.email)f.Kb=o.email;else if(o.phoneNumber)f.ea=o.phoneNumber;else if(!f.credential)return new R(u,o.message||void 0);return new Ic(u,f,o.message)}return null}function Sc(){}Sc.prototype.c=null;function vI(o){return o.c||(o.c=o.b())}var Lg;function oh(){}F(oh,Sc),oh.prototype.a=function(){var o=gI(this);return o?new ActiveXObject(o):new XMLHttpRequest},oh.prototype.b=function(){var o={};return gI(this)&&(o[0]=!0,o[1]=!0),o};function gI(o){if(!o.f&&typeof XMLHttpRequest>"u"&&typeof ActiveXObject<"u"){for(var u=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],f=0;f<u.length;f++){var p=u[f];try{return new ActiveXObject(p),o.f=p}catch{}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return o.f}Lg=new oh;function sh(){}F(sh,Sc),sh.prototype.a=function(){var o=new XMLHttpRequest;if("withCredentials"in o)return o;if(typeof XDomainRequest<"u")return new mI;throw Error("Unsupported browser")},sh.prototype.b=function(){return{}};function mI(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=U(this.qc,this),this.a.onerror=U(this.Tb,this),this.a.onprogress=U(this.rc,this),this.a.ontimeout=U(this.vc,this)}e=mI.prototype,e.open=function(o,u,f){if(f!=null&&!f)throw Error("Only async requests are supported.");this.a.open(o,u)},e.send=function(o){if(o)if(typeof o=="string")this.a.send(o);else throw Error("Only string data is supported");else this.a.send()},e.abort=function(){this.a.abort()},e.setRequestHeader=function(){},e.getResponseHeader=function(o){return o.toLowerCase()=="content-type"?this.a.contentType:""},e.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Mg(this,4)},e.Tb=function(){this.status=500,this.response=this.responseText="",Mg(this,4)},e.vc=function(){this.Tb()},e.rc=function(){this.status=200,Mg(this,1)};function Mg(o,u){o.readyState=u,o.onreadystatechange&&o.onreadystatechange()}e.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType};function Fg(o,u,f){this.reset(o,u,f,void 0,void 0)}Fg.prototype.a=null,Fg.prototype.reset=function(o,u,f,p,g){delete this.a};function Ug(o){this.f=o,this.b=this.c=this.a=null}function Cc(o,u){this.name=o,this.value=u}Cc.prototype.toString=function(){return this.name};var yI=new Cc("SEVERE",1e3),jg=new Cc("WARNING",900),PF=new Cc("CONFIG",700),OF=new Cc("FINE",500);function _I(o){return o.c?o.c:o.a?_I(o.a):(Kn("Root logger has no level set."),null)}Ug.prototype.log=function(o,u,f){if(o.value>=_I(this).value)for(E(u)&&(u=u()),o=new Fg(o,String(u),this.f),f&&(o.a=f),f=this;f;)f=f.a};var Vg={},ah=null;function Bg(o){ah||(ah=new Ug(""),Vg[""]=ah,ah.c=PF);var u;if(!(u=Vg[o])){u=new Ug(o);var f=o.lastIndexOf("."),p=o.substr(f+1);f=Bg(o.substr(0,f)),f.b||(f.b={}),f.b[p]=u,u.a=f,Vg[o]=u}return u}function Ir(o,u){o&&o.log(OF,u,void 0)}function uh(o){this.f=o}F(uh,Sc),uh.prototype.a=function(){return new ch(this.f)},uh.prototype.b=function(o){return function(){return o}}({});function ch(o){Nn.call(this),this.u=o,this.h=void 0,this.readyState=qg,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=Bg("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}F(ch,Nn);var qg=0;e=ch.prototype,e.open=function(o,u){if(this.readyState!=qg)throw this.abort(),Error("Error reopening a connection");this.s=o,this.f=u,this.readyState=1,kc(this)},e.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.a=!0;var u={headers:this.l,method:this.s,credentials:this.h,cache:void 0};o&&(u.body=o),this.u.fetch(new Request(this.f,u)).then(this.uc.bind(this),this.Va.bind(this))},e.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&this.readyState!=4&&(this.a=!1,Ac(this)),this.readyState=qg},e.uc=function(o){this.a&&(this.g=o,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=o.headers,this.readyState=2,kc(this)),this.a&&(this.readyState=3,kc(this),this.a&&(this.responseType==="arraybuffer"?o.arrayBuffer().then(this.sc.bind(this),this.Va.bind(this)):typeof l.ReadableStream<"u"&&"body"in o?(this.response=this.responseText="",this.c=o.body.getReader(),this.m=new TextDecoder,wI(this)):o.text().then(this.tc.bind(this),this.Va.bind(this)))))};function wI(o){o.c.read().then(o.pc.bind(o)).catch(o.Va.bind(o))}e.pc=function(o){if(this.a){var u=this.m.decode(o.value?o.value:new Uint8Array(0),{stream:!o.done});u&&(this.response=this.responseText+=u),o.done?Ac(this):kc(this),this.readyState==3&&wI(this)}},e.tc=function(o){this.a&&(this.response=this.responseText=o,Ac(this))},e.sc=function(o){this.a&&(this.response=o,Ac(this))},e.Va=function(o){var u=this.i;u&&u.log(jg,"Failed to fetch url "+this.f,o instanceof Error?o:Error(o)),this.a&&Ac(this)};function Ac(o){o.readyState=4,o.g=null,o.c=null,o.m=null,kc(o)}e.setRequestHeader=function(o,u){this.l.append(o,u)},e.getResponseHeader=function(o){return this.b?this.b.get(o.toLowerCase())||"":((o=this.i)&&o.log(jg,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},e.getAllResponseHeaders=function(){if(!this.b){var o=this.i;return o&&o.log(jg,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}o=[];for(var u=this.b.entries(),f=u.next();!f.done;)f=f.value,o.push(f[0]+": "+f[1]),f=u.next();return o.join(`\r
`)};function kc(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(ch.prototype,"withCredentials",{get:function(){return this.h==="include"},set:function(o){this.h=o?"include":"same-origin"}});function Rc(o){Nn.call(this),this.headers=new Ta,this.D=o||null,this.c=!1,this.C=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.J=!1,this.g=0,this.s=null,this.m=bI,this.u=this.S=!1}F(Rc,Nn);var bI="";Rc.prototype.b=Bg("goog.net.XhrIo");var DF=/^https?$/i,xF=["POST","PUT"];function LF(o,u,f,p,g){if(o.a)throw Error("[goog.net.XhrIo] Object is active with another request="+o.l+"; newUri="+u);f=f?f.toUpperCase():"GET",o.l=u,o.h="",o.P=f,o.J=!1,o.c=!0,o.a=o.D?o.D.a():Lg.a(),o.C=o.D?vI(o.D):vI(Lg),o.a.onreadystatechange=U(o.Wb,o);try{Ir(o.b,Mi(o,"Opening Xhr")),o.N=!0,o.a.open(f,String(u),!0),o.N=!1}catch(b){Ir(o.b,Mi(o,"Error opening Xhr: "+b.message)),EI(o,b);return}u=p||"";var _=new Ta(o.headers);g&&BM(g,function(b,S){_.set(S,b)}),g=N(_.Y()),p=l.FormData&&u instanceof l.FormData,!x(xF,f)||g||p||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),_.forEach(function(b,S){this.a.setRequestHeader(S,b)},o),o.m&&(o.a.responseType=o.m),"withCredentials"in o.a&&o.a.withCredentials!==o.S&&(o.a.withCredentials=o.S);try{SI(o),0<o.g&&(o.u=MF(o.a),Ir(o.b,Mi(o,"Will abort after "+o.g+"ms if incomplete, xhr2 "+o.u)),o.u?(o.a.timeout=o.g,o.a.ontimeout=U(o.Ma,o)):o.s=tg(o.Ma,o.g,o)),Ir(o.b,Mi(o,"Sending request")),o.i=!0,o.a.send(u),o.i=!1}catch(b){Ir(o.b,Mi(o,"Send error: "+b.message)),EI(o,b)}}function MF(o){return Ur&&qE(9)&&typeof o.timeout=="number"&&o.ontimeout!==void 0}function FF(o){return o.toLowerCase()=="content-type"}e=Rc.prototype,e.Ma=function(){typeof c<"u"&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",Ir(this.b,Mi(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))};function EI(o,u){o.c=!1,o.a&&(o.f=!0,o.a.abort(),o.f=!1),o.h=u,TI(o),lh(o)}function TI(o){o.J||(o.J=!0,o.dispatchEvent("complete"),o.dispatchEvent("error"))}e.abort=function(){this.a&&this.c&&(Ir(this.b,Mi(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),lh(this))},e.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),lh(this,!0)),Rc.bb.Da.call(this)},e.Wb=function(){this.ya||(this.N||this.i||this.f?II(this):this.Jc())},e.Jc=function(){II(this)};function II(o){if(o.c&&typeof c<"u"){if(o.C[1]&&Nc(o)==4&&fh(o)==2)Ir(o.b,Mi(o,"Local request error detected and ignored"));else if(o.i&&Nc(o)==4)tg(o.Wb,0,o);else if(o.dispatchEvent("readystatechange"),Nc(o)==4){Ir(o.b,Mi(o,"Request complete")),o.c=!1;try{var u=fh(o);e:switch(u){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var p;if(!(p=f)){var g;if(g=u===0){var _=String(o.l).match(mT)[1]||null;if(!_&&l.self&&l.self.location){var b=l.self.location.protocol;_=b.substr(0,b.length-1)}g=!DF.test(_?_.toLowerCase():"")}p=g}if(p)o.dispatchEvent("complete"),o.dispatchEvent("success");else{try{var S=2<Nc(o)?o.a.statusText:""}catch(L){Ir(o.b,"Can not get status: "+L.message),S=""}o.h=S+" ["+fh(o)+"]",TI(o)}}finally{lh(o)}}}}function lh(o,u){if(o.a){SI(o);var f=o.a,p=o.C[0]?m:null;o.a=null,o.C=null,u||o.dispatchEvent("ready");try{f.onreadystatechange=p}catch(g){(o=o.b)&&o.log(yI,"Problem encountered resetting onreadystatechange: "+g.message,void 0)}}}function SI(o){o.a&&o.u&&(o.a.ontimeout=null),o.s&&(l.clearTimeout(o.s),o.s=null)}function Nc(o){return o.a?o.a.readyState:0}function fh(o){try{return 2<Nc(o)?o.a.status:-1}catch{return-1}}function UF(o){try{return o.a?o.a.responseText:""}catch(u){return Ir(o.b,"Can not get responseText: "+u.message),""}}e.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case bI:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var o=this.b;return o&&o.log(yI,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(u){return Ir(this.b,"Can not get response: "+u.message),null}};function Mi(o,u){return u+" ["+o.P+" "+o.l+" "+fh(o)+"]"}function hs(o){var u=BF;this.g=[],this.u=u,this.s=o||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}hs.prototype.cancel=function(o){if(this.a)this.c instanceof hs&&this.c.cancel();else{if(this.b){var u=this.b;delete this.b,o?u.cancel(o):(u.l--,0>=u.l&&u.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(o=new Oc,hh(this),Pc(this,!1,o))}},hs.prototype.m=function(o,u){this.i=!1,Pc(this,o,u)};function Pc(o,u,f){o.a=!0,o.c=f,o.f=!u,AI(o)}function hh(o){if(o.a){if(!o.v)throw new dh;o.v=!1}}function jF(o,u){Hg(o,null,u,void 0)}function Hg(o,u,f,p){o.g.push([u,f,p]),o.a&&AI(o)}hs.prototype.then=function(o,u,f){var p,g,_=new Me(function(b,S){p=b,g=S});return Hg(this,p,function(b){b instanceof Oc?_.cancel():g(b)}),_.then(o,u,f)},hs.prototype.$goog_Thenable=!0;function CI(o){return I(o.g,function(u){return E(u[1])})}function AI(o){if(o.h&&o.a&&CI(o)){var u=o.h,f=ph[u];f&&(l.clearTimeout(f.a),delete ph[u]),o.h=0}o.b&&(o.b.l--,delete o.b),u=o.c;for(var p=f=!1;o.g.length&&!o.i;){var g=o.g.shift(),_=g[0],b=g[1];if(g=g[2],_=o.f?b:_)try{var S=_.call(g||o.s,u);S!==void 0&&(o.f=o.f&&(S==u||S instanceof Error),o.c=u=S),(Ye(u)||typeof l.Promise=="function"&&u instanceof l.Promise)&&(p=!0,o.i=!0)}catch(L){u=L,o.f=!0,CI(o)||(f=!0)}}o.c=u,p&&(S=U(o.m,o,!0),p=U(o.m,o,!1),u instanceof hs?(Hg(u,S,p),u.C=!0):u.then(S,p)),f&&(u=new kI(u),ph[u.a]=u,o.h=u.a)}function dh(){Ce.call(this)}F(dh,Ce),dh.prototype.message="Deferred has already fired",dh.prototype.name="AlreadyCalledError";function Oc(){Ce.call(this)}F(Oc,Ce),Oc.prototype.message="Deferred was canceled",Oc.prototype.name="CanceledError";function kI(o){this.a=l.setTimeout(U(this.c,this),0),this.b=o}kI.prototype.c=function(){throw delete ph[this.a],this.b};var ph={};function Kg(o){var u={},f=u.document||document,p=NE(o).toString(),g=jf(document,"SCRIPT"),_={Xb:g,Ma:void 0},b=new hs(_),S=null,L=u.timeout!=null?u.timeout:5e3;return 0<L&&(S=window.setTimeout(function(){vh(g,!0);var B=new Wg(HF,"Timeout reached for loading script "+p);hh(b),Pc(b,!1,B)},L),_.Ma=S),g.onload=g.onreadystatechange=function(){g.readyState&&g.readyState!="loaded"&&g.readyState!="complete"||(vh(g,u.xd||!1,S),hh(b),Pc(b,!0,null))},g.onerror=function(){vh(g,!0,S);var B=new Wg(qF,"Error while loading script "+p);hh(b),Pc(b,!1,B)},_=u.attributes||{},en(_,{type:"text/javascript",charset:"UTF-8"}),KE(g,_),yM(g,o),VF(f).appendChild(g),b}function VF(o){var u;return(u=(o||document).getElementsByTagName("HEAD"))&&u.length!=0?u[0]:o.documentElement}function BF(){if(this&&this.Xb){var o=this.Xb;o&&o.tagName=="SCRIPT"&&vh(o,!0,this.Ma)}}function vh(o,u,f){f!=null&&l.clearTimeout(f),o.onload=m,o.onerror=m,o.onreadystatechange=m,u&&window.setTimeout(function(){o&&o.parentNode&&o.parentNode.removeChild(o)},0)}var qF=0,HF=1;function Wg(o,u){var f="Jsloader error (code #"+o+")";u&&(f+=": "+u),Ce.call(this,f),this.code=o}F(Wg,Ce);function gh(o){this.f=o}F(gh,Sc),gh.prototype.a=function(){return new this.f},gh.prototype.b=function(){return{}};function Br(o,u,f){if(this.c=o,o=u||{},this.l=o.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=o.secureTokenTimeout||KF,this.g=bt(o.secureTokenHeaders||WF),this.h=o.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=o.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=o.firebaseTimeout||GF,this.a=bt(o.firebaseHeaders||zF),f&&(this.a["X-Client-Version"]=f,this.g["X-Client-Version"]=f),f=ui()=="Node",f=l.XMLHttpRequest||f&&ce.INTERNAL.node&&ce.INTERNAL.node.XMLHttpRequest,!f&&!jr())throw new R("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,jr()?this.f=new uh(self):RT()?this.f=new gh(f):this.f=new sh,this.b=null}var Gg,qr="idToken",KF=new co(3e4,6e4),WF={"Content-Type":"application/x-www-form-urlencoded"},GF=new co(3e4,6e4),zF={"Content-Type":"application/json"};function RI(o,u){u?o.a["X-Firebase-Locale"]=u:delete o.a["X-Firebase-Locale"]}function mh(o,u){u&&(o.l=zg("https://securetoken.googleapis.com/v1/token",u),o.h=zg("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",u),o.i=zg("https://identitytoolkit.googleapis.com/v2/",u))}function zg(o,u){return o=$n(o),u=$n(u.url),o.f=o.a+o.f,fc(o,u.c),o.a=u.a,hc(o,u.g),o.toString()}function NI(o,u){u?(o.a["X-Client-Version"]=u,o.g["X-Client-Version"]=u):(delete o.a["X-Client-Version"],delete o.g["X-Client-Version"])}Br.prototype.T=function(){return this.b};function PI(o,u,f,p,g,_,b){XM()||jr()?o=U(o.u,o):(Gg||(Gg=new Me(function(S,L){QF(S,L)})),o=U(o.s,o)),o(u,f,p,g,_,b)}Br.prototype.u=function(o,u,f,p,g,_){if(jr()&&(typeof l.fetch>"u"||typeof l.Headers>"u"||typeof l.Request>"u"))throw new R("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var b=new Rc(this.f);if(_){b.g=Math.max(0,_);var S=setTimeout(function(){b.dispatchEvent("timeout")},_)}pT(b,"complete",function(){S&&clearTimeout(S);var L=null;try{L=JSON.parse(UF(this))||null}catch{L=null}u&&u(L)}),eg(b,"ready",function(){S&&clearTimeout(S),aT(this)}),eg(b,"timeout",function(){S&&clearTimeout(S),aT(this),u&&u(null)}),LF(b,o,f,p,g)};var $F=new si(Lf,"https://apis.google.com/js/client.js?onload=%{onload}"),OI="__fcb"+Math.floor(1e6*Math.random()).toString();function QF(o,u){if(((window.gapi||{}).client||{}).request)o();else{l[OI]=function(){((window.gapi||{}).client||{}).request?o():u(Error("CORS_UNSUPPORTED"))};var f=Mv($F,{onload:OI});jF(Kg(f),function(){u(Error("CORS_UNSUPPORTED"))})}}Br.prototype.s=function(o,u,f,p,g){var _=this;Gg.then(function(){window.gapi.client.setApiKey(_.c);var b=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:o,method:f,body:p,headers:g,authType:"none",callback:function(S){window.gapi.auth.setToken(b),u&&u(S)}})}).o(function(b){u&&u({error:{message:b&&b.message||"CORS_UNSUPPORTED"}})})};function YF(o,u){return new Me(function(f,p){u.grant_type=="refresh_token"&&u.refresh_token||u.grant_type=="authorization_code"&&u.code?PI(o,o.l+"?key="+encodeURIComponent(o.c),function(g){g?g.error?p(tm(g)):g.access_token&&g.refresh_token?f(g):p(new R("internal-error")):p(new R("network-request-failed"))},"POST",_T(u).toString(),o.g,o.m.get()):p(new R("internal-error"))})}function DI(o,u,f,p,g,_,b){var S=$n(u+f);St(S,"key",o.c),b&&St(S,"cb",Date.now().toString());var L=p=="GET";if(L)for(var B in g)g.hasOwnProperty(B)&&St(S,B,g[B]);return new Me(function(be,Xe){PI(o,S.toString(),function(We){We?We.error?Xe(tm(We,_||{})):be(We):Xe(new R("network-request-failed"))},p,L?void 0:ET(OT(g)),o.a,o.v.get())})}function ds(o){if(o=o.email,typeof o!="string"||!eF.test(o))throw new R("invalid-email")}function xI(o){"email"in o&&ds(o)}function XF(o,u){return Fe(o,a2,{identifier:u,continueUri:Qf()?vc():"http://localhost"}).then(function(f){return f.signinMethods||[]})}function JF(o){return Fe(o,_2,{}).then(function(u){return u.authorizedDomains||[]})}function Qn(o){if(!o[qr])throw o.mfaPendingCredential?new R("multi-factor-auth-required",null,bt(o)):new R("internal-error")}function $g(o){if(o.phoneNumber||o.temporaryProof){if(!o.phoneNumber||!o.temporaryProof)throw new R("internal-error")}else{if(!o.sessionInfo)throw new R("missing-verification-id");if(!o.code)throw new R("missing-verification-code")}}Br.prototype.Ab=function(){return Fe(this,T2,{})},Br.prototype.Cb=function(o,u){return Fe(this,FI,{idToken:o,email:u})},Br.prototype.Db=function(o,u){return Fe(this,UI,{idToken:o,password:u})};var ZF={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};e=Br.prototype,e.Eb=function(o,u){var f={idToken:o},p=[];return oo(ZF,function(g,_){var b=u[_];b===null?p.push(g):_ in u&&(f[_]=b)}),p.length&&(f.deleteAttribute=p),Fe(this,FI,f)},e.wb=function(o,u){return o={requestType:"PASSWORD_RESET",email:o},en(o,u),Fe(this,y2,o)},e.xb=function(o,u){return o={requestType:"EMAIL_SIGNIN",email:o},en(o,u),Fe(this,v2,o)},e.vb=function(o,u){return o={requestType:"VERIFY_EMAIL",idToken:o},en(o,u),Fe(this,g2,o)},e.Fb=function(o,u,f){return o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:o,newEmail:u},en(o,f),Fe(this,m2,o)};function e2(o,u){return Fe(o,E2,u)}e.gb=function(o){return Fe(this,N2,o)};function t2(o,u){return Fe(o,I2,u).then(function(f){return f.phoneSessionInfo.sessionInfo})}function LI(o){if(!o.phoneVerificationInfo)throw new R("internal-error");if(!o.phoneVerificationInfo.sessionInfo)throw new R("missing-verification-id");if(!o.phoneVerificationInfo.code)throw new R("missing-verification-code")}function n2(o,u){return Fe(o,S2,u).then(function(f){return f.phoneResponseInfo.sessionInfo})}function r2(o,u,f){return Fe(o,c2,{idToken:u,deleteProvider:f})}function Qg(o){if(!o.requestUri||!o.sessionId&&!o.postBody&&!o.pendingToken)throw new R("internal-error")}function Yg(o,u){return u.oauthIdToken&&u.providerId&&u.providerId.indexOf("oidc.")==0&&!u.pendingToken&&(o.sessionId?u.nonce=o.sessionId:o.postBody&&(o=new rs(o.postBody),ig(o,"nonce")&&(u.nonce=o.get("nonce")))),u}function MI(o){var u=null;if(o.needConfirmation?(o.code="account-exists-with-different-credential",u=ih(o)):o.errorMessage=="FEDERATED_USER_ID_ALREADY_LINKED"?(o.code="credential-already-in-use",u=ih(o)):o.errorMessage=="EMAIL_EXISTS"?(o.code="email-already-in-use",u=ih(o)):o.errorMessage&&(u=VI(o.errorMessage)),u)throw u;Qn(o)}function Xg(o,u){return u.returnIdpCredential=!0,Fe(o,C2,u)}function Jg(o,u){return u.returnIdpCredential=!0,Fe(o,k2,u)}function Zg(o,u){return u.returnIdpCredential=!0,u.autoCreate=!1,Fe(o,A2,u)}function em(o){if(!o.oobCode)throw new R("invalid-action-code")}e.ob=function(o,u){return Fe(this,b2,{oobCode:o,newPassword:u})},e.Sa=function(o){return Fe(this,o2,{oobCode:o})},e.kb=function(o){return Fe(this,i2,{oobCode:o})};var i2={endpoint:"setAccountInfo",A:em,Z:"email",B:!0},o2={endpoint:"resetPassword",A:em,G:function(o){var u=o.requestType;if(!u||!o.email&&u!="EMAIL_SIGNIN"&&u!="VERIFY_AND_CHANGE_EMAIL")throw new R("internal-error")},B:!0},s2={endpoint:"signupNewUser",A:function(o){if(ds(o),!o.password)throw new R("weak-password")},G:Qn,V:!0,B:!0},a2={endpoint:"createAuthUri",B:!0},u2={endpoint:"deleteAccount",O:["idToken"]},c2={endpoint:"setAccountInfo",O:["idToken","deleteProvider"],A:function(o){if(!Array.isArray(o.deleteProvider))throw new R("internal-error")}},l2={endpoint:"emailLinkSignin",O:["email","oobCode"],A:ds,G:Qn,V:!0,B:!0},f2={endpoint:"emailLinkSignin",O:["idToken","email","oobCode"],A:ds,G:Qn,V:!0},h2={endpoint:"accounts/mfaEnrollment:finalize",O:["idToken","phoneVerificationInfo"],A:LI,G:Qn,B:!0,Na:!0},d2={endpoint:"accounts/mfaSignIn:finalize",O:["mfaPendingCredential","phoneVerificationInfo"],A:LI,G:Qn,B:!0,Na:!0},p2={endpoint:"getAccountInfo"},v2={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(o){if(o.requestType!="EMAIL_SIGNIN")throw new R("internal-error");ds(o)},Z:"email",B:!0},g2={endpoint:"getOobConfirmationCode",O:["idToken","requestType"],A:function(o){if(o.requestType!="VERIFY_EMAIL")throw new R("internal-error")},Z:"email",B:!0},m2={endpoint:"getOobConfirmationCode",O:["idToken","newEmail","requestType"],A:function(o){if(o.requestType!="VERIFY_AND_CHANGE_EMAIL")throw new R("internal-error")},Z:"email",B:!0},y2={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(o){if(o.requestType!="PASSWORD_RESET")throw new R("internal-error");ds(o)},Z:"email",B:!0},_2={mb:!0,endpoint:"getProjectConfig",Vb:"GET"},w2={mb:!0,endpoint:"getRecaptchaParam",Vb:"GET",G:function(o){if(!o.recaptchaSiteKey)throw new R("internal-error")}},b2={endpoint:"resetPassword",A:em,Z:"email",B:!0},E2={endpoint:"sendVerificationCode",O:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},FI={endpoint:"setAccountInfo",O:["idToken"],A:xI,V:!0},UI={endpoint:"setAccountInfo",O:["idToken"],A:function(o){if(xI(o),!o.password)throw new R("weak-password")},G:Qn,V:!0},T2={endpoint:"signupNewUser",G:Qn,V:!0,B:!0},I2={endpoint:"accounts/mfaEnrollment:start",O:["idToken","phoneEnrollmentInfo"],A:function(o){if(!o.phoneEnrollmentInfo)throw new R("internal-error");if(!o.phoneEnrollmentInfo.phoneNumber)throw new R("missing-phone-number");if(!o.phoneEnrollmentInfo.recaptchaToken)throw new R("missing-app-credential")},G:function(o){if(!o.phoneSessionInfo||!o.phoneSessionInfo.sessionInfo)throw new R("internal-error")},B:!0,Na:!0},S2={endpoint:"accounts/mfaSignIn:start",O:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(o){if(!o.phoneSignInInfo||!o.phoneSignInInfo.recaptchaToken)throw new R("missing-app-credential")},G:function(o){if(!o.phoneResponseInfo||!o.phoneResponseInfo.sessionInfo)throw new R("internal-error")},B:!0,Na:!0},C2={endpoint:"verifyAssertion",A:Qg,Za:Yg,G:MI,V:!0,B:!0},A2={endpoint:"verifyAssertion",A:Qg,Za:Yg,G:function(o){if(o.errorMessage&&o.errorMessage=="USER_NOT_FOUND")throw new R("user-not-found");if(o.errorMessage)throw VI(o.errorMessage);Qn(o)},V:!0,B:!0},k2={endpoint:"verifyAssertion",A:function(o){if(Qg(o),!o.idToken)throw new R("internal-error")},Za:Yg,G:MI,V:!0},R2={endpoint:"verifyCustomToken",A:function(o){if(!o.token)throw new R("invalid-custom-token")},G:Qn,V:!0,B:!0},jI={endpoint:"verifyPassword",A:function(o){if(ds(o),!o.password)throw new R("wrong-password")},G:Qn,V:!0,B:!0},N2={endpoint:"verifyPhoneNumber",A:$g,G:Qn,B:!0},P2={endpoint:"verifyPhoneNumber",A:function(o){if(!o.idToken)throw new R("internal-error");$g(o)},G:function(o){if(o.temporaryProof)throw o.code="credential-already-in-use",ih(o);Qn(o)}},O2={Ib:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:$g,G:Qn,B:!0},D2={endpoint:"accounts/mfaEnrollment:withdraw",O:["idToken","mfaEnrollmentId"],G:function(o){if(!!o[qr]^!!o.refreshToken)throw new R("internal-error")},B:!0,Na:!0};function Fe(o,u,f){if(!aF(f,u.O))return ht(new R("internal-error"));var p=!!u.Na,g=u.Vb||"POST",_;return pe(f).then(u.A).then(function(){return u.V&&(f.returnSecureToken=!0),u.B&&o.b&&typeof f.tenantId>"u"&&(f.tenantId=o.b),p?DI(o,o.i,u.endpoint,g,f,u.Ib,u.mb||!1):DI(o,o.h,u.endpoint,g,f,u.Ib,u.mb||!1)}).then(function(b){return _=b,u.Za?u.Za(f,_):_}).then(u.G).then(function(){if(!u.Z)return _;if(!(u.Z in _))throw new R("internal-error");return _[u.Z]})}function VI(o){return tm({error:{errors:[{message:o}],code:400,message:o}})}function tm(o,u){var f=(o.error&&o.error.errors&&o.error.errors[0]||{}).reason||"",p={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(f=p[f]?new R(p[f]):null)return f;f=o.error&&o.error.message||"",p={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},en(p,u||{}),u=(u=f.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<u.length?u[1]:void 0;for(var g in p)if(f.indexOf(g)===0)return new R(p[g],u);return!u&&o&&(u=mc(o)),new R("internal-error",u)}function x2(o){this.b=o,this.a=null,this.sb=L2(this)}function L2(o){return B2().then(function(){return new Me(function(u,f){dt("gapi.iframes.getContext")().open({where:document.body,url:o.b,messageHandlersFilter:dt("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(p){function g(){clearTimeout(_),u()}o.a=p,o.a.restyle({setHideOnLeave:!1});var _=setTimeout(function(){f(Error("Network Error"))},V2.get());p.ping(g).then(g,function(){f(Error("Network Error"))})})})})}function M2(o,u){return o.sb.then(function(){return new Me(function(f){o.a.send(u.type,u,f,dt("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}function F2(o,u){o.sb.then(function(){o.a.register("authEvent",u,dt("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}var U2=new si(Lf,"https://apis.google.com/js/api.js?onload=%{onload}"),j2=new co(3e4,6e4),V2=new co(5e3,15e3),yh=null;function B2(){return yh||(yh=new Me(function(o,u){function f(){xT(),dt("gapi.load")("gapi.iframes",{callback:o,ontimeout:function(){xT(),u(Error("Network Error"))},timeout:j2.get()})}if(dt("gapi.iframes.Iframe"))o();else if(dt("gapi.load"))f();else{var p="__iframefcb"+Math.floor(1e6*Math.random()).toString();l[p]=function(){dt("gapi.load")?f():u(Error("Network Error"))},p=Mv(U2,{onload:p}),pe(Kg(p)).o(function(){u(Error("Network Error"))})}}).o(function(o){throw yh=null,o}))}function BI(o,u,f,p){this.l=o,this.h=u,this.i=f,this.g=p,this.f=null,this.g?(o=$n(this.g.url),o=zf(o.c,o.a,o.g,"/emulator/auth/iframe")):o=zf("https",this.l,null,"/__/auth/iframe"),this.a=o,St(this.a,"apiKey",this.h),St(this.a,"appName",this.i),this.b=null,this.c=[]}BI.prototype.toString=function(){return this.f?St(this.a,"v",this.f):ai(this.a.b,"v"),this.b?St(this.a,"eid",this.b):ai(this.a.b,"eid"),this.c.length?St(this.a,"fw",this.c.join(",")):ai(this.a.b,"fw"),this.a.toString()};function nm(o,u,f,p,g,_){this.u=o,this.s=u,this.c=f,this.m=p,this.v=_,this.i=this.g=this.l=null,this.a=g,this.h=this.f=null}nm.prototype.zb=function(o){return this.h=o,this},nm.prototype.toString=function(){if(this.v){var o=$n(this.v.url);o=zf(o.c,o.a,o.g,"/emulator/auth/handler")}else o=zf("https",this.u,null,"/__/auth/handler");if(St(o,"apiKey",this.s),St(o,"appName",this.c),St(o,"authType",this.m),this.a.isOAuthProvider){var u=this.a;try{var f=ce.app(this.c).auth().la()}catch{f=null}u.pb=f,St(o,"providerId",this.a.providerId),f=this.a,u=OT(f.Jb);for(var p in u)u[p]=u[p].toString();p=f.Qc,u=bt(u);for(var g=0;g<p.length;g++){var _=p[g];_ in u&&delete u[_]}f.qb&&f.pb&&!u[f.qb]&&(u[f.qb]=f.pb),oi(u)||St(o,"customParameters",mc(u))}if(typeof this.a.Rb=="function"&&(f=this.a.Rb(),f.length&&St(o,"scopes",f.join(","))),this.l?St(o,"redirectUrl",this.l):ai(o.b,"redirectUrl"),this.g?St(o,"eventId",this.g):ai(o.b,"eventId"),this.i?St(o,"v",this.i):ai(o.b,"v"),this.b)for(var b in this.b)this.b.hasOwnProperty(b)&&!Er(o,b)&&St(o,b,this.b[b]);return this.h?St(o,"tid",this.h):ai(o.b,"tid"),this.f?St(o,"eid",this.f):ai(o.b,"eid"),b=rm(this.c),b.length&&St(o,"fw",b.join(",")),o.toString()};function rm(o){try{return ce.app(o).auth().Ga()}catch{return[]}}function qI(o,u,f,p,g,_){this.s=o,this.g=u,this.b=f,this.f=_,this.c=p||null,this.i=g||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function HI(o){var u=vc();return JF(o).then(function(f){e:{var p=$n(u),g=p.c;p=p.a;for(var _=0;_<f.length;_++){var b=f[_],S=p,L=g;if(b.indexOf("chrome-extension://")==0?S=$n(b).a==S&&L=="chrome-extension":L!="http"&&L!="https"?S=!1:ZM.test(b)?S=S==b:(b=b.split(".").join("\\."),S=new RegExp("^(.+\\."+b+"|"+b+")$","i").test(S)),S){f=!0;break e}}f=!1}if(!f)throw new xg(vc())})}function KI(o){return o.m||(o.m=$f().then(function(){if(!o.u){var u=o.c,f=o.i,p=rm(o.b),g=new BI(o.s,o.g,o.b,o.f);g.f=u,g.b=f,g.c=Z(p||[]),o.u=g.toString()}o.v=new x2(o.u),q2(o)})),o.m}e=qI.prototype,e.Pb=function(o,u,f){var p=new R("popup-closed-by-user"),g=new R("web-storage-unsupported"),_=this,b=!1;return this.ma().then(function(){H2(_).then(function(S){S||(o&&is(o),u(g),b=!0)})}).o(function(){}).then(function(){if(!b)return JM(o)}).then(function(){if(!b)return Ea(f).then(function(){u(p)})})},e.Yb=function(){var o=tn();return!gc(o)&&!DT(o)},e.Ub=function(){return!1},e.Nb=function(o,u,f,p,g,_,b,S){if(!o)return ht(new R("popup-blocked"));if(b&&!gc())return this.ma().o(function(B){is(o),g(B)}),p(),pe();this.a||(this.a=HI(WI(this)));var L=this;return this.a.then(function(){var B=L.ma().o(function(be){throw is(o),g(be),be});return p(),B}).then(function(){if(Og(f),!b){var B=Dc(L.s,L.g,L.b,u,f,null,_,L.c,void 0,L.i,S,L.f);ST(B,o)}}).o(function(B){throw B.code=="auth/network-request-failed"&&(L.a=null),B})};function WI(o){return o.l||(o.C=o.c?Ca(o.c,rm(o.b)):null,o.l=new Br(o.g,ft(o.i),o.C),o.f&&mh(o.l,o.f)),o.l}e.Ob=function(o,u,f,p){this.a||(this.a=HI(WI(this)));var g=this;return this.a.then(function(){Og(u);var _=Dc(g.s,g.g,g.b,o,u,vc(),f,g.c,void 0,g.i,p,g.f);ST(_)}).o(function(_){throw _.code=="auth/network-request-failed"&&(g.a=null),_})},e.ma=function(){var o=this;return KI(this).then(function(){return o.v.sb}).o(function(){throw o.a=null,new R("network-request-failed")})},e.ac=function(){return!0};function Dc(o,u,f,p,g,_,b,S,L,B,be,Xe){return o=new nm(o,u,f,p,g,Xe),o.l=_,o.g=b,o.i=S,o.b=bt(L||null),o.f=B,o.zb(be).toString()}function q2(o){if(!o.v)throw Error("IfcHandler must be initialized!");F2(o.v,function(u){var f={};if(u&&u.authEvent){var p=!1;for(u=pI(u.authEvent),f=0;f<o.h.length;f++)p=o.h[f](u)||p;return f={},f.status=p?"ACK":"ERROR",pe(f)}return f.status="ERROR",pe(f)})}function H2(o){var u={type:"webStorageSupport"};return KI(o).then(function(){return M2(o.v,u)}).then(function(f){if(f&&f.length&&typeof f[0].webStorageSupport<"u")return f[0].webStorageSupport;throw Error()})}e.Ea=function(o){this.h.push(o)},e.Ta=function(o){j(this.h,function(u){return u==o})};function GI(o){if(this.a=o||ce.INTERNAL.reactNative&&ce.INTERNAL.reactNative.AsyncStorage,!this.a)throw new R("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}e=GI.prototype,e.get=function(o){return pe(this.a.getItem(o)).then(function(u){return u&&ka(u)})},e.set=function(o,u){return pe(this.a.setItem(o,mc(u)))},e.U=function(o){return pe(this.a.removeItem(o))},e.ca=function(){},e.ia=function(){};function zI(o){this.b=o,this.a={},this.f=U(this.c,this)}var $I=[];function K2(){var o=jr()?self:null;if(J($I,function(f){f.b==o&&(u=f)}),!u){var u=new zI(o);$I.push(u)}return u}zI.prototype.c=function(o){var u=o.data.eventType,f=o.data.eventId,p=this.a[u];if(p&&0<p.length){o.ports[0].postMessage({status:"ack",eventId:f,eventType:u,response:null});var g=[];J(p,function(_){g.push(pe().then(function(){return _(o.origin,o.data.data)}))}),JE(g).then(function(_){var b=[];J(_,function(S){b.push({fulfilled:S.Qb,value:S.value,reason:S.reason?S.reason.message:void 0})}),J(b,function(S){for(var L in S)typeof S[L]>"u"&&delete S[L]}),o.ports[0].postMessage({status:"done",eventId:f,eventType:u,response:b})})}};function QI(o,u,f){oi(o.a)&&o.b.addEventListener("message",o.f),typeof o.a[u]>"u"&&(o.a[u]=[]),o.a[u].push(f)}function YI(o){this.a=o}YI.prototype.postMessage=function(o,u){this.a.postMessage(o,u)};function XI(o){this.c=o,this.b=!1,this.a=[]}function JI(o,u,f,p){var g,_=f||{},b,S,L,B=null;if(o.b)return ht(Error("connection_unavailable"));var be=p?800:50,Xe=typeof MessageChannel<"u"?new MessageChannel:null;return new Me(function(We,Ht){Xe?(g=Math.floor(Math.random()*Math.pow(10,20)).toString(),Xe.port1.start(),S=setTimeout(function(){Ht(Error("unsupported_event"))},be),b=function(Fi){Fi.data.eventId===g&&(Fi.data.status==="ack"?(clearTimeout(S),L=setTimeout(function(){Ht(Error("timeout"))},3e3)):Fi.data.status==="done"?(clearTimeout(L),typeof Fi.data.response<"u"?We(Fi.data.response):Ht(Error("unknown_error"))):(clearTimeout(S),clearTimeout(L),Ht(Error("invalid_response"))))},B={messageChannel:Xe,onMessage:b},o.a.push(B),Xe.port1.addEventListener("message",b),o.c.postMessage({eventType:u,eventId:g,data:_},[Xe.port2])):Ht(Error("connection_unavailable"))}).then(function(We){return im(o,B),We}).o(function(We){throw im(o,B),We})}function im(o,u){if(u){var f=u.messageChannel,p=u.onMessage;f&&(f.port1.removeEventListener("message",p),f.port1.close()),j(o.a,function(g){return g==u})}}XI.prototype.close=function(){for(;0<this.a.length;)im(this,this.a[0]);this.b=!0};function ZI(){if(!am())throw new R("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=l.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var o=this;jr()&&self?(this.v=K2(),QI(this.v,"keyChanged",function(u,f){return nS(o).then(function(p){return 0<p.length&&J(o.a,function(g){g(p)}),{keyProcessed:x(p,f.key)}})}),QI(this.v,"ping",function(){return pe(["keyChanged"])})):oF().then(function(u){(o.h=u)&&(o.g=new XI(new YI(u)),JI(o.g,"ping",null,!0).then(function(f){f[0].fulfilled&&x(f[0].value,"keyChanged")&&(o.s=!0)}).o(function(){}))})}var om;function W2(o){return new Me(function(u,f){var p=o.m.deleteDatabase("firebaseLocalStorageDb");p.onsuccess=function(){u()},p.onerror=function(g){f(Error(g.target.error))}})}function eS(o){return new Me(function(u,f){var p=o.m.open("firebaseLocalStorageDb",1);p.onerror=function(g){try{g.preventDefault()}catch{}f(Error(g.target.error))},p.onupgradeneeded=function(g){g=g.target.result;try{g.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(_){f(_)}},p.onsuccess=function(g){g=g.target.result,g.objectStoreNames.contains("firebaseLocalStorage")?u(g):W2(o).then(function(){return eS(o)}).then(function(_){u(_)}).o(function(_){f(_)})}})}function sm(o){return o.i||(o.i=eS(o)),o.i}function _h(o,u){function f(g,_){sm(o).then(u).then(g).o(function(b){if(3<++p)_(b);else return sm(o).then(function(S){return S.close(),o.i=void 0,f(g,_)}).o(function(S){_(S)})})}var p=0;return new Me(f)}function am(){try{return!!l.indexedDB}catch{return!1}}function xc(o){return o.objectStore("firebaseLocalStorage")}function Lc(o,u){return o.transaction(["firebaseLocalStorage"],u?"readwrite":"readonly")}function Oa(o){return new Me(function(u,f){o.onsuccess=function(p){p&&p.target?u(p.target.result):u()},o.onerror=function(p){f(p.target.error)}})}e=ZI.prototype,e.set=function(o,u){var f=this,p=!1;return _h(this,function(g){return g=xc(Lc(g,!0)),Oa(g.get(o))}).then(function(g){return _h(f,function(_){if(_=xc(Lc(_,!0)),g)return g.value=u,Oa(_.put(g));f.b++,p=!0;var b={};return b.fbase_key=o,b.value=u,Oa(_.add(b))})}).then(function(){return f.c[o]=u,tS(f,o)}).oa(function(){p&&f.b--})};function tS(o,u){return o.g&&o.h&&iF()===o.h?JI(o.g,"keyChanged",{key:u},o.s).then(function(){}).o(function(){}):pe()}e.get=function(o){return _h(this,function(u){return Oa(xc(Lc(u,!1)).get(o))}).then(function(u){return u&&u.value})},e.U=function(o){var u=this,f=!1;return _h(this,function(p){return f=!0,u.b++,Oa(xc(Lc(p,!0)).delete(o))}).then(function(){return delete u.c[o],tS(u,o)}).oa(function(){f&&u.b--})};function nS(o){return sm(o).then(function(u){var f=xc(Lc(u,!1));return f.getAll?Oa(f.getAll()):new Me(function(p,g){var _=[],b=f.openCursor();b.onsuccess=function(S){(S=S.target.result)?(_.push(S.value),S.continue()):p(_)},b.onerror=function(S){g(S.target.error)}})}).then(function(u){var f={},p=[];if(o.b==0){for(p=0;p<u.length;p++)f[u[p].fbase_key]=u[p].value;p=CT(o.c,f),o.c=f}return p})}e.ca=function(o){this.a.length==0&&G2(this),this.a.push(o)},e.ia=function(o){j(this.a,function(u){return u==o}),this.a.length==0&&rS(this)};function G2(o){function u(){o.f=setTimeout(function(){o.l=nS(o).then(function(f){0<f.length&&J(o.a,function(p){p(f)})}).then(function(){u()}).o(function(f){f.message!="STOP_EVENT"&&u()})},800)}rS(o),u()}function rS(o){o.l&&o.l.cancel("STOP_EVENT"),o.f&&(clearTimeout(o.f),o.f=null)}function iS(o){var u=this,f=null;this.a=[],this.type="indexedDB",this.c=o,this.b=pe().then(function(){if(am()){var p=ss(),g="__sak"+p;return om||(om=new ZI),f=om,f.set(g,p).then(function(){return f.get(g)}).then(function(_){if(_!==p)throw Error("indexedDB not supported!");return f.U(g)}).then(function(){return f}).o(function(){return u.c})}return u.c}).then(function(p){return u.type=p.type,p.ca(function(g){J(u.a,function(_){_(g)})}),p})}e=iS.prototype,e.get=function(o){return this.b.then(function(u){return u.get(o)})},e.set=function(o,u){return this.b.then(function(f){return f.set(o,u)})},e.U=function(o){return this.b.then(function(u){return u.U(o)})},e.ca=function(o){this.a.push(o)},e.ia=function(o){j(this.a,function(u){return u==o})};function Mc(){this.a={},this.type="inMemory"}e=Mc.prototype,e.get=function(o){return pe(this.a[o])},e.set=function(o,u){return this.a[o]=u,pe()},e.U=function(o){return delete this.a[o],pe()},e.ca=function(){},e.ia=function(){};function wh(){if(!z2())throw ui()=="Node"?new R("internal-error","The LocalStorage compatibility library was not found."):new R("web-storage-unsupported");this.a=oS()||ce.INTERNAL.node.localStorage,this.type="localStorage"}function oS(){try{var o=l.localStorage,u=ss();return o&&(o.setItem(u,"1"),o.removeItem(u)),o}catch{return null}}function z2(){var o=ui()=="Node";if(o=oS()||o&&ce.INTERNAL.node&&ce.INTERNAL.node.localStorage,!o)return!1;try{return o.setItem("__sak","1"),o.removeItem("__sak"),!0}catch{return!1}}e=wh.prototype,e.get=function(o){var u=this;return pe().then(function(){var f=u.a.getItem(o);return ka(f)})},e.set=function(o,u){var f=this;return pe().then(function(){var p=mc(u);p===null?f.U(o):f.a.setItem(o,p)})},e.U=function(o){var u=this;return pe().then(function(){u.a.removeItem(o)})},e.ca=function(o){l.window&&br(l.window,"storage",o)},e.ia=function(o){l.window&&or(l.window,"storage",o)};function um(){this.type="nullStorage"}e=um.prototype,e.get=function(){return pe(null)},e.set=function(){return pe()},e.U=function(){return pe()},e.ca=function(){},e.ia=function(){};function cm(){if(!$2())throw ui()=="Node"?new R("internal-error","The SessionStorage compatibility library was not found."):new R("web-storage-unsupported");this.a=sS()||ce.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function sS(){try{var o=l.sessionStorage,u=ss();return o&&(o.setItem(u,"1"),o.removeItem(u)),o}catch{return null}}function $2(){var o=ui()=="Node";if(o=sS()||o&&ce.INTERNAL.node&&ce.INTERNAL.node.sessionStorage,!o)return!1;try{return o.setItem("__sak","1"),o.removeItem("__sak"),!0}catch{return!1}}e=cm.prototype,e.get=function(o){var u=this;return pe().then(function(){var f=u.a.getItem(o);return ka(f)})},e.set=function(o,u){var f=this;return pe().then(function(){var p=mc(u);p===null?f.U(o):f.a.setItem(o,p)})},e.U=function(o){var u=this;return pe().then(function(){u.a.removeItem(o)})},e.ca=function(){},e.ia=function(){};function Q2(){var o={};o.Browser=Y2,o.Node=X2,o.ReactNative=J2,o.Worker=Z2,this.a=o[ui()]}var lm,Y2={F:wh,cb:cm},X2={F:wh,cb:cm},J2={F:GI,cb:um},Z2={F:wh,cb:um},Da={rd:"local",NONE:"none",td:"session"};function eU(o){var u=new R("invalid-persistence-type"),f=new R("unsupported-persistence-type");e:{for(p in Da)if(Da[p]==o){var p=!0;break e}p=!1}if(!p||typeof o!="string")throw u;switch(ui()){case"ReactNative":if(o==="session")throw f;break;case"Node":if(o!=="none")throw f;break;case"Worker":if(o==="session"||!am()&&o!=="none")throw f;break;default:if(!lg()&&o!=="none")throw f}}function aS(){var o=!!(!DT(tn())&&ug()),u=gc(),f=lg();this.m=o,this.h=u,this.l=f,this.a={},lm||(lm=new Q2),o=lm;try{this.g=!sg()&&LT()||!l.indexedDB?new o.a.F:new iS(jr()?new Mc:new o.a.F)}catch{this.g=new Mc,this.h=!0}try{this.i=new o.a.cb}catch{this.i=new Mc}this.v=new Mc,this.f=U(this.Zb,this),this.b={}}var fm;function Fc(){return fm||(fm=new aS),fm}function ps(o,u){switch(u){case"session":return o.i;case"none":return o.v;default:return o.g}}function xa(o,u){return"firebase:"+o.name+(u?":"+u:"")}function tU(o,u,f){var p=xa(u,f),g=ps(o,u.F);return o.get(u,f).then(function(_){var b=null;try{b=ka(l.localStorage.getItem(p))}catch{}if(b&&!_)return l.localStorage.removeItem(p),o.set(u,b,f);b&&_&&g.type!="localStorage"&&l.localStorage.removeItem(p)})}e=aS.prototype,e.get=function(o,u){return ps(this,o.F).get(xa(o,u))};function La(o,u,f){return f=xa(u,f),u.F=="local"&&(o.b[f]=null),ps(o,u.F).U(f)}e.set=function(o,u,f){var p=xa(o,f),g=this,_=ps(this,o.F);return _.set(p,u).then(function(){return _.get(p)}).then(function(b){o.F=="local"&&(g.b[p]=b)})},e.addListener=function(o,u,f){o=xa(o,u),this.l&&(this.b[o]=l.localStorage.getItem(o)),oi(this.a)&&(ps(this,"local").ca(this.f),this.h||(sg()||!LT())&&l.indexedDB||!this.l||nU(this)),this.a[o]||(this.a[o]=[]),this.a[o].push(f)},e.removeListener=function(o,u,f){o=xa(o,u),this.a[o]&&(j(this.a[o],function(p){return p==f}),this.a[o].length==0&&delete this.a[o]),oi(this.a)&&(ps(this,"local").ia(this.f),hm(this))};function nU(o){hm(o),o.c=setInterval(function(){for(var u in o.a){var f=l.localStorage.getItem(u),p=o.b[u];f!=p&&(o.b[u]=f,f=new ts({type:"storage",key:u,target:window,oldValue:p,newValue:f,a:!0}),o.Zb(f))}},1e3)}function hm(o){o.c&&(clearInterval(o.c),o.c=null)}e.Zb=function(o){if(o&&o.g){var u=o.a.key;if(u==null)for(var f in this.a){var p=this.b[f];typeof p>"u"&&(p=null);var g=l.localStorage.getItem(f);g!==p&&(this.b[f]=g,this.nb(f))}else if(u.indexOf("firebase:")==0&&this.a[u]){if(typeof o.a.a<"u"?ps(this,"local").ia(this.f):hm(this),this.m){if(f=l.localStorage.getItem(u),p=o.a.newValue,p!==f)p!==null?l.localStorage.setItem(u,p):l.localStorage.removeItem(u);else if(this.b[u]===p&&typeof o.a.a>"u")return}var _=this;f=function(){(typeof o.a.a<"u"||_.b[u]!==l.localStorage.getItem(u))&&(_.b[u]=l.localStorage.getItem(u),_.nb(u))},Ur&&so&&so==10&&l.localStorage.getItem(u)!==o.a.newValue&&o.a.newValue!==o.a.oldValue?setTimeout(f,10):f()}}else J(o,U(this.nb,this))},e.nb=function(o){this.a[o]&&J(this.a[o],function(u){u()})};function rU(o){this.a=o,this.b=Fc()}var dm={name:"authEvent",F:"local"};function iU(o){return o.b.get(dm,o.a).then(function(u){return pI(u)})}function oU(){this.a=Fc()}function sU(){this.b=-1}function bh(o,u){this.b=uS,this.f=l.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=o,this.h=u,this.l=l.Int32Array?new Int32Array(64):Array(64),Eh===void 0&&(l.Int32Array?Eh=new Int32Array(fS):Eh=fS),this.reset()}var Eh;F(bh,sU);for(var uS=64,aU=uS-1,cS=[],pm=0;pm<aU;pm++)cS[pm]=0;var lS=Q(128,cS);bh.prototype.reset=function(){this.g=this.c=0,this.a=l.Int32Array?new Int32Array(this.h):Z(this.h)};function vm(o){for(var u=o.f,f=o.l,p=0,g=0;g<u.length;)f[p++]=u[g]<<24|u[g+1]<<16|u[g+2]<<8|u[g+3],g=4*p;for(u=16;64>u;u++){g=f[u-15]|0,p=f[u-2]|0;var _=(f[u-16]|0)+((g>>>7|g<<25)^(g>>>18|g<<14)^g>>>3)|0,b=(f[u-7]|0)+((p>>>17|p<<15)^(p>>>19|p<<13)^p>>>10)|0;f[u]=_+b|0}p=o.a[0]|0,g=o.a[1]|0;var S=o.a[2]|0,L=o.a[3]|0,B=o.a[4]|0,be=o.a[5]|0,Xe=o.a[6]|0;for(_=o.a[7]|0,u=0;64>u;u++){var We=((p>>>2|p<<30)^(p>>>13|p<<19)^(p>>>22|p<<10))+(p&g^p&S^g&S)|0;b=B&be^~B&Xe,_=_+((B>>>6|B<<26)^(B>>>11|B<<21)^(B>>>25|B<<7))|0,b=b+(Eh[u]|0)|0,b=_+(b+(f[u]|0)|0)|0,_=Xe,Xe=be,be=B,B=L+b|0,L=S,S=g,g=p,p=b+We|0}o.a[0]=o.a[0]+p|0,o.a[1]=o.a[1]+g|0,o.a[2]=o.a[2]+S|0,o.a[3]=o.a[3]+L|0,o.a[4]=o.a[4]+B|0,o.a[5]=o.a[5]+be|0,o.a[6]=o.a[6]+Xe|0,o.a[7]=o.a[7]+_|0}function gm(o,u,f){f===void 0&&(f=u.length);var p=0,g=o.c;if(typeof u=="string")for(;p<f;)o.f[g++]=u.charCodeAt(p++),g==o.b&&(vm(o),g=0);else if(w(u))for(;p<f;){var _=u[p++];if(!(typeof _=="number"&&0<=_&&255>=_&&_==(_|0)))throw Error("message must be a byte array");o.f[g++]=_,g==o.b&&(vm(o),g=0)}else throw Error("message must be string or array");o.c=g,o.g+=f}var fS=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function hS(){bh.call(this,8,uU)}F(hS,bh);var uU=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function dS(o,u,f,p,g,_){this.v=o,this.i=u,this.l=f,this.m=p||null,this.u=g||null,this.s=_,this.h=u+":"+f,this.C=new oU,this.g=new rU(this.h),this.f=null,this.b=[],this.a=this.c=null}function Th(o){return new R("invalid-cordova-configuration",o)}e=dS.prototype,e.ma=function(){return this.Ia?this.Ia:this.Ia=tF().then(function(){if(typeof dt("universalLinks.subscribe",l)!="function")throw Th("cordova-universal-links-plugin-fix is not installed");if(typeof dt("BuildInfo.packageName",l)>"u")throw Th("cordova-plugin-buildinfo is not installed");if(typeof dt("cordova.plugins.browsertab.openUrl",l)!="function")throw Th("cordova-plugin-browsertab is not installed");if(typeof dt("cordova.InAppBrowser.open",l)!="function")throw Th("cordova-plugin-inappbrowser is not installed")},function(){throw new R("cordova-not-ready")})};function cU(){for(var o=20,u=[];0<o;)u.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),o--;return u.join("")}function lU(o){var u=new hS;gm(u,o),o=[];var f=8*u.g;56>u.c?gm(u,lS,56-u.c):gm(u,lS,u.b-(u.c-56));for(var p=63;56<=p;p--)u.f[p]=f&255,f/=256;for(vm(u),p=f=0;p<u.i;p++)for(var g=24;0<=g;g-=8)o[f++]=u.a[p]>>g&255;return bF(o)}e.Pb=function(o,u){return u(new R("operation-not-supported-in-this-environment")),pe()},e.Nb=function(){return ht(new R("operation-not-supported-in-this-environment"))},e.ac=function(){return!1},e.Yb=function(){return!0},e.Ub=function(){return!0},e.Ob=function(o,u,f,p){if(this.c)return ht(new R("redirect-operation-pending"));var g=this,_=l.document,b=null,S=null,L=null,B=null;return this.c=pe().then(function(){return Og(u),vS(g)}).then(function(){return fU(g,o,u,f,p)}).then(function(){return new Me(function(be,Xe){S=function(){var We=dt("cordova.plugins.browsertab.close",l);return be(),typeof We=="function"&&We(),g.a&&typeof g.a.close=="function"&&(g.a.close(),g.a=null),!1},g.Ea(S),L=function(){b||(b=Ea(2e3).then(function(){Xe(new R("redirect-cancelled-by-user"))}))},B=function(){fg()&&L()},_.addEventListener("resume",L,!1),tn().toLowerCase().match(/android/)||_.addEventListener("visibilitychange",B,!1)}).o(function(be){return mm(g).then(function(){throw be})})}).oa(function(){L&&_.removeEventListener("resume",L,!1),B&&_.removeEventListener("visibilitychange",B,!1),b&&b.cancel(),S&&g.Ta(S),g.c=null})};function fU(o,u,f,p,g){var _=cU(),b=new Vr(u,p,null,_,new R("no-auth-event"),null,g),S=dt("BuildInfo.packageName",l);if(typeof S!="string")throw new R("invalid-cordova-configuration");var L=dt("BuildInfo.displayName",l),B={};if(tn().toLowerCase().match(/iphone|ipad|ipod/))B.ibi=S;else if(tn().toLowerCase().match(/android/))B.apn=S;else return ht(new R("operation-not-supported-in-this-environment"));L&&(B.appDisplayName=L),_=lU(_),B.sessionId=_;var be=Dc(o.v,o.i,o.l,u,f,null,p,o.m,B,o.u,g,o.s);return o.ma().then(function(){var Xe=o.h;return o.C.a.set(dm,b.w(),Xe)}).then(function(){var Xe=dt("cordova.plugins.browsertab.isAvailable",l);if(typeof Xe!="function")throw new R("invalid-cordova-configuration");var We=null;Xe(function(Ht){if(Ht){if(We=dt("cordova.plugins.browsertab.openUrl",l),typeof We!="function")throw new R("invalid-cordova-configuration");We(be)}else{if(We=dt("cordova.InAppBrowser.open",l),typeof We!="function")throw new R("invalid-cordova-configuration");Ht=tn(),o.a=We(be,Ht.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||Ht.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}function pS(o,u){for(var f=0;f<o.b.length;f++)try{o.b[f](u)}catch{}}function vS(o){return o.f||(o.f=o.ma().then(function(){return new Me(function(u){function f(p){return u(p),o.Ta(f),!1}o.Ea(f),hU(o)})})),o.f}function mm(o){var u=null;return iU(o.g).then(function(f){return u=f,f=o.g,La(f.b,dm,f.a)}).then(function(){return u})}function hU(o){function u(b){p=!0,g&&g.cancel(),mm(o).then(function(S){var L=f;if(S&&b&&b.url){var B=null;L=sI(b.url),L.indexOf("/__/auth/callback")!=-1&&(B=$n(L),B=ka(Er(B,"firebaseError")||null),B=(B=typeof B=="object"?tt(B):null)?new Vr(S.c,S.b,null,null,B,null,S.T()):new Vr(S.c,S.b,L,S.f,null,null,S.T())),L=B||f}pS(o,L)})}var f=new Vr("unknown",null,null,null,new R("no-auth-event")),p=!1,g=Ea(500).then(function(){return mm(o).then(function(){p||pS(o,f)})}),_=l.handleOpenURL;l.handleOpenURL=function(b){if(b.toLowerCase().indexOf(dt("BuildInfo.packageName",l).toLowerCase()+"://")==0&&u({url:b}),typeof _=="function")try{_(b)}catch(S){console.error(S)}},Dg||(Dg=new RF),NF(u)}e.Ea=function(o){this.b.push(o),vS(this).o(function(u){u.code==="auth/invalid-cordova-configuration"&&(u=new Vr("unknown",null,null,null,new R("no-auth-event")),o(u))})},e.Ta=function(o){j(this.b,function(u){return u==o})};function dU(o){this.a=o,this.b=Fc()}var ym={name:"pendingRedirect",F:"session"};function pU(o){return o.b.set(ym,"pending",o.a)}function _m(o){return La(o.b,ym,o.a)}function vU(o){return o.b.get(ym,o.a).then(function(u){return u=="pending"})}function Ih(o,u,f,p){this.i={},this.u=0,this.D=o,this.v=u,this.m=f,this.J=p,this.h=[],this.f=!1,this.l=U(this.s,this),this.b=new Ch,this.C=new SS,this.g=new dU(ES(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=gS(this.D,this.v,this.m,ot,this.J)}function gS(o,u,f,p,g){var _=ce.SDK_VERSION||null;return ag()?new dS(o,u,f,_,p,g):new qI(o,u,f,_,p,g)}Ih.prototype.reset=function(){this.f=!1,this.a.Ta(this.l),this.a=gS(this.D,this.v,this.m,null,this.J),this.i={}};function mS(o){o.f||(o.f=!0,o.a.Ea(o.l));var u=o.a;return o.a.ma().o(function(f){throw o.a==u&&o.reset(),f})}function yS(o){o.a.Yb()&&mS(o).o(function(u){var f=new Vr("unknown",null,null,null,new R("operation-not-supported-in-this-environment"));bm(u)&&o.s(f)}),o.a.Ub()||TS(o.b)}function Sh(o,u){x(o.h,u)||o.h.push(u),o.f||vU(o.g).then(function(f){f?_m(o.g).then(function(){mS(o).o(function(p){var g=new Vr("unknown",null,null,null,new R("operation-not-supported-in-this-environment"));bm(p)&&o.s(g)})}):yS(o)}).o(function(){yS(o)})}function wm(o,u){j(o.h,function(f){return f==u})}Ih.prototype.s=function(o){if(!o)throw new R("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),o&&o.getUid()&&this.i.hasOwnProperty(o.getUid()))return!1;for(var u=!1,f=0;f<this.h.length;f++){var p=this.h[f];if(p.Gb(o.c,o.b)){(u=this.c[o.c])&&(u.h(o,p),o&&(o.f||o.b)&&(this.i[o.getUid()]=!0,this.u=Date.now())),u=!0;break}}return TS(this.b),u};var gU=new co(2e3,1e4),mU=new co(3e4,6e4);Ih.prototype.ra=function(){return this.b.ra()};function _S(o,u,f,p,g,_,b){return o.a.Nb(u,f,p,function(){o.f||(o.f=!0,o.a.Ea(o.l))},function(){o.reset()},g,_,b)}function bm(o){return!!(o&&o.code=="auth/cordova-not-ready")}function wS(o,u,f,p,g){var _;return pU(o.g).then(function(){return o.a.Ob(u,f,p,g).o(function(b){if(bm(b))throw new R("operation-not-supported-in-this-environment");return _=b,_m(o.g).then(function(){throw _})}).then(function(){return o.a.ac()?new Me(function(){}):_m(o.g).then(function(){return o.ra()}).then(function(){}).o(function(){})})})}function bS(o,u,f,p,g){return o.a.Pb(p,function(_){u.na(f,null,_,g)},gU.get())}var Em={};function ES(o,u,f){return o=o+":"+u,f&&(o=o+":"+f.url),o}function Tm(o,u,f,p){var g=ES(u,f,p);return Em[g]||(Em[g]=new Ih(o,u,f,p)),Em[g]}function Ch(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}Ch.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Ch.prototype.h=function(o,u){if(o){this.reset(),this.g=!0;var f=o.c,p=o.b,g=o.a&&o.a.code=="auth/web-storage-unsupported",_=o.a&&o.a.code=="auth/operation-not-supported-in-this-environment";this.i=!(!g&&!_),f!="unknown"||g||_?o.a?(vs(this,!0,null,o.a),pe()):u.Fa(f,p)?yU(this,o,u):ht(new R("invalid-auth-event")):(vs(this,!1,null,null),pe())}else ht(new R("invalid-auth-event"))};function TS(o){o.g||(o.g=!0,vs(o,!1,null,null))}function Ah(o){o.g&&!o.i&&vs(o,!1,null,null)}function yU(o,u,f){f=f.Fa(u.c,u.b);var p=u.g,g=u.f,_=u.i,b=u.T(),S=!!u.c.match(/Redirect$/);f(p,g,b,_).then(function(L){vs(o,S,L,null)}).o(function(L){vs(o,S,null,L)})}function _U(o,u){if(o.b=function(){return ht(u)},o.c.length)for(var f=0;f<o.c.length;f++)o.c[f](u)}function IS(o,u){if(o.b=function(){return pe(u)},o.f.length)for(var f=0;f<o.f.length;f++)o.f[f](u)}function vs(o,u,f,p){u?p?_U(o,p):IS(o,f):IS(o,{user:null}),o.f=[],o.c=[]}Ch.prototype.ra=function(){var o=this;return new Me(function(u,f){o.b?o.b().then(u,f):(o.f.push(u),o.c.push(f),wU(o))})};function wU(o){var u=new R("timeout");o.a&&o.a.cancel(),o.a=Ea(mU.get()).then(function(){o.b||(o.g=!0,vs(o,!0,null,u))})}function SS(){}SS.prototype.h=function(o,u){if(o){var f=o.c,p=o.b;o.a?(u.na(o.c,null,o.a,o.b),pe()):u.Fa(f,p)?bU(o,u):ht(new R("invalid-auth-event"))}else ht(new R("invalid-auth-event"))};function bU(o,u){var f=o.b,p=o.c;u.Fa(p,f)(o.g,o.f,o.T(),o.i).then(function(g){u.na(p,g,null,f)}).o(function(g){u.na(p,null,g,f)})}function CS(){this.jb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.jb},set:function(o){this.jb=o},enumerable:!1})}function Im(o,u){this.a=u,ae(this,"verificationId",o)}Im.prototype.confirm=function(o){return o=dI(this.verificationId,o),this.a(o)};function Sm(o,u,f,p){return new Li(o).gb(u,f).then(function(g){return new Im(g,p)})}function EU(o){var u=JT(o);if(!(u&&u.exp&&u.auth_time&&u.iat))throw new R("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Pn(this,{token:o,expirationTime:yc(1e3*u.exp),authTime:yc(1e3*u.auth_time),issuedAtTime:yc(1e3*u.iat),signInProvider:u.firebase&&u.firebase.sign_in_provider?u.firebase.sign_in_provider:null,signInSecondFactor:u.firebase&&u.firebase.sign_in_second_factor?u.firebase.sign_in_second_factor:null,claims:u})}function Cm(o,u,f){var p=u&&u[kS];if(!p)throw new R("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=o,this.f=bt(u),this.g=f,this.c=new nh(null,p),this.b=[];var g=this;J(u[AS]||[],function(_){(_=mg(_))&&g.b.push(_)}),ae(this,"auth",this.a),ae(this,"session",this.c),ae(this,"hints",this.b)}var AS="mfaInfo",kS="mfaPendingCredential";Cm.prototype.Rc=function(o){var u=this;return o.tb(this.a.a,this.c).then(function(f){var p=bt(u.f);return delete p[AS],delete p[kS],en(p,f),u.g(p)})};function Am(o,u,f,p){R.call(this,"multi-factor-auth-required",p,u),this.b=new Cm(o,u,f),ae(this,"resolver",this.b)}F(Am,R);function RS(o,u,f){if(o&&T(o.serverResponse)&&o.code==="auth/multi-factor-auth-required")try{return new Am(u,o.serverResponse,f,o.message)}catch{}return null}function NS(){}NS.prototype.tb=function(o,u,f){return u.type==Ec?TU(this,o,u,f):IU(this,o,u)};function TU(o,u,f,p){return f.Ha().then(function(g){return g={idToken:g},typeof p<"u"&&(g.displayName=p),en(g,{phoneVerificationInfo:Tc(o.a)}),Fe(u,h2,g)})}function IU(o,u,f){return f.Ha().then(function(p){return p={mfaPendingCredential:p},en(p,{phoneVerificationInfo:Tc(o.a)}),Fe(u,d2,p)})}function km(o){ae(this,"factorId",o.fa),this.a=o}F(km,NS);function PS(o){if(km.call(this,o),this.a.fa!=Li.PROVIDER_ID)throw new R("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}F(PS,km);function Ma(o,u){zn.call(this,o);for(var f in u)this[f]=u[f]}F(Ma,zn);function Rm(o,u){this.a=o,this.b=[],this.c=U(this.yc,this),br(this.a,"userReloaded",this.c);var f=[];u&&u.multiFactor&&u.multiFactor.enrolledFactors&&J(u.multiFactor.enrolledFactors,function(p){var g=null,_={};if(p){p.uid&&(_[_g]=p.uid),p.displayName&&(_[FT]=p.displayName),p.enrollmentTime&&(_[yg]=new Date(p.enrollmentTime).toISOString()),p.phoneNumber&&(_[wg]=p.phoneNumber);try{g=new _c(_)}catch{}p=g}else p=null;p&&f.push(p)}),kh(this,f)}function SU(o){var u=[];return J(o.mfaInfo||[],function(f){(f=mg(f))&&u.push(f)}),u}e=Rm.prototype,e.yc=function(o){kh(this,SU(o.hd))};function kh(o,u){o.b=u,ae(o,"enrolledFactors",u)}e.Sb=function(){return this.a.I().then(function(o){return new nh(o,null)})},e.fc=function(o,u){var f=this,p=this.a.a;return this.Sb().then(function(g){return o.tb(p,g,u)}).then(function(g){return fi(f.a,g),f.a.reload()})},e.bd=function(o){var u=this,f=typeof o=="string"?o:o.uid,p=this.a.a;return this.a.I().then(function(g){return Fe(p,D2,{idToken:g,mfaEnrollmentId:f})}).then(function(g){var _=at(u.b,function(b){return b.uid!=f});return kh(u,_),fi(u.a,g),u.a.reload().o(function(b){if(b.code!="auth/user-token-expired")throw b})})},e.w=function(){return{multiFactor:{enrolledFactors:Ie(this.b,function(o){return o.w()})}}};function Nm(o,u,f){if(this.h=o,this.i=u,this.g=f,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}Nm.prototype.start=function(){this.a=this.c,Pm(this,!0)};function CU(o,u){return u?(o.a=o.c,o.g()):(u=o.a,o.a*=2,o.a>o.f&&(o.a=o.f),u)}function Pm(o,u){o.stop(),o.b=Ea(CU(o,u)).then(function(){return rF()}).then(function(){return o.h()}).then(function(){Pm(o,!0)}).o(function(f){o.i(f)&&Pm(o,!1)})}Nm.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)};function Om(o){this.f=o,this.b=this.a=null,this.c=Date.now()}Om.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}};function OS(o,u){typeof u>"u"&&(o.b?(u=o.b,u=u.a-u.g):u=0),o.c=Date.now()+1e3*u}function DS(o,u){o.b=eh(u[qr]||""),o.a=u.refreshToken,u=u.expiresIn,OS(o,typeof u<"u"?Number(u):void 0)}function AU(o,u){o.b=u.b,o.a=u.a,o.c=u.c}function kU(o,u){return YF(o.f,u).then(function(f){return o.b=eh(f.access_token),o.a=f.refresh_token,OS(o,f.expires_in),{accessToken:o.b.toString(),refreshToken:o.a}}).o(function(f){throw f.code=="auth/user-token-expired"&&(o.a=null),f})}Om.prototype.getToken=function(o){return o=!!o,this.b&&!this.a?ht(new R("user-token-expired")):o||!this.b||Date.now()>this.c-3e4?this.a?kU(this,{grant_type:"refresh_token",refresh_token:this.a}):pe(null):pe({accessToken:this.b.toString(),refreshToken:this.a})};function Rh(o,u){this.a=o||null,this.b=u||null,Pn(this,{lastSignInTime:yc(u||null),creationTime:yc(o||null)})}function RU(o){return new Rh(o.a,o.b)}Rh.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}};function NU(o,u,f,p,g,_){Pn(this,{uid:o,displayName:p||null,photoURL:g||null,email:f||null,phoneNumber:_||null,providerId:u})}function ar(o,u,f){this.N=[],this.l=o.apiKey,this.m=o.appName,this.s=o.authDomain||null;var p=ce.SDK_VERSION?Ca(ce.SDK_VERSION):null;this.a=new Br(this.l,ft(ot),p),(this.u=o.emulatorConfig||null)&&mh(this.a,this.u),this.h=new Om(this.a),jm(this,u[qr]),DS(this.h,u),ae(this,"refreshToken",this.h.a),LS(this,f||{}),Nn.call(this),this.P=!1,this.s&&os()&&(this.b=Tm(this.s,this.l,this.m,this.u)),this.W=[],this.i=null,this.D=PU(this),this.ba=U(this.ib,this);var g=this;this.za=null,this.Pa=function(_){g.xa(_.h)},this.qa=null,this.Ba=function(_){Dm(g,_.c)},this.$=null,this.aa=[],this.Oa=function(_){Uc(g,_.f)},this.ja=null,this.S=new Rm(this,f),ae(this,"multiFactor",this.S)}F(ar,Nn),ar.prototype.xa=function(o){this.za=o,RI(this.a,o)};function Dm(o,u){o.u=u,mh(o.a,u),o.b&&(u=o.b,o.b=Tm(o.s,o.l,o.m,o.u),o.P&&(wm(u,o),Sh(o.b,o)))}ar.prototype.la=function(){return this.za};function xm(o,u){o.qa&&or(o.qa,"languageCodeChanged",o.Pa),(o.qa=u)&&br(u,"languageCodeChanged",o.Pa)}function Lm(o,u){o.$&&or(o.$,"emulatorConfigChanged",o.Ba),(o.$=u)&&br(u,"emulatorConfigChanged",o.Ba)}function Uc(o,u){o.aa=u,NI(o.a,ce.SDK_VERSION?Ca(ce.SDK_VERSION,o.aa):null)}ar.prototype.Ga=function(){return Z(this.aa)};function Mm(o,u){o.ja&&or(o.ja,"frameworkChanged",o.Oa),(o.ja=u)&&br(u,"frameworkChanged",o.Oa)}ar.prototype.ib=function(){this.D.b&&(this.D.stop(),this.D.start())};function Fm(o){try{return ce.app(o.m).auth()}catch{throw new R("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+o.m+"'!")}}function PU(o){return new Nm(function(){return o.I(!0)},function(u){return!!(u&&u.code=="auth/network-request-failed")},function(){var u=o.h.c-Date.now()-3e5;return 0<u?u:0})}function xS(o){o.J||o.D.b||(o.D.start(),or(o,"tokenChanged",o.ba),br(o,"tokenChanged",o.ba))}function Um(o){or(o,"tokenChanged",o.ba),o.D.stop()}function jm(o,u){o.Aa=u,ae(o,"_lat",u)}function OU(o,u){j(o.W,function(f){return f==u})}function gs(o){for(var u=[],f=0;f<o.W.length;f++)u.push(o.W[f](o));return JE(u).then(function(){return o})}function jc(o){o.b&&!o.P&&(o.P=!0,Sh(o.b,o))}function LS(o,u){Pn(o,{uid:u.uid,displayName:u.displayName||null,photoURL:u.photoURL||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,isAnonymous:u.isAnonymous||!1,tenantId:u.tenantId||null,metadata:new Rh(u.createdAt,u.lastLoginAt),providerData:[]}),o.a.b=o.tenantId}ae(ar.prototype,"providerId","firebase");function MS(){}function Vm(o){return pe().then(function(){if(o.J)throw new R("app-deleted")})}function Bm(o){return Ie(o.providerData,function(u){return u.providerId})}function qm(o,u){u&&(FS(o,u.providerId),o.providerData.push(u))}function FS(o,u){j(o.providerData,function(f){return f.providerId==u})}function ho(o,u,f){(u!="uid"||f)&&o.hasOwnProperty(u)&&ae(o,u,f)}function Nh(o,u){o!=u&&(Pn(o,{uid:u.uid,displayName:u.displayName,photoURL:u.photoURL,email:u.email,emailVerified:u.emailVerified,phoneNumber:u.phoneNumber,isAnonymous:u.isAnonymous,tenantId:u.tenantId,providerData:[]}),u.metadata?ae(o,"metadata",RU(u.metadata)):ae(o,"metadata",new Rh),J(u.providerData,function(f){qm(o,f)}),AU(o.h,u.h),ae(o,"refreshToken",o.h.a),kh(o.S,u.S.b))}e=ar.prototype,e.reload=function(){var o=this;return Mt(this,Vm(this).then(function(){return Hm(o).then(function(){return gs(o)}).then(MS)}))};function Hm(o){return o.I().then(function(u){var f=o.isAnonymous;return DU(o,u).then(function(){return f||ho(o,"isAnonymous",!1),u})})}e.oc=function(o){return this.I(o).then(function(u){return new EU(u)})},e.I=function(o){var u=this;return Mt(this,Vm(this).then(function(){return u.h.getToken(o)}).then(function(f){if(!f)throw new R("internal-error");return f.accessToken!=u.Aa&&(jm(u,f.accessToken),u.dispatchEvent(new Ma("tokenChanged"))),ho(u,"refreshToken",f.refreshToken),f.accessToken}))};function fi(o,u){u[qr]&&o.Aa!=u[qr]&&(DS(o.h,u),o.dispatchEvent(new Ma("tokenChanged")),jm(o,u[qr]),ho(o,"refreshToken",o.h.a))}function DU(o,u){return Fe(o.a,p2,{idToken:u}).then(U(o.Kc,o))}e.Kc=function(o){if(o=o.users,!o||!o.length)throw new R("internal-error");o=o[0],LS(this,{uid:o.localId,displayName:o.displayName,photoURL:o.photoUrl,email:o.email,emailVerified:!!o.emailVerified,phoneNumber:o.phoneNumber,lastLoginAt:o.lastLoginAt,createdAt:o.createdAt,tenantId:o.tenantId});for(var u=xU(o),f=0;f<u.length;f++)qm(this,u[f]);ho(this,"isAnonymous",!(this.email&&o.passwordHash)&&!(this.providerData&&this.providerData.length)),this.dispatchEvent(new Ma("userReloaded",{hd:o}))};function xU(o){return(o=o.providerUserInfo)&&o.length?Ie(o,function(u){return new NU(u.rawId,u.providerId,u.email,u.displayName,u.photoUrl,u.phoneNumber)}):[]}e.Lc=function(o){return hg("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.ub(o)},e.ub=function(o){var u=this,f=null;return Mt(this,o.c(this.a,this.uid).then(function(p){return fi(u,p),f=Vc(u,p,"reauthenticate"),u.i=null,u.reload()}).then(function(){return f}),!0)};function Ph(o,u){return Hm(o).then(function(){if(x(Bm(o),u))return gs(o).then(function(){throw new R("provider-already-linked")})})}e.Cc=function(o){return hg("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.rb(o)},e.rb=function(o){var u=this,f=null;return Mt(this,Ph(this,o.providerId).then(function(){return u.I()}).then(function(p){return o.b(u.a,p)}).then(function(p){return f=Vc(u,p,"link"),US(u,p)}).then(function(){return f}))},e.Dc=function(o,u){var f=this;return Mt(this,Ph(this,"phone").then(function(){return Sm(Fm(f),o,u,U(f.rb,f))}))},e.Mc=function(o,u){var f=this;return Mt(this,pe().then(function(){return Sm(Fm(f),o,u,U(f.ub,f))}),!0)};function Vc(o,u,f){var p=Pg(u);return u=eI(u),ci({user:o,credential:p,additionalUserInfo:u,operationType:f})}function US(o,u){return fi(o,u),o.reload().then(function(){return o})}e.Cb=function(o){var u=this;return Mt(this,this.I().then(function(f){return u.a.Cb(f,o)}).then(function(f){return fi(u,f),u.reload()}))},e.ed=function(o){var u=this;return Mt(this,this.I().then(function(f){return o.b(u.a,f)}).then(function(f){return fi(u,f),u.reload()}))},e.Db=function(o){var u=this;return Mt(this,this.I().then(function(f){return u.a.Db(f,o)}).then(function(f){return fi(u,f),u.reload()}))},e.Eb=function(o){if(o.displayName===void 0&&o.photoURL===void 0)return Vm(this);var u=this;return Mt(this,this.I().then(function(f){return u.a.Eb(f,{displayName:o.displayName,photoUrl:o.photoURL})}).then(function(f){return fi(u,f),ho(u,"displayName",f.displayName||null),ho(u,"photoURL",f.photoUrl||null),J(u.providerData,function(p){p.providerId==="password"&&(ae(p,"displayName",u.displayName),ae(p,"photoURL",u.photoURL))}),gs(u)}).then(MS))},e.cd=function(o){var u=this;return Mt(this,Hm(this).then(function(f){return x(Bm(u),o)?r2(u.a,f,[o]).then(function(p){var g={};return J(p.providerUserInfo||[],function(_){g[_.providerId]=!0}),J(Bm(u),function(_){g[_]||FS(u,_)}),g[Li.PROVIDER_ID]||ae(u,"phoneNumber",null),gs(u)}):gs(u).then(function(){throw new R("no-such-provider")})}))},e.delete=function(){var o=this;return Mt(this,this.I().then(function(u){return Fe(o.a,u2,{idToken:u})}).then(function(){o.dispatchEvent(new Ma("userDeleted"))})).then(function(){for(var u=0;u<o.N.length;u++)o.N[u].cancel("app-deleted");xm(o,null),Lm(o,null),Mm(o,null),o.N=[],o.J=!0,Um(o),ae(o,"refreshToken",null),o.b&&wm(o.b,o)})},e.Gb=function(o,u){return!!(o=="linkViaPopup"&&(this.g||null)==u&&this.f||o=="reauthViaPopup"&&(this.g||null)==u&&this.f||o=="linkViaRedirect"&&(this.ga||null)==u||o=="reauthViaRedirect"&&(this.ga||null)==u)},e.na=function(o,u,f,p){o!="linkViaPopup"&&o!="reauthViaPopup"||p!=(this.g||null)||(f&&this.C?this.C(f):u&&!f&&this.f&&this.f(u),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},e.Fa=function(o,u){return o=="linkViaPopup"&&u==(this.g||null)?U(this.Lb,this):o=="reauthViaPopup"&&u==(this.g||null)?U(this.Mb,this):o=="linkViaRedirect"&&(this.ga||null)==u?U(this.Lb,this):o=="reauthViaRedirect"&&(this.ga||null)==u?U(this.Mb,this):null},e.Ec=function(o){var u=this;return jS(this,"linkViaPopup",o,function(){return Ph(u,o.providerId).then(function(){return gs(u)})},!1)},e.Nc=function(o){return jS(this,"reauthViaPopup",o,function(){return pe()},!0)};function jS(o,u,f,p,g){if(!os())return ht(new R("operation-not-supported-in-this-environment"));if(o.i&&!g)return ht(o.i);var _=Sg(f.providerId),b=ss(o.uid+":::"),S=null;(!gc()||ug())&&o.s&&f.isOAuthProvider&&(S=Dc(o.s,o.l,o.m,u,f,null,b,ce.SDK_VERSION||null,null,null,o.tenantId,o.u));var L=kT(S,_&&_.va,_&&_.ua);return p=p().then(function(){if(BS(o),!g)return o.I().then(function(){})}).then(function(){return _S(o.b,L,u,f,b,!!S,o.tenantId)}).then(function(){return new Me(function(B,be){o.na(u,null,new R("cancelled-popup-request"),o.g||null),o.f=B,o.C=be,o.g=b,o.c=bS(o.b,o,u,L,b)})}).then(function(B){return L&&is(L),B?ci(B):null}).o(function(B){throw L&&is(L),B}),Mt(o,p,g)}e.Fc=function(o){var u=this;return VS(this,"linkViaRedirect",o,function(){return Ph(u,o.providerId)},!1)},e.Oc=function(o){return VS(this,"reauthViaRedirect",o,function(){return pe()},!0)};function VS(o,u,f,p,g){if(!os())return ht(new R("operation-not-supported-in-this-environment"));if(o.i&&!g)return ht(o.i);var _=null,b=ss(o.uid+":::");return p=p().then(function(){if(BS(o),!g)return o.I().then(function(){})}).then(function(){return o.ga=b,gs(o)}).then(function(S){return o.ha&&(S=o.ha,S=S.b.set(Km,o.w(),S.a)),S}).then(function(){return wS(o.b,u,f,b,o.tenantId)}).o(function(S){if(_=S,o.ha)return HS(o.ha);throw _}).then(function(){if(_)throw _}),Mt(o,p,g)}function BS(o){if(!o.b||!o.P)throw o.b&&!o.P?new R("internal-error"):new R("auth-domain-config-required")}e.Lb=function(o,u,f,p){var g=this;this.c&&(this.c.cancel(),this.c=null);var _=null;return f=this.I().then(function(b){return Jg(g.a,{requestUri:o,postBody:p,sessionId:u,idToken:b})}).then(function(b){return _=Vc(g,b,"link"),US(g,b)}).then(function(){return _}),Mt(this,f)},e.Mb=function(o,u,f,p){var g=this;this.c&&(this.c.cancel(),this.c=null);var _=null,b=pe().then(function(){return Na(Zg(g.a,{requestUri:o,sessionId:u,postBody:p,tenantId:f}),g.uid)}).then(function(S){return _=Vc(g,S,"reauthenticate"),fi(g,S),g.i=null,g.reload()}).then(function(){return _});return Mt(this,b,!0)},e.vb=function(o){var u=this,f=null;return Mt(this,this.I().then(function(p){return f=p,typeof o>"u"||oi(o)?{}:Jf(new Xf(o))}).then(function(p){return u.a.vb(f,p)}).then(function(p){if(u.email!=p)return u.reload()}).then(function(){}))},e.Fb=function(o,u){var f=this,p=null;return Mt(this,this.I().then(function(g){return p=g,typeof u>"u"||oi(u)?{}:Jf(new Xf(u))}).then(function(g){return f.a.Fb(p,o,g)}).then(function(g){if(f.email!=g)return f.reload()}).then(function(){}))};function Mt(o,u,f){var p=LU(o,u,f);return o.N.push(p),p.oa(function(){M(o.N,p)}),p.o(function(g){var _=null;throw g&&g.code==="auth/multi-factor-auth-required"&&(_=RS(g.w(),Fm(o),U(o.jc,o))),_||g})}e.jc=function(o){var u=null,f=this;return o=Na(pe(o),f.uid).then(function(p){return u=Vc(f,p,"reauthenticate"),fi(f,p),f.i=null,f.reload()}).then(function(){return u}),Mt(this,o,!0)};function LU(o,u,f){return o.i&&!f?(u.cancel(),ht(o.i)):u.o(function(p){throw!p||p.code!="auth/user-disabled"&&p.code!="auth/user-token-expired"||(o.i||o.dispatchEvent(new Ma("userInvalidated")),o.i=p),p})}e.toJSON=function(){return this.w()},e.w=function(){var o={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.h.w(),redirectEventId:this.ga||null};return this.metadata&&en(o,this.metadata.w()),J(this.providerData,function(u){o.providerData.push(sF(u))}),en(o,this.S.w()),o};function qS(o){if(!o.apiKey)return null;var u={apiKey:o.apiKey,authDomain:o.authDomain,appName:o.appName,emulatorConfig:o.emulatorConfig},f={};if(o.stsTokenManager&&o.stsTokenManager.accessToken){f[qr]=o.stsTokenManager.accessToken,f.refreshToken=o.stsTokenManager.refreshToken||null;var p=o.stsTokenManager.expirationTime;p&&(f.expiresIn=(p-Date.now())/1e3)}else return null;var g=new ar(u,f,o);return o.providerData&&J(o.providerData,function(_){_&&qm(g,ci(_))}),o.redirectEventId&&(g.ga=o.redirectEventId),g}function MU(o,u,f,p){var g=new ar(o,u);return f&&(g.ha=f),p&&Uc(g,p),g.reload().then(function(){return g})}function FU(o,u,f,p){var g=o.h,_={};return _[qr]=g.b&&g.b.toString(),_.refreshToken=g.a,u=new ar(u||{apiKey:o.l,authDomain:o.s,appName:o.m},_),f&&(u.ha=f),p&&Uc(u,p),Nh(u,o),u}function UU(o){this.a=o,this.b=Fc()}var Km={name:"redirectUser",F:"session"};function HS(o){return La(o.b,Km,o.a)}function jU(o,u){return o.b.get(Km,o.a).then(function(f){return f&&u&&(f.authDomain=u),qS(f||{})})}function Wm(o){this.a=o,this.b=Fc(),this.c=null,this.f=VU(this),this.b.addListener(hi("local"),this.a,U(this.g,this))}Wm.prototype.g=function(){var o=this,u=hi("local");Fa(this,function(){return pe().then(function(){return o.c&&o.c.F!="local"?o.b.get(u,o.a):null}).then(function(f){if(f)return Gm(o,"local").then(function(){o.c=u})})})};function Gm(o,u){var f=[],p;for(p in Da)Da[p]!==u&&f.push(La(o.b,hi(Da[p]),o.a));return f.push(La(o.b,zm,o.a)),RM(f)}function VU(o){var u=hi("local"),f=hi("session"),p=hi("none");return tU(o.b,u,o.a).then(function(){return o.b.get(f,o.a)}).then(function(g){return g?f:o.b.get(p,o.a).then(function(_){return _?p:o.b.get(u,o.a).then(function(b){return b?u:o.b.get(zm,o.a).then(function(S){return S?hi(S):u})})})}).then(function(g){return o.c=g,Gm(o,g.F)}).o(function(){o.c||(o.c=u)})}var zm={name:"persistence",F:"session"};function hi(o){return{name:"authUser",F:o}}Wm.prototype.yb=function(o){var u=null,f=this;return eU(o),Fa(this,function(){return o!=f.c.F?f.b.get(f.c,f.a).then(function(p){return u=p,Gm(f,o)}).then(function(){if(f.c=hi(o),u)return f.b.set(f.c,u,f.a)}):pe()})};function BU(o){return Fa(o,function(){return o.b.set(zm,o.c.F,o.a)})}function KS(o,u){return Fa(o,function(){return o.b.set(o.c,u.w(),o.a)})}function WS(o){return Fa(o,function(){return La(o.b,o.c,o.a)})}function GS(o,u,f){return Fa(o,function(){return o.b.get(o.c,o.a).then(function(p){return p&&u&&(p.authDomain=u),p&&f&&(p.emulatorConfig=f),qS(p||{})})})}function Fa(o,u){return o.f=o.f.then(u,u),o.f}function Hr(o){if(this.l=!1,ae(this,"settings",new CS),ae(this,"app",o),nt(this).options&&nt(this).options.apiKey)o=ce.SDK_VERSION?Ca(ce.SDK_VERSION):null,this.a=new Br(nt(this).options&&nt(this).options.apiKey,ft(ot),o);else throw new R("invalid-api-key");this.P=[],this.s=[],this.N=[],this.Pa=ce.INTERNAL.createSubscribe(U(this.zc,this)),this.W=void 0,this.ib=ce.INTERNAL.createSubscribe(U(this.Ac,this)),Ua(this,null),this.i=new Wm(nt(this).options.apiKey+":"+nt(this).name),this.D=new UU(nt(this).options.apiKey+":"+nt(this).name),this.$=Et(this,zU(this)),this.h=Et(this,$U(this)),this.ba=!1,this.ja=U(this.Zc,this),this.Ba=U(this.da,this),this.qa=U(this.mc,this),this.za=U(this.wc,this),this.Aa=U(this.xc,this),this.b=null,KU(this),this.INTERNAL={},this.INTERNAL.delete=U(this.delete,this),this.INTERNAL.logFramework=U(this.Gc,this),this.u=0,Nn.call(this),HU(this),this.J=[],this.R=null}F(Hr,Nn);function zS(o){zn.call(this,"languageCodeChanged"),this.h=o}F(zS,zn);function $S(o){zn.call(this,"emulatorConfigChanged"),this.c=o}F($S,zn);function QS(o){zn.call(this,"frameworkChanged"),this.f=o}F(QS,zn),e=Hr.prototype,e.yb=function(o){return o=this.i.yb(o),Et(this,o)},e.xa=function(o){this.aa===o||this.l||(this.aa=o,RI(this.a,this.aa),this.dispatchEvent(new zS(this.la())))},e.la=function(){return this.aa},e.fd=function(){var o=l.navigator;this.xa(o&&(o.languages&&o.languages[0]||o.language||o.userLanguage)||null)},e.gd=function(o,u){if(!this.R){if(!/^https?:\/\//.test(o))throw new R("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");u=u?!!u.disableWarnings:!1,qU(u),this.R={url:o,ec:u},this.settings.jb=!0,mh(this.a,this.R),this.dispatchEvent(new $S(this.R))}};function qU(o){typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),l.document&&!o&&$f().then(function(){var u=l.document.createElement("div");u.innerText="Running in emulator mode. Do not use with production credentials.",u.style.position="fixed",u.style.width="100%",u.style.backgroundColor="#ffffff",u.style.border=".1em solid #000000",u.style.color="#b50000",u.style.bottom="0px",u.style.left="0px",u.style.margin="0px",u.style.zIndex=1e4,u.style.textAlign="center",u.classList.add("firebase-emulator-warning"),l.document.body.appendChild(u)})}e.Gc=function(o){this.J.push(o),NI(this.a,ce.SDK_VERSION?Ca(ce.SDK_VERSION,this.J):null),this.dispatchEvent(new QS(this.J))},e.Ga=function(){return Z(this.J)},e.zb=function(o){this.S===o||this.l||(this.S=o,this.a.b=this.S)},e.T=function(){return this.S};function HU(o){Object.defineProperty(o,"lc",{get:function(){return this.la()},set:function(u){this.xa(u)},enumerable:!1}),o.aa=null,Object.defineProperty(o,"ti",{get:function(){return this.T()},set:function(u){this.zb(u)},enumerable:!1}),o.S=null,Object.defineProperty(o,"emulatorConfig",{get:function(){if(this.R){var u=$n(this.R.url);u=ci({protocol:u.c,host:u.a,port:u.g,options:ci({disableWarnings:this.R.ec})})}else u=null;return u},enumerable:!1})}e.toJSON=function(){return{apiKey:nt(this).options.apiKey,authDomain:nt(this).options.authDomain,appName:nt(this).name,currentUser:Ae(this)&&Ae(this).w()}};function $m(o){return o.Oa||ht(new R("auth-domain-config-required"))}function KU(o){var u=nt(o).options.authDomain,f=nt(o).options.apiKey;u&&os()&&(o.Oa=o.$.then(function(){if(!o.l){if(o.b=Tm(u,f,nt(o).name,o.R),Sh(o.b,o),Ae(o)&&jc(Ae(o)),o.m){jc(o.m);var p=o.m;p.xa(o.la()),xm(p,o),p=o.m,Uc(p,o.J),Mm(p,o),p=o.m,Dm(p,o.R),Lm(p,o),o.m=null}return o.b}}))}e.Gb=function(o,u){switch(o){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==u&&!!this.f;default:return!1}},e.na=function(o,u,f,p){o=="signInViaPopup"&&this.g==p&&(f&&this.C?this.C(f):u&&!f&&this.f&&this.f(u),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},e.Fa=function(o,u){return o=="signInViaRedirect"||o=="signInViaPopup"&&this.g==u&&this.f?U(this.ic,this):null},e.ic=function(o,u,f,p){var g=this,_={requestUri:o,postBody:p,sessionId:u,tenantId:f};return this.c&&(this.c.cancel(),this.c=null),g.$.then(function(){return ms(g,Xg(g.a,_))})},e.Xc=function(o){if(!os())return ht(new R("operation-not-supported-in-this-environment"));var u=this,f=Sg(o.providerId),p=ss(),g=null;(!gc()||ug())&&nt(this).options.authDomain&&o.isOAuthProvider&&(g=Dc(nt(this).options.authDomain,nt(this).options.apiKey,nt(this).name,"signInViaPopup",o,null,p,ce.SDK_VERSION||null,null,null,this.T(),this.R));var _=kT(g,f&&f.va,f&&f.ua);return f=$m(this).then(function(b){return _S(b,_,"signInViaPopup",o,p,!!g,u.T())}).then(function(){return new Me(function(b,S){u.na("signInViaPopup",null,new R("cancelled-popup-request"),u.g),u.f=b,u.C=S,u.g=p,u.c=bS(u.b,u,"signInViaPopup",_,p)})}).then(function(b){return _&&is(_),b?ci(b):null}).o(function(b){throw _&&is(_),b}),Et(this,f)},e.Yc=function(o){if(!os())return ht(new R("operation-not-supported-in-this-environment"));var u=this,f=$m(this).then(function(){return BU(u.i)}).then(function(){return wS(u.b,"signInViaRedirect",o,void 0,u.T())});return Et(this,f)};function YS(o){if(!os())return ht(new R("operation-not-supported-in-this-environment"));var u=$m(o).then(function(){return o.b.ra()}).then(function(f){return f?ci(f):null});return Et(o,u)}e.ra=function(){var o=this;return YS(this).then(function(u){return o.b&&Ah(o.b.b),u}).o(function(u){throw o.b&&Ah(o.b.b),u})},e.dd=function(o){if(!o)return ht(new R("null-user"));if(this.S!=o.tenantId)return ht(new R("tenant-id-mismatch"));var u=this,f={};f.apiKey=nt(this).options.apiKey,f.authDomain=nt(this).options.authDomain,f.appName=nt(this).name;var p=FU(o,f,u.D,u.Ga());return Et(this,this.h.then(function(){if(nt(u).options.apiKey!=o.l)return p.reload()}).then(function(){return Ae(u)&&o.uid==Ae(u).uid?(Nh(Ae(u),o),u.da(o)):(Ua(u,p),jc(p),u.da(p))}).then(function(){Bc(u)}))};function WU(o,u){var f={};return f.apiKey=nt(o).options.apiKey,f.authDomain=nt(o).options.authDomain,f.appName=nt(o).name,o.R&&(f.emulatorConfig=o.R),o.$.then(function(){return MU(f,u,o.D,o.Ga())}).then(function(p){return Ae(o)&&p.uid==Ae(o).uid?(Nh(Ae(o),p),o.da(p)):(Ua(o,p),jc(p),o.da(p))}).then(function(){Bc(o)})}function Ua(o,u){Ae(o)&&(OU(Ae(o),o.Ba),or(Ae(o),"tokenChanged",o.qa),or(Ae(o),"userDeleted",o.za),or(Ae(o),"userInvalidated",o.Aa),Um(Ae(o))),u&&(u.W.push(o.Ba),br(u,"tokenChanged",o.qa),br(u,"userDeleted",o.za),br(u,"userInvalidated",o.Aa),0<o.u&&xS(u)),ae(o,"currentUser",u),u&&(u.xa(o.la()),xm(u,o),Uc(u,o.J),Mm(u,o),Dm(u,o.R),Lm(u,o))}e.Bb=function(){var o=this,u=this.h.then(function(){return o.b&&Ah(o.b.b),Ae(o)?(Ua(o,null),WS(o.i).then(function(){Bc(o)})):pe()});return Et(this,u)};function GU(o){var u=jU(o.D,nt(o).options.authDomain).then(function(f){return(o.m=f)&&(f.ha=o.D),HS(o.D)});return Et(o,u)}function zU(o){var u=nt(o).options.authDomain,f=GU(o).then(function(){return GS(o.i,u,o.R)}).then(function(p){return p?(p.ha=o.D,o.m&&(o.m.ga||null)==(p.ga||null)?p:p.reload().then(function(){return KS(o.i,p).then(function(){return p})}).o(function(g){return g.code=="auth/network-request-failed"?p:WS(o.i)})):null}).then(function(p){Ua(o,p||null)});return Et(o,f)}function $U(o){return o.$.then(function(){return YS(o)}).o(function(){}).then(function(){if(!o.l)return o.ja()}).o(function(){}).then(function(){if(!o.l){o.ba=!0;var u=o.i;u.b.addListener(hi("local"),u.a,o.ja)}})}e.Zc=function(){var o=this;return GS(this.i,nt(this).options.authDomain).then(function(u){if(!o.l){var f;if(f=Ae(o)&&u){f=Ae(o).uid;var p=u.uid;f=f==null||f===""||p===void 0||p===null||p===""?!1:f==p}if(f)return Nh(Ae(o),u),Ae(o).I();(Ae(o)||u)&&(Ua(o,u),u&&(jc(u),u.ha=o.D),o.b&&Sh(o.b,o),Bc(o))}})},e.da=function(o){return KS(this.i,o)},e.mc=function(){Bc(this),this.da(Ae(this))},e.wc=function(){this.Bb()},e.xc=function(){this.Bb()};function ms(o,u){var f=null,p=null;return Et(o,u.then(function(g){return f=Pg(g),p=eI(g),WU(o,g)},function(g){var _=null;throw g&&g.code==="auth/multi-factor-auth-required"&&(_=RS(g.w(),o,U(o.kc,o))),_||g}).then(function(){return ci({user:Ae(o),credential:f,additionalUserInfo:p,operationType:"signIn"})}))}e.kc=function(o){var u=this;return this.h.then(function(){return ms(u,pe(o))})},e.zc=function(o){var u=this;this.addAuthTokenListener(function(){o.next(Ae(u))})},e.Ac=function(o){var u=this;QU(this,function(){o.next(Ae(u))})},e.Ic=function(o,u,f){var p=this;return this.ba&&Promise.resolve().then(function(){typeof o=="function"?o(Ae(p)):typeof o.next=="function"&&o.next(Ae(p))}),this.Pa(o,u,f)},e.Hc=function(o,u,f){var p=this;return this.ba&&Promise.resolve().then(function(){p.W=p.getUid(),typeof o=="function"?o(Ae(p)):typeof o.next=="function"&&o.next(Ae(p))}),this.ib(o,u,f)},e.nc=function(o){var u=this,f=this.h.then(function(){return Ae(u)?Ae(u).I(o).then(function(p){return{accessToken:p}}):null});return Et(this,f)},e.Tc=function(o){var u=this;return this.h.then(function(){return ms(u,Fe(u.a,R2,{token:o}))}).then(function(f){var p=f.user;return ho(p,"isAnonymous",!1),u.da(p),f})},e.Uc=function(o,u){var f=this;return this.h.then(function(){return ms(f,Fe(f.a,jI,{email:o,password:u}))})},e.dc=function(o,u){var f=this;return this.h.then(function(){return ms(f,Fe(f.a,s2,{email:o,password:u}))})},e.ab=function(o){var u=this;return this.h.then(function(){return ms(u,o.ka(u.a))})},e.Sc=function(o){return hg("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.ab(o)},e.Ab=function(){var o=this;return this.h.then(function(){var u=Ae(o);if(u&&u.isAnonymous){var f=ci({providerId:null,isNewUser:!1});return ci({user:u,credential:null,additionalUserInfo:f,operationType:"signIn"})}return ms(o,o.a.Ab()).then(function(p){var g=p.user;return ho(g,"isAnonymous",!0),o.da(g),p})})};function nt(o){return o.app}function Ae(o){return o.currentUser}e.getUid=function(){return Ae(this)&&Ae(this).uid||null};function Oh(o){return Ae(o)&&Ae(o)._lat||null}function Bc(o){if(o.ba){for(var u=0;u<o.s.length;u++)o.s[u]&&o.s[u](Oh(o));if(o.W!==o.getUid()&&o.N.length)for(o.W=o.getUid(),u=0;u<o.N.length;u++)o.N[u]&&o.N[u](Oh(o))}}e.cc=function(o){this.addAuthTokenListener(o),this.u++,0<this.u&&Ae(this)&&xS(Ae(this))},e.Pc=function(o){var u=this;J(this.s,function(f){f==o&&u.u--}),0>this.u&&(this.u=0),this.u==0&&Ae(this)&&Um(Ae(this)),this.removeAuthTokenListener(o)},e.addAuthTokenListener=function(o){var u=this;this.s.push(o),Et(this,this.h.then(function(){u.l||x(u.s,o)&&o(Oh(u))}))},e.removeAuthTokenListener=function(o){j(this.s,function(u){return u==o})};function QU(o,u){o.N.push(u),Et(o,o.h.then(function(){!o.l&&x(o.N,u)&&o.W!==o.getUid()&&(o.W=o.getUid(),u(Oh(o)))}))}e.delete=function(){this.l=!0;for(var o=0;o<this.P.length;o++)this.P[o].cancel("app-deleted");return this.P=[],this.i&&(o=this.i,o.b.removeListener(hi("local"),o.a,this.ja)),this.b&&(wm(this.b,this),Ah(this.b.b)),Promise.resolve()};function Et(o,u){return o.P.push(u),u.oa(function(){M(o.P,u)}),u}e.hc=function(o){return Et(this,XF(this.a,o))},e.Bc=function(o){return!!Ng(o)},e.xb=function(o,u){var f=this;return Et(this,pe().then(function(){var p=new Xf(u);if(!p.c)throw new R("argument-error",Tg+" must be true when sending sign in link to email");return Jf(p)}).then(function(p){return f.a.xb(o,p)}).then(function(){}))},e.jd=function(o){return this.Sa(o).then(function(u){return u.data.email})},e.ob=function(o,u){return Et(this,this.a.ob(o,u).then(function(){}))},e.Sa=function(o){return Et(this,this.a.Sa(o).then(function(u){return new uF(u)}))},e.kb=function(o){return Et(this,this.a.kb(o).then(function(){}))},e.wb=function(o,u){var f=this;return Et(this,pe().then(function(){return typeof u>"u"||oi(u)?{}:Jf(new Xf(u))}).then(function(p){return f.a.wb(o,p)}).then(function(){}))},e.Wc=function(o,u){return Et(this,Sm(this,o,u,U(this.ab,this)))},e.Vc=function(o,u){var f=this;return Et(this,pe().then(function(){var p=u||vc(),g=hI(o,p);if(p=Ng(p),!p)throw new R("argument-error","Invalid email link!");if(p.tenantId!==f.T())throw new R("tenant-id-mismatch");return f.ab(g)}))};function qc(){}qc.prototype.render=function(){},qc.prototype.reset=function(){},qc.prototype.getResponse=function(){},qc.prototype.execute=function(){};function ja(){this.a={},this.b=1e12}var Qm=null;ja.prototype.render=function(o,u){return this.a[this.b.toString()]=new Dh(o,u),this.b++},ja.prototype.reset=function(o){var u=Ym(this,o);o=XS(o),u&&o&&(u.delete(),delete this.a[o])},ja.prototype.getResponse=function(o){return(o=Ym(this,o))?o.getResponse():null},ja.prototype.execute=function(o){(o=Ym(this,o))&&o.execute()};function Ym(o,u){return(u=XS(u))&&o.a[u]||null}function XS(o){return(o=typeof o>"u"?1e12:o)?o.toString():null}function Dh(o,u){this.g=!1,this.c=u,this.a=this.b=null,this.h=this.c.size!=="invisible",this.f=uc(o);var f=this;this.i=function(){f.execute()},this.h?this.execute():br(this.f,"click",this.i)}Dh.prototype.getResponse=function(){return Xm(this),this.b},Dh.prototype.execute=function(){Xm(this);var o=this;this.a||(this.a=setTimeout(function(){o.b=nF();var u=o.c.callback,f=o.c["expired-callback"];if(u)try{u(o.b)}catch{}o.a=setTimeout(function(){if(o.a=null,o.b=null,f)try{f()}catch{}o.h&&o.execute()},6e4)},500))},Dh.prototype.delete=function(){Xm(this),this.g=!0,clearTimeout(this.a),this.a=null,or(this.f,"click",this.i)};function Xm(o){if(o.g)throw Error("reCAPTCHA mock was already deleted!")}function Jm(){}ae(Jm,"FACTOR_ID","phone");function Zm(){}Zm.prototype.g=function(){return Qm||(Qm=new ja),pe(Qm)},Zm.prototype.c=function(){};var ey=null;function ty(){this.b=l.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var YU=new si(Lf,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),XU=new co(3e4,6e4);ty.prototype.g=function(o){var u=this;return new Me(function(f,p){var g=setTimeout(function(){p(new R("network-request-failed"))},XU.get());if(!l.grecaptcha||o!==u.f&&!u.b){l[u.a]=function(){if(l.grecaptcha){u.f=o;var b=l.grecaptcha.render;l.grecaptcha.render=function(S,L){return S=b(S,L),u.b++,S},clearTimeout(g),f(l.grecaptcha)}else clearTimeout(g),p(new R("internal-error"));delete l[u.a]};var _=Mv(YU,{onload:u.a,hl:o||""});pe(Kg(_)).o(function(){clearTimeout(g),p(new R("internal-error","Unable to load external reCAPTCHA dependencies!"))})}else clearTimeout(g),f(l.grecaptcha)})},ty.prototype.c=function(){this.b--};var ny=null;function ry(o,u,f,p,g,_,b){if(ae(this,"type","recaptcha"),this.c=this.f=null,this.J=!1,this.v=u,this.g=null,b?(ey||(ey=new Zm),b=ey):(ny||(ny=new ty),b=ny),this.m=b,this.a=f||{theme:"light",type:"image"},this.h=[],this.a[eC])throw new R("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i=this.a[JU]==="invisible",!l.document)throw new R("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!uc(u)||!this.i&&uc(u).hasChildNodes())throw new R("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Br(o,_||null,g||null),this.u=p||function(){return null};var S=this;this.l=[];var L=this.a[JS];this.a[JS]=function(be){if(tC(S,be),typeof L=="function")L(be);else if(typeof L=="string"){var Xe=dt(L,l);typeof Xe=="function"&&Xe(be)}};var B=this.a[ZS];this.a[ZS]=function(){if(tC(S,null),typeof B=="function")B();else if(typeof B=="string"){var be=dt(B,l);typeof be=="function"&&be()}}}var JS="callback",ZS="expired-callback",eC="sitekey",JU="size";function tC(o,u){for(var f=0;f<o.l.length;f++)try{o.l[f](u)}catch{}}function ZU(o,u){j(o.l,function(f){return f==u})}function iy(o,u){return o.h.push(u),u.oa(function(){M(o.h,u)}),u}e=ry.prototype,e.Ia=function(){var o=this;return this.f?this.f:this.f=iy(this,pe().then(function(){if(Qf()&&!jr())return $f();throw new R("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return o.m.g(o.u())}).then(function(u){return o.g=u,Fe(o.s,w2,{})}).then(function(u){o.a[eC]=u.recaptchaSiteKey}).o(function(u){throw o.f=null,u}))},e.render=function(){xh(this);var o=this;return iy(this,this.Ia().then(function(){if(o.c===null){var u=o.v;if(!o.i){var f=uc(u);u=SM("DIV"),f.appendChild(u)}o.c=o.g.render(u,o.a)}return o.c}))},e.verify=function(){xh(this);var o=this;return iy(this,this.render().then(function(u){return new Me(function(f){var p=o.g.getResponse(u);if(p)f(p);else{var g=function(_){_&&(ZU(o,g),f(_))};o.l.push(g),o.i&&o.g.execute(o.c)}})}))},e.reset=function(){xh(this),this.c!==null&&this.g.reset(this.c)};function xh(o){if(o.J)throw new R("internal-error","RecaptchaVerifier instance has been destroyed.")}e.clear=function(){xh(this),this.J=!0,this.m.c();for(var o=0;o<this.h.length;o++)this.h[o].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){o=uc(this.v);for(var u;u=o.firstChild;)o.removeChild(u)}};function oy(o,u,f){var p=!1;try{this.b=f||ce.app()}catch{throw new R("argument-error","No firebase.app.App instance is currently initialized.")}if(this.b.options&&this.b.options.apiKey)f=this.b.options.apiKey;else throw new R("invalid-api-key");var g=this,_=null;try{_=this.b.auth().Ga()}catch{}try{p=this.b.auth().settings.appVerificationDisabledForTesting}catch{}_=ce.SDK_VERSION?Ca(ce.SDK_VERSION,_):null,ry.call(this,f,o,u,function(){try{var b=g.b.auth().la()}catch{b=null}return b},_,ft(ot),p)}F(oy,ry);function nC(o,u,f,p){e:{f=Array.prototype.slice.call(f);for(var g=0,_=!1,b=0;b<u.length;b++)if(u[b].optional)_=!0;else{if(_)throw new R("internal-error","Argument validator encountered a required argument after an optional argument.");g++}if(_=u.length,f.length<g||_<f.length)p="Expected "+(g==_?g==1?"1 argument":g+" arguments":g+"-"+_+" arguments")+" but got "+f.length+".";else{for(g=0;g<f.length;g++)if(_=u[g].optional&&f[g]===void 0,!u[g].M(f[g])&&!_){if(u=u[g],0>g||g>=rC.length)throw new R("internal-error","Argument validator received an unsupported number of arguments.");f=rC[g],p=(p?"":f+" argument ")+(u.name?'"'+u.name+'" ':"")+"must be "+u.K+".";break e}p=null}}if(p)throw new R("argument-error",o+" failed: "+p)}var rC="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function se(o,u){return{name:o||"",K:"a valid string",optional:!!u,M:function(f){return typeof f=="string"}}}function sy(o,u){return{name:o||"",K:"a boolean",optional:!!u,M:function(f){return typeof f=="boolean"}}}function Rt(o,u){return{name:o||"",K:"a valid object",optional:!!u,M:T}}function Va(o,u){return{name:o||"",K:"a function",optional:!!u,M:function(f){return typeof f=="function"}}}function di(o,u){return{name:o||"",K:"null",optional:!!u,M:function(f){return f===null}}}function ej(){return{name:"",K:"an HTML element",optional:!1,M:function(o){return!!(o&&o instanceof Element)}}}function tj(){return{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(o){return!!(o&&o instanceof Hr)}}}function nj(){return{name:"app",K:"an instance of Firebase App",optional:!0,M:function(o){return!!(o&&o instanceof ce.app.App)}}}function po(o){return{name:o?o+"Credential":"credential",K:o?"a valid "+o+" credential":"a valid credential",optional:!1,M:function(u){if(!u)return!1;var f=!o||u.providerId===o;return!(!u.ka||!f)}}}function iC(){return{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(o){return o?!!o.tb:!1}}}function Ba(){return{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(o){return!!(o&&o.providerId&&o.hasOwnProperty&&o.hasOwnProperty("isOAuthProvider"))}}}function ay(o,u){return T(o)&&typeof o.type=="string"&&o.type===u&&typeof o.Ha=="function"}function oC(o){return T(o)&&typeof o.uid=="string"}function Lh(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(o){return!(!o||typeof o.type!="string"||typeof o.verify!="function")}}}function Ct(o,u,f,p){return{name:f||"",K:o.K+" or "+u.K,optional:!!p,M:function(g){return o.M(g)||u.M(g)}}}function mt(o,u){for(var f in u){var p=u[f].name;o[p]=aC(p,o[f],u[f].j)}}function sC(o,u){for(var f in u){var p=u[f].name;p!==f&&Object.defineProperty(o,p,{get:ie(function(g){return this[g]},f),set:ie(function(g,_,b,S){nC(g,[b],[S],!0),this[_]=S},p,f,u[f].lb),enumerable:!0})}}function At(o,u,f,p){o[u]=aC(u,f,p)}function aC(o,u,f){function p(){var b=Array.prototype.slice.call(arguments);return nC(g,f,b),u.apply(this,b)}if(!f)return u;var g=rj(o),_;for(_ in u)p[_]=u[_];for(_ in u.prototype)p.prototype[_]=u.prototype[_];return p}function rj(o){return o=o.split("."),o[o.length-1]}mt(Hr.prototype,{kb:{name:"applyActionCode",j:[se("code")]},Sa:{name:"checkActionCode",j:[se("code")]},ob:{name:"confirmPasswordReset",j:[se("code"),se("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[se("email"),se("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[se("email")]},ra:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[se("emailLink")]},Hc:{name:"onAuthStateChanged",j:[Ct(Rt(),Va(),"nextOrObserver"),Va("opt_error",!0),Va("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[Ct(Rt(),Va(),"nextOrObserver"),Va("opt_error",!0),Va("opt_completed",!0)]},wb:{name:"sendPasswordResetEmail",j:[se("email"),Ct(Rt("opt_actionCodeSettings",!0),di(null,!0),"opt_actionCodeSettings",!0)]},xb:{name:"sendSignInLinkToEmail",j:[se("email"),Rt("actionCodeSettings")]},yb:{name:"setPersistence",j:[se("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[po()]},Ab:{name:"signInAnonymously",j:[]},ab:{name:"signInWithCredential",j:[po()]},Tc:{name:"signInWithCustomToken",j:[se("token")]},Uc:{name:"signInWithEmailAndPassword",j:[se("email"),se("password")]},Vc:{name:"signInWithEmailLink",j:[se("email"),se("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[se("phoneNumber"),Lh()]},Xc:{name:"signInWithPopup",j:[Ba()]},Yc:{name:"signInWithRedirect",j:[Ba()]},dd:{name:"updateCurrentUser",j:[Ct(function(o){return{name:"user",K:"an instance of Firebase User",optional:!!o,M:function(u){return!!(u&&u instanceof ar)}}}(),di(),"user")]},Bb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[se(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[se("url"),Rt("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[se("code")]}}),sC(Hr.prototype,{lc:{name:"languageCode",lb:Ct(se(),di(),"languageCode")},ti:{name:"tenantId",lb:Ct(se(),di(),"tenantId")}}),Hr.Persistence=Da,Hr.Persistence.LOCAL="local",Hr.Persistence.SESSION="session",Hr.Persistence.NONE="none",mt(ar.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[sy("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[sy("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[po()]},rb:{name:"linkWithCredential",j:[po()]},Dc:{name:"linkWithPhoneNumber",j:[se("phoneNumber"),Lh()]},Ec:{name:"linkWithPopup",j:[Ba()]},Fc:{name:"linkWithRedirect",j:[Ba()]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[po()]},ub:{name:"reauthenticateWithCredential",j:[po()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[se("phoneNumber"),Lh()]},Nc:{name:"reauthenticateWithPopup",j:[Ba()]},Oc:{name:"reauthenticateWithRedirect",j:[Ba()]},reload:{name:"reload",j:[]},vb:{name:"sendEmailVerification",j:[Ct(Rt("opt_actionCodeSettings",!0),di(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[se(null,!0)]},cd:{name:"unlink",j:[se("provider")]},Cb:{name:"updateEmail",j:[se("email")]},Db:{name:"updatePassword",j:[se("password")]},ed:{name:"updatePhoneNumber",j:[po("phone")]},Eb:{name:"updateProfile",j:[Rt("profile")]},Fb:{name:"verifyBeforeUpdateEmail",j:[se("email"),Ct(Rt("opt_actionCodeSettings",!0),di(null,!0),"opt_actionCodeSettings",!0)]}}),mt(ja.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),mt(qc.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),mt(Me.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),sC(CS.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",lb:sy("appVerificationDisabledForTesting")}}),mt(Im.prototype,{confirm:{name:"confirm",j:[se("verificationCode")]}}),At(Ra,"fromJSON",function(o){o=typeof o=="string"?JSON.parse(o):o;for(var u,f=[CF,AF,kF,SF],p=0;p<f.length;p++)if(u=f[p](o))return u;return null},[Ct(se(),Rt(),"json")]),At(Tr,"credential",function(o,u){return new lo(o,u)},[se("email"),se("password")]),mt(lo.prototype,{w:{name:"toJSON",j:[se(null,!0)]}}),mt(cs.prototype,{Ca:{name:"addScope",j:[se("scope")]},Ka:{name:"setCustomParameters",j:[Rt("customOAuthParameters")]}}),At(cs,"credential",uI,[Ct(se(),Rt(),"token")]),At(Tr,"credentialWithLink",hI,[se("email"),se("emailLink")]),mt(ls.prototype,{Ca:{name:"addScope",j:[se("scope")]},Ka:{name:"setCustomParameters",j:[Rt("customOAuthParameters")]}}),At(ls,"credential",cI,[Ct(se(),Rt(),"token")]),mt(fs.prototype,{Ca:{name:"addScope",j:[se("scope")]},Ka:{name:"setCustomParameters",j:[Rt("customOAuthParameters")]}}),At(fs,"credential",lI,[Ct(se(),Ct(Rt(),di()),"idToken"),Ct(se(),di(),"accessToken",!0)]),mt(Pa.prototype,{Ka:{name:"setCustomParameters",j:[Rt("customOAuthParameters")]}}),At(Pa,"credential",fI,[Ct(se(),Rt(),"token"),se("secret",!0)]),mt(sr.prototype,{Ca:{name:"addScope",j:[se("scope")]},credential:{name:"credential",j:[Ct(se(),Ct(Rt(),di()),"optionsOrIdToken"),Ct(se(),di(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Rt("customOAuthParameters")]}}),mt(xi.prototype,{w:{name:"toJSON",j:[se(null,!0)]}}),mt(as.prototype,{w:{name:"toJSON",j:[se(null,!0)]}}),At(Li,"credential",dI,[se("verificationId"),se("verificationCode")]),mt(Li.prototype,{gb:{name:"verifyPhoneNumber",j:[Ct(se(),function(o,u){return{name:o||"phoneInfoOptions",K:"valid phone info options",optional:!!u,M:function(f){return f?f.session&&f.phoneNumber?ay(f.session,Ec)&&typeof f.phoneNumber=="string":f.session&&f.multiFactorHint?ay(f.session,rh)&&oC(f.multiFactorHint):f.session&&f.multiFactorUid?ay(f.session,rh)&&typeof f.multiFactorUid=="string":f.phoneNumber?typeof f.phoneNumber=="string":!1:!1}}}(),"phoneInfoOptions"),Lh()]}}),mt(fo.prototype,{w:{name:"toJSON",j:[se(null,!0)]}}),mt(R.prototype,{toJSON:{name:"toJSON",j:[se(null,!0)]}}),mt(Ic.prototype,{toJSON:{name:"toJSON",j:[se(null,!0)]}}),mt(xg.prototype,{toJSON:{name:"toJSON",j:[se(null,!0)]}}),mt(Am.prototype,{toJSON:{name:"toJSON",j:[se(null,!0)]}}),mt(Cm.prototype,{Rc:{name:"resolveSignIn",j:[iC()]}}),mt(Rm.prototype,{Sb:{name:"getSession",j:[]},fc:{name:"enroll",j:[iC(),se("displayName",!0)]},bd:{name:"unenroll",j:[Ct({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:oC},se(),"multiFactorInfoIdentifier")]}}),mt(oy.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),At(Eg,"parseLink",KT,[se("link")]),At(Jm,"assertion",function(o){return new PS(o)},[po("phone")]),function(){if(typeof ce<"u"&&ce.INTERNAL&&ce.INTERNAL.registerComponent){var o={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Yf,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:bg,VERIFY_AND_CHANGE_EMAIL:wc,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:Hr,AuthCredential:Ra,Error:R};At(o,"EmailAuthProvider",Tr,[]),At(o,"FacebookAuthProvider",cs,[]),At(o,"GithubAuthProvider",ls,[]),At(o,"GoogleAuthProvider",fs,[]),At(o,"TwitterAuthProvider",Pa,[]),At(o,"OAuthProvider",sr,[se("providerId")]),At(o,"SAMLAuthProvider",aI,[se("providerId")]),At(o,"PhoneAuthProvider",Li,[tj()]),At(o,"RecaptchaVerifier",oy,[Ct(se(),ej(),"recaptchaContainer"),Rt("recaptchaParameters",!0),nj()]),At(o,"ActionCodeURL",Eg,[]),At(o,"PhoneMultiFactorGenerator",Jm,[]),ce.INTERNAL.registerComponent({name:"auth",instanceFactory:function(u){return u=u.getProvider("app").getImmediate(),new Hr(u)},multipleInstances:!1,serviceProps:o,instantiationMode:"LAZY",type:"PUBLIC",onInstanceCreated:function(u){u.getProvider("auth-internal").initialize()}}),ce.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(u){return u=u.getProvider("auth").getImmediate(),{getUid:U(u.getUid,u),getToken:U(u.nc,u),addAuthTokenListener:U(u.cc,u),removeAuthTokenListener:U(u.Pc,u)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),ce.registerVersion("@firebase/auth","0.16.8"),ce.INTERNAL.extendNamespace({User:ar})}else throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.")}()}).apply(typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{});var MB="@firebase/database",FB="0.11.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var g1="";function m1(e){g1=e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var UB=function(){function e(t){this.domStorage_=t,this.prefix_="firebase:"}return e.prototype.set=function(t,n){n==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Ut(n))},e.prototype.get=function(t){var n=this.domStorage_.getItem(this.prefixedName_(t));return n==null?null:kl(n)},e.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},e.prototype.prefixedName_=function(t){return this.prefix_+t},e.prototype.toString=function(){return this.domStorage_.toString()},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jB=function(){function e(){this.cache_={},this.isInMemoryStorage=!0}return e.prototype.set=function(t,n){n==null?delete this.cache_[t]:this.cache_[t]=n},e.prototype.get=function(t){return yr(this.cache_,t)?this.cache_[t]:null},e.prototype.remove=function(t){delete this.cache_[t]},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var y1=function(e){try{if(typeof window<"u"&&typeof window[e]<"u"){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new UB(t)}}catch{}return new jB},Ps=y1("localStorage"),E_=y1("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var iu=new sa("@firebase/database"),_1=function(){var e=1;return function(){return e++}}(),w1=function(e){var t=rB(e),n=new ZV;n.update(t);var r=n.digest();return Ap.encodeByteArray(r)},rf=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n="",r=0;r<e.length;r++){var i=e[r];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?n+=rf.apply(null,i):typeof i=="object"?n+=Ut(i):n+=i,n+=" "}return n},Bs=null,BC=!0,b1=function(e,t){z(!t||e===!0||e===!1,"Can't turn on custom loggers persistently."),e===!0?(iu.logLevel=Le.VERBOSE,Bs=iu.log.bind(iu),t&&E_.set("logging_enabled",!0)):typeof e=="function"?Bs=e:(Bs=null,E_.remove("logging_enabled"))},Gt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(BC===!0&&(BC=!1,Bs===null&&E_.get("logging_enabled")===!0&&b1(!0)),Bs){var n=rf.apply(null,e);Bs(n)}},of=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];Gt.apply(void 0,Ne([e],an(t)))}},T_=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE INTERNAL ERROR: "+rf.apply(void 0,Ne([],an(e)));iu.error(n)},Si=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE FATAL ERROR: "+rf.apply(void 0,Ne([],an(e)));throw iu.error(n),new Error(n)},cn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE WARNING: "+rf.apply(void 0,Ne([],an(e)));iu.warn(n)},VB=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&cn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Rp=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},BB=function(e){if(document.readyState==="complete")e();else{var t=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Yi="[MIN_NAME]",Ci="[MAX_NAME]",aa=function(e,t){if(e===t)return 0;if(e===Yi||t===Ci)return-1;if(t===Yi||e===Ci)return 1;var n=Id(e),r=Id(t);return n!==null?r!==null?n-r===0?e.length-t.length:n-r:-1:r!==null?1:e<t?-1:1},qB=function(e,t){return e===t?0:e<t?-1:1},Kc=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Ut(t))},ib=function(e){if(typeof e!="object"||e===null)return Ut(e);var t=[];for(var n in e)t.push(n);t.sort();for(var r="{",i=0;i<t.length;i++)i!==0&&(r+=","),r+=Ut(t[i]),r+=":",r+=ib(e[t[i]]);return r+="}",r},E1=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function qt(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var T1=function(e){z(!Rp(e),"Invalid JSON number");var t=11,n=52,r=(1<<t-1)-1,i,s,a,c,l;e===0?(s=0,a=0,i=1/e===-1/0?1:0):(i=e<0,e=Math.abs(e),e>=Math.pow(2,1-r)?(c=Math.min(Math.floor(Math.log(e)/Math.LN2),r),s=c+r,a=Math.round(e*Math.pow(2,n-c)-Math.pow(2,n))):(s=0,a=Math.round(e/Math.pow(2,1-r-n))));var h=[];for(l=n;l;l-=1)h.push(a%2?1:0),a=Math.floor(a/2);for(l=t;l;l-=1)h.push(s%2?1:0),s=Math.floor(s/2);h.push(i?1:0),h.reverse();var d=h.join(""),v="";for(l=0;l<64;l+=8){var m=parseInt(d.substr(l,8),2).toString(16);m.length===1&&(m="0"+m),v=v+m}return v.toLowerCase()},HB=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},KB=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function WB(e,t){var n="Unknown Error";e==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":e==="permission_denied"?n="Client doesn't have permission to access the desired data.":e==="unavailable"&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}var GB=new RegExp("^-?(0*)\\d{1,10}$"),I1=-2147483648,ob=2147483647,Id=function(e){if(GB.test(e)){var t=Number(e);if(t>=I1&&t<=ob)return t}return null},Wu=function(e){try{e()}catch(t){setTimeout(function(){var n=t.stack||"";throw cn("Exception was thrown by user callback.",n),t},Math.floor(0))}},zB=function(){var e=typeof window=="object"&&window.navigator&&window.navigator.userAgent||"";return e.search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},il=function(e,t){var n=setTimeout(e,t);return typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $B=function(){function e(t,n){var r=this;this.appName_=t,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(function(i){return r.appCheck=i})}return e.prototype.getToken=function(t){var n=this;return this.appCheck?this.appCheck.getToken(t):new Promise(function(r,i){setTimeout(function(){n.appCheck?n.getToken(t).then(r,i):r(null)},0)})},e.prototype.addTokenChangeListener=function(t){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(function(r){return r.addTokenListener(t)})},e.prototype.notifyForInvalidToken=function(){cn('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var QB=function(){function e(t,n,r){var i=this;this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(function(s){return i.auth_=s})}return e.prototype.getToken=function(t){var n=this;return this.auth_?this.auth_.getToken(t).catch(function(r){return r&&r.code==="auth/token-not-initialized"?(Gt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(r)}):new Promise(function(r,i){setTimeout(function(){n.auth_?n.getToken(t).then(r,i):r(null)},0)})},e.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(function(n){return n.addAuthTokenListener(t)})},e.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then(function(n){return n.removeAuthTokenListener(t)})},e.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',cn(t)},e}(),ol=function(){function e(t){this.accessToken=t}return e.prototype.getToken=function(t){return Promise.resolve({accessToken:this.accessToken})},e.prototype.addTokenChangeListener=function(t){t(this.accessToken)},e.prototype.removeTokenChangeListener=function(t){},e.prototype.notifyForInvalidToken=function(){},e.OWNER="owner",e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sb="5",S1="v",C1="s",A1="r",k1="f",R1=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,N1="ls",YB="p",I_="ac",P1="websocket",O1="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ab=function(){function e(t,n,r,i,s,a,c){s===void 0&&(s=!1),a===void 0&&(a=""),c===void 0&&(c=!1),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=a,this.includeNamespaceInQueryParams=c,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ps.get("host:"+t)||this._host}return e.prototype.isCacheableHost=function(){return this.internalHost.substr(0,2)==="s-"},e.prototype.isCustomHost=function(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"},Object.defineProperty(e.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Ps.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),e.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},e.prototype.toURLString=function(){var t=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?"?ns="+this.namespace:"";return""+t+this.host+"/"+n},e}();function XB(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function D1(e,t,n){z(typeof t=="string","typeof type must == string"),z(typeof n=="object","typeof params must == object");var r;if(t===P1)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(t===O1)r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);XB(e)&&(n.ns=e.namespace);var i=[];return qt(n,function(s,a){i.push(s+"="+a)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var JB=function(){function e(){this.counters_={}}return e.prototype.incrementCounter=function(t,n){n===void 0&&(n=1),yr(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=n},e.prototype.get=function(){return s1(this.counters_)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yy={},_y={};function ub(e){var t=e.toString();return yy[t]||(yy[t]=new JB),yy[t]}function ZB(e,t){var n=e.toString();return _y[n]||(_y[n]=t()),_y[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var e3=function(){function e(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return e.prototype.closeAfter=function(t,n){this.closeAfterResponse=t,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},e.prototype.handleResponse=function(t,n){var r=this;this.pendingResponses[t]=n;for(var i=function(){var c=s.pendingResponses[s.currentResponseNum];delete s.pendingResponses[s.currentResponseNum];for(var l=function(d){c[d]&&Wu(function(){r.onMessage_(c[d])})},h=0;h<c.length;++h)l(h);if(s.currentResponseNum===s.closeAfterResponse)return s.onClose&&(s.onClose(),s.onClose=null),"break";s.currentResponseNum++},s=this;this.pendingResponses[this.currentResponseNum];){var a=i();if(a==="break")break}},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qC="start",t3="close",n3="pLPCommand",r3="pRTLPCB",x1="id",L1="pw",M1="ser",i3="cb",o3="seg",s3="ts",a3="d",u3="dframe",F1=1870,U1=30,c3=F1-U1,l3=25e3,f3=3e4,cb=function(){function e(t,n,r,i,s,a,c){var l=this;this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=a,this.lastSessionId=c,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=of(t),this.stats_=ub(n),this.urlFn=function(h){return l.appCheckToken&&(h[I_]=l.appCheckToken),D1(n,O1,h)}}return e.prototype.open=function(t,n){var r=this;this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new e3(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){r.log_("Timed out trying to connect."),r.onClosed_(),r.connectTimeoutTimer_=null},Math.floor(f3)),BB(function(){if(!r.isClosed_){r.scriptTagHolder=new h3(function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];var l=an(a,5),h=l[0],d=l[1],v=l[2];if(l[3],l[4],r.incrementIncomingBytes_(a),!!r.scriptTagHolder)if(r.connectTimeoutTimer_&&(clearTimeout(r.connectTimeoutTimer_),r.connectTimeoutTimer_=null),r.everConnected_=!0,h===qC)r.id=d,r.password=v;else if(h===t3)d?(r.scriptTagHolder.sendNewPolls=!1,r.myPacketOrderer.closeAfter(d,function(){r.onClosed_()})):r.onClosed_();else throw new Error("Unrecognized command received: "+h)},function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];var l=an(a,2),h=l[0],d=l[1];r.incrementIncomingBytes_(a),r.myPacketOrderer.handleResponse(h,d)},function(){r.onClosed_()},r.urlFn);var i={};i[qC]="t",i[M1]=Math.floor(Math.random()*1e8),r.scriptTagHolder.uniqueCallbackIdentifier&&(i[i3]=r.scriptTagHolder.uniqueCallbackIdentifier),i[S1]=sb,r.transportSessionId&&(i[C1]=r.transportSessionId),r.lastSessionId&&(i[N1]=r.lastSessionId),r.applicationId&&(i[YB]=r.applicationId),r.appCheckToken&&(i[I_]=r.appCheckToken),typeof location<"u"&&location.hostname&&R1.test(location.hostname)&&(i[A1]=k1);var s=r.urlFn(i);r.log_("Connecting via long-poll to "+s),r.scriptTagHolder.addTag(s,function(){})}})},e.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},e.forceAllow=function(){e.forceAllow_=!0},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){return e.forceAllow_?!0:!e.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!HB()&&!KB()},e.prototype.markConnectionHealthy=function(){},e.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},e.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},e.prototype.send=function(t){var n=Ut(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);for(var r=o1(n),i=E1(r,c3),s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++},e.prototype.addDisconnectPingFrame=function(t,n){this.myDisconnFrame=document.createElement("iframe");var r={};r[u3]="t",r[x1]=t,r[L1]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)},e.prototype.incrementIncomingBytes_=function(t){var n=Ut(t).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)},e}(),h3=function(){function e(t,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=_1(),window[n3+this.uniqueCallbackIdentifier]=t,window[r3+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var s="";if(this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"){var a=document.domain;s='<script>document.domain="'+a+'";<\/script>'}var c="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(l){Gt("frame writing exception"),l.stack&&Gt(l.stack),Gt(l)}}}return e.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{var n=t.contentWindow.document;n||Gt("No IE domain setting required")}catch{var r=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},e.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){t.myIFrame!==null&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var n=this.onDisconnect;n&&(this.onDisconnect=null,n())},e.prototype.startLongPoll=function(t,n){for(this.myID=t,this.myPW=n,this.alive=!0;this.newRequest_(););},e.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t[x1]=this.myID,t[L1]=this.myPW,t[M1]=this.currentSerial;for(var n=this.urlFn(t),r="",i=0;this.pendingSegs.length>0;){var s=this.pendingSegs[0];if(s.d.length+U1+r.length<=F1){var a=this.pendingSegs.shift();r=r+"&"+o3+i+"="+a.seg+"&"+s3+i+"="+a.ts+"&"+a3+i+"="+a.d,i++}else break}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1},e.prototype.enqueueSegment=function(t,n,r){this.pendingSegs.push({seg:t,ts:n,d:r}),this.alive&&this.newRequest_()},e.prototype.addLongPollTag_=function(t,n){var r=this;this.outstandingRequests.add(n);var i=function(){r.outstandingRequests.delete(n),r.newRequest_()},s=setTimeout(i,Math.floor(l3)),a=function(){clearTimeout(s),i()};this.addTag(t,a)},e.prototype.addTag=function(t,n){var r=this;setTimeout(function(){try{if(!r.sendNewPolls)return;var i=r.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){var s=i.readyState;(!s||s==="loaded"||s==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=function(){Gt("Long-poll script failed to load: "+t),r.sendNewPolls=!1,r.close()},r.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var d3=16384,p3=45e3,Sd=null;typeof MozWebSocket<"u"?Sd=MozWebSocket:typeof WebSocket<"u"&&(Sd=WebSocket);var ks=function(){function e(t,n,r,i,s,a,c){this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=of(this.connId),this.stats_=ub(n),this.connURL=e.connectionURL_(n,a,c,i),this.nodeAdmin=n.nodeAdmin}return e.connectionURL_=function(t,n,r,i){var s={};return s[S1]=sb,typeof location<"u"&&location.hostname&&R1.test(location.hostname)&&(s[A1]=k1),n&&(s[C1]=n),r&&(s[N1]=r),i&&(s[I_]=i),D1(t,P1,s)},e.prototype.open=function(t,n){var r=this;this.onDisconnect=n,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ps.set("previous_websocket_failure",!0);try{var i,s,a,c;if(!c1()){var s={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}};this.mySock=new Sd(this.connURL,[],s)}}catch(h){this.log_("Error instantiating WebSocket.");var l=h.message||h.data;l&&this.log_(l),this.onClosed_();return}this.mySock.onopen=function(){r.log_("Websocket connected."),r.everConnected_=!0},this.mySock.onclose=function(){r.log_("Websocket connection was disconnected."),r.mySock=null,r.onClosed_()},this.mySock.onmessage=function(h){r.handleIncomingFrame(h)},this.mySock.onerror=function(h){r.log_("WebSocket error.  Closing connection.");var d=h.message||h.data;d&&r.log_(d),r.onClosed_()}},e.prototype.start=function(){},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){var t=!1;if(typeof navigator<"u"&&navigator.userAgent){var n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&Sd!==null&&!e.forceDisallow_},e.previouslyFailed=function(){return Ps.isInMemoryStorage||Ps.get("previous_websocket_failure")===!0},e.prototype.markConnectionHealthy=function(){Ps.remove("previous_websocket_failure")},e.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var n=this.frames.join("");this.frames=null;var r=kl(n);this.onMessage(r)}},e.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},e.prototype.extractFrameCount_=function(t){if(z(this.frames===null,"We already have a frame buffer"),t.length<=6){var n=Number(t);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),t},e.prototype.handleIncomingFrame=function(t){if(this.mySock!==null){var n=t.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{var r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}},e.prototype.send=function(t){this.resetKeepAlive();var n=Ut(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);var r=E1(n,d3);r.length>1&&this.sendString_(String(r.length));for(var i=0;i<r.length;i++)this.sendString_(r[i])},e.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},e.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},e.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(p3))},e.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4,e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var v3=function(){function e(t){this.initTransports_(t)}return Object.defineProperty(e,"ALL_TRANSPORTS",{get:function(){return[cb,ks]},enumerable:!1,configurable:!0}),e.prototype.initTransports_=function(t){var n,r,i=ks&&ks.isAvailable(),s=i&&!ks.previouslyFailed();if(t.webSocketOnly&&(i||cn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[ks];else{var a=this.transports_=[];try{for(var c=Xt(e.ALL_TRANSPORTS),l=c.next();!l.done;l=c.next()){var h=l.value;h&&h.isAvailable()&&a.push(h)}}catch(d){n={error:d}}finally{try{l&&!l.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}}},e.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},e.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var g3=6e4,m3=5e3,y3=10*1024,_3=100*1024,wy="t",HC="d",w3="s",KC="r",b3="e",WC="o",GC="a",zC="n",$C="p",E3="h",j1=function(){function e(t,n,r,i,s,a,c,l,h,d){this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=a,this.onReady_=c,this.onDisconnect_=l,this.onKill_=h,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=of("c:"+this.id+":"),this.transportManager_=new v3(n),this.log_("Connection created"),this.start_()}return e.prototype.start_=function(){var t=this,n=this.transportManager_.initialTransport();this.conn_=new n(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=n.responsesRequiredToBeHealthy||0;var r=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(r,i)},Math.floor(0));var s=n.healthyTimeout||0;s>0&&(this.healthyTimeout_=il(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>_3?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>y3?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(s)))},e.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},e.prototype.disconnReceiver_=function(t){var n=this;return function(r){t===n.conn_?n.onConnectionLost_(r):t===n.secondaryConn_?(n.log_("Secondary connection lost."),n.onSecondaryConnectionLost_()):n.log_("closing an old connection")}},e.prototype.connReceiver_=function(t){var n=this;return function(r){n.state_!==2&&(t===n.rx_?n.onPrimaryMessageReceived_(r):t===n.secondaryConn_?n.onSecondaryMessageReceived_(r):n.log_("message on old connection"))}},e.prototype.sendRequest=function(t){var n={t:"d",d:t};this.sendData_(n)},e.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},e.prototype.onSecondaryControl_=function(t){if(wy in t){var n=t[wy];n===GC?this.upgradeIfSecondaryHealthy_():n===KC?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===WC&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},e.prototype.onSecondaryMessageReceived_=function(t){var n=Kc("t",t),r=Kc("d",t);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)},e.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:$C,d:{}}}))},e.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:GC,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:zC,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},e.prototype.onPrimaryMessageReceived_=function(t){var n=Kc("t",t),r=Kc("d",t);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)},e.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},e.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},e.prototype.onControl_=function(t){var n=Kc(wy,t);if(HC in t){var r=t[HC];if(n===E3)this.onHandshake_(r);else if(n===zC){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===w3?this.onConnectionShutdown_(r):n===KC?this.onReset_(r):n===b3?T_("Server Error: "+r):n===WC?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):T_("Unknown control packet command: "+n)}},e.prototype.onHandshake_=function(t){var n=t.ts,r=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),sb!==r&&cn("Protocol version mismatch detected"),this.tryStartUpgrade_())},e.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},e.prototype.startUpgrade_=function(t){var n=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var r=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(r,i),il(function(){n.secondaryConn_&&(n.log_("Timed out trying to upgrade."),n.secondaryConn_.close())},Math.floor(g3))},e.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())},e.prototype.onConnectionEstablished_=function(t,n){var r=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):il(function(){r.sendPingOnPrimaryIfNecessary_()},Math.floor(m3))},e.prototype.sendPingOnPrimaryIfNecessary_=function(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:$C,d:{}}}))},e.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()},e.prototype.onConnectionLost_=function(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ps.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()},e.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},e.prototype.sendData_=function(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)},e.prototype.close=function(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},e.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var V1=function(){function e(){}return e.prototype.put=function(t,n,r,i){},e.prototype.merge=function(t,n,r,i){},e.prototype.refreshAuthToken=function(t){},e.prototype.refreshAppCheckToken=function(t){},e.prototype.onDisconnectPut=function(t,n,r){},e.prototype.onDisconnectMerge=function(t,n,r){},e.prototype.onDisconnectCancel=function(t,n){},e.prototype.reportStats=function(t){},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var B1=function(){function e(t){this.allowedEvents_=t,this.listeners_={},z(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return e.prototype.trigger=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(Array.isArray(this.listeners_[t]))for(var i=Ne([],an(this.listeners_[t])),s=0;s<i.length;s++)i[s].callback.apply(i[s].context,n)},e.prototype.on=function(t,n,r){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:n,context:r});var i=this.getInitialEvent(t);i&&n.apply(r,i)},e.prototype.off=function(t,n,r){this.validateEventType_(t);for(var i=this.listeners_[t]||[],s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}},e.prototype.validateEventType_=function(t){z(this.allowedEvents_.find(function(n){return n===t}),"Unknown event: "+t)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var QC=function(e){te(t,e);function t(){var n=e.call(this,["online"])||this;return n.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Jw()&&(window.addEventListener("online",function(){n.online_||(n.online_=!0,n.trigger("online",!0))},!1),window.addEventListener("offline",function(){n.online_&&(n.online_=!1,n.trigger("online",!1))},!1)),n}return t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(n){return z(n==="online","Unknown event type: "+n),[this.online_]},t.prototype.currentlyOnline=function(){return this.online_},t}(B1);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var YC=32,XC=768,Qe=function(){function e(t,n){if(n===void 0){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return e.prototype.toString=function(){for(var t="",n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(t+="/"+this.pieces_[n]);return t||"/"},e}();function ze(){return new Qe("")}function Pe(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Vo(e){return e.pieces_.length-e.pieceNum_}function it(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new Qe(e.pieces_,t)}function lb(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function T3(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)e.pieces_[n]!==""&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}function Rl(e,t){return t===void 0&&(t=0),e.pieces_.slice(e.pieceNum_+t)}function q1(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new Qe(t,0)}function vt(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof Qe)for(var r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else for(var i=t.split("/"),r=0;r<i.length;r++)i[r].length>0&&n.push(i[r]);return new Qe(n,0)}function Oe(e){return e.pieceNum_>=e.pieces_.length}function Vn(e,t){var n=Pe(e),r=Pe(t);if(n===null)return t;if(n===r)return Vn(it(e),it(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function I3(e,t){for(var n=Rl(e,0),r=Rl(t,0),i=0;i<n.length&&i<r.length;i++){var s=aa(n[i],r[i]);if(s!==0)return s}return n.length===r.length?0:n.length<r.length?-1:1}function fb(e,t){if(Vo(e)!==Vo(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Cr(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(Vo(e)>Vo(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var S3=function(){function e(t,n){this.errorPrefix_=n,this.parts_=Rl(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=kp(this.parts_[r]);H1(this)}return e}();function C3(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=kp(t),H1(e)}function A3(e){var t=e.parts_.pop();e.byteLength_-=kp(t),e.parts_.length>0&&(e.byteLength_-=1)}function H1(e){if(e.byteLength_>XC)throw new Error(e.errorPrefix_+"has a key path longer than "+XC+" bytes ("+e.byteLength_+").");if(e.parts_.length>YC)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+YC+") or object contains a cycle "+Ts(e))}function Ts(e){return e.parts_.length===0?"":"in property '"+e.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var k3=function(e){te(t,e);function t(){var n=e.call(this,["visible"])||this,r,i;return typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(i="visibilitychange",r="hidden"):typeof document.mozHidden<"u"?(i="mozvisibilitychange",r="mozHidden"):typeof document.msHidden<"u"?(i="msvisibilitychange",r="msHidden"):typeof document.webkitHidden<"u"&&(i="webkitvisibilitychange",r="webkitHidden")),n.visible_=!0,i&&document.addEventListener(i,function(){var s=!document[r];s!==n.visible_&&(n.visible_=s,n.trigger("visible",s))},!1),n}return t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(n){return z(n==="visible","Unknown event type: "+n),[this.visible_]},t}(B1);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wc=1e3,R3=60*5*1e3,N3=3*1e3,JC=30*1e3,P3=1.3,O3=3e4,D3="server_kill",ZC=3,qs=function(e){te(t,e);function t(n,r,i,s,a,c,l,h){var d=e.call(this)||this;if(d.repoInfo_=n,d.applicationId_=r,d.onDataUpdate_=i,d.onConnectStatus_=s,d.onServerInfoUpdate_=a,d.authTokenProvider_=c,d.appCheckTokenProvider_=l,d.authOverride_=h,d.id=t.nextPersistentConnectionId_++,d.log_=of("p:"+d.id+":"),d.interruptReasons_={},d.listens=new Map,d.outstandingPuts_=[],d.outstandingGets_=[],d.outstandingPutCount_=0,d.outstandingGetCount_=0,d.onDisconnectRequestQueue_=[],d.connected_=!1,d.reconnectDelay_=Wc,d.maxReconnectDelay_=R3,d.securityDebugCallback_=null,d.lastSessionId=null,d.establishConnectionTimer_=null,d.visible_=!1,d.requestCBHash_={},d.requestNumber_=0,d.realtime_=null,d.authToken_=null,d.appCheckToken_=null,d.forceTokenRefresh_=!1,d.invalidAuthTokenCount_=0,d.invalidAppCheckTokenCount_=0,d.firstConnection_=!0,d.lastConnectionAttemptTime_=null,d.lastConnectionEstablishedTime_=null,h&&!c1())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return k3.getInstance().on("visible",d.onVisible_,d),n.host.indexOf("fblocal")===-1&&QC.getInstance().on("online",d.onOnline_,d),d}return t.prototype.sendRequest=function(n,r,i){var s=++this.requestNumber_,a={r:s,a:n,b:r};this.log_(Ut(a)),z(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(a),i&&(this.requestCBHash_[s]=i)},t.prototype.get=function(n){var r=this;this.initConnection_();var i=new Qt,s={p:n._path.toString(),q:n._queryObject},a={action:"g",request:s,onComplete:function(l){var h=l.d;l.s==="ok"?(r.onDataUpdate_(s.p,h,!1,null),i.resolve(h)):i.reject(h)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;var c=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var l=r.outstandingGets_[c];l===void 0||a!==l||(delete r.outstandingGets_[c],r.outstandingGetCount_--,r.outstandingGetCount_===0&&(r.outstandingGets_=[]),r.log_("get "+c+" timed out on connection"),i.reject(new Error("Client is offline.")))},N3),this.connected_&&this.sendGet_(c),i.promise},t.prototype.listen=function(n,r,i,s){this.initConnection_();var a=n._queryIdentifier,c=n._path.toString();this.log_("Listen called for "+c+" "+a),this.listens.has(c)||this.listens.set(c,new Map),z(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),z(!this.listens.get(c).has(a),"listen() called twice for same path/queryId.");var l={onComplete:s,hashFn:r,query:n,tag:i};this.listens.get(c).set(a,l),this.connected_&&this.sendListen_(l)},t.prototype.sendGet_=function(n){var r=this,i=this.outstandingGets_[n];this.sendRequest("g",i.request,function(s){delete r.outstandingGets_[n],r.outstandingGetCount_--,r.outstandingGetCount_===0&&(r.outstandingGets_=[]),i.onComplete&&i.onComplete(s)})},t.prototype.sendListen_=function(n){var r=this,i=n.query,s=i._path.toString(),a=i._queryIdentifier;this.log_("Listen on "+s+" for "+a);var c={p:s},l="q";n.tag&&(c.q=i._queryObject,c.t=n.tag),c.h=n.hashFn(),this.sendRequest(l,c,function(h){var d=h.d,v=h.s;t.warnOnListenWarnings_(d,i);var m=r.listens.get(s)&&r.listens.get(s).get(a);m===n&&(r.log_("listen response",h),v!=="ok"&&r.removeListen_(s,a),n.onComplete&&n.onComplete(v,d))})},t.warnOnListenWarnings_=function(n,r){if(n&&typeof n=="object"&&yr(n,"w")){var i=$s(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){var s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',a=r._path.toString();cn("Using an unspecified index. Your data will be downloaded and "+("filtered on the client. Consider adding "+s+" at ")+(a+" to your security rules for better performance."))}}},t.prototype.refreshAuthToken=function(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(n)},t.prototype.reduceReconnectDelayIfAdminCredential_=function(n){var r=n&&n.length===40;(r||XV(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=JC)},t.prototype.refreshAppCheckToken=function(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},function(){})},t.prototype.tryAuth=function(){var n=this;if(this.connected_&&this.authToken_){var r=this.authToken_,i=YV(r)?"auth":"gauth",s={cred:r};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(i,s,function(a){var c=a.s,l=a.d||"error";n.authToken_===r&&(c==="ok"?n.invalidAuthTokenCount_=0:n.onAuthRevoked_(c,l))})}},t.prototype.tryAppCheck=function(){var n=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},function(r){var i=r.s,s=r.d||"error";i==="ok"?n.invalidAppCheckTokenCount_=0:n.onAppCheckRevoked_(i,s)})},t.prototype.unlisten=function(n,r){var i=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),z(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");var a=this.removeListen_(i,s);a&&this.connected_&&this.sendUnlisten_(i,s,n._queryObject,r)},t.prototype.sendUnlisten_=function(n,r,i,s){this.log_("Unlisten on "+n+" for "+r);var a={p:n},c="n";s&&(a.q=i,a.t=s),this.sendRequest(c,a)},t.prototype.onDisconnectPut=function(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})},t.prototype.onDisconnectMerge=function(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})},t.prototype.onDisconnectCancel=function(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})},t.prototype.sendOnDisconnect_=function(n,r,i,s){var a={p:r,d:i};this.log_("onDisconnect "+n,a),this.sendRequest(n,a,function(c){s&&setTimeout(function(){s(c.s,c.d)},Math.floor(0))})},t.prototype.put=function(n,r,i,s){this.putInternal("p",n,r,i,s)},t.prototype.merge=function(n,r,i,s){this.putInternal("m",n,r,i,s)},t.prototype.putInternal=function(n,r,i,s,a){this.initConnection_();var c={p:r,d:i};a!==void 0&&(c.h=a),this.outstandingPuts_.push({action:n,request:c,onComplete:s}),this.outstandingPutCount_++;var l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+r)},t.prototype.sendPut_=function(n){var r=this,i=this.outstandingPuts_[n].action,s=this.outstandingPuts_[n].request,a=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(i,s,function(c){r.log_(i+" response",c),delete r.outstandingPuts_[n],r.outstandingPutCount_--,r.outstandingPutCount_===0&&(r.outstandingPuts_=[]),a&&a(c.s,c.d)})},t.prototype.reportStats=function(n){var r=this;if(this.connected_){var i={c:n};this.log_("reportStats",i),this.sendRequest("s",i,function(s){var a=s.s;if(a!=="ok"){var c=s.d;r.log_("reportStats","Error sending stats: "+c)}})}},t.prototype.onDataMessage_=function(n){if("r"in n){this.log_("from server: "+Ut(n));var r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}},t.prototype.onDataPush_=function(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):T_("Unrecognized action received from server: "+Ut(n)+`
Are you using the latest client?`)},t.prototype.onReady_=function(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},t.prototype.scheduleConnect_=function(n){var r=this;z(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){r.establishConnectionTimer_=null,r.establishConnection_()},Math.floor(n))},t.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},t.prototype.onVisible_=function(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Wc,this.realtime_||this.scheduleConnect_(0)),this.visible_=n},t.prototype.onOnline_=function(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Wc,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},t.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(!this.visible_)this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime();else if(this.lastConnectionEstablishedTime_){var n=new Date().getTime()-this.lastConnectionEstablishedTime_;n>O3&&(this.reconnectDelay_=Wc),this.lastConnectionEstablishedTime_=null}var r=new Date().getTime()-this.lastConnectionAttemptTime_,i=Math.max(0,this.reconnectDelay_-r);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*P3)}this.onConnectStatus_(!1)},t.prototype.establishConnection_=function(){return k(this,void 0,void 0,function(){var n,r,i,s,a,c,l,h,d,v,m,y,w,E,T=this;return C(this,function(A){switch(A.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null,n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+t.nextConnectionId_++,a=this.lastSessionId,c=!1,l=null,h=function(){l?l.close():(c=!0,i())},d=function(P){z(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(P)},this.realtime_={close:h,sendRequest:d},v=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,A.label=1;case 1:return A.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(v),this.appCheckTokenProvider_.getToken(v)])];case 2:return m=an.apply(void 0,[A.sent(),2]),y=m[0],w=m[1],c?Gt("getToken() completed but was canceled"):(Gt("getToken() completed. Creating connection."),this.authToken_=y&&y.accessToken,this.appCheckToken_=w&&w.token,l=new j1(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,function(P){cn(P+" ("+T.repoInfo_.toString()+")"),T.interrupt(D3)},a)),[3,4];case 3:return E=A.sent(),this.log_("Failed to get token: "+E),c||(this.repoInfo_.nodeAdmin&&cn(E),h()),[3,4];case 4:return[2]}})})},t.prototype.interrupt=function(n){Gt("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},t.prototype.resume=function(n){Gt("Resuming connection for reason: "+n),delete this.interruptReasons_[n],w_(this.interruptReasons_)&&(this.reconnectDelay_=Wc,this.realtime_||this.scheduleConnect_(0))},t.prototype.handleTimestamp_=function(n){var r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})},t.prototype.cancelSentTransactions_=function(){for(var n=0;n<this.outstandingPuts_.length;n++){var r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])},t.prototype.onListenRevoked_=function(n,r){var i;r?i=r.map(function(a){return ib(a)}).join("$"):i="default";var s=this.removeListen_(n,i);s&&s.onComplete&&s.onComplete("permission_denied")},t.prototype.removeListen_=function(n,r){var i=new Qe(n).toString(),s;if(this.listens.has(i)){var a=this.listens.get(i);s=a.get(r),a.delete(r),a.size===0&&this.listens.delete(i)}else s=void 0;return s},t.prototype.onAuthRevoked_=function(n,r){Gt("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=ZC&&(this.reconnectDelay_=JC,this.authTokenProvider_.notifyForInvalidToken()))},t.prototype.onAppCheckRevoked_=function(n,r){Gt("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=ZC&&this.appCheckTokenProvider_.notifyForInvalidToken())},t.prototype.onSecurityDebugPacket_=function(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))},t.prototype.restoreState_=function(){var n,r,i,s;this.tryAuth(),this.tryAppCheck();try{for(var a=Xt(this.listens.values()),c=a.next();!c.done;c=a.next()){var l=c.value;try{for(var h=(i=void 0,Xt(l.values())),d=h.next();!d.done;d=h.next()){var v=d.value;this.sendListen_(v)}}catch(w){i={error:w}}finally{try{d&&!d.done&&(s=h.return)&&s.call(h)}finally{if(i)throw i.error}}}}catch(w){n={error:w}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}for(var m=0;m<this.outstandingPuts_.length;m++)this.outstandingPuts_[m]&&this.sendPut_(m);for(;this.onDisconnectRequestQueue_.length;){var y=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(y.action,y.pathString,y.data,y.onComplete)}for(var m=0;m<this.outstandingGets_.length;m++)this.outstandingGets_[m]&&this.sendGet_(m)},t.prototype.sendConnectStats_=function(){var n={},r="js";n["sdk."+r+"."+g1.replace(/\./g,"-")]=1,Jw()?n["framework.cordova"]=1:u1()&&(n["framework.reactnative"]=1),this.reportStats(n)},t.prototype.shouldReconnect_=function(){var n=QC.getInstance().currentlyOnline();return w_(this.interruptReasons_)&&n},t.nextPersistentConnectionId_=0,t.nextConnectionId_=0,t}(V1);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je=function(){function e(t,n){this.name=t,this.node=n}return e.Wrap=function(t,n){return new e(t,n)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Np=function(){function e(){}return e.prototype.getCompare=function(){return this.compare.bind(this)},e.prototype.indexedValueChanged=function(t,n){var r=new je(Yi,t),i=new je(Yi,n);return this.compare(r,i)!==0},e.prototype.minPost=function(){return je.MIN},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qh,K1=function(e){te(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t,"__EMPTY_NODE",{get:function(){return qh},set:function(n){qh=n},enumerable:!1,configurable:!0}),t.prototype.compare=function(n,r){return aa(n.name,r.name)},t.prototype.isDefinedOn=function(n){throw Hu("KeyIndex.isDefinedOn not expected to be called.")},t.prototype.indexedValueChanged=function(n,r){return!1},t.prototype.minPost=function(){return je.MIN},t.prototype.maxPost=function(){return new je(Ci,qh)},t.prototype.makePost=function(n,r){return z(typeof n=="string","KeyIndex indexValue must always be a string."),new je(n,qh)},t.prototype.toString=function(){return".key"},t}(Np),_i=new K1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hh=function(){function e(t,n,r,i,s){s===void 0&&(s=null),this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];for(var a=1;!t.isEmpty();)if(t=t,a=n?r(t.key,n):1,i&&(a*=-1),a<0)this.isReverse_?t=t.left:t=t.right;else if(a===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}return e.prototype.getNext=function(){if(this.nodeStack_.length===0)return null;var t=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(t.key,t.value):n={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return n},e.prototype.hasNext=function(){return this.nodeStack_.length>0},e.prototype.peek=function(){if(this.nodeStack_.length===0)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},e}(),$r=function(){function e(t,n,r,i,s){this.key=t,this.value=n,this.color=r??e.RED,this.left=i??qi.EMPTY_NODE,this.right=s??qi.EMPTY_NODE}return e.prototype.copy=function(t,n,r,i,s){return new e(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)},e.prototype.count=function(){return this.left.count()+1+this.right.count()},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},e.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},e.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},e.prototype.minKey=function(){return this.min_().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(t,n,r){var i=this,s=r(t,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp_()},e.prototype.removeMin_=function(){if(this.left.isEmpty())return qi.EMPTY_NODE;var t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()},e.prototype.remove=function(t,n){var r,i;if(r=this,n(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(t,r.key)===0){if(r.right.isEmpty())return qi.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,n))}return r.fixUp_()},e.prototype.isRed_=function(){return this.color},e.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},e.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t},e.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t},e.prototype.rotateLeft_=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight_=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)},e.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},e.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},e.RED=!0,e.BLACK=!1,e}(),x3=function(){function e(){}return e.prototype.copy=function(t,n,r,i,s){return this},e.prototype.insert=function(t,n,r){return new $r(t,n,null)},e.prototype.remove=function(t,n){return this},e.prototype.count=function(){return 0},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(t){return!1},e.prototype.reverseTraversal=function(t){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.check_=function(){return 0},e.prototype.isRed_=function(){return!1},e}(),qi=function(){function e(t,n){n===void 0&&(n=e.EMPTY_NODE),this.comparator_=t,this.root_=n}return e.prototype.insert=function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,$r.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,$r.BLACK,null,null))},e.prototype.get=function(t){for(var n,r=this.root_;!r.isEmpty();){if(n=this.comparator_(t,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null},e.prototype.getPredecessorKey=function(t){for(var n,r=this.root_,i=null;!r.isEmpty();)if(n=this.comparator_(t,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},e.prototype.isEmpty=function(){return this.root_.isEmpty()},e.prototype.count=function(){return this.root_.count()},e.prototype.minKey=function(){return this.root_.minKey()},e.prototype.maxKey=function(){return this.root_.maxKey()},e.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},e.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},e.prototype.getIterator=function(t){return new Hh(this.root_,null,this.comparator_,!1,t)},e.prototype.getIteratorFrom=function(t,n){return new Hh(this.root_,t,this.comparator_,!1,n)},e.prototype.getReverseIteratorFrom=function(t,n){return new Hh(this.root_,t,this.comparator_,!0,n)},e.prototype.getReverseIterator=function(t){return new Hh(this.root_,null,this.comparator_,!0,t)},e.EMPTY_NODE=new x3,e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L3(e,t){return aa(e.name,t.name)}function hb(e,t){return aa(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var S_;function M3(e){S_=e}var W1=function(e){return typeof e=="number"?"number:"+T1(e):"string:"+e},G1=function(e){if(e.isLeafNode()){var t=e.val();z(typeof t=="string"||typeof t=="number"||typeof t=="object"&&yr(t,".sv"),"Priority must be a string or number.")}else z(e===S_||e.isEmpty(),"priority of unexpected type.");z(e===S_||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var eA,du=function(){function e(t,n){n===void 0&&(n=e.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,z(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),G1(this.priorityNode_)}return Object.defineProperty(e,"__childrenNodeConstructor",{get:function(){return eA},set:function(t){eA=t},enumerable:!1,configurable:!0}),e.prototype.isLeafNode=function(){return!0},e.prototype.getPriority=function(){return this.priorityNode_},e.prototype.updatePriority=function(t){return new e(this.value_,t)},e.prototype.getImmediateChild=function(t){return t===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.getChild=function(t){return Oe(t)?this:Pe(t)===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.hasChild=function(){return!1},e.prototype.getPredecessorChildName=function(t,n){return null},e.prototype.updateImmediateChild=function(t,n){return t===".priority"?this.updatePriority(n):n.isEmpty()&&t!==".priority"?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)},e.prototype.updateChild=function(t,n){var r=Pe(t);return r===null?n:n.isEmpty()&&r!==".priority"?this:(z(r!==".priority"||Vo(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(it(t),n)))},e.prototype.isEmpty=function(){return!1},e.prototype.numChildren=function(){return 0},e.prototype.forEachChild=function(t,n){return!1},e.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},e.prototype.hash=function(){if(this.lazyHash_===null){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+W1(this.priorityNode_.val())+":");var n=typeof this.value_;t+=n+":",n==="number"?t+=T1(this.value_):t+=this.value_,this.lazyHash_=w1(t)}return this.lazyHash_},e.prototype.getValue=function(){return this.value_},e.prototype.compareTo=function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(z(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},e.prototype.compareToLeafNode_=function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),s=e.VALUE_TYPE_ORDER.indexOf(r);return z(i>=0,"Unknown leaf type: "+n),z(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:s-i},e.prototype.withIndex=function(){return this},e.prototype.isIndexed=function(){return!0},e.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode()){var n=t;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1},e.VALUE_TYPE_ORDER=["object","boolean","number","string"],e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var z1,$1;function F3(e){z1=e}function U3(e){$1=e}var j3=function(e){te(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.compare=function(n,r){var i=n.node.getPriority(),s=r.node.getPriority(),a=i.compareTo(s);return a===0?aa(n.name,r.name):a},t.prototype.isDefinedOn=function(n){return!n.getPriority().isEmpty()},t.prototype.indexedValueChanged=function(n,r){return!n.getPriority().equals(r.getPriority())},t.prototype.minPost=function(){return je.MIN},t.prototype.maxPost=function(){return new je(Ci,new du("[PRIORITY-POST]",$1))},t.prototype.makePost=function(n,r){var i=z1(n);return new je(r,new du("[PRIORITY-POST]",i))},t.prototype.toString=function(){return".priority"},t}(Np),st=new j3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var V3=Math.log(2),B3=function(){function e(t){var n=function(s){return parseInt(Math.log(s)/V3,10)},r=function(s){return parseInt(Array(s+1).join("1"),2)};this.count=n(t+1),this.current_=this.count-1;var i=r(this.count);this.bits_=t+1&i}return e.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},e}(),Cd=function(e,t,n,r){e.sort(t);var i=function(l,h){var d=h-l,v,m;if(d===0)return null;if(d===1)return v=e[l],m=n?n(v):v,new $r(m,v.node,$r.BLACK,null,null);var y=parseInt(d/2,10)+l,w=i(l,y),E=i(y+1,h);return v=e[y],m=n?n(v):v,new $r(m,v.node,$r.BLACK,w,E)},s=function(l){for(var h=null,d=null,v=e.length,m=function(A,P){var O=v-A,H=v;v-=A;var K=i(O+1,H),U=e[O],ie=n?n(U):U;y(new $r(ie,U.node,P,null,K))},y=function(A){h?(h.left=A,h=A):(d=A,h=A)},w=0;w<l.count;++w){var E=l.nextBitIsOne(),T=Math.pow(2,l.count-(w+1));E?m(T,$r.BLACK):(m(T,$r.BLACK),m(T,$r.RED))}return d},a=new B3(e.length),c=s(a);return new qi(r||t,c)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var by,Ha={},Ad=function(){function e(t,n){this.indexes_=t,this.indexSet_=n}return Object.defineProperty(e,"Default",{get:function(){return z(Ha&&st,"ChildrenNode.ts has not been loaded"),by=by||new e({".priority":Ha},{".priority":st}),by},enumerable:!1,configurable:!0}),e.prototype.get=function(t){var n=$s(this.indexes_,t);if(!n)throw new Error("No index defined for "+t);return n instanceof qi?n:null},e.prototype.hasIndex=function(t){return yr(this.indexSet_,t.toString())},e.prototype.addIndex=function(t,n){z(t!==_i,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r=[],i=!1,s=n.getIterator(je.Wrap),a=s.getNext();a;)i=i||t.isDefinedOn(a.node),r.push(a),a=s.getNext();var c;i?c=Cd(r,t.getCompare()):c=Ha;var l=t.toString(),h=me({},this.indexSet_);h[l]=t;var d=me({},this.indexes_);return d[l]=c,new e(d,h)},e.prototype.addToIndexes=function(t,n){var r=this,i=Ed(this.indexes_,function(s,a){var c=$s(r.indexSet_,a);if(z(c,"Missing index implementation for "+a),s===Ha)if(c.isDefinedOn(t.node)){for(var l=[],h=n.getIterator(je.Wrap),d=h.getNext();d;)d.name!==t.name&&l.push(d),d=h.getNext();return l.push(t),Cd(l,c.getCompare())}else return Ha;else{var v=n.get(t.name),m=s;return v&&(m=m.remove(new je(t.name,v))),m.insert(t,t.node)}});return new e(i,this.indexSet_)},e.prototype.removeFromIndexes=function(t,n){var r=Ed(this.indexes_,function(i){if(i===Ha)return i;var s=n.get(t.name);return s?i.remove(new je(t.name,s)):i});return new e(r,this.indexSet_)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gc,Se=function(){function e(t,n,r){this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&G1(this.priorityNode_),this.children_.isEmpty()&&z(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(e,"EMPTY_NODE",{get:function(){return Gc||(Gc=new e(new qi(hb),null,Ad.Default))},enumerable:!1,configurable:!0}),e.prototype.isLeafNode=function(){return!1},e.prototype.getPriority=function(){return this.priorityNode_||Gc},e.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)},e.prototype.getImmediateChild=function(t){if(t===".priority")return this.getPriority();var n=this.children_.get(t);return n===null?Gc:n},e.prototype.getChild=function(t){var n=Pe(t);return n===null?this:this.getImmediateChild(n).getChild(it(t))},e.prototype.hasChild=function(t){return this.children_.get(t)!==null},e.prototype.updateImmediateChild=function(t,n){if(z(n,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(n);var r=new je(t,n),i=void 0,s=void 0;n.isEmpty()?(i=this.children_.remove(t),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(t,n),s=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?Gc:this.priorityNode_;return new e(i,a,s)},e.prototype.updateChild=function(t,n){var r=Pe(t);if(r===null)return n;z(Pe(t)!==".priority"||Vo(t)===1,".priority must be the last token in a path");var i=this.getImmediateChild(r).updateChild(it(t),n);return this.updateImmediateChild(r,i)},e.prototype.isEmpty=function(){return this.children_.isEmpty()},e.prototype.numChildren=function(){return this.children_.count()},e.prototype.val=function(t){if(this.isEmpty())return null;var n={},r=0,i=0,s=!0;if(this.forEachChild(st,function(l,h){n[l]=h.val(t),r++,s&&e.INTEGER_REGEXP_.test(l)?i=Math.max(i,Number(l)):s=!1}),!t&&s&&i<2*r){var a=[];for(var c in n)a[c]=n[c];return a}else return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},e.prototype.hash=function(){if(this.lazyHash_===null){var t="";this.getPriority().isEmpty()||(t+="priority:"+W1(this.getPriority().val())+":"),this.forEachChild(st,function(n,r){var i=r.hash();i!==""&&(t+=":"+n+":"+i)}),this.lazyHash_=t===""?"":w1(t)}return this.lazyHash_},e.prototype.getPredecessorChildName=function(t,n,r){var i=this.resolveIndex_(r);if(i){var s=i.getPredecessorKey(new je(t,n));return s?s.name:null}else return this.children_.getPredecessorKey(t)},e.prototype.getFirstChildName=function(t){var n=this.resolveIndex_(t);if(n){var r=n.minKey();return r&&r.name}else return this.children_.minKey()},e.prototype.getFirstChild=function(t){var n=this.getFirstChildName(t);return n?new je(n,this.children_.get(n)):null},e.prototype.getLastChildName=function(t){var n=this.resolveIndex_(t);if(n){var r=n.maxKey();return r&&r.name}else return this.children_.maxKey()},e.prototype.getLastChild=function(t){var n=this.getLastChildName(t);return n?new je(n,this.children_.get(n)):null},e.prototype.forEachChild=function(t,n){var r=this.resolveIndex_(t);return r?r.inorderTraversal(function(i){return n(i.name,i.node)}):this.children_.inorderTraversal(n)},e.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},e.prototype.getIteratorFrom=function(t,n){var r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(t,function(a){return a});for(var i=this.children_.getIteratorFrom(t.name,je.Wrap),s=i.peek();s!=null&&n.compare(s,t)<0;)i.getNext(),s=i.peek();return i},e.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},e.prototype.getReverseIteratorFrom=function(t,n){var r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(t,function(a){return a});for(var i=this.children_.getReverseIteratorFrom(t.name,je.Wrap),s=i.peek();s!=null&&n.compare(s,t)>0;)i.getNext(),s=i.peek();return i},e.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===sf?-1:0},e.prototype.withIndex=function(t){if(t===_i||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)},e.prototype.isIndexed=function(t){return t===_i||this.indexMap_.hasIndex(t)},e.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var n=t;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){for(var r=this.getIterator(st),i=n.getIterator(st),s=r.getNext(),a=i.getNext();s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=r.getNext(),a=i.getNext()}return s===null&&a===null}else return!1;else return!1},e.prototype.resolveIndex_=function(t){return t===_i?null:this.indexMap_.get(t.toString())},e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e}(),q3=function(e){te(t,e);function t(){return e.call(this,new qi(hb),Se.EMPTY_NODE,Ad.Default)||this}return t.prototype.compareTo=function(n){return n===this?0:1},t.prototype.equals=function(n){return n===this},t.prototype.getPriority=function(){return this},t.prototype.getImmediateChild=function(n){return Se.EMPTY_NODE},t.prototype.isEmpty=function(){return!1},t}(Se),sf=new q3;Object.defineProperties(je,{MIN:{value:new je(Yi,Se.EMPTY_NODE)},MAX:{value:new je(Ci,sf)}});K1.__EMPTY_NODE=Se.EMPTY_NODE;du.__childrenNodeConstructor=Se;M3(sf);U3(sf);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var H3=!0;function yt(e,t){if(t===void 0&&(t=null),e===null)return Se.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(t=e[".priority"]),z(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){var n=e;return new du(n,yt(t))}if(!(e instanceof Array)&&H3){var r=[],i=!1,s=e;if(qt(s,function(h,d){if(h.substring(0,1)!=="."){var v=yt(d);v.isEmpty()||(i=i||!v.getPriority().isEmpty(),r.push(new je(h,v)))}}),r.length===0)return Se.EMPTY_NODE;var a=Cd(r,L3,function(h){return h.name},hb);if(i){var c=Cd(r,st.getCompare());return new Se(a,yt(t),new Ad({".priority":c},{".priority":st}))}else return new Se(a,yt(t),Ad.Default)}else{var l=Se.EMPTY_NODE;return qt(e,function(h,d){if(yr(e,h)&&h.substring(0,1)!=="."){var v=yt(d);(v.isLeafNode()||!v.isEmpty())&&(l=l.updateImmediateChild(h,v))}}),l.updatePriority(yt(t))}}F3(yt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var db=function(e){te(t,e);function t(n){var r=e.call(this)||this;return r.indexPath_=n,z(!Oe(n)&&Pe(n)!==".priority","Can't create PathIndex with empty path or .priority key"),r}return t.prototype.extractChild=function(n){return n.getChild(this.indexPath_)},t.prototype.isDefinedOn=function(n){return!n.getChild(this.indexPath_).isEmpty()},t.prototype.compare=function(n,r){var i=this.extractChild(n.node),s=this.extractChild(r.node),a=i.compareTo(s);return a===0?aa(n.name,r.name):a},t.prototype.makePost=function(n,r){var i=yt(n),s=Se.EMPTY_NODE.updateChild(this.indexPath_,i);return new je(r,s)},t.prototype.maxPost=function(){var n=Se.EMPTY_NODE.updateChild(this.indexPath_,sf);return new je(Ci,n)},t.prototype.toString=function(){return Rl(this.indexPath_,0).join("/")},t}(Np);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var K3=function(e){te(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.compare=function(n,r){var i=n.node.compareTo(r.node);return i===0?aa(n.name,r.name):i},t.prototype.isDefinedOn=function(n){return!0},t.prototype.indexedValueChanged=function(n,r){return!n.equals(r)},t.prototype.minPost=function(){return je.MIN},t.prototype.maxPost=function(){return je.MAX},t.prototype.makePost=function(n,r){var i=yt(n);return new je(r,i)},t.prototype.toString=function(){return".value"},t}(Np),pb=new K3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pu="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",C_="-",Q1="z",Y1=786,W3=function(){var e=0,t=[];return function(n){var r=n===e;e=n;var i,s=new Array(8);for(i=7;i>=0;i--)s[i]=pu.charAt(n%64),n=Math.floor(n/64);z(n===0,"Cannot push at time == 0");var a=s.join("");if(r){for(i=11;i>=0&&t[i]===63;i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)a+=pu.charAt(t[i]);return z(a.length===20,"nextPushId: Length should be 20."),a}}(),tA=function(e){if(e===""+ob)return C_;var t=Id(e);if(t!=null)return""+(t+1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);if(n.length<Y1)return n.push(C_),n.join("");for(var i=n.length-1;i>=0&&n[i]===Q1;)i--;if(i===-1)return Ci;var s=n[i],a=pu.charAt(pu.indexOf(s)+1);return n[i]=a,n.slice(0,i+1).join("")},nA=function(e){if(e===""+I1)return Yi;var t=Id(e);if(t!=null)return""+(t-1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);return n[n.length-1]===C_?n.length===1?""+ob:(delete n[n.length-1],n.join("")):(n[n.length-1]=pu.charAt(pu.indexOf(n[n.length-1])-1),n.join("")+Q1.repeat(Y1-n.length))};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X1(e){return{type:"value",snapshotNode:e}}function vu(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Nl(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Pl(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}function G3(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vb=function(){function e(t){this.index_=t}return e.prototype.updateChild=function(t,n,r,i,s,a){z(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var c=t.getImmediateChild(n);return c.getChild(i).equals(r.getChild(i))&&c.isEmpty()===r.isEmpty()||(a!=null&&(r.isEmpty()?t.hasChild(n)?a.trackChildChange(Nl(n,c)):z(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):c.isEmpty()?a.trackChildChange(vu(n,r)):a.trackChildChange(Pl(n,r,c))),t.isLeafNode()&&r.isEmpty())?t:t.updateImmediateChild(n,r).withIndex(this.index_)},e.prototype.updateFullNode=function(t,n,r){return r!=null&&(t.isLeafNode()||t.forEachChild(st,function(i,s){n.hasChild(i)||r.trackChildChange(Nl(i,s))}),n.isLeafNode()||n.forEachChild(st,function(i,s){if(t.hasChild(i)){var a=t.getImmediateChild(i);a.equals(s)||r.trackChildChange(Pl(i,s,a))}else r.trackChildChange(vu(i,s))})),n.withIndex(this.index_)},e.prototype.updatePriority=function(t,n){return t.isEmpty()?Se.EMPTY_NODE:t.updatePriority(n)},e.prototype.filtersNodes=function(){return!1},e.prototype.getIndexedFilter=function(){return this},e.prototype.getIndex=function(){return this.index_},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var J1=function(){function e(t){this.indexedFilter_=new vb(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return e.prototype.getStartPost=function(){return this.startPost_},e.prototype.getEndPost=function(){return this.endPost_},e.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},e.prototype.updateChild=function(t,n,r,i,s,a){return this.matches(new je(n,r))||(r=Se.EMPTY_NODE),this.indexedFilter_.updateChild(t,n,r,i,s,a)},e.prototype.updateFullNode=function(t,n,r){n.isLeafNode()&&(n=Se.EMPTY_NODE);var i=n.withIndex(this.index_);i=i.updatePriority(Se.EMPTY_NODE);var s=this;return n.forEachChild(st,function(a,c){s.matches(new je(a,c))||(i=i.updateImmediateChild(a,Se.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,i,r)},e.prototype.updatePriority=function(t,n){return t},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.indexedFilter_},e.prototype.getIndex=function(){return this.index_},e.getStartPost_=function(t){if(t.hasStart()){var n=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),n)}else return t.getIndex().minPost()},e.getEndPost_=function(t){if(t.hasEnd()){var n=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),n)}else return t.getIndex().maxPost()},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var z3=function(){function e(t){this.rangedFilter_=new J1(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return e.prototype.updateChild=function(t,n,r,i,s,a){return this.rangedFilter_.matches(new je(n,r))||(r=Se.EMPTY_NODE),t.getImmediateChild(n).equals(r)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,n,r,i,s,a):this.fullLimitUpdateChild_(t,n,r,s,a)},e.prototype.updateFullNode=function(t,n,r){var i;if(n.isLeafNode()||n.isEmpty())i=Se.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=Se.EMPTY_NODE.withIndex(this.index_);var s=void 0;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var a=0;s.hasNext()&&a<this.limit_;){var c=s.getNext(),l=void 0;if(this.reverse_?l=this.index_.compare(this.rangedFilter_.getStartPost(),c)<=0:l=this.index_.compare(c,this.rangedFilter_.getEndPost())<=0,l)i=i.updateImmediateChild(c.name,c.node),a++;else break}}else{i=n.withIndex(this.index_),i=i.updatePriority(Se.EMPTY_NODE);var h=void 0,d=void 0,v=void 0,s=void 0;if(this.reverse_){s=i.getReverseIterator(this.index_),h=this.rangedFilter_.getEndPost(),d=this.rangedFilter_.getStartPost();var m=this.index_.getCompare();v=function(T,A){return m(A,T)}}else s=i.getIterator(this.index_),h=this.rangedFilter_.getStartPost(),d=this.rangedFilter_.getEndPost(),v=this.index_.getCompare();for(var a=0,y=!1;s.hasNext();){var c=s.getNext();!y&&v(h,c)<=0&&(y=!0);var l=y&&a<this.limit_&&v(c,d)<=0;l?a++:i=i.updateImmediateChild(c.name,Se.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,i,r)},e.prototype.updatePriority=function(t,n){return t},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},e.prototype.getIndex=function(){return this.index_},e.prototype.fullLimitUpdateChild_=function(t,n,r,i,s){var a;if(this.reverse_){var c=this.index_.getCompare();a=function(P,O){return c(O,P)}}else a=this.index_.getCompare();var l=t;z(l.numChildren()===this.limit_,"");var h=new je(n,r),d=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),v=this.rangedFilter_.matches(h);if(l.hasChild(n)){for(var m=l.getImmediateChild(n),y=i.getChildAfterChild(this.index_,d,this.reverse_);y!=null&&(y.name===n||l.hasChild(y.name));)y=i.getChildAfterChild(this.index_,y,this.reverse_);var w=y==null?1:a(y,h),E=v&&!r.isEmpty()&&w>=0;if(E)return s!=null&&s.trackChildChange(Pl(n,r,m)),l.updateImmediateChild(n,r);s!=null&&s.trackChildChange(Nl(n,m));var T=l.updateImmediateChild(n,Se.EMPTY_NODE),A=y!=null&&this.rangedFilter_.matches(y);return A?(s!=null&&s.trackChildChange(vu(y.name,y.node)),T.updateImmediateChild(y.name,y.node)):T}else return r.isEmpty()?t:v&&a(d,h)>=0?(s!=null&&(s.trackChildChange(Nl(d.name,d.node)),s.trackChildChange(vu(n,r))),l.updateImmediateChild(n,r).updateImmediateChild(d.name,Se.EMPTY_NODE)):t},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Z1=function(){function e(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=st}return e.prototype.hasStart=function(){return this.startSet_},e.prototype.hasStartAfter=function(){return this.startAfterSet_},e.prototype.hasEndBefore=function(){return this.endBeforeSet_},e.prototype.isViewFromLeft=function(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"},e.prototype.getIndexStartValue=function(){return z(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},e.prototype.getIndexStartName=function(){return z(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Yi},e.prototype.hasEnd=function(){return this.endSet_},e.prototype.getIndexEndValue=function(){return z(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},e.prototype.getIndexEndName=function(){return z(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ci},e.prototype.hasLimit=function(){return this.limitSet_},e.prototype.hasAnchoredLimit=function(){return this.limitSet_&&this.viewFrom_!==""},e.prototype.getLimit=function(){return z(this.limitSet_,"Only valid if limit has been set"),this.limit_},e.prototype.getIndex=function(){return this.index_},e.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},e.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===st},e.prototype.copy=function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},e}();function $3(e){return e.loadsAllData()?new vb(e.getIndex()):e.hasLimit()?new z3(e):new J1(e)}function Q3(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}function Y3(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}function A_(e,t,n){var r=e.copy();return r.startSet_=!0,t===void 0&&(t=null),r.indexStartValue_=t,n!=null?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function X3(e,t,n){var r;if(e.index_===_i)typeof t=="string"&&(t=tA(t)),r=A_(e,t,n);else{var i=void 0;n==null?i=Ci:i=tA(n),r=A_(e,t,i)}return r.startAfterSet_=!0,r}function k_(e,t,n){var r=e.copy();return r.endSet_=!0,t===void 0&&(t=null),r.indexEndValue_=t,n!==void 0?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function J3(e,t,n){var r,i;return e.index_===_i?(typeof t=="string"&&(t=nA(t)),i=k_(e,t,n)):(n==null?r=Yi:r=nA(n),i=k_(e,t,r)),i.endBeforeSet_=!0,i}function Pp(e,t){var n=e.copy();return n.index_=t,n}function rA(e){var t={};if(e.isDefault())return t;var n;return e.index_===st?n="$priority":e.index_===pb?n="$value":e.index_===_i?n="$key":(z(e.index_ instanceof db,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=Ut(n),e.startSet_&&(t.startAt=Ut(e.indexStartValue_),e.startNameSet_&&(t.startAt+=","+Ut(e.indexStartName_))),e.endSet_&&(t.endAt=Ut(e.indexEndValue_),e.endNameSet_&&(t.endAt+=","+Ut(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function iA(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;n===""&&(e.isViewFromLeft()?n="l":n="r"),t.vf=n}return e.index_!==st&&(t.i=e.index_.toString()),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Z3=function(e){te(t,e);function t(n,r,i,s){var a=e.call(this)||this;return a.repoInfo_=n,a.onDataUpdate_=r,a.authTokenProvider_=i,a.appCheckTokenProvider_=s,a.log_=of("p:rest:"),a.listens_={},a}return t.prototype.reportStats=function(n){throw new Error("Method not implemented.")},t.getListenId_=function(n,r){return r!==void 0?"tag$"+r:(z(n._queryParams.isDefault(),"should have a tag if it's not a default query."),n._path.toString())},t.prototype.listen=function(n,r,i,s){var a=this,c=n._path.toString();this.log_("Listen called for "+c+" "+n._queryIdentifier);var l=t.getListenId_(n,i),h={};this.listens_[l]=h;var d=rA(n._queryParams);this.restRequest_(c+".json",d,function(v,m){var y=m;if(v===404&&(y=null,v=null),v===null&&a.onDataUpdate_(c,y,!1,i),$s(a.listens_,l)===h){var w;v?v===401?w="permission_denied":w="rest_error:"+v:w="ok",s(w,null)}})},t.prototype.unlisten=function(n,r){var i=t.getListenId_(n,r);delete this.listens_[i]},t.prototype.get=function(n){var r=this,i=rA(n._queryParams),s=n._path.toString(),a=new Qt;return this.restRequest_(s+".json",i,function(c,l){var h=l;c===404&&(h=null,c=null),c===null?(r.onDataUpdate_(s,h,!1,null),a.resolve(h)):a.reject(new Error(h))}),a.promise},t.prototype.refreshAuthToken=function(n){},t.prototype.restRequest_=function(n,r,i){var s=this;return r===void 0&&(r={}),r.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(function(a){var c=an(a,2),l=c[0],h=c[1];l&&l.accessToken&&(r.auth=l.accessToken),h&&h.token&&(r.ac=h.token);var d=(s.repoInfo_.secure?"https://":"http://")+s.repoInfo_.host+n+"?ns="+s.repoInfo_.namespace+JV(r);s.log_("Sending REST request for "+d);var v=new XMLHttpRequest;v.onreadystatechange=function(){if(i&&v.readyState===4){s.log_("REST Response for "+d+" received. status:",v.status,"response:",v.responseText);var m=null;if(v.status>=200&&v.status<300){try{m=kl(v.responseText)}catch{cn("Failed to parse JSON response for "+d+": "+v.responseText)}i(null,m)}else v.status!==401&&v.status!==404&&cn("Got unsuccessful REST response for "+d+" Status: "+v.status),i(v.status);i=null}},v.open("GET",d,!0),v.send()})},t}(V1);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var eq=function(){function e(){this.rootNode_=Se.EMPTY_NODE}return e.prototype.getNode=function(t){return this.rootNode_.getChild(t)},e.prototype.updateSnapshot=function(t,n){this.rootNode_=this.rootNode_.updateChild(t,n)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kd(){return{value:null,children:new Map}}function Gu(e,t,n){if(Oe(t))e.value=n,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(t,n);else{var r=Pe(t);e.children.has(r)||e.children.set(r,kd());var i=e.children.get(r);t=it(t),Gu(i,t,n)}}function R_(e,t){if(Oe(t))return e.value=null,e.children.clear(),!0;if(e.value!==null){if(e.value.isLeafNode())return!1;var n=e.value;return e.value=null,n.forEachChild(st,function(s,a){Gu(e,new Qe(s),a)}),R_(e,t)}else if(e.children.size>0){var r=Pe(t);if(t=it(t),e.children.has(r)){var i=R_(e.children.get(r),t);i&&e.children.delete(r)}return e.children.size===0}else return!0}function N_(e,t,n){e.value!==null?n(t,e.value):tq(e,function(r,i){var s=new Qe(t.toString()+"/"+r);N_(i,s,n)})}function tq(e,t){e.children.forEach(function(n,r){t(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var eP=function(){function e(t){this.collection_=t,this.last_=null}return e.prototype.get=function(){var t=this.collection_.get(),n=me({},t);return this.last_&&qt(this.last_,function(r,i){n[r]=n[r]-i}),this.last_=t,n},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oA=10*1e3,nq=30*1e3,rq=5*60*1e3,iq=function(){function e(t,n){this.server_=n,this.statsToReport_={},this.statsListener_=new eP(t);var r=oA+(nq-oA)*Math.random();il(this.reportStats_.bind(this),Math.floor(r))}return e.prototype.reportStats_=function(){var t=this,n=this.statsListener_.get(),r={},i=!1;qt(n,function(s,a){a>0&&yr(t.statsToReport_,s)&&(r[s]=a,i=!0)}),i&&this.server_.reportStats(r),il(this.reportStats_.bind(this),Math.floor(Math.random()*2*rq))},e}();function oq(e,t){e.statsToReport_[t]=!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xr;(function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Xr||(Xr={}));function gb(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function mb(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function yb(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sq=function(){function e(t,n,r){this.path=t,this.affectedTree=n,this.revert=r,this.type=Xr.ACK_USER_WRITE,this.source=gb()}return e.prototype.operationForChild=function(t){if(Oe(this.path)){if(this.affectedTree.value!=null)return z(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new Qe(t));return new e(ze(),n,this.revert)}else return z(Pe(this.path)===t,"operationForChild called for unrelated child."),new e(it(this.path),this.affectedTree,this.revert)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tP=function(){function e(t,n){this.source=t,this.path=n,this.type=Xr.LISTEN_COMPLETE}return e.prototype.operationForChild=function(t){return Oe(this.path)?new e(this.source,ze()):new e(this.source,it(this.path))},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Op=function(){function e(t,n,r){this.source=t,this.path=n,this.snap=r,this.type=Xr.OVERWRITE}return e.prototype.operationForChild=function(t){return Oe(this.path)?new e(this.source,ze(),this.snap.getImmediateChild(t)):new e(this.source,it(this.path),this.snap)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _b=function(){function e(t,n,r){this.source=t,this.path=n,this.children=r,this.type=Xr.MERGE}return e.prototype.operationForChild=function(t){if(Oe(this.path)){var n=this.children.subtree(new Qe(t));return n.isEmpty()?null:n.value?new Op(this.source,ze(),n.value):new e(this.source,ze(),n)}else return z(Pe(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,it(this.path),this.children)},e.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bo=function(){function e(t,n,r){this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return e.prototype.isFullyInitialized=function(){return this.fullyInitialized_},e.prototype.isFiltered=function(){return this.filtered_},e.prototype.isCompleteForPath=function(t){if(Oe(t))return this.isFullyInitialized()&&!this.filtered_;var n=Pe(t);return this.isCompleteForChild(n)},e.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},e.prototype.getNode=function(){return this.node_},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var aq=function(){function e(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}return e}();function uq(e,t,n,r){var i=[],s=[];return t.forEach(function(a){a.type==="child_changed"&&e.index_.indexedValueChanged(a.oldSnap,a.snapshotNode)&&s.push(G3(a.childName,a.snapshotNode))}),zc(e,i,"child_removed",t,r,n),zc(e,i,"child_added",t,r,n),zc(e,i,"child_moved",s,r,n),zc(e,i,"child_changed",t,r,n),zc(e,i,"value",t,r,n),i}function zc(e,t,n,r,i,s){var a=r.filter(function(c){return c.type===n});a.sort(function(c,l){return lq(e,c,l)}),a.forEach(function(c){var l=cq(e,c,s);i.forEach(function(h){h.respondsTo(c.type)&&t.push(h.createEvent(l,e.query_))})})}function cq(e,t,n){return t.type==="value"||t.type==="child_removed"||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function lq(e,t,n){if(t.childName==null||n.childName==null)throw Hu("Should only compare child_ events.");var r=new je(t.childName,t.snapshotNode),i=new je(n.childName,n.snapshotNode);return e.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dp(e,t){return{eventCache:e,serverCache:t}}function sl(e,t,n,r){return Dp(new Bo(t,n,r),e.serverCache)}function nP(e,t,n,r){return Dp(e.eventCache,new Bo(t,n,r))}function Rd(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Qs(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ey,fq=function(){return Ey||(Ey=new qi(qB)),Ey},_r=function(){function e(t,n){n===void 0&&(n=fq()),this.value=t,this.children=n}return e.fromObject=function(t){var n=new e(null);return qt(t,function(r,i){n=n.set(new Qe(r),i)}),n},e.prototype.isEmpty=function(){return this.value===null&&this.children.isEmpty()},e.prototype.findRootMostMatchingPathAndValue=function(t,n){if(this.value!=null&&n(this.value))return{path:ze(),value:this.value};if(Oe(t))return null;var r=Pe(t),i=this.children.get(r);if(i!==null){var s=i.findRootMostMatchingPathAndValue(it(t),n);if(s!=null){var a=vt(new Qe(r),s.path);return{path:a,value:s.value}}else return null}else return null},e.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},e.prototype.subtree=function(t){if(Oe(t))return this;var n=Pe(t),r=this.children.get(n);return r!==null?r.subtree(it(t)):new e(null)},e.prototype.set=function(t,n){if(Oe(t))return new e(n,this.children);var r=Pe(t),i=this.children.get(r)||new e(null),s=i.set(it(t),n),a=this.children.insert(r,s);return new e(this.value,a)},e.prototype.remove=function(t){if(Oe(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=Pe(t),r=this.children.get(n);if(r){var i=r.remove(it(t)),s=void 0;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new e(null):new e(this.value,s)}else return this},e.prototype.get=function(t){if(Oe(t))return this.value;var n=Pe(t),r=this.children.get(n);return r?r.get(it(t)):null},e.prototype.setTree=function(t,n){if(Oe(t))return n;var r=Pe(t),i=this.children.get(r)||new e(null),s=i.setTree(it(t),n),a=void 0;return s.isEmpty()?a=this.children.remove(r):a=this.children.insert(r,s),new e(this.value,a)},e.prototype.fold=function(t){return this.fold_(ze(),t)},e.prototype.fold_=function(t,n){var r={};return this.children.inorderTraversal(function(i,s){r[i]=s.fold_(vt(t,i),n)}),n(t,this.value,r)},e.prototype.findOnPath=function(t,n){return this.findOnPath_(t,ze(),n)},e.prototype.findOnPath_=function(t,n,r){var i=this.value?r(n,this.value):!1;if(i)return i;if(Oe(t))return null;var s=Pe(t),a=this.children.get(s);return a?a.findOnPath_(it(t),vt(n,s),r):null},e.prototype.foreachOnPath=function(t,n){return this.foreachOnPath_(t,ze(),n)},e.prototype.foreachOnPath_=function(t,n,r){if(Oe(t))return this;this.value&&r(n,this.value);var i=Pe(t),s=this.children.get(i);return s?s.foreachOnPath_(it(t),vt(n,i),r):new e(null)},e.prototype.foreach=function(t){this.foreach_(ze(),t)},e.prototype.foreach_=function(t,n){this.children.inorderTraversal(function(r,i){i.foreach_(vt(t,r),n)}),this.value&&n(t,this.value)},e.prototype.foreachChild=function(t){this.children.inorderTraversal(function(n,r){r.value&&t(n,r.value)})},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gi=function(){function e(t){this.writeTree_=t}return e.empty=function(){return new e(new _r(null))},e}();function al(e,t,n){if(Oe(t))return new Gi(new _r(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(r!=null){var i=r.path,s=r.value,a=Vn(i,t);return s=s.updateChild(a,n),new Gi(e.writeTree_.set(i,s))}else{var c=new _r(n),l=e.writeTree_.setTree(t,c);return new Gi(l)}}function P_(e,t,n){var r=e;return qt(n,function(i,s){r=al(r,vt(t,i),s)}),r}function sA(e,t){if(Oe(t))return Gi.empty();var n=e.writeTree_.setTree(t,new _r(null));return new Gi(n)}function O_(e,t){return ua(e,t)!=null}function ua(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return n!=null?e.writeTree_.get(n.path).getChild(Vn(n.path,t)):null}function aA(e){var t=[],n=e.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(st,function(r,i){t.push(new je(r,i))}):e.writeTree_.children.inorderTraversal(function(r,i){i.value!=null&&t.push(new je(r,i.value))}),t}function Do(e,t){if(Oe(t))return e;var n=ua(e,t);return n!=null?new Gi(new _r(n)):new Gi(e.writeTree_.subtree(t))}function D_(e){return e.writeTree_.isEmpty()}function gu(e,t){return rP(ze(),e.writeTree_,t)}function rP(e,t,n){if(t.value!=null)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal(function(i,s){i===".priority"?(z(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=rP(vt(e,i),s,n)}),!n.getChild(e).isEmpty()&&r!==null&&(n=n.updateChild(vt(e,".priority"),r)),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xp(e,t){return aP(t,e)}function hq(e,t,n,r,i){z(r>e.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=al(e.visibleWrites,t,n)),e.lastWriteId=r}function dq(e,t,n,r){z(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=P_(e.visibleWrites,t,n),e.lastWriteId=r}function pq(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}function vq(e,t){var n=e.allWrites.findIndex(function(h){return h.writeId===t});z(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,s=!1,a=e.allWrites.length-1;i&&a>=0;){var c=e.allWrites[a];c.visible&&(a>=n&&gq(c,r.path)?i=!1:Cr(r.path,c.path)&&(s=!0)),a--}if(i){if(s)return mq(e),!0;if(r.snap)e.visibleWrites=sA(e.visibleWrites,r.path);else{var l=r.children;qt(l,function(h){e.visibleWrites=sA(e.visibleWrites,vt(r.path,h))})}return!0}else return!1}function gq(e,t){if(e.snap)return Cr(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&Cr(vt(e.path,n),t))return!0;return!1}function mq(e){e.visibleWrites=iP(e.allWrites,yq,ze()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function yq(e){return e.visible}function iP(e,t,n){for(var r=Gi.empty(),i=0;i<e.length;++i){var s=e[i];if(t(s)){var a=s.path,c=void 0;if(s.snap)Cr(n,a)?(c=Vn(n,a),r=al(r,c,s.snap)):Cr(a,n)&&(c=Vn(a,n),r=al(r,ze(),s.snap.getChild(c)));else if(s.children){if(Cr(n,a))c=Vn(n,a),r=P_(r,c,s.children);else if(Cr(a,n))if(c=Vn(a,n),Oe(c))r=P_(r,ze(),s.children);else{var l=$s(s.children,Pe(c));if(l){var h=l.getChild(it(c));r=al(r,ze(),h)}}}else throw Hu("WriteRecord should have .snap or .children")}}return r}function oP(e,t,n,r,i){if(!r&&!i){var s=ua(e.visibleWrites,t);if(s!=null)return s;var a=Do(e.visibleWrites,t);if(D_(a))return n;if(n==null&&!O_(a,ze()))return null;var c=n||Se.EMPTY_NODE;return gu(a,c)}else{var l=Do(e.visibleWrites,t);if(!i&&D_(l))return n;if(!i&&n==null&&!O_(l,ze()))return null;var h=function(m){return(m.visible||i)&&(!r||!~r.indexOf(m.writeId))&&(Cr(m.path,t)||Cr(t,m.path))},d=iP(e.allWrites,h,t),c=n||Se.EMPTY_NODE;return gu(d,c)}}function _q(e,t,n){var r=Se.EMPTY_NODE,i=ua(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(st,function(c,l){r=r.updateImmediateChild(c,l)}),r;if(n){var s=Do(e.visibleWrites,t);return n.forEachChild(st,function(c,l){var h=gu(Do(s,new Qe(c)),l);r=r.updateImmediateChild(c,h)}),aA(s).forEach(function(c){r=r.updateImmediateChild(c.name,c.node)}),r}else{var a=Do(e.visibleWrites,t);return aA(a).forEach(function(c){r=r.updateImmediateChild(c.name,c.node)}),r}}function wq(e,t,n,r,i){z(r||i,"Either existingEventSnap or existingServerSnap must exist");var s=vt(t,n);if(O_(e.visibleWrites,s))return null;var a=Do(e.visibleWrites,s);return D_(a)?i.getChild(n):gu(a,i.getChild(n))}function bq(e,t,n,r){var i=vt(t,n),s=ua(e.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){var a=Do(e.visibleWrites,i);return gu(a,r.getNode().getImmediateChild(n))}else return null}function Eq(e,t){return ua(e.visibleWrites,t)}function Tq(e,t,n,r,i,s,a){var c,l=Do(e.visibleWrites,t),h=ua(l,ze());if(h!=null)c=h;else if(n!=null)c=gu(l,n);else return[];if(c=c.withIndex(a),!c.isEmpty()&&!c.isLeafNode()){for(var d=[],v=a.getCompare(),m=s?c.getReverseIteratorFrom(r,a):c.getIteratorFrom(r,a),y=m.getNext();y&&d.length<i;)v(y,r)!==0&&d.push(y),y=m.getNext();return d}else return[]}function Iq(){return{visibleWrites:Gi.empty(),allWrites:[],lastWriteId:-1}}function Nd(e,t,n,r){return oP(e.writeTree,e.treePath,t,n,r)}function wb(e,t){return _q(e.writeTree,e.treePath,t)}function uA(e,t,n,r){return wq(e.writeTree,e.treePath,t,n,r)}function Pd(e,t){return Eq(e.writeTree,vt(e.treePath,t))}function Sq(e,t,n,r,i,s){return Tq(e.writeTree,e.treePath,t,n,r,i,s)}function bb(e,t,n){return bq(e.writeTree,e.treePath,t,n)}function sP(e,t){return aP(vt(e.treePath,t),e.writeTree)}function aP(e,t){return{treePath:e,writeTree:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cq=function(){function e(){this.changeMap=new Map}return e.prototype.trackChildChange=function(t){var n=t.type,r=t.childName;z(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),z(r!==".priority","Only non-priority child changes can be tracked.");var i=this.changeMap.get(r);if(i){var s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,Pl(r,t.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,Nl(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,vu(r,t.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,Pl(r,t.snapshotNode,i.oldSnap));else throw Hu("Illegal combination of changes: "+t+" occurred after "+i)}else this.changeMap.set(r,t)},e.prototype.getChanges=function(){return Array.from(this.changeMap.values())},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Aq=function(){function e(){}return e.prototype.getCompleteChild=function(t){return null},e.prototype.getChildAfterChild=function(t,n,r){return null},e}(),uP=new Aq,Eb=function(){function e(t,n,r){r===void 0&&(r=null),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return e.prototype.getCompleteChild=function(t){var n=this.viewCache_.eventCache;if(n.isCompleteForChild(t))return n.getNode().getImmediateChild(t);var r=this.optCompleteServerCache_!=null?new Bo(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return bb(this.writes_,t,r)},e.prototype.getChildAfterChild=function(t,n,r){var i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Qs(this.viewCache_),s=Sq(this.writes_,i,n,1,r,t);return s.length===0?null:s[0]},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kq(e){return{filter:e}}function Rq(e,t){z(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),z(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function Nq(e,t,n,r,i){var s=new Cq,a,c;if(n.type===Xr.OVERWRITE){var l=n;l.source.fromUser?a=x_(e,t,l.path,l.snap,r,i,s):(z(l.source.fromServer,"Unknown source."),c=l.source.tagged||t.serverCache.isFiltered()&&!Oe(l.path),a=Od(e,t,l.path,l.snap,r,i,c,s))}else if(n.type===Xr.MERGE){var h=n;h.source.fromUser?a=Oq(e,t,h.path,h.children,r,i,s):(z(h.source.fromServer,"Unknown source."),c=h.source.tagged||t.serverCache.isFiltered(),a=L_(e,t,h.path,h.children,r,i,c,s))}else if(n.type===Xr.ACK_USER_WRITE){var d=n;d.revert?a=Lq(e,t,d.path,r,i,s):a=Dq(e,t,d.path,d.affectedTree,r,i,s)}else if(n.type===Xr.LISTEN_COMPLETE)a=xq(e,t,n.path,r,s);else throw Hu("Unknown operation type: "+n.type);var v=s.getChanges();return Pq(t,a,v),{viewCache:a,changes:v}}function Pq(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Rd(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(X1(Rd(t)))}}function cP(e,t,n,r,i,s){var a=t.eventCache;if(Pd(r,n)!=null)return t;var c=void 0,l=void 0;if(Oe(n))if(z(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var h=Qs(t),d=h instanceof Se?h:Se.EMPTY_NODE,v=wb(r,d);c=e.filter.updateFullNode(t.eventCache.getNode(),v,s)}else{var m=Nd(r,Qs(t));c=e.filter.updateFullNode(t.eventCache.getNode(),m,s)}else{var y=Pe(n);if(y===".priority"){z(Vo(n)===1,"Can't have a priority with additional path components");var w=a.getNode();l=t.serverCache.getNode();var E=uA(r,n,w,l);E!=null?c=e.filter.updatePriority(w,E):c=a.getNode()}else{var T=it(n),A=void 0;if(a.isCompleteForChild(y)){l=t.serverCache.getNode();var P=uA(r,n,a.getNode(),l);P!=null?A=a.getNode().getImmediateChild(y).updateChild(T,P):A=a.getNode().getImmediateChild(y)}else A=bb(r,y,t.serverCache);A!=null?c=e.filter.updateChild(a.getNode(),y,A,T,i,s):c=a.getNode()}}return sl(t,c,a.isFullyInitialized()||Oe(n),e.filter.filtersNodes())}function Od(e,t,n,r,i,s,a,c){var l=t.serverCache,h,d=a?e.filter:e.filter.getIndexedFilter();if(Oe(n))h=d.updateFullNode(l.getNode(),r,null);else if(d.filtersNodes()&&!l.isFiltered()){var v=l.getNode().updateChild(n,r);h=d.updateFullNode(l.getNode(),v,null)}else{var m=Pe(n);if(!l.isCompleteForPath(n)&&Vo(n)>1)return t;var y=it(n),w=l.getNode().getImmediateChild(m),E=w.updateChild(y,r);m===".priority"?h=d.updatePriority(l.getNode(),E):h=d.updateChild(l.getNode(),m,E,y,uP,null)}var T=nP(t,h,l.isFullyInitialized()||Oe(n),d.filtersNodes()),A=new Eb(i,T,s);return cP(e,T,n,i,A,c)}function x_(e,t,n,r,i,s,a){var c=t.eventCache,l,h,d=new Eb(i,t,s);if(Oe(n))h=e.filter.updateFullNode(t.eventCache.getNode(),r,a),l=sl(t,h,!0,e.filter.filtersNodes());else{var v=Pe(n);if(v===".priority")h=e.filter.updatePriority(t.eventCache.getNode(),r),l=sl(t,h,c.isFullyInitialized(),c.isFiltered());else{var m=it(n),y=c.getNode().getImmediateChild(v),w=void 0;if(Oe(m))w=r;else{var E=d.getCompleteChild(v);E!=null?lb(m)===".priority"&&E.getChild(q1(m)).isEmpty()?w=E:w=E.updateChild(m,r):w=Se.EMPTY_NODE}if(y.equals(w))l=t;else{var T=e.filter.updateChild(c.getNode(),v,w,m,d,a);l=sl(t,T,c.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function cA(e,t){return e.eventCache.isCompleteForChild(t)}function Oq(e,t,n,r,i,s,a){var c=t;return r.foreach(function(l,h){var d=vt(n,l);cA(t,Pe(d))&&(c=x_(e,c,d,h,i,s,a))}),r.foreach(function(l,h){var d=vt(n,l);cA(t,Pe(d))||(c=x_(e,c,d,h,i,s,a))}),c}function lA(e,t,n){return n.foreach(function(r,i){t=t.updateChild(r,i)}),t}function L_(e,t,n,r,i,s,a,c){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var l=t,h;Oe(n)?h=r:h=new _r(null).setTree(n,r);var d=t.serverCache.getNode();return h.children.inorderTraversal(function(v,m){if(d.hasChild(v)){var y=t.serverCache.getNode().getImmediateChild(v),w=lA(e,y,m);l=Od(e,l,new Qe(v),w,i,s,a,c)}}),h.children.inorderTraversal(function(v,m){var y=!t.serverCache.isCompleteForChild(v)&&m.value===void 0;if(!d.hasChild(v)&&!y){var w=t.serverCache.getNode().getImmediateChild(v),E=lA(e,w,m);l=Od(e,l,new Qe(v),E,i,s,a,c)}}),l}function Dq(e,t,n,r,i,s,a){if(Pd(i,n)!=null)return t;var c=t.serverCache.isFiltered(),l=t.serverCache;if(r.value!=null){if(Oe(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return Od(e,t,n,l.getNode().getChild(n),i,s,c,a);if(Oe(n)){var h=new _r(null);return l.getNode().forEachChild(_i,function(v,m){h=h.set(new Qe(v),m)}),L_(e,t,n,h,i,s,c,a)}else return t}else{var d=new _r(null);return r.foreach(function(v,m){var y=vt(n,v);l.isCompleteForPath(y)&&(d=d.set(v,l.getNode().getChild(y)))}),L_(e,t,n,d,i,s,c,a)}}function xq(e,t,n,r,i){var s=t.serverCache,a=nP(t,s.getNode(),s.isFullyInitialized()||Oe(n),s.isFiltered());return cP(e,a,n,r,uP,i)}function Lq(e,t,n,r,i,s){var a;if(Pd(r,n)!=null)return t;var c=new Eb(r,t,i),l=t.eventCache.getNode(),h=void 0;if(Oe(n)||Pe(n)===".priority"){var d=void 0;if(t.serverCache.isFullyInitialized())d=Nd(r,Qs(t));else{var v=t.serverCache.getNode();z(v instanceof Se,"serverChildren would be complete if leaf node"),d=wb(r,v)}d=d,h=e.filter.updateFullNode(l,d,s)}else{var m=Pe(n),y=bb(r,m,t.serverCache);y==null&&t.serverCache.isCompleteForChild(m)&&(y=l.getImmediateChild(m)),y!=null?h=e.filter.updateChild(l,m,y,it(n),c,s):t.eventCache.getNode().hasChild(m)?h=e.filter.updateChild(l,m,Se.EMPTY_NODE,it(n),c,s):h=l,h.isEmpty()&&t.serverCache.isFullyInitialized()&&(a=Nd(r,Qs(t)),a.isLeafNode()&&(h=e.filter.updateFullNode(h,a,s)))}return a=t.serverCache.isFullyInitialized()||Pd(r,ze())!=null,sl(t,h,a,e.filter.filtersNodes())}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mq=function(){function e(t,n){this.query_=t,this.eventRegistrations_=[];var r=this.query_._queryParams,i=new vb(r.getIndex()),s=$3(r);this.processor_=kq(s);var a=n.serverCache,c=n.eventCache,l=i.updateFullNode(Se.EMPTY_NODE,a.getNode(),null),h=s.updateFullNode(Se.EMPTY_NODE,c.getNode(),null),d=new Bo(l,a.isFullyInitialized(),i.filtersNodes()),v=new Bo(h,c.isFullyInitialized(),s.filtersNodes());this.viewCache_=Dp(v,d),this.eventGenerator_=new aq(this.query_)}return Object.defineProperty(e.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),e}();function Fq(e){return e.viewCache_.serverCache.getNode()}function Uq(e){return Rd(e.viewCache_)}function jq(e,t){var n=Qs(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!Oe(t)&&!n.getImmediateChild(Pe(t)).isEmpty())?n.getChild(t):null}function fA(e){return e.eventRegistrations_.length===0}function Vq(e,t){e.eventRegistrations_.push(t)}function hA(e,t,n){var r=[];if(n){z(t==null,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach(function(l){var h=l.createCancelEvent(n,i);h&&r.push(h)})}if(t){for(var s=[],a=0;a<e.eventRegistrations_.length;++a){var c=e.eventRegistrations_[a];if(!c.matches(t))s.push(c);else if(t.hasAnyCallback()){s=s.concat(e.eventRegistrations_.slice(a+1));break}}e.eventRegistrations_=s}else e.eventRegistrations_=[];return r}function dA(e,t,n,r){t.type===Xr.MERGE&&t.source.queryId!==null&&(z(Qs(e.viewCache_),"We should always have a full cache before handling merges"),z(Rd(e.viewCache_),"Missing event cache, even though we have a server cache"));var i=e.viewCache_,s=Nq(e.processor_,i,t,n,r);return Rq(e.processor_,s.viewCache),z(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,lP(e,s.changes,s.viewCache.eventCache.getNode(),null)}function Bq(e,t){var n=e.viewCache_.eventCache,r=[];if(!n.getNode().isLeafNode()){var i=n.getNode();i.forEachChild(st,function(s,a){r.push(vu(s,a))})}return n.isFullyInitialized()&&r.push(X1(n.getNode())),lP(e,r,n.getNode(),t)}function lP(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return uq(e.eventGenerator_,t,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dd,fP=function(){function e(){this.views=new Map}return e}();function qq(e){z(!Dd,"__referenceConstructor has already been defined"),Dd=e}function Hq(){return z(Dd,"Reference.ts has not been loaded"),Dd}function Kq(e){return e.views.size===0}function Tb(e,t,n,r){var i,s,a=t.source.queryId;if(a!==null){var c=e.views.get(a);return z(c!=null,"SyncTree gave us an op for an invalid query."),dA(c,t,n,r)}else{var l=[];try{for(var h=Xt(e.views.values()),d=h.next();!d.done;d=h.next()){var c=d.value;l=l.concat(dA(c,t,n,r))}}catch(v){i={error:v}}finally{try{d&&!d.done&&(s=h.return)&&s.call(h)}finally{if(i)throw i.error}}return l}}function hP(e,t,n,r,i){var s=t._queryIdentifier,a=e.views.get(s);if(!a){var c=Nd(n,i?r:null),l=!1;c?l=!0:r instanceof Se?(c=wb(n,r),l=!1):(c=Se.EMPTY_NODE,l=!1);var h=Dp(new Bo(c,l,!1),new Bo(r,i,!1));return new Mq(t,h)}return a}function Wq(e,t,n,r,i,s){var a=hP(e,t,r,i,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,a),Vq(a,n),Bq(a,n)}function Gq(e,t,n,r){var i,s,a=t._queryIdentifier,c=[],l=[],h=qo(e);if(a==="default")try{for(var d=Xt(e.views.entries()),v=d.next();!v.done;v=d.next()){var m=an(v.value,2),y=m[0],w=m[1];l=l.concat(hA(w,n,r)),fA(w)&&(e.views.delete(y),w.query._queryParams.loadsAllData()||c.push(w.query))}}catch(E){i={error:E}}finally{try{v&&!v.done&&(s=d.return)&&s.call(d)}finally{if(i)throw i.error}}else{var w=e.views.get(a);w&&(l=l.concat(hA(w,n,r)),fA(w)&&(e.views.delete(a),w.query._queryParams.loadsAllData()||c.push(w.query)))}return h&&!qo(e)&&c.push(new(Hq())(t._repo,t._path)),{removed:c,events:l}}function dP(e){var t,n,r=[];try{for(var i=Xt(e.views.values()),s=i.next();!s.done;s=i.next()){var a=s.value;a.query._queryParams.loadsAllData()||r.push(a)}}catch(c){t={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}function xo(e,t){var n,r,i=null;try{for(var s=Xt(e.views.values()),a=s.next();!a.done;a=s.next()){var c=a.value;i=i||jq(c,t)}}catch(l){n={error:l}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return i}function pP(e,t){var n=t._queryParams;if(n.loadsAllData())return Lp(e);var r=t._queryIdentifier;return e.views.get(r)}function vP(e,t){return pP(e,t)!=null}function qo(e){return Lp(e)!=null}function Lp(e){var t,n;try{for(var r=Xt(e.views.values()),i=r.next();!i.done;i=r.next()){var s=i.value;if(s.query._queryParams.loadsAllData())return s}}catch(a){t={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xd;function zq(e){z(!xd,"__referenceConstructor has already been defined"),xd=e}function $q(){return z(xd,"Reference.ts has not been loaded"),xd}var Qq=1,pA=function(){function e(t){this.listenProvider_=t,this.syncPointTree_=new _r(null),this.pendingWriteTree_=Iq(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return e}();function Ib(e,t,n,r,i){return hq(e.pendingWriteTree_,t,n,r,i),i?zu(e,new Op(gb(),t,n)):[]}function Yq(e,t,n,r){dq(e.pendingWriteTree_,t,n,r);var i=_r.fromObject(n);return zu(e,new _b(gb(),t,i))}function Ro(e,t,n){n===void 0&&(n=!1);var r=pq(e.pendingWriteTree_,t),i=vq(e.pendingWriteTree_,t);if(i){var s=new _r(null);return r.snap!=null?s=s.set(ze(),!0):qt(r.children,function(a){s=s.set(new Qe(a),!0)}),zu(e,new sq(r.path,s,n))}else return[]}function af(e,t,n){return zu(e,new Op(mb(),t,n))}function Xq(e,t,n){var r=_r.fromObject(n);return zu(e,new _b(mb(),t,r))}function Jq(e,t){return zu(e,new tP(mb(),t))}function Zq(e,t,n){var r=Sb(e,n);if(r){var i=Cb(r),s=i.path,a=i.queryId,c=Vn(s,t),l=new tP(yb(a),c);return Ab(e,s,l)}else return[]}function M_(e,t,n,r){var i=t._path,s=e.syncPointTree_.get(i),a=[];if(s&&(t._queryIdentifier==="default"||vP(s,t))){var c=Gq(s,t,n,r);Kq(s)&&(e.syncPointTree_=e.syncPointTree_.remove(i));var l=c.removed;a=c.events;var h=l.findIndex(function(P){return P._queryParams.loadsAllData()})!==-1,d=e.syncPointTree_.findOnPath(i,function(P,O){return qo(O)});if(h&&!d){var v=e.syncPointTree_.subtree(i);if(!v.isEmpty())for(var m=rH(v),y=0;y<m.length;++y){var w=m[y],E=w.query,T=yP(e,w);e.listenProvider_.startListening(ul(E),Ld(e,E),T.hashFn,T.onComplete)}}if(!d&&l.length>0&&!r)if(h){var A=null;e.listenProvider_.stopListening(ul(t),A)}else l.forEach(function(P){var O=e.queryToTagMap.get(Fp(P));e.listenProvider_.stopListening(ul(P),O)});iH(e,l)}return a}function eH(e,t,n,r){var i=Sb(e,r);if(i!=null){var s=Cb(i),a=s.path,c=s.queryId,l=Vn(a,t),h=new Op(yb(c),l,n);return Ab(e,a,h)}else return[]}function tH(e,t,n,r){var i=Sb(e,r);if(i){var s=Cb(i),a=s.path,c=s.queryId,l=Vn(a,t),h=_r.fromObject(n),d=new _b(yb(c),l,h);return Ab(e,a,d)}else return[]}function vA(e,t,n){var r=t._path,i=null,s=!1;e.syncPointTree_.foreachOnPath(r,function(E,T){var A=Vn(E,r);i=i||xo(T,A),s=s||qo(T)});var a=e.syncPointTree_.get(r);a?(s=s||qo(a),i=i||xo(a,ze())):(a=new fP,e.syncPointTree_=e.syncPointTree_.set(r,a));var c;if(i!=null)c=!0;else{c=!1,i=Se.EMPTY_NODE;var l=e.syncPointTree_.subtree(r);l.foreachChild(function(E,T){var A=xo(T,ze());A&&(i=i.updateImmediateChild(E,A))})}var h=vP(a,t);if(!h&&!t._queryParams.loadsAllData()){var d=Fp(t);z(!e.queryToTagMap.has(d),"View does not exist, but we have a tag");var v=oH();e.queryToTagMap.set(d,v),e.tagToQueryMap.set(v,d)}var m=xp(e.pendingWriteTree_,r),y=Wq(a,t,n,m,i,c);if(!h&&!s){var w=pP(a,t);y=y.concat(sH(e,t,w))}return y}function Mp(e,t,n){var r=!0,i=e.pendingWriteTree_,s=e.syncPointTree_.findOnPath(t,function(a,c){var l=Vn(a,t),h=xo(c,l);if(h)return h});return oP(i,t,s,n,r)}function nH(e,t){var n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,function(h,d){var v=Vn(h,n);r=r||xo(d,v)});var i=e.syncPointTree_.get(n);i?r=r||xo(i,ze()):(i=new fP,e.syncPointTree_=e.syncPointTree_.set(n,i));var s=r!=null,a=s?new Bo(r,!0,!1):null,c=xp(e.pendingWriteTree_,t._path),l=hP(i,t,c,s?a.getNode():Se.EMPTY_NODE,s);return Uq(l)}function zu(e,t){return gP(t,e.syncPointTree_,null,xp(e.pendingWriteTree_,ze()))}function gP(e,t,n,r){if(Oe(e.path))return mP(e,t,n,r);var i=t.get(ze());n==null&&i!=null&&(n=xo(i,ze()));var s=[],a=Pe(e.path),c=e.operationForChild(a),l=t.children.get(a);if(l&&c){var h=n?n.getImmediateChild(a):null,d=sP(r,a);s=s.concat(gP(c,l,h,d))}return i&&(s=s.concat(Tb(i,e,r,n))),s}function mP(e,t,n,r){var i=t.get(ze());n==null&&i!=null&&(n=xo(i,ze()));var s=[];return t.children.inorderTraversal(function(a,c){var l=n?n.getImmediateChild(a):null,h=sP(r,a),d=e.operationForChild(a);d&&(s=s.concat(mP(d,c,l,h)))}),i&&(s=s.concat(Tb(i,e,r,n))),s}function yP(e,t){var n=t.query,r=Ld(e,n);return{hashFn:function(){var i=Fq(t)||Se.EMPTY_NODE;return i.hash()},onComplete:function(i){if(i==="ok")return r?Zq(e,n._path,r):Jq(e,n._path);var s=WB(i,n);return M_(e,n,null,s)}}}function Ld(e,t){var n=Fp(t);return e.queryToTagMap.get(n)}function Fp(e){return e._path.toString()+"$"+e._queryIdentifier}function Sb(e,t){return e.tagToQueryMap.get(t)}function Cb(e){var t=e.indexOf("$");return z(t!==-1&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Qe(e.substr(0,t))}}function Ab(e,t,n){var r=e.syncPointTree_.get(t);z(r,"Missing sync point for query tag that we're tracking");var i=xp(e.pendingWriteTree_,t);return Tb(r,n,i,null)}function rH(e){return e.fold(function(t,n,r){if(n&&qo(n)){var i=Lp(n);return[i]}else{var s=[];return n&&(s=dP(n)),qt(r,function(a,c){s=s.concat(c)}),s}})}function ul(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new($q())(e._repo,e._path):e}function iH(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=Fp(r),s=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(s)}}}function oH(){return Qq++}function sH(e,t,n){var r=t._path,i=Ld(e,t),s=yP(e,n),a=e.listenProvider_.startListening(ul(t),i,s.hashFn,s.onComplete),c=e.syncPointTree_.subtree(r);if(i)z(!qo(c.value),"If we're adding a query, it shouldn't be shadowed");else for(var l=c.fold(function(v,m,y){if(!Oe(v)&&m&&qo(m))return[Lp(m).query];var w=[];return m&&(w=w.concat(dP(m).map(function(E){return E.query}))),qt(y,function(E,T){w=w.concat(T)}),w}),h=0;h<l.length;++h){var d=l[h];e.listenProvider_.stopListening(ul(d),Ld(e,d))}return a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var aH=function(){function e(t){this.node_=t}return e.prototype.getImmediateChild=function(t){var n=this.node_.getImmediateChild(t);return new e(n)},e.prototype.node=function(){return this.node_},e}(),uH=function(){function e(t,n){this.syncTree_=t,this.path_=n}return e.prototype.getImmediateChild=function(t){var n=vt(this.path_,t);return new e(this.syncTree_,n)},e.prototype.node=function(){return Mp(this.syncTree_,this.path_)},e}(),cH=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},gA=function(e,t,n){if(!e||typeof e!="object")return e;if(z(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return lH(e[".sv"],t,n);if(typeof e[".sv"]=="object")return fH(e[".sv"],t);z(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},lH=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:z(!1,"Unexpected server value: "+e)}},fH=function(e,t,n){e.hasOwnProperty("increment")||z(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;typeof r!="number"&&z(!1,"Unexpected increment value: "+r);var i=t.node();if(z(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var s=i,a=s.getValue();return typeof a!="number"?r:a+r},_P=function(e,t,n,r){return Rb(t,new uH(n,e),r)},kb=function(e,t,n){return Rb(e,new aH(t),n)};function Rb(e,t,n){var r=e.getPriority().val(),i=gA(r,t.getImmediateChild(".priority"),n),s;if(e.isLeafNode()){var a=e,c=gA(a.getValue(),t,n);return c!==a.getValue()||i!==a.getPriority().val()?new du(c,yt(i)):e}else{var l=e;return s=l,i!==l.getPriority().val()&&(s=s.updatePriority(new du(i))),l.forEachChild(st,function(h,d){var v=Rb(d,t.getImmediateChild(h),n);v!==d&&(s=s.updateImmediateChild(h,v))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nb=function(){function e(t,n,r){t===void 0&&(t=""),n===void 0&&(n=null),r===void 0&&(r={children:{},childCount:0}),this.name=t,this.parent=n,this.node=r}return e}();function Up(e,t){for(var n=t instanceof Qe?t:new Qe(t),r=e,i=Pe(n);i!==null;){var s=$s(r.node.children,i)||{children:{},childCount:0};r=new Nb(i,r,s),n=it(n),i=Pe(n)}return r}function ca(e){return e.node.value}function Pb(e,t){e.node.value=t,F_(e)}function wP(e){return e.node.childCount>0}function hH(e){return ca(e)===void 0&&!wP(e)}function jp(e,t){qt(e.node.children,function(n,r){t(new Nb(n,e,r))})}function bP(e,t,n,r){n&&!r&&t(e),jp(e,function(i){bP(i,t,!0,r)}),n&&r&&t(e)}function dH(e,t,n){for(var r=n?e:e.parent;r!==null;){if(t(r))return!0;r=r.parent}return!1}function uf(e){return new Qe(e.parent===null?e.name:uf(e.parent)+"/"+e.name)}function F_(e){e.parent!==null&&pH(e.parent,e.name,e)}function pH(e,t,n){var r=hH(n),i=yr(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,F_(e)):!r&&!i&&(e.node.children[t]=n.node,e.node.childCount++,F_(e))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vH=/[\[\].#$\/\u0000-\u001F\u007F]/,gH=/[\[\].#$\u0000-\u001F\u007F]/,Ty=10*1024*1024,Vp=function(e){return typeof e=="string"&&e.length!==0&&!vH.test(e)},EP=function(e){return typeof e=="string"&&e.length!==0&&!gH.test(e)},mH=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),EP(e)},Ol=function(e){return e===null||typeof e=="string"||typeof e=="number"&&!Rp(e)||e&&typeof e=="object"&&yr(e,".sv")},Ai=function(e,t,n,r){r&&t===void 0||cf(er(e,"value"),t,n)},cf=function(e,t,n){var r=n instanceof Qe?new S3(n,e):n;if(t===void 0)throw new Error(e+"contains undefined "+Ts(r));if(typeof t=="function")throw new Error(e+"contains a function "+Ts(r)+" with contents = "+t.toString());if(Rp(t))throw new Error(e+"contains "+t.toString()+" "+Ts(r));if(typeof t=="string"&&t.length>Ty/3&&kp(t)>Ty)throw new Error(e+"contains a string greater than "+Ty+" utf8 bytes "+Ts(r)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){var i=!1,s=!1;if(qt(t,function(a,c){if(a===".value")i=!0;else if(a!==".priority"&&a!==".sv"&&(s=!0,!Vp(a)))throw new Error(e+" contains an invalid key ("+a+") "+Ts(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);C3(r,a),cf(e,c,r),A3(r)}),i&&s)throw new Error(e+' contains ".value" child '+Ts(r)+" in addition to actual children.")}},yH=function(e,t){var n,r;for(n=0;n<t.length;n++){r=t[n];for(var i=Rl(r),s=0;s<i.length;s++)if(!(i[s]===".priority"&&s===i.length-1)){if(!Vp(i[s]))throw new Error(e+"contains an invalid key ("+i[s]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}t.sort(I3);var a=null;for(n=0;n<t.length;n++){if(r=t[n],a!==null&&Cr(a,r))throw new Error(e+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}},TP=function(e,t,n,r){if(!(r&&t===void 0)){var i=er(e,"values");if(!(t&&typeof t=="object")||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");var s=[];qt(t,function(a,c){var l=new Qe(a);if(cf(i,c,vt(n,l)),lb(l)===".priority"&&!Ol(c))throw new Error(i+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(l)}),yH(i,s)}},Ob=function(e,t,n){if(!(n&&t===void 0)){if(Rp(t))throw new Error(er(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Ol(t))throw new Error(er(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},_H=function(e,t,n){if(!(n&&t===void 0))switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(er(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},lf=function(e,t,n,r){if(!(r&&n===void 0)&&!Vp(n))throw new Error(er(e,t)+'was an invalid key = "'+n+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},Dl=function(e,t,n,r){if(!(r&&n===void 0)&&!EP(n))throw new Error(er(e,t)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},wH=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Dl(e,t,n,r)},Ar=function(e,t){if(Pe(t)===".info")throw new Error(e+" failed = Can't modify data under /.info/")},IP=function(e,t){var n=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!Vp(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!mH(n))throw new Error(er(e,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)},bH=function(e,t,n,r){if(!(r&&n===void 0)&&typeof n!="boolean")throw new Error(er(e,t)+"must be a boolean.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var EH=function(){function e(){this.eventLists_=[],this.recursionDepth_=0}return e}();function Bp(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],s=i.getPath();n!==null&&!fb(s,n.path)&&(e.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&e.eventLists_.push(n)}function Db(e,t,n){Bp(e,n),SP(e,function(r){return fb(r,t)})}function Lr(e,t,n){Bp(e,n),SP(e,function(r){return Cr(r,t)||Cr(t,r)})}function SP(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i){var s=i.path;t(s)?(TH(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function TH(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(n!==null){e.events[t]=null;var r=n.getEventRunner();Bs&&Gt("event: "+n.toString()),Wu(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var CP="repo_interrupt",IH=25,SH=function(){function e(t,n,r,i){this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new EH,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=kd(),this.transactionQueueTree_=new Nb,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return e.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},e}();function CH(e,t,n){if(e.stats_=ub(e.repoInfo_),e.forceRestClient_||zB())e.server_=new Z3(e.repoInfo_,function(r,i,s,a){mA(e,r,i,s,a)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(function(){return yA(e,!0)},0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ut(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new qs(e.repoInfo_,t,function(r,i,s,a){mA(e,r,i,s,a)},function(r){yA(e,r)},function(r){kH(e,r)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(function(r){e.server_.refreshAuthToken(r)}),e.appCheckProvider_.addTokenChangeListener(function(r){e.server_.refreshAppCheckToken(r.token)}),e.statsReporter_=ZB(e.repoInfo_,function(){return new iq(e.stats_,e.server_)}),e.infoData_=new eq,e.infoSyncTree_=new pA({startListening:function(r,i,s,a){var c=[],l=e.infoData_.getNode(r._path);return l.isEmpty()||(c=af(e.infoSyncTree_,r._path,l),setTimeout(function(){a("ok")},0)),c},stopListening:function(){}}),xb(e,"connected",!1),e.serverSyncTree_=new pA({startListening:function(r,i,s,a){return e.server_.listen(r,s,i,function(c,l){var h=a(c,l);Lr(e.eventQueue_,r._path,h)}),[]},stopListening:function(r,i){e.server_.unlisten(r,i)}})}function AP(e){var t=e.infoData_.getNode(new Qe(".info/serverTimeOffset")),n=t.val()||0;return new Date().getTime()+n}function ff(e){return cH({timestamp:AP(e)})}function mA(e,t,n,r,i){e.dataUpdateCount++;var s=new Qe(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var a=[];if(i)if(r){var c=Ed(n,function(m){return yt(m)});a=tH(e.serverSyncTree_,s,c,i)}else{var l=yt(n);a=eH(e.serverSyncTree_,s,l,i)}else if(r){var h=Ed(n,function(m){return yt(m)});a=Xq(e.serverSyncTree_,s,h)}else{var d=yt(n);a=af(e.serverSyncTree_,s,d)}var v=s;a.length>0&&(v=mu(e,s)),Lr(e.eventQueue_,v,a)}function AH(e,t){e.interceptServerDataCallback_=t}function yA(e,t){xb(e,"connected",t),t===!1&&PH(e)}function kH(e,t){qt(t,function(n,r){xb(e,n,r)})}function xb(e,t,n){var r=new Qe("/.info/"+t),i=yt(n);e.infoData_.updateSnapshot(r,i);var s=af(e.infoSyncTree_,r,i);Lr(e.eventQueue_,r,s)}function qp(e){return e.nextWriteId_++}function RH(e,t){var n=nH(e.serverSyncTree_,t);return n!=null?Promise.resolve(n):e.server_.get(t).then(function(r){var i=yt(r).withIndex(t._queryParams.getIndex()),s=af(e.serverSyncTree_,t._path,i);return Db(e.eventQueue_,t._path,s),Promise.resolve(i)},function(r){return $u(e,"get for query "+Ut(t)+" failed: "+r),Promise.reject(new Error(r))})}function Lb(e,t,n,r,i){$u(e,"set",{path:t.toString(),value:n,priority:r});var s=ff(e),a=yt(n,r),c=Mp(e.serverSyncTree_,t),l=kb(a,c,s),h=qp(e),d=Ib(e.serverSyncTree_,t,l,h,!0);Bp(e.eventQueue_,d),e.server_.put(t.toString(),a.val(!0),function(m,y){var w=m==="ok";w||cn("set at "+t+" failed: "+m);var E=Ro(e.serverSyncTree_,h,!w);Lr(e.eventQueue_,t,E),Ho(e,i,m,y)});var v=Fb(e,t);mu(e,v),Lr(e.eventQueue_,v,[])}function NH(e,t,n,r){$u(e,"update",{path:t.toString(),value:n});var i=!0,s=ff(e),a={};if(qt(n,function(h,d){i=!1,a[h]=_P(vt(t,h),yt(d),e.serverSyncTree_,s)}),i)Gt("update() called with empty data.  Don't do anything."),Ho(e,r,"ok",void 0);else{var c=qp(e),l=Yq(e.serverSyncTree_,t,a,c);Bp(e.eventQueue_,l),e.server_.merge(t.toString(),n,function(h,d){var v=h==="ok";v||cn("update at "+t+" failed: "+h);var m=Ro(e.serverSyncTree_,c,!v),y=m.length>0?mu(e,t):t;Lr(e.eventQueue_,y,m),Ho(e,r,h,d)}),qt(n,function(h){var d=Fb(e,vt(t,h));mu(e,d)}),Lr(e.eventQueue_,t,[])}}function PH(e){$u(e,"onDisconnectEvents");var t=ff(e),n=kd();N_(e.onDisconnect_,ze(),function(i,s){var a=_P(i,s,e.serverSyncTree_,t);Gu(n,i,a)});var r=[];N_(n,ze(),function(i,s){r=r.concat(af(e.serverSyncTree_,i,s));var a=Fb(e,i);mu(e,a)}),e.onDisconnect_=kd(),Lr(e.eventQueue_,ze(),r)}function OH(e,t,n){e.server_.onDisconnectCancel(t.toString(),function(r,i){r==="ok"&&R_(e.onDisconnect_,t),Ho(e,n,r,i)})}function _A(e,t,n,r){var i=yt(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),function(s,a){s==="ok"&&Gu(e.onDisconnect_,t,i),Ho(e,r,s,a)})}function DH(e,t,n,r,i){var s=yt(n,r);e.server_.onDisconnectPut(t.toString(),s.val(!0),function(a,c){a==="ok"&&Gu(e.onDisconnect_,t,s),Ho(e,i,a,c)})}function xH(e,t,n,r){if(w_(n)){Gt("onDisconnect().update() called with empty data.  Don't do anything."),Ho(e,r,"ok",void 0);return}e.server_.onDisconnectMerge(t.toString(),n,function(i,s){i==="ok"&&qt(n,function(a,c){var l=yt(c);Gu(e.onDisconnect_,vt(t,a),l)}),Ho(e,r,i,s)})}function LH(e,t,n){var r;Pe(t._path)===".info"?r=vA(e.infoSyncTree_,t,n):r=vA(e.serverSyncTree_,t,n),Db(e.eventQueue_,t._path,r)}function U_(e,t,n){var r;Pe(t._path)===".info"?r=M_(e.infoSyncTree_,t,n):r=M_(e.serverSyncTree_,t,n),Db(e.eventQueue_,t._path,r)}function kP(e){e.persistentConnection_&&e.persistentConnection_.interrupt(CP)}function MH(e){e.persistentConnection_&&e.persistentConnection_.resume(CP)}function FH(e,t){if(t===void 0&&(t=!1),!(typeof console>"u")){var n;t?(e.statsListener_||(e.statsListener_=new eP(e.stats_)),n=e.statsListener_.get()):n=e.stats_.get();var r=Object.keys(n).reduce(function(i,s){return Math.max(s.length,i)},0);qt(n,function(i,s){for(var a=i,c=i.length;c<r+2;c++)a+=" ";console.log(a+s)})}}function UH(e,t){e.stats_.incrementCounter(t),oq(e.statsReporter_,t)}function $u(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r="";e.persistentConnection_&&(r=e.persistentConnection_.id+":"),Gt.apply(void 0,Ne([r],an(t)))}function Ho(e,t,n,r){t&&Wu(function(){if(n==="ok")t(null);else{var i=(n||"error").toUpperCase(),s=i;r&&(s+=": "+r);var a=new Error(s);a.code=i,t(a)}})}function jH(e,t,n,r,i,s){$u(e,"transaction on "+t);var a={path:t,update:n,onComplete:r,status:null,order:_1(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},c=Mb(e,t,void 0);a.currentInputSnapshot=c;var l=a.update(c.val());if(l===void 0)a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete&&a.onComplete(null,!1,a.currentInputSnapshot);else{cf("transaction failed: Data returned ",l,a.path),a.status=0;var h=Up(e.transactionQueueTree_,t),d=ca(h)||[];d.push(a),Pb(h,d);var v=void 0;if(typeof l=="object"&&l!==null&&yr(l,".priority"))v=$s(l,".priority"),z(Ol(v),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else{var m=Mp(e.serverSyncTree_,t)||Se.EMPTY_NODE;v=m.getPriority().val()}var y=ff(e),w=yt(l,v),E=kb(w,c,y);a.currentOutputSnapshotRaw=w,a.currentOutputSnapshotResolved=E,a.currentWriteId=qp(e);var T=Ib(e.serverSyncTree_,t,E,a.currentWriteId,a.applyLocally);Lr(e.eventQueue_,t,T),Hp(e,e.transactionQueueTree_)}}function Mb(e,t,n){return Mp(e.serverSyncTree_,t,n)||Se.EMPTY_NODE}function Hp(e,t){if(t===void 0&&(t=e.transactionQueueTree_),t||Kp(e,t),ca(t)){var n=NP(e,t);z(n.length>0,"Sending zero length transaction queue");var r=n.every(function(i){return i.status===0});r&&VH(e,uf(t),n)}else wP(t)&&jp(t,function(i){Hp(e,i)})}function VH(e,t,n){for(var r=n.map(function(m){return m.currentWriteId}),i=Mb(e,t,r),s=i,a=i.hash(),c=0;c<n.length;c++){var l=n[c];z(l.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),l.status=1,l.retryCount++;var h=Vn(t,l.path);s=s.updateChild(h,l.currentOutputSnapshotRaw)}var d=s.val(!0),v=t;e.server_.put(v.toString(),d,function(m){$u(e,"transaction put response",{path:v.toString(),status:m});var y=[];if(m==="ok"){for(var w=[],E=function(A){n[A].status=2,y=y.concat(Ro(e.serverSyncTree_,n[A].currentWriteId)),n[A].onComplete&&w.push(function(){return n[A].onComplete(null,!0,n[A].currentOutputSnapshotResolved)}),n[A].unwatcher()},T=0;T<n.length;T++)E(T);Kp(e,Up(e.transactionQueueTree_,t)),Hp(e,e.transactionQueueTree_),Lr(e.eventQueue_,t,y);for(var T=0;T<w.length;T++)Wu(w[T])}else{if(m==="datastale")for(var T=0;T<n.length;T++)n[T].status===3?n[T].status=4:n[T].status=0;else{cn("transaction at "+v.toString()+" failed: "+m);for(var T=0;T<n.length;T++)n[T].status=4,n[T].abortReason=m}mu(e,t)}},a)}function mu(e,t){var n=RP(e,t),r=uf(n),i=NP(e,n);return BH(e,i,r),r}function BH(e,t,n){if(t.length!==0){for(var r=[],i=[],s=t.filter(function(h){return h.status===0}),a=s.map(function(h){return h.currentWriteId}),c=function(h){var d=t[h],v=Vn(n,d.path),m=!1,y;if(z(v!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),d.status===4)m=!0,y=d.abortReason,i=i.concat(Ro(e.serverSyncTree_,d.currentWriteId,!0));else if(d.status===0)if(d.retryCount>=IH)m=!0,y="maxretry",i=i.concat(Ro(e.serverSyncTree_,d.currentWriteId,!0));else{var w=Mb(e,d.path,a);d.currentInputSnapshot=w;var E=t[h].update(w.val());if(E!==void 0){cf("transaction failed: Data returned ",E,d.path);var T=yt(E),A=typeof E=="object"&&E!=null&&yr(E,".priority");A||(T=T.updatePriority(w.getPriority()));var P=d.currentWriteId,O=ff(e),H=kb(T,w,O);d.currentOutputSnapshotRaw=T,d.currentOutputSnapshotResolved=H,d.currentWriteId=qp(e),a.splice(a.indexOf(P),1),i=i.concat(Ib(e.serverSyncTree_,d.path,H,d.currentWriteId,d.applyLocally)),i=i.concat(Ro(e.serverSyncTree_,P,!0))}else m=!0,y="nodata",i=i.concat(Ro(e.serverSyncTree_,d.currentWriteId,!0))}Lr(e.eventQueue_,n,i),i=[],m&&(t[h].status=2,function(K){setTimeout(K,Math.floor(0))}(t[h].unwatcher),t[h].onComplete&&(y==="nodata"?r.push(function(){return t[h].onComplete(null,!1,t[h].currentInputSnapshot)}):r.push(function(){return t[h].onComplete(new Error(y),!1,null)})))},l=0;l<t.length;l++)c(l);Kp(e,e.transactionQueueTree_);for(var l=0;l<r.length;l++)Wu(r[l]);Hp(e,e.transactionQueueTree_)}}function RP(e,t){var n,r=e.transactionQueueTree_;for(n=Pe(t);n!==null&&ca(r)===void 0;)r=Up(r,n),t=it(t),n=Pe(t);return r}function NP(e,t){var n=[];return PP(e,t,n),n.sort(function(r,i){return r.order-i.order}),n}function PP(e,t,n){var r=ca(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);jp(t,function(s){PP(e,s,n)})}function Kp(e,t){var n=ca(t);if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,Pb(t,n.length>0?n:void 0)}jp(t,function(s){Kp(e,s)})}function Fb(e,t){var n=uf(RP(e,t)),r=Up(e.transactionQueueTree_,t);return dH(r,function(i){Iy(e,i)}),Iy(e,r),bP(r,function(i){Iy(e,i)}),n}function Iy(e,t){var n=ca(t);if(n){for(var r=[],i=[],s=-1,a=0;a<n.length;a++)n[a].status===3||(n[a].status===1?(z(s===a-1,"All SENT items should be at beginning of queue."),s=a,n[a].status=3,n[a].abortReason="set"):(z(n[a].status===0,"Unexpected transaction status in abort"),n[a].unwatcher(),i=i.concat(Ro(e.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));s===-1?Pb(t,void 0):n.length=s+1,Lr(e.eventQueue_,uf(t),i);for(var a=0;a<r.length;a++)Wu(r[a])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qH(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}t+="/"+i}return t}function HH(e){var t,n,r={};e.charAt(0)==="?"&&(e=e.substring(1));try{for(var i=Xt(e.split("&")),s=i.next();!s.done;s=i.next()){var a=s.value;if(a.length!==0){var c=a.split("=");c.length===2?r[decodeURIComponent(c[0])]=decodeURIComponent(c[1]):cn("Invalid query segment '"+a+"' in query '"+e+"'")}}}catch(l){t={error:l}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}var j_=function(e,t){var n=KH(e),r=n.namespace;n.domain==="firebase.com"&&Si(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Si("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||VB();var i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new ab(n.host,n.secure,r,t,i,"",r!==n.subdomain),path:new Qe(n.pathString)}},KH=function(e){var t="",n="",r="",i="",s="",a=!0,c="https",l=443;if(typeof e=="string"){var h=e.indexOf("//");h>=0&&(c=e.substring(0,h-1),e=e.substring(h+2));var d=e.indexOf("/");d===-1&&(d=e.length);var v=e.indexOf("?");v===-1&&(v=e.length),t=e.substring(0,Math.min(d,v)),d<v&&(i=qH(e.substring(d,v)));var m=HH(e.substring(Math.min(e.length,v)));h=t.indexOf(":"),h>=0?(a=c==="https"||c==="wss",l=parseInt(t.substring(h+1),10)):h=t.length;var y=t.slice(0,h);if(y.toLowerCase()==="localhost")n="localhost";else if(y.split(".").length<=2)n=y;else{var w=t.indexOf(".");r=t.substring(0,w).toLowerCase(),n=t.substring(w+1),s=r}"ns"in m&&(s=m.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:a,scheme:c,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var OP=function(){function e(t,n,r,i){this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}return e.prototype.getPath=function(){var t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path},e.prototype.getEventType=function(){return this.eventType},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Ut(this.snapshot.exportVal())},e}(),DP=function(){function e(t,n,r){this.eventRegistration=t,this.error=n,this.path=r}return e.prototype.getPath=function(){return this.path},e.prototype.getEventType=function(){return"cancel"},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.path.toString()+":cancel"},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xP=function(){function e(t,n){this.snapshotCallback=t,this.cancelCallback=n}return e.prototype.onValue=function(t,n){this.snapshotCallback.call(null,t,n)},e.prototype.onCancel=function(t){return z(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)},Object.defineProperty(e.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),e.prototype.matches=function(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context},e}();/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var WH=function(){function e(t,n){this._repo=t,this._path=n}return e.prototype.cancel=function(){var t=new Qt;return OH(this._repo,this._path,t.wrapCallback(function(){})),t.promise},e.prototype.remove=function(){Ar("OnDisconnect.remove",this._path);var t=new Qt;return _A(this._repo,this._path,null,t.wrapCallback(function(){})),t.promise},e.prototype.set=function(t){Ar("OnDisconnect.set",this._path),Ai("OnDisconnect.set",t,this._path,!1);var n=new Qt;return _A(this._repo,this._path,t,n.wrapCallback(function(){})),n.promise},e.prototype.setWithPriority=function(t,n){Ar("OnDisconnect.setWithPriority",this._path),Ai("OnDisconnect.setWithPriority",t,this._path,!1),Ob("OnDisconnect.setWithPriority",n,!1);var r=new Qt;return DH(this._repo,this._path,t,n,r.wrapCallback(function(){})),r.promise},e.prototype.update=function(t){Ar("OnDisconnect.update",this._path),TP("OnDisconnect.update",t,this._path,!1);var n=new Qt;return xH(this._repo,this._path,t,n.wrapCallback(function(){})),n.promise},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fr=function(){function e(t,n,r,i){this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return Object.defineProperty(e.prototype,"key",{get:function(){return Oe(this._path)?null:lb(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new Ri(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_queryIdentifier",{get:function(){var t=iA(this._queryParams),n=ib(t);return n==="{}"?"default":n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_queryObject",{get:function(){return iA(this._queryParams)},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){if(t=Re(t),!(t instanceof e))return!1;var n=this._repo===t._repo,r=fb(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i},e.prototype.toJSON=function(){return this.toString()},e.prototype.toString=function(){return this._repo.toString()+T3(this._path)},e}();function Wp(e,t){if(e._orderByCalled===!0)throw new Error(t+": You can't combine multiple orderBy calls.")}function Go(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===_i){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){var s=e.getIndexStartName();if(s!==Yi)throw new Error(r);if(typeof t!="string")throw new Error(i)}if(e.hasEnd()){var a=e.getIndexEndName();if(a!==Ci)throw new Error(r);if(typeof n!="string")throw new Error(i)}}else if(e.getIndex()===st){if(t!=null&&!Ol(t)||n!=null&&!Ol(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(z(e.getIndex()instanceof db||e.getIndex()===pb,"unknown index type."),t!=null&&typeof t=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Gp(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Ri=function(e){te(t,e);function t(n,r){return e.call(this,n,r,new Z1,!1)||this}return Object.defineProperty(t.prototype,"parent",{get:function(){var n=q1(this._path);return n===null?null:new t(this._repo,n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){for(var n=this;n.parent!==null;)n=n.parent;return n},enumerable:!1,configurable:!0}),t}(Fr),zp=function(){function e(t,n,r){this._node=t,this.ref=n,this._index=r}return Object.defineProperty(e.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),e.prototype.child=function(t){var n=new Qe(t),r=Ys(this.ref,t);return new e(this._node.getChild(n),r,st)},e.prototype.exists=function(){return!this._node.isEmpty()},e.prototype.exportVal=function(){return this._node.val(!0)},e.prototype.forEach=function(t){var n=this;if(this._node.isLeafNode())return!1;var r=this._node;return!!r.forEachChild(this._index,function(i,s){return t(new e(s,Ys(n.ref,i),st))})},e.prototype.hasChild=function(t){var n=new Qe(t);return!this._node.getChild(n).isEmpty()},e.prototype.hasChildren=function(){return this._node.isLeafNode()?!1:!this._node.isEmpty()},e.prototype.toJSON=function(){return this.exportVal()},e.prototype.val=function(){return this._node.val()},e}();function LP(e,t){return e=Re(e),e._checkNotDeleted("ref"),t!==void 0?Ys(e._root,t):e._root}function wA(e,t){e=Re(e),e._checkNotDeleted("refFromURL");var n=j_(t,e._repo.repoInfo_.nodeAdmin);IP("refFromURL",n);var r=n.repoInfo;return!e._repo.repoInfo_.isCustomHost()&&r.host!==e._repo.repoInfo_.host&&Si("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),LP(e,n.path.toString())}function Ys(e,t){return e=Re(e),Pe(e._path)===null?wH("child","path",t,!1):Dl("child","path",t,!1),new Ri(e._repo,vt(e._path,t))}function GH(e,t){e=Re(e),Ar("push",e._path),Ai("push",t,e._path,!0);var n=AP(e._repo),r=W3(n),i=Ys(e,r),s=Ys(e,r),a;return t!=null?a=Ub(s,t).then(function(){return s}):a=Promise.resolve(s),i.then=a.then.bind(a),i.catch=a.then.bind(a,void 0),i}function zH(e){return Ar("remove",e._path),Ub(e,null)}function Ub(e,t){e=Re(e),Ar("set",e._path),Ai("set",t,e._path,!1);var n=new Qt;return Lb(e._repo,e._path,t,null,n.wrapCallback(function(){})),n.promise}function $H(e,t){e=Re(e),Ar("setPriority",e._path),Ob("setPriority",t,!1);var n=new Qt;return Lb(e._repo,vt(e._path,".priority"),t,null,n.wrapCallback(function(){})),n.promise}function QH(e,t,n){if(Ar("setWithPriority",e._path),Ai("setWithPriority",t,e._path,!1),Ob("setWithPriority",n,!1),e.key===".length"||e.key===".keys")throw"setWithPriority failed: "+e.key+" is a read-only object.";var r=new Qt;return Lb(e._repo,e._path,t,n,r.wrapCallback(function(){})),r.promise}function YH(e,t){TP("update",t,e._path,!1);var n=new Qt;return NH(e._repo,e._path,t,n.wrapCallback(function(){})),n.promise}function XH(e){return e=Re(e),RH(e._repo,e).then(function(t){return new zp(t,new Ri(e._repo,e._path),e._queryParams.getIndex())})}var MP=function(){function e(t){this.callbackContext=t}return e.prototype.respondsTo=function(t){return t==="value"},e.prototype.createEvent=function(t,n){var r=n._queryParams.getIndex();return new OP("value",this,new zp(t.snapshotNode,new Ri(n._repo,n._path),r))},e.prototype.getEventRunner=function(t){var n=this;return t.getEventType()==="cancel"?function(){return n.callbackContext.onCancel(t.error)}:function(){return n.callbackContext.onValue(t.snapshot,null)}},e.prototype.createCancelEvent=function(t,n){return this.callbackContext.hasCancelCallback?new DP(this,t,n):null},e.prototype.matches=function(t){return t instanceof e?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1},e.prototype.hasAnyCallback=function(){return this.callbackContext!==null},e}(),FP=function(){function e(t,n){this.eventType=t,this.callbackContext=n}return e.prototype.respondsTo=function(t){var n=t==="children_added"?"child_added":t;return n=n==="children_removed"?"child_removed":n,this.eventType===n},e.prototype.createCancelEvent=function(t,n){return this.callbackContext.hasCancelCallback?new DP(this,t,n):null},e.prototype.createEvent=function(t,n){z(t.childName!=null,"Child events should have a childName.");var r=Ys(new Ri(n._repo,n._path),t.childName),i=n._queryParams.getIndex();return new OP(t.type,this,new zp(t.snapshotNode,r,i),t.prevName)},e.prototype.getEventRunner=function(t){var n=this;return t.getEventType()==="cancel"?function(){return n.callbackContext.onCancel(t.error)}:function(){return n.callbackContext.onValue(t.snapshot,t.prevName)}},e.prototype.matches=function(t){return t instanceof e?this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)):!1},e.prototype.hasAnyCallback=function(){return!!this.callbackContext},e}();function hf(e,t,n,r,i){var s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){var a=n,c=function(d,v){U_(e._repo,e,h),a(d,v)};c.userCallback=n.userCallback,c.context=n.context,n=c}var l=new xP(n,s||void 0),h=t==="value"?new MP(l):new FP(t,l);return LH(e._repo,e,h),function(){return U_(e._repo,e,h)}}function V_(e,t,n,r){return hf(e,"value",t,n,r)}function bA(e,t,n,r){return hf(e,"child_added",t,n,r)}function EA(e,t,n,r){return hf(e,"child_changed",t,n,r)}function TA(e,t,n,r){return hf(e,"child_moved",t,n,r)}function IA(e,t,n,r){return hf(e,"child_removed",t,n,r)}function SA(e,t,n){var r=null,i=n?new xP(n):null;t==="value"?r=new MP(i):t&&(r=new FP(t,i)),U_(e._repo,e,r)}var ii=function(){function e(){}return e}(),UP=function(e){te(t,e);function t(n,r){var i=e.call(this)||this;return i._value=n,i._key=r,i}return t.prototype._apply=function(n){Ai("endAt",this._value,n._path,!0);var r=k_(n._queryParams,this._value,this._key);if(Gp(r),Go(r),n._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Fr(n._repo,n._path,r,n._orderByCalled)},t}(ii);function JH(e,t){return lf("endAt","key",t,!0),new UP(e,t)}var ZH=function(e){te(t,e);function t(n,r){var i=e.call(this)||this;return i._value=n,i._key=r,i}return t.prototype._apply=function(n){Ai("endBefore",this._value,n._path,!1);var r=J3(n._queryParams,this._value,this._key);if(Gp(r),Go(r),n._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Fr(n._repo,n._path,r,n._orderByCalled)},t}(ii);function eK(e,t){return lf("endBefore","key",t,!0),new ZH(e,t)}var jP=function(e){te(t,e);function t(n,r){var i=e.call(this)||this;return i._value=n,i._key=r,i}return t.prototype._apply=function(n){Ai("startAt",this._value,n._path,!0);var r=A_(n._queryParams,this._value,this._key);if(Gp(r),Go(r),n._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Fr(n._repo,n._path,r,n._orderByCalled)},t}(ii);function tK(e,t){return e===void 0&&(e=null),lf("startAt","key",t,!0),new jP(e,t)}var nK=function(e){te(t,e);function t(n,r){var i=e.call(this)||this;return i._value=n,i._key=r,i}return t.prototype._apply=function(n){Ai("startAfter",this._value,n._path,!1);var r=X3(n._queryParams,this._value,this._key);if(Gp(r),Go(r),n._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Fr(n._repo,n._path,r,n._orderByCalled)},t}(ii);function rK(e,t){return lf("startAfter","key",t,!0),new nK(e,t)}var iK=function(e){te(t,e);function t(n){var r=e.call(this)||this;return r._limit=n,r}return t.prototype._apply=function(n){if(n._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Fr(n._repo,n._path,Q3(n._queryParams,this._limit),n._orderByCalled)},t}(ii);function oK(e){if(typeof e!="number"||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new iK(e)}var sK=function(e){te(t,e);function t(n){var r=e.call(this)||this;return r._limit=n,r}return t.prototype._apply=function(n){if(n._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Fr(n._repo,n._path,Y3(n._queryParams,this._limit),n._orderByCalled)},t}(ii);function aK(e){if(typeof e!="number"||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new sK(e)}var uK=function(e){te(t,e);function t(n){var r=e.call(this)||this;return r._path=n,r}return t.prototype._apply=function(n){Wp(n,"orderByChild");var r=new Qe(this._path);if(Oe(r))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var i=new db(r),s=Pp(n._queryParams,i);return Go(s),new Fr(n._repo,n._path,s,!0)},t}(ii);function cK(e){if(e==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(e==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(e==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Dl("orderByChild","path",e,!1),new uK(e)}var lK=function(e){te(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype._apply=function(n){Wp(n,"orderByKey");var r=Pp(n._queryParams,_i);return Go(r),new Fr(n._repo,n._path,r,!0)},t}(ii);function fK(){return new lK}var hK=function(e){te(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype._apply=function(n){Wp(n,"orderByPriority");var r=Pp(n._queryParams,st);return Go(r),new Fr(n._repo,n._path,r,!0)},t}(ii);function dK(){return new hK}var pK=function(e){te(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype._apply=function(n){Wp(n,"orderByValue");var r=Pp(n._queryParams,pb);return Go(r),new Fr(n._repo,n._path,r,!0)},t}(ii);function vK(){return new pK}var gK=function(e){te(t,e);function t(n,r){var i=e.call(this)||this;return i._value=n,i._key=r,i}return t.prototype._apply=function(n){if(Ai("equalTo",this._value,n._path,!1),n._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(n._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new UP(this._value,this._key)._apply(new jP(this._value,this._key)._apply(n))},t}(ii);function mK(e,t){return lf("equalTo","key",t,!0),new gK(e,t)}function Kr(e){for(var t,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var s=Re(e);try{for(var a=Xt(r),c=a.next();!c.done;c=a.next()){var l=c.value;s=l._apply(s)}}catch(h){t={error:h}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return s}qq(Ri);zq(Ri);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yK="FIREBASE_DATABASE_EMULATOR_HOST",B_={},VP=!1;function _K(e,t,n,r){e.repoInfo_=new ab(t+":"+n,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams),r&&(e.authTokenProvider_=r)}function BP(e,t,n,r,i){var s=r||e.options.databaseURL;s===void 0&&(e.options.projectId||Si("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Gt("Using default host for project ",e.options.projectId),s=e.options.projectId+"-default-rtdb.firebaseio.com");var a=j_(s,i),c=a.repoInfo,l,h=void 0;typeof process<"u"&&(h=process.env[yK]),h?(l=!0,s="http://"+h+"?ns="+c.namespace,a=j_(s,i),c=a.repoInfo):l=!a.repoInfo.secure;var d=i&&l?new ol(ol.OWNER):new QB(e.name,e.options,t);IP("Invalid Firebase Database URL",a),Oe(a.path)||Si("Database URL must point to the root of a Firebase Database (not including a child path).");var v=bK(c,e,d,new $B(e.name,n));return new TK(v,e)}function wK(e,t){var n=B_[t];(!n||n[e.key]!==e)&&Si("Database "+t+"("+e.repoInfo_+") has already been deleted."),kP(e),delete n[e.key]}function bK(e,t,n,r){var i=B_[t.name];i||(i={},B_[t.name]=i);var s=i[e.toURLString()];return s&&Si("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new SH(e,VP,n,r),i[e.toURLString()]=s,s}function EK(e){VP=e}var TK=function(){function e(t,n){this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return Object.defineProperty(e.prototype,"_repo",{get:function(){return this._instanceStarted||(CH(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new Ri(this._repo,ze())),this._rootInternal},enumerable:!1,configurable:!0}),e.prototype._delete=function(){return this._rootInternal!==null&&(wK(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()},e.prototype._checkNotDeleted=function(t){this._rootInternal===null&&Si("Cannot call "+t+" on a deleted database.")},e}();function IK(e,t,n,r){r===void 0&&(r={}),e=Re(e),e._checkNotDeleted("useEmulator"),e._instanceStarted&&Si("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal,s=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Si('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new ol(ol.OWNER);else if(r.mockUserToken){var a=typeof r.mockUserToken=="string"?r.mockUserToken:Xw(r.mockUserToken,e.app.options.projectId);s=new ol(a)}_K(i,t,n,s)}function SK(e){e=Re(e),e._checkNotDeleted("goOffline"),kP(e._repo)}function CK(e){e=Re(e),e._checkNotDeleted("goOnline"),MH(e._repo)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var AK={".sv":"timestamp"};function kK(){return AK}function RK(e){return{".sv":{increment:e}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var NK=function(){function e(t,n){this.committed=t,this.snapshot=n}return e.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},e}();function PK(e,t,n){var r;if(e=Re(e),Ar("Reference.transaction",e._path),e.key===".length"||e.key===".keys")throw"Reference.transaction failed: "+e.key+" is a read-only object.";var i=(r=n==null?void 0:n.applyLocally)!==null&&r!==void 0?r:!0,s=new Qt,a=function(l,h,d){var v=null;l?s.reject(l):(v=new zp(d,new Ri(e._repo,e._path),st),s.resolve(new NK(h,v)))},c=V_(e,function(){});return jH(e._repo,e._path,t,a,c,i),s.promise}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var OK=function(){function e(t){this._delegate=t}return e.prototype.cancel=function(t){ye("OnDisconnect.cancel",0,1,arguments.length),Wt("OnDisconnect.cancel","onComplete",t,!0);var n=this._delegate.cancel();return t&&n.then(function(){return t(null)},function(r){return t(r)}),n},e.prototype.remove=function(t){ye("OnDisconnect.remove",0,1,arguments.length),Wt("OnDisconnect.remove","onComplete",t,!0);var n=this._delegate.remove();return t&&n.then(function(){return t(null)},function(r){return t(r)}),n},e.prototype.set=function(t,n){ye("OnDisconnect.set",1,2,arguments.length),Wt("OnDisconnect.set","onComplete",n,!0);var r=this._delegate.set(t);return n&&r.then(function(){return n(null)},function(i){return n(i)}),r},e.prototype.setWithPriority=function(t,n,r){ye("OnDisconnect.setWithPriority",2,3,arguments.length),Wt("OnDisconnect.setWithPriority","onComplete",r,!0);var i=this._delegate.setWithPriority(t,n);return r&&i.then(function(){return r(null)},function(s){return r(s)}),i},e.prototype.update=function(t,n){if(ye("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){for(var r={},i=0;i<t.length;++i)r[""+i]=t[i];t=r,cn("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Wt("OnDisconnect.update","onComplete",n,!0);var s=this._delegate.update(t);return n&&s.then(function(){return n(null)},function(a){return n(a)}),s},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var DK=function(){function e(t,n){this.committed=t,this.snapshot=n}return e.prototype.toJSON=function(){return ye("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cl=function(){function e(t,n){this._database=t,this._delegate=n}return e.prototype.val=function(){return ye("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},e.prototype.exportVal=function(){return ye("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},e.prototype.toJSON=function(){return ye("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},e.prototype.exists=function(){return ye("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},e.prototype.child=function(t){return ye("DataSnapshot.child",0,1,arguments.length),t=String(t),Dl("DataSnapshot.child","path",t,!1),new e(this._database,this._delegate.child(t))},e.prototype.hasChild=function(t){return ye("DataSnapshot.hasChild",1,1,arguments.length),Dl("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)},e.prototype.getPriority=function(){return ye("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},e.prototype.forEach=function(t){var n=this;return ye("DataSnapshot.forEach",1,1,arguments.length),Wt("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(function(r){return t(new e(n._database,r))})},e.prototype.hasChildren=function(){return ye("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(e.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),e.prototype.numChildren=function(){return ye("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},e.prototype.getRef=function(){return ye("DataSnapshot.ref",0,0,arguments.length),new Os(this._database,this._delegate.ref)},Object.defineProperty(e.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),e}(),qP=function(){function e(t,n){this.database=t,this._delegate=n}return e.prototype.on=function(t,n,r,i){var s=this,a;ye("Query.on",2,4,arguments.length),Wt("Query.on","callback",n,!1);var c=e.getCancelAndContextArgs_("Query.on",r,i),l=function(d,v){n.call(c.context,new cl(s.database,d),v)};l.userCallback=n,l.context=c.context;var h=(a=c.cancel)===null||a===void 0?void 0:a.bind(c.context);switch(t){case"value":return V_(this._delegate,l,h),n;case"child_added":return bA(this._delegate,l,h),n;case"child_removed":return IA(this._delegate,l,h),n;case"child_changed":return EA(this._delegate,l,h),n;case"child_moved":return TA(this._delegate,l,h),n;default:throw new Error(er("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},e.prototype.off=function(t,n,r){if(ye("Query.off",0,3,arguments.length),_H("Query.off",t,!0),Wt("Query.off","callback",n,!0),jC("Query.off","context",r,!0),n){var i=function(){};i.userCallback=n,i.context=r,SA(this._delegate,t,i)}else SA(this._delegate,t)},e.prototype.get=function(){var t=this;return XH(this._delegate).then(function(n){return new cl(t.database,n)})},e.prototype.once=function(t,n,r,i){var s=this;ye("Query.once",1,4,arguments.length),Wt("Query.once","callback",n,!0);var a=e.getCancelAndContextArgs_("Query.once",r,i),c=new Qt,l=function(d,v){var m=new cl(s.database,d);n&&n.call(a.context,m,v),c.resolve(m)};l.userCallback=n,l.context=a.context;var h=function(d){a.cancel&&a.cancel.call(a.context,d),c.reject(d)};switch(t){case"value":V_(this._delegate,l,h,{onlyOnce:!0});break;case"child_added":bA(this._delegate,l,h,{onlyOnce:!0});break;case"child_removed":IA(this._delegate,l,h,{onlyOnce:!0});break;case"child_changed":EA(this._delegate,l,h,{onlyOnce:!0});break;case"child_moved":TA(this._delegate,l,h,{onlyOnce:!0});break;default:throw new Error(er("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise},e.prototype.limitToFirst=function(t){return ye("Query.limitToFirst",1,1,arguments.length),new e(this.database,Kr(this._delegate,oK(t)))},e.prototype.limitToLast=function(t){return ye("Query.limitToLast",1,1,arguments.length),new e(this.database,Kr(this._delegate,aK(t)))},e.prototype.orderByChild=function(t){return ye("Query.orderByChild",1,1,arguments.length),new e(this.database,Kr(this._delegate,cK(t)))},e.prototype.orderByKey=function(){return ye("Query.orderByKey",0,0,arguments.length),new e(this.database,Kr(this._delegate,fK()))},e.prototype.orderByPriority=function(){return ye("Query.orderByPriority",0,0,arguments.length),new e(this.database,Kr(this._delegate,dK()))},e.prototype.orderByValue=function(){return ye("Query.orderByValue",0,0,arguments.length),new e(this.database,Kr(this._delegate,vK()))},e.prototype.startAt=function(t,n){return t===void 0&&(t=null),ye("Query.startAt",0,2,arguments.length),new e(this.database,Kr(this._delegate,tK(t,n)))},e.prototype.startAfter=function(t,n){return t===void 0&&(t=null),ye("Query.startAfter",0,2,arguments.length),new e(this.database,Kr(this._delegate,rK(t,n)))},e.prototype.endAt=function(t,n){return t===void 0&&(t=null),ye("Query.endAt",0,2,arguments.length),new e(this.database,Kr(this._delegate,JH(t,n)))},e.prototype.endBefore=function(t,n){return t===void 0&&(t=null),ye("Query.endBefore",0,2,arguments.length),new e(this.database,Kr(this._delegate,eK(t,n)))},e.prototype.equalTo=function(t,n){return ye("Query.equalTo",1,2,arguments.length),new e(this.database,Kr(this._delegate,mK(t,n)))},e.prototype.toString=function(){return ye("Query.toString",0,0,arguments.length),this._delegate.toString()},e.prototype.toJSON=function(){return ye("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},e.prototype.isEqual=function(t){if(ye("Query.isEqual",1,1,arguments.length),!(t instanceof e)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(t._delegate)},e.getCancelAndContextArgs_=function(t,n,r){var i={cancel:void 0,context:void 0};if(n&&r)i.cancel=n,Wt(t,"cancel",i.cancel,!0),i.context=r,jC(t,"context",i.context,!0);else if(n)if(typeof n=="object"&&n!==null)i.context=n;else if(typeof n=="function")i.cancel=n;else throw new Error(er(t,"cancelOrContext")+" must either be a cancel callback or a context object.");return i},Object.defineProperty(e.prototype,"ref",{get:function(){return new Os(this.database,new Ri(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),e}(),Os=function(e){te(t,e);function t(n,r){var i=e.call(this,n,new Fr(r._repo,r._path,new Z1,!1))||this;return i.database=n,i._delegate=r,i}return t.prototype.getKey=function(){return ye("Reference.key",0,0,arguments.length),this._delegate.key},t.prototype.child=function(n){return ye("Reference.child",1,1,arguments.length),typeof n=="number"&&(n=String(n)),new t(this.database,Ys(this._delegate,n))},t.prototype.getParent=function(){ye("Reference.parent",0,0,arguments.length);var n=this._delegate.parent;return n?new t(this.database,n):null},t.prototype.getRoot=function(){return ye("Reference.root",0,0,arguments.length),new t(this.database,this._delegate.root)},t.prototype.set=function(n,r){ye("Reference.set",1,2,arguments.length),Wt("Reference.set","onComplete",r,!0);var i=Ub(this._delegate,n);return r&&i.then(function(){return r(null)},function(s){return r(s)}),i},t.prototype.update=function(n,r){if(ye("Reference.update",1,2,arguments.length),Array.isArray(n)){for(var i={},s=0;s<n.length;++s)i[""+s]=n[s];n=i,cn("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ar("Reference.update",this._delegate._path),Wt("Reference.update","onComplete",r,!0);var a=YH(this._delegate,n);return r&&a.then(function(){return r(null)},function(c){return r(c)}),a},t.prototype.setWithPriority=function(n,r,i){ye("Reference.setWithPriority",2,3,arguments.length),Wt("Reference.setWithPriority","onComplete",i,!0);var s=QH(this._delegate,n,r);return i&&s.then(function(){return i(null)},function(a){return i(a)}),s},t.prototype.remove=function(n){ye("Reference.remove",0,1,arguments.length),Wt("Reference.remove","onComplete",n,!0);var r=zH(this._delegate);return n&&r.then(function(){return n(null)},function(i){return n(i)}),r},t.prototype.transaction=function(n,r,i){var s=this;ye("Reference.transaction",1,3,arguments.length),Wt("Reference.transaction","transactionUpdate",n,!1),Wt("Reference.transaction","onComplete",r,!0),bH("Reference.transaction","applyLocally",i,!0);var a=PK(this._delegate,n,{applyLocally:i}).then(function(c){return new DK(c.committed,new cl(s.database,c.snapshot))});return r&&a.then(function(c){return r(null,c.committed,c.snapshot)},function(c){return r(c,!1,null)}),a},t.prototype.setPriority=function(n,r){ye("Reference.setPriority",1,2,arguments.length),Wt("Reference.setPriority","onComplete",r,!0);var i=$H(this._delegate,n);return r&&i.then(function(){return r(null)},function(s){return r(s)}),i},t.prototype.push=function(n,r){var i=this;ye("Reference.push",0,2,arguments.length),Wt("Reference.push","onComplete",r,!0);var s=GH(this._delegate,n),a=s.then(function(l){return new t(i.database,l)});r&&a.then(function(){return r(null)},function(l){return r(l)});var c=new t(this.database,s);return c.then=a.then.bind(a),c.catch=a.catch.bind(a,void 0),c},t.prototype.onDisconnect=function(){return Ar("Reference.onDisconnect",this._delegate._path),new OK(new WH(this._delegate._repo,this._delegate._path))},Object.defineProperty(t.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),t}(qP);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Md=function(){function e(t,n){var r=this;this._delegate=t,this.app=n,this.INTERNAL={delete:function(){return r._delegate._delete()}}}return e.prototype.useEmulator=function(t,n,r){r===void 0&&(r={}),IK(this._delegate,t,n,r)},e.prototype.ref=function(t){if(ye("database.ref",0,1,arguments.length),t instanceof Os){var n=wA(this._delegate,t.toString());return new Os(this,n)}else{var n=LP(this._delegate,t);return new Os(this,n)}},e.prototype.refFromURL=function(t){var n="database.refFromURL";ye(n,1,1,arguments.length);var r=wA(this._delegate,t);return new Os(this,r)},e.prototype.goOffline=function(){return ye("database.goOffline",0,0,arguments.length),SK(this._delegate)},e.prototype.goOnline=function(){return ye("database.goOnline",0,0,arguments.length),CK(this._delegate)},e.ServerValue={TIMESTAMP:kK(),increment:function(t){return RK(t)}},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xK=function(){ks.forceDisallow(),cb.forceAllow()},LK=function(){cb.forceDisallow()},MK=function(){return ks.isAvailable()},FK=function(e,t){var n=e._delegate._repo.persistentConnection_;n.securityDebugCallback_=t},UK=function(e,t){FH(e._delegate._repo,t)},jK=function(e,t){UH(e._delegate._repo,t)},VK=function(e){return e._delegate._repo.dataUpdateCount},BK=function(e,t){return AH(e._delegate._repo,t)};function qK(e){var t=e.app,n=e.url,r=e.version,i=e.customAuthImpl,s=e.namespace,a=e.nodeAdmin,c=a===void 0?!1:a;m1(r);var l=new f1("auth-internal",new h1("database-standalone"));return l.setComponent(new In("auth-internal",function(){return i},"PRIVATE")),{instance:new Md(BP(t,l,void 0,n,c),t),namespace:s}}var HK=Object.freeze({__proto__:null,forceLongPolling:xK,forceWebSockets:LK,isWebSocketsAvailable:MK,setSecurityDebugCallback:FK,stats:UK,statsIncrementCounter:jK,dataUpdateCount:VK,interceptServerData:BK,initStandalone:qK});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var KK=qs;qs.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)};qs.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};var WK=j1,GK=function(e){var t=qs.prototype.put;return qs.prototype.put=function(n,r,i,s){s!==void 0&&(s=e()),t.call(this,n,r,i,s)},function(){qs.prototype.put=t}},zK=ab,$K=function(e){return e._delegate._queryIdentifier},QK=function(e){EK(e)},YK=Object.freeze({__proto__:null,DataConnection:KK,RealTimeConnection:WK,hijackHash:GK,ConnectionTarget:zK,queryIdentifier:$K,forceRestClient:QK});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var XK=Md.ServerValue;function JK(e){m1(e.SDK_VERSION),e.INTERNAL.registerComponent(new In("database",function(t,n){var r=n.instanceIdentifier,i=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),a=t.getProvider("app-check-internal");return new Md(BP(i,s,a,r),i)},"PUBLIC").setServiceProps({Reference:Os,Query:qP,Database:Md,DataSnapshot:cl,enableLogging:b1,INTERNAL:HK,ServerValue:XK,TEST_ACCESS:YK}).setMultipleInstances(!0)),e.registerVersion(MB,FB)}JK(ce);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var q_=function(e,t){return q_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},q_(e,t)};function ZK(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");q_(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function HP(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var eW=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},oe,jb=jb||{},Ee=eW||self;function Fd(){}function H_(e){var t=typeof e;return t=t!="object"?t:e?Array.isArray(e)?"array":t:"null",t=="array"||t=="object"&&typeof e.length=="number"}function df(e){var t=typeof e;return t=="object"&&e!=null||t=="function"}function tW(e){return Object.prototype.hasOwnProperty.call(e,Sy)&&e[Sy]||(e[Sy]=++nW)}var Sy="closure_uid_"+(1e9*Math.random()>>>0),nW=0;function rW(e,t,n){return e.call.apply(e.bind,arguments)}function iW(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),e.apply(t,i)}}return function(){return e.apply(t,arguments)}}function ln(e,t,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?ln=rW:ln=iW,ln.apply(null,arguments)}function Kh(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),e.apply(this,r)}}function dn(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(r,i,s){for(var a=Array(arguments.length-2),c=2;c<arguments.length;c++)a[c-2]=arguments[c];return t.prototype[i].apply(r,a)}}function zo(){this.s=this.s,this.o=this.o}var oW=0;zo.prototype.s=!1;zo.prototype.na=function(){!this.s&&(this.s=!0,this.M(),oW!=0)&&tW(this)};zo.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var KP=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(typeof e=="string")return typeof t!="string"||t.length!=1?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},WP=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=typeof e=="string"?e.split(""):e,s=0;s<r;s++)s in i&&t.call(n,i[s],s,e)};function sW(e){e:{for(var t=XW,n=e.length,r=typeof e=="string"?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:typeof e=="string"?e.charAt(t):e[t]}function CA(e){return Array.prototype.concat.apply([],arguments)}function Vb(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Ud(e){return/^[\s\xa0]*$/.test(e)}var AA=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Fn(e,t){return e.indexOf(t)!=-1}function Cy(e,t){return e<t?-1:e>t?1:0}var Un;e:{var kA=Ee.navigator;if(kA){var RA=kA.userAgent;if(RA){Un=RA;break e}}Un=""}function Bb(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function GP(e){var t={};for(var n in e)t[n]=e[n];return t}var NA="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function zP(e,t){for(var n,r,i=1;i<arguments.length;i++){r=arguments[i];for(n in r)e[n]=r[n];for(var s=0;s<NA.length;s++)n=NA[s],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function qb(e){return qb[" "](e),e}qb[" "]=Fd;function aW(e){var t=lW;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}var uW=Fn(Un,"Opera"),yu=Fn(Un,"Trident")||Fn(Un,"MSIE"),$P=Fn(Un,"Edge"),K_=$P||yu,QP=Fn(Un,"Gecko")&&!(Fn(Un.toLowerCase(),"webkit")&&!Fn(Un,"Edge"))&&!(Fn(Un,"Trident")||Fn(Un,"MSIE"))&&!Fn(Un,"Edge"),cW=Fn(Un.toLowerCase(),"webkit")&&!Fn(Un,"Edge");function YP(){var e=Ee.document;return e?e.documentMode:void 0}var jd;e:{var Ay="",ky=function(){var e=Un;if(QP)return/rv:([^\);]+)(\)|;)/.exec(e);if($P)return/Edge\/([\d\.]+)/.exec(e);if(yu)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e);if(cW)return/WebKit\/(\S+)/.exec(e);if(uW)return/(?:Version)[ \/]?(\S+)/.exec(e)}();if(ky&&(Ay=ky?ky[1]:""),yu){var Ry=YP();if(Ry!=null&&Ry>parseFloat(Ay)){jd=String(Ry);break e}}jd=Ay}var lW={};function fW(){return aW(function(){for(var e=0,t=AA(String(jd)).split("."),n=AA("9").split("."),r=Math.max(t.length,n.length),i=0;e==0&&i<r;i++){var s=t[i]||"",a=n[i]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s[0].length==0&&a[0].length==0)break;e=Cy(s[1].length==0?0:parseInt(s[1],10),a[1].length==0?0:parseInt(a[1],10))||Cy(s[2].length==0,a[2].length==0)||Cy(s[2],a[2]),s=s[3],a=a[3]}while(e==0)}return 0<=e})}var W_;if(Ee.document&&yu){var PA=YP();W_=PA||parseInt(jd,10)||void 0}else W_=void 0;var hW=W_,dW=function(){if(!Ee.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Ee.addEventListener("test",Fd,t),Ee.removeEventListener("test",Fd,t)}catch{}return e}();function wn(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}wn.prototype.h=function(){this.defaultPrevented=!0};function xl(e,t){if(wn.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(QP){e:{try{qb(t.nodeName);var i=!0;break e}catch{}i=!1}i||(t=null)}}else n=="mouseover"?t=e.fromElement:n=="mouseout"&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=e.clientX!==void 0?e.clientX:e.pageX,this.clientY=e.clientY!==void 0?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=typeof e.pointerType=="string"?e.pointerType:pW[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&xl.Z.h.call(this)}}dn(xl,wn);var pW={2:"touch",3:"pen",4:"mouse"};xl.prototype.h=function(){xl.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var pf="closure_listenable_"+(1e6*Math.random()|0),vW=0;function gW(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++vW,this.ca=this.fa=!1}function $p(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function Qp(e){this.src=e,this.g={},this.h=0}Qp.prototype.add=function(e,t,n,r,i){var s=e.toString();e=this.g[s],e||(e=this.g[s]=[],this.h++);var a=z_(e,t,r,i);return-1<a?(t=e[a],n||(t.fa=!1)):(t=new gW(t,this.src,s,!!r,i),t.fa=n,e.push(t)),t};function G_(e,t){var n=t.type;if(n in e.g){var r=e.g[n],i=KP(r,t),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&($p(t),e.g[n].length==0&&(delete e.g[n],e.h--))}}function z_(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.ca&&s.listener==t&&s.capture==!!n&&s.ia==r)return i}return-1}var Hb="closure_lm_"+(1e6*Math.random()|0),Ny={};function XP(e,t,n,r,i){if(r&&r.once)return ZP(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)XP(e,t[s],n,r,i);return null}return n=Gb(n),e&&e[pf]?e.N(t,n,df(r)?!!r.capture:!!r,i):JP(e,t,n,!1,r,i)}function JP(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var a=df(i)?!!i.capture:!!i,c=Wb(e);if(c||(e[Hb]=c=new Qp(e)),n=c.add(t,n,r,a,s),n.proxy)return n;if(r=mW(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)dW||(i=a),i===void 0&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(tO(t.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function mW(){function e(n){return t.call(e.src,e.listener,n)}var t=yW;return e}function ZP(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)ZP(e,t[s],n,r,i);return null}return n=Gb(n),e&&e[pf]?e.O(t,n,df(r)?!!r.capture:!!r,i):JP(e,t,n,!0,r,i)}function eO(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)eO(e,t[s],n,r,i);else r=df(r)?!!r.capture:!!r,n=Gb(n),e&&e[pf]?(e=e.i,t=String(t).toString(),t in e.g&&(s=e.g[t],n=z_(s,n,r,i),-1<n&&($p(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete e.g[t],e.h--)))):e&&(e=Wb(e))&&(t=e.g[t.toString()],e=-1,t&&(e=z_(t,n,r,i)),(n=-1<e?t[e]:null)&&Kb(n))}function Kb(e){if(typeof e!="number"&&e&&!e.ca){var t=e.src;if(t&&t[pf])G_(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(tO(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Wb(t))?(G_(n,e),n.h==0&&(n.src=null,t[Hb]=null)):$p(e)}}}function tO(e){return e in Ny?Ny[e]:Ny[e]="on"+e}function yW(e,t){if(e.ca)e=!0;else{t=new xl(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&Kb(e),e=n.call(r,t)}return e}function Wb(e){return e=e[Hb],e instanceof Qp?e:null}var Py="__closure_events_fn_"+(1e9*Math.random()>>>0);function Gb(e){return typeof e=="function"?e:(e[Py]||(e[Py]=function(t){return e.handleEvent(t)}),e[Py])}function Jt(){zo.call(this),this.i=new Qp(this),this.P=this,this.I=null}dn(Jt,zo);Jt.prototype[pf]=!0;Jt.prototype.removeEventListener=function(e,t,n,r){eO(this,e,t,n,r)};function fn(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,typeof t=="string")t=new wn(t,e);else if(t instanceof wn)t.target=t.target||e;else{var i=t;t=new wn(r,e),zP(t,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var a=t.g=n[s];i=Wh(a,r,!0,t)&&i}if(a=t.g=e,i=Wh(a,r,!0,t)&&i,i=Wh(a,r,!1,t)&&i,n)for(s=0;s<n.length;s++)a=t.g=n[s],i=Wh(a,r,!1,t)&&i}Jt.prototype.M=function(){if(Jt.Z.M.call(this),this.i){var e=this.i,t;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)$p(n[r]);delete e.g[t],e.h--}}this.I=null};Jt.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)};Jt.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};function Wh(e,t,n,r){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var a=t[s];if(a&&!a.ca&&a.capture==n){var c=a.listener,l=a.ia||a.src;a.fa&&G_(e.i,a),i=c.call(l,r)!==!1&&i}}return i&&!r.defaultPrevented}var zb=Ee.JSON.stringify;function _W(){var e=rO,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var wW=function(){function e(){this.h=this.g=null}return e.prototype.add=function(t,n){var r=nO.get();r.set(t,n),this.h?this.h.next=r:this.g=r,this.h=r},e}(),nO=new(function(){function e(t,n){this.i=t,this.j=n,this.h=0,this.g=null}return e.prototype.get=function(){var t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t},e}())(function(){return new bW},function(e){return e.reset()}),bW=function(){function e(){this.next=this.g=this.h=null}return e.prototype.set=function(t,n){this.h=t,this.g=n,this.next=null},e.prototype.reset=function(){this.next=this.g=this.h=null},e}();function EW(e){Ee.setTimeout(function(){throw e},0)}function $b(e,t){$_||TW(),Q_||($_(),Q_=!0),rO.add(e,t)}var $_;function TW(){var e=Ee.Promise.resolve(void 0);$_=function(){e.then(IW)}}var Q_=!1,rO=new wW;function IW(){for(var e;e=_W();){try{e.h.call(e.g)}catch(n){EW(n)}var t=nO;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Q_=!1}function Yp(e,t){Jt.call(this),this.h=e||1,this.g=t||Ee,this.j=ln(this.kb,this),this.l=Date.now()}dn(Yp,Jt);oe=Yp.prototype;oe.da=!1;oe.S=null;oe.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),fn(this,"tick"),this.da&&(Qb(this),this.start()))}};oe.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Qb(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}oe.M=function(){Yp.Z.M.call(this),Qb(this),delete this.g};function Yb(e,t,n){if(typeof e=="function")n&&(e=ln(e,n));else if(e&&typeof e.handleEvent=="function")e=ln(e.handleEvent,e);else throw Error("Invalid listener argument");return 2147483647<Number(t)?-1:Ee.setTimeout(e,t||0)}function iO(e){e.g=Yb(function(){e.g=null,e.i&&(e.i=!1,iO(e))},e.j);var t=e.h;e.h=null,e.m.apply(null,t)}var SW=function(e){ZK(t,e);function t(n,r){var i=e.call(this)||this;return i.m=n,i.j=r,i.h=null,i.i=!1,i.g=null,i}return t.prototype.l=function(n){this.h=arguments,this.g?this.i=!0:iO(this)},t.prototype.M=function(){e.prototype.M.call(this),this.g&&(Ee.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},t}(zo);function Ll(e){zo.call(this),this.h=e,this.g={}}dn(Ll,zo);var OA=[];function oO(e,t,n,r){Array.isArray(n)||(n&&(OA[0]=n.toString()),n=OA);for(var i=0;i<n.length;i++){var s=XP(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function sO(e){Bb(e.g,function(t,n){this.g.hasOwnProperty(n)&&Kb(t)},e),e.g={}}Ll.prototype.M=function(){Ll.Z.M.call(this),sO(this)};Ll.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Xp(){this.g=!0}Xp.prototype.Aa=function(){this.g=!1};function CW(e,t,n,r,i,s){e.info(function(){if(e.g)if(s)for(var a="",c=s.split("&"),l=0;l<c.length;l++){var h=c[l].split("=");if(1<h.length){var d=h[0];h=h[1];var v=d.split("_");a=2<=v.length&&v[1]=="type"?a+(d+"="+h+"&"):a+(d+"=redacted&")}}else a=null;else a=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+`
`+n+`
`+a})}function AW(e,t,n,r,i,s,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+`
`+n+`
`+s+" "+a})}function Ja(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+RW(e,n)+(r?" "+r:"")})}function kW(e,t){e.info(function(){return"TIMEOUT: "+t})}Xp.prototype.info=function(){};function RW(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n){for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var a=1;a<i.length;a++)i[a]=""}}}}return zb(n)}catch{return t}}var la={},DA=null;function Jp(){return DA=DA||new Jt}la.Ma="serverreachability";function aO(e){wn.call(this,la.Ma,e)}dn(aO,wn);function Ml(e){var t=Jp();fn(t,new aO(t))}la.STAT_EVENT="statevent";function uO(e,t){wn.call(this,la.STAT_EVENT,e),this.stat=t}dn(uO,wn);function Bn(e){var t=Jp();fn(t,new uO(t,e))}la.Na="timingevent";function cO(e,t){wn.call(this,la.Na,e),this.size=t}dn(cO,wn);function vf(e,t){if(typeof e!="function")throw Error("Fn must not be null and must be a function");return Ee.setTimeout(function(){e()},t)}var Zp={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},lO={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Xb(){}Xb.prototype.h=null;function xA(e){return e.h||(e.h=e.i())}function fO(){}var gf={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Jb(){wn.call(this,"d")}dn(Jb,wn);function Zb(){wn.call(this,"c")}dn(Zb,wn);var Y_;function ev(){}dn(ev,Xb);ev.prototype.g=function(){return new XMLHttpRequest};ev.prototype.i=function(){return{}};Y_=new ev;function mf(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Ll(this),this.P=NW,e=K_?125:void 0,this.W=new Yp(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new hO}function hO(){this.i=null,this.g="",this.h=!1}var NW=45e3,X_={},Vd={};oe=mf.prototype;oe.setTimeout=function(e){this.P=e};function J_(e,t,n){e.K=1,e.v=nv(Xi(t)),e.s=n,e.U=!0,dO(e,null)}function dO(e,t){e.F=Date.now(),yf(e),e.A=Xi(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),wO(n.h,"t",r),e.C=0,n=e.l.H,e.h=new hO,e.g=VO(e.l,n?t:null,!e.s),0<e.O&&(e.L=new SW(ln(e.Ia,e,e.g),e.O)),oO(e.V,e.g,"readystatechange",e.gb),t=e.H?GP(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Ml(),CW(e.j,e.u,e.A,e.m,e.X,e.s)}oe.gb=function(e){e=e.target;var t=this.L;t&&Hi(e)==3?t.l():this.Ia(e)};oe.Ia=function(e){try{if(e==this.g)e:{var t=Hi(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(t!=3||K_||this.g&&(this.h.h||this.g.ga()||UA(this.g)))){this.I||t!=4||n==7||(n==8||0>=r?Ml(3):Ml(2)),tv(this);var i=this.g.ba();this.N=i;t:if(pO(this)){var s=UA(this.g);e="";var a=s.length,c=Hi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ds(this),ll(this);var l="";break t}this.h.i=new Ee.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(s[n],{stream:c&&n==a-1});s.splice(0,a),this.h.g+=e,this.C=0,l=this.h.g}else l=this.g.ga();if(this.i=i==200,AW(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var h,d=this.g;if((h=d.g?d.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ud(h)){var v=h;break t}}v=null}if(i=v)Ja(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Z_(this,i);else{this.i=!1,this.o=3,Bn(12),Ds(this),ll(this);break e}}this.U?(vO(this,t,l),K_&&this.i&&t==3&&(oO(this.V,this.W,"tick",this.fb),this.W.start())):(Ja(this.j,this.m,l,null),Z_(this,l)),t==4&&Ds(this),this.i&&!this.I&&(t==4?MO(this.l,this):(this.i=!1,yf(this)))}else i==400&&0<l.indexOf("Unknown SID")?(this.o=3,Bn(12)):(this.o=0,Bn(13)),Ds(this),ll(this)}}}catch{}finally{}};function pO(e){return e.g?e.u=="GET"&&e.K!=2&&e.l.Ba:!1}function vO(e,t,n){for(var r=!0,i;!e.I&&e.C<n.length;)if(i=PW(e,n),i==Vd){t==4&&(e.o=4,Bn(14),r=!1),Ja(e.j,e.m,null,"[Incomplete Response]");break}else if(i==X_){e.o=4,Bn(15),Ja(e.j,e.m,n,"[Invalid Chunk]"),r=!1;break}else Ja(e.j,e.m,i,null),Z_(e,i);pO(e)&&i!=Vd&&i!=X_&&(e.h.g="",e.C=0),t!=4||n.length!=0||e.h.h||(e.o=1,Bn(16),r=!1),e.i=e.i&&r,r?0<n.length&&!e.aa&&(e.aa=!0,t=e.l,t.g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),u0(t),t.L=!0,Bn(11))):(Ja(e.j,e.m,n,"[Invalid Chunked Response]"),Ds(e),ll(e))}oe.fb=function(){if(this.g){var e=Hi(this.g),t=this.g.ga();this.C<t.length&&(tv(this),vO(this,e,t),this.i&&e!=4&&yf(this))}};function PW(e,t){var n=e.C,r=t.indexOf(`
`,n);return r==-1?Vd:(n=Number(t.substring(n,r)),isNaN(n)?X_:(r+=1,r+n>t.length?Vd:(t=t.substr(r,n),e.C=r+n,t)))}oe.cancel=function(){this.I=!0,Ds(this)};function yf(e){e.Y=Date.now()+e.P,gO(e,e.P)}function gO(e,t){if(e.B!=null)throw Error("WatchDog timer not null");e.B=vf(ln(e.eb,e),t)}function tv(e){e.B&&(Ee.clearTimeout(e.B),e.B=null)}oe.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(kW(this.j,this.A),this.K!=2&&(Ml(),Bn(17)),Ds(this),this.o=2,ll(this)):gO(this,this.Y-e)};function ll(e){e.l.G==0||e.I||MO(e.l,e)}function Ds(e){tv(e);var t=e.L;t&&typeof t.na=="function"&&t.na(),e.L=null,Qb(e.W),sO(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Z_(e,t){try{var n=e.l;if(n.G!=0&&(n.g==e||ew(n.i,e))){if(n.I=e.N,!e.J&&ew(n.i,e)&&n.G==3){try{var r=n.Ca.g.parse(t)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.F+3e3<e.F)Kd(n),ov(n);else break e;a0(n),Bn(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&n.A==0&&!n.v&&(n.v=vf(ln(n.ab,n),6e3));if(1>=TO(n.i)&&n.ka){try{n.ka()}catch{}n.ka=void 0}}else xs(n,11)}else if((e.J||n.g==e)&&Kd(n),!Ud(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var s=i[t];if(n.U=s[0],s=s[1],n.G==2)if(s[0]=="c"){n.J=s[1],n.la=s[2];var a=s[3];a!=null&&(n.ma=a,n.h.info("VER="+n.ma));var c=s[4];c!=null&&(n.za=c,n.h.info("SVER="+n.za));var l=s[5];l!=null&&typeof l=="number"&&0<l&&(r=1.5*l,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var h=e.g;if(h){var d=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(d){var v=r.i;!v.g&&(Fn(d,"spdy")||Fn(d,"quic")||Fn(d,"h2"))&&(v.j=v.l,v.g=new Set,v.h&&(n0(v,v.h),v.h=null))}if(r.D){var m=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;m&&(r.sa=m,pt(r.F,r.D,m))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms")),r=n;var y=e;if(r.oa=jO(r,r.H?r.la:null,r.W),y.J){IO(r.i,y);var w=y,E=r.K;E&&w.setTimeout(E),w.B&&(tv(w),yf(w)),r.g=y}else xO(r);0<n.l.length&&sv(n)}else s[0]!="stop"&&s[0]!="close"||xs(n,7);else n.G==3&&(s[0]=="stop"||s[0]=="close"?s[0]=="stop"?xs(n,7):s0(n):s[0]!="noop"&&n.j&&n.j.wa(s),n.A=0)}}Ml(4)}catch{}}function OW(e){if(e.R&&typeof e.R=="function")return e.R();if(typeof e=="string")return e.split("");if(H_(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}t=[],n=0;for(r in e)t[n++]=e[r];return t}function e0(e,t){if(e.forEach&&typeof e.forEach=="function")e.forEach(t,void 0);else if(H_(e)||typeof e=="string")WP(e,t,void 0);else{if(e.T&&typeof e.T=="function")var n=e.T();else if(e.R&&typeof e.R=="function")n=void 0;else if(H_(e)||typeof e=="string"){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=OW(e),i=r.length;for(var s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}}function Qu(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Qu)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}oe=Qu.prototype;oe.R=function(){t0(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e};oe.T=function(){return t0(this),this.g.concat()};function t0(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];Xs(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)r=e.g[t],Xs(i,r)||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}oe.get=function(e,t){return Xs(this.h,e)?this.h[e]:t};oe.set=function(e,t){Xs(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t};oe.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);e.call(t,s,i,this)}};function Xs(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var mO=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function DW(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Js(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Js){this.g=t!==void 0?t:e.g,Bd(this,e.j),this.s=e.s,qd(this,e.i),Hd(this,e.m),this.l=e.l,t=e.h;var n=new Fl;n.i=t.i,t.g&&(n.g=new Qu(t.g),n.h=t.h),LA(this,n),this.o=e.o}else e&&(n=String(e).match(mO))?(this.g=!!t,Bd(this,n[1]||"",!0),this.s=fl(n[2]||""),qd(this,n[3]||"",!0),Hd(this,n[4]),this.l=fl(n[5]||"",!0),LA(this,n[6]||"",!0),this.o=fl(n[7]||"")):(this.g=!!t,this.h=new Fl(null,this.g))}Js.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Zc(t,MA,!0),":");var n=this.i;return(n||t=="file")&&(e.push("//"),(t=this.s)&&e.push(Zc(t,MA,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&e.push(":",String(n))),(n=this.l)&&(this.i&&n.charAt(0)!="/"&&e.push("/"),e.push(Zc(n,n.charAt(0)=="/"?UW:FW,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Zc(n,VW)),e.join("")};function Xi(e){return new Js(e)}function Bd(e,t,n){e.j=n?fl(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function qd(e,t,n){e.i=n?fl(t,!0):t}function Hd(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function LA(e,t,n){t instanceof Fl?(e.h=t,BW(e.h,e.g)):(n||(t=Zc(t,jW)),e.h=new Fl(t,e.g))}function pt(e,t,n){e.h.set(t,n)}function nv(e){return pt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function xW(e){return e instanceof Js?Xi(e):new Js(e,void 0)}function LW(e,t,n,r){var i=new Js(null,void 0);return e&&Bd(i,e),t&&qd(i,t),n&&Hd(i,n),r&&(i.l=r),i}function fl(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Zc(e,t,n){return typeof e=="string"?(e=encodeURI(e).replace(t,MW),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function MW(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var MA=/[#\/\?@]/g,FW=/[#\?:]/g,UW=/[#\?]/g,jW=/[#\?@]/g,VW=/#/g;function Fl(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function $o(e){e.g||(e.g=new Qu,e.h=0,e.i&&DW(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}oe=Fl.prototype;oe.add=function(e,t){$o(this),this.i=null,e=Yu(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this};function yO(e,t){$o(e),t=Yu(e,t),Xs(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,e=e.g,Xs(e.h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&t0(e)))}function _O(e,t){return $o(e),t=Yu(e,t),Xs(e.g.h,t)}oe.forEach=function(e,t){$o(this),this.g.forEach(function(n,r){WP(n,function(i){e.call(t,i,r,this)},this)},this)};oe.T=function(){$o(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],s=0;s<i.length;s++)n.push(t[r]);return n};oe.R=function(e){$o(this);var t=[];if(typeof e=="string")_O(this,e)&&(t=CA(t,this.g.get(Yu(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=CA(t,e[n])}return t};oe.set=function(e,t){return $o(this),this.i=null,e=Yu(this,e),_O(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this};oe.get=function(e,t){return e?(e=this.R(e),0<e.length?String(e[0]):t):t};function wO(e,t,n){yO(e,t),0<n.length&&(e.i=null,e.g.set(Yu(e,t),Vb(n)),e.h+=n.length)}oe.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var a=i;r[s]!==""&&(a+="="+encodeURIComponent(String(r[s]))),e.push(a)}}return this.i=e.join("&")};function Yu(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function BW(e,t){t&&!e.j&&($o(e),e.i=null,e.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(yO(this,r),wO(this,i,n))},e)),e.j=t}var qW=function(){function e(t,n){this.h=t,this.g=n}return e}();function bO(e){this.l=e||HW,Ee.PerformanceNavigationTiming?(e=Ee.performance.getEntriesByType("navigation"),e=0<e.length&&(e[0].nextHopProtocol=="hq"||e[0].nextHopProtocol=="h2")):e=!!(Ee.g&&Ee.g.Ea&&Ee.g.Ea()&&Ee.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var HW=10;function EO(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function TO(e){return e.h?1:e.g?e.g.size:0}function ew(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function n0(e,t){e.g?e.g.add(t):e.h=t}function IO(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}bO.prototype.cancel=function(){var e,t;if(this.i=SO(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){try{for(var n=HP(this.g.values()),r=n.next();!r.done;r=n.next()){var i=r.value;i.cancel()}}catch(s){e={error:s}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.g.clear()}};function SO(e){var t,n;if(e.h!=null)return e.i.concat(e.h.D);if(e.g!=null&&e.g.size!==0){var r=e.i;try{for(var i=HP(e.g.values()),s=i.next();!s.done;s=i.next()){var a=s.value;r=r.concat(a.D)}}catch(c){t={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}return Vb(e.i)}function r0(){}r0.prototype.stringify=function(e){return Ee.JSON.stringify(e,void 0)};r0.prototype.parse=function(e){return Ee.JSON.parse(e,void 0)};function KW(){this.g=new r0}function WW(e,t,n){var r=n||"";try{e0(e,function(i,s){var a=i;df(i)&&(a=zb(i)),t.push(r+s+"="+encodeURIComponent(a))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function GW(e,t){var n=new Xp;if(Ee.Image){var r=new Image;r.onload=Kh(Gh,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Kh(Gh,n,r,"TestLoadImage: error",!1,t),r.onabort=Kh(Gh,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Kh(Gh,n,r,"TestLoadImage: timeout",!1,t),Ee.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}function Gh(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch{}}function _f(e){this.l=e.$b||null,this.j=e.ib||!1}dn(_f,Xb);_f.prototype.g=function(){return new rv(this.l,this.j)};_f.prototype.i=function(e){return function(){return e}}({});function rv(e,t){Jt.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=i0,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}dn(rv,Jt);var i0=0;oe=rv.prototype;oe.open=function(e,t){if(this.readyState!=i0)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Ul(this)};oe.send=function(e){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Ee).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))};oe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,wf(this)),this.readyState=i0};oe.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ul(this)),this.g&&(this.readyState=3,Ul(this),this.g)))if(this.responseType==="arraybuffer")e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof Ee.ReadableStream<"u"&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;CO(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))};function CO(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}oe.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?wf(this):Ul(this),this.readyState==3&&CO(this)}};oe.Ua=function(e){this.g&&(this.response=this.responseText=e,wf(this))};oe.Ta=function(e){this.g&&(this.response=e,wf(this))};oe.ha=function(){this.g&&wf(this)};function wf(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Ul(e)}oe.setRequestHeader=function(e,t){this.v.append(e,t)};oe.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""};oe.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join(`\r
`)};function Ul(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty(rv.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(e){this.m=e?"include":"same-origin"}});var zW=Ee.JSON.parse;function Dt(e){Jt.call(this),this.headers=new Qu,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=AO,this.K=this.L=!1}dn(Dt,Jt);var AO="",$W=/^https?$/i,QW=["POST","PUT"];oe=Dt.prototype;oe.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Y_.g(),this.C=this.u?xA(this.u):xA(Y_),this.g.onreadystatechange=ln(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(s){FA(this,s);return}e=n||"";var i=new Qu(this.headers);r&&e0(r,function(s,a){i.set(a,s)}),r=sW(i.T()),n=Ee.FormData&&e instanceof Ee.FormData,!(0<=KP(QW,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(s,a){this.g.setRequestHeader(a,s)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{NO(this),0<this.B&&((this.K=YW(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ln(this.pa,this)):this.A=Yb(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){FA(this,s)}};function YW(e){return yu&&fW()&&typeof e.timeout=="number"&&e.ontimeout!==void 0}function XW(e){return e.toLowerCase()=="content-type"}oe.pa=function(){typeof jb<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,fn(this,"timeout"),this.abort(8))};function FA(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,kO(e),iv(e)}function kO(e){e.D||(e.D=!0,fn(e,"complete"),fn(e,"error"))}oe.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,fn(this,"complete"),fn(this,"abort"),iv(this))};oe.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),iv(this,!0)),Dt.Z.M.call(this)};oe.Fa=function(){this.s||(this.F||this.v||this.l?RO(this):this.cb())};oe.cb=function(){RO(this)};function RO(e){if(e.h&&typeof jb<"u"&&(!e.C[1]||Hi(e)!=4||e.ba()!=2)){if(e.v&&Hi(e)==4)Yb(e.Fa,0,e);else if(fn(e,"readystatechange"),Hi(e)==4){e.h=!1;try{var t=e.ba();e:switch(t){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var n=!0;break e;default:n=!1}var r;if(!(r=n)){var i;if(i=t===0){var s=String(e.H).match(mO)[1]||null;if(!s&&Ee.self&&Ee.self.location){var a=Ee.self.location.protocol;s=a.substr(0,a.length-1)}i=!$W.test(s?s.toLowerCase():"")}r=i}if(r)fn(e,"complete"),fn(e,"success");else{e.m=6;try{var c=2<Hi(e)?e.g.statusText:""}catch{c=""}e.j=c+" ["+e.ba()+"]",kO(e)}}finally{iv(e)}}}}function iv(e,t){if(e.g){NO(e);var n=e.g,r=e.C[0]?Fd:null;e.g=null,e.C=null,t||fn(e,"ready");try{n.onreadystatechange=r}catch{}}}function NO(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Ee.clearTimeout(e.A),e.A=null)}function Hi(e){return e.g?e.g.readyState:0}oe.ba=function(){try{return 2<Hi(this)?this.g.status:-1}catch{return-1}};oe.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}};oe.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),zW(t)}};function UA(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case AO:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}oe.Da=function(){return this.m};oe.La=function(){return typeof this.j=="string"?this.j:String(this.j)};function JW(e){var t="";return Bb(e,function(n,r){t+=r,t+=":",t+=n,t+=`\r
`}),t}function o0(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=JW(n),typeof e=="string"?n!=null&&encodeURIComponent(String(n)):pt(e,t,n))}function $c(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function PO(e){this.za=0,this.l=[],this.h=new Xp,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=$c("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=$c("baseRetryDelayMs",5e3,e),this.$a=$c("retryDelaySeedMs",1e4,e),this.Ya=$c("forwardChannelMaxRetries",2,e),this.ra=$c("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new bO(e&&e.concurrentRequestLimit),this.Ca=new KW,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||e.Xb!==!1}oe=PO.prototype;oe.ma=8;oe.G=1;function s0(e){if(OO(e),e.G==3){var t=e.V++,n=Xi(e.F);pt(n,"SID",e.J),pt(n,"RID",t),pt(n,"TYPE","terminate"),bf(e,n),t=new mf(e,e.h,t,void 0),t.K=2,t.v=nv(Xi(n)),n=!1,Ee.navigator&&Ee.navigator.sendBeacon&&(n=Ee.navigator.sendBeacon(t.v.toString(),"")),!n&&Ee.Image&&(new Image().src=t.v,n=!0),n||(t.g=VO(t.l,null),t.g.ea(t.v)),t.F=Date.now(),yf(t)}UO(e)}oe.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch{}};function ov(e){e.g&&(u0(e),e.g.cancel(),e.g=null)}function OO(e){ov(e),e.u&&(Ee.clearTimeout(e.u),e.u=null),Kd(e),e.i.cancel(),e.m&&(typeof e.m=="number"&&Ee.clearTimeout(e.m),e.m=null)}function Oy(e,t){e.l.push(new qW(e.Za++,t)),e.G==3&&sv(e)}function sv(e){EO(e.i)||e.m||(e.m=!0,$b(e.Ha,e),e.C=0)}function ZW(e,t){return TO(e.i)>=e.i.j-(e.m?1:0)?!1:e.m?(e.l=t.D.concat(e.l),!0):e.G==1||e.G==2||e.C>=(e.Xa?0:e.Ya)?!1:(e.m=vf(ln(e.Ha,e,t),FO(e,e.C)),e.C++,!0)}oe.Ha=function(e){if(this.m)if(this.m=null,this.G==1){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new mf(this,this.h,e,void 0),n=this.s;if(this.P&&(n?(n=GP(n),zP(n,this.P)):n=this.P),this.o===null&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){t:{var s=this.l[i];if("__data__"in s.g&&(s=s.g.__data__,typeof s=="string")){s=s.length;break t}s=void 0}if(s===void 0)break;if(r+=s,4096<r){r=i;break e}if(r===4096||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=DO(this,t,r),i=Xi(this.F),pt(i,"RID",e),pt(i,"CVER",22),this.D&&pt(i,"X-HTTP-Session-Id",this.D),bf(this,i),this.o&&n&&o0(i,this.o,n),n0(this.i,t),this.Ra&&pt(i,"TYPE","init"),this.ja?(pt(i,"$req",r),pt(i,"SID","null"),t.$=!0,J_(t,i,null)):J_(t,i,r),this.G=2}}else this.G==3&&(e?jA(this,e):this.l.length==0||EO(this.i)||jA(this))};function jA(e,t){var n;t?n=t.m:n=e.V++;var r=Xi(e.F);pt(r,"SID",e.J),pt(r,"RID",n),pt(r,"AID",e.U),bf(e,r),e.o&&e.s&&o0(r,e.o,e.s),n=new mf(e,e.h,n,e.C+1),e.o===null&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=DO(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),n0(e.i,n),J_(n,r,t)}function bf(e,t){e.j&&e0({},function(n,r){pt(t,r,n)})}function DO(e,t,n){n=Math.min(e.l.length,n);var r=e.j?ln(e.j.Oa,e.j,e):null;e:for(var i=e.l,s=-1;;){var a=["count="+n];s==-1?0<n?(s=i[0].h,a.push("ofs="+s)):s=0:a.push("ofs="+s);for(var c=!0,l=0;l<n;l++){var h=i[l].h,d=i[l].g;if(h-=s,0>h)s=Math.max(0,i[l].h-100),c=!1;else try{WW(d,a,"req"+h+"_")}catch{r&&r(d)}}if(c){r=a.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function xO(e){e.g||e.u||(e.Y=1,$b(e.Ga,e),e.A=0)}function a0(e){return e.g||e.u||3<=e.A?!1:(e.Y++,e.u=vf(ln(e.Ga,e),FO(e,e.A)),e.A++,!0)}oe.Ga=function(){if(this.u=null,LO(this),this.$&&!(this.L||this.g==null||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=vf(ln(this.bb,this),e)}};oe.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Bn(10),ov(this),LO(this))};function u0(e){e.B!=null&&(Ee.clearTimeout(e.B),e.B=null)}function LO(e){e.g=new mf(e,e.h,"rpc",e.Y),e.o===null&&(e.g.H=e.s),e.g.O=0;var t=Xi(e.oa);pt(t,"RID","rpc"),pt(t,"SID",e.J),pt(t,"CI",e.N?"0":"1"),pt(t,"AID",e.U),bf(e,t),pt(t,"TYPE","xmlhttp"),e.o&&e.s&&o0(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=nv(Xi(t)),n.s=null,n.U=!0,dO(n,e)}oe.ab=function(){this.v!=null&&(this.v=null,ov(this),a0(this),Bn(19))};function Kd(e){e.v!=null&&(Ee.clearTimeout(e.v),e.v=null)}function MO(e,t){var n=null;if(e.g==t){Kd(e),u0(e),e.g=null;var r=2}else if(ew(e.i,t))n=t.D,IO(e.i,t),r=1;else return;if(e.I=t.N,e.G!=0){if(t.i)if(r==1){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;r=Jp(),fn(r,new cO(r,n)),sv(e)}else xO(e);else if(i=t.o,i==3||i==0&&0<e.I||!(r==1&&ZW(e,t)||r==2&&a0(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:xs(e,5);break;case 4:xs(e,10);break;case 3:xs(e,6);break;default:xs(e,2)}}}function FO(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function xs(e,t){if(e.h.info("Error code "+t),t==2){var n=null;e.j&&(n=null);var r=ln(e.jb,e);n||(n=new Js("//www.google.com/images/cleardot.gif"),Ee.location&&Ee.location.protocol=="http"||Bd(n,"https"),nv(n)),GW(n.toString(),r)}else Bn(2);e.G=0,e.j&&e.j.va(t),UO(e),OO(e)}oe.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Bn(2)):(this.h.info("Failed to ping google.com"),Bn(1))};function UO(e){e.G=0,e.I=-1,e.j&&((SO(e.i).length!=0||e.l.length!=0)&&(e.i.i.length=0,Vb(e.l),e.l.length=0),e.j.ua())}function jO(e,t,n){var r=xW(n);if(r.i!="")t&&qd(r,t+"."+r.i),Hd(r,r.m);else{var i=Ee.location;r=LW(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&Bb(e.aa,function(s,a){pt(r,a,s)}),t=e.D,n=e.sa,t&&n&&pt(r,t,n),pt(r,"VER",e.ma),bf(e,r),r}function VO(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return t=n&&e.Ba&&!e.qa?new Dt(new _f({ib:!0})):new Dt(e.qa),t.L=e.H,t}function BO(){}oe=BO.prototype;oe.xa=function(){};oe.wa=function(){};oe.va=function(){};oe.ua=function(){};oe.Oa=function(){};function Wd(){if(yu&&!(10<=Number(hW)))throw Error("Environmental error: no available transport.")}Wd.prototype.g=function(e,t){return new wr(e,t)};function wr(e,t){Jt.call(this),this.g=new PO(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!Ud(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Ud(t)&&(this.g.D=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new Xu(this)}dn(wr,Jt);wr.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),$b(ln(e.hb,e,t))),Bn(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=jO(e,null,e.W),sv(e)};wr.prototype.close=function(){s0(this.g)};wr.prototype.u=function(e){if(typeof e=="string"){var t={};t.__data__=e,Oy(this.g,t)}else this.v?(t={},t.__data__=zb(e),Oy(this.g,t)):Oy(this.g,e)};wr.prototype.M=function(){this.g.j=null,delete this.j,s0(this.g),delete this.g,wr.Z.M.call(this)};function qO(e){Jb.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}dn(qO,Jb);function HO(){Zb.call(this),this.status=1}dn(HO,Zb);function Xu(e){this.g=e}dn(Xu,BO);Xu.prototype.xa=function(){fn(this.g,"a")};Xu.prototype.wa=function(e){fn(this.g,new qO(e))};Xu.prototype.va=function(e){fn(this.g,new HO)};Xu.prototype.ua=function(){fn(this.g,"b")};Wd.prototype.createWebChannel=Wd.prototype.g;wr.prototype.send=wr.prototype.u;wr.prototype.open=wr.prototype.m;wr.prototype.close=wr.prototype.close;Zp.NO_ERROR=0;Zp.TIMEOUT=8;Zp.HTTP_ERROR=6;lO.COMPLETE="complete";fO.EventType=gf;gf.OPEN="a";gf.CLOSE="b";gf.ERROR="c";gf.MESSAGE="d";Jt.prototype.listen=Jt.prototype.N;Dt.prototype.listenOnce=Dt.prototype.O;Dt.prototype.getLastError=Dt.prototype.La;Dt.prototype.getLastErrorCode=Dt.prototype.Da;Dt.prototype.getStatus=Dt.prototype.ba;Dt.prototype.getResponseJson=Dt.prototype.Qa;Dt.prototype.getResponseText=Dt.prototype.ga;Dt.prototype.send=Dt.prototype.ea;var eG=function(){return new Wd},tG=function(){return Jp()},Dy=Zp,nG=lO,rG=la,VA={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},iG=_f,zh=fO,oG=Dt;/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pr=function(){function e(t,n){var r=this;this.previousValue=t,n&&(n.sequenceNumberHandler=function(i){return r.t(i)},this.i=function(i){return n.writeSequenceNumber(i)})}return e.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},e.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},e}();pr.o=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var D={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},q=function(e){function t(n,r){var i=this;return(i=e.call(this,r)||this).code=n,i.message=r,i.name="FirebaseError",i.toString=function(){return i.name+": [code="+i.code+"]: "+i.message},i}return te(t,e),t}(Error),ei=new sa("@firebase/firestore");function tw(){return ei.logLevel}function Y(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(ei.logLevel<=Le.DEBUG){var r=t.map(c0);ei.debug.apply(ei,Ne(["Firestore (8.10.1): "+e],r))}}function Ot(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(ei.logLevel<=Le.ERROR){var r=t.map(c0);ei.error.apply(ei,Ne(["Firestore (8.10.1): "+e],r))}}function jl(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(ei.logLevel<=Le.WARN){var r=t.map(c0);ei.warn.apply(ei,Ne(["Firestore (8.10.1): "+e],r))}}function c0(e){if(typeof e=="string")return e;try{return t=e,JSON.stringify(t)}catch{return e}var t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function le(e){e===void 0&&(e="Unexpected state");var t="FIRESTORE (8.10.1) INTERNAL ASSERTION FAILED: "+e;throw Ot(t),new Error(t)}function _e(e,t){e||le()}function ee(e,t){return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sG(e){var t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var KO=function(){function e(){}return e.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length,r="";r.length<20;)for(var i=sG(40),s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length));return r},e}();function Ue(e,t){return e<t?-1:e>t?1:0}function _u(e,t,n){return e.length===t.length&&e.every(function(r,i){return n(r,t[i])})}function WO(e){return e+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tr=function(){function e(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new q(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new q(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new q(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new q(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return e.now=function(){return e.fromMillis(Date.now())},e.fromDate=function(t){return e.fromMillis(t.getTime())},e.fromMillis=function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))},e.prototype.toDate=function(){return new Date(this.toMillis())},e.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},e.prototype._compareTo=function(t){return this.seconds===t.seconds?Ue(this.nanoseconds,t.nanoseconds):Ue(this.seconds,t.seconds)},e.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},e.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},e.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},e.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},e}(),De=function(){function e(t){this.timestamp=t}return e.fromTimestamp=function(t){return new e(t)},e.min=function(){return new e(new tr(0,0))},e.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},e.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},e.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},e.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},e.prototype.toTimestamp=function(){return this.timestamp},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BA(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function fa(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function GO(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zO=function(){function e(t,n,r){n===void 0?n=0:n>t.length&&le(),r===void 0?r=t.length-n:r>t.length-n&&le(),this.segments=t,this.offset=n,this.len=r}return Object.defineProperty(e.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return e.comparator(this,t)===0},e.prototype.child=function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach(function(r){n.push(r)}):n.push(t),this.construct(n)},e.prototype.limit=function(){return this.offset+this.length},e.prototype.popFirst=function(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)},e.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},e.prototype.firstSegment=function(){return this.segments[this.offset]},e.prototype.lastSegment=function(){return this.get(this.length-1)},e.prototype.get=function(t){return this.segments[this.offset+t]},e.prototype.isEmpty=function(){return this.length===0},e.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0},e.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0},e.prototype.forEach=function(t){for(var n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])},e.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},e.comparator=function(t,n){for(var r=Math.min(t.length,n.length),i=0;i<r;i++){var s=t.get(i),a=n.get(i);if(s<a)return-1;if(s>a)return 1}return t.length<n.length?-1:t.length>n.length?1:0},e}(),$e=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return te(t,e),t.prototype.construct=function(n,r,i){return new t(n,r,i)},t.prototype.canonicalString=function(){return this.toArray().join("/")},t.prototype.toString=function(){return this.canonicalString()},t.fromString=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];for(var i=[],s=0,a=n;s<a.length;s++){var c=a[s];if(c.indexOf("//")>=0)throw new q(D.INVALID_ARGUMENT,"Invalid segment ("+c+"). Paths must not contain // in them.");i.push.apply(i,c.split("/").filter(function(l){return l.length>0}))}return new t(i)},t.emptyPath=function(){return new t([])},t}(zO),aG=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ni=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return te(t,e),t.prototype.construct=function(n,r,i){return new t(n,r,i)},t.isValidIdentifier=function(n){return aG.test(n)},t.prototype.canonicalString=function(){return this.toArray().map(function(n){return n=n.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(n)||(n="`"+n+"`"),n}).join(".")},t.prototype.toString=function(){return this.canonicalString()},t.prototype.isKeyField=function(){return this.length===1&&this.get(0)==="__name__"},t.keyField=function(){return new t(["__name__"])},t.fromServerFormat=function(n){for(var r=[],i="",s=0,a=function(){if(i.length===0)throw new q(D.INVALID_ARGUMENT,"Invalid field path ("+n+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");r.push(i),i=""},c=!1;s<n.length;){var l=n[s];if(l==="\\"){if(s+1===n.length)throw new q(D.INVALID_ARGUMENT,"Path has trailing escape character: "+n);var h=n[s+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new q(D.INVALID_ARGUMENT,"Path has invalid escape sequence: "+n);i+=h,s+=2}else l==="`"?(c=!c,s++):l!=="."||c?(i+=l,s++):(a(),s++)}if(a(),c)throw new q(D.INVALID_ARGUMENT,"Unterminated ` in path: "+n);return new t(r)},t.emptyPath=function(){return new t([])},t}(zO),wu=function(){function e(t){this.fields=t,t.sort(ni.comparator)}return e.prototype.covers=function(t){for(var n=0,r=this.fields;n<r.length;n++)if(r[n].isPrefixOf(t))return!0;return!1},e.prototype.isEqual=function(t){return _u(this.fields,t.fields,function(n,r){return n.isEqual(r)})},e}(),qn=function(){function e(t){this.binaryString=t}return e.fromBase64String=function(t){return new e(atob(t))},e.fromUint8Array=function(t){return new e(function(n){for(var r="",i=0;i<n.length;++i)r+=String.fromCharCode(n[i]);return r}(t))},e.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},e.prototype.toUint8Array=function(){return function(t){for(var n=new Uint8Array(t.length),r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}(this.binaryString)},e.prototype.approximateByteSize=function(){return 2*this.binaryString.length},e.prototype.compareTo=function(t){return Ue(this.binaryString,t.binaryString)},e.prototype.isEqual=function(t){return this.binaryString===t.binaryString},e}();qn.EMPTY_BYTE_STRING=new qn("");var uG=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ko(e){if(_e(!!e),typeof e=="string"){var t=0,n=uG.exec(e);if(_e(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Pt(e.seconds),nanos:Pt(e.nanos)}}function Pt(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function bu(e){return typeof e=="string"?qn.fromBase64String(e):qn.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l0(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function $O(e){var t=e.mapValue.fields.__previous_value__;return l0(t)?$O(t):t}function Vl(e){var t=Ko(e.mapValue.fields.__local_write_time__.timestampValue);return new tr(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ha(e){return e==null}function Gd(e){return e===0&&1/e==-1/0}function QO(e){return typeof e=="number"&&Number.isInteger(e)&&!Gd(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fe=function(){function e(t){this.path=t}return e.fromPath=function(t){return new e($e.fromString(t))},e.fromName=function(t){return new e($e.fromString(t).popFirst(5))},e.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},e.prototype.isEqual=function(t){return t!==null&&$e.comparator(this.path,t.path)===0},e.prototype.toString=function(){return this.path.toString()},e.comparator=function(t,n){return $e.comparator(t.path,n.path)},e.isDocumentKey=function(t){return t.length%2==0},e.fromSegments=function(t){return new e(new $e(t.slice()))},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zs(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?l0(e)?4:10:le()}function ki(e,t){var n=Zs(e);if(n!==Zs(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Vl(e).isEqual(Vl(t));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;var s=Ko(r.timestampValue),a=Ko(i.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(r,i){return bu(r.bytesValue).isEqual(bu(i.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(r,i){return Pt(r.geoPointValue.latitude)===Pt(i.geoPointValue.latitude)&&Pt(r.geoPointValue.longitude)===Pt(i.geoPointValue.longitude)}(e,t);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Pt(r.integerValue)===Pt(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){var s=Pt(r.doubleValue),a=Pt(i.doubleValue);return s===a?Gd(s)===Gd(a):isNaN(s)&&isNaN(a)}return!1}(e,t);case 9:return _u(e.arrayValue.values||[],t.arrayValue.values||[],ki);case 10:return function(r,i){var s=r.mapValue.fields||{},a=i.mapValue.fields||{};if(BA(s)!==BA(a))return!1;for(var c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!ki(s[c],a[c])))return!1;return!0}(e,t);default:return le()}}function Bl(e,t){return(e.values||[]).find(function(n){return ki(n,t)})!==void 0}function Eu(e,t){var n=Zs(e),r=Zs(t);if(n!==r)return Ue(n,r);switch(n){case 0:return 0;case 1:return Ue(e.booleanValue,t.booleanValue);case 2:return function(i,s){var a=Pt(i.integerValue||i.doubleValue),c=Pt(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(e,t);case 3:return qA(e.timestampValue,t.timestampValue);case 4:return qA(Vl(e),Vl(t));case 5:return Ue(e.stringValue,t.stringValue);case 6:return function(i,s){var a=bu(i),c=bu(s);return a.compareTo(c)}(e.bytesValue,t.bytesValue);case 7:return function(i,s){for(var a=i.split("/"),c=s.split("/"),l=0;l<a.length&&l<c.length;l++){var h=Ue(a[l],c[l]);if(h!==0)return h}return Ue(a.length,c.length)}(e.referenceValue,t.referenceValue);case 8:return function(i,s){var a=Ue(Pt(i.latitude),Pt(s.latitude));return a!==0?a:Ue(Pt(i.longitude),Pt(s.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(i,s){for(var a=i.values||[],c=s.values||[],l=0;l<a.length&&l<c.length;++l){var h=Eu(a[l],c[l]);if(h)return h}return Ue(a.length,c.length)}(e.arrayValue,t.arrayValue);case 10:return function(i,s){var a=i.fields||{},c=Object.keys(a),l=s.fields||{},h=Object.keys(l);c.sort(),h.sort();for(var d=0;d<c.length&&d<h.length;++d){var v=Ue(c[d],h[d]);if(v!==0)return v;var m=Eu(a[c[d]],l[h[d]]);if(m!==0)return m}return Ue(c.length,h.length)}(e.mapValue,t.mapValue);default:throw le()}}function qA(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Ue(e,t);var n=Ko(e),r=Ko(t),i=Ue(n.seconds,r.seconds);return i!==0?i:Ue(n.nanos,r.nanos)}function f0(e){return nw(e)}function nw(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(r){var i=Ko(r);return"time("+i.seconds+","+i.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?bu(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,fe.fromName(n).toString()):"geoPointValue"in e?"geo("+(t=e.geoPointValue).latitude+","+t.longitude+")":"arrayValue"in e?function(r){for(var i="[",s=!0,a=0,c=r.values||[];a<c.length;a++)s?s=!1:i+=",",i+=nw(c[a]);return i+"]"}(e.arrayValue):"mapValue"in e?function(r){for(var i="{",s=!0,a=0,c=Object.keys(r.fields||{}).sort();a<c.length;a++){var l=c[a];s?s=!1:i+=",",i+=l+":"+nw(r.fields[l])}return i+"}"}(e.mapValue):le();var t,n}function zd(e,t){return{referenceValue:"projects/"+e.projectId+"/databases/"+e.database+"/documents/"+t.path.canonicalString()}}function rw(e){return!!e&&"integerValue"in e}function h0(e){return!!e&&"arrayValue"in e}function HA(e){return!!e&&"nullValue"in e}function KA(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function cd(e){return!!e&&"mapValue"in e}function hl(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return fa(e.mapValue.fields,function(i,s){return t.mapValue.fields[i]=hl(s)}),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=hl(e.arrayValue.values[r]);return n}return Object.assign({},e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hr=function(){function e(t){this.value=t}return e.empty=function(){return new e({mapValue:{}})},e.prototype.field=function(t){if(t.isEmpty())return this.value;for(var n=this.value,r=0;r<t.length-1;++r)if(!cd(n=(n.mapValue.fields||{})[t.get(r)]))return null;return(n=(n.mapValue.fields||{})[t.lastSegment()])||null},e.prototype.set=function(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=hl(n)},e.prototype.setAll=function(t){var n=this,r=ni.emptyPath(),i={},s=[];t.forEach(function(c,l){if(!r.isImmediateParentOf(l)){var h=n.getFieldsMap(r);n.applyChanges(h,i,s),i={},s=[],r=l.popLast()}c?i[l.lastSegment()]=hl(c):s.push(l.lastSegment())});var a=this.getFieldsMap(r);this.applyChanges(a,i,s)},e.prototype.delete=function(t){var n=this.field(t.popLast());cd(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]},e.prototype.isEqual=function(t){return ki(this.value,t.value)},e.prototype.getFieldsMap=function(t){var n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(var r=0;r<t.length;++r){var i=n.mapValue.fields[t.get(r)];cd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields},e.prototype.applyChanges=function(t,n,r){fa(n,function(c,l){return t[c]=l});for(var i=0,s=r;i<s.length;i++){var a=s[i];delete t[a]}},e.prototype.clone=function(){return new e(hl(this.value))},e}();function YO(e){var t=[];return fa(e.fields,function(n,r){var i=new ni([n]);if(cd(r)){var s=YO(r.mapValue).fields;if(s.length===0)t.push(i);else for(var a=0,c=s;a<c.length;a++){var l=c[a];t.push(i.child(l))}}else t.push(i)}),new wu(t)}var hn=function(){function e(t,n,r,i,s){this.key=t,this.documentType=n,this.version=r,this.data=i,this.documentState=s}return e.newInvalidDocument=function(t){return new e(t,0,De.min(),hr.empty(),0)},e.newFoundDocument=function(t,n,r){return new e(t,1,n,r,0)},e.newNoDocument=function(t,n){return new e(t,2,n,hr.empty(),0)},e.newUnknownDocument=function(t,n){return new e(t,3,n,hr.empty(),2)},e.prototype.convertToFoundDocument=function(t,n){return this.version=t,this.documentType=1,this.data=n,this.documentState=0,this},e.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=hr.empty(),this.documentState=0,this},e.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=hr.empty(),this.documentState=2,this},e.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},e.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(e.prototype,"hasLocalMutations",{get:function(){return this.documentState===1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasCommittedMutations",{get:function(){return this.documentState===2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isValidDocument=function(){return this.documentType!==0},e.prototype.isFoundDocument=function(){return this.documentType===1},e.prototype.isNoDocument=function(){return this.documentType===2},e.prototype.isUnknownDocument=function(){return this.documentType===3},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)},e.prototype.clone=function(){return new e(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},e}(),cG=function(e,t,n,r,i,s,a){t===void 0&&(t=null),n===void 0&&(n=[]),r===void 0&&(r=[]),i===void 0&&(i=null),s===void 0&&(s=null),a===void 0&&(a=null),this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=a,this.h=null};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WA(e,t,n,r,i,s,a){return t===void 0&&(t=null),n===void 0&&(n=[]),r===void 0&&(r=[]),i===void 0&&(i=null),s===void 0&&(s=null),a===void 0&&(a=null),new cG(e,t,n,r,i,s,a)}function Ef(e){var t=ee(e);if(t.h===null){var n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(function(r){return function(i){return i.field.canonicalString()+i.op.toString()+f0(i.value)}(r)}).join(","),n+="|ob:",n+=t.orderBy.map(function(r){return function(i){return i.field.canonicalString()+i.dir}(r)}).join(","),ha(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=Qd(t.startAt)),t.endAt&&(n+="|ub:",n+=Qd(t.endAt)),t.h=n}return t.h}function av(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!mG(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],s=t.filters[r],i.op!==s.op||!i.field.isEqual(s.field)||!ki(i.value,s.value))return!1;var i,s;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!zA(e.startAt,t.startAt)&&zA(e.endAt,t.endAt)}function $d(e){return fe.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}var vr=function(e){function t(n,r,i){var s=this;return(s=e.call(this)||this).field=n,s.op=r,s.value=i,s}return te(t,e),t.create=function(n,r,i){return n.isKeyField()?r==="in"||r==="not-in"?this.l(n,r,i):new lG(n,r,i):r==="array-contains"?new dG(n,i):r==="in"?new pG(n,i):r==="not-in"?new vG(n,i):r==="array-contains-any"?new gG(n,i):new t(n,r,i)},t.l=function(n,r,i){return r==="in"?new fG(n,i):new hG(n,i)},t.prototype.matches=function(n){var r=n.data.field(this.field);return this.op==="!="?r!==null&&this.m(Eu(r,this.value)):r!==null&&Zs(this.value)===Zs(r)&&this.m(Eu(r,this.value))},t.prototype.m=function(n){switch(this.op){case"<":return n<0;case"<=":return n<=0;case"==":return n===0;case"!=":return n!==0;case">":return n>0;case">=":return n>=0;default:return le()}},t.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},t}(function(){}),lG=function(e){function t(n,r,i){var s=this;return(s=e.call(this,n,r,i)||this).key=fe.fromName(i.referenceValue),s}return te(t,e),t.prototype.matches=function(n){var r=fe.comparator(n.key,this.key);return this.m(r)},t}(vr),fG=function(e){function t(n,r){var i=this;return(i=e.call(this,n,"in",r)||this).keys=XO("in",r),i}return te(t,e),t.prototype.matches=function(n){return this.keys.some(function(r){return r.isEqual(n.key)})},t}(vr),hG=function(e){function t(n,r){var i=this;return(i=e.call(this,n,"not-in",r)||this).keys=XO("not-in",r),i}return te(t,e),t.prototype.matches=function(n){return!this.keys.some(function(r){return r.isEqual(n.key)})},t}(vr);function XO(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(function(r){return fe.fromName(r.referenceValue)})}var dG=function(e){function t(n,r){return e.call(this,n,"array-contains",r)||this}return te(t,e),t.prototype.matches=function(n){var r=n.data.field(this.field);return h0(r)&&Bl(r.arrayValue,this.value)},t}(vr),pG=function(e){function t(n,r){return e.call(this,n,"in",r)||this}return te(t,e),t.prototype.matches=function(n){var r=n.data.field(this.field);return r!==null&&Bl(this.value.arrayValue,r)},t}(vr),vG=function(e){function t(n,r){return e.call(this,n,"not-in",r)||this}return te(t,e),t.prototype.matches=function(n){if(Bl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var r=n.data.field(this.field);return r!==null&&!Bl(this.value.arrayValue,r)},t}(vr),gG=function(e){function t(n,r){return e.call(this,n,"array-contains-any",r)||this}return te(t,e),t.prototype.matches=function(n){var r=this,i=n.data.field(this.field);return!(!h0(i)||!i.arrayValue.values)&&i.arrayValue.values.some(function(s){return Bl(r.value.arrayValue,s)})},t}(vr),ql=function(e,t){this.position=e,this.before=t};function Qd(e){return(e.before?"b":"a")+":"+e.position.map(function(t){return f0(t)}).join(",")}var ou=function(e,t){t===void 0&&(t="asc"),this.field=e,this.dir=t};function mG(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function GA(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var s=t[i],a=e.position[i];if(r=s.field.isKeyField()?fe.comparator(fe.fromName(a.referenceValue),n.key):Eu(a,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return e.before?r<=0:r<0}function zA(e,t){if(e===null)return t===null;if(t===null||e.before!==t.before||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!ki(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var no=function(e,t,n,r,i,s,a,c){t===void 0&&(t=null),n===void 0&&(n=[]),r===void 0&&(r=[]),i===void 0&&(i=null),s===void 0&&(s="F"),a===void 0&&(a=null),c===void 0&&(c=null),this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=a,this.endAt=c,this.p=null,this.T=null,this.startAt,this.endAt};function JO(e,t,n,r,i,s,a,c){return new no(e,t,n,r,i,s,a,c)}function Ju(e){return new no(e)}function ld(e){return!ha(e.limit)&&e.limitType==="F"}function Yd(e){return!ha(e.limit)&&e.limitType==="L"}function d0(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function p0(e){for(var t=0,n=e.filters;t<n.length;t++){var r=n[t];if(r.g())return r.field}return null}function v0(e){return e.collectionGroup!==null}function Tu(e){var t=ee(e);if(t.p===null){t.p=[];var n=p0(t),r=d0(t);if(n!==null&&r===null)n.isKeyField()||t.p.push(new ou(n)),t.p.push(new ou(ni.keyField(),"asc"));else{for(var i=!1,s=0,a=t.explicitOrderBy;s<a.length;s++){var c=a[s];t.p.push(c),c.field.isKeyField()&&(i=!0)}if(!i){var l=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.p.push(new ou(ni.keyField(),l))}}}return t.p}function Mr(e){var t=ee(e);if(!t.T)if(t.limitType==="F")t.T=WA(t.path,t.collectionGroup,Tu(t),t.filters,t.limit,t.startAt,t.endAt);else{for(var n=[],r=0,i=Tu(t);r<i.length;r++){var s=i[r],a=s.dir==="desc"?"asc":"desc";n.push(new ou(s.field,a))}var c=t.endAt?new ql(t.endAt.position,!t.endAt.before):null,l=t.startAt?new ql(t.startAt.position,!t.startAt.before):null;t.T=WA(t.path,t.collectionGroup,n,t.filters,t.limit,c,l)}return t.T}function ZO(e,t,n){return new no(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Tf(e,t){return av(Mr(e),Mr(t))&&e.limitType===t.limitType}function eD(e){return Ef(Mr(e))+"|lt:"+e.limitType}function iw(e){return"Query(target="+function(t){var n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=", filters: ["+t.filters.map(function(r){return(i=r).field.canonicalString()+" "+i.op+" "+f0(i.value);var i}).join(", ")+"]"),ha(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=", orderBy: ["+t.orderBy.map(function(r){return function(i){return i.field.canonicalString()+" ("+i.dir+")"}(r)}).join(", ")+"]"),t.startAt&&(n+=", startAt: "+Qd(t.startAt)),t.endAt&&(n+=", endAt: "+Qd(t.endAt)),"Target("+n+")"}(Mr(e))+"; limitType="+e.limitType+")"}function If(e,t){return t.isFoundDocument()&&function(n,r){var i=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):fe.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(e,t)&&function(n,r){for(var i=0,s=n.explicitOrderBy;i<s.length;i++){var a=s[i];if(!a.field.isKeyField()&&r.data.field(a.field)===null)return!1}return!0}(e,t)&&function(n,r){for(var i=0,s=n.filters;i<s.length;i++)if(!s[i].matches(r))return!1;return!0}(e,t)&&function(n,r){return!(n.startAt&&!GA(n.startAt,Tu(n),r))&&(!n.endAt||!GA(n.endAt,Tu(n),r))}(e,t)}function tD(e){return function(t,n){for(var r=!1,i=0,s=Tu(e);i<s.length;i++){var a=s[i],c=yG(a,t,n);if(c!==0)return c;r=r||a.field.isKeyField()}return 0}}function yG(e,t,n){var r=e.field.isKeyField()?fe.comparator(t.key,n.key):function(i,s,a){var c=s.data.field(i),l=a.data.field(i);return c!==null&&l!==null?Eu(c,l):le()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return le()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nD(e,t){if(e.I){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gd(t)?"-0":t}}function rD(e){return{integerValue:""+e}}function iD(e,t){return QO(t)?rD(t):nD(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var uv=function(){this._=void 0};function _G(e,t,n){return e instanceof Iu?function(r,i){var s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(n,t):e instanceof ea?sD(e,t):e instanceof ta?aD(e,t):function(r,i){var s=oD(r,i),a=$A(s)+$A(r.A);return rw(s)&&rw(r.A)?rD(a):nD(r.R,a)}(e,t)}function wG(e,t,n){return e instanceof ea?sD(e,t):e instanceof ta?aD(e,t):n}function oD(e,t){return e instanceof Su?rw(n=t)||function(r){return!!r&&"doubleValue"in r}(n)?t:{integerValue:0}:null;var n}var Iu=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return te(t,e),t}(uv),ea=function(e){function t(n){var r=this;return(r=e.call(this)||this).elements=n,r}return te(t,e),t}(uv);function sD(e,t){for(var n=uD(t),r=function(a){n.some(function(c){return ki(c,a)})||n.push(a)},i=0,s=e.elements;i<s.length;i++)r(s[i]);return{arrayValue:{values:n}}}var ta=function(e){function t(n){var r=this;return(r=e.call(this)||this).elements=n,r}return te(t,e),t}(uv);function aD(e,t){for(var n=uD(t),r=function(a){n=n.filter(function(c){return!ki(c,a)})},i=0,s=e.elements;i<s.length;i++)r(s[i]);return{arrayValue:{values:n}}}var Su=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).R=n,i.A=r,i}return te(t,e),t}(uv);function $A(e){return Pt(e.integerValue||e.doubleValue)}function uD(e){return h0(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Sf=function(e,t){this.field=e,this.transform=t},bG=function(e,t){this.version=e,this.transformResults=t},_n=function(){function e(t,n){this.updateTime=t,this.exists=n}return e.none=function(){return new e},e.exists=function(t){return new e(void 0,t)},e.updateTime=function(t){return new e(t)},Object.defineProperty(e.prototype,"isNone",{get:function(){return this.updateTime===void 0&&this.exists===void 0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},e}();function fd(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}var cv=function(){};function EG(e,t,n){e instanceof Cf?function(r,i,s){var a=r.value.clone(),c=XA(r.fieldTransforms,i,s.transformResults);a.setAll(c),i.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(e,t,n):e instanceof Qo?function(r,i,s){if(fd(r.precondition,i)){var a=XA(r.fieldTransforms,i,s.transformResults),c=i.data;c.setAll(cD(r)),c.setAll(a),i.convertToFoundDocument(s.version,c).setHasCommittedMutations()}else i.convertToUnknownDocument(s.version)}(e,t,n):function(r,i,s){i.convertToNoDocument(s.version).setHasCommittedMutations()}(0,t,n)}function ow(e,t,n){e instanceof Cf?function(r,i,s){if(fd(r.precondition,i)){var a=r.value.clone(),c=JA(r.fieldTransforms,s,i);a.setAll(c),i.convertToFoundDocument(YA(i),a).setHasLocalMutations()}}(e,t,n):e instanceof Qo?function(r,i,s){if(fd(r.precondition,i)){var a=JA(r.fieldTransforms,s,i),c=i.data;c.setAll(cD(r)),c.setAll(a),i.convertToFoundDocument(YA(i),c).setHasLocalMutations()}}(e,t,n):function(r,i){fd(r.precondition,i)&&i.convertToNoDocument(De.min())}(e,t)}function TG(e,t){for(var n=null,r=0,i=e.fieldTransforms;r<i.length;r++){var s=i[r],a=t.data.field(s.field),c=oD(s.transform,a||null);c!=null&&(n==null&&(n=hr.empty()),n.set(s.field,c))}return n||null}function QA(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&_u(n,r,function(i,s){return function(a,c){return a.field.isEqual(c.field)&&function(l,h){return l instanceof ea&&h instanceof ea||l instanceof ta&&h instanceof ta?_u(l.elements,h.elements,ki):l instanceof Su&&h instanceof Su?ki(l.A,h.A):l instanceof Iu&&h instanceof Iu}(a.transform,c.transform)}(i,s)})}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function YA(e){return e.isFoundDocument()?e.version:De.min()}var Cf=function(e){function t(n,r,i,s){s===void 0&&(s=[]);var a=this;return(a=e.call(this)||this).key=n,a.value=r,a.precondition=i,a.fieldTransforms=s,a.type=0,a}return te(t,e),t}(cv),Qo=function(e){function t(n,r,i,s,a){a===void 0&&(a=[]);var c=this;return(c=e.call(this)||this).key=n,c.data=r,c.fieldMask=i,c.precondition=s,c.fieldTransforms=a,c.type=1,c}return te(t,e),t}(cv);function cD(e){var t=new Map;return e.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}}),t}function XA(e,t,n){var r=new Map;_e(e.length===n.length);for(var i=0;i<n.length;i++){var s=e[i],a=s.transform,c=t.data.field(s.field);r.set(s.field,wG(a,c,n[i]))}return r}function JA(e,t,n){for(var r=new Map,i=0,s=e;i<s.length;i++){var a=s[i],c=a.transform,l=n.data.field(a.field);r.set(a.field,_G(c,l,t))}return r}var Nt,Be,Af=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).key=n,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return te(t,e),t}(cv),g0=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).key=n,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return te(t,e),t}(cv),IG=function(e){this.count=e};function lD(e){switch(e){case D.OK:return le();case D.CANCELLED:case D.UNKNOWN:case D.DEADLINE_EXCEEDED:case D.RESOURCE_EXHAUSTED:case D.INTERNAL:case D.UNAVAILABLE:case D.UNAUTHENTICATED:return!1;case D.INVALID_ARGUMENT:case D.NOT_FOUND:case D.ALREADY_EXISTS:case D.PERMISSION_DENIED:case D.FAILED_PRECONDITION:case D.ABORTED:case D.OUT_OF_RANGE:case D.UNIMPLEMENTED:case D.DATA_LOSS:return!0;default:return le()}}function fD(e){if(e===void 0)return Ot("GRPC error has no .code"),D.UNKNOWN;switch(e){case Nt.OK:return D.OK;case Nt.CANCELLED:return D.CANCELLED;case Nt.UNKNOWN:return D.UNKNOWN;case Nt.DEADLINE_EXCEEDED:return D.DEADLINE_EXCEEDED;case Nt.RESOURCE_EXHAUSTED:return D.RESOURCE_EXHAUSTED;case Nt.INTERNAL:return D.INTERNAL;case Nt.UNAVAILABLE:return D.UNAVAILABLE;case Nt.UNAUTHENTICATED:return D.UNAUTHENTICATED;case Nt.INVALID_ARGUMENT:return D.INVALID_ARGUMENT;case Nt.NOT_FOUND:return D.NOT_FOUND;case Nt.ALREADY_EXISTS:return D.ALREADY_EXISTS;case Nt.PERMISSION_DENIED:return D.PERMISSION_DENIED;case Nt.FAILED_PRECONDITION:return D.FAILED_PRECONDITION;case Nt.ABORTED:return D.ABORTED;case Nt.OUT_OF_RANGE:return D.OUT_OF_RANGE;case Nt.UNIMPLEMENTED:return D.UNIMPLEMENTED;case Nt.DATA_LOSS:return D.DATA_LOSS;default:return le()}}(Be=Nt||(Nt={}))[Be.OK=0]="OK",Be[Be.CANCELLED=1]="CANCELLED",Be[Be.UNKNOWN=2]="UNKNOWN",Be[Be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Be[Be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Be[Be.NOT_FOUND=5]="NOT_FOUND",Be[Be.ALREADY_EXISTS=6]="ALREADY_EXISTS",Be[Be.PERMISSION_DENIED=7]="PERMISSION_DENIED",Be[Be.UNAUTHENTICATED=16]="UNAUTHENTICATED",Be[Be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Be[Be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Be[Be.ABORTED=10]="ABORTED",Be[Be.OUT_OF_RANGE=11]="OUT_OF_RANGE",Be[Be.UNIMPLEMENTED=12]="UNIMPLEMENTED",Be[Be.INTERNAL=13]="INTERNAL",Be[Be.UNAVAILABLE=14]="UNAVAILABLE",Be[Be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cn=function(){function e(t,n){this.comparator=t,this.root=n||So.EMPTY}return e.prototype.insert=function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,So.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,So.BLACK,null,null))},e.prototype.get=function(t){for(var n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null},e.prototype.indexOf=function(t){for(var n=0,r=this.root;!r.isEmpty();){var i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1},e.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(e.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),e.prototype.minKey=function(){return this.root.minKey()},e.prototype.maxKey=function(){return this.root.maxKey()},e.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},e.prototype.forEach=function(t){this.inorderTraversal(function(n,r){return t(n,r),!1})},e.prototype.toString=function(){var t=[];return this.inorderTraversal(function(n,r){return t.push(n+":"+r),!1}),"{"+t.join(", ")+"}"},e.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},e.prototype.getIterator=function(){return new $h(this.root,null,this.comparator,!1)},e.prototype.getIteratorFrom=function(t){return new $h(this.root,t,this.comparator,!1)},e.prototype.getReverseIterator=function(){return new $h(this.root,null,this.comparator,!0)},e.prototype.getReverseIteratorFrom=function(t){return new $h(this.root,t,this.comparator,!0)},e}(),$h=function(){function e(t,n,r,i){this.isReverse=i,this.nodeStack=[];for(var s=1;!t.isEmpty();)if(s=n?r(t.key,n):1,i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return e.prototype.getNext=function(){var t=this.nodeStack.pop(),n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n},e.prototype.hasNext=function(){return this.nodeStack.length>0},e.prototype.peek=function(){if(this.nodeStack.length===0)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},e}(),So=function(){function e(t,n,r,i,s){this.key=t,this.value=n,this.color=r??e.RED,this.left=i??e.EMPTY,this.right=s??e.EMPTY,this.size=this.left.size+1+this.right.size}return e.prototype.copy=function(t,n,r,i,s){return new e(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},e.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},e.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},e.prototype.minKey=function(){return this.min().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(t,n,r){var i=this,s=r(t,i.key);return(i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r))).fixUp()},e.prototype.removeMin=function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()},e.prototype.remove=function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()},e.prototype.isRed=function(){return this.color},e.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},e.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},e.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},e.prototype.rotateLeft=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)},e.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},e.prototype.check=function(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw le();var t=this.left.check();if(t!==this.right.check())throw le();return t+(this.isRed()?0:1)},e}();So.EMPTY=null,So.RED=!0,So.BLACK=!1,So.EMPTY=new(function(){function e(){this.size=0}return Object.defineProperty(e.prototype,"key",{get:function(){throw le()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){throw le()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){throw le()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){throw le()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){throw le()},enumerable:!1,configurable:!0}),e.prototype.copy=function(t,n,r,i,s){return this},e.prototype.insert=function(t,n,r){return new So(t,n)},e.prototype.remove=function(t,n){return this},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(t){return!1},e.prototype.reverseTraversal=function(t){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.isRed=function(){return!1},e.prototype.checkMaxDepth=function(){return!0},e.prototype.check=function(){return 0},e}());/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vt=function(){function e(t){this.comparator=t,this.data=new Cn(this.comparator)}return e.prototype.has=function(t){return this.data.get(t)!==null},e.prototype.first=function(){return this.data.minKey()},e.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(e.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),e.prototype.indexOf=function(t){return this.data.indexOf(t)},e.prototype.forEach=function(t){this.data.inorderTraversal(function(n,r){return t(n),!1})},e.prototype.forEachInRange=function(t,n){for(var r=this.data.getIteratorFrom(t[0]);r.hasNext();){var i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}},e.prototype.forEachWhile=function(t,n){var r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return},e.prototype.firstAfterOrEqual=function(t){var n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null},e.prototype.getIterator=function(){return new ZA(this.data.getIterator())},e.prototype.getIteratorFrom=function(t){return new ZA(this.data.getIteratorFrom(t))},e.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},e.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},e.prototype.isEmpty=function(){return this.data.isEmpty()},e.prototype.unionWith=function(t){var n=this;return n.size<t.size&&(n=t,t=this),t.forEach(function(r){n=n.add(r)}),n},e.prototype.isEqual=function(t){if(!(t instanceof e)||this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0},e.prototype.toArray=function(){var t=[];return this.forEach(function(n){t.push(n)}),t},e.prototype.toString=function(){var t=[];return this.forEach(function(n){return t.push(n)}),"SortedSet("+t.toString()+")"},e.prototype.copy=function(t){var n=new e(this.comparator);return n.data=t,n},e}(),ZA=function(){function e(t){this.iter=t}return e.prototype.getNext=function(){return this.iter.getNext().key},e.prototype.hasNext=function(){return this.iter.hasNext()},e}(),SG=new Cn(fe.comparator);function Dr(){return SG}var CG=new Cn(fe.comparator);function sw(){return CG}var AG=new Cn(fe.comparator);function hD(){return AG}var kG=new Vt(fe.comparator);function et(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=kG,r=0,i=e;r<i.length;r++){var s=i[r];n=n.add(s)}return n}var RG=new Vt(Ue);function lv(){return RG}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var m0=function(){function e(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}return e.createSynthesizedRemoteEventForCurrentChange=function(t,n){var r=new Map;return r.set(t,y0.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(De.min(),r,lv(),Dr(),et())},e}(),y0=function(){function e(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}return e.createSynthesizedTargetChangeForCurrentChange=function(t,n){return new e(qn.EMPTY_BYTE_STRING,n,et(),et(),et())},e}(),hd=function(e,t,n,r){this.v=e,this.removedTargetIds=t,this.key=n,this.P=r},dD=function(e,t){this.targetId=e,this.V=t},pD=function(e,t,n,r){n===void 0&&(n=qn.EMPTY_BYTE_STRING),r===void 0&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r},ek=function(){function e(){this.S=0,this.D=nk(),this.C=qn.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}return Object.defineProperty(e.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"F",{get:function(){return this.S!==0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"$",{get:function(){return this.k},enumerable:!1,configurable:!0}),e.prototype.O=function(t){t.approximateByteSize()>0&&(this.k=!0,this.C=t)},e.prototype.M=function(){var t=et(),n=et(),r=et();return this.D.forEach(function(i,s){switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:le()}}),new y0(this.C,this.N,t,n,r)},e.prototype.L=function(){this.k=!1,this.D=nk()},e.prototype.B=function(t,n){this.k=!0,this.D=this.D.insert(t,n)},e.prototype.q=function(t){this.k=!0,this.D=this.D.remove(t)},e.prototype.U=function(){this.S+=1},e.prototype.K=function(){this.S-=1},e.prototype.j=function(){this.k=!0,this.N=!0},e}(),NG=function(){function e(t){this.W=t,this.G=new Map,this.H=Dr(),this.J=tk(),this.Y=new Vt(Ue)}return e.prototype.X=function(t){for(var n=0,r=t.v;n<r.length;n++){var i=r[n];t.P&&t.P.isFoundDocument()?this.Z(i,t.P):this.tt(i,t.key,t.P)}for(var s=0,a=t.removedTargetIds;s<a.length;s++)i=a[s],this.tt(i,t.key,t.P)},e.prototype.et=function(t){var n=this;this.forEachTarget(t,function(r){var i=n.nt(r);switch(t.state){case 0:n.st(r)&&i.O(t.resumeToken);break;case 1:i.K(),i.F||i.L(),i.O(t.resumeToken);break;case 2:i.K(),i.F||n.removeTarget(r);break;case 3:n.st(r)&&(i.j(),i.O(t.resumeToken));break;case 4:n.st(r)&&(n.it(r),i.O(t.resumeToken));break;default:le()}})},e.prototype.forEachTarget=function(t,n){var r=this;t.targetIds.length>0?t.targetIds.forEach(n):this.G.forEach(function(i,s){r.st(s)&&n(s)})},e.prototype.rt=function(t){var n=t.targetId,r=t.V.count,i=this.ot(n);if(i){var s=i.target;if($d(s))if(r===0){var a=new fe(s.path);this.tt(n,a,hn.newNoDocument(a,De.min()))}else _e(r===1);else this.ct(n)!==r&&(this.it(n),this.Y=this.Y.add(n))}},e.prototype.ut=function(t){var n=this,r=new Map;this.G.forEach(function(a,c){var l=n.ot(c);if(l){if(a.current&&$d(l.target)){var h=new fe(l.target.path);n.H.get(h)!==null||n.at(c,h)||n.tt(c,h,hn.newNoDocument(h,t))}a.$&&(r.set(c,a.M()),a.L())}});var i=et();this.J.forEach(function(a,c){var l=!0;c.forEachWhile(function(h){var d=n.ot(h);return!d||d.purpose===2||(l=!1,!1)}),l&&(i=i.add(a))});var s=new m0(t,r,this.Y,this.H,i);return this.H=Dr(),this.J=tk(),this.Y=new Vt(Ue),s},e.prototype.Z=function(t,n){if(this.st(t)){var r=this.at(t,n.key)?2:0;this.nt(t).B(n.key,r),this.H=this.H.insert(n.key,n),this.J=this.J.insert(n.key,this.ht(n.key).add(t))}},e.prototype.tt=function(t,n,r){if(this.st(t)){var i=this.nt(t);this.at(t,n)?i.B(n,1):i.q(n),this.J=this.J.insert(n,this.ht(n).delete(t)),r&&(this.H=this.H.insert(n,r))}},e.prototype.removeTarget=function(t){this.G.delete(t)},e.prototype.ct=function(t){var n=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size},e.prototype.U=function(t){this.nt(t).U()},e.prototype.nt=function(t){var n=this.G.get(t);return n||(n=new ek,this.G.set(t,n)),n},e.prototype.ht=function(t){var n=this.J.get(t);return n||(n=new Vt(Ue),this.J=this.J.insert(t,n)),n},e.prototype.st=function(t){var n=this.ot(t)!==null;return n||Y("WatchChangeAggregator","Detected inactive target",t),n},e.prototype.ot=function(t){var n=this.G.get(t);return n&&n.F?null:this.W.lt(t)},e.prototype.it=function(t){var n=this;this.G.set(t,new ek),this.W.getRemoteKeysForTarget(t).forEach(function(r){n.tt(t,r,null)})},e.prototype.at=function(t,n){return this.W.getRemoteKeysForTarget(t).has(n)},e}();function tk(){return new Cn(fe.comparator)}function nk(){return new Cn(fe.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var PG={asc:"ASCENDING",desc:"DESCENDING"},OG={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},DG=function(e,t){this.databaseId=e,this.I=t};function Hl(e,t){return e.I?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}}function vD(e,t){return e.I?t.toBase64():t.toUint8Array()}function xG(e,t){return Hl(e,t.toTimestamp())}function Yt(e){return _e(!!e),De.fromTimestamp(function(t){var n=Ko(t);return new tr(n.seconds,n.nanos)}(e))}function _0(e,t){return function(n){return new $e(["projects",n.projectId,"databases",n.database])}(e).child("documents").child(t).canonicalString()}function gD(e){var t=$e.fromString(e);return _e(ID(t)),t}function Kl(e,t){return _0(e.databaseId,t.path)}function wi(e,t){var n=gD(t);if(n.get(1)!==e.databaseId.projectId)throw new q(D.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new q(D.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new fe(yD(n))}function aw(e,t){return _0(e.databaseId,t)}function mD(e){var t=gD(e);return t.length===4?$e.emptyPath():yD(t)}function Wl(e){return new $e(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function yD(e){return _e(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function rk(e,t,n){return{name:Kl(e,t),fields:n.value.mapValue.fields}}function _D(e,t,n){var r=wi(e,t.name),i=Yt(t.updateTime),s=new hr({mapValue:{fields:t.fields}}),a=hn.newFoundDocument(r,i,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Xd(e,t){var n;if(t instanceof Cf)n={update:rk(e,t.key,t.value)};else if(t instanceof Af)n={delete:Kl(e,t.key)};else if(t instanceof Qo)n={update:rk(e,t.key,t.data),updateMask:jG(t.fieldMask)};else{if(!(t instanceof g0))return le();n={verify:Kl(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(function(r){return function(i,s){var a=s.transform;if(a instanceof Iu)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ea)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ta)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Su)return{fieldPath:s.field.canonicalString(),increment:a.A};throw le()}(0,r)})),t.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:xG(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:le()}(e,t.precondition)),n}function ik(e,t){var n=t.currentDocument?function(h){return h.updateTime!==void 0?_n.updateTime(Yt(h.updateTime)):h.exists!==void 0?_n.exists(h.exists):_n.none()}(t.currentDocument):_n.none(),r=t.updateTransforms?t.updateTransforms.map(function(h){return function(d,v){var m=null;if("setToServerValue"in v)_e(v.setToServerValue==="REQUEST_TIME"),m=new Iu;else if("appendMissingElements"in v){var y=v.appendMissingElements.values||[];m=new ea(y)}else if("removeAllFromArray"in v){var w=v.removeAllFromArray.values||[];m=new ta(w)}else"increment"in v?m=new Su(d,v.increment):le();var E=ni.fromServerFormat(v.fieldPath);return new Sf(E,m)}(e,h)}):[];if(t.update){t.update.name;var i=wi(e,t.update.name),s=new hr({mapValue:{fields:t.update.fields}});if(t.updateMask){var a=function(h){var d=h.fieldPaths||[];return new wu(d.map(function(v){return ni.fromServerFormat(v)}))}(t.updateMask);return new Qo(i,s,a,n,r)}return new Cf(i,s,n,r)}if(t.delete){var c=wi(e,t.delete);return new Af(c,n)}if(t.verify){var l=wi(e,t.verify);return new g0(l,n)}return le()}function wD(e,t){return{documents:[aw(e,t.path)]}}function bD(e,t){var n={structuredQuery:{}},r=t.path;t.collectionGroup!==null?(n.parent=aw(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=aw(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(c){if(c.length!==0){var l=c.map(function(h){return function(d){if(d.op==="=="){if(KA(d.value))return{unaryFilter:{field:Ka(d.field),op:"IS_NAN"}};if(HA(d.value))return{unaryFilter:{field:Ka(d.field),op:"IS_NULL"}}}else if(d.op==="!="){if(KA(d.value))return{unaryFilter:{field:Ka(d.field),op:"IS_NOT_NAN"}};if(HA(d.value))return{unaryFilter:{field:Ka(d.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ka(d.field),op:MG(d.op),value:d.value}}}(h)});return l.length===1?l[0]:{compositeFilter:{op:"AND",filters:l}}}}(t.filters);i&&(n.structuredQuery.where=i);var s=function(c){if(c.length!==0)return c.map(function(l){return function(h){return{field:Ka(h.field),direction:LG(h.dir)}}(l)})}(t.orderBy);s&&(n.structuredQuery.orderBy=s);var a=function(c,l){return c.I||ha(l)?l:{value:l}}(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=ok(t.startAt)),t.endAt&&(n.structuredQuery.endAt=ok(t.endAt)),n}function ED(e){var t=mD(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){_e(r===1);var s=n.from[0];s.allDescendants?i=s.collectionId:t=t.child(s.collectionId)}var a=[];n.where&&(a=TD(n.where));var c=[];n.orderBy&&(c=n.orderBy.map(function(v){return function(m){return new ou(Za(m.field),function(y){switch(y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(v)}));var l=null;n.limit&&(l=function(v){var m;return ha(m=typeof v=="object"?v.value:v)?null:m}(n.limit));var h=null;n.startAt&&(h=sk(n.startAt));var d=null;return n.endAt&&(d=sk(n.endAt)),JO(t,i,c,a,l,"F",h,d)}function TD(e){return e?e.unaryFilter!==void 0?[UG(e)]:e.fieldFilter!==void 0?[FG(e)]:e.compositeFilter!==void 0?e.compositeFilter.filters.map(function(t){return TD(t)}).reduce(function(t,n){return t.concat(n)}):le():[]}function ok(e){return{before:e.before,values:e.position}}function sk(e){var t=!!e.before,n=e.values||[];return new ql(n,t)}function LG(e){return PG[e]}function MG(e){return OG[e]}function Ka(e){return{fieldPath:e.canonicalString()}}function Za(e){return ni.fromServerFormat(e.fieldPath)}function FG(e){return vr.create(Za(e.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return le()}}(e.fieldFilter.op),e.fieldFilter.value)}function UG(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Za(e.unaryFilter.field);return vr.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Za(e.unaryFilter.field);return vr.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Za(e.unaryFilter.field);return vr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Za(e.unaryFilter.field);return vr.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return le()}}function jG(e){var t=[];return e.fields.forEach(function(n){return t.push(n.canonicalString())}),{fieldPaths:t}}function ID(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ti(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=ak(t)),t=VG(e.get(n),t);return ak(t)}function VG(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var s=e.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function ak(e){return e+""}function Ki(e){var t=e.length;if(_e(t>=2),t===2)return _e(e.charAt(0)===""&&e.charAt(1)===""),$e.emptyPath();for(var n=t-2,r=[],i="",s=0;s<t;){var a=e.indexOf("",s);switch((a<0||a>n)&&le(),e.charAt(a+1)){case"":var c=e.substring(s,a),l=void 0;i.length===0?l=c:(l=i+=c,i=""),r.push(l);break;case"":i+=e.substring(s,a),i+="\0";break;case"":i+=e.substring(s,a+1);break;default:le()}s=a+2}return new $e(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var BG=function(e,t){this.seconds=e,this.nanoseconds=t},lr=function(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n};lr.store="owner",lr.key="owner";var Lo=function(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n};Lo.store="mutationQueues",Lo.keyPath="userId";var ut=function(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};ut.store="mutations",ut.keyPath="batchId",ut.userMutationsIndex="userMutationsIndex",ut.userMutationsKeyPath=["userId","batchId"];var mn=function(){function e(){}return e.prefixForUser=function(t){return[t]},e.prefixForPath=function(t,n){return[t,ti(n)]},e.key=function(t,n,r){return[t,ti(n),r]},e}();mn.store="documentMutations",mn.PLACEHOLDER=new mn;var qG=function(e,t){this.path=e,this.readTime=t},HG=function(e,t){this.path=e,this.version=t},Tt=function(e,t,n,r,i,s){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=s};Tt.store="remoteDocuments",Tt.readTimeIndex="readTimeIndex",Tt.readTimeIndexPath="readTime",Tt.collectionReadTimeIndex="collectionReadTimeIndex",Tt.collectionReadTimeIndexPath=["parentPath","readTime"];var yi=function(e){this.byteSize=e};yi.store="remoteDocumentGlobal",yi.key="remoteDocumentGlobalKey";var Zn=function(e,t,n,r,i,s,a){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=s,this.query=a};Zn.store="targets",Zn.keyPath="targetId",Zn.queryTargetsIndexName="queryTargetsIndex",Zn.queryTargetsKeyPath=["canonicalId","targetId"];var un=function(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n};un.store="targetDocuments",un.keyPath=["targetId","path"],un.documentTargetsIndex="documentTargetsIndex",un.documentTargetsKeyPath=["path","targetId"];var fr=function(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r};fr.key="targetGlobalKey",fr.store="targetGlobal";var Hs=function(e,t){this.collectionId=e,this.parent=t};Hs.store="collectionParents",Hs.keyPath=["collectionId","parent"];var zi=function(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r};zi.store="clientMetadata",zi.keyPath="clientId";var Cu=function(e,t,n){this.bundleId=e,this.createTime=t,this.version=n};Cu.store="bundles",Cu.keyPath="bundleId";var Au=function(e,t,n){this.name=e,this.readTime=t,this.bundledQuery=n};Au.store="namedQueries",Au.keyPath="name";var KG=Ne(Ne([],Ne(Ne([],Ne(Ne([],Ne(Ne([],[Lo.store,ut.store,mn.store,Tt.store,Zn.store,lr.store,fr.store,un.store]),[zi.store])),[yi.store])),[Hs.store])),[Cu.store,Au.store]),SD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",CD=function(){function e(){this.onCommittedListeners=[]}return e.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},e.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},e}(),Sn=function(){var e=this;this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})},G=function(){function e(t){var n=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(r){n.isDone=!0,n.result=r,n.nextCallback&&n.nextCallback(r)},function(r){n.isDone=!0,n.error=r,n.catchCallback&&n.catchCallback(r)})}return e.prototype.catch=function(t){return this.next(void 0,t)},e.prototype.next=function(t,n){var r=this;return this.callbackAttached&&le(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e(function(i,s){r.nextCallback=function(a){r.wrapSuccess(t,a).next(i,s)},r.catchCallback=function(a){r.wrapFailure(n,a).next(i,s)}})},e.prototype.toPromise=function(){var t=this;return new Promise(function(n,r){t.next(n,r)})},e.prototype.wrapUserFunction=function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(r){return e.reject(r)}},e.prototype.wrapSuccess=function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.resolve(n)},e.prototype.wrapFailure=function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.reject(n)},e.resolve=function(t){return new e(function(n,r){n(t)})},e.reject=function(t){return new e(function(n,r){r(t)})},e.waitFor=function(t){return new e(function(n,r){var i=0,s=0,a=!1;t.forEach(function(c){++i,c.next(function(){++s,a&&s===i&&n()},function(l){return r(l)})}),a=!0,s===i&&n()})},e.or=function(t){for(var n=e.resolve(!1),r=function(a){n=n.next(function(c){return c?e.resolve(c):a()})},i=0,s=t;i<s.length;i++)r(s[i]);return n},e.forEach=function(t,n){var r=this,i=[];return t.forEach(function(s,a){i.push(n.call(r,s,a))}),this.waitFor(i)},e}(),AD=function(){function e(t,n){var r=this;this.action=t,this.transaction=n,this.aborted=!1,this.ft=new Sn,this.transaction.oncomplete=function(){r.ft.resolve()},this.transaction.onabort=function(){n.error?r.ft.reject(new dl(t,n.error)):r.ft.resolve()},this.transaction.onerror=function(i){var s=w0(i.target.error);r.ft.reject(new dl(t,s))}}return e.open=function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(s){throw new dl(n,s)}},Object.defineProperty(e.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),e.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Y("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},e.prototype.store=function(t){var n=this.transaction.objectStore(t);return new GG(n)},e}(),ku=function(){function e(t,n,r){this.name=t,this.version=n,this.wt=r,e._t(zs())===12.2&&Ot("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return e.delete=function(t){return Y("SimpleDb","Removing database:",t),Rs(window.indexedDB.deleteDatabase(t)).toPromise()},e.yt=function(){if(typeof indexedDB>"u")return!1;if(e.gt())return!0;var t=zs(),n=e._t(t),r=0<n&&n<10,i=e.Et(t),s=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||s)},e.gt=function(){var t;return typeof process<"u"&&((t=process.env)===null||t===void 0?void 0:t.Tt)==="YES"},e.It=function(t,n){return t.store(n)},e._t=function(t){var n=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)},e.Et=function(t){var n=t.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)},e.prototype.At=function(t){return k(this,void 0,void 0,function(){var n,r=this;return C(this,function(i){switch(i.label){case 0:return this.db?[3,2]:(Y("SimpleDb","Opening database:",this.name),n=this,[4,new Promise(function(s,a){var c=indexedDB.open(r.name,r.version);c.onsuccess=function(l){var h=l.target.result;s(h)},c.onblocked=function(){a(new dl(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},c.onerror=function(l){var h=l.target.error;h.name==="VersionError"?a(new q(D.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a(new dl(t,h))},c.onupgradeneeded=function(l){Y("SimpleDb",'Database "'+r.name+'" requires upgrade from version:',l.oldVersion);var h=l.target.result;r.wt.Rt(h,c.transaction,l.oldVersion,r.version).next(function(){Y("SimpleDb","Database upgrade to version "+r.version+" complete")})}})]);case 1:n.db=i.sent(),i.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(s){return r.bt(s)}),this.db)]}})})},e.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(n){return t(n)})},e.prototype.runTransaction=function(t,n,r,i){return k(this,void 0,void 0,function(){var s,a,c,l,h;return C(this,function(d){switch(d.label){case 0:s=n==="readonly",a=0,c=function(){var v,m,y,w,E;return C(this,function(T){switch(T.label){case 0:++a,T.label=1;case 1:return T.trys.push([1,4,,5]),[4,l.At(t)];case 2:return l.db=T.sent(),v=AD.open(l.db,t,s?"readonly":"readwrite",r),m=i(v).catch(function(A){return v.abort(A),G.reject(A)}).toPromise(),y={},m.catch(function(){}),[4,v.dt];case 3:return[2,(y.value=(T.sent(),m),y)];case 4:return w=T.sent(),E=w.name!=="FirebaseError"&&a<3,Y("SimpleDb","Transaction failed with error:",w.message,"Retrying:",E),l.close(),E?[3,5]:[2,{value:Promise.reject(w)}];case 5:return[2]}})},l=this,d.label=1;case 1:return[5,c()];case 2:if(typeof(h=d.sent())=="object")return[2,h.value];d.label=3;case 3:return[3,1];case 4:return[2]}})})},e.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},e}(),WG=function(){function e(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(e.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),e.prototype.done=function(){this.Vt=!0},e.prototype.Ct=function(t){this.St=t},e.prototype.delete=function(){return Rs(this.Pt.delete())},e}(),dl=function(e){function t(n,r){var i=this;return(i=e.call(this,D.UNAVAILABLE,"IndexedDB transaction '"+n+"' failed: "+r)||this).name="IndexedDbTransactionError",i}return te(t,e),t}(q);function da(e){return e.name==="IndexedDbTransactionError"}var GG=function(){function e(t){this.store=t}return e.prototype.put=function(t,n){var r;return n!==void 0?(Y("SimpleDb","PUT",this.store.name,t,n),r=this.store.put(n,t)):(Y("SimpleDb","PUT",this.store.name,"<auto-key>",t),r=this.store.put(t)),Rs(r)},e.prototype.add=function(t){return Y("SimpleDb","ADD",this.store.name,t,t),Rs(this.store.add(t))},e.prototype.get=function(t){var n=this;return Rs(this.store.get(t)).next(function(r){return r===void 0&&(r=null),Y("SimpleDb","GET",n.store.name,t,r),r})},e.prototype.delete=function(t){return Y("SimpleDb","DELETE",this.store.name,t),Rs(this.store.delete(t))},e.prototype.count=function(){return Y("SimpleDb","COUNT",this.store.name),Rs(this.store.count())},e.prototype.Nt=function(t,n){var r=this.cursor(this.options(t,n)),i=[];return this.xt(r,function(s,a){i.push(a)}).next(function(){return i})},e.prototype.kt=function(t,n){Y("SimpleDb","DELETE ALL",this.store.name);var r=this.options(t,n);r.Ft=!1;var i=this.cursor(r);return this.xt(i,function(s,a,c){return c.delete()})},e.prototype.$t=function(t,n){var r;n?r=t:(r={},n=t);var i=this.cursor(r);return this.xt(i,n)},e.prototype.Ot=function(t){var n=this.cursor({});return new G(function(r,i){n.onerror=function(s){var a=w0(s.target.error);i(a)},n.onsuccess=function(s){var a=s.target.result;a?t(a.primaryKey,a.value).next(function(c){c?a.continue():r()}):r()}})},e.prototype.xt=function(t,n){var r=[];return new G(function(i,s){t.onerror=function(a){s(a.target.error)},t.onsuccess=function(a){var c=a.target.result;if(c){var l=new WG(c),h=n(c.primaryKey,c.value,l);if(h instanceof G){var d=h.catch(function(v){return l.done(),G.reject(v)});r.push(d)}l.isDone?i():l.Dt===null?c.continue():c.continue(l.Dt)}else i()}}).next(function(){return G.waitFor(r)})},e.prototype.options=function(t,n){var r;return t!==void 0&&(typeof t=="string"?r=t:n=t),{index:r,range:n}},e.prototype.cursor=function(t){var n="next";if(t.reverse&&(n="prev"),t.index){var r=this.store.index(t.index);return t.Ft?r.openKeyCursor(t.range,n):r.openCursor(t.range,n)}return this.store.openCursor(t.range,n)},e}();function Rs(e){return new G(function(t,n){e.onsuccess=function(r){var i=r.target.result;t(i)},e.onerror=function(r){var i=w0(r.target.error);n(i)}})}var uk=!1;function w0(e){var t=ku._t(zs());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new q("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return uk||(uk=!0,setTimeout(function(){throw r},0)),r}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ck=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).Mt=n,i.currentSequenceNumber=r,i}return te(t,e),t}(CD);function rr(e,t){var n=ee(e);return ku.It(n.Mt,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var b0=function(){function e(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return e.prototype.applyToRemoteDocument=function(t,n){for(var r=n.mutationResults,i=0;i<this.mutations.length;i++){var s=this.mutations[i];s.key.isEqual(t.key)&&EG(s,t,r[i])}},e.prototype.applyToLocalView=function(t){for(var n=0,r=this.baseMutations;n<r.length;n++)(a=r[n]).key.isEqual(t.key)&&ow(a,t,this.localWriteTime);for(var i=0,s=this.mutations;i<s.length;i++){var a;(a=s[i]).key.isEqual(t.key)&&ow(a,t,this.localWriteTime)}},e.prototype.applyToLocalDocumentSet=function(t){var n=this;this.mutations.forEach(function(r){var i=t.get(r.key),s=i;n.applyToLocalView(s),i.isValidDocument()||s.convertToNoDocument(De.min())})},e.prototype.keys=function(){return this.mutations.reduce(function(t,n){return t.add(n.key)},et())},e.prototype.isEqual=function(t){return this.batchId===t.batchId&&_u(this.mutations,t.mutations,function(n,r){return QA(n,r)})&&_u(this.baseMutations,t.baseMutations,function(n,r){return QA(n,r)})},e}(),zG=function(){function e(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return e.from=function(t,n,r){_e(t.mutations.length===r.length);for(var i=hD(),s=t.mutations,a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new e(t,n,r,i)},e}(),fv=function(){function e(t,n,r,i,s,a,c){s===void 0&&(s=De.min()),a===void 0&&(a=De.min()),c===void 0&&(c=qn.EMPTY_BYTE_STRING),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c}return e.prototype.withSequenceNumber=function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},e.prototype.withResumeToken=function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)},e.prototype.withLastLimboFreeSnapshotVersion=function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)},e}(),kD=function(e){this.Lt=e};function uw(e,t){if(t.document)return _D(e.Lt,t.document,!!t.hasCommittedMutations);if(t.noDocument){var n=fe.fromSegments(t.noDocument.path),r=Nu(t.noDocument.readTime),i=hn.newNoDocument(n,r);return t.hasCommittedMutations?i.setHasCommittedMutations():i}if(t.unknownDocument){var s=fe.fromSegments(t.unknownDocument.path);return r=Nu(t.unknownDocument.version),hn.newUnknownDocument(s,r)}return le()}function lk(e,t,n){var r=E0(n),i=t.key.path.popLast().toArray();if(t.isFoundDocument()){var s=function(v,m){return{name:Kl(v,m.key),fields:m.data.value.mapValue.fields,updateTime:Hl(v,m.version.toTimestamp())}}(e.Lt,t),a=t.hasCommittedMutations;return new Tt(null,null,s,a,r,i)}if(t.isNoDocument()){var c=t.key.path.toArray(),l=Ru(t.version);return a=t.hasCommittedMutations,new Tt(null,new qG(c,l),null,a,r,i)}if(t.isUnknownDocument()){var h=t.key.path.toArray(),d=Ru(t.version);return new Tt(new HG(h,d),null,null,!0,r,i)}return le()}function E0(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function RD(e){var t=new tr(e[0],e[1]);return De.fromTimestamp(t)}function Ru(e){var t=e.toTimestamp();return new BG(t.seconds,t.nanoseconds)}function Nu(e){var t=new tr(e.seconds,e.nanoseconds);return De.fromTimestamp(t)}function Qa(e,t){for(var n=(t.baseMutations||[]).map(function(l){return ik(e.Lt,l)}),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&t.mutations[r+1].transform!==void 0){var s=t.mutations[r+1];i.updateTransforms=s.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var a=t.mutations.map(function(l){return ik(e.Lt,l)}),c=tr.fromMillis(t.localWriteTimeMs);return new b0(t.batchId,c,n,a)}function el(e){var t,n,r=Nu(e.readTime),i=e.lastLimboFreeSnapshotVersion!==void 0?Nu(e.lastLimboFreeSnapshotVersion):De.min();return e.query.documents!==void 0?(_e((n=e.query).documents.length===1),t=Mr(Ju(mD(n.documents[0])))):t=function(s){return Mr(ED(s))}(e.query),new fv(t,e.targetId,0,e.lastListenSequenceNumber,r,i,qn.fromBase64String(e.resumeToken))}function ND(e,t){var n,r=Ru(t.snapshotVersion),i=Ru(t.lastLimboFreeSnapshotVersion);n=$d(t.target)?wD(e.Lt,t.target):bD(e.Lt,t.target);var s=t.resumeToken.toBase64();return new Zn(t.targetId,Ef(t.target),r,s,t.sequenceNumber,i,n)}function T0(e){var t=ED({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?ZO(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $G=function(){function e(){}return e.prototype.getBundleMetadata=function(t,n){return fk(t).get(n).next(function(r){if(r)return{id:(i=r).bundleId,createTime:Nu(i.createTime),version:i.version};var i})},e.prototype.saveBundleMetadata=function(t,n){return fk(t).put({bundleId:(r=n).id,createTime:Ru(Yt(r.createTime)),version:r.version});var r},e.prototype.getNamedQuery=function(t,n){return hk(t).get(n).next(function(r){if(r)return{name:(i=r).name,query:T0(i.bundledQuery),readTime:Nu(i.readTime)};var i})},e.prototype.saveNamedQuery=function(t,n){return hk(t).put(function(r){return{name:r.name,readTime:Ru(Yt(r.readTime)),bundledQuery:r.bundledQuery}}(n))},e}();function fk(e){return rr(e,Cu.store)}function hk(e){return rr(e,Au.store)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var QG=function(){function e(){this.Bt=new I0}return e.prototype.addToCollectionParentIndex=function(t,n){return this.Bt.add(n),G.resolve()},e.prototype.getCollectionParents=function(t,n){return G.resolve(this.Bt.getEntries(n))},e}(),I0=function(){function e(){this.index={}}return e.prototype.add=function(t){var n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new Vt($e.comparator),s=!i.has(r);return this.index[n]=i.add(r),s},e.prototype.has=function(t){var n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)},e.prototype.getEntries=function(t){return(this.index[t]||new Vt($e.comparator)).toArray()},e}(),YG=function(){function e(){this.qt=new I0}return e.prototype.addToCollectionParentIndex=function(t,n){var r=this;if(!this.qt.has(n)){var i=n.lastSegment(),s=n.popLast();t.addOnCommittedListener(function(){r.qt.add(n)});var a={collectionId:i,parent:ti(s)};return dk(t).put(a)}return G.resolve()},e.prototype.getCollectionParents=function(t,n){var r=[],i=IDBKeyRange.bound([n,""],[WO(n),""],!1,!0);return dk(t).Nt(i).next(function(s){for(var a=0,c=s;a<c.length;a++){var l=c[a];if(l.collectionId!==n)break;r.push(Ki(l.parent))}return r})},e}();function dk(e){return rr(e,Hs.store)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pk={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},vi=function(){function e(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return e.withCacheSize=function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PD(e,t,n){var r=e.store(ut.store),i=e.store(mn.store),s=[],a=IDBKeyRange.only(n.batchId),c=0,l=r.$t({range:a},function(w,E,T){return c++,T.delete()});s.push(l.next(function(){_e(c===1)}));for(var h=[],d=0,v=n.mutations;d<v.length;d++){var m=v[d],y=mn.key(t,m.key.path,n.batchId);s.push(i.delete(y)),h.push(m.key)}return G.waitFor(s).next(function(){return h})}function Jd(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw le();t=e.noDocument}return JSON.stringify(t).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vi.DEFAULT_COLLECTION_PERCENTILE=10,vi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vi.DEFAULT=new vi(41943040,vi.DEFAULT_COLLECTION_PERCENTILE,vi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vi.DISABLED=new vi(-1,0,0);var XG=function(){function e(t,n,r,i){this.userId=t,this.R=n,this.Ut=r,this.referenceDelegate=i,this.Kt={}}return e.Qt=function(t,n,r,i){return _e(t.uid!==""),new e(t.isAuthenticated()?t.uid:"",n,r,i)},e.prototype.checkEmpty=function(t){var n=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return mo(t).$t({index:ut.userMutationsIndex,range:r},function(i,s,a){n=!1,a.done()}).next(function(){return n})},e.prototype.addMutationBatch=function(t,n,r,i){var s=this,a=Ya(t),c=mo(t);return c.add({}).next(function(l){_e(typeof l=="number");for(var h=new b0(l,n,r,i),d=function(A,P,O){var H=O.baseMutations.map(function(U){return Xd(A.Lt,U)}),K=O.mutations.map(function(U){return Xd(A.Lt,U)});return new ut(P,O.batchId,O.localWriteTime.toMillis(),H,K)}(s.R,s.userId,h),v=[],m=new Vt(function(A,P){return Ue(A.canonicalString(),P.canonicalString())}),y=0,w=i;y<w.length;y++){var E=w[y],T=mn.key(s.userId,E.key.path,l);m=m.add(E.key.path.popLast()),v.push(c.put(d)),v.push(a.put(T,mn.PLACEHOLDER))}return m.forEach(function(A){v.push(s.Ut.addToCollectionParentIndex(t,A))}),t.addOnCommittedListener(function(){s.Kt[l]=h.keys()}),G.waitFor(v).next(function(){return h})})},e.prototype.lookupMutationBatch=function(t,n){var r=this;return mo(t).get(n).next(function(i){return i?(_e(i.userId===r.userId),Qa(r.R,i)):null})},e.prototype.jt=function(t,n){var r=this;return this.Kt[n]?G.resolve(this.Kt[n]):this.lookupMutationBatch(t,n).next(function(i){if(i){var s=i.keys();return r.Kt[n]=s,s}return null})},e.prototype.getNextMutationBatchAfterBatchId=function(t,n){var r=this,i=n+1,s=IDBKeyRange.lowerBound([this.userId,i]),a=null;return mo(t).$t({index:ut.userMutationsIndex,range:s},function(c,l,h){l.userId===r.userId&&(_e(l.batchId>=i),a=Qa(r.R,l)),h.done()}).next(function(){return a})},e.prototype.getHighestUnacknowledgedBatchId=function(t){var n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return mo(t).$t({index:ut.userMutationsIndex,range:n,reverse:!0},function(i,s,a){r=s.batchId,a.done()}).next(function(){return r})},e.prototype.getAllMutationBatches=function(t){var n=this,r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return mo(t).Nt(ut.userMutationsIndex,r).next(function(i){return i.map(function(s){return Qa(n.R,s)})})},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,n){var r=this,i=mn.prefixForPath(this.userId,n.path),s=IDBKeyRange.lowerBound(i),a=[];return Ya(t).$t({range:s},function(c,l,h){var d=c[0],v=c[1],m=c[2],y=Ki(v);if(d===r.userId&&n.path.isEqual(y))return mo(t).get(m).next(function(w){if(!w)throw le();_e(w.userId===r.userId),a.push(Qa(r.R,w))});h.done()}).next(function(){return a})},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,n){var r=this,i=new Vt(Ue),s=[];return n.forEach(function(a){var c=mn.prefixForPath(r.userId,a.path),l=IDBKeyRange.lowerBound(c),h=Ya(t).$t({range:l},function(d,v,m){var y=d[0],w=d[1],E=d[2],T=Ki(w);y===r.userId&&a.path.isEqual(T)?i=i.add(E):m.done()});s.push(h)}),G.waitFor(s).next(function(){return r.Wt(t,i)})},e.prototype.getAllMutationBatchesAffectingQuery=function(t,n){var r=this,i=n.path,s=i.length+1,a=mn.prefixForPath(this.userId,i),c=IDBKeyRange.lowerBound(a),l=new Vt(Ue);return Ya(t).$t({range:c},function(h,d,v){var m=h[0],y=h[1],w=h[2],E=Ki(y);m===r.userId&&i.isPrefixOf(E)?E.length===s&&(l=l.add(w)):v.done()}).next(function(){return r.Wt(t,l)})},e.prototype.Wt=function(t,n){var r=this,i=[],s=[];return n.forEach(function(a){s.push(mo(t).get(a).next(function(c){if(c===null)throw le();_e(c.userId===r.userId),i.push(Qa(r.R,c))}))}),G.waitFor(s).next(function(){return i})},e.prototype.removeMutationBatch=function(t,n){var r=this;return PD(t.Mt,this.userId,n).next(function(i){return t.addOnCommittedListener(function(){r.Gt(n.batchId)}),G.forEach(i,function(s){return r.referenceDelegate.markPotentiallyOrphaned(t,s)})})},e.prototype.Gt=function(t){delete this.Kt[t]},e.prototype.performConsistencyCheck=function(t){var n=this;return this.checkEmpty(t).next(function(r){if(!r)return G.resolve();var i=IDBKeyRange.lowerBound(mn.prefixForUser(n.userId)),s=[];return Ya(t).$t({range:i},function(a,c,l){if(a[0]===n.userId){var h=Ki(a[1]);s.push(h)}else l.done()}).next(function(){_e(s.length===0)})})},e.prototype.containsKey=function(t,n){return OD(t,this.userId,n)},e.prototype.zt=function(t){var n=this;return DD(t).get(this.userId).next(function(r){return r||new Lo(n.userId,-1,"")})},e}();function OD(e,t,n){var r=mn.prefixForPath(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r),a=!1;return Ya(e).$t({range:s,Ft:!0},function(c,l,h){var d=c[0],v=c[1];c[2],d===t&&v===i&&(a=!0),h.done()}).next(function(){return a})}function mo(e){return rr(e,ut.store)}function Ya(e){return rr(e,mn.store)}function DD(e){return rr(e,Lo.store)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zd=function(){function e(t){this.Ht=t}return e.prototype.next=function(){return this.Ht+=2,this.Ht},e.Jt=function(){return new e(0)},e.Yt=function(){return new e(-1)},e}(),JG=function(){function e(t,n){this.referenceDelegate=t,this.R=n}return e.prototype.allocateTargetId=function(t){var n=this;return this.Xt(t).next(function(r){var i=new Zd(r.highestTargetId);return r.highestTargetId=i.next(),n.Zt(t,r).next(function(){return r.highestTargetId})})},e.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(n){return De.fromTimestamp(new tr(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds))})},e.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(n){return n.highestListenSequenceNumber})},e.prototype.setTargetsMetadata=function(t,n,r){var i=this;return this.Xt(t).next(function(s){return s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),i.Zt(t,s)})},e.prototype.addTargetData=function(t,n){var r=this;return this.te(t,n).next(function(){return r.Xt(t).next(function(i){return i.targetCount+=1,r.ee(n,i),r.Zt(t,i)})})},e.prototype.updateTargetData=function(t,n){return this.te(t,n)},e.prototype.removeTargetData=function(t,n){var r=this;return this.removeMatchingKeysForTargetId(t,n.targetId).next(function(){return Wa(t).delete(n.targetId)}).next(function(){return r.Xt(t)}).next(function(i){return _e(i.targetCount>0),i.targetCount-=1,r.Zt(t,i)})},e.prototype.removeTargets=function(t,n,r){var i=this,s=0,a=[];return Wa(t).$t(function(c,l){var h=el(l);h.sequenceNumber<=n&&r.get(h.targetId)===null&&(s++,a.push(i.removeTargetData(t,h)))}).next(function(){return G.waitFor(a)}).next(function(){return s})},e.prototype.forEachTarget=function(t,n){return Wa(t).$t(function(r,i){var s=el(i);n(s)})},e.prototype.Xt=function(t){return vk(t).get(fr.key).next(function(n){return _e(n!==null),n})},e.prototype.Zt=function(t,n){return vk(t).put(fr.key,n)},e.prototype.te=function(t,n){return Wa(t).put(ND(this.R,n))},e.prototype.ee=function(t,n){var r=!1;return t.targetId>n.highestTargetId&&(n.highestTargetId=t.targetId,r=!0),t.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=t.sequenceNumber,r=!0),r},e.prototype.getTargetCount=function(t){return this.Xt(t).next(function(n){return n.targetCount})},e.prototype.getTargetData=function(t,n){var r=Ef(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),s=null;return Wa(t).$t({range:i,index:Zn.queryTargetsIndexName},function(a,c,l){var h=el(c);av(n,h.target)&&(s=h,l.done())}).next(function(){return s})},e.prototype.addMatchingKeys=function(t,n,r){var i=this,s=[],a=Co(t);return n.forEach(function(c){var l=ti(c.path);s.push(a.put(new un(r,l))),s.push(i.referenceDelegate.addReference(t,r,c))}),G.waitFor(s)},e.prototype.removeMatchingKeys=function(t,n,r){var i=this,s=Co(t);return G.forEach(n,function(a){var c=ti(a.path);return G.waitFor([s.delete([r,c]),i.referenceDelegate.removeReference(t,r,a)])})},e.prototype.removeMatchingKeysForTargetId=function(t,n){var r=Co(t),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)},e.prototype.getMatchingKeysForTargetId=function(t,n){var r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Co(t),s=et();return i.$t({range:r,Ft:!0},function(a,c,l){var h=Ki(a[1]),d=new fe(h);s=s.add(d)}).next(function(){return s})},e.prototype.containsKey=function(t,n){var r=ti(n.path),i=IDBKeyRange.bound([r],[WO(r)],!1,!0),s=0;return Co(t).$t({index:un.documentTargetsIndex,Ft:!0,range:i},function(a,c,l){var h=a[0];a[1],h!==0&&(s++,l.done())}).next(function(){return s>0})},e.prototype.lt=function(t,n){return Wa(t).get(n).next(function(r){return r?el(r):null})},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wa(e){return rr(e,Zn.store)}function vk(e){return rr(e,fr.store)}function Co(e){return rr(e,un.store)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pa(e){return k(this,void 0,void 0,function(){return C(this,function(t){if(e.code!==D.FAILED_PRECONDITION||e.message!==SD)throw e;return Y("LocalStore","Unexpectedly lost primary lease"),[2]})})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gk(e,t){var n=e[0],r=e[1],i=t[0],s=t[1],a=Ue(n,i);return a===0?Ue(r,s):a}var ZG=function(){function e(t){this.ne=t,this.buffer=new Vt(gk),this.se=0}return e.prototype.ie=function(){return++this.se},e.prototype.re=function(t){var n=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(n);else{var r=this.buffer.last();gk(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}},Object.defineProperty(e.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),e}(),ez=function(){function e(t,n){this.garbageCollector=t,this.asyncQueue=n,this.oe=!1,this.ce=null}return e.prototype.start=function(t){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.ue(t)},e.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(e.prototype,"started",{get:function(){return this.ce!==null},enumerable:!1,configurable:!0}),e.prototype.ue=function(t){var n=this,r=this.oe?3e5:6e4;Y("LruGarbageCollector","Garbage collection scheduled in "+r+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,function(){return k(n,void 0,void 0,function(){var i;return C(this,function(s){switch(s.label){case 0:this.ce=null,this.oe=!0,s.label=1;case 1:return s.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return s.sent(),[3,7];case 3:return da(i=s.sent())?(Y("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i),[3,6]):[3,4];case 4:return[4,pa(i)];case 5:s.sent(),s.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return s.sent(),[2]}})})})},e}(),tz=function(){function e(t,n){this.ae=t,this.params=n}return e.prototype.calculateTargetCount=function(t,n){return this.ae.he(t).next(function(r){return Math.floor(n/100*r)})},e.prototype.nthSequenceNumber=function(t,n){var r=this;if(n===0)return G.resolve(pr.o);var i=new ZG(n);return this.ae.forEachTarget(t,function(s){return i.re(s.sequenceNumber)}).next(function(){return r.ae.le(t,function(s){return i.re(s)})}).next(function(){return i.maxValue})},e.prototype.removeTargets=function(t,n,r){return this.ae.removeTargets(t,n,r)},e.prototype.removeOrphanedDocuments=function(t,n){return this.ae.removeOrphanedDocuments(t,n)},e.prototype.collect=function(t,n){var r=this;return this.params.cacheSizeCollectionThreshold===-1?(Y("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(pk)):this.getCacheSize(t).next(function(i){return i<r.params.cacheSizeCollectionThreshold?(Y("LruGarbageCollector","Garbage collection skipped; Cache size "+i+" is lower than threshold "+r.params.cacheSizeCollectionThreshold),pk):r.fe(t,n)})},e.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},e.prototype.fe=function(t,n){var r,i,s,a,c,l,h,d=this,v=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(m){return m>d.params.maximumSequenceNumbersToCollect?(Y("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+d.params.maximumSequenceNumbersToCollect+" from "+m),i=d.params.maximumSequenceNumbersToCollect):i=m,a=Date.now(),d.nthSequenceNumber(t,i)}).next(function(m){return r=m,c=Date.now(),d.removeTargets(t,r,n)}).next(function(m){return s=m,l=Date.now(),d.removeOrphanedDocuments(t,r)}).next(function(m){return h=Date.now(),tw()<=Le.DEBUG&&Y("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in `+(a-v)+`ms
	Determined least recently used `+i+" in "+(c-a)+`ms
	Removed `+s+" targets in "+(l-c)+`ms
	Removed `+m+" documents in "+(h-l)+`ms
Total Duration: `+(h-v)+"ms"),G.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:m})})},e}(),nz=function(){function e(t,n){this.db=t,this.garbageCollector=function(r,i){return new tz(r,i)}(this,n)}return e.prototype.he=function(t){var n=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(r){return n.next(function(i){return r+i})})},e.prototype.de=function(t){var n=0;return this.le(t,function(r){n++}).next(function(){return n})},e.prototype.forEachTarget=function(t,n){return this.db.getTargetCache().forEachTarget(t,n)},e.prototype.le=function(t,n){return this.we(t,function(r,i){return n(i)})},e.prototype.addReference=function(t,n,r){return Qh(t,r)},e.prototype.removeReference=function(t,n,r){return Qh(t,r)},e.prototype.removeTargets=function(t,n,r){return this.db.getTargetCache().removeTargets(t,n,r)},e.prototype.markPotentiallyOrphaned=function(t,n){return Qh(t,n)},e.prototype._e=function(t,n){return function(r,i){var s=!1;return DD(r).Ot(function(a){return OD(r,a,i).next(function(c){return c&&(s=!0),G.resolve(!c)})}).next(function(){return s})}(t,n)},e.prototype.removeOrphanedDocuments=function(t,n){var r=this,i=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[],a=0;return this.we(t,function(c,l){if(l<=n){var h=r._e(t,c).next(function(d){if(!d)return a++,i.getEntry(t,c).next(function(){return i.removeEntry(c),Co(t).delete([0,ti(c.path)])})});s.push(h)}}).next(function(){return G.waitFor(s)}).next(function(){return i.apply(t)}).next(function(){return a})},e.prototype.removeTarget=function(t,n){var r=n.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,r)},e.prototype.updateLimboDocument=function(t,n){return Qh(t,n)},e.prototype.we=function(t,n){var r,i=Co(t),s=pr.o;return i.$t({index:un.documentTargetsIndex},function(a,c){var l=a[0];a[1];var h=c.path,d=c.sequenceNumber;l===0?(s!==pr.o&&n(new fe(Ki(r)),s),s=d,r=h):s=pr.o}).next(function(){s!==pr.o&&n(new fe(Ki(r)),s)})},e.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},e}();function Qh(e,t){return Co(e).put(function(n,r){return new un(0,ti(n.path),r)}(t,e.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zu=function(){function e(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={}}return e.prototype.get=function(t){var n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0)for(var i=0,s=r;i<s.length;i++){var a=s[i],c=a[0],l=a[1];if(this.equalsFn(c,t))return l}},e.prototype.has=function(t){return this.get(t)!==void 0},e.prototype.set=function(t,n){var r=this.mapKeyFn(t),i=this.inner[r];if(i!==void 0){for(var s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n])}else this.inner[r]=[[t,n]]},e.prototype.delete=function(t){var n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),!0;return!1},e.prototype.forEach=function(t){fa(this.inner,function(n,r){for(var i=0,s=r;i<s.length;i++){var a=s[i],c=a[0],l=a[1];t(c,l)}})},e.prototype.isEmpty=function(){return GO(this.inner)},e}(),xD=function(){function e(){this.changes=new Zu(function(t){return t.toString()},function(t,n){return t.isEqual(n)}),this.changesApplied=!1}return e.prototype.getReadTime=function(t){var n=this.changes.get(t);return n?n.readTime:De.min()},e.prototype.addEntry=function(t,n){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:n})},e.prototype.removeEntry=function(t,n){n===void 0&&(n=null),this.assertNotApplied(),this.changes.set(t,{document:hn.newInvalidDocument(t),readTime:n})},e.prototype.getEntry=function(t,n){this.assertNotApplied();var r=this.changes.get(n);return r!==void 0?G.resolve(r.document):this.getFromCache(t,n)},e.prototype.getEntries=function(t,n){return this.getAllFromCache(t,n)},e.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},e.prototype.assertNotApplied=function(){},e}(),rz=function(){function e(t,n){this.R=t,this.Ut=n}return e.prototype.addEntry=function(t,n,r){return To(t).put(Yh(n),r)},e.prototype.removeEntry=function(t,n){var r=To(t),i=Yh(n);return r.delete(i)},e.prototype.updateMetadata=function(t,n){var r=this;return this.getMetadata(t).next(function(i){return i.byteSize+=n,r.me(t,i)})},e.prototype.getEntry=function(t,n){var r=this;return To(t).get(Yh(n)).next(function(i){return r.ye(n,i)})},e.prototype.ge=function(t,n){var r=this;return To(t).get(Yh(n)).next(function(i){return{document:r.ye(n,i),size:Jd(i)}})},e.prototype.getEntries=function(t,n){var r=this,i=Dr();return this.pe(t,n,function(s,a){var c=r.ye(s,a);i=i.insert(s,c)}).next(function(){return i})},e.prototype.Ee=function(t,n){var r=this,i=Dr(),s=new Cn(fe.comparator);return this.pe(t,n,function(a,c){var l=r.ye(a,c);i=i.insert(a,l),s=s.insert(a,Jd(c))}).next(function(){return{documents:i,Te:s}})},e.prototype.pe=function(t,n,r){if(n.isEmpty())return G.resolve();var i=IDBKeyRange.bound(n.first().path.toArray(),n.last().path.toArray()),s=n.getIterator(),a=s.getNext();return To(t).$t({range:i},function(c,l,h){for(var d=fe.fromSegments(c);a&&fe.comparator(a,d)<0;)r(a,null),a=s.getNext();a&&a.isEqual(d)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?h.Ct(a.path.toArray()):h.done()}).next(function(){for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})},e.prototype.getDocumentsMatchingQuery=function(t,n,r){var i=this,s=Dr(),a=n.path.length+1,c={};if(r.isEqual(De.min())){var l=n.path.toArray();c.range=IDBKeyRange.lowerBound(l)}else{var h=n.path.toArray(),d=E0(r);c.range=IDBKeyRange.lowerBound([h,d],!0),c.index=Tt.collectionReadTimeIndex}return To(t).$t(c,function(v,m,y){if(v.length===a){var w=uw(i.R,m);n.path.isPrefixOf(w.key.path)?If(n,w)&&(s=s.insert(w.key,w)):y.done()}}).next(function(){return s})},e.prototype.newChangeBuffer=function(t){return new iz(this,!!t&&t.trackRemovals)},e.prototype.getSize=function(t){return this.getMetadata(t).next(function(n){return n.byteSize})},e.prototype.getMetadata=function(t){return mk(t).get(yi.key).next(function(n){return _e(!!n),n})},e.prototype.me=function(t,n){return mk(t).put(yi.key,n)},e.prototype.ye=function(t,n){if(n){var r=uw(this.R,n);if(!r.isNoDocument()||!r.version.isEqual(De.min()))return r}return hn.newInvalidDocument(t)},e}(),iz=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).Ie=n,i.trackRemovals=r,i.Ae=new Zu(function(s){return s.toString()},function(s,a){return s.isEqual(a)}),i}return te(t,e),t.prototype.applyChanges=function(n){var r=this,i=[],s=0,a=new Vt(function(c,l){return Ue(c.canonicalString(),l.canonicalString())});return this.changes.forEach(function(c,l){var h=r.Ae.get(c);if(l.document.isValidDocument()){var d=lk(r.Ie.R,l.document,r.getReadTime(c));a=a.add(c.path.popLast());var v=Jd(d);s+=v-h,i.push(r.Ie.addEntry(n,c,d))}else if(s-=h,r.trackRemovals){var m=lk(r.Ie.R,hn.newNoDocument(c,De.min()),r.getReadTime(c));i.push(r.Ie.addEntry(n,c,m))}else i.push(r.Ie.removeEntry(n,c))}),a.forEach(function(c){i.push(r.Ie.Ut.addToCollectionParentIndex(n,c))}),i.push(this.Ie.updateMetadata(n,s)),G.waitFor(i)},t.prototype.getFromCache=function(n,r){var i=this;return this.Ie.ge(n,r).next(function(s){return i.Ae.set(r,s.size),s.document})},t.prototype.getAllFromCache=function(n,r){var i=this;return this.Ie.Ee(n,r).next(function(s){var a=s.documents;return s.Te.forEach(function(c,l){i.Ae.set(c,l)}),a})},t}(xD);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mk(e){return rr(e,yi.store)}function To(e){return rr(e,Tt.store)}function Yh(e){return e.path.toArray()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oz=function(){function e(t){this.R=t}return e.prototype.Rt=function(t,n,r,i){var s=this;_e(r<i&&r>=0&&i<=11);var a=new AD("createOrUpgrade",n);r<1&&i>=1&&(function(l){l.createObjectStore(lr.store)}(t),function(l){l.createObjectStore(Lo.store,{keyPath:Lo.keyPath}),l.createObjectStore(ut.store,{keyPath:ut.keyPath,autoIncrement:!0}).createIndex(ut.userMutationsIndex,ut.userMutationsKeyPath,{unique:!0}),l.createObjectStore(mn.store)}(t),yk(t),function(l){l.createObjectStore(Tt.store)}(t));var c=G.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore(un.store),l.deleteObjectStore(Zn.store),l.deleteObjectStore(fr.store)}(t),yk(t)),c=c.next(function(){return function(l){var h=l.store(fr.store),d=new fr(0,0,De.min().toTimestamp(),0);return h.put(fr.key,d)}(a)})),r<4&&i>=4&&(r!==0&&(c=c.next(function(){return function(l,h){return h.store(ut.store).Nt().next(function(d){l.deleteObjectStore(ut.store),l.createObjectStore(ut.store,{keyPath:ut.keyPath,autoIncrement:!0}).createIndex(ut.userMutationsIndex,ut.userMutationsKeyPath,{unique:!0});var v=h.store(ut.store),m=d.map(function(y){return v.put(y)});return G.waitFor(m)})}(t,a)})),c=c.next(function(){(function(l){l.createObjectStore(zi.store,{keyPath:zi.keyPath})})(t)})),r<5&&i>=5&&(c=c.next(function(){return s.Re(a)})),r<6&&i>=6&&(c=c.next(function(){return function(l){l.createObjectStore(yi.store)}(t),s.be(a)})),r<7&&i>=7&&(c=c.next(function(){return s.ve(a)})),r<8&&i>=8&&(c=c.next(function(){return s.Pe(t,a)})),r<9&&i>=9&&(c=c.next(function(){(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(t),function(l){var h=l.objectStore(Tt.store);h.createIndex(Tt.readTimeIndex,Tt.readTimeIndexPath,{unique:!1}),h.createIndex(Tt.collectionReadTimeIndex,Tt.collectionReadTimeIndexPath,{unique:!1})}(n)})),r<10&&i>=10&&(c=c.next(function(){return s.Ve(a)})),r<11&&i>=11&&(c=c.next(function(){(function(l){l.createObjectStore(Cu.store,{keyPath:Cu.keyPath})})(t),function(l){l.createObjectStore(Au.store,{keyPath:Au.keyPath})}(t)})),c},e.prototype.be=function(t){var n=0;return t.store(Tt.store).$t(function(r,i){n+=Jd(i)}).next(function(){var r=new yi(n);return t.store(yi.store).put(yi.key,r)})},e.prototype.Re=function(t){var n=this,r=t.store(Lo.store),i=t.store(ut.store);return r.Nt().next(function(s){return G.forEach(s,function(a){var c=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return i.Nt(ut.userMutationsIndex,c).next(function(l){return G.forEach(l,function(h){_e(h.userId===a.userId);var d=Qa(n.R,h);return PD(t,a.userId,d).next(function(){})})})})})},e.prototype.ve=function(t){var n=t.store(un.store),r=t.store(Tt.store);return t.store(fr.store).get(fr.key).next(function(i){var s=[];return r.$t(function(a,c){var l=new $e(a),h=function(d){return[0,ti(d)]}(l);s.push(n.get(h).next(function(d){return d?G.resolve():function(v){return n.put(new un(0,ti(v),i.highestListenSequenceNumber))}(l)}))}).next(function(){return G.waitFor(s)})})},e.prototype.Pe=function(t,n){t.createObjectStore(Hs.store,{keyPath:Hs.keyPath});var r=n.store(Hs.store),i=new I0,s=function(a){if(i.add(a)){var c=a.lastSegment(),l=a.popLast();return r.put({collectionId:c,parent:ti(l)})}};return n.store(Tt.store).$t({Ft:!0},function(a,c){var l=new $e(a);return s(l.popLast())}).next(function(){return n.store(mn.store).$t({Ft:!0},function(a,c){a[0];var l=a[1];a[2];var h=Ki(l);return s(h.popLast())})})},e.prototype.Ve=function(t){var n=this,r=t.store(Zn.store);return r.$t(function(i,s){var a=el(s),c=ND(n.R,a);return r.put(c)})},e}();function yk(e){e.createObjectStore(un.store,{keyPath:un.keyPath}).createIndex(un.documentTargetsIndex,un.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(Zn.store,{keyPath:Zn.keyPath}).createIndex(Zn.queryTargetsIndexName,Zn.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(fr.store)}var xy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",sz=function(){function e(t,n,r,i,s,a,c,l,h,d){if(this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Se=s,this.window=a,this.document=c,this.De=h,this.Ce=d,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ke=null,this.inForeground=!1,this.Fe=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(v){return Promise.resolve()},!e.yt())throw new q(D.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new nz(this,i),this.Le=n+"main",this.R=new kD(l),this.Be=new ku(this.Le,11,new oz(this.R)),this.qe=new JG(this.referenceDelegate,this.R),this.Ut=new YG,this.Ue=function(v,m){return new rz(v,m)}(this.R,this.Ut),this.Ke=new $G,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,d===!1&&Ot("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return e.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new q(D.FAILED_PRECONDITION,xy);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(n){return t.qe.getHighestSequenceNumber(n)})}).then(function(n){t.Ne=new pr(n,t.De)}).then(function(){t.xe=!0}).catch(function(n){return t.Be&&t.Be.close(),Promise.reject(n)})},e.prototype.He=function(t){var n=this;return this.Me=function(r){return k(n,void 0,void 0,function(){return C(this,function(i){return this.started?[2,t(r)]:[2]})})},t(this.isPrimary)},e.prototype.setDatabaseDeletedListener=function(t){var n=this;this.Be.vt(function(r){return k(n,void 0,void 0,function(){return C(this,function(i){switch(i.label){case 0:return r.newVersion===null?[4,t()]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})})},e.prototype.setNetworkEnabled=function(t){var n=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return k(n,void 0,void 0,function(){return C(this,function(r){switch(r.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}})})}))},e.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(n){return Xh(n).put(new zi(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(n).next(function(r){r||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(n)}).next(function(r){return t.isPrimary&&!r?t.Xe(n).next(function(){return!1}):!!r&&t.Ze(n).next(function(){return!0})})}).catch(function(n){if(da(n))return Y("IndexedDbPersistence","Failed to extend owner lease: ",n),t.isPrimary;if(!t.allowTabSynchronization)throw n;return Y("IndexedDbPersistence","Releasing owner lease after error during lease refresh",n),!1}).then(function(n){t.isPrimary!==n&&t.Se.enqueueRetryable(function(){return t.Me(n)}),t.isPrimary=n})},e.prototype.Je=function(t){var n=this;return Qc(t).get(lr.key).next(function(r){return G.resolve(n.tn(r))})},e.prototype.en=function(t){return Xh(t).delete(this.clientId)},e.prototype.nn=function(){return k(this,void 0,void 0,function(){var t,n,r,i,s=this;return C(this,function(a){switch(a.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(c){var l=rr(c,zi.store);return l.Nt().next(function(h){var d=s.rn(h,18e5),v=h.filter(function(m){return d.indexOf(m)===-1});return G.forEach(v,function(m){return l.delete(m.clientId)}).next(function(){return v})})}).catch(function(){return[]})]);case 1:if(t=a.sent(),this.Qe)for(n=0,r=t;n<r.length;n++)i=r[n],this.Qe.removeItem(this.on(i.clientId));a.label=2;case 2:return[2]}})})},e.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},e.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},e.prototype.Ye=function(t){var n=this;return this.Ce?G.resolve(!0):Qc(t).get(lr.key).next(function(r){if(r!==null&&n.sn(r.leaseTimestampMs,5e3)&&!n.cn(r.ownerId)){if(n.tn(r)&&n.networkEnabled)return!0;if(!n.tn(r)){if(!r.allowTabSynchronization)throw new q(D.FAILED_PRECONDITION,xy);return!1}}return!(!n.networkEnabled||!n.inForeground)||Xh(t).Nt().next(function(i){return n.rn(i,5e3).find(function(s){if(n.clientId!==s.clientId){var a=!n.networkEnabled&&s.networkEnabled,c=!n.inForeground&&s.inForeground,l=n.networkEnabled===s.networkEnabled;if(a||c&&l)return!0}return!1})===void 0})}).next(function(r){return n.isPrimary!==r&&Y("IndexedDbPersistence","Client "+(r?"is":"is not")+" eligible for a primary lease."),r})},e.prototype.shutdown=function(){return k(this,void 0,void 0,function(){var t=this;return C(this,function(n){switch(n.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[lr.store,zi.store],function(r){var i=new ck(r,pr.o);return t.Xe(i).next(function(){return t.en(i)})})];case 1:return n.sent(),this.Be.close(),this.ln(),[2]}})})},e.prototype.rn=function(t,n){var r=this;return t.filter(function(i){return r.sn(i.updateTimeMs,n)&&!r.cn(i.clientId)})},e.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(n){return Xh(n).Nt().next(function(r){return t.rn(r,18e5).map(function(i){return i.clientId})})})},Object.defineProperty(e.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),e.prototype.getMutationQueue=function(t){return XG.Qt(t,this.R,this.Ut,this.referenceDelegate)},e.prototype.getTargetCache=function(){return this.qe},e.prototype.getRemoteDocumentCache=function(){return this.Ue},e.prototype.getIndexManager=function(){return this.Ut},e.prototype.getBundleCache=function(){return this.Ke},e.prototype.runTransaction=function(t,n,r){var i=this;Y("IndexedDbPersistence","Starting transaction:",t);var s,a=n==="readonly"?"readonly":"readwrite";return this.Be.runTransaction(t,a,KG,function(c){return s=new ck(c,i.Ne?i.Ne.next():pr.o),n==="readwrite-primary"?i.Je(s).next(function(l){return!!l||i.Ye(s)}).next(function(l){if(!l)throw Ot("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new q(D.FAILED_PRECONDITION,SD);return r(s)}).next(function(l){return i.Ze(s).next(function(){return l})}):i.dn(s).next(function(){return r(s)})}).then(function(c){return s.raiseOnCommittedEvent(),c})},e.prototype.dn=function(t){var n=this;return Qc(t).get(lr.key).next(function(r){if(r!==null&&n.sn(r.leaseTimestampMs,5e3)&&!n.cn(r.ownerId)&&!n.tn(r)&&!(n.Ce||n.allowTabSynchronization&&r.allowTabSynchronization))throw new q(D.FAILED_PRECONDITION,xy)})},e.prototype.Ze=function(t){var n=new lr(this.clientId,this.allowTabSynchronization,Date.now());return Qc(t).put(lr.key,n)},e.yt=function(){return ku.yt()},e.prototype.Xe=function(t){var n=this,r=Qc(t);return r.get(lr.key).next(function(i){return n.tn(i)?(Y("IndexedDbPersistence","Releasing primary lease."),r.delete(lr.key)):G.resolve()})},e.prototype.sn=function(t,n){var r=Date.now();return!(t<r-n||t>r&&(Ot("Detected an update time that is in the future: "+t+" > "+r),1))},e.prototype.We=function(){var t=this;this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Fe=function(){t.Se.enqueueAndForget(function(){return t.inForeground=t.document.visibilityState==="visible",t.je()})},this.document.addEventListener("visibilitychange",this.Fe),this.inForeground=this.document.visibilityState==="visible")},e.prototype.an=function(){this.Fe&&(this.document.removeEventListener("visibilitychange",this.Fe),this.Fe=null)},e.prototype.Ge=function(){var t,n=this;typeof((t=this.window)===null||t===void 0?void 0:t.addEventListener)=="function"&&(this.ke=function(){n.un(),KV()&&navigator.appVersion.match("Version/14")&&n.Se.enterRestrictedMode(!0),n.Se.enqueueAndForget(function(){return n.shutdown()})},this.window.addEventListener("pagehide",this.ke))},e.prototype.hn=function(){this.ke&&(this.window.removeEventListener("pagehide",this.ke),this.ke=null)},e.prototype.cn=function(t){var n;try{var r=((n=this.Qe)===null||n===void 0?void 0:n.getItem(this.on(t)))!==null;return Y("IndexedDbPersistence","Client '"+t+"' "+(r?"is":"is not")+" zombied in LocalStorage"),r}catch(i){return Ot("IndexedDbPersistence","Failed to get zombied client id.",i),!1}},e.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){Ot("Failed to set zombie client id.",t)}},e.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch{}},e.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},e}();function Qc(e){return rr(e,lr.store)}function Xh(e){return rr(e,zi.store)}function S0(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var az=function(e,t){this.progress=e,this.wn=t},LD=function(){function e(t,n,r){this.Ue=t,this._n=n,this.Ut=r}return e.prototype.mn=function(t,n){var r=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,n).next(function(i){return r.yn(t,n,i)})},e.prototype.yn=function(t,n,r){return this.Ue.getEntry(t,n).next(function(i){for(var s=0,a=r;s<a.length;s++)a[s].applyToLocalView(i);return i})},e.prototype.gn=function(t,n){t.forEach(function(r,i){for(var s=0,a=n;s<a.length;s++)a[s].applyToLocalView(i)})},e.prototype.pn=function(t,n){var r=this;return this.Ue.getEntries(t,n).next(function(i){return r.En(t,i).next(function(){return i})})},e.prototype.En=function(t,n){var r=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,n).next(function(i){return r.gn(n,i)})},e.prototype.getDocumentsMatchingQuery=function(t,n,r){return function(i){return fe.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.Tn(t,n.path):v0(n)?this.In(t,n,r):this.An(t,n,r)},e.prototype.Tn=function(t,n){return this.mn(t,new fe(n)).next(function(r){var i=sw();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})},e.prototype.In=function(t,n,r){var i=this,s=n.collectionGroup,a=sw();return this.Ut.getCollectionParents(t,s).next(function(c){return G.forEach(c,function(l){var h=function(d,v){return new no(v,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return i.An(t,h,r).next(function(d){d.forEach(function(v,m){a=a.insert(v,m)})})}).next(function(){return a})})},e.prototype.An=function(t,n,r){var i,s,a=this;return this.Ue.getDocumentsMatchingQuery(t,n,r).next(function(c){return i=c,a._n.getAllMutationBatchesAffectingQuery(t,n)}).next(function(c){return s=c,a.Rn(t,s,i).next(function(l){i=l;for(var h=0,d=s;h<d.length;h++)for(var v=d[h],m=0,y=v.mutations;m<y.length;m++){var w=y[m],E=w.key,T=i.get(E);T==null&&(T=hn.newInvalidDocument(E),i=i.insert(E,T)),ow(w,T,v.localWriteTime),T.isFoundDocument()||(i=i.remove(E))}})}).next(function(){return i.forEach(function(c,l){If(n,l)||(i=i.remove(c))}),i})},e.prototype.Rn=function(t,n,r){for(var i=et(),s=0,a=n;s<a.length;s++)for(var c=0,l=a[s].mutations;c<l.length;c++){var h=l[c];h instanceof Qo&&r.get(h.key)===null&&(i=i.add(h.key))}var d=r;return this.Ue.getEntries(t,i).next(function(v){return v.forEach(function(m,y){y.isFoundDocument()&&(d=d.insert(m,y))}),d})},e}(),uz=function(){function e(t,n,r,i){this.targetId=t,this.fromCache=n,this.bn=r,this.vn=i}return e.Pn=function(t,n){for(var r=et(),i=et(),s=0,a=n.docChanges;s<a.length;s++){var c=a[s];switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:i=i.add(c.doc.key)}}return new e(t,n.fromCache,r,i)},e}(),MD=function(){function e(){}return e.prototype.Vn=function(t){this.Sn=t},e.prototype.getDocumentsMatchingQuery=function(t,n,r,i){var s=this;return function(a){return a.filters.length===0&&a.limit===null&&a.startAt==null&&a.endAt==null&&(a.explicitOrderBy.length===0||a.explicitOrderBy.length===1&&a.explicitOrderBy[0].field.isKeyField())}(n)||r.isEqual(De.min())?this.Dn(t,n):this.Sn.pn(t,i).next(function(a){var c=s.Cn(n,a);return(ld(n)||Yd(n))&&s.Nn(n.limitType,c,i,r)?s.Dn(t,n):(tw()<=Le.DEBUG&&Y("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),iw(n)),s.Sn.getDocumentsMatchingQuery(t,n,r).next(function(l){return c.forEach(function(h){l=l.insert(h.key,h)}),l}))})},e.prototype.Cn=function(t,n){var r=new Vt(tD(t));return n.forEach(function(i,s){If(t,s)&&(r=r.add(s))}),r},e.prototype.Nn=function(t,n,r,i){if(r.size!==n.size)return!0;var s=t==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)},e.prototype.Dn=function(t,n){return tw()<=Le.DEBUG&&Y("QueryEngine","Using full collection scan to execute query:",iw(n)),this.Sn.getDocumentsMatchingQuery(t,n,De.min())},e}(),cz=function(){function e(t,n,r,i){this.persistence=t,this.xn=n,this.R=i,this.kn=new Cn(Ue),this.Fn=new Zu(function(s){return Ef(s)},av),this.$n=De.min(),this._n=t.getMutationQueue(r),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new LD(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return e.prototype.collectGarbage=function(t){var n=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(r){return t.collect(r,n.kn)})},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FD(e,t,n,r){return new cz(e,t,n,r)}function UD(e,t){return k(this,void 0,void 0,function(){var n,r,i,s;return C(this,function(a){switch(a.label){case 0:return n=ee(e),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(c){var l;return n._n.getAllMutationBatches(c).next(function(h){return l=h,r=n.persistence.getMutationQueue(t),i=new LD(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(c)}).next(function(h){for(var d=[],v=[],m=et(),y=0,w=l;y<w.length;y++){var E=w[y];d.push(E.batchId);for(var T=0,A=E.mutations;T<A.length;T++){var P=A[T];m=m.add(P.key)}}for(var O=0,H=h;O<H.length;O++){var K=H[O];v.push(K.batchId);for(var U=0,ie=K.mutations;U<ie.length;U++){var F=ie[U];m=m.add(F.key)}}return i.pn(c,m).next(function(ge){return{Ln:ge,removedBatchIds:d,addedBatchIds:v}})})})];case 1:return s=a.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),s)]}})})}function lz(e,t){var n=ee(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(r){var i=t.batch.keys(),s=n.On.newChangeBuffer({trackRemovals:!0});return function(a,c,l,h){var d=l.batch,v=d.keys(),m=G.resolve();return v.forEach(function(y){m=m.next(function(){return h.getEntry(c,y)}).next(function(w){var E=l.docVersions.get(y);_e(E!==null),w.version.compareTo(E)<0&&(d.applyToRemoteDocument(w,l),w.isValidDocument()&&h.addEntry(w,l.commitVersion))})}),m.next(function(){return a._n.removeMutationBatch(c,d)})}(n,r,t,s).next(function(){return s.apply(r)}).next(function(){return n._n.performConsistencyCheck(r)}).next(function(){return n.Mn.pn(r,i)})})}function jD(e){var t=ee(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",function(n){return t.qe.getLastRemoteSnapshotVersion(n)})}function fz(e,t){var n=ee(e),r=t.snapshotVersion,i=n.kn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(s){var a=n.On.newChangeBuffer({trackRemovals:!0});i=n.kn;var c=[];t.targetChanges.forEach(function(d,v){var m=i.get(v);if(m){c.push(n.qe.removeMatchingKeys(s,d.removedDocuments,v).next(function(){return n.qe.addMatchingKeys(s,d.addedDocuments,v)}));var y=d.resumeToken;if(y.approximateByteSize()>0){var w=m.withResumeToken(y,r).withSequenceNumber(s.currentSequenceNumber);i=i.insert(v,w),function(E,T,A){return _e(T.resumeToken.approximateByteSize()>0),E.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=3e8||A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(m,w,d)&&c.push(n.qe.updateTargetData(s,w))}}});var l=Dr();if(t.documentUpdates.forEach(function(d,v){t.resolvedLimboDocuments.has(d)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),c.push(VD(s,a,t.documentUpdates,r,void 0).next(function(d){l=d})),!r.isEqual(De.min())){var h=n.qe.getLastRemoteSnapshotVersion(s).next(function(d){return n.qe.setTargetsMetadata(s,s.currentSequenceNumber,r)});c.push(h)}return G.waitFor(c).next(function(){return a.apply(s)}).next(function(){return n.Mn.En(s,l)}).next(function(){return l})}).then(function(s){return n.kn=i,s})}function VD(e,t,n,r,i){var s=et();return n.forEach(function(a){return s=s.add(a)}),t.getEntries(e,s).next(function(a){var c=Dr();return n.forEach(function(l,h){var d=a.get(l),v=(i==null?void 0:i.get(l))||r;h.isNoDocument()&&h.version.isEqual(De.min())?(t.removeEntry(l,v),c=c.insert(l,h)):!d.isValidDocument()||h.version.compareTo(d.version)>0||h.version.compareTo(d.version)===0&&d.hasPendingWrites?(t.addEntry(h,v),c=c.insert(l,h)):Y("LocalStore","Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",h.version)}),c})}function hz(e,t){var n=ee(e);return n.persistence.runTransaction("Get next mutation batch","readonly",function(r){return t===void 0&&(t=-1),n._n.getNextMutationBatchAfterBatchId(r,t)})}function Pu(e,t){var n=ee(e);return n.persistence.runTransaction("Allocate target","readwrite",function(r){var i;return n.qe.getTargetData(r,t).next(function(s){return s?(i=s,G.resolve(i)):n.qe.allocateTargetId(r).next(function(a){return i=new fv(t,a,0,r.currentSequenceNumber),n.qe.addTargetData(r,i).next(function(){return i})})})}).then(function(r){var i=n.kn.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.kn=n.kn.insert(r.targetId,r),n.Fn.set(t,r.targetId)),r})}function Ou(e,t,n){return k(this,void 0,void 0,function(){var r,i,s,a;return C(this,function(c){switch(c.label){case 0:r=ee(e),i=r.kn.get(t),s=n?"readwrite":"readwrite-primary",c.label=1;case 1:return c.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",s,function(l){return r.persistence.referenceDelegate.removeTarget(l,i)})];case 2:c.sent(),c.label=3;case 3:return[3,5];case 4:if(!da(a=c.sent()))throw a;return Y("LocalStore","Failed to update sequence numbers for target "+t+": "+a),[3,5];case 5:return r.kn=r.kn.remove(t),r.Fn.delete(i.target),[2]}})})}function ep(e,t,n){var r=ee(e),i=De.min(),s=et();return r.persistence.runTransaction("Execute query","readonly",function(a){return function(c,l,h){var d=ee(c),v=d.Fn.get(h);return v!==void 0?G.resolve(d.kn.get(v)):d.qe.getTargetData(l,h)}(r,a,Mr(t)).next(function(c){if(c)return i=c.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(a,c.targetId).next(function(l){s=l})}).next(function(){return r.xn.getDocumentsMatchingQuery(a,t,n?i:De.min(),n?s:et())}).next(function(c){return{documents:c,Bn:s}})})}function BD(e,t){var n=ee(e),r=ee(n.qe),i=n.kn.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(s){return r.lt(s,t).next(function(a){return a?a.target:null})})}function qD(e){var t=ee(e);return t.persistence.runTransaction("Get new document changes","readonly",function(n){return function(r,i,s){var a=ee(r),c=Dr(),l=E0(s),h=To(i),d=IDBKeyRange.lowerBound(l,!0);return h.$t({index:Tt.readTimeIndex,range:d},function(v,m){var y=uw(a.R,m);c=c.insert(y.key,y),l=m.readTime}).next(function(){return{wn:c,readTime:RD(l)}})}(t.On,n,t.$n)}).then(function(n){var r=n.wn,i=n.readTime;return t.$n=i,r})}function dz(e){return k(this,void 0,void 0,function(){var t;return C(this,function(n){return[2,(t=ee(e)).persistence.runTransaction("Synchronize last document change read time","readonly",function(r){return function(i){var s=To(i),a=De.min();return s.$t({index:Tt.readTimeIndex,reverse:!0},function(c,l,h){l.readTime&&(a=RD(l.readTime)),h.done()}).next(function(){return a})}(r)}).then(function(r){t.$n=r})]})})}function pz(e,t,n,r){return k(this,void 0,void 0,function(){var i,s,a,c,l,h,d,v,m,y;return C(this,function(w){switch(w.label){case 0:for(i=ee(e),s=et(),a=Dr(),c=hD(),l=0,h=n;l<h.length;l++)d=h[l],v=t.qn(d.metadata.name),d.document&&(s=s.add(v)),a=a.insert(v,t.Un(d)),c=c.insert(v,t.Kn(d.metadata.readTime));return m=i.On.newChangeBuffer({trackRemovals:!0}),[4,Pu(i,function(E){return Mr(Ju($e.fromString("__bundle__/docs/"+E)))}(r))];case 1:return y=w.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(E){return VD(E,m,a,De.min(),c).next(function(T){return m.apply(E),T}).next(function(T){return i.qe.removeMatchingKeysForTargetId(E,y.targetId).next(function(){return i.qe.addMatchingKeys(E,s,y.targetId)}).next(function(){return i.Mn.En(E,T)}).next(function(){return T})})})]}})})}function vz(e,t,n){return n===void 0&&(n=et()),k(this,void 0,void 0,function(){var r,i;return C(this,function(s){switch(s.label){case 0:return[4,Pu(e,Mr(T0(t.bundledQuery)))];case 1:return r=s.sent(),[2,(i=ee(e)).persistence.runTransaction("Save named query","readwrite",function(a){var c=Yt(t.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.Ke.saveNamedQuery(a,t);var l=r.withResumeToken(qn.EMPTY_BYTE_STRING,c);return i.kn=i.kn.insert(l.targetId,l),i.qe.updateTargetData(a,l).next(function(){return i.qe.removeMatchingKeysForTargetId(a,r.targetId)}).next(function(){return i.qe.addMatchingKeys(a,n,r.targetId)}).next(function(){return i.Ke.saveNamedQuery(a,t)})})]}})})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gz=function(){function e(t){this.R=t,this.Qn=new Map,this.jn=new Map}return e.prototype.getBundleMetadata=function(t,n){return G.resolve(this.Qn.get(n))},e.prototype.saveBundleMetadata=function(t,n){var r;return this.Qn.set(n.id,{id:(r=n).id,version:r.version,createTime:Yt(r.createTime)}),G.resolve()},e.prototype.getNamedQuery=function(t,n){return G.resolve(this.jn.get(n))},e.prototype.saveNamedQuery=function(t,n){return this.jn.set(n.name,function(r){return{name:r.name,query:T0(r.bundledQuery),readTime:Yt(r.readTime)}}(n)),G.resolve()},e}(),C0=function(){function e(){this.Wn=new Vt(Kt.Gn),this.zn=new Vt(Kt.Hn)}return e.prototype.isEmpty=function(){return this.Wn.isEmpty()},e.prototype.addReference=function(t,n){var r=new Kt(t,n);this.Wn=this.Wn.add(r),this.zn=this.zn.add(r)},e.prototype.Jn=function(t,n){var r=this;t.forEach(function(i){return r.addReference(i,n)})},e.prototype.removeReference=function(t,n){this.Yn(new Kt(t,n))},e.prototype.Xn=function(t,n){var r=this;t.forEach(function(i){return r.removeReference(i,n)})},e.prototype.Zn=function(t){var n=this,r=new fe(new $e([])),i=new Kt(r,t),s=new Kt(r,t+1),a=[];return this.zn.forEachInRange([i,s],function(c){n.Yn(c),a.push(c.key)}),a},e.prototype.ts=function(){var t=this;this.Wn.forEach(function(n){return t.Yn(n)})},e.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},e.prototype.es=function(t){var n=new fe(new $e([])),r=new Kt(n,t),i=new Kt(n,t+1),s=et();return this.zn.forEachInRange([r,i],function(a){s=s.add(a.key)}),s},e.prototype.containsKey=function(t){var n=new Kt(t,0),r=this.Wn.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)},e}(),Kt=function(){function e(t,n){this.key=t,this.ns=n}return e.Gn=function(t,n){return fe.comparator(t.key,n.key)||Ue(t.ns,n.ns)},e.Hn=function(t,n){return Ue(t.ns,n.ns)||fe.comparator(t.key,n.key)},e}(),mz=function(){function e(t,n){this.Ut=t,this.referenceDelegate=n,this._n=[],this.ss=1,this.rs=new Vt(Kt.Gn)}return e.prototype.checkEmpty=function(t){return G.resolve(this._n.length===0)},e.prototype.addMutationBatch=function(t,n,r,i){var s=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var a=new b0(s,n,r,i);this._n.push(a);for(var c=0,l=i;c<l.length;c++){var h=l[c];this.rs=this.rs.add(new Kt(h.key,s)),this.Ut.addToCollectionParentIndex(t,h.key.path.popLast())}return G.resolve(a)},e.prototype.lookupMutationBatch=function(t,n){return G.resolve(this.os(n))},e.prototype.getNextMutationBatchAfterBatchId=function(t,n){var r=n+1,i=this.cs(r),s=i<0?0:i;return G.resolve(this._n.length>s?this._n[s]:null)},e.prototype.getHighestUnacknowledgedBatchId=function(){return G.resolve(this._n.length===0?-1:this.ss-1)},e.prototype.getAllMutationBatches=function(t){return G.resolve(this._n.slice())},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,n){var r=this,i=new Kt(n,0),s=new Kt(n,Number.POSITIVE_INFINITY),a=[];return this.rs.forEachInRange([i,s],function(c){var l=r.os(c.ns);a.push(l)}),G.resolve(a)},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,n){var r=this,i=new Vt(Ue);return n.forEach(function(s){var a=new Kt(s,0),c=new Kt(s,Number.POSITIVE_INFINITY);r.rs.forEachInRange([a,c],function(l){i=i.add(l.ns)})}),G.resolve(this.us(i))},e.prototype.getAllMutationBatchesAffectingQuery=function(t,n){var r=n.path,i=r.length+1,s=r;fe.isDocumentKey(s)||(s=s.child(""));var a=new Kt(new fe(s),0),c=new Vt(Ue);return this.rs.forEachWhile(function(l){var h=l.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(c=c.add(l.ns)),!0)},a),G.resolve(this.us(c))},e.prototype.us=function(t){var n=this,r=[];return t.forEach(function(i){var s=n.os(i);s!==null&&r.push(s)}),r},e.prototype.removeMutationBatch=function(t,n){var r=this;_e(this.hs(n.batchId,"removed")===0),this._n.shift();var i=this.rs;return G.forEach(n.mutations,function(s){var a=new Kt(s.key,n.batchId);return i=i.delete(a),r.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(function(){r.rs=i})},e.prototype.Gt=function(t){},e.prototype.containsKey=function(t,n){var r=new Kt(n,0),i=this.rs.firstAfterOrEqual(r);return G.resolve(n.isEqual(i&&i.key))},e.prototype.performConsistencyCheck=function(t){return this._n.length,G.resolve()},e.prototype.hs=function(t,n){return this.cs(t)},e.prototype.cs=function(t){return this._n.length===0?0:t-this._n[0].batchId},e.prototype.os=function(t){var n=this.cs(t);return n<0||n>=this._n.length?null:this._n[n]},e}(),yz=function(){function e(t,n){this.Ut=t,this.ls=n,this.docs=new Cn(fe.comparator),this.size=0}return e.prototype.addEntry=function(t,n,r){var i=n.key,s=this.docs.get(i),a=s?s.size:0,c=this.ls(n);return this.docs=this.docs.insert(i,{document:n.clone(),size:c,readTime:r}),this.size+=c-a,this.Ut.addToCollectionParentIndex(t,i.path.popLast())},e.prototype.removeEntry=function(t){var n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)},e.prototype.getEntry=function(t,n){var r=this.docs.get(n);return G.resolve(r?r.document.clone():hn.newInvalidDocument(n))},e.prototype.getEntries=function(t,n){var r=this,i=Dr();return n.forEach(function(s){var a=r.docs.get(s);i=i.insert(s,a?a.document.clone():hn.newInvalidDocument(s))}),G.resolve(i)},e.prototype.getDocumentsMatchingQuery=function(t,n,r){for(var i=Dr(),s=new fe(n.path.child("")),a=this.docs.getIteratorFrom(s);a.hasNext();){var c=a.getNext(),l=c.key,h=c.value,d=h.document,v=h.readTime;if(!n.path.isPrefixOf(l.path))break;v.compareTo(r)<=0||If(n,d)&&(i=i.insert(d.key,d.clone()))}return G.resolve(i)},e.prototype.fs=function(t,n){return G.forEach(this.docs,function(r){return n(r)})},e.prototype.newChangeBuffer=function(t){return new _z(this)},e.prototype.getSize=function(t){return G.resolve(this.size)},e}(),_z=function(e){function t(n){var r=this;return(r=e.call(this)||this).Ie=n,r}return te(t,e),t.prototype.applyChanges=function(n){var r=this,i=[];return this.changes.forEach(function(s,a){a.document.isValidDocument()?i.push(r.Ie.addEntry(n,a.document,r.getReadTime(s))):r.Ie.removeEntry(s)}),G.waitFor(i)},t.prototype.getFromCache=function(n,r){return this.Ie.getEntry(n,r)},t.prototype.getAllFromCache=function(n,r){return this.Ie.getEntries(n,r)},t}(xD),wz=function(){function e(t){this.persistence=t,this.ds=new Zu(function(n){return Ef(n)},av),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.ws=0,this._s=new C0,this.targetCount=0,this.ys=Zd.Jt()}return e.prototype.forEachTarget=function(t,n){return this.ds.forEach(function(r,i){return n(i)}),G.resolve()},e.prototype.getLastRemoteSnapshotVersion=function(t){return G.resolve(this.lastRemoteSnapshotVersion)},e.prototype.getHighestSequenceNumber=function(t){return G.resolve(this.ws)},e.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),G.resolve(this.highestTargetId)},e.prototype.setTargetsMetadata=function(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ws&&(this.ws=n),G.resolve()},e.prototype.te=function(t){this.ds.set(t.target,t);var n=t.targetId;n>this.highestTargetId&&(this.ys=new Zd(n),this.highestTargetId=n),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},e.prototype.addTargetData=function(t,n){return this.te(n),this.targetCount+=1,G.resolve()},e.prototype.updateTargetData=function(t,n){return this.te(n),G.resolve()},e.prototype.removeTargetData=function(t,n){return this.ds.delete(n.target),this._s.Zn(n.targetId),this.targetCount-=1,G.resolve()},e.prototype.removeTargets=function(t,n,r){var i=this,s=0,a=[];return this.ds.forEach(function(c,l){l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i.ds.delete(c),a.push(i.removeMatchingKeysForTargetId(t,l.targetId)),s++)}),G.waitFor(a).next(function(){return s})},e.prototype.getTargetCount=function(t){return G.resolve(this.targetCount)},e.prototype.getTargetData=function(t,n){var r=this.ds.get(n)||null;return G.resolve(r)},e.prototype.addMatchingKeys=function(t,n,r){return this._s.Jn(n,r),G.resolve()},e.prototype.removeMatchingKeys=function(t,n,r){this._s.Xn(n,r);var i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(function(a){s.push(i.markPotentiallyOrphaned(t,a))}),G.waitFor(s)},e.prototype.removeMatchingKeysForTargetId=function(t,n){return this._s.Zn(n),G.resolve()},e.prototype.getMatchingKeysForTargetId=function(t,n){var r=this._s.es(n);return G.resolve(r)},e.prototype.containsKey=function(t,n){return G.resolve(this._s.containsKey(n))},e}(),bz=function(){function e(t,n){var r=this;this.gs={},this.Ne=new pr(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new wz(this),this.Ut=new QG,this.Ue=function(i,s){return new yz(i,function(a){return r.referenceDelegate.ps(a)})}(this.Ut),this.R=new kD(n),this.Ke=new gz(this.R)}return e.prototype.start=function(){return Promise.resolve()},e.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(e.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),e.prototype.setDatabaseDeletedListener=function(){},e.prototype.setNetworkEnabled=function(){},e.prototype.getIndexManager=function(){return this.Ut},e.prototype.getMutationQueue=function(t){var n=this.gs[t.toKey()];return n||(n=new mz(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=n),n},e.prototype.getTargetCache=function(){return this.qe},e.prototype.getRemoteDocumentCache=function(){return this.Ue},e.prototype.getBundleCache=function(){return this.Ke},e.prototype.runTransaction=function(t,n,r){var i=this;Y("MemoryPersistence","Starting transaction:",t);var s=new Ez(this.Ne.next());return this.referenceDelegate.Es(),r(s).next(function(a){return i.referenceDelegate.Ts(s).next(function(){return a})}).toPromise().then(function(a){return s.raiseOnCommittedEvent(),a})},e.prototype.Is=function(t,n){return G.or(Object.values(this.gs).map(function(r){return function(){return r.containsKey(t,n)}}))},e}(),Ez=function(e){function t(n){var r=this;return(r=e.call(this)||this).currentSequenceNumber=n,r}return te(t,e),t}(CD),Tz=function(){function e(t){this.persistence=t,this.As=new C0,this.Rs=null}return e.bs=function(t){return new e(t)},Object.defineProperty(e.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw le()},enumerable:!1,configurable:!0}),e.prototype.addReference=function(t,n,r){return this.As.addReference(r,n),this.vs.delete(r.toString()),G.resolve()},e.prototype.removeReference=function(t,n,r){return this.As.removeReference(r,n),this.vs.add(r.toString()),G.resolve()},e.prototype.markPotentiallyOrphaned=function(t,n){return this.vs.add(n.toString()),G.resolve()},e.prototype.removeTarget=function(t,n){var r=this;this.As.Zn(n.targetId).forEach(function(s){return r.vs.add(s.toString())});var i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next(function(s){s.forEach(function(a){return r.vs.add(a.toString())})}).next(function(){return i.removeTargetData(t,n)})},e.prototype.Es=function(){this.Rs=new Set},e.prototype.Ts=function(t){var n=this,r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.vs,function(i){var s=fe.fromPath(i);return n.Ps(t,s).next(function(a){a||r.removeEntry(s)})}).next(function(){return n.Rs=null,r.apply(t)})},e.prototype.updateLimboDocument=function(t,n){var r=this;return this.Ps(t,n).next(function(i){i?r.vs.delete(n.toString()):r.vs.add(n.toString())})},e.prototype.ps=function(t){return 0},e.prototype.Ps=function(t,n){var r=this;return G.or([function(){return G.resolve(r.As.containsKey(n))},function(){return r.persistence.getTargetCache().containsKey(t,n)},function(){return r.persistence.Is(t,n)}])},e}(),rn=function(){function e(t){this.uid=t}return e.prototype.isAuthenticated=function(){return this.uid!=null},e.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},e.prototype.isEqual=function(t){return t.uid===this.uid},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _k(e,t){return"firestore_clients_"+e+"_"+t}function wk(e,t,n){var r="firestore_mutations_"+e+"_"+n;return t.isAuthenticated()&&(r+="_"+t.uid),r}function Ly(e,t){return"firestore_targets_"+e+"_"+t}rn.UNAUTHENTICATED=new rn(null),rn.GOOGLE_CREDENTIALS=new rn("google-credentials-uid"),rn.FIRST_PARTY=new rn("first-party-uid"),rn.MOCK_USER=new rn("mock-user");var bk=function(){function e(t,n,r,i){this.user=t,this.batchId=n,this.state=r,this.error=i}return e.Vs=function(t,n,r){var i,s=JSON.parse(r),a=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return a&&s.error&&(a=typeof s.error.message=="string"&&typeof s.error.code=="string")&&(i=new q(s.error.code,s.error.message)),a?new e(t,n,s.state,i):(Ot("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},e.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},e}(),My=function(){function e(t,n,r){this.targetId=t,this.state=n,this.error=r}return e.Vs=function(t,n){var r,i=JSON.parse(n),s=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string")&&(r=new q(i.error.code,i.error.message)),s?new e(t,i.state,r):(Ot("SharedClientState","Failed to parse target state for ID '"+t+"': "+n),null)},e.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},e}(),Ek=function(){function e(t,n){this.clientId=t,this.activeTargetIds=n}return e.Vs=function(t,n){for(var r=JSON.parse(n),i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=lv(),a=0;i&&a<r.activeTargetIds.length;++a)i=QO(r.activeTargetIds[a]),s=s.add(r.activeTargetIds[a]);return i?new e(t,s):(Ot("SharedClientState","Failed to parse client data for instance '"+t+"': "+n),null)},e}(),Iz=function(){function e(t,n){this.clientId=t,this.onlineState=n}return e.Vs=function(t){var n=JSON.parse(t);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new e(n.clientId,n.onlineState):(Ot("SharedClientState","Failed to parse online state: "+t),null)},e}(),cw=function(){function e(){this.activeTargetIds=lv()}return e.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},e.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},e.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},e}(),Fy=function(){function e(t,n,r,i,s){this.window=t,this.Se=n,this.persistenceKey=r,this.Ns=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.ks.bind(this),this.Fs=new Cn(Ue),this.started=!1,this.$s=[];var a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Os=_k(this.persistenceKey,this.Ns),this.Ms=function(c){return"firestore_sequence_number_"+c}(this.persistenceKey),this.Fs=this.Fs.insert(this.Ns,new cw),this.Ls=new RegExp("^firestore_clients_"+a+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+a+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+a+"_(\\d+)$"),this.Us=function(c){return"firestore_online_state_"+c}(this.persistenceKey),this.Ks=function(c){return"firestore_bundle_loaded_"+c}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return e.yt=function(t){return!(!t||!t.localStorage)},e.prototype.start=function(){return k(this,void 0,void 0,function(){var t,n,r,i,s,a,c,l,h,d,v,m=this;return C(this,function(y){switch(y.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=y.sent(),n=0,r=t;n<r.length;n++)(i=r[n])!==this.Ns&&(s=this.getItem(_k(this.persistenceKey,i)))&&(a=Ek.Vs(i,s))&&(this.Fs=this.Fs.insert(a.clientId,a));for(this.Qs(),(c=this.storage.getItem(this.Us))&&(l=this.js(c))&&this.Ws(l),h=0,d=this.$s;h<d.length;h++)v=d[h],this.ks(v);return this.$s=[],this.window.addEventListener("pagehide",function(){return m.shutdown()}),this.started=!0,[2]}})})},e.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},e.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.Fs)},e.prototype.isActiveQueryTarget=function(t){var n=!1;return this.Fs.forEach(function(r,i){i.activeTargetIds.has(t)&&(n=!0)}),n},e.prototype.addPendingMutation=function(t){this.zs(t,"pending")},e.prototype.updateMutationState=function(t,n,r){this.zs(t,n,r),this.Hs(t)},e.prototype.addLocalQueryTarget=function(t){var n="not-current";if(this.isActiveQueryTarget(t)){var r=this.storage.getItem(Ly(this.persistenceKey,t));if(r){var i=My.Vs(t,r);i&&(n=i.state)}}return this.Js.Ds(t),this.Qs(),n},e.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},e.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},e.prototype.clearQueryState=function(t){this.removeItem(Ly(this.persistenceKey,t))},e.prototype.updateQueryState=function(t,n,r){this.Ys(t,n,r)},e.prototype.handleUserChange=function(t,n,r){var i=this;n.forEach(function(s){i.Hs(s)}),this.currentUser=t,r.forEach(function(s){i.addPendingMutation(s)})},e.prototype.setOnlineState=function(t){this.Xs(t)},e.prototype.notifyBundleLoaded=function(){this.Zs()},e.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},e.prototype.getItem=function(t){var n=this.storage.getItem(t);return Y("SharedClientState","READ",t,n),n},e.prototype.setItem=function(t,n){Y("SharedClientState","SET",t,n),this.storage.setItem(t,n)},e.prototype.removeItem=function(t){Y("SharedClientState","REMOVE",t),this.storage.removeItem(t)},e.prototype.ks=function(t){var n=this,r=t;if(r.storageArea===this.storage){if(Y("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Os)return void Ot("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return k(n,void 0,void 0,function(){var i,s,a,c,l,h;return C(this,function(d){if(this.started){if(r.key!==null){if(this.Ls.test(r.key)){if(r.newValue==null)return i=this.ti(r.key),[2,this.ei(i,null)];if(s=this.ni(r.key,r.newValue))return[2,this.ei(s.clientId,s)]}else if(this.Bs.test(r.key)){if(r.newValue!==null&&(a=this.si(r.key,r.newValue)))return[2,this.ii(a)]}else if(this.qs.test(r.key)){if(r.newValue!==null&&(c=this.ri(r.key,r.newValue)))return[2,this.oi(c)]}else if(r.key===this.Us){if(r.newValue!==null&&(l=this.js(r.newValue)))return[2,this.Ws(l)]}else if(r.key===this.Ms)(h=function(v){var m=pr.o;if(v!=null)try{var y=JSON.parse(v);_e(typeof y=="number"),m=y}catch(w){Ot("SharedClientState","Failed to read sequence number from WebStorage",w)}return m}(r.newValue))!==pr.o&&this.sequenceNumberHandler(h);else if(r.key===this.Ks)return[2,this.syncEngine.ci()]}}else this.$s.push(r);return[2]})})})}},Object.defineProperty(e.prototype,"Js",{get:function(){return this.Fs.get(this.Ns)},enumerable:!1,configurable:!0}),e.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},e.prototype.zs=function(t,n,r){var i=new bk(this.currentUser,t,n,r),s=wk(this.persistenceKey,this.currentUser,t);this.setItem(s,i.Ss())},e.prototype.Hs=function(t){var n=wk(this.persistenceKey,this.currentUser,t);this.removeItem(n)},e.prototype.Xs=function(t){var n={clientId:this.Ns,onlineState:t};this.storage.setItem(this.Us,JSON.stringify(n))},e.prototype.Ys=function(t,n,r){var i=Ly(this.persistenceKey,t),s=new My(t,n,r);this.setItem(i,s.Ss())},e.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},e.prototype.ti=function(t){var n=this.Ls.exec(t);return n?n[1]:null},e.prototype.ni=function(t,n){var r=this.ti(t);return Ek.Vs(r,n)},e.prototype.si=function(t,n){var r=this.Bs.exec(t),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return bk.Vs(new rn(s),i,n)},e.prototype.ri=function(t,n){var r=this.qs.exec(t),i=Number(r[1]);return My.Vs(i,n)},e.prototype.js=function(t){return Iz.Vs(t)},e.prototype.ii=function(t){return k(this,void 0,void 0,function(){return C(this,function(n){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(Y("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},e.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},e.prototype.ei=function(t,n){var r=this,i=n?this.Fs.insert(t,n):this.Fs.remove(t),s=this.Gs(this.Fs),a=this.Gs(i),c=[],l=[];return a.forEach(function(h){s.has(h)||c.push(h)}),s.forEach(function(h){a.has(h)||l.push(h)}),this.syncEngine.hi(c,l).then(function(){r.Fs=i})},e.prototype.Ws=function(t){this.Fs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},e.prototype.Gs=function(t){var n=lv();return t.forEach(function(r,i){n=n.unionWith(i.activeTargetIds)}),n},e}(),HD=function(){function e(){this.li=new cw,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return e.prototype.addPendingMutation=function(t){},e.prototype.updateMutationState=function(t,n,r){},e.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},e.prototype.updateQueryState=function(t,n,r){this.fi[t]=n},e.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},e.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},e.prototype.clearQueryState=function(t){delete this.fi[t]},e.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},e.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},e.prototype.start=function(){return this.li=new cw,Promise.resolve()},e.prototype.handleUserChange=function(t,n,r){},e.prototype.setOnlineState=function(t){},e.prototype.shutdown=function(){},e.prototype.writeSequenceNumber=function(t){},e.prototype.notifyBundleLoaded=function(){},e}(),Sz=function(){function e(){}return e.prototype.di=function(t){},e.prototype.shutdown=function(){},e}(),Tk=function(){function e(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return e.prototype.di=function(t){this.gi.push(t)},e.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},e.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},e.prototype._i=function(){Y("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,n=this.gi;t<n.length;t++)(0,n[t])(0)},e.prototype.yi=function(){Y("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,n=this.gi;t<n.length;t++)(0,n[t])(1)},e.yt=function(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0},e}(),Cz={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Az=function(){function e(t){this.Ei=t.Ei,this.Ti=t.Ti}return e.prototype.Ii=function(t){this.Ai=t},e.prototype.Ri=function(t){this.bi=t},e.prototype.onMessage=function(t){this.vi=t},e.prototype.close=function(){this.Ti()},e.prototype.send=function(t){this.Ei(t)},e.prototype.Pi=function(){this.Ai()},e.prototype.Vi=function(t){this.bi(t)},e.prototype.Si=function(t){this.vi(t)},e}(),kz=function(e){function t(n){var r=this;return(r=e.call(this,n)||this).forceLongPolling=n.forceLongPolling,r.autoDetectLongPolling=n.autoDetectLongPolling,r.useFetchStreams=n.useFetchStreams,r}return te(t,e),t.prototype.Fi=function(n,r,i,s){return new Promise(function(a,c){var l=new oG;l.listenOnce(nG.COMPLETE,function(){try{switch(l.getLastErrorCode()){case Dy.NO_ERROR:var d=l.getResponseJson();Y("Connection","XHR received:",JSON.stringify(d)),a(d);break;case Dy.TIMEOUT:Y("Connection",'RPC "'+n+'" timed out'),c(new q(D.DEADLINE_EXCEEDED,"Request time out"));break;case Dy.HTTP_ERROR:var v=l.getStatus();if(Y("Connection",'RPC "'+n+'" failed with status:',v,"response text:",l.getResponseText()),v>0){var m=l.getResponseJson().error;if(m&&m.status&&m.message){var y=function(w){var E=w.toLowerCase().replace(/_/g,"-");return Object.values(D).indexOf(E)>=0?E:D.UNKNOWN}(m.status);c(new q(y,m.message))}else c(new q(D.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new q(D.UNAVAILABLE,"Connection failed."));break;default:le()}}finally{Y("Connection",'RPC "'+n+'" completed.')}});var h=JSON.stringify(s);l.send(r,"POST",h,i,15)})},t.prototype.Oi=function(n,r){var i=[this.Di,"/","google.firestore.v1.Firestore","/",n,"/channel"],s=eG(),a=tG(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(c.xmlHttpFactory=new iG({})),this.ki(c.initMessageHeaders,r),Jw()||u1()||BV()||qV()||HV()||Zw()||(c.httpHeadersOverwriteParam="$httpHeaders");var l=i.join("");Y("Connection","Creating WebChannel: "+l,c);var h=s.createWebChannel(l,c),d=!1,v=!1,m=new Az({Ei:function(w){v?Y("Connection","Not sending because WebChannel is closed:",w):(d||(Y("Connection","Opening WebChannel transport."),h.open(),d=!0),Y("Connection","WebChannel sending:",w),h.send(w))},Ti:function(){return h.close()}}),y=function(w,E,T){w.listen(E,function(A){try{T(A)}catch(P){setTimeout(function(){throw P},0)}})};return y(h,zh.EventType.OPEN,function(){v||Y("Connection","WebChannel transport opened.")}),y(h,zh.EventType.CLOSE,function(){v||(v=!0,Y("Connection","WebChannel transport closed"),m.Vi())}),y(h,zh.EventType.ERROR,function(w){v||(v=!0,jl("Connection","WebChannel transport errored:",w),m.Vi(new q(D.UNAVAILABLE,"The operation could not be completed")))}),y(h,zh.EventType.MESSAGE,function(w){var E;if(!v){var T=w.data[0];_e(!!T);var A=T,P=A.error||((E=A[0])===null||E===void 0?void 0:E.error);if(P){Y("Connection","WebChannel received error:",P);var O=P.status,H=function(U){var ie=Nt[U];if(ie!==void 0)return fD(ie)}(O),K=P.message;H===void 0&&(H=D.INTERNAL,K="Unknown error status: "+O+" with message "+P.message),v=!0,m.Vi(new q(H,K)),h.close()}else Y("Connection","WebChannel received:",T),m.Si(T)}}),y(a,rG.STAT_EVENT,function(w){w.stat===VA.PROXY?Y("Connection","Detected buffering proxy"):w.stat===VA.NOPROXY&&Y("Connection","Detected no buffering proxy")}),setTimeout(function(){m.Pi()},0),m},t}(function(){function e(t){this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.Di=n+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return e.prototype.Ni=function(t,n,r,i){var s=this.xi(t,n);Y("RestConnection","Sending: ",s,r);var a={};return this.ki(a,i),this.Fi(t,s,a,r).then(function(c){return Y("RestConnection","Received: ",c),c},function(c){throw jl("RestConnection",t+" failed with error: ",c,"url: ",s,"request:",r),c})},e.prototype.$i=function(t,n,r,i){return this.Ni(t,n,r,i)},e.prototype.ki=function(t,n){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.10.1",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n)for(var r in n.authHeaders)n.authHeaders.hasOwnProperty(r)&&(t[r]=n.authHeaders[r])},e.prototype.xi=function(t,n){var r=Cz[t];return this.Di+"/v1/"+n+":"+r},e}());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KD(){return typeof window<"u"?window:null}function dd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kf(e){return new DG(e,!0)}var A0=function(){function e(t,n,r,i,s){r===void 0&&(r=1e3),i===void 0&&(i=1.5),s===void 0&&(s=6e4),this.Se=t,this.timerId=n,this.Mi=r,this.Li=i,this.Bi=s,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return e.prototype.reset=function(){this.qi=0},e.prototype.Qi=function(){this.qi=this.Bi},e.prototype.ji=function(t){var n=this;this.cancel();var r=Math.floor(this.qi+this.Wi()),i=Math.max(0,Date.now()-this.Ki),s=Math.max(0,r-i);s>0&&Y("ExponentialBackoff","Backing off for "+s+" ms (base delay: "+this.qi+" ms, delay with jitter: "+r+" ms, last attempt: "+i+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,s,function(){return n.Ki=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},e.prototype.Gi=function(){this.Ui!==null&&(this.Ui.skipDelay(),this.Ui=null)},e.prototype.cancel=function(){this.Ui!==null&&(this.Ui.cancel(),this.Ui=null)},e.prototype.Wi=function(){return(Math.random()-.5)*this.qi},e}(),WD=function(){function e(t,n,r,i,s,a){this.Se=t,this.zi=r,this.Hi=i,this.Ji=s,this.listener=a,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new A0(t,n)}return e.prototype.tr=function(){return this.state===1||this.state===2||this.state===4},e.prototype.er=function(){return this.state===2},e.prototype.start=function(){this.state!==3?this.auth():this.nr()},e.prototype.stop=function(){return k(this,void 0,void 0,function(){return C(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},e.prototype.sr=function(){this.state=0,this.Zi.reset()},e.prototype.ir=function(){var t=this;this.er()&&this.Xi===null&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},e.prototype.cr=function(t){this.ur(),this.stream.send(t)},e.prototype.rr=function(){return k(this,void 0,void 0,function(){return C(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},e.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},e.prototype.close=function(t,n){return k(this,void 0,void 0,function(){return C(this,function(r){switch(r.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,t!==3?this.Zi.reset():n&&n.code===D.RESOURCE_EXHAUSTED?(Ot(n.toString()),Ot("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):n&&n.code===D.UNAUTHENTICATED&&this.Ji.invalidateToken(),this.stream!==null&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(n)];case 1:return r.sent(),[2]}})})},e.prototype.ar=function(){},e.prototype.auth=function(){var t=this;this.state=1;var n=this.hr(this.Yi),r=this.Yi;this.Ji.getToken().then(function(i){t.Yi===r&&t.lr(i)},function(i){n(function(){var s=new q(D.UNKNOWN,"Fetching auth token failed: "+i.message);return t.dr(s)})})},e.prototype.lr=function(t){var n=this,r=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){r(function(){return n.state=2,n.listener.Ii()})}),this.stream.Ri(function(i){r(function(){return n.dr(i)})}),this.stream.onMessage(function(i){r(function(){return n.onMessage(i)})})},e.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return k(t,void 0,void 0,function(){return C(this,function(n){return this.state=0,this.start(),[2]})})})},e.prototype.dr=function(t){return Y("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},e.prototype.hr=function(t){var n=this;return function(r){n.Se.enqueueAndForget(function(){return n.Yi===t?r():(Y("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},e}(),Rz=function(e){function t(n,r,i,s,a){var c=this;return(c=e.call(this,n,"listen_stream_connection_backoff","listen_stream_idle",r,i,a)||this).R=s,c}return te(t,e),t.prototype.wr=function(n){return this.Hi.Oi("Listen",n)},t.prototype.onMessage=function(n){this.Zi.reset();var r=function(s,a){var c;if("targetChange"in a){a.targetChange;var l=function(T){return T==="NO_CHANGE"?0:T==="ADD"?1:T==="REMOVE"?2:T==="CURRENT"?3:T==="RESET"?4:le()}(a.targetChange.targetChangeType||"NO_CHANGE"),h=a.targetChange.targetIds||[],d=function(T,A){return T.I?(_e(A===void 0||typeof A=="string"),qn.fromBase64String(A||"")):(_e(A===void 0||A instanceof Uint8Array),qn.fromUint8Array(A||new Uint8Array))}(s,a.targetChange.resumeToken),v=(m=a.targetChange.cause)&&function(T){var A=T.code===void 0?D.UNKNOWN:fD(T.code);return new q(A,T.message||"")}(m);c=new pD(l,h,d,v||null)}else if("documentChange"in a){a.documentChange,(l=a.documentChange).document,l.document.name,l.document.updateTime,h=wi(s,l.document.name),d=Yt(l.document.updateTime);var m=new hr({mapValue:{fields:l.document.fields}}),y=(v=hn.newFoundDocument(h,d,m),l.targetIds||[]),w=l.removedTargetIds||[];c=new hd(y,w,v.key,v)}else if("documentDelete"in a)a.documentDelete,(l=a.documentDelete).document,h=wi(s,l.document),d=l.readTime?Yt(l.readTime):De.min(),m=hn.newNoDocument(h,d),v=l.removedTargetIds||[],c=new hd([],v,m.key,m);else if("documentRemove"in a)a.documentRemove,(l=a.documentRemove).document,h=wi(s,l.document),d=l.removedTargetIds||[],c=new hd([],d,h,null);else{if(!("filter"in a))return le();a.filter;var E=a.filter;E.targetId,l=E.count||0,h=new IG(l),d=E.targetId,c=new dD(d,h)}return c}(this.R,n),i=function(s){if(!("targetChange"in s))return De.min();var a=s.targetChange;return a.targetIds&&a.targetIds.length?De.min():a.readTime?Yt(a.readTime):De.min()}(n);return this.listener._r(r,i)},t.prototype.mr=function(n){var r={};r.database=Wl(this.R),r.addTarget=function(s,a){var c,l=a.target;return(c=$d(l)?{documents:wD(s,l)}:{query:bD(s,l)}).targetId=a.targetId,a.resumeToken.approximateByteSize()>0?c.resumeToken=vD(s,a.resumeToken):a.snapshotVersion.compareTo(De.min())>0&&(c.readTime=Hl(s,a.snapshotVersion.toTimestamp())),c}(this.R,n);var i=function(s,a){var c=function(l,h){switch(h){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return le()}}(0,a.purpose);return c==null?null:{"goog-listen-tags":c}}(this.R,n);i&&(r.labels=i),this.cr(r)},t.prototype.yr=function(n){var r={};r.database=Wl(this.R),r.removeTarget=n,this.cr(r)},t}(WD),Nz=function(e){function t(n,r,i,s,a){var c=this;return(c=e.call(this,n,"write_stream_connection_backoff","write_stream_idle",r,i,a)||this).R=s,c.gr=!1,c}return te(t,e),Object.defineProperty(t.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,e.prototype.start.call(this)},t.prototype.ar=function(){this.gr&&this.Er([])},t.prototype.wr=function(n){return this.Hi.Oi("Write",n)},t.prototype.onMessage=function(n){if(_e(!!n.streamToken),this.lastStreamToken=n.streamToken,this.gr){this.Zi.reset();var r=function(s,a){return s&&s.length>0?(_e(a!==void 0),s.map(function(c){return function(l,h){var d=l.updateTime?Yt(l.updateTime):Yt(h);return d.isEqual(De.min())&&(d=Yt(h)),new bG(d,l.transformResults||[])}(c,a)})):[]}(n.writeResults,n.commitTime),i=Yt(n.commitTime);return this.listener.Tr(i,r)}return _e(!n.writeResults||n.writeResults.length===0),this.gr=!0,this.listener.Ir()},t.prototype.Ar=function(){var n={};n.database=Wl(this.R),this.cr(n)},t.prototype.Er=function(n){var r=this,i={streamToken:this.lastStreamToken,writes:n.map(function(s){return Xd(r.R,s)})};this.cr(i)},t}(WD),Pz=function(e){function t(n,r,i){var s=this;return(s=e.call(this)||this).credentials=n,s.Hi=r,s.R=i,s.Rr=!1,s}return te(t,e),t.prototype.br=function(){if(this.Rr)throw new q(D.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.Ni=function(n,r,i){var s=this;return this.br(),this.credentials.getToken().then(function(a){return s.Hi.Ni(n,r,i,a)}).catch(function(a){throw a.name==="FirebaseError"?(a.code===D.UNAUTHENTICATED&&s.credentials.invalidateToken(),a):new q(D.UNKNOWN,a.toString())})},t.prototype.$i=function(n,r,i){var s=this;return this.br(),this.credentials.getToken().then(function(a){return s.Hi.$i(n,r,i,a)}).catch(function(a){throw a.name==="FirebaseError"?(a.code===D.UNAUTHENTICATED&&s.credentials.invalidateToken(),a):new q(D.UNKNOWN,a.toString())})},t.prototype.terminate=function(){this.Rr=!0},t}(function(){}),Oz=function(){function e(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return e.prototype.Sr=function(){var t=this;this.vr===0&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},e.prototype.Nr=function(t){this.state==="Online"?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.kr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},e.prototype.set=function(t){this.kr(),this.vr=0,t==="Online"&&(this.Vr=!1),this.Dr(t)},e.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},e.prototype.Cr=function(t){var n="Could not reach Cloud Firestore backend. "+t+`
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Vr?(Ot(n),this.Vr=!1):Y("OnlineStateTracker",n)},e.prototype.kr=function(){this.Pr!==null&&(this.Pr.cancel(),this.Pr=null)},e}(),Dz=function(e,t,n,r,i){var s=this;this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Fr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(a){n.enqueueAndForget(function(){return k(s,void 0,void 0,function(){return C(this,function(c){switch(c.label){case 0:return Yo(this)?(Y("RemoteStore","Restarting streams for network reachability change."),[4,function(l){return k(this,void 0,void 0,function(){var h;return C(this,function(d){switch(d.label){case 0:return(h=ee(l)).Or.add(4),[4,ec(h)];case 1:return d.sent(),h.Br.set("Unknown"),h.Or.delete(4),[4,Rf(h)];case 2:return d.sent(),[2]}})})}(this)]):[3,2];case 1:c.sent(),c.label=2;case 2:return[2]}})})})}),this.Br=new Oz(n,r)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rf(e){return k(this,void 0,void 0,function(){var t,n;return C(this,function(r){switch(r.label){case 0:if(!Yo(e))return[3,4];t=0,n=e.Mr,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}})})}function ec(e){return k(this,void 0,void 0,function(){var t,n;return C(this,function(r){switch(r.label){case 0:t=0,n=e.Mr,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}})})}function hv(e,t){var n=ee(e);n.$r.has(t.targetId)||(n.$r.set(t.targetId,t),N0(n)?R0(n):nc(n).er()&&k0(n,t))}function Gl(e,t){var n=ee(e),r=nc(n);n.$r.delete(t),r.er()&&GD(n,t),n.$r.size===0&&(r.er()?r.ir():Yo(n)&&n.Br.set("Unknown"))}function k0(e,t){e.qr.U(t.targetId),nc(e).mr(t)}function GD(e,t){e.qr.U(t),nc(e).yr(t)}function R0(e){e.qr=new NG({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},lt:function(t){return e.$r.get(t)||null}}),nc(e).start(),e.Br.Sr()}function N0(e){return Yo(e)&&!nc(e).tr()&&e.$r.size>0}function Yo(e){return ee(e).Or.size===0}function zD(e){e.qr=void 0}function xz(e){return k(this,void 0,void 0,function(){return C(this,function(t){return e.$r.forEach(function(n,r){k0(e,n)}),[2]})})}function Lz(e,t){return k(this,void 0,void 0,function(){return C(this,function(n){return zD(e),N0(e)?(e.Br.Nr(t),R0(e)):e.Br.set("Unknown"),[2]})})}function Mz(e,t,n){return k(this,void 0,void 0,function(){var r,i,s;return C(this,function(a){switch(a.label){case 0:if(e.Br.set("Online"),!(t instanceof pD&&t.state===2&&t.cause))return[3,6];a.label=1;case 1:return a.trys.push([1,3,,5]),[4,function(c,l){return k(this,void 0,void 0,function(){var h,d,v,m;return C(this,function(y){switch(y.label){case 0:h=l.cause,d=0,v=l.targetIds,y.label=1;case 1:return d<v.length?(m=v[d],c.$r.has(m)?[4,c.remoteSyncer.rejectListen(m,h)]:[3,3]):[3,5];case 2:y.sent(),c.$r.delete(m),c.qr.removeTarget(m),y.label=3;case 3:y.label=4;case 4:return d++,[3,1];case 5:return[2]}})})}(e,t)];case 2:return a.sent(),[3,5];case 3:return r=a.sent(),Y("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),[4,tp(e,r)];case 4:return a.sent(),[3,5];case 5:return[3,13];case 6:if(t instanceof hd?e.qr.X(t):t instanceof dD?e.qr.rt(t):e.qr.et(t),n.isEqual(De.min()))return[3,13];a.label=7;case 7:return a.trys.push([7,11,,13]),[4,jD(e.localStore)];case 8:return i=a.sent(),n.compareTo(i)>=0?[4,function(c,l){var h=c.qr.ut(l);return h.targetChanges.forEach(function(d,v){if(d.resumeToken.approximateByteSize()>0){var m=c.$r.get(v);m&&c.$r.set(v,m.withResumeToken(d.resumeToken,l))}}),h.targetMismatches.forEach(function(d){var v=c.$r.get(d);if(v){c.$r.set(d,v.withResumeToken(qn.EMPTY_BYTE_STRING,v.snapshotVersion)),GD(c,d);var m=new fv(v.target,d,1,v.sequenceNumber);k0(c,m)}}),c.remoteSyncer.applyRemoteEvent(h)}(e,n)]:[3,10];case 9:a.sent(),a.label=10;case 10:return[3,13];case 11:return Y("RemoteStore","Failed to raise snapshot:",s=a.sent()),[4,tp(e,s)];case 12:return a.sent(),[3,13];case 13:return[2]}})})}function tp(e,t,n){return k(this,void 0,void 0,function(){var r=this;return C(this,function(i){switch(i.label){case 0:if(!da(t))throw t;return e.Or.add(1),[4,ec(e)];case 1:return i.sent(),e.Br.set("Offline"),n||(n=function(){return jD(e.localStore)}),e.asyncQueue.enqueueRetryable(function(){return k(r,void 0,void 0,function(){return C(this,function(s){switch(s.label){case 0:return Y("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return s.sent(),e.Or.delete(1),[4,Rf(e)];case 2:return s.sent(),[2]}})})}),[2]}})})}function $D(e,t){return t().catch(function(n){return tp(e,n,t)})}function tc(e){return k(this,void 0,void 0,function(){var t,n,r,i,s;return C(this,function(a){switch(a.label){case 0:t=ee(e),n=Wo(t),r=t.Fr.length>0?t.Fr[t.Fr.length-1].batchId:-1,a.label=1;case 1:if(!function(c){return Yo(c)&&c.Fr.length<10}(t))return[3,7];a.label=2;case 2:return a.trys.push([2,4,,6]),[4,hz(t.localStore,r)];case 3:return(i=a.sent())===null?(t.Fr.length===0&&n.ir(),[3,7]):(r=i.batchId,function(c,l){c.Fr.push(l);var h=Wo(c);h.er()&&h.pr&&h.Er(l.mutations)}(t,i),[3,6]);case 4:return s=a.sent(),[4,tp(t,s)];case 5:return a.sent(),[3,6];case 6:return[3,1];case 7:return QD(t)&&YD(t),[2]}})})}function QD(e){return Yo(e)&&!Wo(e).tr()&&e.Fr.length>0}function YD(e){Wo(e).start()}function Fz(e){return k(this,void 0,void 0,function(){return C(this,function(t){return Wo(e).Ar(),[2]})})}function Uz(e){return k(this,void 0,void 0,function(){var t,n,r,i;return C(this,function(s){for(t=Wo(e),n=0,r=e.Fr;n<r.length;n++)i=r[n],t.Er(i.mutations);return[2]})})}function jz(e,t,n){return k(this,void 0,void 0,function(){var r,i;return C(this,function(s){switch(s.label){case 0:return r=e.Fr.shift(),i=zG.from(r,t,n),[4,$D(e,function(){return e.remoteSyncer.applySuccessfulWrite(i)})];case 1:return s.sent(),[4,tc(e)];case 2:return s.sent(),[2]}})})}function Vz(e,t){return k(this,void 0,void 0,function(){return C(this,function(n){switch(n.label){case 0:return t&&Wo(e).pr?[4,function(r,i){return k(this,void 0,void 0,function(){var s,a;return C(this,function(c){switch(c.label){case 0:return lD(a=i.code)&&a!==D.ABORTED?(s=r.Fr.shift(),Wo(r).sr(),[4,$D(r,function(){return r.remoteSyncer.rejectFailedWrite(s.batchId,i)})]):[3,3];case 1:return c.sent(),[4,tc(r)];case 2:c.sent(),c.label=3;case 3:return[2]}})})}(e,t)]:[3,2];case 1:n.sent(),n.label=2;case 2:return QD(e)&&YD(e),[2]}})})}function lw(e,t){return k(this,void 0,void 0,function(){var n;return C(this,function(r){switch(r.label){case 0:return n=ee(e),t?(n.Or.delete(2),[4,Rf(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return t?[3,4]:(n.Or.add(2),[4,ec(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function nc(e){var t=this;return e.Ur||(e.Ur=function(n,r,i){var s=ee(n);return s.br(),new Rz(r,s.Hi,s.credentials,s.R,i)}(e.datastore,e.asyncQueue,{Ii:xz.bind(null,e),Ri:Lz.bind(null,e),_r:Mz.bind(null,e)}),e.Mr.push(function(n){return k(t,void 0,void 0,function(){return C(this,function(r){switch(r.label){case 0:return n?(e.Ur.sr(),N0(e)?R0(e):e.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,e.Ur.stop()];case 2:r.sent(),zD(e),r.label=3;case 3:return[2]}})})})),e.Ur}function Wo(e){var t=this;return e.Kr||(e.Kr=function(n,r,i){var s=ee(n);return s.br(),new Nz(r,s.Hi,s.credentials,s.R,i)}(e.datastore,e.asyncQueue,{Ii:Fz.bind(null,e),Ri:Vz.bind(null,e),Ir:Uz.bind(null,e),Tr:jz.bind(null,e)}),e.Mr.push(function(n){return k(t,void 0,void 0,function(){return C(this,function(r){switch(r.label){case 0:return n?(e.Kr.sr(),[4,tc(e)]):[3,2];case 1:return r.sent(),[3,4];case 2:return[4,e.Kr.stop()];case 3:r.sent(),e.Fr.length>0&&(Y("RemoteStore","Stopping write stream with "+e.Fr.length+" pending writes"),e.Fr=[]),r.label=4;case 4:return[2]}})})})),e.Kr}var Bz=function(){function e(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Sn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(a){})}return e.createAndSchedule=function(t,n,r,i,s){var a=new e(t,n,Date.now()+r,i,s);return a.start(r),a},e.prototype.start=function(t){var n=this;this.timerHandle=setTimeout(function(){return n.handleDelayElapsed()},t)},e.prototype.skipDelay=function(){return this.handleDelayElapsed()},e.prototype.cancel=function(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new q(D.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},e.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return t.timerHandle!==null?(t.clearTimeout(),t.op().then(function(n){return t.deferred.resolve(n)})):Promise.resolve()})},e.prototype.clearTimeout=function(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},e}();function rc(e,t){if(Ot("AsyncQueue",t+": "+e),da(e))return new q(D.UNAVAILABLE,t+": "+e);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var XD=function(){function e(t){this.comparator=t?function(n,r){return t(n,r)||fe.comparator(n.key,r.key)}:function(n,r){return fe.comparator(n.key,r.key)},this.keyedMap=sw(),this.sortedSet=new Cn(this.comparator)}return e.emptySet=function(t){return new e(t.comparator)},e.prototype.has=function(t){return this.keyedMap.get(t)!=null},e.prototype.get=function(t){return this.keyedMap.get(t)},e.prototype.first=function(){return this.sortedSet.minKey()},e.prototype.last=function(){return this.sortedSet.maxKey()},e.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},e.prototype.indexOf=function(t){var n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1},Object.defineProperty(e.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),e.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(n,r){return t(n),!1})},e.prototype.add=function(t){var n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))},e.prototype.delete=function(t){var n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this},e.prototype.isEqual=function(t){if(!(t instanceof e)||this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0},e.prototype.toString=function(){var t=[];return this.forEach(function(n){t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`},e.prototype.copy=function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r},e}(),Ik=function(){function e(){this.Qr=new Cn(fe.comparator)}return e.prototype.track=function(t){var n=t.doc.key,r=this.Qr.get(n);r?t.type!==0&&r.type===3?this.Qr=this.Qr.insert(n,t):t.type===3&&r.type!==1?this.Qr=this.Qr.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.Qr=this.Qr.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.Qr=this.Qr.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.Qr=this.Qr.remove(n):t.type===1&&r.type===2?this.Qr=this.Qr.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.Qr=this.Qr.insert(n,{type:2,doc:t.doc}):le():this.Qr=this.Qr.insert(n,t)},e.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal(function(n,r){t.push(r)}),t},e}(),np=function(){function e(t,n,r,i,s,a,c,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=l}return e.fromInitialDocuments=function(t,n,r,i){var s=[];return n.forEach(function(a){s.push({type:0,doc:a})}),new e(t,n,XD.emptySet(n),s,r,i,!0,!1)},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Tf(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0},e}(),qz=function(){this.Wr=void 0,this.listeners=[]},Hz=function(){this.queries=new Zu(function(e){return eD(e)},Tf),this.onlineState="Unknown",this.Gr=new Set};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P0(e,t){return k(this,void 0,void 0,function(){var n,r,i,s,a,c,l;return C(this,function(h){switch(h.label){case 0:if(n=ee(e),r=t.query,i=!1,(s=n.queries.get(r))||(i=!0,s=new qz),!i)return[3,4];h.label=1;case 1:return h.trys.push([1,3,,4]),a=s,[4,n.onListen(r)];case 2:return a.Wr=h.sent(),[3,4];case 3:return c=h.sent(),l=rc(c,"Initialization of query '"+iw(t.query)+"' failed"),[2,void t.onError(l)];case 4:return n.queries.set(r,s),s.listeners.push(t),t.zr(n.onlineState),s.Wr&&t.Hr(s.Wr)&&D0(n),[2]}})})}function O0(e,t){return k(this,void 0,void 0,function(){var n,r,i,s,a;return C(this,function(c){return n=ee(e),r=t.query,i=!1,(s=n.queries.get(r))&&(a=s.listeners.indexOf(t))>=0&&(s.listeners.splice(a,1),i=s.listeners.length===0),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function Kz(e,t){for(var n=ee(e),r=!1,i=0,s=t;i<s.length;i++){var a=s[i],c=a.query,l=n.queries.get(c);if(l){for(var h=0,d=l.listeners;h<d.length;h++)d[h].Hr(a)&&(r=!0);l.Wr=a}}r&&D0(n)}function Wz(e,t,n){var r=ee(e),i=r.queries.get(t);if(i)for(var s=0,a=i.listeners;s<a.length;s++)a[s].onError(n);r.queries.delete(t)}function D0(e){e.Gr.forEach(function(t){t.next()})}var x0=function(){function e(t,n,r){this.query=t,this.Jr=n,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=r||{}}return e.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var n=[],r=0,i=t.docChanges;r<i.length;r++){var s=i[r];s.type!==3&&n.push(s)}t=new np(t.query,t.docs,t.oldDocs,n,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var a=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),a=!0):this.eo(t,this.onlineState)&&(this.no(t),a=!0),this.Xr=t,a},e.prototype.onError=function(t){this.Jr.error(t)},e.prototype.zr=function(t){this.onlineState=t;var n=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),n=!0),n},e.prototype.eo=function(t,n){if(!t.fromCache)return!0;var r=n!=="Offline";return!(this.options.so&&r||t.docs.isEmpty()&&n!=="Offline")},e.prototype.Zr=function(t){if(t.docChanges.length>0)return!0;var n=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0},e.prototype.no=function(t){t=np.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},e}(),Gz=function(){function e(t,n){this.payload=t,this.byteLength=n}return e.prototype.io=function(){return"metadata"in this.payload},e}(),Sk=function(){function e(t){this.R=t}return e.prototype.qn=function(t){return wi(this.R,t)},e.prototype.Un=function(t){return t.metadata.exists?_D(this.R,t.document,!1):hn.newNoDocument(this.qn(t.metadata.name),this.Kn(t.metadata.readTime))},e.prototype.Kn=function(t){return Yt(t)},e}(),zz=function(){function e(t,n,r){this.ro=t,this.localStore=n,this.R=r,this.queries=[],this.documents=[],this.progress=JD(t)}return e.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var n=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++n):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++n),n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null},e.prototype.co=function(t){for(var n=new Map,r=new Sk(this.R),i=0,s=t;i<s.length;i++){var a=s[i];if(a.metadata.queries)for(var c=r.qn(a.metadata.name),l=0,h=a.metadata.queries;l<h.length;l++){var d=h[l],v=(n.get(d)||et()).add(c);n.set(d,v)}}return n},e.prototype.complete=function(){return k(this,void 0,void 0,function(){var t,n,r,i,s;return C(this,function(a){switch(a.label){case 0:return[4,pz(this.localStore,new Sk(this.R),this.documents,this.ro.id)];case 1:t=a.sent(),n=this.co(this.documents),r=0,i=this.queries,a.label=2;case 2:return r<i.length?(s=i[r],[4,vz(this.localStore,s,n.get(s.name))]):[3,5];case 3:a.sent(),a.label=4;case 4:return r++,[3,2];case 5:return[2,(this.progress.taskState="Success",new az(Object.assign({},this.progress),t))]}})})},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JD(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ZD=function(e){this.key=e},ex=function(e){this.key=e},tx=function(){function e(t,n){this.query=t,this.uo=n,this.ao=null,this.current=!1,this.ho=et(),this.mutatedKeys=et(),this.lo=tD(t),this.fo=new XD(this.lo)}return Object.defineProperty(e.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),e.prototype._o=function(t,n){var r=this,i=n?n.mo:new Ik,s=n?n.fo:this.fo,a=n?n.mutatedKeys:this.mutatedKeys,c=s,l=!1,h=ld(this.query)&&s.size===this.query.limit?s.last():null,d=Yd(this.query)&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal(function(m,y){var w=s.get(m),E=If(r.query,y)?y:null,T=!!w&&r.mutatedKeys.has(w.key),A=!!E&&(E.hasLocalMutations||r.mutatedKeys.has(E.key)&&E.hasCommittedMutations),P=!1;w&&E?w.data.isEqual(E.data)?T!==A&&(i.track({type:3,doc:E}),P=!0):r.yo(w,E)||(i.track({type:2,doc:E}),P=!0,(h&&r.lo(E,h)>0||d&&r.lo(E,d)<0)&&(l=!0)):!w&&E?(i.track({type:0,doc:E}),P=!0):w&&!E&&(i.track({type:1,doc:w}),P=!0,(h||d)&&(l=!0)),P&&(E?(c=c.add(E),a=A?a.add(m):a.delete(m)):(c=c.delete(m),a=a.delete(m)))}),ld(this.query)||Yd(this.query))for(;c.size>this.query.limit;){var v=ld(this.query)?c.last():c.first();c=c.delete(v.key),a=a.delete(v.key),i.track({type:1,doc:v})}return{fo:c,mo:i,Nn:l,mutatedKeys:a}},e.prototype.yo=function(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations},e.prototype.applyChanges=function(t,n,r){var i=this,s=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var a=t.mo.jr();a.sort(function(d,v){return function(m,y){var w=function(E){switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return le()}};return w(m)-w(y)}(d.type,v.type)||i.lo(d.doc,v.doc)}),this.po(r);var c=n?this.Eo():[],l=this.ho.size===0&&this.current?1:0,h=l!==this.ao;return this.ao=l,a.length!==0||h?{snapshot:new np(this.query,t.fo,s,a,t.mutatedKeys,l===0,h,!1),To:c}:{To:c}},e.prototype.zr=function(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({fo:this.fo,mo:new Ik,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},e.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},e.prototype.po=function(t){var n=this;t&&(t.addedDocuments.forEach(function(r){return n.uo=n.uo.add(r)}),t.modifiedDocuments.forEach(function(r){}),t.removedDocuments.forEach(function(r){return n.uo=n.uo.delete(r)}),this.current=t.current)},e.prototype.Eo=function(){var t=this;if(!this.current)return[];var n=this.ho;this.ho=et(),this.fo.forEach(function(i){t.Io(i.key)&&(t.ho=t.ho.add(i.key))});var r=[];return n.forEach(function(i){t.ho.has(i)||r.push(new ex(i))}),this.ho.forEach(function(i){n.has(i)||r.push(new ZD(i))}),r},e.prototype.Ao=function(t){this.uo=t.Bn,this.ho=et();var n=this._o(t.documents);return this.applyChanges(n,!0)},e.prototype.Ro=function(){return np.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,this.ao===0)},e}(),$z=function(e,t,n){this.query=e,this.targetId=t,this.view=n},Qz=function(e){this.key=e,this.bo=!1},Yz=function(){function e(t,n,r,i,s,a){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.vo={},this.Po=new Zu(function(c){return eD(c)},Tf),this.Vo=new Map,this.So=new Set,this.Do=new Cn(fe.comparator),this.Co=new Map,this.No=new C0,this.xo={},this.ko=new Map,this.Fo=Zd.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(e.prototype,"isPrimaryClient",{get:function(){return this.$o===!0},enumerable:!1,configurable:!0}),e}();function Xz(e,t){return k(this,void 0,void 0,function(){var n,r,i,s,a,c;return C(this,function(l){switch(l.label){case 0:return n=j0(e),(s=n.Po.get(t))?(r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Ro(),[3,4]):[3,1];case 1:return[4,Pu(n.localStore,Mr(t))];case 2:return a=l.sent(),c=n.sharedClientState.addLocalQueryTarget(a.targetId),r=a.targetId,[4,L0(n,t,r,c==="current")];case 3:i=l.sent(),n.isPrimaryClient&&hv(n.remoteStore,a),l.label=4;case 4:return[2,i]}})})}function L0(e,t,n,r){return k(this,void 0,void 0,function(){var i,s,a,c,l,h;return C(this,function(d){switch(d.label){case 0:return e.Oo=function(v,m,y){return function(w,E,T,A){return k(this,void 0,void 0,function(){var P,O,H;return C(this,function(K){switch(K.label){case 0:return P=E.view._o(T),P.Nn?[4,ep(w.localStore,E.query,!1).then(function(U){var ie=U.documents;return E.view._o(ie,P)})]:[3,2];case 1:P=K.sent(),K.label=2;case 2:return O=A&&A.targetChanges.get(E.targetId),H=E.view.applyChanges(P,w.isPrimaryClient,O),[2,(fw(w,E.targetId,H.To),H.snapshot)]}})})}(e,v,m,y)},[4,ep(e.localStore,t,!0)];case 1:return i=d.sent(),s=new tx(t,i.Bn),a=s._o(i.documents),c=y0.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline"),l=s.applyChanges(a,e.isPrimaryClient,c),fw(e,n,l.To),h=new $z(t,n,s),[2,(e.Po.set(t,h),e.Vo.has(n)?e.Vo.get(n).push(t):e.Vo.set(n,[t]),l.snapshot)]}})})}function Jz(e,t){return k(this,void 0,void 0,function(){var n,r,i;return C(this,function(s){switch(s.label){case 0:return n=ee(e),r=n.Po.get(t),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(a){return!Tf(a,t)})),void n.Po.delete(t))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Ou(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),Gl(n.remoteStore,r.targetId),Du(n,r.targetId)}).catch(pa)]):[3,3];case 1:s.sent(),s.label=2;case 2:return[3,5];case 3:return Du(n,r.targetId),[4,Ou(n.localStore,r.targetId,!0)];case 4:s.sent(),s.label=5;case 5:return[2]}})})}function Zz(e,t,n){return k(this,void 0,void 0,function(){var r,i,s,a;return C(this,function(c){switch(c.label){case 0:r=V0(e),c.label=1;case 1:return c.trys.push([1,5,,6]),[4,function(l,h){var d,v=ee(l),m=tr.now(),y=h.reduce(function(w,E){return w.add(E.key)},et());return v.persistence.runTransaction("Locally write mutations","readwrite",function(w){return v.Mn.pn(w,y).next(function(E){d=E;for(var T=[],A=0,P=h;A<P.length;A++){var O=P[A],H=TG(O,d.get(O.key));H!=null&&T.push(new Qo(O.key,H,YO(H.value.mapValue),_n.exists(!0)))}return v._n.addMutationBatch(w,m,T,h)})}).then(function(w){return w.applyToLocalDocumentSet(d),{batchId:w.batchId,changes:d}})}(r.localStore,t)];case 2:return i=c.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(l,h,d){var v=l.xo[l.currentUser.toKey()];v||(v=new Cn(Ue)),v=v.insert(h,d),l.xo[l.currentUser.toKey()]=v}(r,i.batchId,n),[4,ro(r,i.changes)];case 3:return c.sent(),[4,tc(r.remoteStore)];case 4:return c.sent(),[3,6];case 5:return s=c.sent(),a=rc(s,"Failed to persist write"),n.reject(a),[3,6];case 6:return[2]}})})}function nx(e,t){return k(this,void 0,void 0,function(){var n,r;return C(this,function(i){switch(i.label){case 0:n=ee(e),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,fz(n.localStore,t)];case 2:return r=i.sent(),t.targetChanges.forEach(function(s,a){var c=n.Co.get(a);c&&(_e(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?c.bo=!0:s.modifiedDocuments.size>0?_e(c.bo):s.removedDocuments.size>0&&(_e(c.bo),c.bo=!1))}),[4,ro(n,r,t)];case 3:return i.sent(),[3,6];case 4:return[4,pa(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function Ck(e,t,n){var r=ee(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){var i=[];r.Po.forEach(function(s,a){var c=a.view.zr(t);c.snapshot&&i.push(c.snapshot)}),function(s,a){var c=ee(s);c.onlineState=a;var l=!1;c.queries.forEach(function(h,d){for(var v=0,m=d.listeners;v<m.length;v++)m[v].zr(a)&&(l=!0)}),l&&D0(c)}(r.eventManager,t),i.length&&r.vo._r(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function e$(e,t,n){return k(this,void 0,void 0,function(){var r,i,s,a,c,l;return C(this,function(h){switch(h.label){case 0:return(r=ee(e)).sharedClientState.updateQueryState(t,"rejected",n),i=r.Co.get(t),(s=i&&i.key)?(a=(a=new Cn(fe.comparator)).insert(s,hn.newNoDocument(s,De.min())),c=et().add(s),l=new m0(De.min(),new Map,new Vt(Ue),a,c),[4,nx(r,l)]):[3,2];case 1:return h.sent(),r.Do=r.Do.remove(s),r.Co.delete(t),U0(r),[3,4];case 2:return[4,Ou(r.localStore,t,!1).then(function(){return Du(r,t,n)}).catch(pa)];case 3:h.sent(),h.label=4;case 4:return[2]}})})}function t$(e,t){return k(this,void 0,void 0,function(){var n,r,i;return C(this,function(s){switch(s.label){case 0:n=ee(e),r=t.batch.batchId,s.label=1;case 1:return s.trys.push([1,4,,6]),[4,lz(n.localStore,t)];case 2:return i=s.sent(),F0(n,r,null),M0(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,ro(n,i)];case 3:return s.sent(),[3,6];case 4:return[4,pa(s.sent())];case 5:return s.sent(),[3,6];case 6:return[2]}})})}function n$(e,t,n){return k(this,void 0,void 0,function(){var r,i;return C(this,function(s){switch(s.label){case 0:r=ee(e),s.label=1;case 1:return s.trys.push([1,4,,6]),[4,function(a,c){var l=ee(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",function(h){var d;return l._n.lookupMutationBatch(h,c).next(function(v){return _e(v!==null),d=v.keys(),l._n.removeMutationBatch(h,v)}).next(function(){return l._n.performConsistencyCheck(h)}).next(function(){return l.Mn.pn(h,d)})})}(r.localStore,t)];case 2:return i=s.sent(),F0(r,t,n),M0(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),[4,ro(r,i)];case 3:return s.sent(),[3,6];case 4:return[4,pa(s.sent())];case 5:return s.sent(),[3,6];case 6:return[2]}})})}function r$(e,t){return k(this,void 0,void 0,function(){var n,r,i,s,a;return C(this,function(c){switch(c.label){case 0:Yo((n=ee(e)).remoteStore)||Y("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,function(l){var h=ee(l);return h.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(d){return h._n.getHighestUnacknowledgedBatchId(d)})}(n.localStore)];case 2:return(r=c.sent())===-1?[2,void t.resolve()]:((i=n.ko.get(r)||[]).push(t),n.ko.set(r,i),[3,4]);case 3:return s=c.sent(),a=rc(s,"Initialization of waitForPendingWrites() operation failed"),t.reject(a),[3,4];case 4:return[2]}})})}function M0(e,t){(e.ko.get(t)||[]).forEach(function(n){n.resolve()}),e.ko.delete(t)}function F0(e,t,n){var r=ee(e),i=r.xo[r.currentUser.toKey()];if(i){var s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.xo[r.currentUser.toKey()]=i}}function Du(e,t,n){n===void 0&&(n=null),e.sharedClientState.removeLocalQueryTarget(t);for(var r=0,i=e.Vo.get(t);r<i.length;r++){var s=i[r];e.Po.delete(s),n&&e.vo.Mo(s,n)}e.Vo.delete(t),e.isPrimaryClient&&e.No.Zn(t).forEach(function(a){e.No.containsKey(a)||rx(e,a)})}function rx(e,t){e.So.delete(t.path.canonicalString());var n=e.Do.get(t);n!==null&&(Gl(e.remoteStore,n),e.Do=e.Do.remove(t),e.Co.delete(n),U0(e))}function fw(e,t,n){for(var r=0,i=n;r<i.length;r++){var s=i[r];s instanceof ZD?(e.No.addReference(s.key,t),i$(e,s)):s instanceof ex?(Y("SyncEngine","Document no longer in limbo: "+s.key),e.No.removeReference(s.key,t),e.No.containsKey(s.key)||rx(e,s.key)):le()}}function i$(e,t){var n=t.key,r=n.path.canonicalString();e.Do.get(n)||e.So.has(r)||(Y("SyncEngine","New document in limbo: "+n),e.So.add(r),U0(e))}function U0(e){for(;e.So.size>0&&e.Do.size<e.maxConcurrentLimboResolutions;){var t=e.So.values().next().value;e.So.delete(t);var n=new fe($e.fromString(t)),r=e.Fo.next();e.Co.set(r,new Qz(n)),e.Do=e.Do.insert(n,r),hv(e.remoteStore,new fv(Mr(Ju(n.path)),r,2,pr.o))}}function ro(e,t,n){return k(this,void 0,void 0,function(){var r,i,s,a;return C(this,function(c){switch(c.label){case 0:return r=ee(e),i=[],s=[],a=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(l,h){a.push(r.Oo(h,t,n).then(function(d){if(d){r.isPrimaryClient&&r.sharedClientState.updateQueryState(h.targetId,d.fromCache?"not-current":"current"),i.push(d);var v=uz.Pn(h.targetId,d);s.push(v)}}))}),[4,Promise.all(a)]);case 1:return c.sent(),r.vo._r(i),[4,function(l,h){return k(this,void 0,void 0,function(){var d,v,m,y,w,E,T,A,P;return C(this,function(O){switch(O.label){case 0:d=ee(l),O.label=1;case 1:return O.trys.push([1,3,,4]),[4,d.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(H){return G.forEach(h,function(K){return G.forEach(K.bn,function(U){return d.persistence.referenceDelegate.addReference(H,K.targetId,U)}).next(function(){return G.forEach(K.vn,function(U){return d.persistence.referenceDelegate.removeReference(H,K.targetId,U)})})})})];case 2:return O.sent(),[3,4];case 3:if(!da(v=O.sent()))throw v;return Y("LocalStore","Failed to update sequence numbers: "+v),[3,4];case 4:for(m=0,y=h;m<y.length;m++)w=y[m],E=w.targetId,w.fromCache||(T=d.kn.get(E),A=T.snapshotVersion,P=T.withLastLimboFreeSnapshotVersion(A),d.kn=d.kn.insert(E,P));return[2]}})})}(r.localStore,s)];case 2:c.sent(),c.label=3;case 3:return[2]}})})}function o$(e,t){return k(this,void 0,void 0,function(){var n,r;return C(this,function(i){switch(i.label){case 0:return(n=ee(e)).currentUser.isEqual(t)?[3,3]:(Y("SyncEngine","User change. New user:",t.toKey()),[4,UD(n.localStore,t)]);case 1:return r=i.sent(),n.currentUser=t,function(s,a){s.ko.forEach(function(c){c.forEach(function(l){l.reject(new q(D.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.ko.clear()}(n),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),[4,ro(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function s$(e,t){var n=ee(e),r=n.Co.get(t);if(r&&r.bo)return et().add(r.key);var i=et(),s=n.Vo.get(t);if(!s)return i;for(var a=0,c=s;a<c.length;a++){var l=c[a],h=n.Po.get(l);i=i.unionWith(h.view.wo)}return i}function a$(e,t){return k(this,void 0,void 0,function(){var n,r,i;return C(this,function(s){switch(s.label){case 0:return[4,ep((n=ee(e)).localStore,t.query,!0)];case 1:return r=s.sent(),i=t.view.Ao(r),[2,(n.isPrimaryClient&&fw(n,t.targetId,i.To),i)]}})})}function u$(e){return k(this,void 0,void 0,function(){var t;return C(this,function(n){return[2,qD((t=ee(e)).localStore).then(function(r){return ro(t,r)})]})})}function c$(e,t,n,r){return k(this,void 0,void 0,function(){var i,s;return C(this,function(a){switch(a.label){case 0:return[4,function(c,l){var h=ee(c),d=ee(h._n);return h.persistence.runTransaction("Lookup mutation documents","readonly",function(v){return d.jt(v,l).next(function(m){return m?h.Mn.pn(v,m):G.resolve(null)})})}((i=ee(e)).localStore,t)];case 1:return(s=a.sent())===null?[3,6]:n!=="pending"?[3,3]:[4,tc(i.remoteStore)];case 2:return a.sent(),[3,4];case 3:n==="acknowledged"||n==="rejected"?(F0(i,t,r||null),M0(i,t),function(c,l){ee(ee(c)._n).Gt(l)}(i.localStore,t)):le(),a.label=4;case 4:return[4,ro(i,s)];case 5:return a.sent(),[3,7];case 6:Y("SyncEngine","Cannot apply mutation batch with id: "+t),a.label=7;case 7:return[2]}})})}function l$(e,t){return k(this,void 0,void 0,function(){var n,r,i,s,a,c,l,h;return C(this,function(d){switch(d.label){case 0:return j0(n=ee(e)),V0(n),t!==!0||n.$o===!0?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,Ak(n,r.toArray())]);case 1:return i=d.sent(),n.$o=!0,[4,lw(n.remoteStore,!0)];case 2:for(d.sent(),s=0,a=i;s<a.length;s++)c=a[s],hv(n.remoteStore,c);return[3,7];case 3:return t!==!1||n.$o===!1?[3,7]:(l=[],h=Promise.resolve(),n.Vo.forEach(function(v,m){n.sharedClientState.isLocalQueryTarget(m)?l.push(m):h=h.then(function(){return Du(n,m),Ou(n.localStore,m,!0)}),Gl(n.remoteStore,m)}),[4,h]);case 4:return d.sent(),[4,Ak(n,l)];case 5:return d.sent(),function(v){var m=ee(v);m.Co.forEach(function(y,w){Gl(m.remoteStore,w)}),m.No.ts(),m.Co=new Map,m.Do=new Cn(fe.comparator)}(n),n.$o=!1,[4,lw(n.remoteStore,!1)];case 6:d.sent(),d.label=7;case 7:return[2]}})})}function Ak(e,t,n){return k(this,void 0,void 0,function(){var r,i,s,a,c,l,h,d,v,m,y,w,E,T;return C(this,function(A){switch(A.label){case 0:r=ee(e),i=[],s=[],a=0,c=t,A.label=1;case 1:return a<c.length?(l=c[a],h=void 0,(d=r.Vo.get(l))&&d.length!==0?[4,Pu(r.localStore,Mr(d[0]))]:[3,7]):[3,13];case 2:h=A.sent(),v=0,m=d,A.label=3;case 3:return v<m.length?(y=m[v],w=r.Po.get(y),[4,a$(r,w)]):[3,6];case 4:(E=A.sent()).snapshot&&s.push(E.snapshot),A.label=5;case 5:return v++,[3,3];case 6:return[3,11];case 7:return[4,BD(r.localStore,l)];case 8:return T=A.sent(),[4,Pu(r.localStore,T)];case 9:return h=A.sent(),[4,L0(r,ix(T),l,!1)];case 10:A.sent(),A.label=11;case 11:i.push(h),A.label=12;case 12:return a++,[3,1];case 13:return[2,(r.vo._r(s),i)]}})})}function ix(e){return JO(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function f$(e){var t=ee(e);return ee(ee(t.localStore).persistence).fn()}function h$(e,t,n,r){return k(this,void 0,void 0,function(){var i,s,a;return C(this,function(c){switch(c.label){case 0:return(i=ee(e)).$o?(Y("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(t))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,qD(i.localStore)];case 3:return s=c.sent(),a=m0.createSynthesizedRemoteEventForCurrentChange(t,n==="current"),[4,ro(i,s,a)];case 4:return c.sent(),[3,8];case 5:return[4,Ou(i.localStore,t,!0)];case 6:return c.sent(),Du(i,t,r),[3,8];case 7:le(),c.label=8;case 8:return[2]}})})}function d$(e,t,n){return k(this,void 0,void 0,function(){var r,i,s,a,c,l,h,d,v,m;return C(this,function(y){switch(y.label){case 0:if(!(r=j0(e)).$o)return[3,10];i=0,s=t,y.label=1;case 1:return i<s.length?(a=s[i],r.Vo.has(a)?(Y("SyncEngine","Adding an already active target "+a),[3,5]):[4,BD(r.localStore,a)]):[3,6];case 2:return c=y.sent(),[4,Pu(r.localStore,c)];case 3:return l=y.sent(),[4,L0(r,ix(c),l.targetId,!1)];case 4:y.sent(),hv(r.remoteStore,l),y.label=5;case 5:return i++,[3,1];case 6:h=function(w){return C(this,function(E){switch(E.label){case 0:return r.Vo.has(w)?[4,Ou(r.localStore,w,!1).then(function(){Gl(r.remoteStore,w),Du(r,w)}).catch(pa)]:[3,2];case 1:E.sent(),E.label=2;case 2:return[2]}})},d=0,v=n,y.label=7;case 7:return d<v.length?(m=v[d],[5,h(m)]):[3,10];case 8:y.sent(),y.label=9;case 9:return d++,[3,7];case 10:return[2]}})})}function j0(e){var t=ee(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=nx.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=s$.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=e$.bind(null,t),t.vo._r=Kz.bind(null,t.eventManager),t.vo.Mo=Wz.bind(null,t.eventManager),t}function V0(e){var t=ee(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=t$.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=n$.bind(null,t),t}function p$(e,t,n){var r=ee(e);(function(i,s,a){return k(this,void 0,void 0,function(){var c,l,h,d,v,m;return C(this,function(y){switch(y.label){case 0:return y.trys.push([0,14,,15]),[4,s.getMetadata()];case 1:return c=y.sent(),[4,function(w,E){var T=ee(w),A=Yt(E.createTime);return T.persistence.runTransaction("hasNewerBundle","readonly",function(P){return T.Ke.getBundleMetadata(P,E.id)}).then(function(P){return!!P&&P.createTime.compareTo(A)>=0})}(i.localStore,c)];case 2:return y.sent()?[4,s.close()]:[3,4];case 3:return[2,(y.sent(),void a._completeWith(function(w){return{taskState:"Success",documentsLoaded:w.totalDocuments,bytesLoaded:w.totalBytes,totalDocuments:w.totalDocuments,totalBytes:w.totalBytes}}(c)))];case 4:return a._updateProgress(JD(c)),l=new zz(c,i.localStore,s.R),[4,s.Lo()];case 5:h=y.sent(),y.label=6;case 6:return h?[4,l.oo(h)]:[3,10];case 7:return(d=y.sent())&&a._updateProgress(d),[4,s.Lo()];case 8:h=y.sent(),y.label=9;case 9:return[3,6];case 10:return[4,l.complete()];case 11:return v=y.sent(),[4,ro(i,v.wn,void 0)];case 12:return y.sent(),[4,function(w,E){var T=ee(w);return T.persistence.runTransaction("Save bundle","readwrite",function(A){return T.Ke.saveBundleMetadata(A,E)})}(i.localStore,c)];case 13:return y.sent(),a._completeWith(v.progress),[3,15];case 14:return jl("SyncEngine","Loading bundle failed with "+(m=y.sent())),a._failWith(m),[3,15];case 15:return[2]}})})})(r,t,n).then(function(){r.sharedClientState.notifyBundleLoaded()})}var ox=function(){function e(){this.synchronizeTabs=!1}return e.prototype.initialize=function(t){return k(this,void 0,void 0,function(){return C(this,function(n){switch(n.label){case 0:return this.R=kf(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return n.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}})})},e.prototype.Uo=function(t){return null},e.prototype.Ko=function(t){return FD(this.persistence,new MD,t.initialUser,this.R)},e.prototype.qo=function(t){return new bz(Tz.bs,this.R)},e.prototype.Bo=function(t){return new HD},e.prototype.terminate=function(){return k(this,void 0,void 0,function(){return C(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},e}(),sx=function(e){function t(n,r,i){var s=this;return(s=e.call(this)||this).Qo=n,s.cacheSizeBytes=r,s.forceOwnership=i,s.synchronizeTabs=!1,s}return te(t,e),t.prototype.initialize=function(n){return k(this,void 0,void 0,function(){var r=this;return C(this,function(i){switch(i.label){case 0:return[4,e.prototype.initialize.call(this,n)];case 1:return i.sent(),[4,dz(this.localStore)];case 2:return i.sent(),[4,this.Qo.initialize(this,n)];case 3:return i.sent(),[4,V0(this.Qo.syncEngine)];case 4:return i.sent(),[4,tc(this.Qo.remoteStore)];case 5:return i.sent(),[4,this.persistence.He(function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()})];case 6:return i.sent(),[2]}})})},t.prototype.Ko=function(n){return FD(this.persistence,new MD,n.initialUser,this.R)},t.prototype.Uo=function(n){var r=this.persistence.referenceDelegate.garbageCollector;return new ez(r,n.asyncQueue)},t.prototype.qo=function(n){var r=S0(n.databaseInfo.databaseId,n.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?vi.withCacheSize(this.cacheSizeBytes):vi.DEFAULT;return new sz(this.synchronizeTabs,r,n.clientId,i,n.asyncQueue,KD(),dd(),this.R,this.sharedClientState,!!this.forceOwnership)},t.prototype.Bo=function(n){return new HD},t}(ox),v$=function(e){function t(n,r){var i=this;return(i=e.call(this,n,r,!1)||this).Qo=n,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return te(t,e),t.prototype.initialize=function(n){return k(this,void 0,void 0,function(){var r,i=this;return C(this,function(s){switch(s.label){case 0:return[4,e.prototype.initialize.call(this,n)];case 1:return s.sent(),r=this.Qo.syncEngine,this.sharedClientState instanceof Fy?(this.sharedClientState.syncEngine={ui:c$.bind(null,r),ai:h$.bind(null,r),hi:d$.bind(null,r),fn:f$.bind(null,r),ci:u$.bind(null,r)},[4,this.sharedClientState.start()]):[3,3];case 2:s.sent(),s.label=3;case 3:return[4,this.persistence.He(function(a){return k(i,void 0,void 0,function(){return C(this,function(c){switch(c.label){case 0:return[4,l$(this.Qo.syncEngine,a)];case 1:return c.sent(),this.gcScheduler&&(a&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):a||this.gcScheduler.stop()),[2]}})})})];case 4:return s.sent(),[2]}})})},t.prototype.Bo=function(n){var r=KD();if(!Fy.yt(r))throw new q(D.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var i=S0(n.databaseInfo.databaseId,n.databaseInfo.persistenceKey);return new Fy(r,n.asyncQueue,i,n.clientId,n.initialUser)},t}(sx),hw=function(){function e(){}return e.prototype.initialize=function(t,n){return k(this,void 0,void 0,function(){var r=this;return C(this,function(i){switch(i.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(s){return Ck(r.syncEngine,s,1)},this.remoteStore.remoteSyncer.handleCredentialChange=o$.bind(null,this.syncEngine),[4,lw(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:i.sent(),i.label=2;case 2:return[2]}})})},e.prototype.createEventManager=function(t){return new Hz},e.prototype.createDatastore=function(t){var n,r=kf(t.databaseInfo.databaseId),i=(n=t.databaseInfo,new kz(n));return function(s,a,c){return new Pz(s,a,c)}(t.credentials,i,r)},e.prototype.createRemoteStore=function(t){var n,r,i,s,a,c=this;return n=this.localStore,r=this.datastore,i=t.asyncQueue,s=function(l){return Ck(c.syncEngine,l,0)},a=Tk.yt()?new Tk:new Sz,new Dz(n,r,i,s,a)},e.prototype.createSyncEngine=function(t,n){return function(r,i,s,a,c,l,h){var d=new Yz(r,i,s,a,c,l);return h&&(d.$o=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)},e.prototype.terminate=function(){return function(t){return k(this,void 0,void 0,function(){var n;return C(this,function(r){switch(r.label){case 0:return n=ee(t),Y("RemoteStore","RemoteStore shutting down."),n.Or.add(5),[4,ec(n)];case 1:return r.sent(),n.Lr.shutdown(),n.Br.set("Unknown"),[2]}})})}(this.remoteStore)},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kk(e,t){t===void 0&&(t=10240);var n=0;return{read:function(){return k(this,void 0,void 0,function(){var r;return C(this,function(i){return n<e.byteLength?(r={value:e.slice(n,n+t),done:!1},[2,(n+=t,r)]):[2,{done:!0}]})})},cancel:function(){return k(this,void 0,void 0,function(){return C(this,function(r){return[2]})})},releaseLock:function(){},closed:Promise.reject("unimplemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dv=function(){function e(t){this.observer=t,this.muted=!1}return e.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},e.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},e.prototype.Wo=function(){this.muted=!0},e.prototype.jo=function(t,n){var r=this;this.muted||setTimeout(function(){r.muted||t(n)},0)},e}(),g$=function(){function e(t,n){var r=this;this.Go=t,this.R=n,this.metadata=new Sn,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(i){i&&i.io()?r.metadata.resolve(i.payload.metadata):r.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             `+JSON.stringify(i==null?void 0:i.payload)))},function(i){return r.metadata.reject(i)})}return e.prototype.close=function(){return this.Go.cancel()},e.prototype.getMetadata=function(){return k(this,void 0,void 0,function(){return C(this,function(t){return[2,this.metadata.promise]})})},e.prototype.Lo=function(){return k(this,void 0,void 0,function(){return C(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},e.prototype.Ho=function(){return k(this,void 0,void 0,function(){var t,n,r,i;return C(this,function(s){switch(s.label){case 0:return[4,this.Jo()];case 1:return(t=s.sent())===null?[2,null]:(n=this.zo.decode(t),r=Number(n),isNaN(r)&&this.Yo("length string ("+n+") is not valid number"),[4,this.Xo(r)]);case 2:return i=s.sent(),[2,new Gz(JSON.parse(i),t.length+r)]}})})},e.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},e.prototype.Jo=function(){return k(this,void 0,void 0,function(){var t,n;return C(this,function(r){switch(r.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(r.sent())return[3,3];r.label=2;case 2:return[3,0];case 3:return this.buffer.length===0?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),n)])}})})},e.prototype.Xo=function(t){return k(this,void 0,void 0,function(){var n;return C(this,function(r){switch(r.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:r.sent()&&this.Yo("Reached the end of bundle when more is expected."),r.label=2;case 2:return[3,0];case 3:return n=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),n)]}})})},e.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},e.prototype.tc=function(){return k(this,void 0,void 0,function(){var t,n;return C(this,function(r){switch(r.label){case 0:return[4,this.Go.read()];case 1:return(t=r.sent()).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),[2,t.done]}})})},e}(),m$=function(){function e(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return e.prototype.lookup=function(t){return k(this,void 0,void 0,function(){var n,r=this;return C(this,function(i){switch(i.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new q(D.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(s,a){return k(this,void 0,void 0,function(){var c,l,h,d,v,m;return C(this,function(y){switch(y.label){case 0:return c=ee(s),l=Wl(c.R)+"/documents",h={documents:a.map(function(w){return Kl(c.R,w)})},[4,c.$i("BatchGetDocuments",l,h)];case 1:return d=y.sent(),v=new Map,d.forEach(function(w){var E=function(T,A){return"found"in A?function(P,O){_e(!!O.found),O.found.name,O.found.updateTime;var H=wi(P,O.found.name),K=Yt(O.found.updateTime),U=new hr({mapValue:{fields:O.found.fields}});return hn.newFoundDocument(H,K,U)}(T,A):"missing"in A?function(P,O){_e(!!O.missing),_e(!!O.readTime);var H=wi(P,O.missing),K=Yt(O.readTime);return hn.newNoDocument(H,K)}(T,A):le()}(c.R,w);v.set(E.key.toString(),E)}),m=[],[2,(a.forEach(function(w){var E=v.get(w.toString());_e(!!E),m.push(E)}),m)]}})})}(this.datastore,t)];case 1:return[2,((n=i.sent()).forEach(function(s){return r.recordVersion(s)}),n)]}})})},e.prototype.set=function(t,n){this.write(n.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},e.prototype.update=function(t,n){try{this.write(n.toMutation(t,this.preconditionForUpdate(t)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(t.toString())},e.prototype.delete=function(t){this.write(new Af(t,this.precondition(t))),this.writtenDocs.add(t.toString())},e.prototype.commit=function(){return k(this,void 0,void 0,function(){var t,n=this;return C(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(i){t.delete(i.key.toString())}),t.forEach(function(i,s){var a=fe.fromPath(s);n.mutations.push(new g0(a,n.precondition(a)))}),[4,function(i,s){return k(this,void 0,void 0,function(){var a,c,l;return C(this,function(h){switch(h.label){case 0:return a=ee(i),c=Wl(a.R)+"/documents",l={writes:s.map(function(d){return Xd(a.R,d)})},[4,a.Ni("Commit",c,l)];case 1:return h.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return r.sent(),this.committed=!0,[2]}})})},e.prototype.recordVersion=function(t){var n;if(t.isFoundDocument())n=t.version;else{if(!t.isNoDocument())throw le();n=De.min()}var r=this.readVersions.get(t.key.toString());if(r){if(!n.isEqual(r))throw new q(D.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),n)},e.prototype.precondition=function(t){var n=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&n?_n.updateTime(n):_n.none()},e.prototype.preconditionForUpdate=function(t){var n=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&n){if(n.isEqual(De.min()))throw new q(D.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return _n.updateTime(n)}return _n.exists(!0)},e.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},e.prototype.ensureCommitNotCalled=function(){},e}(),y$=function(){function e(t,n,r,i){this.asyncQueue=t,this.datastore=n,this.updateFunction=r,this.deferred=i,this.ec=5,this.Zi=new A0(this.asyncQueue,"transaction_retry")}return e.prototype.run=function(){this.ec-=1,this.nc()},e.prototype.nc=function(){var t=this;this.Zi.ji(function(){return k(t,void 0,void 0,function(){var n,r,i=this;return C(this,function(s){return n=new m$(this.datastore),(r=this.sc(n))&&r.then(function(a){i.asyncQueue.enqueueAndForget(function(){return n.commit().then(function(){i.deferred.resolve(a)}).catch(function(c){i.ic(c)})})}).catch(function(a){i.ic(a)}),[2]})})})},e.prototype.sc=function(t){try{var n=this.updateFunction(t);return!ha(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}},e.prototype.ic=function(t){var n=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return n.nc(),Promise.resolve()})):this.deferred.reject(t)},e.prototype.rc=function(t){if(t.name==="FirebaseError"){var n=t.code;return n==="aborted"||n==="failed-precondition"||!lD(n)}return!1},e}(),_$=function(){function e(t,n,r){var i=this;this.credentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=rn.UNAUTHENTICATED,this.clientId=KO.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(n,function(s){return k(i,void 0,void 0,function(){return C(this,function(a){switch(a.label){case 0:return Y("FirestoreClient","Received user=",s.uid),[4,this.credentialListener(s)];case 1:return a.sent(),this.user=s,[2]}})})})}return e.prototype.getConfiguration=function(){return k(this,void 0,void 0,function(){return C(this,function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},e.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},e.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new q(D.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var n=new Sn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return k(t,void 0,void 0,function(){var r,i;return C(this,function(s){switch(s.label){case 0:return s.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:s.sent(),s.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:s.sent(),s.label=4;case 4:return this.credentials.removeChangeListener(),n.resolve(),[3,6];case 5:return r=s.sent(),i=rc(r,"Failed to shutdown persistence"),n.reject(i),[3,6];case 6:return[2]}})})}),n.promise},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ax(e,t){return k(this,void 0,void 0,function(){var n,r,i=this;return C(this,function(s){switch(s.label){case 0:return e.asyncQueue.verifyOperationInProgress(),Y("FirestoreClient","Initializing OfflineComponentProvider"),[4,e.getConfiguration()];case 1:return n=s.sent(),[4,t.initialize(n)];case 2:return s.sent(),r=n.initialUser,e.setCredentialChangeListener(function(a){return k(i,void 0,void 0,function(){return C(this,function(c){switch(c.label){case 0:return r.isEqual(a)?[3,2]:[4,UD(t.localStore,a)];case 1:c.sent(),r=a,c.label=2;case 2:return[2]}})})}),t.persistence.setDatabaseDeletedListener(function(){return e.terminate()}),e.offlineComponents=t,[2]}})})}function ux(e,t){return k(this,void 0,void 0,function(){var n,r;return C(this,function(i){switch(i.label){case 0:return e.asyncQueue.verifyOperationInProgress(),[4,B0(e)];case 1:return n=i.sent(),Y("FirestoreClient","Initializing OnlineComponentProvider"),[4,e.getConfiguration()];case 2:return r=i.sent(),[4,t.initialize(n,r)];case 3:return i.sent(),e.setCredentialChangeListener(function(s){return function(a,c){return k(this,void 0,void 0,function(){var l,h;return C(this,function(d){switch(d.label){case 0:return(l=ee(a)).asyncQueue.verifyOperationInProgress(),Y("RemoteStore","RemoteStore received new credentials"),h=Yo(l),l.Or.add(3),[4,ec(l)];case 1:return d.sent(),h&&l.Br.set("Unknown"),[4,l.remoteSyncer.handleCredentialChange(c)];case 2:return d.sent(),l.Or.delete(3),[4,Rf(l)];case 3:return d.sent(),[2]}})})}(t.remoteStore,s)}),e.onlineComponents=t,[2]}})})}function B0(e){return k(this,void 0,void 0,function(){return C(this,function(t){switch(t.label){case 0:return e.offlineComponents?[3,2]:(Y("FirestoreClient","Using default OfflineComponentProvider"),[4,ax(e,new ox)]);case 1:t.sent(),t.label=2;case 2:return[2,e.offlineComponents]}})})}function pv(e){return k(this,void 0,void 0,function(){return C(this,function(t){switch(t.label){case 0:return e.onlineComponents?[3,2]:(Y("FirestoreClient","Using default OnlineComponentProvider"),[4,ux(e,new hw)]);case 1:t.sent(),t.label=2;case 2:return[2,e.onlineComponents]}})})}function Rk(e){return B0(e).then(function(t){return t.persistence})}function q0(e){return B0(e).then(function(t){return t.localStore})}function Nk(e){return pv(e).then(function(t){return t.remoteStore})}function H0(e){return pv(e).then(function(t){return t.syncEngine})}function xu(e){return k(this,void 0,void 0,function(){var t,n;return C(this,function(r){switch(r.label){case 0:return[4,pv(e)];case 1:return t=r.sent(),[2,((n=t.eventManager).onListen=Xz.bind(null,t.syncEngine),n.onUnlisten=Jz.bind(null,t.syncEngine),n)]}})})}function Pk(e,t,n){var r=this;n===void 0&&(n={});var i=new Sn;return e.asyncQueue.enqueueAndForget(function(){return k(r,void 0,void 0,function(){var s;return C(this,function(a){switch(a.label){case 0:return s=function(c,l,h,d,v){var m=new dv({next:function(w){l.enqueueAndForget(function(){return O0(c,y)});var E=w.docs.has(h);!E&&w.fromCache?v.reject(new q(D.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&w.fromCache&&d&&d.source==="server"?v.reject(new q(D.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(w)},error:function(w){return v.reject(w)}}),y=new x0(Ju(h.path),m,{includeMetadataChanges:!0,so:!0});return P0(c,y)},[4,xu(e)];case 1:return[2,s.apply(void 0,[a.sent(),e.asyncQueue,t,n,i])]}})})}),i.promise}function Ok(e,t,n){var r=this;n===void 0&&(n={});var i=new Sn;return e.asyncQueue.enqueueAndForget(function(){return k(r,void 0,void 0,function(){var s;return C(this,function(a){switch(a.label){case 0:return s=function(c,l,h,d,v){var m=new dv({next:function(w){l.enqueueAndForget(function(){return O0(c,y)}),w.fromCache&&d.source==="server"?v.reject(new q(D.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(w)},error:function(w){return v.reject(w)}}),y=new x0(h,m,{includeMetadataChanges:!0,so:!0});return P0(c,y)},[4,xu(e)];case 1:return[2,s.apply(void 0,[a.sent(),e.asyncQueue,t,n,i])]}})})}),i.promise}var w$=function(e,t,n,r,i,s,a,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.useFetchStreams=c},rp=function(){function e(t,n){this.projectId=t,this.database=n||"(default)"}return Object.defineProperty(e.prototype,"isDefaultDatabase",{get:function(){return this.database==="(default)"},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database},e}(),Dk=new Map,cx=function(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+e},xk=function(){function e(){this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(null)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(t,n){this.changeListener=n,t.enqueueRetryable(function(){return n(rn.UNAUTHENTICATED)})},e.prototype.removeChangeListener=function(){this.changeListener=null},e}(),b$=function(){function e(t){this.token=t,this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(this.token)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(t,n){var r=this;this.changeListener=n,t.enqueueRetryable(function(){return n(r.token.user)})},e.prototype.removeChangeListener=function(){this.changeListener=null},e}(),E$=function(){function e(t){var n=this;this.currentUser=rn.UNAUTHENTICATED,this.oc=new Sn,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){n.cc++,n.currentUser=n.ac(),n.oc.resolve(),n.changeListener&&n.asyncQueue.enqueueRetryable(function(){return n.changeListener(n.currentUser)})};var r=function(i){Y("FirebaseCredentialsProvider","Auth detected"),n.auth=i,n.auth.addAuthTokenListener(n.uc)};t.onInit(function(i){return r(i)}),setTimeout(function(){if(!n.auth){var i=t.getImmediate({optional:!0});i?r(i):(Y("FirebaseCredentialsProvider","Auth not yet detected"),n.oc.resolve())}},0)}return e.prototype.getToken=function(){var t=this,n=this.cc,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(function(i){return t.cc!==n?(Y("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):i?(_e(typeof i.accessToken=="string"),new cx(i.accessToken,t.currentUser)):null}):Promise.resolve(null)},e.prototype.invalidateToken=function(){this.forceRefresh=!0},e.prototype.setChangeListener=function(t,n){var r=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable(function(){return k(r,void 0,void 0,function(){return C(this,function(i){switch(i.label){case 0:return[4,this.oc.promise];case 1:return i.sent(),[4,n(this.currentUser)];case 2:return i.sent(),this.changeListener=n,[2]}})})})},e.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},e.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return _e(t===null||typeof t=="string"),new rn(t)},e}(),T$=function(){function e(t,n,r){this.hc=t,this.lc=n,this.fc=r,this.type="FirstParty",this.user=rn.FIRST_PARTY}return Object.defineProperty(e.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},n=this.hc.auth.getAuthHeaderValueForFirstParty([]);return n&&(t.Authorization=n),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),e}(),I$=function(){function e(t,n,r){this.hc=t,this.lc=n,this.fc=r}return e.prototype.getToken=function(){return Promise.resolve(new T$(this.hc,this.lc,this.fc))},e.prototype.setChangeListener=function(t,n){t.enqueueRetryable(function(){return n(rn.FIRST_PARTY)})},e.prototype.removeChangeListener=function(){},e.prototype.invalidateToken=function(){},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K0(e,t,n){if(!n)throw new q(D.INVALID_ARGUMENT,"Function "+e+"() cannot be called with an empty "+t+".")}function W0(e,t){if(t===void 0)return{merge:!1};if(t.mergeFields!==void 0&&t.merge!==void 0)throw new q(D.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');return t}function lx(e,t,n,r){if(t===!0&&r===!0)throw new q(D.INVALID_ARGUMENT,e+" and "+n+" cannot be used together.")}function Lk(e){if(!fe.isDocumentKey(e))throw new q(D.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e+" has "+e.length+".")}function Mk(e){if(fe.isDocumentKey(e))throw new q(D.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e+" has "+e.length+".")}function vv(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";var t=function(n){if(n.constructor){var r=/function\s+([^\s(]+)\s*\(/.exec(n.constructor.toString());if(r&&r.length>1)return r[1]}return null}(e);return t?"a custom "+t+" object":"an object"}return typeof e=="function"?"a function":le()}function Ge(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new q(D.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=vv(e);throw new q(D.INVALID_ARGUMENT,"Expected type '"+t.name+"', but it was: "+n)}return e}function Fk(e,t){if(t<=0)throw new q(D.INVALID_ARGUMENT,"Function "+e+"() requires a positive number, but it was: "+t+".")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Uk=function(){function e(t){var n;if(t.host===void 0){if(t.ssl!==void 0)throw new q(D.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new q(D.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,lx("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return e.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},e}(),zl=function(){function e(t,n){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Uk({}),this._settingsFrozen=!1,t instanceof rp?(this._databaseId=t,this._credentials=new xk):(this._app=t,this._databaseId=function(r){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new q(D.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rp(r.options.projectId)}(t),this._credentials=new E$(n))}return Object.defineProperty(e.prototype,"app",{get:function(){if(!this._app)throw new q(D.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_terminated",{get:function(){return this._terminateTask!==void 0},enumerable:!1,configurable:!0}),e.prototype._setSettings=function(t){if(this._settingsFrozen)throw new q(D.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Uk(t),t.credentials!==void 0&&(this._credentials=function(n){if(!n)return new xk;switch(n.type){case"gapi":var r=n.client;return _e(!(typeof r!="object"||r===null||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new I$(r,n.sessionIndex||"0",n.iamToken||null);case"provider":return n.client;default:throw new q(D.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},e.prototype._getSettings=function(){return this._settings},e.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},e.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},e.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},e.prototype._terminate=function(){return t=this,(n=Dk.get(t))&&(Y("ComponentProvider","Removing Datastore"),Dk.delete(t),n.terminate()),Promise.resolve();var t,n},e}(),_t=function(){function e(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}return Object.defineProperty(e.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Mo(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._key)},e}(),nr=function(){function e(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}return e.prototype.withConverter=function(t){return new e(this.firestore,t,this._query)},e}(),Mo=function(e){function t(n,r,i){var s=this;return(s=e.call(this,n,r,Ju(i))||this)._path=i,s.type="collection",s}return te(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var n=this._path.popLast();return n.isEmpty()?null:new _t(this.firestore,null,new fe(n))},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(n){return new t(this.firestore,n,this._path)},t}(nr);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fx(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(e=Re(e),K0("collection","path",t),e instanceof zl)return Mk(n=$e.fromString.apply($e,Ne([t],r))),new Mo(e,null,n);if(!(e instanceof _t||e instanceof Mo))throw new q(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Mk(n=$e.fromString.apply($e,Ne([e.path],r)).child($e.fromString(t))),new Mo(e.firestore,null,n)}function pd(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(e=Re(e),arguments.length===1&&(t=KO.u()),K0("doc","path",t),e instanceof zl)return Lk(n=$e.fromString.apply($e,Ne([t],r))),new _t(e,null,new fe(n));if(!(e instanceof _t||e instanceof Mo))throw new q(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Lk(n=e._path.child($e.fromString.apply($e,Ne([t],r)))),new _t(e.firestore,e instanceof Mo?e.converter:null,new fe(n))}function hx(e,t){return e=Re(e),t=Re(t),(e instanceof _t||e instanceof Mo)&&(t instanceof _t||t instanceof Mo)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function dx(e,t){return e=Re(e),t=Re(t),e instanceof nr&&t instanceof nr&&e.firestore===t.firestore&&Tf(e._query,t._query)&&e.converter===t.converter}var S$=function(){function e(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new A0(this,"async_queue_retry"),this.Ic=function(){var r=dd();r&&Y("AsyncQueue","Visibility state changed to "+r.visibilityState),t.Zi.Gi()};var n=dd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(e.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),e.prototype.enqueueAndForget=function(t){this.enqueue(t)},e.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},e.prototype.enterRestrictedMode=function(t){if(!this._c){this._c=!0,this.Ec=t||!1;var n=dd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Ic)}},e.prototype.enqueue=function(t){var n=this;if(this.Ac(),this._c)return new Promise(function(){});var r=new Sn;return this.Rc(function(){return n._c&&n.Ec?Promise.resolve():(t().then(r.resolve,r.reject),r.promise)}).then(function(){return r.promise})},e.prototype.enqueueRetryable=function(t){var n=this;this.enqueueAndForget(function(){return n.wc.push(t),n.bc()})},e.prototype.bc=function(){return k(this,void 0,void 0,function(){var t,n=this;return C(this,function(r){switch(r.label){case 0:if(this.wc.length===0)return[3,5];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return r.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!da(t=r.sent()))throw t;return Y("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji(function(){return n.bc()}),r.label=5;case 5:return[2]}})})},e.prototype.Rc=function(t){var n=this,r=this.dc.then(function(){return n.gc=!0,t().catch(function(i){throw n.yc=i,n.gc=!1,Ot("INTERNAL UNHANDLED ERROR: ",function(s){var a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(i)),i}).then(function(i){return n.gc=!1,i})});return this.dc=r,r},e.prototype.enqueueAfterDelay=function(t,n,r){var i=this;this.Ac(),this.Tc.indexOf(t)>-1&&(n=0);var s=Bz.createAndSchedule(this,t,n,r,function(a){return i.vc(a)});return this.mc.push(s),s},e.prototype.Ac=function(){this.yc&&le()},e.prototype.verifyOperationInProgress=function(){},e.prototype.Pc=function(){return k(this,void 0,void 0,function(){var t;return C(this,function(n){switch(n.label){case 0:return[4,t=this.dc];case 1:n.sent(),n.label=2;case 2:if(t!==this.dc)return[3,0];n.label=3;case 3:return[2]}})})},e.prototype.Vc=function(t){for(var n=0,r=this.mc;n<r.length;n++)if(r[n].timerId===t)return!0;return!1},e.prototype.Sc=function(t){var n=this;return this.Pc().then(function(){n.mc.sort(function(a,c){return a.targetTimeMs-c.targetTimeMs});for(var r=0,i=n.mc;r<i.length;r++){var s=i[r];if(s.skipDelay(),t!=="all"&&s.timerId===t)break}return n.Pc()})},e.prototype.Dc=function(t){this.Tc.push(t)},e.prototype.vc=function(t){var n=this.mc.indexOf(t);this.mc.splice(n,1)},e}();function Lu(e){return function(t,n){if(typeof t!="object"||t===null)return!1;for(var r=t,i=0,s=["next","error","complete"];i<s.length;i++){var a=s[i];if(a in r&&typeof r[a]=="function")return!0}return!1}(e)}var C$=function(){function e(){this._progressObserver={},this._taskCompletionResolver=new Sn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return e.prototype.onProgress=function(t,n,r){this._progressObserver={next:t,error:n,complete:r}},e.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},e.prototype.then=function(t,n){return this._taskCompletionResolver.promise.then(t,n)},e.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},e.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},e.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)},e}(),A$=-1,kt=function(e){function t(n,r){var i=this;return(i=e.call(this,n,r)||this).type="firestore",i._queue=new S$,i._persistenceKey="name"in n?n.name:"[DEFAULT]",i}return te(t,e),t.prototype._terminate=function(){return this._firestoreClient||px(this),this._firestoreClient.terminate()},t}(zl);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(e){return e._firestoreClient||px(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function px(e){var t,n=e._freezeSettings(),r=function(i,s,a,c){return new w$(i,s,a,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new _$(e._credentials,e._queue,r)}function jk(e,t,n){var r=this,i=new Sn;return e.asyncQueue.enqueue(function(){return k(r,void 0,void 0,function(){var s;return C(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),[4,ax(e,n)];case 1:return a.sent(),[4,ux(e,t)];case 2:return a.sent(),i.resolve(),[3,4];case 3:if(!function(c){return c.name==="FirebaseError"?c.code===D.FAILED_PRECONDITION||c.code===D.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||c.code===22||c.code===20||c.code===11}(s=a.sent()))throw s;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+s),i.reject(s),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function Vk(e){if(e._initialized||e._terminated)throw new q(D.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bi=function(){function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=0;r<t.length;++r)if(t[r].length===0)throw new q(D.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ni(t)}return e.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},e}(),na=function(){function e(t){this._byteString=t}return e.fromBase64String=function(t){try{return new e(qn.fromBase64String(t))}catch(n){throw new q(D.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}},e.fromUint8Array=function(t){return new e(qn.fromUint8Array(t))},e.prototype.toBase64=function(){return this._byteString.toBase64()},e.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},e.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},e.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},e}(),va=function(e){this._methodName=e},gv=function(){function e(t,n){if(!isFinite(t)||t<-90||t>90)throw new q(D.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new q(D.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return Object.defineProperty(e.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},e.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},e.prototype._compareTo=function(t){return Ue(this._lat,t._lat)||Ue(this._long,t._long)},e}(),k$=/^__.*__$/,R$=function(){function e(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}return e.prototype.toMutation=function(t,n){return this.fieldMask!==null?new Qo(t,this.data,this.fieldMask,n,this.fieldTransforms):new Cf(t,this.data,n,this.fieldTransforms)},e}(),vx=function(){function e(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}return e.prototype.toMutation=function(t,n){return new Qo(t,this.data,this.fieldMask,n,this.fieldTransforms)},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gx(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw le()}}var mx=function(){function e(t,n,r,i,s,a){this.settings=t,this.databaseId=n,this.R=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Cc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}return Object.defineProperty(e.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),e.prototype.xc=function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},e.prototype.kc=function(t){var n,r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.xc({path:r,Fc:!1});return i.$c(t),i},e.prototype.Oc=function(t){var n,r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.xc({path:r,Fc:!1});return i.Cc(),i},e.prototype.Mc=function(t){return this.xc({path:void 0,Fc:!0})},e.prototype.Lc=function(t){return ip(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},e.prototype.contains=function(t){return this.fieldMask.find(function(n){return t.isPrefixOf(n)})!==void 0||this.fieldTransforms.find(function(n){return t.isPrefixOf(n.field)})!==void 0},e.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},e.prototype.$c=function(t){if(t.length===0)throw this.Lc("Document fields must not be empty");if(gx(this.Nc)&&k$.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},e}(),N$=function(){function e(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.R=r||kf(t)}return e.prototype.Uc=function(t,n,r,i){return i===void 0&&(i=!1),new mx({Nc:t,methodName:n,qc:r,path:ni.emptyPath(),Fc:!1,Bc:i},this.databaseId,this.R,this.ignoreUndefinedProperties)},e}();function ga(e){var t=e._freezeSettings(),n=kf(e._databaseId);return new N$(e._databaseId,!!t.ignoreUndefinedProperties,n)}function mv(e,t,n,r,i,s){s===void 0&&(s={});var a=e.Uc(s.merge||s.mergeFields?2:0,t,n,i);Q0("Data must be an object, but it was:",a,r);var c,l,h=wx(r,a);if(s.merge)c=new wu(a.fieldMask),l=a.fieldTransforms;else if(s.mergeFields){for(var d=[],v=0,m=s.mergeFields;v<m.length;v++){var y=dw(t,m[v],n);if(!a.contains(y))throw new q(D.INVALID_ARGUMENT,"Field '"+y+"' is specified in your field mask but missing from your input data.");Ex(d,y)||d.push(y)}c=new wu(d),l=a.fieldTransforms.filter(function(w){return c.covers(w.field)})}else c=null,l=a.fieldTransforms;return new R$(new hr(h),c,l)}var G0=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return te(t,e),t.prototype._toFieldTransform=function(n){if(n.Nc!==2)throw n.Nc===1?n.Lc(this._methodName+"() can only appear at the top level of your update data"):n.Lc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return n.fieldMask.push(n.path),null},t.prototype.isEqual=function(n){return n instanceof t},t}(va);function yx(e,t,n){return new mx({Nc:3,qc:t.settings.qc,methodName:e._methodName,Fc:n},t.databaseId,t.R,t.ignoreUndefinedProperties)}var P$=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return te(t,e),t.prototype._toFieldTransform=function(n){return new Sf(n.path,new Iu)},t.prototype.isEqual=function(n){return n instanceof t},t}(va),O$=function(e){function t(n,r){var i=this;return(i=e.call(this,n)||this).Kc=r,i}return te(t,e),t.prototype._toFieldTransform=function(n){var r=yx(this,n,!0),i=this.Kc.map(function(a){return ma(a,r)}),s=new ea(i);return new Sf(n.path,s)},t.prototype.isEqual=function(n){return this===n},t}(va),D$=function(e){function t(n,r){var i=this;return(i=e.call(this,n)||this).Kc=r,i}return te(t,e),t.prototype._toFieldTransform=function(n){var r=yx(this,n,!0),i=this.Kc.map(function(a){return ma(a,r)}),s=new ta(i);return new Sf(n.path,s)},t.prototype.isEqual=function(n){return this===n},t}(va),x$=function(e){function t(n,r){var i=this;return(i=e.call(this,n)||this).Qc=r,i}return te(t,e),t.prototype._toFieldTransform=function(n){var r=new Su(n.R,iD(n.R,this.Qc));return new Sf(n.path,r)},t.prototype.isEqual=function(n){return this===n},t}(va);function z0(e,t,n,r){var i=e.Uc(1,t,n);Q0("Data must be an object, but it was:",i,r);var s=[],a=hr.empty();fa(r,function(l,h){var d=Y0(t,l,n);h=Re(h);var v=i.Oc(d);if(h instanceof G0)s.push(d);else{var m=ma(h,v);m!=null&&(s.push(d),a.set(d,m))}});var c=new wu(s);return new vx(a,c,i.fieldTransforms)}function $0(e,t,n,r,i,s){var a=e.Uc(1,t,n),c=[dw(t,r,n)],l=[i];if(s.length%2!=0)throw new q(D.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var h=0;h<s.length;h+=2)c.push(dw(t,s[h])),l.push(s[h+1]);for(var d=[],v=hr.empty(),m=c.length-1;m>=0;--m)if(!Ex(d,c[m])){var y=c[m],w=l[m];w=Re(w);var E=a.Oc(y);if(w instanceof G0)d.push(y);else{var T=ma(w,E);T!=null&&(d.push(y),v.set(y,T))}}var A=new wu(d);return new vx(v,A,a.fieldTransforms)}function _x(e,t,n,r){return r===void 0&&(r=!1),ma(n,e.Uc(r?4:3,t))}function ma(e,t){if(bx(e=Re(e)))return Q0("Unsupported field value:",t,e),wx(e,t);if(e instanceof va)return function(n,r){if(!gx(r.Nc))throw r.Lc(n._methodName+"() can only be used with update() and set()");if(!r.path)throw r.Lc(n._methodName+"() is not currently supported inside arrays");var i=n._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Fc&&t.Nc!==4)throw t.Lc("Nested arrays are not supported");return function(n,r){for(var i=[],s=0,a=0,c=n;a<c.length;a++){var l=ma(c[a],r.Mc(s));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),s++}return{arrayValue:{values:i}}}(e,t)}return function(n,r){if((n=Re(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return iD(r.R,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){var i=tr.fromDate(n);return{timestampValue:Hl(r.R,i)}}if(n instanceof tr)return i=new tr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3)),{timestampValue:Hl(r.R,i)};if(n instanceof gv)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof na)return{bytesValue:vD(r.R,n._byteString)};if(n instanceof _t){i=r.databaseId;var s=n.firestore._databaseId;if(!s.isEqual(i))throw r.Lc("Document reference is for database "+s.projectId+"/"+s.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:_0(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.Lc("Unsupported field value: "+vv(n))}(e,t)}function wx(e,t){var n={};return GO(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):fa(e,function(r,i){var s=ma(i,t.kc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function bx(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof tr||e instanceof gv||e instanceof na||e instanceof _t||e instanceof va)}function Q0(e,t,n){if(!bx(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){var r=vv(n);throw r==="an object"?t.Lc(e+" a custom object"):t.Lc(e+" "+r)}}function dw(e,t,n){if((t=Re(t))instanceof bi)return t._internalPath;if(typeof t=="string")return Y0(e,t);throw ip("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}var L$=new RegExp("[~\\*/\\[\\]]");function Y0(e,t,n){if(t.search(L$)>=0)throw ip("Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'",e,!1,void 0,n);try{return new(bi.bind.apply(bi,Ne([void 0],t.split("."))))()._internalPath}catch{throw ip("Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",e,!1,void 0,n)}}function ip(e,t,n,r,i){var s=r&&!r.isEmpty(),a=i!==void 0,c="Function "+t+"() called with invalid data";n&&(c+=" (via `toFirestore()`)");var l="";return(s||a)&&(l+=" (found",s&&(l+=" in field "+r),a&&(l+=" in document "+i),l+=")"),new q(D.INVALID_ARGUMENT,(c+=". ")+e+l)}function Ex(e,t){return e.some(function(n){return n.isEqual(t)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $l=function(){function e(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}return Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new _t(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),e.prototype.exists=function(){return this._document!==null},e.prototype.data=function(){if(this._document){if(this._converter){var t=new M$(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},e.prototype.get=function(t){if(this._document){var n=this._document.data.field(op("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}},e}(),M$=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return te(t,e),t.prototype.data=function(){return e.prototype.data.call(this)},t}($l);function op(e,t){return typeof t=="string"?Y0(e,t):t instanceof bi?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ls=function(){function e(t,n){this.hasPendingWrites=t,this.fromCache=n}return e.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},e}(),$i=function(e){function t(n,r,i,s,a,c){var l=this;return(l=e.call(this,n,r,i,s,c)||this)._firestore=n,l._firestoreImpl=n,l.metadata=a,l}return te(t,e),t.prototype.exists=function(){return e.prototype.exists.call(this)},t.prototype.data=function(n){if(n===void 0&&(n={}),this._document){if(this._converter){var r=new pl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,n)}return this._userDataWriter.convertValue(this._document.data.value,n.serverTimestamps)}},t.prototype.get=function(n,r){if(r===void 0&&(r={}),this._document){var i=this._document.data.field(op("DocumentSnapshot.get",n));if(i!==null)return this._userDataWriter.convertValue(i,r.serverTimestamps)}},t}($l),pl=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return te(t,e),t.prototype.data=function(n){return n===void 0&&(n={}),e.prototype.data.call(this,n)},t}($i),Ao=function(){function e(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ls(i.hasPendingWrites,i.fromCache),this.query=r}return Object.defineProperty(e.prototype,"docs",{get:function(){var t=[];return this.forEach(function(n){return t.push(n)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this.size===0},enumerable:!1,configurable:!0}),e.prototype.forEach=function(t,n){var r=this;this._snapshot.docs.forEach(function(i){t.call(n,new pl(r._firestore,r._userDataWriter,i.key,i,new Ls(r._snapshot.mutatedKeys.has(i.key),r._snapshot.fromCache),r.query.converter))})},e.prototype.docChanges=function(t){t===void 0&&(t={});var n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new q(D.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){var s=0;return r._snapshot.docChanges.map(function(c){return{type:"added",doc:new pl(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Ls(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}})}var a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(function(c){return i||c.type!==3}).map(function(c){var l=new pl(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Ls(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),h=-1,d=-1;return c.type!==0&&(h=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(d=(a=a.add(c.doc)).indexOf(c.doc.key)),{type:F$(c.type),doc:l,oldIndex:h,newIndex:d}})}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges},e}();function F$(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return le()}}function Tx(e,t){return e instanceof $i&&t instanceof $i?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(e._document===null?t._document===null:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Ao&&t instanceof Ao&&e._firestore===t._firestore&&dx(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ix(e){if(Yd(e)&&e.explicitOrderBy.length===0)throw new q(D.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Nf=function(){};function yo(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++){var s=i[r];e=s._apply(e)}return e}var U$=function(e){function t(n,r,i){var s=this;return(s=e.call(this)||this).jc=n,s.Wc=r,s.Gc=i,s.type="where",s}return te(t,e),t.prototype._apply=function(n){var r=ga(n.firestore),i=function(s,a,c,l,h,d,v){var m;if(h.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new q(D.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+d+"' queries on FieldPath.documentId().");if(d==="in"||d==="not-in"){Wk(v,d);for(var y=[],w=0,E=v;w<E.length;w++){var T=E[w];y.push(Kk(l,s,T))}m={arrayValue:{values:y}}}else m=Kk(l,s,v)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||Wk(v,d),m=_x(c,"where",v,d==="in"||d==="not-in");var A=vr.create(h,d,m);return function(P,O){if(O.g()){var H=p0(P);if(H!==null&&!H.isEqual(O.field))throw new q(D.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+H.toString()+"' and '"+O.field.toString()+"'");var K=d0(P);K!==null&&Cx(P,O.field,K)}var U=function(ie,F){for(var ge=0,R=ie.filters;ge<R.length;ge++){var tt=R[ge];if(F.indexOf(tt.op)>=0)return tt.op}return null}(P,function(ie){switch(ie){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(O.op));if(U!==null)throw U===O.op?new q(D.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+O.op.toString()+"' filter."):new q(D.INVALID_ARGUMENT,"Invalid query. You cannot use '"+O.op.toString()+"' filters with '"+U.toString()+"' filters.")}(s,A),A}(n._query,0,r,n.firestore._databaseId,this.jc,this.Wc,this.Gc);return new nr(n.firestore,n.converter,function(s,a){var c=s.filters.concat([a]);return new no(s.path,s.collectionGroup,s.explicitOrderBy.slice(),c,s.limit,s.limitType,s.startAt,s.endAt)}(n._query,i))},t}(Nf),j$=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).jc=n,i.zc=r,i.type="orderBy",i}return te(t,e),t.prototype._apply=function(n){var r=function(i,s,a){if(i.startAt!==null)throw new q(D.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new q(D.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var c=new ou(s,a);return function(l,h){if(d0(l)===null){var d=p0(l);d!==null&&Cx(l,d,h.field)}}(i,c),c}(n._query,this.jc,this.zc);return new nr(n.firestore,n.converter,function(i,s){var a=i.explicitOrderBy.concat([s]);return new no(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(n._query,r))},t}(Nf),Bk=function(e){function t(n,r,i){var s=this;return(s=e.call(this)||this).type=n,s.Hc=r,s.Jc=i,s}return te(t,e),t.prototype._apply=function(n){return new nr(n.firestore,n.converter,ZO(n._query,this.Hc,this.Jc))},t}(Nf),qk=function(e){function t(n,r,i){var s=this;return(s=e.call(this)||this).type=n,s.Yc=r,s.Xc=i,s}return te(t,e),t.prototype._apply=function(n){var r=Sx(n,this.type,this.Yc,this.Xc);return new nr(n.firestore,n.converter,function(i,s){return new no(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(n._query,r))},t}(Nf),Hk=function(e){function t(n,r,i){var s=this;return(s=e.call(this)||this).type=n,s.Yc=r,s.Xc=i,s}return te(t,e),t.prototype._apply=function(n){var r=Sx(n,this.type,this.Yc,this.Xc);return new nr(n.firestore,n.converter,function(i,s){return new no(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(n._query,r))},t}(Nf);function Sx(e,t,n,r){if(n[0]=Re(n[0]),n[0]instanceof $l)return function(s,a,c,l,h){if(!l)throw new q(D.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+c+"().");for(var d=[],v=0,m=Tu(s);v<m.length;v++){var y=m[v];if(y.field.isKeyField())d.push(zd(a,l.key));else{var w=l.data.field(y.field);if(l0(w))throw new q(D.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+y.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(w===null){var E=y.field.canonicalString();throw new q(D.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+E+"' (used as the orderBy) does not exist.")}d.push(w)}}return new ql(d,h)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=ga(e.firestore);return function(s,a,c,l,h,d){var v=s.explicitOrderBy;if(h.length>v.length)throw new q(D.INVALID_ARGUMENT,"Too many arguments provided to "+l+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var m=[],y=0;y<h.length;y++){var w=h[y];if(v[y].field.isKeyField()){if(typeof w!="string")throw new q(D.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+l+"(), but got a "+typeof w);if(!v0(s)&&w.indexOf("/")!==-1)throw new q(D.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+l+"() must be a plain document ID, but '"+w+"' contains a slash.");var E=s.path.child($e.fromString(w));if(!fe.isDocumentKey(E))throw new q(D.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+l+"() must result in a valid document path, but '"+E+"' is not because it contains an odd number of segments.");var T=new fe(E);m.push(zd(a,T))}else{var A=_x(c,l,w);m.push(A)}}return new ql(m,d)}(e._query,e.firestore._databaseId,i,t,n,r)}function Kk(e,t,n){if(typeof(n=Re(n))=="string"){if(n==="")throw new q(D.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!v0(t)&&n.indexOf("/")!==-1)throw new q(D.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=t.path.child($e.fromString(n));if(!fe.isDocumentKey(r))throw new q(D.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return zd(e,new fe(r))}if(n instanceof _t)return zd(e,n._key);throw new q(D.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+vv(n)+".")}function Wk(e,t){if(!Array.isArray(e)||e.length===0)throw new q(D.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(e.length>10)throw new q(D.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.")}function Cx(e,t,n){if(!n.isEqual(t))throw new q(D.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var X0=function(){function e(){}return e.prototype.convertValue=function(t,n){switch(n===void 0&&(n="none"),Zs(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Pt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(bu(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw le()}},e.prototype.convertObject=function(t,n){var r=this,i={};return fa(t.fields,function(s,a){i[s]=r.convertValue(a,n)}),i},e.prototype.convertGeoPoint=function(t){return new gv(Pt(t.latitude),Pt(t.longitude))},e.prototype.convertArray=function(t,n){var r=this;return(t.values||[]).map(function(i){return r.convertValue(i,n)})},e.prototype.convertServerTimestamp=function(t,n){switch(n){case"previous":var r=$O(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Vl(t));default:return null}},e.prototype.convertTimestamp=function(t){var n=Ko(t);return new tr(n.seconds,n.nanos)},e.prototype.convertDocumentKey=function(t,n){var r=$e.fromString(t);_e(ID(r));var i=new rp(r.get(1),r.get(3)),s=new fe(r.popFirst(5));return i.isEqual(n)||Ot("Document "+s+" contains a document reference within a different database ("+i.projectId+"/"+i.database+") which is not supported. It will be treated as a reference in the current database ("+n.projectId+"/"+n.database+") instead."),s},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yv(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var V$=function(e){function t(n){var r=this;return(r=e.call(this)||this).firestore=n,r}return te(t,e),t.prototype.convertBytes=function(n){return new na(n)},t.prototype.convertReference=function(n){var r=this.convertDocumentKey(n,this.firestore._databaseId);return new _t(this.firestore,null,r)},t}(X0),B$=function(){function e(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ga(t)}return e.prototype.set=function(t,n,r){this._verifyNotCommitted();var i=ko(t,this._firestore),s=yv(i.converter,n,r),a=mv(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(a.toMutation(i._key,_n.none())),this},e.prototype.update=function(t,n,r){for(var i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];this._verifyNotCommitted();var a,c=ko(t,this._firestore);return a=typeof(n=Re(n))=="string"||n instanceof bi?$0(this._dataReader,"WriteBatch.update",c._key,n,r,i):z0(this._dataReader,"WriteBatch.update",c._key,n),this._mutations.push(a.toMutation(c._key,_n.exists(!0))),this},e.prototype.delete=function(t){this._verifyNotCommitted();var n=ko(t,this._firestore);return this._mutations=this._mutations.concat(new Af(n._key,_n.none())),this},e.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},e.prototype._verifyNotCommitted=function(){if(this._committed)throw new q(D.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ko(e,t){if((e=Re(e)).firestore!==t)throw new q(D.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ks=function(e){function t(n){var r=this;return(r=e.call(this)||this).firestore=n,r}return te(t,e),t.prototype.convertBytes=function(n){return new na(n)},t.prototype.convertReference=function(n){var r=this.convertDocumentKey(n,this.firestore._databaseId);return new _t(this.firestore,null,r)},t}(X0);function Gk(e,t,n){e=Ge(e,_t);var r=Ge(e.firestore,kt),i=yv(e.converter,t,n);return Pf(r,[mv(ga(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,_n.none())])}function zk(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];e=Ge(e,_t);var s=Ge(e.firestore,kt),a=ga(s);return Pf(s,[(typeof(t=Re(t))=="string"||t instanceof bi?$0(a,"updateDoc",e._key,t,n,r):z0(a,"updateDoc",e._key,t)).toMutation(e._key,_n.exists(!0))])}function Ax(e){for(var t,n,r,i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];e=Re(e);var a={includeMetadataChanges:!1},c=0;typeof i[c]!="object"||Lu(i[c])||(a=i[c],c++);var l,h,d,v={includeMetadataChanges:a.includeMetadataChanges};if(Lu(i[c])){var m=i[c];i[c]=(t=m.next)===null||t===void 0?void 0:t.bind(m),i[c+1]=(n=m.error)===null||n===void 0?void 0:n.bind(m),i[c+2]=(r=m.complete)===null||r===void 0?void 0:r.bind(m)}if(e instanceof _t)h=Ge(e.firestore,kt),d=Ju(e._key.path),l={next:function(E){i[c]&&i[c](pw(h,e,E))},error:i[c+1],complete:i[c+2]};else{var y=Ge(e,nr);h=Ge(y.firestore,kt),d=y._query;var w=new Ks(h);l={next:function(E){i[c]&&i[c](new Ao(h,w,y,E))},error:i[c+1],complete:i[c+2]},Ix(e._query)}return function(E,T,A,P){var O=this,H=new dv(P),K=new x0(T,H,A);return E.asyncQueue.enqueueAndForget(function(){return k(O,void 0,void 0,function(){var U;return C(this,function(ie){switch(ie.label){case 0:return U=P0,[4,xu(E)];case 1:return[2,U.apply(void 0,[ie.sent(),K])]}})})}),function(){H.Wo(),E.asyncQueue.enqueueAndForget(function(){return k(O,void 0,void 0,function(){var U;return C(this,function(ie){switch(ie.label){case 0:return U=O0,[4,xu(E)];case 1:return[2,U.apply(void 0,[ie.sent(),K])]}})})})}}(zt(h),d,v,l)}function Pf(e,t){return function(n,r){var i=this,s=new Sn;return n.asyncQueue.enqueueAndForget(function(){return k(i,void 0,void 0,function(){var a;return C(this,function(c){switch(c.label){case 0:return a=Zz,[4,H0(n)];case 1:return[2,a.apply(void 0,[c.sent(),r,s])]}})})}),s.promise}(zt(e),t)}function pw(e,t,n){var r=n.docs.get(t._key),i=new Ks(e);return new $i(e,i,t._key,r,new Ls(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var q$=function(e){function t(n,r){var i=this;return(i=e.call(this,n,r)||this)._firestore=n,i}return te(t,e),t.prototype.get=function(n){var r=this,i=ko(n,this._firestore),s=new Ks(this._firestore);return e.prototype.get.call(this,n).then(function(a){return new $i(r._firestore,s,i._key,a._document,new Ls(!1,!1),i.converter)})},t}(function(){function e(t,n){this._firestore=t,this._transaction=n,this._dataReader=ga(t)}return e.prototype.get=function(t){var n=this,r=ko(t,this._firestore),i=new V$(this._firestore);return this._transaction.lookup([r._key]).then(function(s){if(!s||s.length!==1)return le();var a=s[0];if(a.isFoundDocument())return new $l(n._firestore,i,a.key,a,r.converter);if(a.isNoDocument())return new $l(n._firestore,i,r._key,null,r.converter);throw le()})},e.prototype.set=function(t,n,r){var i=ko(t,this._firestore),s=yv(i.converter,n,r),a=mv(this._dataReader,"Transaction.set",i._key,s,i.converter!==null,r);return this._transaction.set(i._key,a),this},e.prototype.update=function(t,n,r){for(var i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];var a,c=ko(t,this._firestore);return a=typeof(n=Re(n))=="string"||n instanceof bi?$0(this._dataReader,"Transaction.update",c._key,n,r,i):z0(this._dataReader,"Transaction.update",c._key,n),this._transaction.update(c._key,a),this},e.prototype.delete=function(t){var n=ko(t,this._firestore);return this._transaction.delete(n._key),this},e}());/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $k(){if(typeof Uint8Array>"u")throw new q(D.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Qk(){if(typeof atob>"u")throw new q(D.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var kx=function(){function e(t){this._delegate=t}return e.fromBase64String=function(t){return Qk(),new e(na.fromBase64String(t))},e.fromUint8Array=function(t){return $k(),new e(na.fromUint8Array(t))},e.prototype.toBase64=function(){return Qk(),this._delegate.toBase64()},e.prototype.toUint8Array=function(){return $k(),this._delegate.toUint8Array()},e.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(),H$=function(){function e(){}return e.prototype.enableIndexedDbPersistence=function(t,n){return function(r,i){Vk(r=Ge(r,kt));var s=zt(r),a=r._freezeSettings(),c=new hw;return jk(s,c,new sx(c,a.cacheSizeBytes,i==null?void 0:i.forceOwnership))}(t._delegate,{forceOwnership:n})},e.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(n){Vk(n=Ge(n,kt));var r=zt(n),i=n._freezeSettings(),s=new hw;return jk(r,s,new v$(s,i.cacheSizeBytes))}(t._delegate)},e.prototype.clearIndexedDbPersistence=function(t){return function(n){var r=this;if(n._initialized&&!n._terminated)throw new q(D.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var i=new Sn;return n._queue.enqueueAndForgetEvenWhileRestricted(function(){return k(r,void 0,void 0,function(){var s;return C(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,function(c){return k(this,void 0,void 0,function(){var l;return C(this,function(h){switch(h.label){case 0:return ku.yt()?(l=c+"main",[4,ku.delete(l)]):[2,Promise.resolve()];case 1:return h.sent(),[2]}})})}(S0(n._databaseId,n._persistenceKey))];case 1:return a.sent(),i.resolve(),[3,3];case 2:return s=a.sent(),i.reject(s),[3,3];case 3:return[2]}})})}),i.promise}(t._delegate)},e}(),J0=function(){function e(t,n,r){var i=this;this._delegate=n,this.Zc=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof rp||(this.tu=t)}return Object.defineProperty(e.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){var n=this._delegate._getSettings();t.merge||n.host===t.host||jl("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},n),t)).merge,this._delegate._setSettings(t)},e.prototype.useEmulator=function(t,n,r){r===void 0&&(r={}),function(i,s,a,c){var l;c===void 0&&(c={});var h=(i=Ge(i,zl))._getSettings();if(h.host!=="firestore.googleapis.com"&&h.host!==s&&jl("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},h),{host:s+":"+a,ssl:!1})),c.mockUserToken){var d,v;if(typeof c.mockUserToken=="string")d=c.mockUserToken,v=rn.MOCK_USER;else{d=Xw(c.mockUserToken,(l=i._app)===null||l===void 0?void 0:l.options.projectId);var m=c.mockUserToken.sub||c.mockUserToken.user_id;if(!m)throw new q(D.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new rn(m)}i._credentials=new b$(new cx(d,v))}}(this._delegate,t,n,r)},e.prototype.enableNetwork=function(){return function(t){var n=this;return t.asyncQueue.enqueue(function(){return k(n,void 0,void 0,function(){var r,i;return C(this,function(s){switch(s.label){case 0:return[4,Rk(t)];case 1:return r=s.sent(),[4,Nk(t)];case 2:return i=s.sent(),[2,(r.setNetworkEnabled(!0),function(a){var c=ee(a);return c.Or.delete(0),Rf(c)}(i))]}})})})}(zt(Ge(this._delegate,kt)))},e.prototype.disableNetwork=function(){return function(t){var n=this;return t.asyncQueue.enqueue(function(){return k(n,void 0,void 0,function(){var r,i;return C(this,function(s){switch(s.label){case 0:return[4,Rk(t)];case 1:return r=s.sent(),[4,Nk(t)];case 2:return i=s.sent(),[2,(r.setNetworkEnabled(!1),function(a){return k(this,void 0,void 0,function(){var c;return C(this,function(l){switch(l.label){case 0:return(c=ee(a)).Or.add(0),[4,ec(c)];case 1:return l.sent(),c.Br.set("Offline"),[2]}})})}(i))]}})})})}(zt(Ge(this._delegate,kt)))},e.prototype.enablePersistence=function(t){var n=!1,r=!1;return t&&lx("synchronizeTabs",n=!!t.synchronizeTabs,"experimentalForceOwningTab",r=!!t.experimentalForceOwningTab),n?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,r)},e.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var n=this,r=new Sn;return t.asyncQueue.enqueueAndForget(function(){return k(n,void 0,void 0,function(){var i;return C(this,function(s){switch(s.label){case 0:return i=r$,[4,H0(t)];case 1:return[2,i.apply(void 0,[s.sent(),r])]}})})}),r.promise}(zt(Ge(this._delegate,kt)))},e.prototype.onSnapshotsInSync=function(t){return function(n,r){return function(i,s){var a=this,c=new dv(s);return i.asyncQueue.enqueueAndForget(function(){return k(a,void 0,void 0,function(){var l;return C(this,function(h){switch(h.label){case 0:return l=function(d,v){ee(d).Gr.add(v),v.next()},[4,xu(i)];case 1:return[2,l.apply(void 0,[h.sent(),c])]}})})}),function(){c.Wo(),i.asyncQueue.enqueueAndForget(function(){return k(a,void 0,void 0,function(){var l;return C(this,function(h){switch(h.label){case 0:return l=function(d,v){ee(d).Gr.delete(v)},[4,xu(i)];case 1:return[2,l.apply(void 0,[h.sent(),c])]}})})})}}(zt(n=Ge(n,kt)),Lu(r)?r:{next:r})}(this._delegate,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.tu)throw new q(D.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new sp(this,fx(this._delegate,t))}catch(n){throw Ln(n,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new Ws(this,pd(this._delegate,t))}catch(n){throw Ln(n,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new Of(this,function(n,r){if(n=Ge(n,zl),K0("collectionGroup","collection id",r),r.indexOf("/")>=0)throw new q(D.INVALID_ARGUMENT,"Invalid collection ID '"+r+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new nr(n,null,function(i){return new no($e.emptyPath(),i)}(r))}(this._delegate,t))}catch(n){throw Ln(n,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var n=this;return function(r,i){return function(s,a){var c=this,l=new Sn;return s.asyncQueue.enqueueAndForget(function(){return k(c,void 0,void 0,function(){var h;return C(this,function(d){switch(d.label){case 0:return[4,function(v){return pv(v).then(function(m){return m.datastore})}(s)];case 1:return h=d.sent(),new y$(s.asyncQueue,h,a,l).run(),[2]}})})}),l.promise}(zt(r),function(s){return i(new q$(r,s))})}(this._delegate,function(r){return t(new Rx(n,r))})},e.prototype.batch=function(){var t=this;return zt(this._delegate),new Nx(new B$(this._delegate,function(n){return Pf(t._delegate,n)}))},e.prototype.loadBundle=function(t){throw new q(D.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new q(D.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(),_v=function(e){function t(n){var r=this;return(r=e.call(this)||this).firestore=n,r}return te(t,e),t.prototype.convertBytes=function(n){return new kx(new na(n))},t.prototype.convertReference=function(n){var r=this.convertDocumentKey(n,this.firestore._databaseId);return Ws.eu(r,this.firestore,null)},t}(X0);function K$(e){var t;t=e,ei.setLogLevel(t)}var Rx=function(){function e(t,n){this._firestore=t,this._delegate=n,this._userDataWriter=new _v(t)}return e.prototype.get=function(t){var n=this,r=Ms(t);return this._delegate.get(r).then(function(i){return new Ql(n._firestore,new $i(n._firestore._delegate,n._userDataWriter,i._key,i._document,i.metadata,r.converter))})},e.prototype.set=function(t,n,r){var i=Ms(t);return r?(W0("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this},e.prototype.update=function(t,n,r){for(var i,s=[],a=3;a<arguments.length;a++)s[a-3]=arguments[a];var c=Ms(t);return arguments.length===2?this._delegate.update(c,n):(i=this._delegate).update.apply(i,Ne([c,n,r],s)),this},e.prototype.delete=function(t){var n=Ms(t);return this._delegate.delete(n),this},e}(),Nx=function(){function e(t){this._delegate=t}return e.prototype.set=function(t,n,r){var i=Ms(t);return r?(W0("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this},e.prototype.update=function(t,n,r){for(var i,s=[],a=3;a<arguments.length;a++)s[a-3]=arguments[a];var c=Ms(t);return arguments.length===2?this._delegate.update(c,n):(i=this._delegate).update.apply(i,Ne([c,n,r],s)),this},e.prototype.delete=function(t){var n=Ms(t);return this._delegate.delete(n),this},e.prototype.commit=function(){return this._delegate.commit()},e}(),wv=function(){function e(t,n,r){this._firestore=t,this._userDataWriter=n,this._delegate=r}return e.prototype.fromFirestore=function(t,n){var r=new pl(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Yl(this._firestore,r),n??{})},e.prototype.toFirestore=function(t,n){return n?this._delegate.toFirestore(t,n):this._delegate.toFirestore(t)},e.nu=function(t,n){var r=e.su,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var s=i.get(n);return s||(s=new e(t,new _v(t),n),i.set(n,s)),s},e}();wv.su=new WeakMap;var Ws=function(){function e(t,n){this.firestore=t,this._delegate=n,this._userDataWriter=new _v(t)}return e.iu=function(t,n,r){if(t.length%2!=0)throw new q(D.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new e(n,new _t(n._delegate,r,new fe(t)))},e.eu=function(t,n,r){return new e(n,new _t(n._delegate,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new sp(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new sp(this.firestore,fx(this._delegate,t))}catch(n){throw Ln(n,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return(t=Re(t))instanceof _t&&hx(this._delegate,t)},e.prototype.set=function(t,n){n=W0("DocumentReference.set",n);try{return n?Gk(this._delegate,t,n):Gk(this._delegate,t)}catch(r){throw Ln(r,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];try{return arguments.length===1?zk(this._delegate,t):zk.apply(void 0,Ne([this._delegate,t,n],r))}catch(s){throw Ln(s,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return Pf(Ge((t=this._delegate).firestore,kt),[new Af(t._key,_n.none())]);var t},e.prototype.onSnapshot=function(){for(var t=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=Px(n),s=Ox(n,function(a){return new Ql(t.firestore,new $i(t.firestore._delegate,t._userDataWriter,a._key,a._document,a.metadata,t._delegate.converter))});return Ax(this._delegate,i,s)},e.prototype.get=function(t){var n=this;return((t==null?void 0:t.source)==="cache"?function(r){r=Ge(r,_t);var i=Ge(r.firestore,kt),s=zt(i),a=new Ks(i);return function(c,l){var h=this,d=new Sn;return c.asyncQueue.enqueueAndForget(function(){return k(h,void 0,void 0,function(){var v;return C(this,function(m){switch(m.label){case 0:return v=function(y,w,E){return k(this,void 0,void 0,function(){var T,A;return C(this,function(P){switch(P.label){case 0:return P.trys.push([0,2,,3]),[4,function(O,H){var K=ee(O);return K.persistence.runTransaction("read document","readonly",function(U){return K.Mn.mn(U,H)})}(y,w)];case 1:return(A=P.sent()).isFoundDocument()?E.resolve(A):A.isNoDocument()?E.resolve(null):E.reject(new q(D.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return T=P.sent(),A=rc(T,"Failed to get document '"+w+" from cache"),E.reject(A),[3,3];case 3:return[2]}})})},[4,q0(c)];case 1:return[2,v.apply(void 0,[m.sent(),l,d])]}})})}),d.promise}(s,r._key).then(function(c){return new $i(i,a,r._key,c,new Ls(c!==null&&c.hasLocalMutations,!0),r.converter)})}(this._delegate):(t==null?void 0:t.source)==="server"?function(r){r=Ge(r,_t);var i=Ge(r.firestore,kt);return Pk(zt(i),r._key,{source:"server"}).then(function(s){return pw(i,r,s)})}(this._delegate):function(r){r=Ge(r,_t);var i=Ge(r.firestore,kt);return Pk(zt(i),r._key).then(function(s){return pw(i,r,s)})}(this._delegate)).then(function(r){return new Ql(n.firestore,new $i(n.firestore._delegate,n._userDataWriter,r._key,r._document,r.metadata,n._delegate.converter))})},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(wv.nu(this.firestore,t)):this._delegate.withConverter(null))},e}();function Ln(e,t,n){return e.message=e.message.replace(t,n),e}function Px(e){for(var t=0,n=e;t<n.length;t++){var r=n[t];if(typeof r=="object"&&!Lu(r))return r}return{}}function Ox(e,t){var n,r,i;return{next:function(s){i.next&&i.next(t(s))},error:(n=(i=Lu(e[0])?e[0]:Lu(e[1])?e[1]:typeof e[0]=="function"?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var Ql=function(){function e(t,n){this._firestore=t,this._delegate=n}return Object.defineProperty(e.prototype,"ref",{get:function(){return new Ws(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this._delegate.data(t)},e.prototype.get=function(t,n){return this._delegate.get(t,n)},e.prototype.isEqual=function(t){return Tx(this._delegate,t._delegate)},e}(),Yl=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return te(t,e),t.prototype.data=function(n){return this._delegate.data(n)},t}(Ql),Of=function(){function e(t,n){this.firestore=t,this._delegate=n,this._userDataWriter=new _v(t)}return e.prototype.where=function(t,n,r){try{return new e(this.firestore,yo(this._delegate,function(i,s,a){var c=s,l=op("where",i);return new U$(l,c,a)}(t,n,r)))}catch(i){throw Ln(i,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,yo(this._delegate,function(r,i){i===void 0&&(i="asc");var s=i,a=op("orderBy",r);return new j$(a,s)}(t,n)))}catch(r){throw Ln(r,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,yo(this._delegate,function(n){return Fk("limit",n),new Bk("limit",n,"F")}(t)))}catch(n){throw Ln(n,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,yo(this._delegate,function(n){return Fk("limitToLast",n),new Bk("limitToLast",n,"L")}(t)))}catch(n){throw Ln(n,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,yo(this._delegate,function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new qk("startAt",r,!0)}.apply(void 0,t)))}catch(r){throw Ln(r,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,yo(this._delegate,function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new qk("startAfter",r,!1)}.apply(void 0,t)))}catch(r){throw Ln(r,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,yo(this._delegate,function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new Hk("endBefore",r,!0)}.apply(void 0,t)))}catch(r){throw Ln(r,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,yo(this._delegate,function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new Hk("endAt",r,!1)}.apply(void 0,t)))}catch(r){throw Ln(r,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return dx(this._delegate,t._delegate)},e.prototype.get=function(t){var n=this;return((t==null?void 0:t.source)==="cache"?function(r){r=Ge(r,nr);var i=Ge(r.firestore,kt),s=zt(i),a=new Ks(i);return function(c,l){var h=this,d=new Sn;return c.asyncQueue.enqueueAndForget(function(){return k(h,void 0,void 0,function(){var v;return C(this,function(m){switch(m.label){case 0:return v=function(y,w,E){return k(this,void 0,void 0,function(){var T,A,P,O,H;return C(this,function(K){switch(K.label){case 0:return K.trys.push([0,2,,3]),[4,ep(y,w,!0)];case 1:return H=K.sent(),T=new tx(w,H.Bn),A=T._o(H.documents),P=T.applyChanges(A,!1),E.resolve(P.snapshot),[3,3];case 2:return O=K.sent(),H=rc(O,"Failed to execute query '"+w+" against cache"),E.reject(H),[3,3];case 3:return[2]}})})},[4,q0(c)];case 1:return[2,v.apply(void 0,[m.sent(),l,d])]}})})}),d.promise}(s,r._query).then(function(c){return new Ao(i,a,r,c)})}(this._delegate):(t==null?void 0:t.source)==="server"?function(r){r=Ge(r,nr);var i=Ge(r.firestore,kt),s=zt(i),a=new Ks(i);return Ok(s,r._query,{source:"server"}).then(function(c){return new Ao(i,a,r,c)})}(this._delegate):function(r){r=Ge(r,nr);var i=Ge(r.firestore,kt),s=zt(i),a=new Ks(i);return Ix(r._query),Ok(s,r._query).then(function(c){return new Ao(i,a,r,c)})}(this._delegate)).then(function(r){return new vw(n.firestore,new Ao(n.firestore._delegate,n._userDataWriter,n._delegate,r._snapshot))})},e.prototype.onSnapshot=function(){for(var t=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=Px(n),s=Ox(n,function(a){return new vw(t.firestore,new Ao(t.firestore._delegate,t._userDataWriter,t._delegate,a._snapshot))});return Ax(this._delegate,i,s)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(wv.nu(this.firestore,t)):this._delegate.withConverter(null))},e}(),W$=function(){function e(t,n){this._firestore=t,this._delegate=n}return Object.defineProperty(e.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new Yl(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),e}(),vw=function(){function e(t,n){this._firestore=t,this._delegate=n}return Object.defineProperty(e.prototype,"query",{get:function(){return new Of(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(n){return new Yl(t._firestore,n)})},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var n=this;return this._delegate.docChanges(t).map(function(r){return new W$(n._firestore,r)})},e.prototype.forEach=function(t,n){var r=this;this._delegate.forEach(function(i){t.call(n,new Yl(r._firestore,i))})},e.prototype.isEqual=function(t){return Tx(this._delegate,t._delegate)},e}(),sp=function(e){function t(n,r){var i=this;return(i=e.call(this,n,r)||this).firestore=n,i._delegate=r,i}return te(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var n=this._delegate.parent;return n?new Ws(this.firestore,n):null},enumerable:!1,configurable:!0}),t.prototype.doc=function(n){try{return new Ws(this.firestore,n===void 0?pd(this._delegate):pd(this._delegate,n))}catch(r){throw Ln(r,"doc()","CollectionReference.doc()")}},t.prototype.add=function(n){var r=this;return function(i,s){var a=Ge(i.firestore,kt),c=pd(i),l=yv(i.converter,s);return Pf(a,[mv(ga(i.firestore),"addDoc",c._key,l,i.converter!==null,{}).toMutation(c._key,_n.exists(!1))]).then(function(){return c})}(this._delegate,n).then(function(i){return new Ws(r.firestore,i)})},t.prototype.isEqual=function(n){return hx(this._delegate,n._delegate)},t.prototype.withConverter=function(n){return new t(this.firestore,n?this._delegate.withConverter(wv.nu(this.firestore,n)):this._delegate.withConverter(null))},t}(Of);function Ms(e){return Ge(e,_t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var G$=function(){function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._delegate=new(bi.bind.apply(bi,Ne([void 0],t)))}return e.documentId=function(){return new e(ni.keyField().canonicalString())},e.prototype.isEqual=function(t){return(t=Re(t))instanceof bi&&this._delegate._internalPath.isEqual(t._internalPath)},e}(),z$=function(){function e(t){this._delegate=t}return e.serverTimestamp=function(){var t=new P$("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new G0("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return new O$("arrayUnion",i)}.apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return new D$("arrayRemove",i)}.apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(r){return new x$("increment",r)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $$(e){return function(t,n){var r=zt(t=Ge(t,kt)),i=new C$;return function(s,a,c,l){var h=this,d=function(v,m){return function(y,w){return new g$(y,w)}(function(y,w){if(y instanceof Uint8Array)return kk(y,w);if(y instanceof ArrayBuffer)return kk(new Uint8Array(y),w);if(y instanceof ReadableStream)return y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(typeof v=="string"?new TextEncoder().encode(v):v),m)}(c,kf(a));s.asyncQueue.enqueueAndForget(function(){return k(h,void 0,void 0,function(){var v;return C(this,function(m){switch(m.label){case 0:return v=p$,[4,H0(s)];case 1:return v.apply(void 0,[m.sent(),d,l]),[2]}})})})}(r,t._databaseId,n,i),i}(this._delegate,e)}function Q$(e){var t,n,r=this;return(t=this._delegate,n=e,function(i,s){var a=this;return i.asyncQueue.enqueue(function(){return k(a,void 0,void 0,function(){var c;return C(this,function(l){switch(l.label){case 0:return c=function(h,d){var v=ee(h);return v.persistence.runTransaction("Get named query","readonly",function(m){return v.Ke.getNamedQuery(m,d)})},[4,q0(i)];case 1:return[2,c.apply(void 0,[l.sent(),s])]}})})})}(zt(t=Ge(t,kt)),n).then(function(i){return i?new nr(t,null,i.query):null})).then(function(i){return i?new Of(r,i):null})}var Y$={Firestore:J0,GeoPoint:gv,Timestamp:tr,Blob:kx,Transaction:Rx,WriteBatch:Nx,DocumentReference:Ws,DocumentSnapshot:Ql,Query:Of,QueryDocumentSnapshot:Yl,QuerySnapshot:vw,CollectionReference:sp,FieldPath:G$,FieldValue:z$,setLogLevel:K$,CACHE_SIZE_UNLIMITED:A$};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X$(e){(function(t,n){t.INTERNAL.registerComponent(new In("firestore",function(r){var i=r.getProvider("app").getImmediate();return n(i,r.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},Y$)))})(e,function(t,n){return new J0(t,new kt(t,n),new H$)}),e.registerVersion("@firebase/firestore","2.4.1")}X$(ce);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J$(e){e.prototype.loadBundle=$$,e.prototype.namedQuery=Q$}J$(J0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yk={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},su=function(e){te(t,e);function t(n,r,i){var s=e.call(this,r)||this;return Object.setPrototypeOf(s,t.prototype),s.code=n,s.details=i,s}return t}(Error);function Z$(e){if(e>=200&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function e6(e,t,n){var r=Z$(e),i=r,s=void 0;try{var a=t&&t.error;if(a){var c=a.status;if(typeof c=="string"){if(!Yk[c])return new su("internal","internal");r=Yk[c],i=c}var l=a.message;typeof l=="string"&&(i=l),s=a.details,s!==void 0&&(s=n.decode(s))}}catch{}return r==="ok"?null:new su(r,i,s)}var t6=function(){function e(t,n){var r=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||t.get().then(function(i){return r.auth=i},function(){}),this.messaging||n.get().then(function(i){return r.messaging=i},function(){})}return e.prototype.getAuthToken=function(){return k(this,void 0,void 0,function(){var t;return C(this,function(n){switch(n.label){case 0:if(!this.auth)return[2,void 0];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return t=n.sent(),t?[2,t.accessToken]:[2,void 0];case 3:return n.sent(),[2,void 0];case 4:return[2]}})})},e.prototype.getInstanceIdToken=function(){return k(this,void 0,void 0,function(){return C(this,function(t){switch(t.label){case 0:if(!this.messaging||!("Notification"in self)||Notification.permission!=="granted")return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.messaging.getToken()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,void 0];case 4:return[2]}})})},e.prototype.getContext=function(){return k(this,void 0,void 0,function(){var t,n;return C(this,function(r){switch(r.label){case 0:return[4,this.getAuthToken()];case 1:return t=r.sent(),[4,this.getInstanceIdToken()];case 2:return n=r.sent(),[2,{authToken:t,instanceIdToken:n}]}})})},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var n6="type.googleapis.com/google.protobuf.Int64Value",r6="type.googleapis.com/google.protobuf.UInt64Value";function Xk(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r]));return n}var i6=function(){function e(){}return e.prototype.encode=function(t){var n=this;if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(function(r){return n.encode(r)});if(typeof t=="function"||typeof t=="object")return Xk(t,function(r){return n.encode(r)});throw new Error("Data cannot be encoded in JSON: "+t)},e.prototype.decode=function(t){var n=this;if(t==null)return t;if(t["@type"])switch(t["@type"]){case n6:case r6:{var r=Number(t.value);if(isNaN(r))throw new Error("Data cannot be decoded from JSON: "+t);return r}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(function(i){return n.decode(i)}):typeof t=="function"||typeof t=="object"?Xk(t,function(i){return n.decode(i)}):t},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o6(e){var t,n=new Promise(function(r,i){t=setTimeout(function(){i(new su("deadline-exceeded","deadline-exceeded"))},e)});return{timer:t,promise:n}}var Jk=function(){function e(t,n,r,i,s,a){var c=this;s===void 0&&(s="us-central1"),this.app_=t,this.appCheckProvider=i,this.fetchImpl=a,this.serializer=new i6,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(c.deleteService())}},this.contextProvider=new t6(n,r),this.cancelAllRequests=new Promise(function(h){c.deleteService=function(){return h()}});try{var l=new URL(s);this.customDomain=l.origin,this.region="us-central1"}catch{this.customDomain=null,this.region=s}}return Object.defineProperty(e.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),e.prototype._url=function(t){var n=this.app_.options.projectId;if(this.emulatorOrigin!==null){var r=this.emulatorOrigin;return r+"/"+n+"/"+this.region+"/"+t}return this.customDomain!==null?this.customDomain+"/"+t:"https://"+this.region+"-"+n+".cloudfunctions.net/"+t},e.prototype.useEmulator=function(t,n){this.emulatorOrigin="http://"+t+":"+n},e.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},e.prototype.httpsCallable=function(t,n){var r=this;return function(i){return r.call(t,i,n||{})}},e.prototype.postJSON=function(t,n,r){return k(this,void 0,void 0,function(){var i,s,a;return C(this,function(c){switch(c.label){case 0:return r["Content-Type"]="application/json",[4,this.getAppCheckToken()];case 1:i=c.sent(),i!==null&&(r["X-Firebase-AppCheck"]=i),c.label=2;case 2:return c.trys.push([2,4,,5]),[4,this.fetchImpl(t,{method:"POST",body:JSON.stringify(n),headers:r})];case 3:return s=c.sent(),[3,5];case 4:return c.sent(),[2,{status:0,json:null}];case 5:a=null,c.label=6;case 6:return c.trys.push([6,8,,9]),[4,s.json()];case 7:return a=c.sent(),[3,9];case 8:return c.sent(),[3,9];case 9:return[2,{status:s.status,json:a}]}})})},e.prototype.getAppCheckToken=function(){return k(this,void 0,void 0,function(){var t,n;return C(this,function(r){switch(r.label){case 0:return t=this.appCheckProvider.getImmediate({optional:!0}),t?[4,t.getToken()]:[3,2];case 1:return n=r.sent(),[2,n.token];case 2:return[2,null]}})})},e.prototype.call=function(t,n,r){return k(this,void 0,void 0,function(){var i,s,a,c,l,h,d,v,m,y,w,E;return C(this,function(T){switch(T.label){case 0:return i=this._url(t),n=this.serializer.encode(n),s={data:n},a={},[4,this.contextProvider.getContext()];case 1:return c=T.sent(),c.authToken&&(a.Authorization="Bearer "+c.authToken),c.instanceIdToken&&(a["Firebase-Instance-ID-Token"]=c.instanceIdToken),l=r.timeout||7e4,h=o6(l),d=h.timer,v=h.promise,[4,Promise.race([Zk(d,this.postJSON(i,s,a)),v,Zk(d,this.cancelAllRequests)])];case 2:if(m=T.sent(),!m)throw new su("cancelled","Firebase Functions instance was deleted.");if(y=e6(m.status,m.json,this.serializer),y)throw y;if(!m.json)throw new su("internal","Response is not valid JSON object.");if(w=m.json.data,typeof w>"u"&&(w=m.json.result),typeof w>"u")throw new su("internal","Response is missing data field.");return E=this.serializer.decode(w),[2,{data:E}]}})})},e}();function Zk(e,t){return k(this,void 0,void 0,function(){var n;return C(this,function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),clearTimeout(e),[2,n]}})})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var s6="functions";function a6(e,t){var n={Functions:Jk};function r(i,s){var a=s.instanceIdentifier,c=i.getProvider("app").getImmediate(),l=i.getProvider("auth-internal"),h=i.getProvider("app-check-internal"),d=i.getProvider("messaging");return new Jk(c,l,d,h,a,t)}e.INTERNAL.registerComponent(new In(s6,r,"PUBLIC").setServiceProps(n).setMultipleInstances(!0))}var u6="@firebase/functions",c6="0.6.16";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */a6(ce,fetch.bind(self));ce.registerVersion(u6,c6);function l6(e){return Array.prototype.slice.call(e)}function Dx(e){return new Promise(function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function bv(e,t,n){var r,i=new Promise(function(s,a){r=e[t].apply(e,n),Dx(r).then(s,a)});return i.request=r,i}function f6(e,t,n){var r=bv(e,t,n);return r.then(function(i){if(i)return new Xl(i,r.request)})}function ic(e,t,n){n.forEach(function(r){Object.defineProperty(e.prototype,r,{get:function(){return this[t][r]},set:function(i){this[t][r]=i}})})}function Z0(e,t,n,r){r.forEach(function(i){i in n.prototype&&(e.prototype[i]=function(){return bv(this[t],i,arguments)})})}function Ev(e,t,n,r){r.forEach(function(i){i in n.prototype&&(e.prototype[i]=function(){return this[t][i].apply(this[t],arguments)})})}function xx(e,t,n,r){r.forEach(function(i){i in n.prototype&&(e.prototype[i]=function(){return f6(this[t],i,arguments)})})}function ya(e){this._index=e}ic(ya,"_index",["name","keyPath","multiEntry","unique"]);Z0(ya,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]);xx(ya,"_index",IDBIndex,["openCursor","openKeyCursor"]);function Xl(e,t){this._cursor=e,this._request=t}ic(Xl,"_cursor",["direction","key","primaryKey","value"]);Z0(Xl,"_cursor",IDBCursor,["update","delete"]);["advance","continue","continuePrimaryKey"].forEach(function(e){e in IDBCursor.prototype&&(Xl.prototype[e]=function(){var t=this,n=arguments;return Promise.resolve().then(function(){return t._cursor[e].apply(t._cursor,n),Dx(t._request).then(function(r){if(r)return new Xl(r,t._request)})})})});function Ni(e){this._store=e}Ni.prototype.createIndex=function(){return new ya(this._store.createIndex.apply(this._store,arguments))};Ni.prototype.index=function(){return new ya(this._store.index.apply(this._store,arguments))};ic(Ni,"_store",["name","keyPath","indexNames","autoIncrement"]);Z0(Ni,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]);xx(Ni,"_store",IDBObjectStore,["openCursor","openKeyCursor"]);Ev(Ni,"_store",IDBObjectStore,["deleteIndex"]);function Df(e){this._tx=e,this.complete=new Promise(function(t,n){e.oncomplete=function(){t()},e.onerror=function(){n(e.error)},e.onabort=function(){n(e.error)}})}Df.prototype.objectStore=function(){return new Ni(this._tx.objectStore.apply(this._tx,arguments))};ic(Df,"_tx",["objectStoreNames","mode"]);Ev(Df,"_tx",IDBTransaction,["abort"]);function Tv(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new Df(n)}Tv.prototype.createObjectStore=function(){return new Ni(this._db.createObjectStore.apply(this._db,arguments))};ic(Tv,"_db",["name","version","objectStoreNames"]);Ev(Tv,"_db",IDBDatabase,["deleteObjectStore","close"]);function Iv(e){this._db=e}Iv.prototype.transaction=function(){return new Df(this._db.transaction.apply(this._db,arguments))};ic(Iv,"_db",["name","version","objectStoreNames"]);Ev(Iv,"_db",IDBDatabase,["close"]);["openCursor","openKeyCursor"].forEach(function(e){[Ni,ya].forEach(function(t){e in t.prototype&&(t.prototype[e.replace("open","iterate")]=function(){var n=l6(arguments),r=n[n.length-1],i=this._store||this._index,s=i[e].apply(i,n.slice(0,-1));s.onsuccess=function(){r(s.result)}})})});[ya,Ni].forEach(function(e){e.prototype.getAll||(e.prototype.getAll=function(t,n){var r=this,i=[];return new Promise(function(s){r.iterateCursor(t,function(a){if(!a){s(i);return}if(i.push(a.value),n!==void 0&&i.length==n){s(i);return}a.continue()})})})});function eE(e,t,n){var r=bv(indexedDB,"open",[e,t]),i=r.request;return i&&(i.onupgradeneeded=function(s){n&&n(new Tv(i.result,s.oldVersion,i.transaction))}),r.then(function(s){return new Iv(s)})}function Uy(e){return bv(indexedDB,"deleteDatabase",[e])}var h6="@firebase/installations",Lx="0.4.32";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mx=1e4,Fx="w:"+Lx,Ux="FIS_v2",d6="https://firebaseinstallations.googleapis.com/v1",p6=60*60*1e3,v6="installations",g6="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _o,m6=(_o={},_o["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',_o["not-registered"]="Firebase Installation is not registered.",_o["installation-not-found"]="Firebase Installation not found.",_o["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',_o["app-offline"]="Could not process request. Application offline.",_o["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",_o),Ji=new to(v6,g6,m6);function jx(e){return e instanceof Ku&&e.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tE(e){var t=e.projectId;return d6+"/projects/"+t+"/installations"}function Vx(e){return{token:e.token,requestStatus:2,expiresIn:y6(e.expiresIn),creationTime:Date.now()}}function nE(e,t){return k(this,void 0,void 0,function(){var n,r;return C(this,function(i){switch(i.label){case 0:return[4,t.json()];case 1:return n=i.sent(),r=n.error,[2,Ji.create("request-failed",{requestName:e,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}})})}function Bx(e){var t=e.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function qx(e,t){var n=t.refreshToken,r=Bx(e);return r.append("Authorization",_6(n)),r}function rE(e){return k(this,void 0,void 0,function(){var t;return C(this,function(n){switch(n.label){case 0:return[4,e()];case 1:return t=n.sent(),t.status>=500&&t.status<600?[2,e()]:[2,t]}})})}function y6(e){return Number(e.replace("s","000"))}function _6(e){return Ux+" "+e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w6(e,t){var n=t.fid;return k(this,void 0,void 0,function(){var r,i,s,a,c,l,h;return C(this,function(d){switch(d.label){case 0:return r=tE(e),i=Bx(e),s={fid:n,authVersion:Ux,appId:e.appId,sdkVersion:Fx},a={method:"POST",headers:i,body:JSON.stringify(s)},[4,rE(function(){return fetch(r,a)})];case 1:return c=d.sent(),c.ok?[4,c.json()]:[3,3];case 2:return l=d.sent(),h={fid:l.fid||n,registrationStatus:2,refreshToken:l.refreshToken,authToken:Vx(l.authToken)},[2,h];case 3:return[4,nE("Create Installation",c)];case 4:throw d.sent()}})})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hx(e){return new Promise(function(t){setTimeout(t,e)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b6(e){var t=btoa(String.fromCharCode.apply(String,Ne([],an(e))));return t.replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var E6=/^[cdef][\w-]{21}$/,gw="";function T6(){try{var e=new Uint8Array(17),t=self.crypto||self.msCrypto;t.getRandomValues(e),e[0]=112+e[0]%16;var n=I6(e);return E6.test(n)?n:gw}catch{return gw}}function I6(e){var t=b6(e);return t.substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oc(e){return e.appName+"!"+e.appId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mu=new Map;function Kx(e,t){var n=oc(e);Wx(n,t),A6(n,t)}function S6(e,t){Gx();var n=oc(e),r=Mu.get(n);r||(r=new Set,Mu.set(n,r)),r.add(t)}function C6(e,t){var n=oc(e),r=Mu.get(n);r&&(r.delete(t),r.size===0&&Mu.delete(n),zx())}function Wx(e,t){var n,r,i=Mu.get(e);if(i)try{for(var s=Xt(i),a=s.next();!a.done;a=s.next()){var c=a.value;c(t)}}catch(l){n={error:l}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}function A6(e,t){var n=Gx();n&&n.postMessage({key:e,fid:t}),zx()}var Fs=null;function Gx(){return!Fs&&"BroadcastChannel"in self&&(Fs=new BroadcastChannel("[Firebase] FID Change"),Fs.onmessage=function(e){Wx(e.data.key,e.data.fid)}),Fs}function zx(){Mu.size===0&&Fs&&(Fs.close(),Fs=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var k6="firebase-installations-database",R6=1,ra="firebase-installations-store",jy=null;function iE(){return jy||(jy=eE(k6,R6,function(e){switch(e.oldVersion){case 0:e.createObjectStore(ra)}})),jy}function ap(e,t){return k(this,void 0,void 0,function(){var n,r,i,s,a;return C(this,function(c){switch(c.label){case 0:return n=oc(e),[4,iE()];case 1:return r=c.sent(),i=r.transaction(ra,"readwrite"),s=i.objectStore(ra),[4,s.get(n)];case 2:return a=c.sent(),[4,s.put(t,n)];case 3:return c.sent(),[4,i.complete];case 4:return c.sent(),(!a||a.fid!==t.fid)&&Kx(e,t.fid),[2,t]}})})}function oE(e){return k(this,void 0,void 0,function(){var t,n,r;return C(this,function(i){switch(i.label){case 0:return t=oc(e),[4,iE()];case 1:return n=i.sent(),r=n.transaction(ra,"readwrite"),[4,r.objectStore(ra).delete(t)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}})})}function xf(e,t){return k(this,void 0,void 0,function(){var n,r,i,s,a,c;return C(this,function(l){switch(l.label){case 0:return n=oc(e),[4,iE()];case 1:return r=l.sent(),i=r.transaction(ra,"readwrite"),s=i.objectStore(ra),[4,s.get(n)];case 2:return a=l.sent(),c=t(a),c!==void 0?[3,4]:[4,s.delete(n)];case 3:return l.sent(),[3,6];case 4:return[4,s.put(c,n)];case 5:l.sent(),l.label=6;case 6:return[4,i.complete];case 7:return l.sent(),c&&(!a||a.fid!==c.fid)&&Kx(e,c.fid),[2,c]}})})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sE(e){return k(this,void 0,void 0,function(){var t,n,r;return C(this,function(i){switch(i.label){case 0:return[4,xf(e,function(s){var a=N6(s),c=P6(e,a);return t=c.registrationPromise,c.installationEntry})];case 1:return n=i.sent(),n.fid!==gw?[3,3]:(r={},[4,t]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:t}]}})})}function N6(e){var t=e||{fid:T6(),registrationStatus:0};return $x(t)}function P6(e,t){if(t.registrationStatus===0){if(!navigator.onLine){var n=Promise.reject(Ji.create("app-offline"));return{installationEntry:t,registrationPromise:n}}var r={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=O6(e,r);return{installationEntry:r,registrationPromise:i}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:D6(e)}:{installationEntry:t}}function O6(e,t){return k(this,void 0,void 0,function(){var n,r;return C(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,w6(e,t)];case 1:return n=i.sent(),[2,ap(e,n)];case 2:return r=i.sent(),jx(r)&&r.customData.serverCode===409?[4,oE(e)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,ap(e,{fid:t.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}})})}function D6(e){return k(this,void 0,void 0,function(){var t,n,r,i;return C(this,function(s){switch(s.label){case 0:return[4,eR(e)];case 1:t=s.sent(),s.label=2;case 2:return t.registrationStatus!==1?[3,5]:[4,Hx(100)];case 3:return s.sent(),[4,eR(e)];case 4:return t=s.sent(),[3,2];case 5:return t.registrationStatus!==0?[3,7]:[4,sE(e)];case 6:return n=s.sent(),r=n.installationEntry,i=n.registrationPromise,i?[2,i]:[2,r];case 7:return[2,t]}})})}function eR(e){return xf(e,function(t){if(!t)throw Ji.create("installation-not-found");return $x(t)})}function $x(e){return x6(e)?{fid:e.fid,registrationStatus:0}:e}function x6(e){return e.registrationStatus===1&&e.registrationTime+Mx<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L6(e,t){var n=e.appConfig,r=e.platformLoggerProvider;return k(this,void 0,void 0,function(){var i,s,a,c,l,h,d,v;return C(this,function(m){switch(m.label){case 0:return i=M6(n,t),s=qx(n,t),a=r.getImmediate({optional:!0}),a&&s.append("x-firebase-client",a.getPlatformInfoString()),c={installation:{sdkVersion:Fx}},l={method:"POST",headers:s,body:JSON.stringify(c)},[4,rE(function(){return fetch(i,l)})];case 1:return h=m.sent(),h.ok?[4,h.json()]:[3,3];case 2:return d=m.sent(),v=Vx(d),[2,v];case 3:return[4,nE("Generate Auth Token",h)];case 4:throw m.sent()}})})}function M6(e,t){var n=t.fid;return tE(e)+"/"+n+"/authTokens:generate"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aE(e,t){return t===void 0&&(t=!1),k(this,void 0,void 0,function(){var n,r,i,s;return C(this,function(a){switch(a.label){case 0:return[4,xf(e.appConfig,function(c){if(!Qx(c))throw Ji.create("not-registered");var l=c.authToken;if(!t&&j6(l))return c;if(l.requestStatus===1)return n=F6(e,t),c;if(!navigator.onLine)throw Ji.create("app-offline");var h=B6(c);return n=U6(e,h),h})];case 1:return r=a.sent(),n?[4,n]:[3,3];case 2:return s=a.sent(),[3,4];case 3:s=r.authToken,a.label=4;case 4:return i=s,[2,i]}})})}function F6(e,t){return k(this,void 0,void 0,function(){var n,r;return C(this,function(i){switch(i.label){case 0:return[4,tR(e.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return n.authToken.requestStatus!==1?[3,5]:[4,Hx(100)];case 3:return i.sent(),[4,tR(e.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return r=n.authToken,r.requestStatus===0?[2,aE(e,t)]:[2,r]}})})}function tR(e){return xf(e,function(t){if(!Qx(t))throw Ji.create("not-registered");var n=t.authToken;return q6(n)?me(me({},t),{authToken:{requestStatus:0}}):t})}function U6(e,t){return k(this,void 0,void 0,function(){var n,i,r,i;return C(this,function(s){switch(s.label){case 0:return s.trys.push([0,3,,8]),[4,L6(e,t)];case 1:return n=s.sent(),i=me(me({},t),{authToken:n}),[4,ap(e.appConfig,i)];case 2:return s.sent(),[2,n];case 3:return r=s.sent(),jx(r)&&(r.customData.serverCode===401||r.customData.serverCode===404)?[4,oE(e.appConfig)]:[3,5];case 4:return s.sent(),[3,7];case 5:return i=me(me({},t),{authToken:{requestStatus:0}}),[4,ap(e.appConfig,i)];case 6:s.sent(),s.label=7;case 7:throw r;case 8:return[2]}})})}function Qx(e){return e!==void 0&&e.registrationStatus===2}function j6(e){return e.requestStatus===2&&!V6(e)}function V6(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+p6}function B6(e){var t={requestStatus:1,requestTime:Date.now()};return me(me({},e),{authToken:t})}function q6(e){return e.requestStatus===1&&e.requestTime+Mx<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H6(e){return k(this,void 0,void 0,function(){var t,n,r;return C(this,function(i){switch(i.label){case 0:return[4,sE(e.appConfig)];case 1:return t=i.sent(),n=t.installationEntry,r=t.registrationPromise,r?r.catch(console.error):aE(e).catch(console.error),[2,n.fid]}})})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K6(e,t){return t===void 0&&(t=!1),k(this,void 0,void 0,function(){var n;return C(this,function(r){switch(r.label){case 0:return[4,W6(e.appConfig)];case 1:return r.sent(),[4,aE(e,t)];case 2:return n=r.sent(),[2,n.token]}})})}function W6(e){return k(this,void 0,void 0,function(){var t;return C(this,function(n){switch(n.label){case 0:return[4,sE(e)];case 1:return t=n.sent().registrationPromise,t?[4,t]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}})})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G6(e,t){return k(this,void 0,void 0,function(){var n,r,i,s;return C(this,function(a){switch(a.label){case 0:return n=z6(e,t),r=qx(e,t),i={method:"DELETE",headers:r},[4,rE(function(){return fetch(n,i)})];case 1:return s=a.sent(),s.ok?[3,3]:[4,nE("Delete Installation",s)];case 2:throw a.sent();case 3:return[2]}})})}function z6(e,t){var n=t.fid;return tE(e)+"/"+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $6(e){return k(this,void 0,void 0,function(){var t,n;return C(this,function(r){switch(r.label){case 0:return t=e.appConfig,[4,xf(t,function(i){if(!(i&&i.registrationStatus===0))return i})];case 1:if(n=r.sent(),!n)return[3,6];if(n.registrationStatus!==1)return[3,2];throw Ji.create("delete-pending-registration");case 2:if(n.registrationStatus!==2)return[3,6];if(navigator.onLine)return[3,3];throw Ji.create("app-offline");case 3:return[4,G6(t,n)];case 4:return r.sent(),[4,oE(t)];case 5:r.sent(),r.label=6;case 6:return[2]}})})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q6(e,t){var n=e.appConfig;return S6(n,t),function(){C6(n,t)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y6(e){var t,n;if(!e||!e.options)throw Vy("App Configuration");if(!e.name)throw Vy("App Name");var r=["projectId","apiKey","appId"];try{for(var i=Xt(r),s=i.next();!s.done;s=i.next()){var a=s.value;if(!e.options[a])throw Vy(a)}}catch(c){t={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function Vy(e){return Ji.create("missing-app-config-values",{valueName:e})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X6(e){var t="installations";e.INTERNAL.registerComponent(new In(t,function(n){var r=n.getProvider("app").getImmediate(),i=Y6(r),s=n.getProvider("platform-logger"),a={appConfig:i,platformLoggerProvider:s},c={app:r,getId:function(){return H6(a)},getToken:function(l){return K6(a,l)},delete:function(){return $6(a)},onIdChange:function(l){return Q6(a,l)}};return c},"PUBLIC")),e.registerVersion(h6,Lx)}X6(ce);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ft,J6=(Ft={},Ft["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',Ft["only-available-in-window"]="This method is available in a Window context.",Ft["only-available-in-sw"]="This method is available in a service worker context.",Ft["permission-default"]="The notification permission was not granted and dismissed instead.",Ft["permission-blocked"]="The notification permission was not granted and blocked instead.",Ft["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",Ft["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",Ft["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",Ft["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",Ft["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",Ft["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",Ft["token-update-no-token"]="FCM returned no token when updating the user to push.",Ft["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",Ft["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",Ft["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",Ft["invalid-vapid-key"]="The public VAPID key must be a string.",Ft["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",Ft),Ze=new to("messaging","Messaging",J6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Z6="/firebase-messaging-sw.js",eQ="/firebase-cloud-messaging-push-scope",up="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",tQ="https://fcmregistrations.googleapis.com/v1",Yx="FCM_MSG",nQ="FirebaseMessaging: ",rQ="google.c.a.e",Xx="google.c.a.c_id",iQ="google.c.a.ts",oQ="google.c.a.c_l",sQ=1e3,aQ=3e3;/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var ia;(function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"})(ia||(ia={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bi(e){var t=new Uint8Array(e),n=btoa(String.fromCharCode.apply(String,Ne([],an(t))));return n.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function uQ(e){for(var t="=".repeat((4-e.length%4)%4),n=(e+t).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length),s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var By="fcm_token_details_db",cQ=5,nR="fcm_token_object_Store";function lQ(e){return k(this,void 0,void 0,function(){var t,n,r,i,s=this;return C(this,function(a){switch(a.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(t=a.sent(),n=t.map(function(c){return c.name}),!n.includes(By))return[2,null];a.label=2;case 2:return r=null,[4,eE(By,cQ,function(c){return k(s,void 0,void 0,function(){var l,h,d,d,d,v;return C(this,function(m){switch(m.label){case 0:return c.oldVersion<2?[2]:c.objectStoreNames.contains(nR)?(l=c.transaction.objectStore(nR),[4,l.index("fcmSenderId").get(e)]):[2];case 1:return h=m.sent(),[4,l.clear()];case 2:if(m.sent(),!h)return[2];if(c.oldVersion===2){if(d=h,!d.auth||!d.p256dh||!d.endpoint)return[2];r={token:d.fcmToken,createTime:(v=d.createTime)!==null&&v!==void 0?v:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:typeof d.vapidKey=="string"?d.vapidKey:Bi(d.vapidKey)}}}else c.oldVersion===3?(d=h,r={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Bi(d.auth),p256dh:Bi(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Bi(d.vapidKey)}}):c.oldVersion===4&&(d=h,r={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Bi(d.auth),p256dh:Bi(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Bi(d.vapidKey)}});return[2]}})})})];case 3:return i=a.sent(),i.close(),[4,Uy(By)];case 4:return a.sent(),[4,Uy("fcm_vapid_details_db")];case 5:return a.sent(),[4,Uy("undefined")];case 6:return a.sent(),[2,fQ(r)?r:null]}})})}function fQ(e){if(!e||!e.subscriptionOptions)return!1;var t=e.subscriptionOptions;return typeof e.createTime=="number"&&e.createTime>0&&typeof e.token=="string"&&e.token.length>0&&typeof t.auth=="string"&&t.auth.length>0&&typeof t.p256dh=="string"&&t.p256dh.length>0&&typeof t.endpoint=="string"&&t.endpoint.length>0&&typeof t.swScope=="string"&&t.swScope.length>0&&typeof t.vapidKey=="string"&&t.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hQ="firebase-messaging-database",dQ=1,oa="firebase-messaging-store",qy=null;function uE(){return qy||(qy=eE(hQ,dQ,function(e){switch(e.oldVersion){case 0:e.createObjectStore(oa)}})),qy}function cp(e){return k(this,void 0,void 0,function(){var t,n,r,i;return C(this,function(s){switch(s.label){case 0:return t=lE(e),[4,uE()];case 1:return n=s.sent(),[4,n.transaction(oa).objectStore(oa).get(t)];case 2:return r=s.sent(),r?[2,r]:[3,3];case 3:return[4,lQ(e.appConfig.senderId)];case 4:return i=s.sent(),i?[4,cE(e,i)]:[3,6];case 5:return s.sent(),[2,i];case 6:return[2]}})})}function cE(e,t){return k(this,void 0,void 0,function(){var n,r,i;return C(this,function(s){switch(s.label){case 0:return n=lE(e),[4,uE()];case 1:return r=s.sent(),i=r.transaction(oa,"readwrite"),[4,i.objectStore(oa).put(t,n)];case 2:return s.sent(),[4,i.complete];case 3:return s.sent(),[2,t]}})})}function pQ(e){return k(this,void 0,void 0,function(){var t,n,r;return C(this,function(i){switch(i.label){case 0:return t=lE(e),[4,uE()];case 1:return n=i.sent(),r=n.transaction(oa,"readwrite"),[4,r.objectStore(oa).delete(t)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}})})}function lE(e){var t=e.appConfig;return t.appId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vQ(e,t){return k(this,void 0,void 0,function(){var n,r,i,s,a,c,l;return C(this,function(h){switch(h.label){case 0:return[4,hE(e)];case 1:n=h.sent(),r=Zx(t),i={method:"POST",headers:n,body:JSON.stringify(r)},h.label=2;case 2:return h.trys.push([2,5,,6]),[4,fetch(fE(e.appConfig),i)];case 3:return a=h.sent(),[4,a.json()];case 4:return s=h.sent(),[3,6];case 5:throw c=h.sent(),Ze.create("token-subscribe-failed",{errorInfo:c});case 6:if(s.error)throw l=s.error.message,Ze.create("token-subscribe-failed",{errorInfo:l});if(!s.token)throw Ze.create("token-subscribe-no-token");return[2,s.token]}})})}function gQ(e,t){return k(this,void 0,void 0,function(){var n,r,i,s,a,c,l;return C(this,function(h){switch(h.label){case 0:return[4,hE(e)];case 1:n=h.sent(),r=Zx(t.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},h.label=2;case 2:return h.trys.push([2,5,,6]),[4,fetch(fE(e.appConfig)+"/"+t.token,i)];case 3:return a=h.sent(),[4,a.json()];case 4:return s=h.sent(),[3,6];case 5:throw c=h.sent(),Ze.create("token-update-failed",{errorInfo:c});case 6:if(s.error)throw l=s.error.message,Ze.create("token-update-failed",{errorInfo:l});if(!s.token)throw Ze.create("token-update-no-token");return[2,s.token]}})})}function Jx(e,t){return k(this,void 0,void 0,function(){var n,r,i,s,a,c;return C(this,function(l){switch(l.label){case 0:return[4,hE(e)];case 1:n=l.sent(),r={method:"DELETE",headers:n},l.label=2;case 2:return l.trys.push([2,5,,6]),[4,fetch(fE(e.appConfig)+"/"+t,r)];case 3:return i=l.sent(),[4,i.json()];case 4:if(s=l.sent(),s.error)throw a=s.error.message,Ze.create("token-unsubscribe-failed",{errorInfo:a});return[3,6];case 5:throw c=l.sent(),Ze.create("token-unsubscribe-failed",{errorInfo:c});case 6:return[2]}})})}function fE(e){var t=e.projectId;return tQ+"/projects/"+t+"/registrations"}function hE(e){var t=e.appConfig,n=e.installations;return k(this,void 0,void 0,function(){var r;return C(this,function(i){switch(i.label){case 0:return[4,n.getToken()];case 1:return r=i.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":"FIS "+r})]}})})}function Zx(e){var t=e.p256dh,n=e.auth,r=e.endpoint,i=e.vapidKey,s={web:{endpoint:r,auth:n,p256dh:t}};return i!==up&&(s.web.applicationPubKey=i),s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mQ=7*24*60*60*1e3;function mw(e,t,n){return k(this,void 0,void 0,function(){var r,i,s,a;return C(this,function(c){switch(c.label){case 0:if(Notification.permission!=="granted")throw Ze.create("permission-blocked");return[4,_Q(t,n)];case 1:return r=c.sent(),[4,cp(e)];case 2:return i=c.sent(),s={vapidKey:n,swScope:t.scope,endpoint:r.endpoint,auth:Bi(r.getKey("auth")),p256dh:Bi(r.getKey("p256dh"))},i?[3,3]:[2,rR(e,s)];case 3:if(wQ(i.subscriptionOptions,s))return[3,8];c.label=4;case 4:return c.trys.push([4,6,,7]),[4,Jx(e,i.token)];case 5:return c.sent(),[3,7];case 6:return a=c.sent(),console.warn(a),[3,7];case 7:return[2,rR(e,s)];case 8:return Date.now()>=i.createTime+mQ?[2,yQ({token:i.token,createTime:Date.now(),subscriptionOptions:s},e,t)]:[2,i.token];case 9:return[2]}})})}function vl(e,t){return k(this,void 0,void 0,function(){var n,r;return C(this,function(i){switch(i.label){case 0:return[4,cp(e)];case 1:return n=i.sent(),n?[4,Jx(e,n.token)]:[3,4];case 2:return i.sent(),[4,pQ(e)];case 3:i.sent(),i.label=4;case 4:return[4,t.pushManager.getSubscription()];case 5:return r=i.sent(),r?[2,r.unsubscribe()]:[2,!0]}})})}function yQ(e,t,n){return k(this,void 0,void 0,function(){var r,i,s;return C(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,,5]),[4,gQ(t,e)];case 1:return r=a.sent(),i=me(me({},e),{token:r,createTime:Date.now()}),[4,cE(t,i)];case 2:return a.sent(),[2,r];case 3:return s=a.sent(),[4,vl(t,n)];case 4:throw a.sent(),s;case 5:return[2]}})})}function rR(e,t){return k(this,void 0,void 0,function(){var n,r;return C(this,function(i){switch(i.label){case 0:return[4,vQ(e,t)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:t},[4,cE(e,r)];case 2:return i.sent(),[2,r.token]}})})}function _Q(e,t){return k(this,void 0,void 0,function(){var n;return C(this,function(r){switch(r.label){case 0:return[4,e.pushManager.getSubscription()];case 1:return n=r.sent(),n?[2,n]:[2,e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:uQ(t)})]}})})}function wQ(e,t){var n=t.vapidKey===e.vapidKey,r=t.endpoint===e.endpoint,i=t.auth===e.auth,s=t.p256dh===e.p256dh;return n&&r&&i&&s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bQ(e){var t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcm_message_id};return EQ(t,e),TQ(t,e),IQ(t,e),t}function EQ(e,t){if(t.notification){e.notification={};var n=t.notification.title;n&&(e.notification.title=n);var r=t.notification.body;r&&(e.notification.body=r);var i=t.notification.image;i&&(e.notification.image=i)}}function TQ(e,t){t.data&&(e.data=t.data)}function IQ(e,t){if(t.fcmOptions){e.fcmOptions={};var n=t.fcmOptions.link;n&&(e.fcmOptions.link=n);var r=t.fcmOptions.analytics_label;r&&(e.fcmOptions.analyticsLabel=r)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eL(e){return typeof e=="object"&&!!e&&Xx in e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iR(e){return new Promise(function(t){setTimeout(t,e)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var SQ=function(){function e(t){var n=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",function(r){r.waitUntil(n.onPush(r))}),self.addEventListener("pushsubscriptionchange",function(r){r.waitUntil(n.onSubChange(r))}),self.addEventListener("notificationclick",function(r){r.waitUntil(n.onNotificationClick(r))})}return Object.defineProperty(e.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),e.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||typeof t!="function")throw Ze.create("invalid-bg-handler");this.bgMessageHandler=t},e.prototype.onBackgroundMessage=function(t){var n=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){n.bgMessageHandler=null}},e.prototype.getToken=function(){var t,n;return k(this,void 0,void 0,function(){var r;return C(this,function(i){switch(i.label){case 0:return this.vapidKey?[3,2]:[4,cp(this.firebaseDependencies)];case 1:r=i.sent(),this.vapidKey=(n=(t=r==null?void 0:r.subscriptionOptions)===null||t===void 0?void 0:t.vapidKey)!==null&&n!==void 0?n:up,i.label=2;case 2:return[2,mw(this.firebaseDependencies,self.registration,this.vapidKey)]}})})},e.prototype.deleteToken=function(){return vl(this.firebaseDependencies,self.registration)},e.prototype.requestPermission=function(){throw Ze.create("only-available-in-window")},e.prototype.usePublicVapidKey=function(t){if(this.vapidKey!==null)throw Ze.create("use-vapid-key-after-get-token");if(typeof t!="string"||t.length===0)throw Ze.create("invalid-vapid-key");this.vapidKey=t},e.prototype.useServiceWorker=function(){throw Ze.create("only-available-in-window")},e.prototype.onMessage=function(){throw Ze.create("only-available-in-window")},e.prototype.onTokenRefresh=function(){throw Ze.create("only-available-in-window")},e.prototype.onPush=function(t){return k(this,void 0,void 0,function(){var n,r,i,s;return C(this,function(a){switch(a.label){case 0:return n=AQ(t),n?[4,tL()]:(console.debug(nQ+"failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return r=a.sent(),RQ(r)?[2,NQ(r,n)]:(i=!1,n.notification?[4,PQ(CQ(n))]:[3,3]);case 2:a.sent(),i=!0,a.label=3;case 3:return i===!0&&this.isOnBackgroundMessageUsed===!1?[2]:(this.bgMessageHandler&&(s=bQ(n),typeof this.bgMessageHandler=="function"?this.bgMessageHandler(s):this.bgMessageHandler.next(s)),[4,iR(sQ)]);case 4:return a.sent(),[2]}})})},e.prototype.onSubChange=function(t){var n,r;return k(this,void 0,void 0,function(){var i,s;return C(this,function(a){switch(a.label){case 0:return i=t.newSubscription,i?[3,2]:[4,vl(this.firebaseDependencies,self.registration)];case 1:return a.sent(),[2];case 2:return[4,cp(this.firebaseDependencies)];case 3:return s=a.sent(),[4,vl(this.firebaseDependencies,self.registration)];case 4:return a.sent(),[4,mw(this.firebaseDependencies,self.registration,(r=(n=s==null?void 0:s.subscriptionOptions)===null||n===void 0?void 0:n.vapidKey)!==null&&r!==void 0?r:up)];case 5:return a.sent(),[2]}})})},e.prototype.onNotificationClick=function(t){var n,r;return k(this,void 0,void 0,function(){var i,s,a,c,l;return C(this,function(h){switch(h.label){case 0:if(i=(r=(n=t.notification)===null||n===void 0?void 0:n.data)===null||r===void 0?void 0:r[Yx],i){if(t.action)return[2]}else return[2];return t.stopImmediatePropagation(),t.notification.close(),s=OQ(i),s?(a=new URL(s,self.location.href),c=new URL(self.location.origin),a.host!==c.host?[2]:[4,kQ(a)]):[2];case 1:return l=h.sent(),l?[3,4]:[4,self.clients.openWindow(s)];case 2:return l=h.sent(),[4,iR(aQ)];case 3:return h.sent(),[3,6];case 4:return[4,l.focus()];case 5:l=h.sent(),h.label=6;case 6:return l?(i.messageType=ia.NOTIFICATION_CLICKED,i.isFirebaseMessaging=!0,[2,l.postMessage(i)]):[2]}})})},e}();function CQ(e){var t,n=me({},e.notification);return n.data=(t={},t[Yx]=e,t),n}function AQ(e){var t=e.data;if(!t)return null;try{return t.json()}catch{return null}}function kQ(e){return k(this,void 0,void 0,function(){var t,n,r,i,s,a,c;return C(this,function(l){switch(l.label){case 0:return[4,tL()];case 1:t=l.sent();try{for(n=Xt(t),r=n.next();!r.done;r=n.next())if(i=r.value,s=new URL(i.url,self.location.href),e.host===s.host)return[2,i]}catch(h){a={error:h}}finally{try{r&&!r.done&&(c=n.return)&&c.call(n)}finally{if(a)throw a.error}}return[2,null]}})})}function RQ(e){return e.some(function(t){return t.visibilityState==="visible"&&!t.url.startsWith("chrome-extension://")})}function NQ(e,t){var n,r;t.isFirebaseMessaging=!0,t.messageType=ia.PUSH_RECEIVED;try{for(var i=Xt(e),s=i.next();!s.done;s=i.next()){var a=s.value;a.postMessage(t)}}catch(c){n={error:c}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function tL(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function PQ(e){var t,n=e.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification((t=e.title)!==null&&t!==void 0?t:"",e)}function OQ(e){var t,n,r,i=(n=(t=e.fcmOptions)===null||t===void 0?void 0:t.link)!==null&&n!==void 0?n:(r=e.notification)===null||r===void 0?void 0:r.click_action;return i||(eL(e.data)?self.location.origin:null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var DQ=function(){function e(t){var n=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",function(r){return n.messageEventListener(r)})}return Object.defineProperty(e.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),e.prototype.messageEventListener=function(t){return k(this,void 0,void 0,function(){var n,r;return C(this,function(i){switch(i.label){case 0:return n=t.data,n.isFirebaseMessaging?(this.onMessageCallback&&n.messageType===ia.PUSH_RECEIVED&&(typeof this.onMessageCallback=="function"?this.onMessageCallback(LQ(Object.assign({},n))):this.onMessageCallback.next(Object.assign({},n))),r=n.data,eL(r)&&r[rQ]==="1"?[4,this.logEvent(n.messageType,r)]:[3,2]):[2];case 1:i.sent(),i.label=2;case 2:return[2]}})})},e.prototype.getVapidKey=function(){return this.vapidKey},e.prototype.getSwReg=function(){return this.swRegistration},e.prototype.getToken=function(t){return k(this,void 0,void 0,function(){return C(this,function(n){switch(n.label){case 0:return Notification.permission!=="default"?[3,2]:[4,Notification.requestPermission()];case 1:n.sent(),n.label=2;case 2:if(Notification.permission!=="granted")throw Ze.create("permission-blocked");return[4,this.updateVapidKey(t==null?void 0:t.vapidKey)];case 3:return n.sent(),[4,this.updateSwReg(t==null?void 0:t.serviceWorkerRegistration)];case 4:return n.sent(),[2,mw(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}})})},e.prototype.updateVapidKey=function(t){return k(this,void 0,void 0,function(){return C(this,function(n){return t?this.vapidKey=t:this.vapidKey||(this.vapidKey=up),[2]})})},e.prototype.updateSwReg=function(t){return k(this,void 0,void 0,function(){return C(this,function(n){switch(n.label){case 0:return!t&&!this.swRegistration?[4,this.registerDefaultSw()]:[3,2];case 1:n.sent(),n.label=2;case 2:if(!t&&this.swRegistration)return[2];if(!(t instanceof ServiceWorkerRegistration))throw Ze.create("invalid-sw-registration");return this.swRegistration=t,[2]}})})},e.prototype.registerDefaultSw=function(){return k(this,void 0,void 0,function(){var t,n;return C(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),t=this,[4,navigator.serviceWorker.register(Z6,{scope:eQ})];case 1:return t.swRegistration=r.sent(),this.swRegistration.update().catch(function(){}),[3,3];case 2:throw n=r.sent(),Ze.create("failed-service-worker-registration",{browserErrorMessage:n.message});case 3:return[2]}})})},e.prototype.deleteToken=function(){return k(this,void 0,void 0,function(){return C(this,function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,vl(this.firebaseDependencies,this.swRegistration)]}})})},e.prototype.requestPermission=function(){return k(this,void 0,void 0,function(){var t;return C(this,function(n){switch(n.label){case 0:return Notification.permission==="granted"?[2]:[4,Notification.requestPermission()];case 1:if(t=n.sent(),t==="granted")return[2];throw t==="denied"?Ze.create("permission-blocked"):Ze.create("permission-default")}})})},e.prototype.usePublicVapidKey=function(t){if(this.vapidKey!==null)throw Ze.create("use-vapid-key-after-get-token");if(typeof t!="string"||t.length===0)throw Ze.create("invalid-vapid-key");this.vapidKey=t},e.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw Ze.create("invalid-sw-registration");if(this.swRegistration)throw Ze.create("use-sw-after-get-token");this.swRegistration=t},e.prototype.onMessage=function(t){var n=this;return this.onMessageCallback=t,function(){n.onMessageCallback=null}},e.prototype.setBackgroundMessageHandler=function(){throw Ze.create("only-available-in-sw")},e.prototype.onBackgroundMessage=function(){throw Ze.create("only-available-in-sw")},e.prototype.onTokenRefresh=function(){return function(){}},e.prototype.logEvent=function(t,n){return k(this,void 0,void 0,function(){var r,i;return C(this,function(s){switch(s.label){case 0:return r=xQ(t),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return i=s.sent(),i.logEvent(r,{message_id:n[Xx],message_name:n[oQ],message_time:n[iQ],message_device_time:Math.floor(Date.now()/1e3)}),[2]}})})},e}();function xQ(e){switch(e){case ia.NOTIFICATION_CLICKED:return"notification_open";case ia.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function LQ(e){return delete e.messageType,delete e.isFirebaseMessaging,e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MQ(e){var t,n;if(!e||!e.options)throw Hy("App Configuration Object");if(!e.name)throw Hy("App Name");var r=["projectId","apiKey","appId","messagingSenderId"],i=e.options;try{for(var s=Xt(r),a=s.next();!a.done;a=s.next()){var c=a.value;if(!i[c])throw Hy(c)}}catch(l){t={error:l}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return{appName:e.name,projectId:i.projectId,apiKey:i.apiKey,appId:i.appId,senderId:i.messagingSenderId}}function Hy(e){return Ze.create("missing-app-config-values",{valueName:e})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var FQ="messaging";function UQ(e){var t=e.getProvider("app").getImmediate(),n=MQ(t),r=e.getProvider("installations").getImmediate(),i=e.getProvider("analytics-internal"),s={app:t,appConfig:n,installations:r,analyticsProvider:i};if(!nL())throw Ze.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new SQ(s):new DQ(s)}var jQ={isSupported:nL};ce.INTERNAL.registerComponent(new In(FQ,UQ,"PUBLIC").setServiceProps(jQ));function nL(){return self&&"ServiceWorkerGlobalScope"in self?BQ():VQ()}function VQ(){return"indexedDB"in window&&indexedDB!==null&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function BQ(){return"indexedDB"in self&&indexedDB!==null&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rL="firebasestorage.googleapis.com",iL="storageBucket",qQ=2*60*1e3,HQ=10*60*1e3,xt=function(e){te(t,e);function t(n,r){var i=e.call(this,Ky(n),"Firebase Storage: "+r+" ("+Ky(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,t.prototype),i}return t.prototype._codeEquals=function(n){return Ky(n)===this.code},Object.defineProperty(t.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(n){this.customData.serverResponse=n,this.customData.serverResponse?this.message=this._baseMessage+`
`+this.customData.serverResponse:this.message=this._baseMessage},enumerable:!1,configurable:!0}),t}(Ku);function Ky(e){return"storage/"+e}function dE(){var e="An unknown error occurred, please check the error payload for server response.";return new xt("unknown",e)}function KQ(e){return new xt("object-not-found","Object '"+e+"' does not exist.")}function WQ(e){return new xt("quota-exceeded","Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function GQ(){var e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new xt("unauthenticated",e)}function zQ(){return new xt("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}function $Q(e){return new xt("unauthorized","User does not have permission to access '"+e+"'.")}function QQ(){return new xt("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function oL(){return new xt("canceled","User canceled the upload/download.")}function YQ(e){return new xt("invalid-url","Invalid URL '"+e+"'.")}function XQ(e){return new xt("invalid-default-bucket","Invalid default bucket '"+e+"'.")}function JQ(){return new xt("no-default-bucket","No default bucket found. Did you set the '"+iL+"' property when initializing the app?")}function sL(){return new xt("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function ZQ(){return new xt("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}function e5(){return new xt("no-download-url","The given file does not have any download URLs.")}function au(e){return new xt("invalid-argument",e)}function aL(){return new xt("app-deleted","The Firebase app was deleted.")}function uL(e){return new xt("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function gl(e,t){return new xt("invalid-format","String does not match format '"+e+"': "+t)}function Jh(e){throw new xt("internal-error","Internal error: "+e)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t5(e){return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Wy=function(){function e(t,n){this.data=t,this.contentType=n||null}return e}();function cL(e,t){switch(e){case kr.RAW:return new Wy(lL(t));case kr.BASE64:case kr.BASE64URL:return new Wy(fL(e,t));case kr.DATA_URL:return new Wy(r5(t),i5(t))}throw dE()}function lL(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296){var i=n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320;if(!i)t.push(239,191,189);else{var s=r,a=e.charCodeAt(++n);r=65536|(s&1023)<<10|a&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function n5(e){var t;try{t=decodeURIComponent(e)}catch{throw gl(kr.DATA_URL,"Malformed data URL.")}return lL(t)}function fL(e,t){switch(e){case kr.BASE64:{var n=t.indexOf("-")!==-1,r=t.indexOf("_")!==-1;if(n||r){var i=n?"-":"_";throw gl(e,"Invalid character '"+i+"' found: is it base64url encoded?")}break}case kr.BASE64URL:{var s=t.indexOf("+")!==-1,a=t.indexOf("/")!==-1;if(s||a){var i=s?"+":"/";throw gl(e,"Invalid character '"+i+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}var c;try{c=t5(t)}catch{throw gl(e,"Invalid character found")}for(var l=new Uint8Array(c.length),h=0;h<c.length;h++)l[h]=c.charCodeAt(h);return l}var hL=function(){function e(t){this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(n===null)throw gl(kr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;r!=null&&(this.base64=o5(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}return e}();function r5(e){var t=new hL(e);return t.base64?fL(kr.BASE64,t.rest):n5(t.rest)}function i5(e){var t=new hL(e);return t.contentType}function o5(e,t){var n=e.length>=t.length;return n?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var s5={STATE_CHANGED:"state_changed"},Mn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Gy(e){switch(e){case"running":case"pausing":case"canceling":return Mn.RUNNING;case"paused":return Mn.PAUSED;case"success":return Mn.SUCCESS;case"canceled":return Mn.CANCELED;case"error":return Mn.ERROR;default:return Mn.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gs;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(Gs||(Gs={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var a5=function(){function e(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=Gs.NO_ERROR,this.sendPromise_=new Promise(function(n){t.xhr_.addEventListener("abort",function(){t.errorCode_=Gs.ABORT,n()}),t.xhr_.addEventListener("error",function(){t.errorCode_=Gs.NETWORK_ERROR,n()}),t.xhr_.addEventListener("load",function(){n()})})}return e.prototype.send=function(t,n,r,i){if(this.sent_)throw Jh("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(var s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_},e.prototype.getErrorCode=function(){if(!this.sent_)throw Jh("cannot .getErrorCode() before sending");return this.errorCode_},e.prototype.getStatus=function(){if(!this.sent_)throw Jh("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}},e.prototype.getResponseText=function(){if(!this.sent_)throw Jh("cannot .getResponseText() before sending");return this.xhr_.responseText},e.prototype.abort=function(){this.xhr_.abort()},e.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},e.prototype.addUploadProgressListener=function(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)},e.prototype.removeUploadProgressListener=function(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)},e}();function u5(){return new a5}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var c5=function(){function e(){}return e.prototype.createConnection=function(){return u5()},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rr=function(){function e(t,n){this.bucket=t,this.path_=n}return Object.defineProperty(e.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isRoot",{get:function(){return this.path.length===0},enumerable:!1,configurable:!0}),e.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},e.prototype.bucketOnlyServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o"},e.makeFromBucketSpec=function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch{return new e(t,"")}if(r.path==="")return r;throw XQ(t)},e.makeFromUrl=function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";function s(ge){ge.path.charAt(ge.path.length-1)==="/"&&(ge.path_=ge.path_.slice(0,-1))}var a="(/(.*))?$",c=new RegExp("^gs://"+i+a,"i"),l={bucket:1,path:3};function h(ge){ge.path_=decodeURIComponent(ge.path)}for(var d="v[A-Za-z0-9_]+",v=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",y=new RegExp("^https?://"+v+"/"+d+"/b/"+i+"/o"+m,"i"),w={bucket:1,path:3},E=n===rL?"(?:storage.googleapis.com|storage.cloud.google.com)":n,T="([^?#]*)",A=new RegExp("^https?://"+E+"/"+i+"/"+T,"i"),P={bucket:1,path:2},O=[{regex:c,indices:l,postModify:s},{regex:y,indices:w,postModify:h},{regex:A,indices:P,postModify:h}],H=0;H<O.length;H++){var K=O[H],U=K.regex.exec(t);if(U){var ie=U[K.indices.bucket],F=U[K.indices.path];F||(F=""),r=new e(ie,F),K.postModify(r);break}}if(r==null)throw YQ(t);return r},e}(),l5=function(){function e(t){this.promise_=Promise.reject(t)}return e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(t){},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f5(e,t,n){var r=1,i=null,s=!1,a=0;function c(){return a===2}var l=!1;function h(){for(var w=[],E=0;E<arguments.length;E++)w[E]=arguments[E];l||(l=!0,t.apply(null,w))}function d(w){i=setTimeout(function(){i=null,e(v,c())},w)}function v(w){for(var E=[],T=1;T<arguments.length;T++)E[T-1]=arguments[T];if(!l){if(w){h.call.apply(h,Ne([null,w],E));return}var A=c()||s;if(A){h.call.apply(h,Ne([null,w],E));return}r<64&&(r*=2);var P;a===1?(a=2,P=0):P=(r+Math.random())*1e3,d(P)}}var m=!1;function y(w){m||(m=!0,!l&&(i!==null?(w||(a=2),clearTimeout(i),d(0)):w||(a=1)))}return d(0),setTimeout(function(){s=!0,y(!0)},n),y}function h5(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d5(e){return e!==void 0}function p5(e){return typeof e=="function"}function v5(e){return typeof e=="object"&&!Array.isArray(e)}function Sv(e){return typeof e=="string"||e instanceof String}function oR(e){return pE()&&e instanceof Blob}function pE(){return typeof Blob<"u"}function yw(e,t,n,r){if(r<t)throw au("Invalid value for '"+e+"'. Expected "+t+" or greater.");if(r>n)throw au("Invalid value for '"+e+"'. Expected "+n+" or less.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xo(e,t){var n=t.match(/^(\w+):\/\/.+/),r=n==null?void 0:n[1],i=t;return r==null&&(i="https://"+t),i+"/v0"+e}function dL(e){var t=encodeURIComponent,n="?";for(var r in e)if(e.hasOwnProperty(r)){var i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var g5=function(){function e(t,n,r,i,s,a,c,l,h,d,v){var m=this;this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s.slice(),this.additionalRetryCodes_=a.slice(),this.callback_=c,this.errorCallback_=l,this.progressCallback_=d,this.timeout_=h,this.pool_=v,this.promise_=new Promise(function(y,w){m.resolve_=y,m.reject_=w,m.start_()})}return e.prototype.start_=function(){var t=this;function n(i,s){if(s){i(!1,new Zh(!1,null,!0));return}var a=t.pool_.createConnection();t.pendingConnection_=a;function c(l){var h=l.loaded,d=l.lengthComputable?l.total:-1;t.progressCallback_!==null&&t.progressCallback_(h,d)}t.progressCallback_!==null&&a.addUploadProgressListener(c),a.send(t.url_,t.method_,t.body_,t.headers_).then(function(){t.progressCallback_!==null&&a.removeUploadProgressListener(c),t.pendingConnection_=null;var l=a.getErrorCode()===Gs.NO_ERROR,h=a.getStatus();if(!l||t.isRetryStatusCode_(h)){var d=a.getErrorCode()===Gs.ABORT;i(!1,new Zh(!1,null,d));return}var v=t.successCodes_.indexOf(h)!==-1;i(!0,new Zh(v,a))})}function r(i,s){var a=t.resolve_,c=t.reject_,l=s.connection;if(s.wasSuccessCode)try{var h=t.callback_(l,l.getResponseText());d5(h)?a(h):a()}catch(v){c(v)}else if(l!==null){var d=dE();d.serverResponse=l.getResponseText(),t.errorCallback_?c(t.errorCallback_(l,d)):c(d)}else if(s.canceled){var d=t.appDelete_?aL():oL();c(d)}else{var d=QQ();c(d)}}this.canceled_?r(!1,new Zh(!1,null,!0)):this.backoffId_=f5(n,r,this.timeout_)},e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&h5(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()},e.prototype.isRetryStatusCode_=function(t){var n=t>=500&&t<600,r=[408,429],i=r.indexOf(t)!==-1,s=this.additionalRetryCodes_.indexOf(t)!==-1;return n||i||s},e}(),Zh=function(){function e(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}return e}();function m5(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function y5(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function _5(e,t){t&&(e["X-Firebase-GMPID"]=t)}function w5(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function b5(e,t,n,r,i,s){var a=dL(e.urlParams),c=e.url+a,l=Object.assign({},e.headers);return _5(l,t),m5(l,n),y5(l,s),w5(l,r),new g5(c,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E5(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function T5(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=E5();if(n!==void 0){for(var r=new n,i=0;i<e.length;i++)r.append(e[i]);return r.getBlob()}else{if(pE())return new Blob(e);throw new xt("unsupported-environment","This browser doesn't seem to support creating Blobs")}}function I5(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vE=function(){function e(t,n){var r=0,i="";oR(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return e.prototype.size=function(){return this.size_},e.prototype.type=function(){return this.type_},e.prototype.slice=function(t,n){if(oR(this.data_)){var r=this.data_,i=I5(r,t,n);return i===null?null:new e(i)}else{var s=new Uint8Array(this.data_.buffer,t,n-t);return new e(s,!0)}},e.getBlob=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(pE()){var r=t.map(function(l){return l instanceof e?l.data_:l});return new e(T5.apply(null,r))}else{var i=t.map(function(l){return Sv(l)?cL(kr.RAW,l).data:l.data_}),s=0;i.forEach(function(l){s+=l.byteLength});var a=new Uint8Array(s),c=0;return i.forEach(function(l){for(var h=0;h<l.length;h++)a[c++]=l[h]}),new e(a,!0)}},e.prototype.uploadData=function(){return this.data_},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gE(e){var t;try{t=JSON.parse(e)}catch{return null}return v5(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S5(e){if(e.length===0)return null;var t=e.lastIndexOf("/");if(t===-1)return"";var n=e.slice(0,t);return n}function C5(e,t){var n=t.split("/").filter(function(r){return r.length>0}).join("/");return e.length===0?n:e+"/"+n}function pL(e){var t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A5(e,t){return t}var On=function(){function e(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||A5}return e}(),ed=null;function k5(e){return!Sv(e)||e.length<2?e:pL(e)}function Cv(){if(ed)return ed;var e=[];e.push(new On("bucket")),e.push(new On("generation")),e.push(new On("metageneration")),e.push(new On("name","fullPath",!0));function t(s,a){return k5(a)}var n=new On("name");n.xform=t,e.push(n);function r(s,a){return a!==void 0?Number(a):a}var i=new On("size");return i.xform=r,e.push(i),e.push(new On("timeCreated")),e.push(new On("updated")),e.push(new On("md5Hash",null,!0)),e.push(new On("cacheControl",null,!0)),e.push(new On("contentDisposition",null,!0)),e.push(new On("contentEncoding",null,!0)),e.push(new On("contentLanguage",null,!0)),e.push(new On("contentType",null,!0)),e.push(new On("metadata","customMetadata",!0)),ed=e,ed}function R5(e,t){function n(){var r=e.bucket,i=e.fullPath,s=new Rr(r,i);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function N5(e,t,n){var r={};r.type="file";for(var i=n.length,s=0;s<i;s++){var a=n[s];r[a.local]=a.xform(r,t[a.server])}return R5(r,e),r}function vL(e,t,n){var r=gE(t);if(r===null)return null;var i=r;return N5(e,i,n)}function P5(e,t,n){var r=gE(t);if(r===null||!Sv(r.downloadTokens))return null;var i=r.downloadTokens;if(i.length===0)return null;var s=encodeURIComponent,a=i.split(","),c=a.map(function(l){var h=e.bucket,d=e.fullPath,v="/b/"+s(h)+"/o/"+s(d),m=Xo(v,n),y=dL({alt:"media",token:l});return m+y});return c[0]}function mE(e,t){for(var n={},r=t.length,i=0;i<r;i++){var s=t[i];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sR="prefixes",aR="items";function O5(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[sR])for(var i=0,s=n[sR];i<s.length;i++){var a=s[i],c=a.replace(/\/$/,""),l=e._makeStorageReference(new Rr(t,c));r.prefixes.push(l)}if(n[aR])for(var h=0,d=n[aR];h<d.length;h++){var v=d[h],l=e._makeStorageReference(new Rr(t,v.name));r.items.push(l)}return r}function D5(e,t,n){var r=gE(n);if(r===null)return null;var i=r;return O5(e,t,i)}var io=function(){function e(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}return e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ei(e){if(!e)throw dE()}function Av(e,t){function n(r,i){var s=vL(e,i,t);return Ei(s!==null),s}return n}function x5(e,t){function n(r,i){var s=D5(e,t,i);return Ei(s!==null),s}return n}function L5(e,t){function n(r,i){var s=vL(e,i,t);return Ei(s!==null),P5(s,i,e.host)}return n}function sc(e){function t(n,r){var i;return n.getStatus()===401?n.getResponseText().includes("Firebase App Check token is invalid")?i=zQ():i=GQ():n.getStatus()===402?i=WQ(e.bucket):n.getStatus()===403?i=$Q(e.path):i=r,i.serverResponse=r.serverResponse,i}return t}function kv(e){var t=sc(e);function n(r,i){var s=t(r,i);return r.getStatus()===404&&(s=KQ(e.path)),s.serverResponse=i.serverResponse,s}return n}function gL(e,t,n){var r=t.fullServerUrl(),i=Xo(r,e.host),s="GET",a=e.maxOperationRetryTime,c=new io(i,s,Av(e,n),a);return c.errorHandler=kv(t),c}function M5(e,t,n,r,i){var s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n&&n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);var a=t.bucketOnlyServerUrl(),c=Xo(a,e.host),l="GET",h=e.maxOperationRetryTime,d=new io(c,l,x5(e,t.bucket),h);return d.urlParams=s,d.errorHandler=sc(t),d}function F5(e,t,n){var r=t.fullServerUrl(),i=Xo(r,e.host),s="GET",a=e.maxOperationRetryTime,c=new io(i,s,L5(e,n),a);return c.errorHandler=kv(t),c}function U5(e,t,n,r){var i=t.fullServerUrl(),s=Xo(i,e.host),a="PATCH",c=mE(n,r),l={"Content-Type":"application/json; charset=utf-8"},h=e.maxOperationRetryTime,d=new io(s,a,Av(e,r),h);return d.headers=l,d.body=c,d.errorHandler=kv(t),d}function j5(e,t){var n=t.fullServerUrl(),r=Xo(n,e.host),i="DELETE",s=e.maxOperationRetryTime;function a(l,h){}var c=new io(r,i,a,s);return c.successCodes=[200,204],c.errorHandler=kv(t),c}function V5(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function mL(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=V5(null,t)),r}function B5(e,t,n,r,i){var s=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function c(){for(var O="",H=0;H<2;H++)O=O+Math.random().toString().slice(2);return O}var l=c();a["Content-Type"]="multipart/related; boundary="+l;var h=mL(t,r,i),d=mE(h,n),v="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+h.contentType+`\r
\r
`,m=`\r
--`+l+"--",y=vE.getBlob(v,r,m);if(y===null)throw sL();var w={name:h.fullPath},E=Xo(s,e.host),T="POST",A=e.maxUploadRetryTime,P=new io(E,T,Av(e,n),A);return P.urlParams=w,P.headers=a,P.body=y.uploadData(),P.errorHandler=sc(t),P}var lp=function(){function e(t,n,r,i){this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null}return e}();function yE(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch{Ei(!1)}var r=t||["active"];return Ei(!!n&&r.indexOf(n)!==-1),n}function q5(e,t,n,r,i){var s=t.bucketOnlyServerUrl(),a=mL(t,r,i),c={name:a.fullPath},l=Xo(s,e.host),h="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":""+r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},v=mE(a,n),m=e.maxUploadRetryTime;function y(E){yE(E);var T;try{T=E.getResponseHeader("X-Goog-Upload-URL")}catch{Ei(!1)}return Ei(Sv(T)),T}var w=new io(l,h,y,m);return w.urlParams=c,w.headers=d,w.body=v,w.errorHandler=sc(t),w}function H5(e,t,n,r){var i={"X-Goog-Upload-Command":"query"};function s(h){var d=yE(h,["active","final"]),v=null;try{v=h.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Ei(!1)}v||Ei(!1);var m=Number(v);return Ei(!isNaN(m)),new lp(m,r.size(),d==="final")}var a="POST",c=e.maxUploadRetryTime,l=new io(n,a,s,c);return l.headers=i,l.errorHandler=sc(t),l}var uR=256*1024;function K5(e,t,n,r,i,s,a,c){var l=new lp(0,0);if(a?(l.current=a.current,l.total=a.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw ZQ();var h=l.total-l.current,d=h;i>0&&(d=Math.min(d,i));var v=l.current,m=v+d,y=d===h?"upload, finalize":"upload",w={"X-Goog-Upload-Command":y,"X-Goog-Upload-Offset":""+l.current},E=r.slice(v,m);if(E===null)throw sL();function T(H,K){var U=yE(H,["active","final"]),ie=l.current+d,F=r.size(),ge;return U==="final"?ge=Av(t,s)(H,K):ge=null,new lp(ie,F,U==="final",ge)}var A="POST",P=t.maxUploadRetryTime,O=new io(n,A,T,P);return O.headers=w,O.body=E.uploadData(),O.progressCallback=c||null,O.errorHandler=sc(e),O}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var W5=function(){function e(t,n,r){var i=p5(t)||n!=null||r!=null;if(i)this.next=t,this.error=n,this.complete=r;else{var s=t;this.next=s.next,this.error=s.error,this.complete=s.complete}}return e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ga(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];Promise.resolve().then(function(){return e.apply(void 0,t)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yL=function(){function e(t,n,r){var i=this;r===void 0&&(r=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=r,this._mappings=Cv(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(s){i._request=void 0,i._chunkMultiplier=1,s._codeEquals("canceled")?(i._needToFetchStatus=!0,i.completeTransitions_()):(i._error=s,i._transition("error"))},this._metadataErrorHandler=function(s){i._request=void 0,s._codeEquals("canceled")?i.completeTransitions_():(i._error=s,i._transition("error"))},this._promise=new Promise(function(s,a){i._resolve=s,i._reject=a,i._start()}),this._promise.then(null,function(){})}return e.prototype._makeProgressCallback=function(){var t=this,n=this._transferred;return function(r){return t._updateProgress(n+r)}},e.prototype._shouldDoResumable=function(t){return t.size()>256*1024},e.prototype._start=function(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},e.prototype._resolveToken=function(t){var n=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(function(r){var i=r[0],s=r[1];switch(n._state){case"running":t(i,s);break;case"canceling":n._transition("canceled");break;case"pausing":n._transition("paused");break}})},e.prototype._createResumable=function(){var t=this;this._resolveToken(function(n,r){var i=q5(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),s=t._ref.storage._makeRequest(i,n,r);t._request=s,s.getPromise().then(function(a){t._request=void 0,t._uploadUrl=a,t._needToFetchStatus=!1,t.completeTransitions_()},t._errorHandler)})},e.prototype._fetchStatus=function(){var t=this,n=this._uploadUrl;this._resolveToken(function(r,i){var s=H5(t._ref.storage,t._ref._location,n,t._blob),a=t._ref.storage._makeRequest(s,r,i);t._request=a,a.getPromise().then(function(c){c=c,t._request=void 0,t._updateProgress(c.current),t._needToFetchStatus=!1,c.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()},t._errorHandler)})},e.prototype._continueUpload=function(){var t=this,n=uR*this._chunkMultiplier,r=new lp(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken(function(s,a){var c;try{c=K5(t._ref._location,t._ref.storage,i,t._blob,n,t._mappings,r,t._makeProgressCallback())}catch(h){t._error=h,t._transition("error");return}var l=t._ref.storage._makeRequest(c,s,a);t._request=l,l.getPromise().then(function(h){t._increaseMultiplier(),t._request=void 0,t._updateProgress(h.current),h.finalized?(t._metadata=h.metadata,t._transition("success")):t.completeTransitions_()},t._errorHandler)})},e.prototype._increaseMultiplier=function(){var t=uR*this._chunkMultiplier;t<32*1024*1024&&(this._chunkMultiplier*=2)},e.prototype._fetchMetadata=function(){var t=this;this._resolveToken(function(n,r){var i=gL(t._ref.storage,t._ref._location,t._mappings),s=t._ref.storage._makeRequest(i,n,r);t._request=s,s.getPromise().then(function(a){t._request=void 0,t._metadata=a,t._transition("success")},t._metadataErrorHandler)})},e.prototype._oneShotUpload=function(){var t=this;this._resolveToken(function(n,r){var i=B5(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),s=t._ref.storage._makeRequest(i,n,r);t._request=s,s.getPromise().then(function(a){t._request=void 0,t._metadata=a,t._updateProgress(t._blob.size()),t._transition("success")},t._errorHandler)})},e.prototype._updateProgress=function(t){var n=this._transferred;this._transferred=t,this._transferred!==n&&this._notifyObservers()},e.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":this._state=t,this._request!==void 0&&this._request.cancel();break;case"pausing":this._state=t,this._request!==void 0&&this._request.cancel();break;case"running":var n=this._state==="paused";this._state=t,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=oL(),this._state=t,this._notifyObservers();break;case"error":this._state=t,this._notifyObservers();break;case"success":this._state=t,this._notifyObservers();break}},e.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}},Object.defineProperty(e.prototype,"snapshot",{get:function(){var t=Gy(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),e.prototype.on=function(t,n,r,i){var s=this,a=new W5(n,r,i);return this._addObserver(a),function(){s._removeObserver(a)}},e.prototype.then=function(t,n){return this._promise.then(t,n)},e.prototype.catch=function(t){return this.then(null,t)},e.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},e.prototype._removeObserver=function(t){var n=this._observers.indexOf(t);n!==-1&&this._observers.splice(n,1)},e.prototype._notifyObservers=function(){var t=this;this._finishPromise();var n=this._observers.slice();n.forEach(function(r){t._notifyObserver(r)})},e.prototype._finishPromise=function(){if(this._resolve!==void 0){var t=!0;switch(Gy(this._state)){case Mn.SUCCESS:Ga(this._resolve.bind(null,this.snapshot))();break;case Mn.CANCELED:case Mn.ERROR:var n=this._reject;Ga(n.bind(null,this._error))();break;default:t=!1;break}t&&(this._resolve=void 0,this._reject=void 0)}},e.prototype._notifyObserver=function(t){var n=Gy(this._state);switch(n){case Mn.RUNNING:case Mn.PAUSED:t.next&&Ga(t.next.bind(t,this.snapshot))();break;case Mn.SUCCESS:t.complete&&Ga(t.complete.bind(t))();break;case Mn.CANCELED:case Mn.ERROR:t.error&&Ga(t.error.bind(t,this._error))();break;default:t.error&&Ga(t.error.bind(t,this._error))()}},e.prototype.resume=function(){var t=this._state==="paused"||this._state==="pausing";return t&&this._transition("running"),t},e.prototype.pause=function(){var t=this._state==="running";return t&&this._transition("pausing"),t},e.prototype.cancel=function(){var t=this._state==="running"||this._state==="pausing";return t&&this._transition("canceling"),t},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rv=function(){function e(t,n){this._service=t,n instanceof Rr?this._location=n:this._location=Rr.makeFromUrl(n,t.host)}return e.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},e.prototype._newRef=function(t,n){return new e(t,n)},Object.defineProperty(e.prototype,"root",{get:function(){var t=new Rr(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return pL(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=S5(this._location.path);if(t===null)return null;var n=new Rr(this._location.bucket,t);return new e(this._service,n)},enumerable:!1,configurable:!0}),e.prototype._throwIfRoot=function(t){if(this._location.path==="")throw uL(t)},e}();function G5(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new yL(e,new vE(t),n)}function z5(e){var t={prefixes:[],items:[]};return _L(e,t).then(function(){return t})}function _L(e,t,n){return k(this,void 0,void 0,function(){var r,i,s,a;return C(this,function(c){switch(c.label){case 0:return r={pageToken:n},[4,wL(e,r)];case 1:return i=c.sent(),(s=t.prefixes).push.apply(s,i.prefixes),(a=t.items).push.apply(a,i.items),i.nextPageToken==null?[3,3]:[4,_L(e,t,i.nextPageToken)];case 2:c.sent(),c.label=3;case 3:return[2]}})})}function wL(e,t){return k(this,void 0,void 0,function(){var n,r;return C(this,function(i){switch(i.label){case 0:return t!=null&&typeof t.maxResults=="number"&&yw("options.maxResults",1,1e3,t.maxResults),n=t||{},r=M5(e.storage,e._location,"/",n.pageToken,n.maxResults),[4,e.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}})})}function $5(e){return k(this,void 0,void 0,function(){var t;return C(this,function(n){switch(n.label){case 0:return e._throwIfRoot("getMetadata"),t=gL(e.storage,e._location,Cv()),[4,e.storage.makeRequestWithTokens(t)];case 1:return[2,n.sent().getPromise()]}})})}function Q5(e,t){return k(this,void 0,void 0,function(){var n;return C(this,function(r){switch(r.label){case 0:return e._throwIfRoot("updateMetadata"),n=U5(e.storage,e._location,t,Cv()),[4,e.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}})})}function Y5(e){return k(this,void 0,void 0,function(){var t;return C(this,function(n){switch(n.label){case 0:return e._throwIfRoot("getDownloadURL"),t=F5(e.storage,e._location,Cv()),[4,e.storage.makeRequestWithTokens(t)];case 1:return[2,n.sent().getPromise().then(function(r){if(r===null)throw e5();return r})]}})})}function X5(e){return k(this,void 0,void 0,function(){var t;return C(this,function(n){switch(n.label){case 0:return e._throwIfRoot("deleteObject"),t=j5(e.storage,e._location),[4,e.storage.makeRequestWithTokens(t)];case 1:return[2,n.sent().getPromise()]}})})}function bL(e,t){var n=C5(e._location.path,t),r=new Rr(e._location.bucket,n);return new Rv(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _w(e){return/^[A-Za-z]+:\/\//.test(e)}function J5(e,t){return new Rv(e,t)}function EL(e,t){if(e instanceof Nv){var n=e;if(n._bucket==null)throw JQ();var r=new Rv(n,n._bucket);return t!=null?EL(r,t):r}else return t!==void 0?bL(e,t):e}function Z5(e,t){if(t&&_w(t)){if(e instanceof Nv)return J5(e,t);throw au("To use ref(service, url), the first argument must be a Storage instance.")}else return EL(e,t)}function cR(e,t){var n=t==null?void 0:t[iL];return n==null?null:Rr.makeFromBucketSpec(n,e)}function eY(e,t,n,r){r===void 0&&(r={}),e.host="http://"+t+":"+n;var i=r.mockUserToken;i&&(e._overrideAuthToken=typeof i=="string"?i:Xw(i,e.app.options.projectId))}var Nv=function(){function e(t,n,r,i,s,a){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._pool=i,this._url=s,this._firebaseVersion=a,this._bucket=null,this._host=rL,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=qQ,this._maxUploadRetryTime=HQ,this._requests=new Set,s!=null?this._bucket=Rr.makeFromBucketSpec(s,this._host):this._bucket=cR(this._host,this.app.options)}return Object.defineProperty(e.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,this._url!=null?this._bucket=Rr.makeFromBucketSpec(this._url,t):this._bucket=cR(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){yw("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){yw("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),e.prototype._getAuthToken=function(){return k(this,void 0,void 0,function(){var t,n;return C(this,function(r){switch(r.label){case 0:return this._overrideAuthToken?[2,this._overrideAuthToken]:(t=this._authProvider.getImmediate({optional:!0}),t?[4,t.getToken()]:[3,2]);case 1:if(n=r.sent(),n!==null)return[2,n.accessToken];r.label=2;case 2:return[2,null]}})})},e.prototype._getAppCheckToken=function(){return k(this,void 0,void 0,function(){var t,n;return C(this,function(r){switch(r.label){case 0:return t=this._appCheckProvider.getImmediate({optional:!0}),t?[4,t.getToken()]:[3,2];case 1:return n=r.sent(),[2,n.token];case 2:return[2,null]}})})},e.prototype._delete=function(){return this._deleted||(this._deleted=!0,this._requests.forEach(function(t){return t.cancel()}),this._requests.clear()),Promise.resolve()},e.prototype._makeStorageReference=function(t){return new Rv(this,t)},e.prototype._makeRequest=function(t,n,r){var i=this;if(this._deleted)return new l5(aL());var s=b5(t,this._appId,n,r,this._pool,this._firebaseVersion);return this._requests.add(s),s.getPromise().then(function(){return i._requests.delete(s)},function(){return i._requests.delete(s)}),s},e.prototype.makeRequestWithTokens=function(t){return k(this,void 0,void 0,function(){var n,r,i;return C(this,function(s){switch(s.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return n=s.sent(),r=n[0],i=n[1],[2,this._makeRequest(t,r,i)]}})})},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tY(e,t,n){return e=Re(e),G5(e,t,n)}function nY(e){return e=Re(e),$5(e)}function rY(e,t){return e=Re(e),Q5(e,t)}function iY(e,t){return e=Re(e),wL(e,t)}function oY(e){return e=Re(e),z5(e)}function sY(e){return e=Re(e),Y5(e)}function aY(e){return e=Re(e),X5(e)}function lR(e,t){return e=Re(e),Z5(e,t)}function uY(e,t){return bL(e,t)}function cY(e,t,n,r){r===void 0&&(r={}),eY(e,t,n,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var td=function(){function e(t,n,r){this._delegate=t,this.task=n,this.ref=r}return Object.defineProperty(e.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fR=function(){function e(t,n){this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(e.prototype,"snapshot",{get:function(){return new td(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),e.prototype.then=function(t,n){var r=this;return this._delegate.then(function(i){if(t)return t(new td(i,r,r._ref))},n)},e.prototype.on=function(t,n,r,i){var s=this,a=void 0;return n&&(typeof n=="function"?a=function(c){return n(new td(c,s,s._ref))}:a={next:n.next?function(c){return n.next(new td(c,s,s._ref))}:void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(t,a,r||void 0,i||void 0)},e}(),hR=function(){function e(t,n){this._delegate=t,this._service=n}return Object.defineProperty(e.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map(function(n){return new Jl(n,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){var t=this;return this._delegate.items.map(function(n){return new Jl(n,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jl=function(){function e(t,n){this._delegate=t,this.storage=n}return Object.defineProperty(e.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return this._delegate.toString()},e.prototype.child=function(t){var n=uY(this._delegate,t);return new e(n,this.storage)},Object.defineProperty(e.prototype,"root",{get:function(){return new e(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t==null?null:new e(t,this.storage)},enumerable:!1,configurable:!0}),e.prototype.put=function(t,n){return this._throwIfRoot("put"),new fR(tY(this._delegate,t,n),this)},e.prototype.putString=function(t,n,r){n===void 0&&(n=kr.RAW),this._throwIfRoot("putString");var i=cL(n,t),s=me({},r);return s.contentType==null&&i.contentType!=null&&(s.contentType=i.contentType),new fR(new yL(this._delegate,new vE(i.data,!0),s),this)},e.prototype.listAll=function(){var t=this;return oY(this._delegate).then(function(n){return new hR(n,t.storage)})},e.prototype.list=function(t){var n=this;return iY(this._delegate,t||void 0).then(function(r){return new hR(r,n.storage)})},e.prototype.getMetadata=function(){return nY(this._delegate)},e.prototype.updateMetadata=function(t){return rY(this._delegate,t)},e.prototype.getDownloadURL=function(){return sY(this._delegate)},e.prototype.delete=function(){return this._throwIfRoot("delete"),aY(this._delegate)},e.prototype._throwIfRoot=function(t){if(this._delegate._location.path==="")throw uL(t)},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lY=function(){function e(t,n){this.app=t,this._delegate=n}return Object.defineProperty(e.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),e.prototype.ref=function(t){if(_w(t))throw au("ref() expected a child path but got a URL, use refFromURL instead.");return new Jl(lR(this._delegate,t),this)},e.prototype.refFromURL=function(t){if(!_w(t))throw au("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Rr.makeFromUrl(t,this._delegate.host)}catch{throw au("refFromUrl() expected a valid full URL but got an invalid one.")}return new Jl(lR(this._delegate,t),this)},e.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},e.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},e.prototype.useEmulator=function(t,n,r){r===void 0&&(r={}),cY(this._delegate,t,n,r)},e}(),fY="@firebase/storage",hY="0.7.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dY="storage";function pY(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal"),a=new lY(r,new Nv(r,i,s,new c5,n,ce.SDK_VERSION));return a}function vY(e){var t={TaskState:Mn,TaskEvent:s5,StringFormat:kr,Storage:Nv,Reference:Jl};e.INTERNAL.registerComponent(new In(dY,pY,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion(fY,hY)}vY(ce);var gY="@firebase/performance",TL="0.4.18";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var IL=TL,mY="FB-PERF-TRACE-START",yY="FB-PERF-TRACE-STOP",ww="FB-PERF-TRACE-MEASURE",SL="_wt_",CL="_fp",AL="_fcp",kL="_fid",RL="@firebase/performance/config",NL="@firebase/performance/configexpire",_Y="performance",PL="Performance";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nn,wY=(nn={},nn["trace started"]="Trace {$traceName} was started before.",nn["trace stopped"]="Trace {$traceName} is not running.",nn["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",nn["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",nn["no window"]="Window is not available.",nn["no app id"]="App id is not available.",nn["no project id"]="Project id is not available.",nn["no api key"]="Api key is not available.",nn["invalid cc log"]="Attempted to queue invalid cc event",nn["FB not default"]="Performance can only start when Firebase app instance is the default one.",nn["RC response not ok"]="RC response is not ok",nn["invalid attribute name"]="Attribute name {$attributeName} is invalid.",nn["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",nn["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",nn["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",nn),gn=new to(_Y,PL,wY);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zi=new sa(PL);Zi.logLevel=Le.INFO;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zy,OL,bn=function(){function e(t){if(this.window=t,!t)throw gn.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}return e.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},e.prototype.mark=function(t){!this.performance||!this.performance.mark||this.performance.mark(t)},e.prototype.measure=function(t,n,r){!this.performance||!this.performance.measure||this.performance.measure(t,n,r)},e.prototype.getEntriesByType=function(t){return!this.performance||!this.performance.getEntriesByType?[]:this.performance.getEntriesByType(t)},e.prototype.getEntriesByName=function(t){return!this.performance||!this.performance.getEntriesByName?[]:this.performance.getEntriesByName(t)},e.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},e.prototype.requiredApisAvailable=function(){return!fetch||!Promise||!this.navigator||!this.navigator.cookieEnabled?(Zi.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1):nf()?!0:(Zi.info("IndexedDB is not supported by current browswer"),!1)},e.prototype.setupObserver=function(t,n){if(this.PerformanceObserver){var r=new this.PerformanceObserver(function(i){for(var s=0,a=i.getEntries();s<a.length;s++){var c=a[s];n(c)}});r.observe({entryTypes:[t]})}},e.getInstance=function(){return zy===void 0&&(zy=new e(OL)),zy},e}();function bY(e){OL=e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dR(e,t){var n=e.length-t.length;if(n<0||n>1)throw gn.create("invalid String merger input");for(var r=[],i=0;i<e.length;i++)r.push(e.charAt(i)),t.length>i&&r.push(t.charAt(i));return r.join("")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $y,jt=function(){function e(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=dR("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=dR("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return e.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw gn.create("no app id");return t},e.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw gn.create("no project id");return t},e.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw gn.create("no api key");return t},e.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},e.getInstance=function(){return $y===void 0&&($y=new e),$y},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var DL;function EY(){var e=jt.getInstance().installationsService.getId();return e.then(function(t){DL=t}),e}function _E(){return DL}function TY(){var e=jt.getInstance().installationsService.getToken();return e.then(function(t){}),e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var uu;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.VISIBLE=1]="VISIBLE",e[e.HIDDEN=2]="HIDDEN"})(uu||(uu={}));var IY=["firebase_","google_","ga_"],SY=new RegExp("^[a-zA-Z]\\w*$"),CY=40,AY=100;function kY(){var e=bn.getInstance().navigator;return"serviceWorker"in e?e.serviceWorker.controller?2:3:1}function xL(){var e=bn.getInstance().document,t=e.visibilityState;switch(t){case"visible":return uu.VISIBLE;case"hidden":return uu.HIDDEN;default:return uu.UNKNOWN}}function RY(){var e=bn.getInstance().navigator,t=e.connection,n=t&&t.effectiveType;switch(n){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function NY(e){if(e.length===0||e.length>CY)return!1;var t=IY.some(function(n){return e.startsWith(n)});return!t&&!!e.match(SY)}function PY(e){return e.length!==0&&e.length<=AY}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var OY="0.0.1",DY={loggingEnabled:!0},xY="FIREBASE_INSTALLATIONS_AUTH";function LY(e){var t=MY();return t?(pR(t),Promise.resolve()):jY(e).then(pR).then(function(n){return FY(n)},function(){})}function MY(){var e=bn.getInstance().localStorage;if(e){var t=e.getItem(NL);if(!(!t||!VY(t))){var n=e.getItem(RL);if(n)try{var r=JSON.parse(n);return r}catch{return}}}}function FY(e){var t=bn.getInstance().localStorage;!e||!t||(t.setItem(RL,JSON.stringify(e)),t.setItem(NL,String(Date.now()+jt.getInstance().configTimeToLive*60*60*1e3)))}var UY="Could not fetch config, will use default configs";function jY(e){return TY().then(function(t){var n=jt.getInstance().getProjectId(),r="https://firebaseremoteconfig.googleapis.com/v1/projects/"+n+"/namespaces/fireperf:fetch?key="+jt.getInstance().getApiKey(),i=new Request(r,{method:"POST",headers:{Authorization:xY+" "+t},body:JSON.stringify({app_instance_id:e,app_instance_id_token:t,app_id:jt.getInstance().getAppId(),app_version:IL,sdk_version:OY})});return fetch(i).then(function(s){if(s.ok)return s.json();throw gn.create("RC response not ok")})}).catch(function(){Zi.info(UY)})}function pR(e){if(!e)return e;var t=jt.getInstance(),n=e.entries||{};return n.fpr_enabled!==void 0?t.loggingEnabled=String(n.fpr_enabled)==="true":t.loggingEnabled=DY.loggingEnabled,n.fpr_log_source&&(t.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(t.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(t.transportKey=n.fpr_log_transport_key),n.fpr_vc_network_request_sampling_rate!==void 0&&(t.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),n.fpr_vc_trace_sampling_rate!==void 0&&(t.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),t.logTraceAfterSampling=vR(t.tracesSamplingRate),t.logNetworkAfterSampling=vR(t.networkRequestsSamplingRate),e}function VY(e){return Number(e)>Date.now()}function vR(e){return Math.random()<=e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wE=1,Qy;function LL(){return wE=2,Qy=Qy||qY(),Qy}function BY(){return wE===3}function qY(){return HY().then(function(){return EY()}).then(function(e){return LY(e)}).then(function(){return gR()},function(){return gR()})}function HY(){var e=bn.getInstance().document;return new Promise(function(t){if(e&&e.readyState!=="complete"){var n=function(){e.readyState==="complete"&&(e.removeEventListener("readystatechange",n),t())};e.addEventListener("readystatechange",n)}else t()})}function gR(){wE=3}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bE=10*1e3,KY=5.5*1e3,ML=3,WY=1e3,fp=ML,Fo=[],mR=!1;function GY(){mR||(Pv(KY),mR=!0)}function Pv(e){setTimeout(function(){if(fp!==0){if(!Fo.length)return Pv(bE);zY()}},e)}function zY(){var e=Fo.splice(0,WY),t=e.map(function(r){return{source_extension_json_proto3:r.message,event_time_ms:String(r.eventTime)}}),n={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:jt.getInstance().logSource,log_event:t};$Y(n,e).catch(function(){Fo=Ne(Ne([],e),Fo),fp--,Zi.info("Tries left: "+fp+"."),Pv(bE)})}function $Y(e,t){return QY(e).then(function(n){return n.ok||Zi.info("Call to Firebase backend failed."),n.json()}).then(function(n){var r=Number(n.nextRequestWaitMillis),i=bE;isNaN(r)||(i=Math.max(r,i));var s=n.logResponseDetails;Array.isArray(s)&&s.length>0&&s[0].responseAction==="RETRY_REQUEST_LATER"&&(Fo=Ne(Ne([],t),Fo),Zi.info("Retry transport request later.")),fp=ML,Pv(i)})}function QY(e){var t=jt.getInstance().getFlTransportFullUrl();return fetch(t,{method:"POST",body:JSON.stringify(e)})}function YY(e){if(!e.eventTime||!e.message)throw gn.create("invalid cc log");Fo=Ne(Ne([],Fo),[e])}function XY(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=e.apply(void 0,t);YY({message:r,eventTime:Date.now()})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yy;function FL(e,t){Yy||(Yy=XY(ZY)),Yy(e,t)}function nd(e){var t=jt.getInstance();!t.instrumentationEnabled&&e.isAuto||!t.dataCollectionEnabled&&!e.isAuto||bn.getInstance().requiredApisAvailable()&&(e.isAuto&&xL()!==uu.VISIBLE||(BY()?Xy(e):LL().then(function(){return Xy(e)},function(){return Xy(e)})))}function Xy(e){if(_E()){var t=jt.getInstance();!t.loggingEnabled||!t.logTraceAfterSampling||setTimeout(function(){return FL(e,1)},0)}}function JY(e){var t=jt.getInstance();if(t.instrumentationEnabled){var n=e.url,r=t.logEndPointUrl.split("?")[0],i=t.flTransportEndpointUrl.split("?")[0];n===r||n===i||!t.loggingEnabled||!t.logNetworkAfterSampling||setTimeout(function(){return FL(e,0)},0)}}function ZY(e,t){return t===0?eX(e):tX(e)}function eX(e){var t={url:e.url,http_method:e.httpMethod||0,http_response_code:200,response_payload_bytes:e.responsePayloadBytes,client_start_time_us:e.startTimeUs,time_to_response_initiated_us:e.timeToResponseInitiatedUs,time_to_response_completed_us:e.timeToResponseCompletedUs},n={application_info:UL(),network_request_metric:t};return JSON.stringify(n)}function tX(e){var t={name:e.name,is_auto:e.isAuto,client_start_time_us:e.startTimeUs,duration_us:e.durationUs};Object.keys(e.counters).length!==0&&(t.counters=e.counters);var n=e.getAttributes();Object.keys(n).length!==0&&(t.custom_attributes=n);var r={application_info:UL(),trace_metric:t};return JSON.stringify(r)}function UL(){return{google_app_id:jt.getInstance().getAppId(),app_instance_id:_E(),web_app_info:{sdk_version:IL,page_url:bn.getInstance().getUrl(),service_worker_status:kY(),visibility_state:xL(),effective_connection_type:RY()},application_process_state:0}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nX=100,rX="_",iX=[CL,AL,kL];function oX(e,t){return e.length===0||e.length>nX?!1:t&&t.startsWith(SL)&&iX.indexOf(e)>-1||!e.startsWith(rX)}function sX(e){var t=Math.floor(e);return t<e&&Zi.info("Metric value should be an Integer, setting the value as : "+t+"."),t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ml=function(){function e(t,n,r){n===void 0&&(n=!1),this.name=t,this.isAuto=n,this.state=1,this.customAttributes={},this.counters={},this.api=bn.getInstance(),this.randomId=Math.floor(Math.random()*1e6),this.isAuto||(this.traceStartMark=mY+"-"+this.randomId+"-"+this.name,this.traceStopMark=yY+"-"+this.randomId+"-"+this.name,this.traceMeasure=r||ww+"-"+this.randomId+"-"+this.name,r&&this.calculateTraceMetrics())}return e.prototype.start=function(){if(this.state!==1)throw gn.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},e.prototype.stop=function(){if(this.state!==2)throw gn.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),nd(this)},e.prototype.record=function(t,n,r){if(t<=0)throw gn.create("nonpositive trace startTime",{traceName:this.name});if(n<=0)throw gn.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(n*1e3),this.startTimeUs=Math.floor(t*1e3),r&&r.attributes&&(this.customAttributes=me({},r.attributes)),r&&r.metrics)for(var i=0,s=Object.keys(r.metrics);i<s.length;i++){var a=s[i];isNaN(Number(r.metrics[a]))||(this.counters[a]=Number(Math.floor(r.metrics[a])))}nd(this)},e.prototype.incrementMetric=function(t,n){n===void 0&&(n=1),this.counters[t]===void 0?this.putMetric(t,n):this.putMetric(t,this.counters[t]+n)},e.prototype.putMetric=function(t,n){if(oX(t,this.name))this.counters[t]=sX(n);else throw gn.create("invalid custom metric name",{customMetricName:t})},e.prototype.getMetric=function(t){return this.counters[t]||0},e.prototype.putAttribute=function(t,n){var r=NY(t),i=PY(n);if(r&&i){this.customAttributes[t]=n;return}if(!r)throw gn.create("invalid attribute name",{attributeName:t});if(!i)throw gn.create("invalid attribute value",{attributeValue:n})},e.prototype.getAttribute=function(t){return this.customAttributes[t]},e.prototype.removeAttribute=function(t){this.customAttributes[t]!==void 0&&delete this.customAttributes[t]},e.prototype.getAttributes=function(){return me({},this.customAttributes)},e.prototype.setStartTime=function(t){this.startTimeUs=t},e.prototype.setDuration=function(t){this.durationUs=t},e.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),n=t&&t[0];n&&(this.durationUs=Math.floor(n.duration*1e3),this.startTimeUs=Math.floor((n.startTime+this.api.getTimeOrigin())*1e3))},e.createOobTrace=function(t,n,r){var i=bn.getInstance().getUrl();if(i){var s=new e(SL+i,!0),a=Math.floor(bn.getInstance().getTimeOrigin()*1e3);s.setStartTime(a),t&&t[0]&&(s.setDuration(Math.floor(t[0].duration*1e3)),s.putMetric("domInteractive",Math.floor(t[0].domInteractive*1e3)),s.putMetric("domContentLoadedEventEnd",Math.floor(t[0].domContentLoadedEventEnd*1e3)),s.putMetric("loadEventEnd",Math.floor(t[0].loadEventEnd*1e3)));var c="first-paint",l="first-contentful-paint";if(n){var h=n.find(function(v){return v.name===c});h&&h.startTime&&s.putMetric(CL,Math.floor(h.startTime*1e3));var d=n.find(function(v){return v.name===l});d&&d.startTime&&s.putMetric(AL,Math.floor(d.startTime*1e3)),r&&s.putMetric(kL,Math.floor(r*1e3))}nd(s)}},e.createUserTimingTrace=function(t){var n=new e(t,!1,t);nd(n)},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yR(e){var t=e;if(!(!t||t.responseStart===void 0)){var n=bn.getInstance().getTimeOrigin(),r=Math.floor((t.startTime+n)*1e3),i=t.responseStart?Math.floor((t.responseStart-t.startTime)*1e3):void 0,s=Math.floor((t.responseEnd-t.startTime)*1e3),a=t.name&&t.name.split("?")[0],c={url:a,responsePayloadBytes:t.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:s};JY(c)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var aX=5e3;function _R(){_E()&&(setTimeout(function(){return cX()},0),setTimeout(function(){return uX()},0),setTimeout(function(){return lX()},0))}function uX(){for(var e=bn.getInstance(),t=e.getEntriesByType("resource"),n=0,r=t;n<r.length;n++){var i=r[n];yR(i)}e.setupObserver("resource",yR)}function cX(){var e=bn.getInstance(),t=e.getEntriesByType("navigation"),n=e.getEntriesByType("paint");if(e.onFirstInputDelay){var r=setTimeout(function(){ml.createOobTrace(t,n),r=void 0},aX);e.onFirstInputDelay(function(i){r&&(clearTimeout(r),ml.createOobTrace(t,n,i))})}else ml.createOobTrace(t,n)}function lX(){for(var e=bn.getInstance(),t=e.getEntriesByType("measure"),n=0,r=t;n<r.length;n++){var i=r[n];wR(i)}e.setupObserver("measure",wR)}function wR(e){var t=e.name;t.substring(0,ww.length)!==ww&&ml.createUserTimingTrace(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fX=function(){function e(t){this.app=t,bn.getInstance().requiredApisAvailable()&&eb().then(function(n){n&&(GY(),LL().then(_R,_R))}).catch(function(n){Zi.info("Environment doesn't support IndexedDB: "+n)})}return e.prototype.trace=function(t){return new ml(t)},Object.defineProperty(e.prototype,"instrumentationEnabled",{get:function(){return jt.getInstance().instrumentationEnabled},set:function(t){jt.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataCollectionEnabled",{get:function(){return jt.getInstance().dataCollectionEnabled},set:function(t){jt.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hX="[DEFAULT]";function dX(e){var t=function(n,r){if(n.name!==hX)throw gn.create("FB not default");if(typeof window>"u")throw gn.create("no window");return bY(window),jt.getInstance().firebaseAppInstance=n,jt.getInstance().installationsService=r,new fX(n)};e.INTERNAL.registerComponent(new In("performance",function(n){var r=n.getProvider("app").getImmediate(),i=n.getProvider("installations").getImmediate();return t(r,i)},"PUBLIC")),e.registerVersion(gY,TL)}dX(ce);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pX="firebase_id",vX="origin",gX=60*1e3,mX="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",jL="https://www.googletagmanager.com/gtag/js",En;(function(e){e.EVENT="event",e.SET="set",e.CONFIG="config"})(En||(En={}));var bw;(function(e){e.ADD_SHIPPING_INFO="add_shipping_info",e.ADD_PAYMENT_INFO="add_payment_info",e.ADD_TO_CART="add_to_cart",e.ADD_TO_WISHLIST="add_to_wishlist",e.BEGIN_CHECKOUT="begin_checkout",e.CHECKOUT_PROGRESS="checkout_progress",e.EXCEPTION="exception",e.GENERATE_LEAD="generate_lead",e.LOGIN="login",e.PAGE_VIEW="page_view",e.PURCHASE="purchase",e.REFUND="refund",e.REMOVE_FROM_CART="remove_from_cart",e.SCREEN_VIEW="screen_view",e.SEARCH="search",e.SELECT_CONTENT="select_content",e.SELECT_ITEM="select_item",e.SELECT_PROMOTION="select_promotion",e.SET_CHECKOUT_OPTION="set_checkout_option",e.SHARE="share",e.SIGN_UP="sign_up",e.TIMING_COMPLETE="timing_complete",e.VIEW_CART="view_cart",e.VIEW_ITEM="view_item",e.VIEW_ITEM_LIST="view_item_list",e.VIEW_PROMOTION="view_promotion",e.VIEW_SEARCH_RESULTS="view_search_results"})(bw||(bw={}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yX(e,t,n,r,i){return k(this,void 0,void 0,function(){var s,a;return C(this,function(c){switch(c.label){case 0:return i&&i.global?(e(En.EVENT,n,r),[2]):[3,1];case 1:return[4,t];case 2:s=c.sent(),a=me(me({},r),{send_to:s}),e(En.EVENT,n,a),c.label=3;case 3:return[2]}})})}function _X(e,t,n,r){return k(this,void 0,void 0,function(){var i;return C(this,function(s){switch(s.label){case 0:return r&&r.global?(e(En.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,t];case 2:i=s.sent(),e(En.CONFIG,i,{update:!0,screen_name:n}),s.label=3;case 3:return[2]}})})}function wX(e,t,n,r){return k(this,void 0,void 0,function(){var i;return C(this,function(s){switch(s.label){case 0:return r&&r.global?(e(En.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,t];case 2:i=s.sent(),e(En.CONFIG,i,{update:!0,user_id:n}),s.label=3;case 3:return[2]}})})}function bX(e,t,n,r){return k(this,void 0,void 0,function(){var i,s,a,c,l;return C(this,function(h){switch(h.label){case 0:if(!(r&&r.global))return[3,1];for(i={},s=0,a=Object.keys(n);s<a.length;s++)c=a[s],i["user_properties."+c]=n[c];return e(En.SET,i),[2,Promise.resolve()];case 1:return[4,t];case 2:l=h.sent(),e(En.CONFIG,l,{update:!0,user_properties:n}),h.label=3;case 3:return[2]}})})}function EX(e,t){return k(this,void 0,void 0,function(){var n;return C(this,function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),window["ga-disable-"+n]=!t,[2]}})})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var on=new sa("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TX(e,t){var n=document.createElement("script");n.src=jL+"?l="+e+"&id="+t,n.async=!0,document.head.appendChild(n)}function IX(e){var t=[];return Array.isArray(window[e])?t=window[e]:window[e]=t,t}function SX(e,t,n,r,i,s){return k(this,void 0,void 0,function(){var a,c,l,h;return C(this,function(d){switch(d.label){case 0:a=r[i],d.label=1;case 1:return d.trys.push([1,7,,8]),a?[4,t[a]]:[3,3];case 2:return d.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return c=d.sent(),l=c.find(function(v){return v.measurementId===i}),l?[4,t[l.appId]]:[3,6];case 5:d.sent(),d.label=6;case 6:return[3,8];case 7:return h=d.sent(),on.error(h),[3,8];case 8:return e(En.CONFIG,i,s),[2]}})})}function CX(e,t,n,r,i){return k(this,void 0,void 0,function(){var s,a,c,l,h,d,v,m,y;return C(this,function(w){switch(w.label){case 0:return w.trys.push([0,4,,5]),s=[],i&&i.send_to?(a=i.send_to,Array.isArray(a)||(a=[a]),[4,Promise.all(n)]):[3,2];case 1:for(c=w.sent(),l=function(E){var T=c.find(function(P){return P.measurementId===E}),A=T&&t[T.appId];if(A)s.push(A);else return s=[],"break"},h=0,d=a;h<d.length&&(v=d[h],m=l(v),m!=="break");h++);w.label=2;case 2:return s.length===0&&(s=Object.values(t)),[4,Promise.all(s)];case 3:return w.sent(),e(En.EVENT,r,i||{}),[3,5];case 4:return y=w.sent(),on.error(y),[3,5];case 5:return[2]}})})}function AX(e,t,n,r){function i(s,a,c){return k(this,void 0,void 0,function(){var l;return C(this,function(h){switch(h.label){case 0:return h.trys.push([0,6,,7]),s!==En.EVENT?[3,2]:[4,CX(e,t,n,a,c)];case 1:return h.sent(),[3,5];case 2:return s!==En.CONFIG?[3,4]:[4,SX(e,t,n,r,a,c)];case 3:return h.sent(),[3,5];case 4:e(En.SET,a),h.label=5;case 5:return[3,7];case 6:return l=h.sent(),on.error(l),[3,7];case 7:return[2]}})})}return i}function kX(e,t,n,r,i){var s=function(){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=AX(s,e,t,n),{gtagCore:s,wrappedGtag:window[i]}}function RX(){for(var e=window.document.getElementsByTagName("script"),t=0,n=Object.values(e);t<n.length;t++){var r=n[t];if(r.src&&r.src.includes(jL))return r}return null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wr,NX=(Wr={},Wr["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",Wr["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",Wr["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",Wr["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",Wr["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",Wr["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",Wr["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",Wr["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',Wr["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',Wr),xr=new to("analytics","Analytics",NX);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var PX=30,OX=1e3,DX=function(){function e(t,n){t===void 0&&(t={}),n===void 0&&(n=OX),this.throttleMetadata=t,this.intervalMillis=n}return e.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},e.prototype.setThrottleMetadata=function(t,n){this.throttleMetadata[t]=n},e.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},e}(),VL=new DX;function xX(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function LX(e){var t;return k(this,void 0,void 0,function(){var n,r,i,s,a,c,l;return C(this,function(h){switch(h.label){case 0:return n=e.appId,r=e.apiKey,i={method:"GET",headers:xX(r)},s=mX.replace("{app-id}",n),[4,fetch(s,i)];case 1:if(a=h.sent(),!(a.status!==200&&a.status!==304))return[3,6];c="",h.label=2;case 2:return h.trys.push([2,4,,5]),[4,a.json()];case 3:return l=h.sent(),!((t=l.error)===null||t===void 0)&&t.message&&(c=l.error.message),[3,5];case 4:return h.sent(),[3,5];case 5:throw xr.create("config-fetch-failed",{httpStatus:a.status,responseMessage:c});case 6:return[2,a.json()]}})})}function MX(e,t,n){return t===void 0&&(t=VL),k(this,void 0,void 0,function(){var r,i,s,a,c,l,h=this;return C(this,function(d){if(r=e.options,i=r.appId,s=r.apiKey,a=r.measurementId,!i)throw xr.create("no-app-id");if(!s){if(a)return[2,{measurementId:a,appId:i}];throw xr.create("no-api-key")}return c=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new jX,setTimeout(function(){return k(h,void 0,void 0,function(){return C(this,function(v){return l.abort(),[2]})})},n!==void 0?n:gX),[2,BL({appId:i,apiKey:s,measurementId:a},c,l,t)]})})}function BL(e,t,n,r){var i=t.throttleEndTimeMillis,s=t.backoffCount;return r===void 0&&(r=VL),k(this,void 0,void 0,function(){var a,c,l,h,d,v,m;return C(this,function(y){switch(y.label){case 0:a=e.appId,c=e.measurementId,y.label=1;case 1:return y.trys.push([1,3,,4]),[4,FX(n,i)];case 2:return y.sent(),[3,4];case 3:if(l=y.sent(),c)return on.warn("Timed out fetching this Firebase app's measurement ID from the server."+(" Falling back to the measurement ID "+c)+(' provided in the "measurementId" field in the local Firebase config. ['+l.message+"]")),[2,{appId:a,measurementId:c}];throw l;case 4:return y.trys.push([4,6,,7]),[4,LX(e)];case 5:return h=y.sent(),r.deleteThrottleMetadata(a),[2,h];case 6:if(d=y.sent(),!UX(d)){if(r.deleteThrottleMetadata(a),c)return on.warn("Failed to fetch this Firebase app's measurement ID from the server."+(" Falling back to the measurement ID "+c)+(' provided in the "measurementId" field in the local Firebase config. ['+d.message+"]")),[2,{appId:a,measurementId:c}];throw d}return v=Number(d.customData.httpStatus)===503?b_(s,r.intervalMillis,PX):b_(s,r.intervalMillis),m={throttleEndTimeMillis:Date.now()+v,backoffCount:s+1},r.setThrottleMetadata(a,m),on.debug("Calling attemptFetch again in "+v+" millis"),[2,BL(e,m,n,r)];case 7:return[2]}})})}function FX(e,t){return new Promise(function(n,r){var i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener(function(){clearTimeout(s),r(xr.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function UX(e){if(!(e instanceof Ku)||!e.customData)return!1;var t=Number(e.customData.httpStatus);return t===429||t===500||t===503||t===504}var jX=function(){function e(){this.listeners=[]}return e.prototype.addEventListener=function(t){this.listeners.push(t)},e.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VX(){return k(this,void 0,void 0,function(){var e;return C(this,function(t){switch(t.label){case 0:return nf()?[3,1]:(on.warn(xr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return t.trys.push([1,3,,4]),[4,eb()];case 2:return t.sent(),[3,4];case 3:return e=t.sent(),on.warn(xr.create("indexeddb-unavailable",{errorInfo:e}).message),[2,!1];case 4:return[2,!0]}})})}function BX(e,t,n,r,i,s){return k(this,void 0,void 0,function(){var a,c,l,h,d,v,m;return C(this,function(y){switch(y.label){case 0:return a=MX(e),a.then(function(w){n[w.measurementId]=w.appId,e.options.measurementId&&w.measurementId!==e.options.measurementId&&on.warn("The measurement ID in the local Firebase config ("+e.options.measurementId+")"+(" does not match the measurement ID fetched from the server ("+w.measurementId+").")+" To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")}).catch(function(w){return on.error(w)}),t.push(a),c=VX().then(function(w){if(w)return r.getId()}),[4,Promise.all([a,c])];case 1:return l=y.sent(),h=l[0],d=l[1],RX()||TX(s,h.measurementId),i("js",new Date),v=(m={},m[vX]="firebase",m.update=!0,m),d!=null&&(v[pX]=d),i(En.CONFIG,h.measurementId,v),[2,h.measurementId]}})})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ui={},bR=[],ER={},vd="dataLayer",qL="gtag",TR,Yc,Ew=!1;function qX(e){if(Ew)throw xr.create("already-initialized");e.dataLayerName&&(vd=e.dataLayerName),e.gtagName&&(qL=e.gtagName)}function HX(){var e=[];if(Zw()&&e.push("This is a browser extension environment."),l1()||e.push("Cookies are not available."),e.length>0){var t=e.map(function(r,i){return"("+(i+1)+") "+r}).join(" "),n=xr.create("invalid-analytics-context",{errorInfo:t});on.warn(n.message)}}function KX(e,t){HX();var n=e.options.appId;if(!n)throw xr.create("no-app-id");if(!e.options.apiKey)if(e.options.measurementId)on.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest'+(" measurement ID for this Firebase app. Falling back to the measurement ID "+e.options.measurementId)+' provided in the "measurementId" field in the local Firebase config.');else throw xr.create("no-api-key");if(Ui[n]!=null)throw xr.create("already-exists",{id:n});if(!Ew){IX(vd);var r=kX(Ui,bR,ER,vd,qL),i=r.wrappedGtag,s=r.gtagCore;Yc=i,TR=s,Ew=!0}Ui[n]=BX(e,bR,ER,t,TR,vd);var a={app:e,logEvent:function(c,l,h){yX(Yc,Ui[n],c,l,h).catch(function(d){return on.error(d)})},setCurrentScreen:function(c,l){_X(Yc,Ui[n],c,l).catch(function(h){return on.error(h)})},setUserId:function(c,l){wX(Yc,Ui[n],c,l).catch(function(h){return on.error(h)})},setUserProperties:function(c,l){bX(Yc,Ui[n],c,l).catch(function(h){return on.error(h)})},setAnalyticsCollectionEnabled:function(c){EX(Ui[n],c).catch(function(l){return on.error(l)})},INTERNAL:{delete:function(){return delete Ui[n],Promise.resolve()}}};return a}var WX="@firebase/analytics",GX="0.6.18",IR="analytics";function zX(e){e.INTERNAL.registerComponent(new In(IR,function(n){var r=n.getProvider("app").getImmediate(),i=n.getProvider("installations").getImmediate();return KX(r,i)},"PUBLIC").setServiceProps({settings:qX,EventName:bw,isSupported:$X})),e.INTERNAL.registerComponent(new In("analytics-internal",t,"PRIVATE")),e.registerVersion(WX,GX);function t(n){try{var r=n.getProvider(IR).getImmediate();return{logEvent:r.logEvent}}catch(i){throw xr.create("interop-component-reg-failed",{reason:i})}}}zX(ce);function $X(){return k(this,void 0,void 0,function(){var e;return C(this,function(t){switch(t.label){case 0:if(Zw())return[2,!1];if(!l1())return[2,!1];if(!nf())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,eb()];case 2:return e=t.sent(),[2,e];case 3:return t.sent(),[2,!1];case 4:return[2]}})})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var QX=function(){function e(t,n,r,i){this.client=t,this.storage=n,this.storageCache=r,this.logger=i}return e.prototype.isCachedDataFresh=function(t,n){if(!n)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var r=Date.now()-n,i=r<=t;return this.logger.debug("Config fetch cache check."+(" Cache age millis: "+r+".")+(" Cache max age millis (minimumFetchIntervalMillis setting): "+t+".")+(" Is cache hit: "+i+".")),i},e.prototype.fetch=function(t){return k(this,void 0,void 0,function(){var n,r,i,s,a;return C(this,function(c){switch(c.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return n=c.sent(),r=n[0],i=n[1],i&&this.isCachedDataFresh(t.cacheMaxAgeMillis,r)?[2,i]:(t.eTag=i&&i.eTag,[4,this.client.fetch(t)]);case 2:return s=c.sent(),a=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],s.status===200&&a.push(this.storage.setLastSuccessfulFetchResponse(s)),[4,Promise.all(a)];case 3:return c.sent(),[2,s]}})})},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dn,YX=(Dn={},Dn["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",Dn["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",Dn["registration-api-key"]="Undefined API key. Check Firebase app initialization.",Dn["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",Dn["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",Dn["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",Dn["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",Dn["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",Dn["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",Dn["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',Dn["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',Dn["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",Dn["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",Dn),Nr=new to("remoteconfig","Remote Config",YX);function XX(e,t){return e instanceof Ku&&e.code.indexOf(t)!==-1}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JX(e){return e===void 0&&(e=navigator),e.languages&&e.languages[0]||e.language}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ZX=function(){function e(t,n,r,i,s,a){this.firebaseInstallations=t,this.sdkVersion=n,this.namespace=r,this.projectId=i,this.apiKey=s,this.appId=a}return e.prototype.fetch=function(t){return k(this,void 0,void 0,function(){var n,r,i,s,a,c,l,h,d,v,m,y,w,E,T,A,P,O,H;return C(this,function(K){switch(K.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:n=K.sent(),r=n[0],i=n[1],s=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",a=s+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,c={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},l={sdk_version:this.sdkVersion,app_instance_id:r,app_instance_id_token:i,app_id:this.appId,language_code:JX()},h={method:"POST",headers:c,body:JSON.stringify(l)},d=fetch(a,h),v=new Promise(function(U,ie){t.signal.addEventListener(function(){var F=new Error("The operation was aborted.");F.name="AbortError",ie(F)})}),K.label=2;case 2:return K.trys.push([2,5,,6]),[4,Promise.race([d,v])];case 3:return K.sent(),[4,d];case 4:return m=K.sent(),[3,6];case 5:throw y=K.sent(),w="fetch-client-network",y.name==="AbortError"&&(w="fetch-timeout"),Nr.create(w,{originalErrorMessage:y.message});case 6:if(E=m.status,T=m.headers.get("ETag")||void 0,m.status!==200)return[3,11];O=void 0,K.label=7;case 7:return K.trys.push([7,9,,10]),[4,m.json()];case 8:return O=K.sent(),[3,10];case 9:throw H=K.sent(),Nr.create("fetch-client-parse",{originalErrorMessage:H.message});case 10:A=O.entries,P=O.state,K.label=11;case 11:if(P==="INSTANCE_STATE_UNSPECIFIED"?E=500:P==="NO_CHANGE"?E=304:(P==="NO_TEMPLATE"||P==="EMPTY_CONFIG")&&(A={}),E!==304&&E!==200)throw Nr.create("fetch-status",{httpStatus:E});return[2,{status:E,eTag:T,config:A}]}})})},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var e8=function(){function e(){this.listeners=[]}return e.prototype.addEventListener=function(t){this.listeners.push(t)},e.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var t8=!1,n8="",SR=0,r8=["1","true","t","yes","y","on"],Jy=function(){function e(t,n){n===void 0&&(n=n8),this._source=t,this._value=n}return e.prototype.asString=function(){return this._value},e.prototype.asBoolean=function(){return this._source==="static"?t8:r8.indexOf(this._value.toLowerCase())>=0},e.prototype.asNumber=function(){if(this._source==="static")return SR;var t=Number(this._value);return isNaN(t)&&(t=SR),t},e.prototype.getSource=function(){return this._source},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var i8=60*1e3,o8=12*60*60*1e3,s8=function(){function e(t,n,r,i,s){this.app=t,this._client=n,this._storageCache=r,this._storage=i,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:i8,minimumFetchIntervalMillis:o8},this.defaultConfig={}}return e.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=Le.DEBUG;break;case"silent":this._logger.logLevel=Le.SILENT;break;default:this._logger.logLevel=Le.ERROR}},Object.defineProperty(e.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),e.prototype.activate=function(){return k(this,void 0,void 0,function(){var t,n,r;return C(this,function(i){switch(i.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return t=i.sent(),n=t[0],r=t[1],!n||!n.config||!n.eTag||n.eTag===r?[2,!1]:[4,Promise.all([this._storageCache.setActiveConfig(n.config),this._storage.setActiveConfigEtag(n.eTag)])];case 2:return i.sent(),[2,!0]}})})},e.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then(function(){t._isInitializationComplete=!0})),this._initializePromise},e.prototype.fetch=function(){return k(this,void 0,void 0,function(){var t,n,r,i=this;return C(this,function(s){switch(s.label){case 0:t=new e8,setTimeout(function(){return k(i,void 0,void 0,function(){return C(this,function(a){return t.abort(),[2]})})},this.settings.fetchTimeoutMillis),s.label=1;case 1:return s.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:t})];case 2:return s.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return s.sent(),[3,6];case 4:return n=s.sent(),r=XX(n,"fetch-throttle")?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(r)];case 5:throw s.sent(),n;case 6:return[2]}})})},e.prototype.fetchAndActivate=function(){return k(this,void 0,void 0,function(){return C(this,function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}})})},e.prototype.getAll=function(){var t=this;return a8(this._storageCache.getActiveConfig(),this.defaultConfig).reduce(function(n,r){return n[r]=t.getValue(r),n},{})},e.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},e.prototype.getNumber=function(t){return this.getValue(t).asNumber()},e.prototype.getString=function(t){return this.getValue(t).asString()},e.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var n=this._storageCache.getActiveConfig();return n&&n[t]!==void 0?new Jy("remote",n[t]):this.defaultConfig&&this.defaultConfig[t]!==void 0?new Jy("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new Jy("static"))},e}();function a8(e,t){return e===void 0&&(e={}),t===void 0&&(t={}),Object.keys(me(me({},e),t))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gd(e,t){var n=e.target.error||void 0;return Nr.create(t,{originalErrorMessage:n&&n.message})}var Is="app_namespace_store",u8="firebase_remote_config",c8=1;function l8(){return new Promise(function(e,t){var n=indexedDB.open(u8,c8);n.onerror=function(r){t(gd(r,"storage-open"))},n.onsuccess=function(r){e(r.target.result)},n.onupgradeneeded=function(r){var i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Is,{keyPath:"compositeKey"})}}})}var f8=function(){function e(t,n,r,i){i===void 0&&(i=l8()),this.appId=t,this.appName=n,this.namespace=r,this.openDbPromise=i}return e.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},e.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},e.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},e.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},e.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},e.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},e.prototype.getActiveConfig=function(){return this.get("active_config")},e.prototype.setActiveConfig=function(t){return this.set("active_config",t)},e.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},e.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},e.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},e.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},e.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},e.prototype.get=function(t){return k(this,void 0,void 0,function(){var n,r=this;return C(this,function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise(function(s,a){var c=n.transaction([Is],"readonly"),l=c.objectStore(Is),h=r.createCompositeKey(t);try{var d=l.get(h);d.onerror=function(v){a(gd(v,"storage-get"))},d.onsuccess=function(v){var m=v.target.result;s(m?m.value:void 0)}}catch(v){a(Nr.create("storage-get",{originalErrorMessage:v&&v.message}))}})]}})})},e.prototype.set=function(t,n){return k(this,void 0,void 0,function(){var r,i=this;return C(this,function(s){switch(s.label){case 0:return[4,this.openDbPromise];case 1:return r=s.sent(),[2,new Promise(function(a,c){var l=r.transaction([Is],"readwrite"),h=l.objectStore(Is),d=i.createCompositeKey(t);try{var v=h.put({compositeKey:d,value:n});v.onerror=function(m){c(gd(m,"storage-set"))},v.onsuccess=function(){a()}}catch(m){c(Nr.create("storage-set",{originalErrorMessage:m&&m.message}))}})]}})})},e.prototype.delete=function(t){return k(this,void 0,void 0,function(){var n,r=this;return C(this,function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise(function(s,a){var c=n.transaction([Is],"readwrite"),l=c.objectStore(Is),h=r.createCompositeKey(t);try{var d=l.delete(h);d.onerror=function(v){a(gd(v,"storage-delete"))},d.onsuccess=function(){s()}}catch(v){a(Nr.create("storage-delete",{originalErrorMessage:v&&v.message}))}})]}})})},e.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var h8=function(){function e(t){this.storage=t}return e.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},e.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},e.prototype.getActiveConfig=function(){return this.activeConfig},e.prototype.loadFromStorage=function(){return k(this,void 0,void 0,function(){var t,n,r,i,s,a;return C(this,function(c){switch(c.label){case 0:return t=this.storage.getLastFetchStatus(),n=this.storage.getLastSuccessfulFetchTimestampMillis(),r=this.storage.getActiveConfig(),[4,t];case 1:return i=c.sent(),i&&(this.lastFetchStatus=i),[4,n];case 2:return s=c.sent(),s&&(this.lastSuccessfulFetchTimestampMillis=s),[4,r];case 3:return a=c.sent(),a&&(this.activeConfig=a),[2]}})})},e.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},e.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},e.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d8(e,t){return new Promise(function(n,r){var i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener(function(){clearTimeout(s),r(Nr.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function p8(e){if(!(e instanceof Ku)||!e.customData)return!1;var t=Number(e.customData.httpStatus);return t===429||t===500||t===503||t===504}var v8=function(){function e(t,n){this.client=t,this.storage=n}return e.prototype.fetch=function(t){return k(this,void 0,void 0,function(){var n;return C(this,function(r){switch(r.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return n=r.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(t,n)]}})})},e.prototype.attemptFetch=function(t,n){var r=n.throttleEndTimeMillis,i=n.backoffCount;return k(this,void 0,void 0,function(){var s,a,c;return C(this,function(l){switch(l.label){case 0:return[4,d8(t.signal,r)];case 1:l.sent(),l.label=2;case 2:return l.trys.push([2,5,,7]),[4,this.client.fetch(t)];case 3:return s=l.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return l.sent(),[2,s];case 5:if(a=l.sent(),!p8(a))throw a;return c={throttleEndTimeMillis:Date.now()+b_(i),backoffCount:i+1},[4,this.storage.setThrottleMetadata(c)];case 6:return l.sent(),[2,this.attemptFetch(t,c)];case 7:return[2]}})})},e}(),CR="@firebase/remote-config",g8="0.1.43";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m8(e){e.INTERNAL.registerComponent(new In("remoteConfig",t,"PUBLIC").setMultipleInstances(!0)),e.registerVersion(CR,g8);function t(n,r){var i=r.instanceIdentifier,s=n.getProvider("app").getImmediate(),a=n.getProvider("installations").getImmediate();if(typeof window>"u")throw Nr.create("registration-window");var c=s.options,l=c.projectId,h=c.apiKey,d=c.appId;if(!l)throw Nr.create("registration-project-id");if(!h)throw Nr.create("registration-api-key");if(!d)throw Nr.create("registration-app-id");i=i||"firebase";var v=new f8(d,s.name,i),m=new h8(v),y=new sa(CR);y.logLevel=Le.ERROR;var w=new ZX(a,e.SDK_VERSION,i,l,h,d),E=new v8(w,v),T=new QX(E,v,m,y),A=new s8(s,T,m,v,y);return A.ensureInitialized(),A}}m8(ce);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gr,y8=(Gr={},Gr["already-activated"]="You are trying to activate AppCheck for FirebaseApp {$appName}, while it is already activated. AppCheck can only be activated once.",Gr["use-before-activation"]="AppCheck is being used before activate() is called for FirebaseApp {$appName}. Please make sure you call activate() before instantiating other Firebase services.",Gr["fetch-network-error"]="Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",Gr["fetch-parse-error"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",Gr["fetch-status-error"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",Gr["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",Gr["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",Gr["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",Gr["recaptcha-error"]="ReCAPTCHA error.",Gr),gr=new to("appCheck","AppCheck",y8);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var HL=new Map,_8={activated:!1,tokenObservers:[]},w8={enabled:!1};function Hn(e){return HL.get(e)||_8}function Ti(e,t){HL.set(e,t)}function EE(){return w8}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var KL="https://content-firebaseappcheck.googleapis.com/v1beta",b8="exchangeRecaptchaToken",E8="exchangeDebugToken",AR={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var T8=function(){function e(t,n,r,i,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}return e.prototype.start=function(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(function(){})},e.prototype.stop=function(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)},e.prototype.isRunning=function(){return!!this.pending},e.prototype.process=function(t){return k(this,void 0,void 0,function(){var n;return C(this,function(r){switch(r.label){case 0:this.stop(),r.label=1;case 1:return r.trys.push([1,6,,7]),this.pending=new Qt,[4,I8(this.getNextRun(t))];case 2:return r.sent(),this.pending.resolve(),[4,this.pending.promise];case 3:return r.sent(),this.pending=new Qt,[4,this.operation()];case 4:return r.sent(),this.pending.resolve(),[4,this.pending.promise];case 5:return r.sent(),this.process(!0).catch(function(){}),[3,7];case 6:return n=r.sent(),this.retryPolicy(n)?this.process(!1).catch(function(){}):this.stop(),[3,7];case 7:return[2]}})})},e.prototype.getNextRun=function(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();var n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n},e}();function I8(e){return new Promise(function(t){setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kR(){return self.grecaptcha}function WL(e){if(!Hn(e).activated)throw gr.create("use-before-activation",{appName:e.name})}function S8(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,n=e==="x"?t:t&3|8;return n.toString(16)})}function C8(e){return Ap.encodeString(JSON.stringify(e),!1)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GL(e,t){var n=e.url,r=e.body;return k(this,void 0,void 0,function(){var i,s,a,c,l,h,d,v,m,y;return C(this,function(w){switch(w.label){case 0:i={"Content-Type":"application/json"},s=t.getImmediate({optional:!0}),s&&(i["X-Firebase-Client"]=s.getPlatformInfoString()),a={method:"POST",body:JSON.stringify(r),headers:i},w.label=1;case 1:return w.trys.push([1,3,,4]),[4,fetch(n,a)];case 2:return c=w.sent(),[3,4];case 3:throw l=w.sent(),gr.create("fetch-network-error",{originalErrorMessage:l.message});case 4:if(c.status!==200)throw gr.create("fetch-status-error",{httpStatus:c.status});w.label=5;case 5:return w.trys.push([5,7,,8]),[4,c.json()];case 6:return h=w.sent(),[3,8];case 7:throw d=w.sent(),gr.create("fetch-parse-error",{originalErrorMessage:d.message});case 8:if(v=h.ttl.match(/^([\d.]+)(s)$/),!v||!v[2]||isNaN(Number(v[1])))throw gr.create("fetch-parse-error",{originalErrorMessage:"ttl field (timeToLive) is not in standard Protobuf Duration "+("format: "+h.ttl)});return m=Number(v[1])*1e3,y=Date.now(),[2,{token:h.attestationToken,expireTimeMillis:y+m,issuedAtTimeMillis:y}]}})})}function A8(e,t){var n=e.options,r=n.projectId,i=n.appId,s=n.apiKey;return{url:KL+"/projects/"+r+"/apps/"+i+":"+b8+"?key="+s,body:{recaptcha_token:t}}}function k8(e,t){var n=e.options,r=n.projectId,i=n.appId,s=n.apiKey;return{url:KL+"/projects/"+r+"/apps/"+i+":"+E8+"?key="+s,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var R8="firebase-app-check-database",N8=1,Zl="firebase-app-check-store",zL="debug-token",rd=null;function $L(){return rd||(rd=new Promise(function(e,t){try{var n=indexedDB.open(R8,N8);n.onsuccess=function(r){e(r.target.result)},n.onerror=function(r){var i;t(gr.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=function(r){var i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Zl,{keyPath:"compositeKey"})}}}catch(r){t(gr.create("storage-open",{originalErrorMessage:r.message}))}}),rd)}function P8(e){return YL(XL(e))}function O8(e,t){return QL(XL(e),t)}function D8(e){return QL(zL,e)}function x8(){return YL(zL)}function QL(e,t){return k(this,void 0,void 0,function(){var n,r,i,s;return C(this,function(a){switch(a.label){case 0:return[4,$L()];case 1:return n=a.sent(),r=n.transaction(Zl,"readwrite"),i=r.objectStore(Zl),s=i.put({compositeKey:e,value:t}),[2,new Promise(function(c,l){s.onsuccess=function(h){c()},r.onerror=function(h){var d;l(gr.create("storage-set",{originalErrorMessage:(d=h.target.error)===null||d===void 0?void 0:d.message}))}})]}})})}function YL(e){return k(this,void 0,void 0,function(){var t,n,r,i;return C(this,function(s){switch(s.label){case 0:return[4,$L()];case 1:return t=s.sent(),n=t.transaction(Zl,"readonly"),r=n.objectStore(Zl),i=r.get(e),[2,new Promise(function(a,c){i.onsuccess=function(l){var h=l.target.result;a(h?h.value:void 0)},n.onerror=function(l){var h;c(gr.create("storage-get",{originalErrorMessage:(h=l.target.error)===null||h===void 0?void 0:h.message}))}})]}})})}function XL(e){return e.options.appId+"-"+e.name}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ov=new sa("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L8(e){return k(this,void 0,void 0,function(){var t,n;return C(this,function(r){switch(r.label){case 0:if(!nf())return[3,5];t=void 0,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,P8(e)];case 2:return t=r.sent(),[3,4];case 3:return n=r.sent(),Ov.warn("Failed to read token from indexeddb. Error: "+n),[3,4];case 4:return[2,t];case 5:return[2,void 0]}})})}function RR(e,t){return nf()?O8(e,t).catch(function(n){Ov.warn("Failed to write token to indexeddb. Error: "+n)}):Promise.resolve()}function M8(){return k(this,void 0,void 0,function(){var e,t;return C(this,function(n){switch(n.label){case 0:e=void 0,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,x8()];case 2:return e=n.sent(),[3,4];case 3:return n.sent(),[3,4];case 4:return e?[2,e]:(t=S8(),D8(t).catch(function(r){return Ov.warn("Failed to persist debug token to indexeddb. Error: "+r)}),console.log("AppCheck debug token: "+t+". You will need to whitelist it in the Firebase console for it to work"),[2,t])}})})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F8(){var e=EE();return e.enabled}function U8(){return k(this,void 0,void 0,function(){var e;return C(this,function(t){if(e=EE(),e.enabled&&e.token)return[2,e.token.promise];throw Error(`
            Can't get debug token in production mode.
        `)})})}function j8(){var e=WV();if(!(typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)){var t=EE();t.enabled=!0;var n=new Qt;t.token=n,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(M8())}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var V8={error:"UNKNOWN_ERROR"};function hp(e,t,n){return n===void 0&&(n=!1),k(this,void 0,void 0,function(){var r,i,s,a,c,l,h,d,v,m;return C(this,function(y){switch(y.label){case 0:return WL(e),r=Hn(e),i=r.token,s=void 0,i?[3,2]:[4,r.cachedTokenPromise];case 1:a=y.sent(),a&&ef(a)&&(i=a,Ti(e,me(me({},r),{token:i})),NR(e,{token:i.token})),y.label=2;case 2:return!n&&i&&ef(i)?[2,{token:i.token}]:F8()?(l=GL,h=k8,d=[e],[4,U8()]):[3,6];case 3:return[4,l.apply(void 0,[h.apply(void 0,d.concat([y.sent()])),t])];case 4:return c=y.sent(),[4,RR(e,c)];case 5:return y.sent(),Ti(e,me(me({},r),{token:c})),[2,{token:c.token}];case 6:return y.trys.push([6,8,,9]),[4,r.provider.getToken()];case 7:return i=y.sent(),[3,9];case 8:return v=y.sent(),Ov.error(v),s=v,[3,9];case 9:return i?[3,10]:(m=q8(s),[3,12]);case 10:return m={token:i.token},Ti(e,me(me({},r),{token:i})),[4,RR(e,i)];case 11:y.sent(),y.label=12;case 12:return NR(e,m),[2,m]}})})}function JL(e,t,n,r,i){var s=Hn(e),a={next:r,error:i,type:n},c=me(me({},s),{tokenObservers:Ne(Ne([],s.tokenObservers),[a])});if(!c.tokenRefresher){var l=B8(e,t);c.tokenRefresher=l}if(!c.tokenRefresher.isRunning()&&s.isTokenAutoRefreshEnabled&&c.tokenRefresher.start(),s.token&&ef(s.token)){var h=s.token;Promise.resolve().then(function(){return r({token:h.token})}).catch(function(){})}else s.token==null&&s.cachedTokenPromise.then(function(d){d&&ef(d)&&r({token:d.token})}).catch(function(){});Ti(e,c)}function TE(e,t){var n=Hn(e),r=n.tokenObservers.filter(function(i){return i.next!==t});r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),Ti(e,me(me({},n),{tokenObservers:r}))}function B8(e,t){var n=this;return new T8(function(){return k(n,void 0,void 0,function(){var r,i;return C(this,function(s){switch(s.label){case 0:return r=Hn(e),r.token?[3,2]:[4,hp(e,t)];case 1:return i=s.sent(),[3,4];case 2:return[4,hp(e,t,!0)];case 3:i=s.sent(),s.label=4;case 4:if(i.error)throw i.error;return[2]}})})},function(){return!0},function(){var r=Hn(e);if(r.token){var i=r.token.issuedAtTimeMillis+(r.token.expireTimeMillis-r.token.issuedAtTimeMillis)*.5+3e5,s=r.token.expireTimeMillis-5*60*1e3;return i=Math.min(i,s),Math.max(0,i-Date.now())}else return 0},AR.RETRIAL_MIN_WAIT,AR.RETRIAL_MAX_WAIT)}function NR(e,t){for(var n=Hn(e).tokenObservers,r=0,i=n;r<i.length;r++){var s=i[r];try{s.type==="EXTERNAL"&&t.error!=null?s.error(t.error):s.next(t)}catch{}}}function ef(e){return e.expireTimeMillis-Date.now()>0}function q8(e){return{token:C8(V8),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var H8="https://www.google.com/recaptcha/api.js";function K8(e,t){var n=Hn(e),r=new Qt;Ti(e,me(me({},n),{reCAPTCHAState:{initialized:r}}));var i="fire_app_check_"+e.name,s=document.createElement("div");s.id=i,s.style.display="none",document.body.appendChild(s);var a=kR();return a?a.ready(function(){PR(e,t,a,i),r.resolve(a)}):G8(function(){var c=kR();if(!c)throw new Error("no recaptcha");c.ready(function(){PR(e,t,c,i),r.resolve(c)})}),r.promise}function W8(e){return k(this,void 0,void 0,function(){var t,n;return C(this,function(r){switch(r.label){case 0:return WL(e),t=Hn(e).reCAPTCHAState,[4,t.initialized.promise];case 1:return n=r.sent(),[2,new Promise(function(i,s){var a=Hn(e).reCAPTCHAState;n.ready(function(){i(n.execute(a.widgetId,{action:"fire_app_check"}))})})]}})})}function PR(e,t,n,r){var i=n.render(r,{sitekey:t,size:"invisible"}),s=Hn(e);Ti(e,me(me({},s),{reCAPTCHAState:me(me({},s.reCAPTCHAState),{widgetId:i})}))}function G8(e){var t=document.createElement("script");t.src=""+H8,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tw=function(){function e(t){this._siteKey=t}return e.prototype.getToken=function(){return k(this,void 0,void 0,function(){var t;return C(this,function(n){switch(n.label){case 0:if(!this._app||!this._platformLoggerProvider)throw gr.create("use-before-activation",{appName:""});n.label=1;case 1:return n.trys.push([1,3,,4]),[4,W8(this._app)];case 2:return t=n.sent(),[3,4];case 3:throw n.sent(),gr.create("recaptcha-error");case 4:return[2,GL(A8(this._app,t),this._platformLoggerProvider)]}})})},e.prototype.initialize=function(t,n){this._app=t,this._platformLoggerProvider=n,K8(t,this._siteKey).catch(function(){})},e}(),Iw=function(){function e(t){this._customProviderOptions=t}return e.prototype.getToken=function(){return k(this,void 0,void 0,function(){var t,n,r;return C(this,function(i){switch(i.label){case 0:if(!this._app)throw gr.create("use-before-activation",{appName:""});return[4,this._customProviderOptions.getToken()];case 1:return t=i.sent(),n=QV(t.token),r=n!==null&&n<Date.now()&&n>0?n*1e3:Date.now(),[2,me(me({},t),{issuedAtTimeMillis:r})]}})})},e.prototype.initialize=function(t){this._app=t},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z8(e,t,n,r){var i=Hn(e);if(i.activated)throw gr.create("already-activated",{appName:e.name});var s=me(me({},i),{activated:!0});s.cachedTokenPromise=L8(e).then(function(a){return a&&ef(a)&&Ti(e,me(me({},Hn(e)),{token:a})),a}),typeof t=="string"?s.provider=new Tw(t):t instanceof Tw||t instanceof Iw?s.provider=t:s.provider=new Iw({getToken:t.getToken}),s.isTokenAutoRefreshEnabled=r===void 0?e.automaticDataCollectionEnabled:r,Ti(e,s),s.provider.initialize(e,n)}function $8(e,t){var n=Hn(e);n.tokenRefresher&&(t===!0?n.tokenRefresher.start():n.tokenRefresher.stop()),Ti(e,me(me({},n),{isTokenAutoRefreshEnabled:t}))}function Q8(e,t,n){return k(this,void 0,void 0,function(){var r;return C(this,function(i){switch(i.label){case 0:return[4,hp(e,t,n)];case 1:if(r=i.sent(),r.error)throw r.error;return[2,{token:r.token}]}})})}function Y8(e,t,n,r,i){var s=function(){},a=function(){};return n.next!=null?s=n.next.bind(n):s=n,n.error!=null?a=n.error.bind(n):r&&(a=r),JL(e,t,"EXTERNAL",s,a),function(){return TE(e,s)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X8(e,t){return{app:e,activate:function(n,r){return z8(e,n,t,r)},setTokenAutoRefreshEnabled:function(n){return $8(e,n)},getToken:function(n){return Q8(e,t,n)},onTokenChanged:function(n,r,i){return Y8(e,t,n,r)},INTERNAL:{delete:function(){for(var n=Hn(e).tokenObservers,r=0,i=n;r<i.length;r++){var s=i[r];TE(e,s.next)}return Promise.resolve()}}}}function J8(e,t){return{getToken:function(n){return hp(e,t,n)},addTokenListener:function(n){return JL(e,t,"INTERNAL",n)},removeTokenListener:function(n){return TE(e,n)}}}var Z8="@firebase/app-check",eJ="0.3.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tJ="appCheck",OR="app-check-internal";function nJ(e){e.INTERNAL.registerComponent(new In(tJ,function(t){var n=t.getProvider("app").getImmediate(),r=t.getProvider("platform-logger");return X8(n,r)},"PUBLIC").setServiceProps({ReCaptchaV3Provider:Tw,CustomProvider:Iw}).setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(function(t,n,r){var i=t.getProvider(OR);i.initialize()})),e.INTERNAL.registerComponent(new In(OR,function(t){var n=t.getProvider("app").getImmediate(),r=t.getProvider("platform-logger");return J8(n,r)},"PUBLIC").setInstantiationMode("EXPLICIT")),e.registerVersion(Z8,eJ)}nJ(ce);j8();var rJ="firebase",ZL="8.10.1";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ce.registerVersion(rJ,ZL,"app");ce.SDK_VERSION=ZL;var iJ="firebase",oJ="8.10.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */console.warn(`
It looks like you're using the development build of the Firebase JS SDK.
When deploying Firebase apps to production, it is advisable to only import
the individual SDK components you intend to use.

For the module builds, these are available in the following manner
(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):

CommonJS Modules:
const firebase = require('firebase/app');
require('firebase/<PACKAGE>');

ES Modules:
import firebase from 'firebase/app';
import 'firebase/<PACKAGE>';

Typescript:
import firebase from 'firebase/app';
import 'firebase/<PACKAGE>';
`);ce.registerVersion(iJ,oJ);function sJ(e){for(let t=e.length-1;t>0;t--){let n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e}function aJ(e){return new Promise(t=>setTimeout(t,e))}const IE=n1("quizesStore",{state:()=>({quizesList:[],isQuizesLoading:!1}),getters:{},actions:{async getQuizes(){this.isQuizesLoading=!0;const t=(await ce.database().ref("quizes").once("value")).val();if(!t)return[];this.quizesList=Object.entries(t).map(n=>({key:n[0],...n[1]})),aJ(1e3),this.isQuizesLoading=!1}}}),uJ={__name:"App",setup(e){const t=IE();return xN(async()=>{await t.getQuizes()}),(n,r)=>{const i=C4("router-view");return vn(),cr("div",null,[Jn(i)])}}};/*!
  * vue-router v4.1.6
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const Xa=typeof window<"u";function cJ(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const Je=Object.assign;function Zy(e,t){const n={};for(const r in t){const i=t[r];n[r]=ri(i)?i.map(e):e(i)}return n}const yl=()=>{},ri=Array.isArray,lJ=/\/$/,fJ=e=>e.replace(lJ,"");function e_(e,t,n="/"){let r,i={},s="",a="";const c=t.indexOf("#");let l=t.indexOf("?");return c<l&&c>=0&&(l=-1),l>-1&&(r=t.slice(0,l),s=t.slice(l+1,c>-1?c:t.length),i=e(s)),c>-1&&(r=r||t.slice(0,c),a=t.slice(c,t.length)),r=vJ(r??t,n),{fullPath:r+(s&&"?")+s+a,path:r,query:i,hash:a}}function hJ(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function DR(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function dJ(e,t,n){const r=t.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&Fu(t.matched[r],n.matched[i])&&eM(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function Fu(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function eM(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!pJ(e[n],t[n]))return!1;return!0}function pJ(e,t){return ri(e)?xR(e,t):ri(t)?xR(t,e):e===t}function xR(e,t){return ri(t)?e.length===t.length&&e.every((n,r)=>n===t[r]):e.length===1&&e[0]===t}function vJ(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/");let i=n.length-1,s,a;for(s=0;s<r.length;s++)if(a=r[s],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(s-(s===r.length?1:0)).join("/")}var tf;(function(e){e.pop="pop",e.push="push"})(tf||(tf={}));var _l;(function(e){e.back="back",e.forward="forward",e.unknown=""})(_l||(_l={}));function gJ(e){if(!e)if(Xa){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),fJ(e)}const mJ=/^[^#]+#/;function yJ(e,t){return e.replace(mJ,"#")+t}function _J(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const Dv=()=>({left:window.pageXOffset,top:window.pageYOffset});function wJ(e){let t;if("el"in e){const n=e.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;t=_J(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function LR(e,t){return(history.state?history.state.position-t:-1)+e}const Sw=new Map;function bJ(e,t){Sw.set(e,t)}function EJ(e){const t=Sw.get(e);return Sw.delete(e),t}let TJ=()=>location.protocol+"//"+location.host;function tM(e,t){const{pathname:n,search:r,hash:i}=t,s=e.indexOf("#");if(s>-1){let c=i.includes(e.slice(s))?e.slice(s).length:1,l=i.slice(c);return l[0]!=="/"&&(l="/"+l),DR(l,"")}return DR(n,e)+r+i}function IJ(e,t,n,r){let i=[],s=[],a=null;const c=({state:m})=>{const y=tM(e,location),w=n.value,E=t.value;let T=0;if(m){if(n.value=y,t.value=m,a&&a===w){a=null;return}T=E?m.position-E.position:0}else r(y);i.forEach(A=>{A(n.value,w,{delta:T,type:tf.pop,direction:T?T>0?_l.forward:_l.back:_l.unknown})})};function l(){a=n.value}function h(m){i.push(m);const y=()=>{const w=i.indexOf(m);w>-1&&i.splice(w,1)};return s.push(y),y}function d(){const{history:m}=window;m.state&&m.replaceState(Je({},m.state,{scroll:Dv()}),"")}function v(){for(const m of s)m();s=[],window.removeEventListener("popstate",c),window.removeEventListener("beforeunload",d)}return window.addEventListener("popstate",c),window.addEventListener("beforeunload",d),{pauseListeners:l,listen:h,destroy:v}}function MR(e,t,n,r=!1,i=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:i?Dv():null}}function SJ(e){const{history:t,location:n}=window,r={value:tM(e,n)},i={value:t.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function s(l,h,d){const v=e.indexOf("#"),m=v>-1?(n.host&&document.querySelector("base")?e:e.slice(v))+l:TJ()+e+l;try{t[d?"replaceState":"pushState"](h,"",m),i.value=h}catch(y){console.error(y),n[d?"replace":"assign"](m)}}function a(l,h){const d=Je({},t.state,MR(i.value.back,l,i.value.forward,!0),h,{position:i.value.position});s(l,d,!0),r.value=l}function c(l,h){const d=Je({},i.value,t.state,{forward:l,scroll:Dv()});s(d.current,d,!0);const v=Je({},MR(r.value,l,null),{position:d.position+1},h);s(l,v,!1),r.value=l}return{location:r,state:i,push:c,replace:a}}function CJ(e){e=gJ(e);const t=SJ(e),n=IJ(e,t.state,t.location,t.replace);function r(s,a=!0){a||n.pauseListeners(),history.go(s)}const i=Je({location:"",base:e,go:r,createHref:yJ.bind(null,e)},t,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function AJ(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),CJ(e)}function kJ(e){return typeof e=="string"||e&&typeof e=="object"}function nM(e){return typeof e=="string"||typeof e=="symbol"}const wo={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},rM=Symbol("");var FR;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(FR||(FR={}));function Uu(e,t){return Je(new Error,{type:e,[rM]:!0},t)}function ji(e,t){return e instanceof Error&&rM in e&&(t==null||!!(e.type&t))}const UR="[^/]+?",RJ={sensitive:!1,strict:!1,start:!0,end:!0},NJ=/[.+*?^${}()[\]/\\]/g;function PJ(e,t){const n=Je({},RJ,t),r=[];let i=n.start?"^":"";const s=[];for(const h of e){const d=h.length?[]:[90];n.strict&&!h.length&&(i+="/");for(let v=0;v<h.length;v++){const m=h[v];let y=40+(n.sensitive?.25:0);if(m.type===0)v||(i+="/"),i+=m.value.replace(NJ,"\\$&"),y+=40;else if(m.type===1){const{value:w,repeatable:E,optional:T,regexp:A}=m;s.push({name:w,repeatable:E,optional:T});const P=A||UR;if(P!==UR){y+=10;try{new RegExp(`(${P})`)}catch(H){throw new Error(`Invalid custom RegExp for param "${w}" (${P}): `+H.message)}}let O=E?`((?:${P})(?:/(?:${P}))*)`:`(${P})`;v||(O=T&&h.length<2?`(?:/${O})`:"/"+O),T&&(O+="?"),i+=O,y+=20,T&&(y+=-8),E&&(y+=-20),P===".*"&&(y+=-50)}d.push(y)}r.push(d)}if(n.strict&&n.end){const h=r.length-1;r[h][r[h].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const a=new RegExp(i,n.sensitive?"":"i");function c(h){const d=h.match(a),v={};if(!d)return null;for(let m=1;m<d.length;m++){const y=d[m]||"",w=s[m-1];v[w.name]=y&&w.repeatable?y.split("/"):y}return v}function l(h){let d="",v=!1;for(const m of e){(!v||!d.endsWith("/"))&&(d+="/"),v=!1;for(const y of m)if(y.type===0)d+=y.value;else if(y.type===1){const{value:w,repeatable:E,optional:T}=y,A=w in h?h[w]:"";if(ri(A)&&!E)throw new Error(`Provided param "${w}" is an array but it is not repeatable (* or + modifiers)`);const P=ri(A)?A.join("/"):A;if(!P)if(T)m.length<2&&(d.endsWith("/")?d=d.slice(0,-1):v=!0);else throw new Error(`Missing required param "${w}"`);d+=P}}return d||"/"}return{re:a,score:r,keys:s,parse:c,stringify:l}}function OJ(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function DJ(e,t){let n=0;const r=e.score,i=t.score;for(;n<r.length&&n<i.length;){const s=OJ(r[n],i[n]);if(s)return s;n++}if(Math.abs(i.length-r.length)===1){if(jR(r))return 1;if(jR(i))return-1}return i.length-r.length}function jR(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const xJ={type:0,value:""},LJ=/[a-zA-Z0-9_]/;function MJ(e){if(!e)return[[]];if(e==="/")return[[xJ]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(y){throw new Error(`ERR (${n})/"${h}": ${y}`)}let n=0,r=n;const i=[];let s;function a(){s&&i.push(s),s=[]}let c=0,l,h="",d="";function v(){h&&(n===0?s.push({type:0,value:h}):n===1||n===2||n===3?(s.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${h}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:h,regexp:d,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),h="")}function m(){h+=l}for(;c<e.length;){if(l=e[c++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(h&&v(),a()):l===":"?(v(),n=1):m();break;case 4:m(),n=r;break;case 1:l==="("?n=2:LJ.test(l)?m():(v(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&c--);break;case 2:l===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+l:n=3:d+=l;break;case 3:v(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&c--,d="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${h}"`),v(),a(),i}function FJ(e,t,n){const r=PJ(MJ(e.path),n),i=Je(r,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function UJ(e,t){const n=[],r=new Map;t=qR({strict:!1,end:!0,sensitive:!1},t);function i(d){return r.get(d)}function s(d,v,m){const y=!m,w=jJ(d);w.aliasOf=m&&m.record;const E=qR(t,d),T=[w];if("alias"in d){const O=typeof d.alias=="string"?[d.alias]:d.alias;for(const H of O)T.push(Je({},w,{components:m?m.record.components:w.components,path:H,aliasOf:m?m.record:w}))}let A,P;for(const O of T){const{path:H}=O;if(v&&H[0]!=="/"){const K=v.record.path,U=K[K.length-1]==="/"?"":"/";O.path=v.record.path+(H&&U+H)}if(A=FJ(O,v,E),m?m.alias.push(A):(P=P||A,P!==A&&P.alias.push(A),y&&d.name&&!BR(A)&&a(d.name)),w.children){const K=w.children;for(let U=0;U<K.length;U++)s(K[U],A,m&&m.children[U])}m=m||A,(A.record.components&&Object.keys(A.record.components).length||A.record.name||A.record.redirect)&&l(A)}return P?()=>{a(P)}:yl}function a(d){if(nM(d)){const v=r.get(d);v&&(r.delete(d),n.splice(n.indexOf(v),1),v.children.forEach(a),v.alias.forEach(a))}else{const v=n.indexOf(d);v>-1&&(n.splice(v,1),d.record.name&&r.delete(d.record.name),d.children.forEach(a),d.alias.forEach(a))}}function c(){return n}function l(d){let v=0;for(;v<n.length&&DJ(d,n[v])>=0&&(d.record.path!==n[v].record.path||!iM(d,n[v]));)v++;n.splice(v,0,d),d.record.name&&!BR(d)&&r.set(d.record.name,d)}function h(d,v){let m,y={},w,E;if("name"in d&&d.name){if(m=r.get(d.name),!m)throw Uu(1,{location:d});E=m.record.name,y=Je(VR(v.params,m.keys.filter(P=>!P.optional).map(P=>P.name)),d.params&&VR(d.params,m.keys.map(P=>P.name))),w=m.stringify(y)}else if("path"in d)w=d.path,m=n.find(P=>P.re.test(w)),m&&(y=m.parse(w),E=m.record.name);else{if(m=v.name?r.get(v.name):n.find(P=>P.re.test(v.path)),!m)throw Uu(1,{location:d,currentLocation:v});E=m.record.name,y=Je({},v.params,d.params),w=m.stringify(y)}const T=[];let A=m;for(;A;)T.unshift(A.record),A=A.parent;return{name:E,path:w,params:y,matched:T,meta:BJ(T)}}return e.forEach(d=>s(d)),{addRoute:s,resolve:h,removeRoute:a,getRoutes:c,getRecordMatcher:i}}function VR(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function jJ(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:VJ(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function VJ(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]=typeof n=="boolean"?n:n[r];return t}function BR(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function BJ(e){return e.reduce((t,n)=>Je(t,n.meta),{})}function qR(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function iM(e,t){return t.children.some(n=>n===e||iM(e,n))}const oM=/#/g,qJ=/&/g,HJ=/\//g,KJ=/=/g,WJ=/\?/g,sM=/\+/g,GJ=/%5B/g,zJ=/%5D/g,aM=/%5E/g,$J=/%60/g,uM=/%7B/g,QJ=/%7C/g,cM=/%7D/g,YJ=/%20/g;function SE(e){return encodeURI(""+e).replace(QJ,"|").replace(GJ,"[").replace(zJ,"]")}function XJ(e){return SE(e).replace(uM,"{").replace(cM,"}").replace(aM,"^")}function Cw(e){return SE(e).replace(sM,"%2B").replace(YJ,"+").replace(oM,"%23").replace(qJ,"%26").replace($J,"`").replace(uM,"{").replace(cM,"}").replace(aM,"^")}function JJ(e){return Cw(e).replace(KJ,"%3D")}function ZJ(e){return SE(e).replace(oM,"%23").replace(WJ,"%3F")}function e7(e){return e==null?"":ZJ(e).replace(HJ,"%2F")}function dp(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function t7(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let i=0;i<r.length;++i){const s=r[i].replace(sM," "),a=s.indexOf("="),c=dp(a<0?s:s.slice(0,a)),l=a<0?null:dp(s.slice(a+1));if(c in t){let h=t[c];ri(h)||(h=t[c]=[h]),h.push(l)}else t[c]=l}return t}function HR(e){let t="";for(let n in e){const r=e[n];if(n=JJ(n),r==null){r!==void 0&&(t+=(t.length?"&":"")+n);continue}(ri(r)?r.map(s=>s&&Cw(s)):[r&&Cw(r)]).forEach(s=>{s!==void 0&&(t+=(t.length?"&":"")+n,s!=null&&(t+="="+s))})}return t}function n7(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=ri(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return t}const r7=Symbol(""),KR=Symbol(""),xv=Symbol(""),CE=Symbol(""),Aw=Symbol("");function Xc(){let e=[];function t(r){return e.push(r),()=>{const i=e.indexOf(r);i>-1&&e.splice(i,1)}}function n(){e=[]}return{add:t,list:()=>e,reset:n}}function Io(e,t,n,r,i){const s=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((a,c)=>{const l=v=>{v===!1?c(Uu(4,{from:n,to:t})):v instanceof Error?c(v):kJ(v)?c(Uu(2,{from:t,to:v})):(s&&r.enterCallbacks[i]===s&&typeof v=="function"&&s.push(v),a())},h=e.call(r&&r.instances[i],t,n,l);let d=Promise.resolve(h);e.length<3&&(d=d.then(l)),d.catch(v=>c(v))})}function t_(e,t,n,r){const i=[];for(const s of e)for(const a in s.components){let c=s.components[a];if(!(t!=="beforeRouteEnter"&&!s.instances[a]))if(i7(c)){const h=(c.__vccOpts||c)[t];h&&i.push(Io(h,n,r,s,a))}else{let l=c();i.push(()=>l.then(h=>{if(!h)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${s.path}"`));const d=cJ(h)?h.default:h;s.components[a]=d;const m=(d.__vccOpts||d)[t];return m&&Io(m,n,r,s,a)()}))}}return i}function i7(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function WR(e){const t=Or(xv),n=Or(CE),r=sn(()=>t.resolve(jn(e.to))),i=sn(()=>{const{matched:l}=r.value,{length:h}=l,d=l[h-1],v=n.matched;if(!d||!v.length)return-1;const m=v.findIndex(Fu.bind(null,d));if(m>-1)return m;const y=GR(l[h-2]);return h>1&&GR(d)===y&&v[v.length-1].path!==y?v.findIndex(Fu.bind(null,l[h-2])):m}),s=sn(()=>i.value>-1&&u7(n.params,r.value.params)),a=sn(()=>i.value>-1&&i.value===n.matched.length-1&&eM(n.params,r.value.params));function c(l={}){return a7(l)?t[jn(e.replace)?"replace":"push"](jn(e.to)).catch(yl):Promise.resolve()}return{route:r,href:sn(()=>r.value.href),isActive:s,isExactActive:a,navigate:c}}const o7=ON({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:WR,setup(e,{slots:t}){const n=qu(WR(e)),{options:r}=Or(xv),i=sn(()=>({[zR(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[zR(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=t.default&&t.default(n);return e.custom?s:Yw("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},s)}}}),s7=o7;function a7(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function u7(e,t){for(const n in t){const r=t[n],i=e[n];if(typeof r=="string"){if(r!==i)return!1}else if(!ri(i)||i.length!==r.length||r.some((s,a)=>s!==i[a]))return!1}return!0}function GR(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const zR=(e,t,n)=>e??t??n,c7=ON({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const r=Or(Aw),i=sn(()=>e.route||r.value),s=Or(KR,0),a=sn(()=>{let h=jn(s);const{matched:d}=i.value;let v;for(;(v=d[h])&&!v.components;)h++;return h}),c=sn(()=>i.value.matched[a.value]);od(KR,sn(()=>a.value+1)),od(r7,c),od(Aw,i);const l=qw();return js(()=>[l.value,c.value,e.name],([h,d,v],[m,y,w])=>{d&&(d.instances[v]=h,y&&y!==d&&h&&h===m&&(d.leaveGuards.size||(d.leaveGuards=y.leaveGuards),d.updateGuards.size||(d.updateGuards=y.updateGuards))),h&&d&&(!y||!Fu(d,y)||!m)&&(d.enterCallbacks[v]||[]).forEach(E=>E(h))},{flush:"post"}),()=>{const h=i.value,d=e.name,v=c.value,m=v&&v.components[d];if(!m)return $R(n.default,{Component:m,route:h});const y=v.props[d],w=y?y===!0?h.params:typeof y=="function"?y(h):y:null,T=Yw(m,Je({},w,t,{onVnodeUnmounted:A=>{A.component.isUnmounted&&(v.instances[d]=null)},ref:l}));return $R(n.default,{Component:T,route:h})||T}}});function $R(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const l7=c7;function f7(e){const t=UJ(e.routes,e),n=e.parseQuery||t7,r=e.stringifyQuery||HR,i=e.history,s=Xc(),a=Xc(),c=Xc(),l=Gj(wo);let h=wo;Xa&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=Zy.bind(null,V=>""+V),v=Zy.bind(null,e7),m=Zy.bind(null,dp);function y(V,re){let ne,J;return nM(V)?(ne=t.getRecordMatcher(V),J=re):J=V,t.addRoute(J,ne)}function w(V){const re=t.getRecordMatcher(V);re&&t.removeRoute(re)}function E(){return t.getRoutes().map(V=>V.record)}function T(V){return!!t.getRecordMatcher(V)}function A(V,re){if(re=Je({},re||l.value),typeof V=="string"){const I=e_(n,V,re.path),N=t.resolve({path:I.path},re),x=i.createHref(I.fullPath);return Je(I,N,{params:m(N.params),hash:dp(I.hash),redirectedFrom:void 0,href:x})}let ne;if("path"in V)ne=Je({},V,{path:e_(n,V.path,re.path).path});else{const I=Je({},V.params);for(const N in I)I[N]==null&&delete I[N];ne=Je({},V,{params:v(V.params)}),re.params=v(re.params)}const J=t.resolve(ne,re),Ve=V.hash||"";J.params=d(m(J.params));const at=hJ(r,Je({},V,{hash:XJ(Ve),path:J.path})),Ie=i.createHref(at);return Je({fullPath:at,hash:Ve,query:r===HR?n7(V.query):V.query||{}},J,{redirectedFrom:void 0,href:Ie})}function P(V){return typeof V=="string"?e_(n,V,l.value.path):Je({},V)}function O(V,re){if(h!==V)return Uu(8,{from:re,to:V})}function H(V){return ie(V)}function K(V){return H(Je(P(V),{replace:!0}))}function U(V){const re=V.matched[V.matched.length-1];if(re&&re.redirect){const{redirect:ne}=re;let J=typeof ne=="function"?ne(V):ne;return typeof J=="string"&&(J=J.includes("?")||J.includes("#")?J=P(J):{path:J},J.params={}),Je({query:V.query,hash:V.hash,params:"path"in J?{}:V.params},J)}}function ie(V,re){const ne=h=A(V),J=l.value,Ve=V.state,at=V.force,Ie=V.replace===!0,I=U(ne);if(I)return ie(Je(P(I),{state:typeof I=="object"?Je({},Ve,I.state):Ve,force:at,replace:Ie}),re||ne);const N=ne;N.redirectedFrom=re;let x;return!at&&dJ(r,J,ne)&&(x=Uu(16,{to:N,from:J}),Kn(J,J,!0,!1)),(x?Promise.resolve(x):ge(N,J)).catch(M=>ji(M)?ji(M,2)?M:kn(M):Ye(M,N,J)).then(M=>{if(M){if(ji(M,2))return ie(Je({replace:Ie},P(M.to),{state:typeof M.to=="object"?Je({},Ve,M.to.state):Ve,force:at}),re||N)}else M=tt(N,J,!0,Ie,Ve);return R(N,J,M),M})}function F(V,re){const ne=O(V,re);return ne?Promise.reject(ne):Promise.resolve()}function ge(V,re){let ne;const[J,Ve,at]=h7(V,re);ne=t_(J.reverse(),"beforeRouteLeave",V,re);for(const I of J)I.leaveGuards.forEach(N=>{ne.push(Io(N,V,re))});const Ie=F.bind(null,V,re);return ne.push(Ie),za(ne).then(()=>{ne=[];for(const I of s.list())ne.push(Io(I,V,re));return ne.push(Ie),za(ne)}).then(()=>{ne=t_(Ve,"beforeRouteUpdate",V,re);for(const I of Ve)I.updateGuards.forEach(N=>{ne.push(Io(N,V,re))});return ne.push(Ie),za(ne)}).then(()=>{ne=[];for(const I of V.matched)if(I.beforeEnter&&!re.matched.includes(I))if(ri(I.beforeEnter))for(const N of I.beforeEnter)ne.push(Io(N,V,re));else ne.push(Io(I.beforeEnter,V,re));return ne.push(Ie),za(ne)}).then(()=>(V.matched.forEach(I=>I.enterCallbacks={}),ne=t_(at,"beforeRouteEnter",V,re),ne.push(Ie),za(ne))).then(()=>{ne=[];for(const I of a.list())ne.push(Io(I,V,re));return ne.push(Ie),za(ne)}).catch(I=>ji(I,8)?I:Promise.reject(I))}function R(V,re,ne){for(const J of c.list())J(V,re,ne)}function tt(V,re,ne,J,Ve){const at=O(V,re);if(at)return at;const Ie=re===wo,I=Xa?history.state:{};ne&&(J||Ie?i.replace(V.fullPath,Je({scroll:Ie&&I&&I.scroll},Ve)):i.push(V.fullPath,Ve)),l.value=V,Kn(V,re,ne,Ie),kn()}let lt;function An(){lt||(lt=i.listen((V,re,ne)=>{if(!Jo.listening)return;const J=A(V),Ve=U(J);if(Ve){ie(Je(Ve,{replace:!0}),J).catch(yl);return}h=J;const at=l.value;Xa&&bJ(LR(at.fullPath,ne.delta),Dv()),ge(J,at).catch(Ie=>ji(Ie,12)?Ie:ji(Ie,2)?(ie(Ie.to,J).then(I=>{ji(I,20)&&!ne.delta&&ne.type===tf.pop&&i.go(-1,!1)}).catch(yl),Promise.reject()):(ne.delta&&i.go(-ne.delta,!1),Ye(Ie,J,at))).then(Ie=>{Ie=Ie||tt(J,at,!1),Ie&&(ne.delta&&!ji(Ie,8)?i.go(-ne.delta,!1):ne.type===tf.pop&&ji(Ie,20)&&i.go(-1,!1)),R(J,at,Ie)}).catch(yl)}))}let Lt=Xc(),ft=Xc(),ot;function Ye(V,re,ne){kn(V);const J=ft.list();return J.length?J.forEach(Ve=>Ve(V,re,ne)):console.error(V),Promise.reject(V)}function Ce(){return ot&&l.value!==wo?Promise.resolve():new Promise((V,re)=>{Lt.add([V,re])})}function kn(V){return ot||(ot=!V,An(),Lt.list().forEach(([re,ne])=>V?ne(V):re()),Lt.reset()),V}function Kn(V,re,ne,J){const{scrollBehavior:Ve}=e;if(!Xa||!Ve)return Promise.resolve();const at=!ne&&EJ(LR(V.fullPath,0))||(J||!ne)&&history.state&&history.state.scroll||null;return Kw().then(()=>Ve(V,re,at)).then(Ie=>Ie&&wJ(Ie)).catch(Ie=>Ye(Ie,V,re))}const Rn=V=>i.go(V);let Zt;const Pi=new Set,Jo={currentRoute:l,listening:!0,addRoute:y,removeRoute:w,hasRoute:T,getRoutes:E,resolve:A,options:e,push:H,replace:K,go:Rn,back:()=>Rn(-1),forward:()=>Rn(1),beforeEach:s.add,beforeResolve:a.add,afterEach:c.add,onError:ft.add,isReady:Ce,install(V){const re=this;V.component("RouterLink",s7),V.component("RouterView",l7),V.config.globalProperties.$router=re,Object.defineProperty(V.config.globalProperties,"$route",{enumerable:!0,get:()=>jn(l)}),Xa&&!Zt&&l.value===wo&&(Zt=!0,H(i.location).catch(Ve=>{}));const ne={};for(const Ve in wo)ne[Ve]=sn(()=>l.value[Ve]);V.provide(xv,re),V.provide(CE,qu(ne)),V.provide(Aw,l);const J=V.unmount;Pi.add(V),V.unmount=function(){Pi.delete(V),Pi.size<1&&(h=wo,lt&&lt(),lt=null,l.value=wo,Zt=!1,ot=!1),J()}}};return Jo}function za(e){return e.reduce((t,n)=>t.then(()=>n()),Promise.resolve())}function h7(e,t){const n=[],r=[],i=[],s=Math.max(t.matched.length,e.matched.length);for(let a=0;a<s;a++){const c=t.matched[a];c&&(e.matched.find(h=>Fu(h,c))?r.push(c):n.push(c));const l=e.matched[a];l&&(t.matched.find(h=>Fu(h,l))||i.push(l))}return[n,r,i]}function d7(){return Or(xv)}function p7(){return Or(CE)}const v7={__name:"QuizLabel",props:{quiz:{required:!0}},setup(e){const t=e,n=d7(),r=sn(()=>t.quiz.quizName),i=()=>{n.push({name:"quiz",params:{quizId:t.quiz.key}})};return(s,a)=>(vn(),cr("div",{onClick:i},wl(jn(r)),1))}},g7={class:"home"},m7={__name:"Home",setup(e){const t=IE(),{quizesList:n}=bd(t);return(r,i)=>(vn(),cr("div",g7,[ru(" home "),(vn(!0),cr(Xn,null,c_(jn(n),s=>(vn(),$w(v7,{key:s.key,quiz:s},null,8,["quiz"]))),128))]))}},lM=n1("questionsStore",{state:()=>({questions:[],randomizedQuestions:[],userAnswers:[],timeStart:null,timeEnd:null}),getters:{correctAnswers(e){return e.userAnswers.filter(t=>t.correct)},questionsLeft(e){return e.randomizedQuestions.length-e.userAnswers.length},currentQuestionNumber(e){return e.userAnswers.length},getTimeTotal(e){const t=e.timeEnd-e.timeStart;return new Date(t).toISOString().slice(11,19)}},actions:{randomizeQuestions(){this.randomizedQuestions=sJ(this==null?void 0:this.questions),this.timeStart=performance.now()},setQuestions(e){this.questions=e},addUserQuestion(e){this.userAnswers.push(e)},restartQuiz(){this.userAnswers=[],this.randomizeQuestions()}}}),y7={class:"result"},_7=Oo("br",null,null,-1),w7=Oo("br",null,null,-1),b7={__name:"FinalResult",setup(e){const t=lM(),{getTimeTotal:n}=bd(t),r=sn(()=>t.correctAnswers.length),i=()=>{t.restartQuiz()};return(s,a)=>(vn(),cr("div",y7,[ru(" quiz is over! "),_7,ru(" Your time: "+wl(jn(n))+" ",1),w7,ru(" you got "+wl(jn(r))+" correct answers ",1),Oo("button",{onClick:i},"restart")]))}},E7={key:0},T7={key:1},I7=["onClick"],S7={__name:"Quiz",setup(e){const t=p7(),n=sn(()=>t.params.quizId),r=lM(),i=IE(),{randomizedQuestions:s,timeEnd:a,questionsLeft:c,questions:l,currentQuestionNumber:h}=bd(r),{quizesList:d,isQuizesLoading:v}=bd(i),m=()=>{r.restartQuiz()},y=E=>{r.addUserQuestion(E)},w=sn(()=>d.value.length?d.value.find(E=>E.key===n.value).quizQuestions:[]);return js(c,()=>{c.value==0&&(a.value=performance.now())}),js(w,()=>{m(),w.value.length&&(l.value=w.value,r.randomizeQuestions())},{immediate:!0}),(E,T)=>(vn(),cr("div",null,[jn(v)?(vn(),cr("div",E7,"loading...")):jn(c)>0?(vn(),cr("div",T7,[(vn(!0),cr(Xn,null,c_(jn(s),(A,P)=>S4((vn(),cr("div",{key:A.questionId,class:"question"},[Oo("p",null,wl(`#${P+1} ${A.questionText}`),1),Oo("ol",null,[(vn(!0),cr(Xn,null,c_(A.answers,O=>(vn(),cr("li",{key:O.answerId},[ru(wl(O.answerText)+" ",1),Oo("button",{onClick:H=>y(O)},"add",8,I7)]))),128))])])),[[AV,P===jn(h)]])),128))])):(vn(),cr(Xn,{key:2},[jn(v)?Q4("",!0):(vn(),$w(b7,{key:0}))],64))]))}},C7=[{path:"/",name:"home",component:m7},{path:"/quiz/:quizId",name:"quiz",component:S7}],A7=f7({history:AJ(),routes:C7});var k7="firebase",fM="8.10.1";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ce.registerVersion(k7,fM,"app");ce.SDK_VERSION=fM;NV({created(){const e=JSON.parse('{"apiKey":"AIzaSyBSYLIizVuPZITxXVFeEoFKwfoj-oiyE9s","authDomain":"quiz-519c8.firebaseapp.com","projectId":"quiz-519c8","storageBucket":"quiz-519c8.appspot.com","messagingSenderId":"296664563034","appId":"1:296664563034:web:60573df9dd8c04aa92c763","measurementId":"G-ML6NPSKK6F","databaseURL":"https://quiz-519c8-default-rtdb.europe-west1.firebasedatabase.app/"}');ce.initializeApp(e)},render:()=>Yw(uJ)}).use(A7).use(DV()).mount("#app");
