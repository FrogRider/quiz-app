(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function aw(e,t){const n=Object.create(null),r=e.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return t?i=>!!n[i.toLowerCase()]:i=>!!n[i]}function uw(e){if(_e(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],i=Pt(r)?rU(r):uw(r);if(i)for(const s in i)t[s]=i[s]}return t}else{if(Pt(e))return e;if(st(e))return e}}const eU=/;(?![^(]*\))/g,tU=/:([^]+)/,nU=/\/\*.*?\*\//gs;function rU(e){const t={};return e.replace(nU,"").split(eU).forEach(n=>{if(n){const r=n.split(tU);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function cw(e){let t="";if(Pt(e))t=e;else if(_e(e))for(let n=0;n<e.length;n++){const r=cw(e[n]);r&&(t+=r+" ")}else if(st(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const iU="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",oU=aw(iU);function fN(e){return!!e||e===""}const _h=e=>Pt(e)?e:e==null?"":_e(e)||st(e)&&(e.toString===vN||!Se(e.toString))?JSON.stringify(e,hN,2):String(e),hN=(e,t)=>t&&t.__v_isRef?hN(e,t.value):Ba(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,i])=>(n[`${r} =>`]=i,n),{})}:dN(t)?{[`Set(${t.size})`]:[...t.values()]}:st(t)&&!_e(t)&&!gN(t)?String(t):t,tt={},Va=[],qr=()=>{},sU=()=>!1,aU=/^on[^a-z]/,Xd=e=>aU.test(e),lw=e=>e.startsWith("onUpdate:"),hn=Object.assign,fw=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},uU=Object.prototype.hasOwnProperty,Me=(e,t)=>uU.call(e,t),_e=Array.isArray,Ba=e=>Jd(e)==="[object Map]",dN=e=>Jd(e)==="[object Set]",Se=e=>typeof e=="function",Pt=e=>typeof e=="string",hw=e=>typeof e=="symbol",st=e=>e!==null&&typeof e=="object",pN=e=>st(e)&&Se(e.then)&&Se(e.catch),vN=Object.prototype.toString,Jd=e=>vN.call(e),cU=e=>Jd(e).slice(8,-1),gN=e=>Jd(e)==="[object Object]",dw=e=>Pt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,qh=aw(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Zd=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},lU=/-(\w)/g,hi=Zd(e=>e.replace(lU,(t,n)=>n?n.toUpperCase():"")),fU=/\B([A-Z])/g,Eu=Zd(e=>e.replace(fU,"-$1").toLowerCase()),ep=Zd(e=>e.charAt(0).toUpperCase()+e.slice(1)),zm=Zd(e=>e?`on${ep(e)}`:""),il=(e,t)=>!Object.is(e,t),Qm=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},td=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},mN=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let jS;const hU=()=>jS||(jS=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let Qn;class yN{constructor(t=!1){this.detached=t,this.active=!0,this.effects=[],this.cleanups=[],this.parent=Qn,!t&&Qn&&(this.index=(Qn.scopes||(Qn.scopes=[])).push(this)-1)}run(t){if(this.active){const n=Qn;try{return Qn=this,t()}finally{Qn=n}}}on(){Qn=this}off(){Qn=this.parent}stop(t){if(this.active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this.active=!1}}}function _N(e){return new yN(e)}function dU(e,t=Qn){t&&t.active&&t.effects.push(e)}function pU(){return Qn}function vU(e){Qn&&Qn.cleanups.push(e)}const pw=e=>{const t=new Set(e);return t.w=0,t.n=0,t},wN=e=>(e.w&Co)>0,bN=e=>(e.n&Co)>0,gU=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=Co},mU=e=>{const{deps:t}=e;if(t.length){let n=0;for(let r=0;r<t.length;r++){const i=t[r];wN(i)&&!bN(i)?i.delete(e):t[n++]=i,i.w&=~Co,i.n&=~Co}t.length=n}},Fy=new WeakMap;let Lc=0,Co=1;const Uy=30;let Ur;const As=Symbol(""),jy=Symbol("");class vw{constructor(t,n=null,r){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,dU(this,r)}run(){if(!this.active)return this.fn();let t=Ur,n=_o;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=Ur,Ur=this,_o=!0,Co=1<<++Lc,Lc<=Uy?gU(this):VS(this),this.fn()}finally{Lc<=Uy&&mU(this),Co=1<<--Lc,Ur=this.parent,_o=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Ur===this?this.deferStop=!0:this.active&&(VS(this),this.onStop&&this.onStop(),this.active=!1)}}function VS(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let _o=!0;const EN=[];function Tu(){EN.push(_o),_o=!1}function Iu(){const e=EN.pop();_o=e===void 0?!0:e}function ir(e,t,n){if(_o&&Ur){let r=Fy.get(e);r||Fy.set(e,r=new Map);let i=r.get(n);i||r.set(n,i=pw()),TN(i)}}function TN(e,t){let n=!1;Lc<=Uy?bN(e)||(e.n|=Co,n=!wN(e)):n=!e.has(Ur),n&&(e.add(Ur),Ur.deps.push(e))}function Ui(e,t,n,r,i,s){const u=Fy.get(e);if(!u)return;let c=[];if(t==="clear")c=[...u.values()];else if(n==="length"&&_e(e)){const l=mN(r);u.forEach((h,p)=>{(p==="length"||p>=l)&&c.push(h)})}else switch(n!==void 0&&c.push(u.get(n)),t){case"add":_e(e)?dw(n)&&c.push(u.get("length")):(c.push(u.get(As)),Ba(e)&&c.push(u.get(jy)));break;case"delete":_e(e)||(c.push(u.get(As)),Ba(e)&&c.push(u.get(jy)));break;case"set":Ba(e)&&c.push(u.get(As));break}if(c.length===1)c[0]&&Vy(c[0]);else{const l=[];for(const h of c)h&&l.push(...h);Vy(pw(l))}}function Vy(e,t){const n=_e(e)?e:[...e];for(const r of n)r.computed&&BS(r);for(const r of n)r.computed||BS(r)}function BS(e,t){(e!==Ur||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const yU=aw("__proto__,__v_isRef,__isVue"),IN=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(hw)),_U=gw(),wU=gw(!1,!0),bU=gw(!0),qS=EU();function EU(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const r=Fe(this);for(let s=0,u=this.length;s<u;s++)ir(r,"get",s+"");const i=r[t](...n);return i===-1||i===!1?r[t](...n.map(Fe)):i}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){Tu();const r=Fe(this)[t].apply(this,n);return Iu(),r}}),e}function gw(e=!1,t=!1){return function(r,i,s){if(i==="__v_isReactive")return!e;if(i==="__v_isReadonly")return e;if(i==="__v_isShallow")return t;if(i==="__v_raw"&&s===(e?t?UU:NN:t?kN:AN).get(r))return r;const u=_e(r);if(!e&&u&&Me(qS,i))return Reflect.get(qS,i,s);const c=Reflect.get(r,i,s);return(hw(i)?IN.has(i):yU(i))||(e||ir(r,"get",i),t)?c:pt(c)?u&&dw(i)?c:c.value:st(c)?e?RN(c):np(c):c}}const TU=SN(),IU=SN(!0);function SN(e=!1){return function(n,r,i,s){let u=n[r];if(za(u)&&pt(u)&&!pt(i))return!1;if(!e&&(!nd(i)&&!za(i)&&(u=Fe(u),i=Fe(i)),!_e(n)&&pt(u)&&!pt(i)))return u.value=i,!0;const c=_e(n)&&dw(r)?Number(r)<n.length:Me(n,r),l=Reflect.set(n,r,i,s);return n===Fe(s)&&(c?il(i,u)&&Ui(n,"set",r,i):Ui(n,"add",r,i)),l}}function SU(e,t){const n=Me(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&n&&Ui(e,"delete",t,void 0),r}function CU(e,t){const n=Reflect.has(e,t);return(!hw(t)||!IN.has(t))&&ir(e,"has",t),n}function AU(e){return ir(e,"iterate",_e(e)?"length":As),Reflect.ownKeys(e)}const CN={get:_U,set:TU,deleteProperty:SU,has:CU,ownKeys:AU},kU={get:bU,set(e,t){return!0},deleteProperty(e,t){return!0}},NU=hn({},CN,{get:wU,set:IU}),mw=e=>e,tp=e=>Reflect.getPrototypeOf(e);function wh(e,t,n=!1,r=!1){e=e.__v_raw;const i=Fe(e),s=Fe(t);n||(t!==s&&ir(i,"get",t),ir(i,"get",s));const{has:u}=tp(i),c=r?mw:n?ww:ol;if(u.call(i,t))return c(e.get(t));if(u.call(i,s))return c(e.get(s));e!==i&&e.get(t)}function bh(e,t=!1){const n=this.__v_raw,r=Fe(n),i=Fe(e);return t||(e!==i&&ir(r,"has",e),ir(r,"has",i)),e===i?n.has(e):n.has(e)||n.has(i)}function Eh(e,t=!1){return e=e.__v_raw,!t&&ir(Fe(e),"iterate",As),Reflect.get(e,"size",e)}function KS(e){e=Fe(e);const t=Fe(this);return tp(t).has.call(t,e)||(t.add(e),Ui(t,"add",e,e)),this}function HS(e,t){t=Fe(t);const n=Fe(this),{has:r,get:i}=tp(n);let s=r.call(n,e);s||(e=Fe(e),s=r.call(n,e));const u=i.call(n,e);return n.set(e,t),s?il(t,u)&&Ui(n,"set",e,t):Ui(n,"add",e,t),this}function WS(e){const t=Fe(this),{has:n,get:r}=tp(t);let i=n.call(t,e);i||(e=Fe(e),i=n.call(t,e)),r&&r.call(t,e);const s=t.delete(e);return i&&Ui(t,"delete",e,void 0),s}function GS(){const e=Fe(this),t=e.size!==0,n=e.clear();return t&&Ui(e,"clear",void 0,void 0),n}function Th(e,t){return function(r,i){const s=this,u=s.__v_raw,c=Fe(u),l=t?mw:e?ww:ol;return!e&&ir(c,"iterate",As),u.forEach((h,p)=>r.call(i,l(h),l(p),s))}}function Ih(e,t,n){return function(...r){const i=this.__v_raw,s=Fe(i),u=Ba(s),c=e==="entries"||e===Symbol.iterator&&u,l=e==="keys"&&u,h=i[e](...r),p=n?mw:t?ww:ol;return!t&&ir(s,"iterate",l?jy:As),{next(){const{value:g,done:m}=h.next();return m?{value:g,done:m}:{value:c?[p(g[0]),p(g[1])]:p(g),done:m}},[Symbol.iterator](){return this}}}}function oo(e){return function(...t){return e==="delete"?!1:this}}function RU(){const e={get(s){return wh(this,s)},get size(){return Eh(this)},has:bh,add:KS,set:HS,delete:WS,clear:GS,forEach:Th(!1,!1)},t={get(s){return wh(this,s,!1,!0)},get size(){return Eh(this)},has:bh,add:KS,set:HS,delete:WS,clear:GS,forEach:Th(!1,!0)},n={get(s){return wh(this,s,!0)},get size(){return Eh(this,!0)},has(s){return bh.call(this,s,!0)},add:oo("add"),set:oo("set"),delete:oo("delete"),clear:oo("clear"),forEach:Th(!0,!1)},r={get(s){return wh(this,s,!0,!0)},get size(){return Eh(this,!0)},has(s){return bh.call(this,s,!0)},add:oo("add"),set:oo("set"),delete:oo("delete"),clear:oo("clear"),forEach:Th(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{e[s]=Ih(s,!1,!1),n[s]=Ih(s,!0,!1),t[s]=Ih(s,!1,!0),r[s]=Ih(s,!0,!0)}),[e,n,t,r]}const[OU,PU,DU,xU]=RU();function yw(e,t){const n=t?e?xU:DU:e?PU:OU;return(r,i,s)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?r:Reflect.get(Me(n,i)&&i in r?n:r,i,s)}const LU={get:yw(!1,!1)},MU={get:yw(!1,!0)},FU={get:yw(!0,!1)},AN=new WeakMap,kN=new WeakMap,NN=new WeakMap,UU=new WeakMap;function jU(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function VU(e){return e.__v_skip||!Object.isExtensible(e)?0:jU(cU(e))}function np(e){return za(e)?e:_w(e,!1,CN,LU,AN)}function BU(e){return _w(e,!1,NU,MU,kN)}function RN(e){return _w(e,!0,kU,FU,NN)}function _w(e,t,n,r,i){if(!st(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=i.get(e);if(s)return s;const u=VU(e);if(u===0)return e;const c=new Proxy(e,u===2?r:n);return i.set(e,c),c}function Di(e){return za(e)?Di(e.__v_raw):!!(e&&e.__v_isReactive)}function za(e){return!!(e&&e.__v_isReadonly)}function nd(e){return!!(e&&e.__v_isShallow)}function ON(e){return Di(e)||za(e)}function Fe(e){const t=e&&e.__v_raw;return t?Fe(t):e}function Qa(e){return td(e,"__v_skip",!0),e}const ol=e=>st(e)?np(e):e,ww=e=>st(e)?RN(e):e;function PN(e){_o&&Ur&&(e=Fe(e),TN(e.dep||(e.dep=pw())))}function DN(e,t){e=Fe(e),e.dep&&Vy(e.dep)}function pt(e){return!!(e&&e.__v_isRef===!0)}function bw(e){return qU(e,!1)}function qU(e,t){return pt(e)?e:new KU(e,t)}class KU{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:Fe(t),this._value=n?t:ol(t)}get value(){return PN(this),this._value}set value(t){const n=this.__v_isShallow||nd(t)||za(t);t=n?t:Fe(t),il(t,this._rawValue)&&(this._rawValue=t,this._value=n?t:ol(t),DN(this))}}function cs(e){return pt(e)?e.value:e}const HU={get:(e,t,n)=>cs(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const i=e[t];return pt(i)&&!pt(n)?(i.value=n,!0):Reflect.set(e,t,n,r)}};function xN(e){return Di(e)?e:new Proxy(e,HU)}function WU(e){const t=_e(e)?new Array(e.length):{};for(const n in e)t[n]=LN(e,n);return t}class GU{constructor(t,n,r){this._object=t,this._key=n,this._defaultValue=r,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}}function LN(e,t,n){const r=e[t];return pt(r)?r:new GU(e,t,n)}var MN;class $U{constructor(t,n,r,i){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this[MN]=!1,this._dirty=!0,this.effect=new vw(t,()=>{this._dirty||(this._dirty=!0,DN(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=r}get value(){const t=Fe(this);return PN(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}MN="__v_isReadonly";function zU(e,t,n=!1){let r,i;const s=Se(e);return s?(r=e,i=qr):(r=e.get,i=e.set),new $U(r,i,s||!i,n)}function wo(e,t,n,r){let i;try{i=r?e(...r):e()}catch(s){rp(s,t,n)}return i}function yr(e,t,n,r){if(Se(e)){const s=wo(e,t,n,r);return s&&pN(s)&&s.catch(u=>{rp(u,t,n)}),s}const i=[];for(let s=0;s<e.length;s++)i.push(yr(e[s],t,n,r));return i}function rp(e,t,n,r=!0){const i=t?t.vnode:null;if(t){let s=t.parent;const u=t.proxy,c=n;for(;s;){const h=s.ec;if(h){for(let p=0;p<h.length;p++)if(h[p](e,u,c)===!1)return}s=s.parent}const l=t.appContext.config.errorHandler;if(l){wo(l,null,10,[e,u,c]);return}}QU(e,n,i,r)}function QU(e,t,n,r=!0){console.error(e)}let sl=!1,By=!1;const an=[];let oi=0;const qa=[];let ki=null,ps=0;const FN=Promise.resolve();let Ew=null;function UN(e){const t=Ew||FN;return e?t.then(this?e.bind(this):e):t}function YU(e){let t=oi+1,n=an.length;for(;t<n;){const r=t+n>>>1;al(an[r])<e?t=r+1:n=r}return t}function Tw(e){(!an.length||!an.includes(e,sl&&e.allowRecurse?oi+1:oi))&&(e.id==null?an.push(e):an.splice(YU(e.id),0,e),jN())}function jN(){!sl&&!By&&(By=!0,Ew=FN.then(BN))}function XU(e){const t=an.indexOf(e);t>oi&&an.splice(t,1)}function JU(e){_e(e)?qa.push(...e):(!ki||!ki.includes(e,e.allowRecurse?ps+1:ps))&&qa.push(e),jN()}function $S(e,t=sl?oi+1:0){for(;t<an.length;t++){const n=an[t];n&&n.pre&&(an.splice(t,1),t--,n())}}function VN(e){if(qa.length){const t=[...new Set(qa)];if(qa.length=0,ki){ki.push(...t);return}for(ki=t,ki.sort((n,r)=>al(n)-al(r)),ps=0;ps<ki.length;ps++)ki[ps]();ki=null,ps=0}}const al=e=>e.id==null?1/0:e.id,ZU=(e,t)=>{const n=al(e)-al(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function BN(e){By=!1,sl=!0,an.sort(ZU);const t=qr;try{for(oi=0;oi<an.length;oi++){const n=an[oi];n&&n.active!==!1&&wo(n,null,14)}}finally{oi=0,an.length=0,VN(),sl=!1,Ew=null,(an.length||qa.length)&&BN()}}function ej(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||tt;let i=n;const s=t.startsWith("update:"),u=s&&t.slice(7);if(u&&u in r){const p=`${u==="modelValue"?"model":u}Modifiers`,{number:g,trim:m}=r[p]||tt;m&&(i=n.map(_=>Pt(_)?_.trim():_)),g&&(i=n.map(mN))}let c,l=r[c=zm(t)]||r[c=zm(hi(t))];!l&&s&&(l=r[c=zm(Eu(t))]),l&&yr(l,e,6,i);const h=r[c+"Once"];if(h){if(!e.emitted)e.emitted={};else if(e.emitted[c])return;e.emitted[c]=!0,yr(h,e,6,i)}}function qN(e,t,n=!1){const r=t.emitsCache,i=r.get(e);if(i!==void 0)return i;const s=e.emits;let u={},c=!1;if(!Se(e)){const l=h=>{const p=qN(h,t,!0);p&&(c=!0,hn(u,p))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!s&&!c?(st(e)&&r.set(e,null),null):(_e(s)?s.forEach(l=>u[l]=null):hn(u,s),st(e)&&r.set(e,u),u)}function ip(e,t){return!e||!Xd(t)?!1:(t=t.slice(2).replace(/Once$/,""),Me(e,t[0].toLowerCase()+t.slice(1))||Me(e,Eu(t))||Me(e,t))}let Zn=null,op=null;function rd(e){const t=Zn;return Zn=e,op=e&&e.type.__scopeId||null,t}function tj(e){op=e}function nj(){op=null}function rj(e,t=Zn,n){if(!t||e._n)return e;const r=(...i)=>{r._d&&iC(-1);const s=rd(t);let u;try{u=e(...i)}finally{rd(s),r._d&&iC(1)}return u};return r._n=!0,r._c=!0,r._d=!0,r}function Ym(e){const{type:t,vnode:n,proxy:r,withProxy:i,props:s,propsOptions:[u],slots:c,attrs:l,emit:h,render:p,renderCache:g,data:m,setupState:_,ctx:b,inheritAttrs:E}=e;let I,N;const x=rd(e);try{if(n.shapeFlag&4){const z=i||r;I=ii(p.call(z,z,g,s,_,m,b)),N=l}else{const z=t;I=ii(z.length>1?z(s,{attrs:l,slots:c,emit:h}):z(s,null)),N=t.props?l:ij(l)}}catch(z){qc.length=0,rp(z,e,1),I=er(xi)}let P=I;if(N&&E!==!1){const z=Object.keys(N),{shapeFlag:W}=P;z.length&&W&7&&(u&&z.some(lw)&&(N=oj(N,u)),P=Ao(P,N))}return n.dirs&&(P=Ao(P),P.dirs=P.dirs?P.dirs.concat(n.dirs):n.dirs),n.transition&&(P.transition=n.transition),I=P,rd(x),I}const ij=e=>{let t;for(const n in e)(n==="class"||n==="style"||Xd(n))&&((t||(t={}))[n]=e[n]);return t},oj=(e,t)=>{const n={};for(const r in e)(!lw(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function sj(e,t,n){const{props:r,children:i,component:s}=e,{props:u,children:c,patchFlag:l}=t,h=s.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?zS(r,u,h):!!u;if(l&8){const p=t.dynamicProps;for(let g=0;g<p.length;g++){const m=p[g];if(u[m]!==r[m]&&!ip(h,m))return!0}}}else return(i||c)&&(!c||!c.$stable)?!0:r===u?!1:r?u?zS(r,u,h):!0:!!u;return!1}function zS(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(t[s]!==e[s]&&!ip(n,s))return!0}return!1}function aj({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}const uj=e=>e.__isSuspense;function cj(e,t){t&&t.pendingBranch?_e(e)?t.effects.push(...e):t.effects.push(e):JU(e)}function lj(e,t){if(Vt){let n=Vt.provides;const r=Vt.parent&&Vt.parent.provides;r===n&&(n=Vt.provides=Object.create(r)),n[e]=t}}function jc(e,t,n=!1){const r=Vt||Zn;if(r){const i=r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(i&&e in i)return i[e];if(arguments.length>1)return n&&Se(t)?t.call(r.proxy):t}}function fj(e,t){return Iw(e,null,{flush:"post"})}const Sh={};function Vc(e,t,n){return Iw(e,t,n)}function Iw(e,t,{immediate:n,deep:r,flush:i,onTrack:s,onTrigger:u}=tt){const c=Vt;let l,h=!1,p=!1;if(pt(e)?(l=()=>e.value,h=nd(e)):Di(e)?(l=()=>e,r=!0):_e(e)?(p=!0,h=e.some(P=>Di(P)||nd(P)),l=()=>e.map(P=>{if(pt(P))return P.value;if(Di(P))return _s(P);if(Se(P))return wo(P,c,2)})):Se(e)?t?l=()=>wo(e,c,2):l=()=>{if(!(c&&c.isUnmounted))return g&&g(),yr(e,c,3,[m])}:l=qr,t&&r){const P=l;l=()=>_s(P())}let g,m=P=>{g=N.onStop=()=>{wo(P,c,4)}},_;if(cl)if(m=qr,t?n&&yr(t,c,3,[l(),p?[]:void 0,m]):l(),i==="sync"){const P=c4();_=P.__watcherHandles||(P.__watcherHandles=[])}else return qr;let b=p?new Array(e.length).fill(Sh):Sh;const E=()=>{if(N.active)if(t){const P=N.run();(r||h||(p?P.some((z,W)=>il(z,b[W])):il(P,b)))&&(g&&g(),yr(t,c,3,[P,b===Sh?void 0:p&&b[0]===Sh?[]:b,m]),b=P)}else N.run()};E.allowRecurse=!!t;let I;i==="sync"?I=E:i==="post"?I=()=>Ln(E,c&&c.suspense):(E.pre=!0,c&&(E.id=c.uid),I=()=>Tw(E));const N=new vw(l,I);t?n?E():b=N.run():i==="post"?Ln(N.run.bind(N),c&&c.suspense):N.run();const x=()=>{N.stop(),c&&c.scope&&fw(c.scope.effects,N)};return _&&_.push(x),x}function hj(e,t,n){const r=this.proxy,i=Pt(e)?e.includes(".")?KN(r,e):()=>r[e]:e.bind(r,r);let s;Se(t)?s=t:(s=t.handler,n=t);const u=Vt;Ya(this);const c=Iw(i,s.bind(r),n);return u?Ya(u):ks(),c}function KN(e,t){const n=t.split(".");return()=>{let r=e;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function _s(e,t){if(!st(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),pt(e))_s(e.value,t);else if(_e(e))for(let n=0;n<e.length;n++)_s(e[n],t);else if(dN(e)||Ba(e))e.forEach(n=>{_s(n,t)});else if(gN(e))for(const n in e)_s(e[n],t);return e}function dj(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return up(()=>{e.isMounted=!0}),$N(()=>{e.isUnmounting=!0}),e}const hr=[Function,Array],pj={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:hr,onEnter:hr,onAfterEnter:hr,onEnterCancelled:hr,onBeforeLeave:hr,onLeave:hr,onAfterLeave:hr,onLeaveCancelled:hr,onBeforeAppear:hr,onAppear:hr,onAfterAppear:hr,onAppearCancelled:hr},setup(e,{slots:t}){const n=Nw(),r=dj();let i;return()=>{const s=t.default&&WN(t.default(),!0);if(!s||!s.length)return;let u=s[0];if(s.length>1){for(const E of s)if(E.type!==xi){u=E;break}}const c=Fe(e),{mode:l}=c;if(r.isLeaving)return Xm(u);const h=QS(u);if(!h)return Xm(u);const p=qy(h,c,r,n);Ky(h,p);const g=n.subTree,m=g&&QS(g);let _=!1;const{getTransitionKey:b}=h.type;if(b){const E=b();i===void 0?i=E:E!==i&&(i=E,_=!0)}if(m&&m.type!==xi&&(!vs(h,m)||_)){const E=qy(m,c,r,n);if(Ky(m,E),l==="out-in")return r.isLeaving=!0,E.afterLeave=()=>{r.isLeaving=!1,n.update.active!==!1&&n.update()},Xm(u);l==="in-out"&&h.type!==xi&&(E.delayLeave=(I,N,x)=>{const P=HN(r,m);P[String(m.key)]=m,I._leaveCb=()=>{N(),I._leaveCb=void 0,delete p.delayedLeave},p.delayedLeave=x})}return u}}},vj=pj;function HN(e,t){const{leavingVNodes:n}=e;let r=n.get(t.type);return r||(r=Object.create(null),n.set(t.type,r)),r}function qy(e,t,n,r){const{appear:i,mode:s,persisted:u=!1,onBeforeEnter:c,onEnter:l,onAfterEnter:h,onEnterCancelled:p,onBeforeLeave:g,onLeave:m,onAfterLeave:_,onLeaveCancelled:b,onBeforeAppear:E,onAppear:I,onAfterAppear:N,onAppearCancelled:x}=t,P=String(e.key),z=HN(n,e),W=(M,de)=>{M&&yr(M,r,9,de)},V=(M,de)=>{const k=de[1];W(M,de),_e(M)?M.every(Je=>Je.length<=1)&&k():M.length<=1&&k()},ne={mode:s,persisted:u,beforeEnter(M){let de=c;if(!n.isMounted)if(i)de=E||c;else return;M._leaveCb&&M._leaveCb(!0);const k=z[P];k&&vs(e,k)&&k.el._leaveCb&&k.el._leaveCb(),W(de,[M])},enter(M){let de=l,k=h,Je=p;if(!n.isMounted)if(i)de=I||l,k=N||h,Je=x||p;else return;let xt=!1;const qn=M._enterCb=gn=>{xt||(xt=!0,gn?W(Je,[M]):W(k,[M]),ne.delayedLeave&&ne.delayedLeave(),M._enterCb=void 0)};de?V(de,[M,qn]):qn()},leave(M,de){const k=String(e.key);if(M._enterCb&&M._enterCb(!0),n.isUnmounting)return de();W(g,[M]);let Je=!1;const xt=M._leaveCb=qn=>{Je||(Je=!0,de(),qn?W(b,[M]):W(_,[M]),M._leaveCb=void 0,z[k]===e&&delete z[k])};z[k]=e,m?V(m,[M,xt]):xt()},clone(M){return qy(M,t,n,r)}};return ne}function Xm(e){if(sp(e))return e=Ao(e),e.children=null,e}function QS(e){return sp(e)?e.children?e.children[0]:void 0:e}function Ky(e,t){e.shapeFlag&6&&e.component?Ky(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function WN(e,t=!1,n){let r=[],i=0;for(let s=0;s<e.length;s++){let u=e[s];const c=n==null?u.key:String(n)+String(u.key!=null?u.key:s);u.type===Mn?(u.patchFlag&128&&i++,r=r.concat(WN(u.children,t,c))):(t||u.type!==xi)&&r.push(c!=null?Ao(u,{key:c}):u)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}const Kh=e=>!!e.type.__asyncLoader,sp=e=>e.type.__isKeepAlive;function gj(e,t){GN(e,"a",t)}function mj(e,t){GN(e,"da",t)}function GN(e,t,n=Vt){const r=e.__wdc||(e.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(ap(t,r,n),n){let i=n.parent;for(;i&&i.parent;)sp(i.parent.vnode)&&yj(r,t,n,i),i=i.parent}}function yj(e,t,n,r){const i=ap(t,e,r,!0);Sw(()=>{fw(r[t],i)},n)}function ap(e,t,n=Vt,r=!1){if(n){const i=n[e]||(n[e]=[]),s=t.__weh||(t.__weh=(...u)=>{if(n.isUnmounted)return;Tu(),Ya(n);const c=yr(t,n,e,u);return ks(),Iu(),c});return r?i.unshift(s):i.push(s),s}}const Ki=e=>(t,n=Vt)=>(!cl||e==="sp")&&ap(e,(...r)=>t(...r),n),_j=Ki("bm"),up=Ki("m"),wj=Ki("bu"),bj=Ki("u"),$N=Ki("bum"),Sw=Ki("um"),Ej=Ki("sp"),Tj=Ki("rtg"),Ij=Ki("rtc");function Sj(e,t=Vt){ap("ec",e,t)}function Cj(e,t){const n=Zn;if(n===null)return e;const r=fp(n)||n.proxy,i=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[u,c,l,h=tt]=t[s];u&&(Se(u)&&(u={mounted:u,updated:u}),u.deep&&_s(c),i.push({dir:u,instance:r,value:c,oldValue:void 0,arg:l,modifiers:h}))}return e}function ss(e,t,n,r){const i=e.dirs,s=t&&t.dirs;for(let u=0;u<i.length;u++){const c=i[u];s&&(c.oldValue=s[u].value);let l=c.dir[r];l&&(Tu(),yr(l,n,8,[e.el,c,e,t]),Iu())}}const zN="components";function Aj(e,t){return Nj(zN,e,!0,t)||e}const kj=Symbol();function Nj(e,t,n=!0,r=!1){const i=Zn||Vt;if(i){const s=i.type;if(e===zN){const c=o4(s,!1);if(c&&(c===t||c===hi(t)||c===ep(hi(t))))return s}const u=YS(i[e]||s[e],t)||YS(i.appContext[e],t);return!u&&r?s:u}}function YS(e,t){return e&&(e[t]||e[hi(t)]||e[ep(hi(t))])}function XS(e,t,n,r){let i;const s=n&&n[r];if(_e(e)||Pt(e)){i=new Array(e.length);for(let u=0,c=e.length;u<c;u++)i[u]=t(e[u],u,void 0,s&&s[u])}else if(typeof e=="number"){i=new Array(e);for(let u=0;u<e;u++)i[u]=t(u+1,u,void 0,s&&s[u])}else if(st(e))if(e[Symbol.iterator])i=Array.from(e,(u,c)=>t(u,c,void 0,s&&s[c]));else{const u=Object.keys(e);i=new Array(u.length);for(let c=0,l=u.length;c<l;c++){const h=u[c];i[c]=t(e[h],h,c,s&&s[c])}}else i=[];return n&&(n[r]=i),i}const Hy=e=>e?iR(e)?fp(e)||e.proxy:Hy(e.parent):null,Bc=hn(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Hy(e.parent),$root:e=>Hy(e.root),$emit:e=>e.emit,$options:e=>Cw(e),$forceUpdate:e=>e.f||(e.f=()=>Tw(e.update)),$nextTick:e=>e.n||(e.n=UN.bind(e.proxy)),$watch:e=>hj.bind(e)}),Jm=(e,t)=>e!==tt&&!e.__isScriptSetup&&Me(e,t),Rj={get({_:e},t){const{ctx:n,setupState:r,data:i,props:s,accessCache:u,type:c,appContext:l}=e;let h;if(t[0]!=="$"){const _=u[t];if(_!==void 0)switch(_){case 1:return r[t];case 2:return i[t];case 4:return n[t];case 3:return s[t]}else{if(Jm(r,t))return u[t]=1,r[t];if(i!==tt&&Me(i,t))return u[t]=2,i[t];if((h=e.propsOptions[0])&&Me(h,t))return u[t]=3,s[t];if(n!==tt&&Me(n,t))return u[t]=4,n[t];Wy&&(u[t]=0)}}const p=Bc[t];let g,m;if(p)return t==="$attrs"&&ir(e,"get",t),p(e);if((g=c.__cssModules)&&(g=g[t]))return g;if(n!==tt&&Me(n,t))return u[t]=4,n[t];if(m=l.config.globalProperties,Me(m,t))return m[t]},set({_:e},t,n){const{data:r,setupState:i,ctx:s}=e;return Jm(i,t)?(i[t]=n,!0):r!==tt&&Me(r,t)?(r[t]=n,!0):Me(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:i,propsOptions:s}},u){let c;return!!n[u]||e!==tt&&Me(e,u)||Jm(t,u)||(c=s[0])&&Me(c,u)||Me(r,u)||Me(Bc,u)||Me(i.config.globalProperties,u)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Me(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};let Wy=!0;function Oj(e){const t=Cw(e),n=e.proxy,r=e.ctx;Wy=!1,t.beforeCreate&&JS(t.beforeCreate,e,"bc");const{data:i,computed:s,methods:u,watch:c,provide:l,inject:h,created:p,beforeMount:g,mounted:m,beforeUpdate:_,updated:b,activated:E,deactivated:I,beforeDestroy:N,beforeUnmount:x,destroyed:P,unmounted:z,render:W,renderTracked:V,renderTriggered:ne,errorCaptured:M,serverPrefetch:de,expose:k,inheritAttrs:Je,components:xt,directives:qn,filters:gn}=t;if(h&&Pj(h,r,null,e.appContext.config.unwrapInjectedRef),u)for(const Ze in u){const Te=u[Ze];Se(Te)&&(r[Ze]=Te.bind(n))}if(i){const Ze=i.call(n,n);st(Ze)&&(e.data=np(Ze))}if(Wy=!0,s)for(const Ze in s){const Te=s[Ze],Ir=Se(Te)?Te.bind(n,n):Se(Te.get)?Te.get.bind(n,n):qr,Sr=!Se(Te)&&Se(Te.set)?Te.set.bind(n):qr,Cr=od({get:Ir,set:Sr});Object.defineProperty(r,Ze,{enumerable:!0,configurable:!0,get:()=>Cr.value,set:Kn=>Cr.value=Kn})}if(c)for(const Ze in c)QN(c[Ze],r,n,Ze);if(l){const Ze=Se(l)?l.call(n):l;Reflect.ownKeys(Ze).forEach(Te=>{lj(Te,Ze[Te])})}p&&JS(p,e,"c");function gt(Ze,Te){_e(Te)?Te.forEach(Ir=>Ze(Ir.bind(n))):Te&&Ze(Te.bind(n))}if(gt(_j,g),gt(up,m),gt(wj,_),gt(bj,b),gt(gj,E),gt(mj,I),gt(Sj,M),gt(Ij,V),gt(Tj,ne),gt($N,x),gt(Sw,z),gt(Ej,de),_e(k))if(k.length){const Ze=e.exposed||(e.exposed={});k.forEach(Te=>{Object.defineProperty(Ze,Te,{get:()=>n[Te],set:Ir=>n[Te]=Ir})})}else e.exposed||(e.exposed={});W&&e.render===qr&&(e.render=W),Je!=null&&(e.inheritAttrs=Je),xt&&(e.components=xt),qn&&(e.directives=qn)}function Pj(e,t,n=qr,r=!1){_e(e)&&(e=Gy(e));for(const i in e){const s=e[i];let u;st(s)?"default"in s?u=jc(s.from||i,s.default,!0):u=jc(s.from||i):u=jc(s),pt(u)&&r?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>u.value,set:c=>u.value=c}):t[i]=u}}function JS(e,t,n){yr(_e(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function QN(e,t,n,r){const i=r.includes(".")?KN(n,r):()=>n[r];if(Pt(e)){const s=t[e];Se(s)&&Vc(i,s)}else if(Se(e))Vc(i,e.bind(n));else if(st(e))if(_e(e))e.forEach(s=>QN(s,t,n,r));else{const s=Se(e.handler)?e.handler.bind(n):t[e.handler];Se(s)&&Vc(i,s,e)}}function Cw(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:i,optionsCache:s,config:{optionMergeStrategies:u}}=e.appContext,c=s.get(t);let l;return c?l=c:!i.length&&!n&&!r?l=t:(l={},i.length&&i.forEach(h=>id(l,h,u,!0)),id(l,t,u)),st(t)&&s.set(t,l),l}function id(e,t,n,r=!1){const{mixins:i,extends:s}=t;s&&id(e,s,n,!0),i&&i.forEach(u=>id(e,u,n,!0));for(const u in t)if(!(r&&u==="expose")){const c=Dj[u]||n&&n[u];e[u]=c?c(e[u],t[u]):t[u]}return e}const Dj={data:ZS,props:ls,emits:ls,methods:ls,computed:ls,beforeCreate:bn,created:bn,beforeMount:bn,mounted:bn,beforeUpdate:bn,updated:bn,beforeDestroy:bn,beforeUnmount:bn,destroyed:bn,unmounted:bn,activated:bn,deactivated:bn,errorCaptured:bn,serverPrefetch:bn,components:ls,directives:ls,watch:Lj,provide:ZS,inject:xj};function ZS(e,t){return t?e?function(){return hn(Se(e)?e.call(this,this):e,Se(t)?t.call(this,this):t)}:t:e}function xj(e,t){return ls(Gy(e),Gy(t))}function Gy(e){if(_e(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function bn(e,t){return e?[...new Set([].concat(e,t))]:t}function ls(e,t){return e?hn(hn(Object.create(null),e),t):t}function Lj(e,t){if(!e)return t;if(!t)return e;const n=hn(Object.create(null),e);for(const r in t)n[r]=bn(e[r],t[r]);return n}function Mj(e,t,n,r=!1){const i={},s={};td(s,lp,1),e.propsDefaults=Object.create(null),YN(e,t,i,s);for(const u in e.propsOptions[0])u in i||(i[u]=void 0);n?e.props=r?i:BU(i):e.type.props?e.props=i:e.props=s,e.attrs=s}function Fj(e,t,n,r){const{props:i,attrs:s,vnode:{patchFlag:u}}=e,c=Fe(i),[l]=e.propsOptions;let h=!1;if((r||u>0)&&!(u&16)){if(u&8){const p=e.vnode.dynamicProps;for(let g=0;g<p.length;g++){let m=p[g];if(ip(e.emitsOptions,m))continue;const _=t[m];if(l)if(Me(s,m))_!==s[m]&&(s[m]=_,h=!0);else{const b=hi(m);i[b]=$y(l,c,b,_,e,!1)}else _!==s[m]&&(s[m]=_,h=!0)}}}else{YN(e,t,i,s)&&(h=!0);let p;for(const g in c)(!t||!Me(t,g)&&((p=Eu(g))===g||!Me(t,p)))&&(l?n&&(n[g]!==void 0||n[p]!==void 0)&&(i[g]=$y(l,c,g,void 0,e,!0)):delete i[g]);if(s!==c)for(const g in s)(!t||!Me(t,g))&&(delete s[g],h=!0)}h&&Ui(e,"set","$attrs")}function YN(e,t,n,r){const[i,s]=e.propsOptions;let u=!1,c;if(t)for(let l in t){if(qh(l))continue;const h=t[l];let p;i&&Me(i,p=hi(l))?!s||!s.includes(p)?n[p]=h:(c||(c={}))[p]=h:ip(e.emitsOptions,l)||(!(l in r)||h!==r[l])&&(r[l]=h,u=!0)}if(s){const l=Fe(n),h=c||tt;for(let p=0;p<s.length;p++){const g=s[p];n[g]=$y(i,l,g,h[g],e,!Me(h,g))}}return u}function $y(e,t,n,r,i,s){const u=e[n];if(u!=null){const c=Me(u,"default");if(c&&r===void 0){const l=u.default;if(u.type!==Function&&Se(l)){const{propsDefaults:h}=i;n in h?r=h[n]:(Ya(i),r=h[n]=l.call(null,t),ks())}else r=l}u[0]&&(s&&!c?r=!1:u[1]&&(r===""||r===Eu(n))&&(r=!0))}return r}function XN(e,t,n=!1){const r=t.propsCache,i=r.get(e);if(i)return i;const s=e.props,u={},c=[];let l=!1;if(!Se(e)){const p=g=>{l=!0;const[m,_]=XN(g,t,!0);hn(u,m),_&&c.push(..._)};!n&&t.mixins.length&&t.mixins.forEach(p),e.extends&&p(e.extends),e.mixins&&e.mixins.forEach(p)}if(!s&&!l)return st(e)&&r.set(e,Va),Va;if(_e(s))for(let p=0;p<s.length;p++){const g=hi(s[p]);eC(g)&&(u[g]=tt)}else if(s)for(const p in s){const g=hi(p);if(eC(g)){const m=s[p],_=u[g]=_e(m)||Se(m)?{type:m}:Object.assign({},m);if(_){const b=rC(Boolean,_.type),E=rC(String,_.type);_[0]=b>-1,_[1]=E<0||b<E,(b>-1||Me(_,"default"))&&c.push(g)}}}const h=[u,c];return st(e)&&r.set(e,h),h}function eC(e){return e[0]!=="$"}function tC(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function nC(e,t){return tC(e)===tC(t)}function rC(e,t){return _e(t)?t.findIndex(n=>nC(n,e)):Se(t)&&nC(t,e)?0:-1}const JN=e=>e[0]==="_"||e==="$stable",Aw=e=>_e(e)?e.map(ii):[ii(e)],Uj=(e,t,n)=>{if(t._n)return t;const r=rj((...i)=>Aw(t(...i)),n);return r._c=!1,r},ZN=(e,t,n)=>{const r=e._ctx;for(const i in e){if(JN(i))continue;const s=e[i];if(Se(s))t[i]=Uj(i,s,r);else if(s!=null){const u=Aw(s);t[i]=()=>u}}},eR=(e,t)=>{const n=Aw(t);e.slots.default=()=>n},jj=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=Fe(t),td(t,"_",n)):ZN(t,e.slots={})}else e.slots={},t&&eR(e,t);td(e.slots,lp,1)},Vj=(e,t,n)=>{const{vnode:r,slots:i}=e;let s=!0,u=tt;if(r.shapeFlag&32){const c=t._;c?n&&c===1?s=!1:(hn(i,t),!n&&c===1&&delete i._):(s=!t.$stable,ZN(t,i)),u=t}else t&&(eR(e,t),u={default:1});if(s)for(const c in i)!JN(c)&&!(c in u)&&delete i[c]};function tR(){return{app:null,config:{isNativeTag:sU,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Bj=0;function qj(e,t){return function(r,i=null){Se(r)||(r=Object.assign({},r)),i!=null&&!st(i)&&(i=null);const s=tR(),u=new Set;let c=!1;const l=s.app={_uid:Bj++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:l4,get config(){return s.config},set config(h){},use(h,...p){return u.has(h)||(h&&Se(h.install)?(u.add(h),h.install(l,...p)):Se(h)&&(u.add(h),h(l,...p))),l},mixin(h){return s.mixins.includes(h)||s.mixins.push(h),l},component(h,p){return p?(s.components[h]=p,l):s.components[h]},directive(h,p){return p?(s.directives[h]=p,l):s.directives[h]},mount(h,p,g){if(!c){const m=er(r,i);return m.appContext=s,p&&t?t(m,h):e(m,h,g),c=!0,l._container=h,h.__vue_app__=l,fp(m.component)||m.component.proxy}},unmount(){c&&(e(null,l._container),delete l._container.__vue_app__)},provide(h,p){return s.provides[h]=p,l}};return l}}function zy(e,t,n,r,i=!1){if(_e(e)){e.forEach((m,_)=>zy(m,t&&(_e(t)?t[_]:t),n,r,i));return}if(Kh(r)&&!i)return;const s=r.shapeFlag&4?fp(r.component)||r.component.proxy:r.el,u=i?null:s,{i:c,r:l}=e,h=t&&t.r,p=c.refs===tt?c.refs={}:c.refs,g=c.setupState;if(h!=null&&h!==l&&(Pt(h)?(p[h]=null,Me(g,h)&&(g[h]=null)):pt(h)&&(h.value=null)),Se(l))wo(l,c,12,[u,p]);else{const m=Pt(l),_=pt(l);if(m||_){const b=()=>{if(e.f){const E=m?Me(g,l)?g[l]:p[l]:l.value;i?_e(E)&&fw(E,s):_e(E)?E.includes(s)||E.push(s):m?(p[l]=[s],Me(g,l)&&(g[l]=p[l])):(l.value=[s],e.k&&(p[e.k]=l.value))}else m?(p[l]=u,Me(g,l)&&(g[l]=u)):_&&(l.value=u,e.k&&(p[e.k]=u))};u?(b.id=-1,Ln(b,n)):b()}}}const Ln=cj;function Kj(e){return Hj(e)}function Hj(e,t){const n=hU();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:u,createText:c,createComment:l,setText:h,setElementText:p,parentNode:g,nextSibling:m,setScopeId:_=qr,insertStaticContent:b}=e,E=(A,R,D,U=null,F=null,$=null,X=!1,G=null,Y=!!R.dynamicChildren)=>{if(A===R)return;A&&!vs(A,R)&&(U=Vo(A),Kn(A,F,$,!0),A=null),R.patchFlag===-2&&(Y=!1,R.dynamicChildren=null);const{type:q,ref:ue,shapeFlag:ie}=R;switch(q){case cp:I(A,R,D,U);break;case xi:N(A,R,D,U);break;case Hh:A==null&&x(R,D,U,X);break;case Mn:xt(A,R,D,U,F,$,X,G,Y);break;default:ie&1?W(A,R,D,U,F,$,X,G,Y):ie&6?qn(A,R,D,U,F,$,X,G,Y):(ie&64||ie&128)&&q.process(A,R,D,U,F,$,X,G,Y,zi)}ue!=null&&F&&zy(ue,A&&A.ref,$,R||A,!R)},I=(A,R,D,U)=>{if(A==null)r(R.el=c(R.children),D,U);else{const F=R.el=A.el;R.children!==A.children&&h(F,R.children)}},N=(A,R,D,U)=>{A==null?r(R.el=l(R.children||""),D,U):R.el=A.el},x=(A,R,D,U)=>{[A.el,A.anchor]=b(A.children,R,D,U,A.el,A.anchor)},P=({el:A,anchor:R},D,U)=>{let F;for(;A&&A!==R;)F=m(A),r(A,D,U),A=F;r(R,D,U)},z=({el:A,anchor:R})=>{let D;for(;A&&A!==R;)D=m(A),i(A),A=D;i(R)},W=(A,R,D,U,F,$,X,G,Y)=>{X=X||R.type==="svg",A==null?V(R,D,U,F,$,X,G,Y):de(A,R,F,$,X,G,Y)},V=(A,R,D,U,F,$,X,G)=>{let Y,q;const{type:ue,props:ie,shapeFlag:ce,transition:ge,dirs:Ne}=A;if(Y=A.el=u(A.type,$,ie&&ie.is,ie),ce&8?p(Y,A.children):ce&16&&M(A.children,Y,null,U,F,$&&ue!=="foreignObject",X,G),Ne&&ss(A,null,U,"created"),ie){for(const Ue in ie)Ue!=="value"&&!qh(Ue)&&s(Y,Ue,null,ie[Ue],$,A.children,U,F,Hn);"value"in ie&&s(Y,"value",null,ie.value),(q=ie.onVnodeBeforeMount)&&ni(q,U,A)}ne(Y,A,A.scopeId,X,U),Ne&&ss(A,null,U,"beforeMount");const fe=(!F||F&&!F.pendingBranch)&&ge&&!ge.persisted;fe&&ge.beforeEnter(Y),r(Y,R,D),((q=ie&&ie.onVnodeMounted)||fe||Ne)&&Ln(()=>{q&&ni(q,U,A),fe&&ge.enter(Y),Ne&&ss(A,null,U,"mounted")},F)},ne=(A,R,D,U,F)=>{if(D&&_(A,D),U)for(let $=0;$<U.length;$++)_(A,U[$]);if(F){let $=F.subTree;if(R===$){const X=F.vnode;ne(A,X,X.scopeId,X.slotScopeIds,F.parent)}}},M=(A,R,D,U,F,$,X,G,Y=0)=>{for(let q=Y;q<A.length;q++){const ue=A[q]=G?lo(A[q]):ii(A[q]);E(null,ue,R,D,U,F,$,X,G)}},de=(A,R,D,U,F,$,X)=>{const G=R.el=A.el;let{patchFlag:Y,dynamicChildren:q,dirs:ue}=R;Y|=A.patchFlag&16;const ie=A.props||tt,ce=R.props||tt;let ge;D&&as(D,!1),(ge=ce.onVnodeBeforeUpdate)&&ni(ge,D,R,A),ue&&ss(R,A,D,"beforeUpdate"),D&&as(D,!0);const Ne=F&&R.type!=="foreignObject";if(q?k(A.dynamicChildren,q,G,D,U,Ne,$):X||Te(A,R,G,null,D,U,Ne,$,!1),Y>0){if(Y&16)Je(G,R,ie,ce,D,U,F);else if(Y&2&&ie.class!==ce.class&&s(G,"class",null,ce.class,F),Y&4&&s(G,"style",ie.style,ce.style,F),Y&8){const fe=R.dynamicProps;for(let Ue=0;Ue<fe.length;Ue++){const ze=fe[Ue],Rn=ie[ze],_i=ce[ze];(_i!==Rn||ze==="value")&&s(G,ze,Rn,_i,F,A.children,D,U,Hn)}}Y&1&&A.children!==R.children&&p(G,R.children)}else!X&&q==null&&Je(G,R,ie,ce,D,U,F);((ge=ce.onVnodeUpdated)||ue)&&Ln(()=>{ge&&ni(ge,D,R,A),ue&&ss(R,A,D,"updated")},U)},k=(A,R,D,U,F,$,X)=>{for(let G=0;G<R.length;G++){const Y=A[G],q=R[G],ue=Y.el&&(Y.type===Mn||!vs(Y,q)||Y.shapeFlag&70)?g(Y.el):D;E(Y,q,ue,null,U,F,$,X,!0)}},Je=(A,R,D,U,F,$,X)=>{if(D!==U){if(D!==tt)for(const G in D)!qh(G)&&!(G in U)&&s(A,G,D[G],null,X,R.children,F,$,Hn);for(const G in U){if(qh(G))continue;const Y=U[G],q=D[G];Y!==q&&G!=="value"&&s(A,G,q,Y,X,R.children,F,$,Hn)}"value"in U&&s(A,"value",D.value,U.value)}},xt=(A,R,D,U,F,$,X,G,Y)=>{const q=R.el=A?A.el:c(""),ue=R.anchor=A?A.anchor:c("");let{patchFlag:ie,dynamicChildren:ce,slotScopeIds:ge}=R;ge&&(G=G?G.concat(ge):ge),A==null?(r(q,D,U),r(ue,D,U),M(R.children,D,ue,F,$,X,G,Y)):ie>0&&ie&64&&ce&&A.dynamicChildren?(k(A.dynamicChildren,ce,D,F,$,X,G),(R.key!=null||F&&R===F.subTree)&&nR(A,R,!0)):Te(A,R,D,ue,F,$,X,G,Y)},qn=(A,R,D,U,F,$,X,G,Y)=>{R.slotScopeIds=G,A==null?R.shapeFlag&512?F.ctx.activate(R,D,U,X,Y):gn(R,D,U,F,$,X,Y):vt(A,R,Y)},gn=(A,R,D,U,F,$,X)=>{const G=A.component=e4(A,U,F);if(sp(A)&&(G.ctx.renderer=zi),t4(G),G.asyncDep){if(F&&F.registerDep(G,gt),!A.el){const Y=G.subTree=er(xi);N(null,Y,R,D)}return}gt(G,A,R,D,F,$,X)},vt=(A,R,D)=>{const U=R.component=A.component;if(sj(A,R,D))if(U.asyncDep&&!U.asyncResolved){Ze(U,R,D);return}else U.next=R,XU(U.update),U.update();else R.el=A.el,U.vnode=R},gt=(A,R,D,U,F,$,X)=>{const G=()=>{if(A.isMounted){let{next:ue,bu:ie,u:ce,parent:ge,vnode:Ne}=A,fe=ue,Ue;as(A,!1),ue?(ue.el=Ne.el,Ze(A,ue,X)):ue=Ne,ie&&Qm(ie),(Ue=ue.props&&ue.props.onVnodeBeforeUpdate)&&ni(Ue,ge,ue,Ne),as(A,!0);const ze=Ym(A),Rn=A.subTree;A.subTree=ze,E(Rn,ze,g(Rn.el),Vo(Rn),A,F,$),ue.el=ze.el,fe===null&&aj(A,ze.el),ce&&Ln(ce,F),(Ue=ue.props&&ue.props.onVnodeUpdated)&&Ln(()=>ni(Ue,ge,ue,Ne),F)}else{let ue;const{el:ie,props:ce}=R,{bm:ge,m:Ne,parent:fe}=A,Ue=Kh(R);if(as(A,!1),ge&&Qm(ge),!Ue&&(ue=ce&&ce.onVnodeBeforeMount)&&ni(ue,fe,R),as(A,!0),ie&&Qi){const ze=()=>{A.subTree=Ym(A),Qi(ie,A.subTree,A,F,null)};Ue?R.type.__asyncLoader().then(()=>!A.isUnmounted&&ze()):ze()}else{const ze=A.subTree=Ym(A);E(null,ze,D,U,A,F,$),R.el=ze.el}if(Ne&&Ln(Ne,F),!Ue&&(ue=ce&&ce.onVnodeMounted)){const ze=R;Ln(()=>ni(ue,fe,ze),F)}(R.shapeFlag&256||fe&&Kh(fe.vnode)&&fe.vnode.shapeFlag&256)&&A.a&&Ln(A.a,F),A.isMounted=!0,R=D=U=null}},Y=A.effect=new vw(G,()=>Tw(q),A.scope),q=A.update=()=>Y.run();q.id=A.uid,as(A,!0),q()},Ze=(A,R,D)=>{R.component=A;const U=A.vnode.props;A.vnode=R,A.next=null,Fj(A,R.props,U,D),Vj(A,R.children,D),Tu(),$S(),Iu()},Te=(A,R,D,U,F,$,X,G,Y=!1)=>{const q=A&&A.children,ue=A?A.shapeFlag:0,ie=R.children,{patchFlag:ce,shapeFlag:ge}=R;if(ce>0){if(ce&128){Sr(q,ie,D,U,F,$,X,G,Y);return}else if(ce&256){Ir(q,ie,D,U,F,$,X,G,Y);return}}ge&8?(ue&16&&Hn(q,F,$),ie!==q&&p(D,ie)):ue&16?ge&16?Sr(q,ie,D,U,F,$,X,G,Y):Hn(q,F,$,!0):(ue&8&&p(D,""),ge&16&&M(ie,D,U,F,$,X,G,Y))},Ir=(A,R,D,U,F,$,X,G,Y)=>{A=A||Va,R=R||Va;const q=A.length,ue=R.length,ie=Math.min(q,ue);let ce;for(ce=0;ce<ie;ce++){const ge=R[ce]=Y?lo(R[ce]):ii(R[ce]);E(A[ce],ge,D,null,F,$,X,G,Y)}q>ue?Hn(A,F,$,!0,!1,ie):M(R,D,U,F,$,X,G,Y,ie)},Sr=(A,R,D,U,F,$,X,G,Y)=>{let q=0;const ue=R.length;let ie=A.length-1,ce=ue-1;for(;q<=ie&&q<=ce;){const ge=A[q],Ne=R[q]=Y?lo(R[q]):ii(R[q]);if(vs(ge,Ne))E(ge,Ne,D,null,F,$,X,G,Y);else break;q++}for(;q<=ie&&q<=ce;){const ge=A[ie],Ne=R[ce]=Y?lo(R[ce]):ii(R[ce]);if(vs(ge,Ne))E(ge,Ne,D,null,F,$,X,G,Y);else break;ie--,ce--}if(q>ie){if(q<=ce){const ge=ce+1,Ne=ge<ue?R[ge].el:U;for(;q<=ce;)E(null,R[q]=Y?lo(R[q]):ii(R[q]),D,Ne,F,$,X,G,Y),q++}}else if(q>ce)for(;q<=ie;)Kn(A[q],F,$,!0),q++;else{const ge=q,Ne=q,fe=new Map;for(q=Ne;q<=ce;q++){const ft=R[q]=Y?lo(R[q]):ii(R[q]);ft.key!=null&&fe.set(ft.key,q)}let Ue,ze=0;const Rn=ce-Ne+1;let _i=!1,lt=0;const Yi=new Array(Rn);for(q=0;q<Rn;q++)Yi[q]=0;for(q=ge;q<=ie;q++){const ft=A[q];if(ze>=Rn){Kn(ft,F,$,!0);continue}let Wn;if(ft.key!=null)Wn=fe.get(ft.key);else for(Ue=Ne;Ue<=ce;Ue++)if(Yi[Ue-Ne]===0&&vs(ft,R[Ue])){Wn=Ue;break}Wn===void 0?Kn(ft,F,$,!0):(Yi[Wn-Ne]=q+1,Wn>=lt?lt=Wn:_i=!0,E(ft,R[Wn],D,null,F,$,X,G,Y),ze++)}const $r=_i?Wj(Yi):Va;for(Ue=$r.length-1,q=Rn-1;q>=0;q--){const ft=Ne+q,Wn=R[ft],Wt=ft+1<ue?R[ft+1].el:U;Yi[q]===0?E(null,Wn,D,Wt,F,$,X,G,Y):_i&&(Ue<0||q!==$r[Ue]?Cr(Wn,D,Wt,2):Ue--)}}},Cr=(A,R,D,U,F=null)=>{const{el:$,type:X,transition:G,children:Y,shapeFlag:q}=A;if(q&6){Cr(A.component.subTree,R,D,U);return}if(q&128){A.suspense.move(R,D,U);return}if(q&64){X.move(A,R,D,zi);return}if(X===Mn){r($,R,D);for(let ie=0;ie<Y.length;ie++)Cr(Y[ie],R,D,U);r(A.anchor,R,D);return}if(X===Hh){P(A,R,D);return}if(U!==2&&q&1&&G)if(U===0)G.beforeEnter($),r($,R,D),Ln(()=>G.enter($),F);else{const{leave:ie,delayLeave:ce,afterLeave:ge}=G,Ne=()=>r($,R,D),fe=()=>{ie($,()=>{Ne(),ge&&ge()})};ce?ce($,Ne,fe):fe()}else r($,R,D)},Kn=(A,R,D,U=!1,F=!1)=>{const{type:$,props:X,ref:G,children:Y,dynamicChildren:q,shapeFlag:ue,patchFlag:ie,dirs:ce}=A;if(G!=null&&zy(G,null,D,A,!0),ue&256){R.ctx.deactivate(A);return}const ge=ue&1&&ce,Ne=!Kh(A);let fe;if(Ne&&(fe=X&&X.onVnodeBeforeUnmount)&&ni(fe,R,A),ue&6)_v(A.component,D,U);else{if(ue&128){A.suspense.unmount(D,U);return}ge&&ss(A,null,R,"beforeUnmount"),ue&64?A.type.remove(A,R,D,F,zi,U):q&&($!==Mn||ie>0&&ie&64)?Hn(q,R,D,!1,!0):($===Mn&&ie&384||!F&&ue&16)&&Hn(Y,R,D),U&&Ku(A)}(Ne&&(fe=X&&X.onVnodeUnmounted)||ge)&&Ln(()=>{fe&&ni(fe,R,A),ge&&ss(A,null,R,"unmounted")},D)},Ku=A=>{const{type:R,el:D,anchor:U,transition:F}=A;if(R===Mn){mf(D,U);return}if(R===Hh){z(A);return}const $=()=>{i(D),F&&!F.persisted&&F.afterLeave&&F.afterLeave()};if(A.shapeFlag&1&&F&&!F.persisted){const{leave:X,delayLeave:G}=F,Y=()=>X(D,$);G?G(A.el,$,Y):Y()}else $()},mf=(A,R)=>{let D;for(;A!==R;)D=m(A),i(A),A=D;i(R)},_v=(A,R,D)=>{const{bum:U,scope:F,update:$,subTree:X,um:G}=A;U&&Qm(U),F.stop(),$&&($.active=!1,Kn(X,A,R,D)),G&&Ln(G,R),Ln(()=>{A.isUnmounted=!0},R),R&&R.pendingBranch&&!R.isUnmounted&&A.asyncDep&&!A.asyncResolved&&A.suspenseId===R.pendingId&&(R.deps--,R.deps===0&&R.resolve())},Hn=(A,R,D,U=!1,F=!1,$=0)=>{for(let X=$;X<A.length;X++)Kn(A[X],R,D,U,F)},Vo=A=>A.shapeFlag&6?Vo(A.component.subTree):A.shapeFlag&128?A.suspense.next():m(A.anchor||A.el),Ye=(A,R,D)=>{A==null?R._vnode&&Kn(R._vnode,null,null,!0):E(R._vnode||null,A,R,null,null,null,D),$S(),VN(),R._vnode=A},zi={p:E,um:Kn,m:Cr,r:Ku,mt:gn,mc:M,pc:Te,pbc:k,n:Vo,o:e};let Hu,Qi;return t&&([Hu,Qi]=t(zi)),{render:Ye,hydrate:Hu,createApp:qj(Ye,Hu)}}function as({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function nR(e,t,n=!1){const r=e.children,i=t.children;if(_e(r)&&_e(i))for(let s=0;s<r.length;s++){const u=r[s];let c=i[s];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=i[s]=lo(i[s]),c.el=u.el),n||nR(u,c)),c.type===cp&&(c.el=u.el)}}function Wj(e){const t=e.slice(),n=[0];let r,i,s,u,c;const l=e.length;for(r=0;r<l;r++){const h=e[r];if(h!==0){if(i=n[n.length-1],e[i]<h){t[r]=i,n.push(r);continue}for(s=0,u=n.length-1;s<u;)c=s+u>>1,e[n[c]]<h?s=c+1:u=c;h<e[n[s]]&&(s>0&&(t[r]=n[s-1]),n[s]=r)}}for(s=n.length,u=n[s-1];s-- >0;)n[s]=u,u=t[u];return n}const Gj=e=>e.__isTeleport,Mn=Symbol(void 0),cp=Symbol(void 0),xi=Symbol(void 0),Hh=Symbol(void 0),qc=[];let Vr=null;function Ci(e=!1){qc.push(Vr=e?null:[])}function $j(){qc.pop(),Vr=qc[qc.length-1]||null}let ul=1;function iC(e){ul+=e}function zj(e){return e.dynamicChildren=ul>0?Vr||Va:null,$j(),ul>0&&Vr&&Vr.push(e),e}function Ai(e,t,n,r,i,s){return zj(jr(e,t,n,r,i,s,!0))}function Qy(e){return e?e.__v_isVNode===!0:!1}function vs(e,t){return e.type===t.type&&e.key===t.key}const lp="__vInternal",rR=({key:e})=>e??null,Wh=({ref:e,ref_key:t,ref_for:n})=>e!=null?Pt(e)||pt(e)||Se(e)?{i:Zn,r:e,k:t,f:!!n}:e:null;function jr(e,t=null,n=null,r=0,i=null,s=e===Mn?0:1,u=!1,c=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&rR(t),ref:t&&Wh(t),scopeId:op,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Zn};return c?(kw(l,n),s&128&&e.normalize(l)):n&&(l.shapeFlag|=Pt(n)?8:16),ul>0&&!u&&Vr&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&Vr.push(l),l}const er=Qj;function Qj(e,t=null,n=null,r=0,i=null,s=!1){if((!e||e===kj)&&(e=xi),Qy(e)){const c=Ao(e,t,!0);return n&&kw(c,n),ul>0&&!s&&Vr&&(c.shapeFlag&6?Vr[Vr.indexOf(e)]=c:Vr.push(c)),c.patchFlag|=-2,c}if(s4(e)&&(e=e.__vccOpts),t){t=Yj(t);let{class:c,style:l}=t;c&&!Pt(c)&&(t.class=cw(c)),st(l)&&(ON(l)&&!_e(l)&&(l=hn({},l)),t.style=uw(l))}const u=Pt(e)?1:uj(e)?128:Gj(e)?64:st(e)?4:Se(e)?2:0;return jr(e,t,n,r,i,u,s,!0)}function Yj(e){return e?ON(e)||lp in e?hn({},e):e:null}function Ao(e,t,n=!1){const{props:r,ref:i,patchFlag:s,children:u}=e,c=t?Xj(r||{},t):r;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&rR(c),ref:t&&t.ref?n&&i?_e(i)?i.concat(Wh(t)):[i,Wh(t)]:Wh(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:u,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Mn?s===-1?16:s|16:s,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Ao(e.ssContent),ssFallback:e.ssFallback&&Ao(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx}}function Mc(e=" ",t=0){return er(cp,null,e,t)}function ii(e){return e==null||typeof e=="boolean"?er(xi):_e(e)?er(Mn,null,e.slice()):typeof e=="object"?lo(e):er(cp,null,String(e))}function lo(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Ao(e)}function kw(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(_e(t))n=16;else if(typeof t=="object")if(r&65){const i=t.default;i&&(i._c&&(i._d=!1),kw(e,i()),i._c&&(i._d=!0));return}else{n=32;const i=t._;!i&&!(lp in t)?t._ctx=Zn:i===3&&Zn&&(Zn.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Se(t)?(t={default:t,_ctx:Zn},n=32):(t=String(t),r&64?(n=16,t=[Mc(t)]):n=8);e.children=t,e.shapeFlag|=n}function Xj(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const i in r)if(i==="class")t.class!==r.class&&(t.class=cw([t.class,r.class]));else if(i==="style")t.style=uw([t.style,r.style]);else if(Xd(i)){const s=t[i],u=r[i];u&&s!==u&&!(_e(s)&&s.includes(u))&&(t[i]=s?[].concat(s,u):u)}else i!==""&&(t[i]=r[i])}return t}function ni(e,t,n,r=null){yr(e,t,7,[n,r])}const Jj=tR();let Zj=0;function e4(e,t,n){const r=e.type,i=(t?t.appContext:e.appContext)||Jj,s={uid:Zj++,vnode:e,type:r,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new yN(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:XN(r,i),emitsOptions:qN(r,i),emit:null,emitted:null,propsDefaults:tt,inheritAttrs:r.inheritAttrs,ctx:tt,data:tt,props:tt,attrs:tt,slots:tt,refs:tt,setupState:tt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=ej.bind(null,s),e.ce&&e.ce(s),s}let Vt=null;const Nw=()=>Vt||Zn,Ya=e=>{Vt=e,e.scope.on()},ks=()=>{Vt&&Vt.scope.off(),Vt=null};function iR(e){return e.vnode.shapeFlag&4}let cl=!1;function t4(e,t=!1){cl=t;const{props:n,children:r}=e.vnode,i=iR(e);Mj(e,n,i,t),jj(e,r);const s=i?n4(e,t):void 0;return cl=!1,s}function n4(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=Qa(new Proxy(e.ctx,Rj));const{setup:r}=n;if(r){const i=e.setupContext=r.length>1?i4(e):null;Ya(e),Tu();const s=wo(r,e,0,[e.props,i]);if(Iu(),ks(),pN(s)){if(s.then(ks,ks),t)return s.then(u=>{oC(e,u,t)}).catch(u=>{rp(u,e,0)});e.asyncDep=s}else oC(e,s,t)}else oR(e,t)}function oC(e,t,n){Se(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:st(t)&&(e.setupState=xN(t)),oR(e,n)}let sC;function oR(e,t,n){const r=e.type;if(!e.render){if(!t&&sC&&!r.render){const i=r.template||Cw(e).template;if(i){const{isCustomElement:s,compilerOptions:u}=e.appContext.config,{delimiters:c,compilerOptions:l}=r,h=hn(hn({isCustomElement:s,delimiters:c},u),l);r.render=sC(i,h)}}e.render=r.render||qr}Ya(e),Tu(),Oj(e),Iu(),ks()}function r4(e){return new Proxy(e.attrs,{get(t,n){return ir(e,"get","$attrs"),t[n]}})}function i4(e){const t=r=>{e.exposed=r||{}};let n;return{get attrs(){return n||(n=r4(e))},slots:e.slots,emit:e.emit,expose:t}}function fp(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(xN(Qa(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Bc)return Bc[n](e)},has(t,n){return n in t||n in Bc}}))}function o4(e,t=!0){return Se(e)?e.displayName||e.name:e.name||t&&e.__name}function s4(e){return Se(e)&&"__vccOpts"in e}const od=(e,t)=>zU(e,t,cl);function a4(e,t,n){const r=arguments.length;return r===2?st(t)&&!_e(t)?Qy(t)?er(e,null,[t]):er(e,t):er(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Qy(n)&&(n=[n]),er(e,t,n))}const u4=Symbol(""),c4=()=>jc(u4),l4="3.2.45",f4="http://www.w3.org/2000/svg",gs=typeof document<"u"?document:null,aC=gs&&gs.createElement("template"),h4={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const i=t?gs.createElementNS(f4,e):gs.createElement(e,n?{is:n}:void 0);return e==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:e=>gs.createTextNode(e),createComment:e=>gs.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>gs.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,i,s){const u=n?n.previousSibling:t.lastChild;if(i&&(i===s||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{aC.innerHTML=r?`<svg>${e}</svg>`:e;const c=aC.content;if(r){const l=c.firstChild;for(;l.firstChild;)c.appendChild(l.firstChild);c.removeChild(l)}t.insertBefore(c,n)}return[u?u.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function d4(e,t,n){const r=e._vtc;r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function p4(e,t,n){const r=e.style,i=Pt(n);if(n&&!i){for(const s in n)Yy(r,s,n[s]);if(t&&!Pt(t))for(const s in t)n[s]==null&&Yy(r,s,"")}else{const s=r.display;i?t!==n&&(r.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(r.display=s)}}const uC=/\s*!important$/;function Yy(e,t,n){if(_e(n))n.forEach(r=>Yy(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=v4(e,t);uC.test(n)?e.setProperty(Eu(r),n.replace(uC,""),"important"):e[r]=n}}const cC=["Webkit","Moz","ms"],Zm={};function v4(e,t){const n=Zm[t];if(n)return n;let r=hi(t);if(r!=="filter"&&r in e)return Zm[t]=r;r=ep(r);for(let i=0;i<cC.length;i++){const s=cC[i]+r;if(s in e)return Zm[t]=s}return t}const lC="http://www.w3.org/1999/xlink";function g4(e,t,n,r,i){if(r&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(lC,t.slice(6,t.length)):e.setAttributeNS(lC,t,n);else{const s=oU(t);n==null||s&&!fN(n)?e.removeAttribute(t):e.setAttribute(t,s?"":n)}}function m4(e,t,n,r,i,s,u){if(t==="innerHTML"||t==="textContent"){r&&u(r,i,s),e[t]=n??"";return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=n;const l=n??"";(e.value!==l||e.tagName==="OPTION")&&(e.value=l),n==null&&e.removeAttribute(t);return}let c=!1;if(n===""||n==null){const l=typeof e[t];l==="boolean"?n=fN(n):n==null&&l==="string"?(n="",c=!0):l==="number"&&(n=0,c=!0)}try{e[t]=n}catch{}c&&e.removeAttribute(t)}function y4(e,t,n,r){e.addEventListener(t,n,r)}function _4(e,t,n,r){e.removeEventListener(t,n,r)}function w4(e,t,n,r,i=null){const s=e._vei||(e._vei={}),u=s[t];if(r&&u)u.value=r;else{const[c,l]=b4(t);if(r){const h=s[t]=I4(r,i);y4(e,c,h,l)}else u&&(_4(e,c,u,l),s[t]=void 0)}}const fC=/(?:Once|Passive|Capture)$/;function b4(e){let t;if(fC.test(e)){t={};let r;for(;r=e.match(fC);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Eu(e.slice(2)),t]}let ey=0;const E4=Promise.resolve(),T4=()=>ey||(E4.then(()=>ey=0),ey=Date.now());function I4(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;yr(S4(r,n.value),t,5,[r])};return n.value=e,n.attached=T4(),n}function S4(e,t){if(_e(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>i=>!i._stopped&&r&&r(i))}else return t}const hC=/^on[a-z]/,C4=(e,t,n,r,i=!1,s,u,c,l)=>{t==="class"?d4(e,r,i):t==="style"?p4(e,n,r):Xd(t)?lw(t)||w4(e,t,n,r,u):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):A4(e,t,r,i))?m4(e,t,r,s,u,c,l):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),g4(e,t,r,i))};function A4(e,t,n,r){return r?!!(t==="innerHTML"||t==="textContent"||t in e&&hC.test(t)&&Se(n)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||hC.test(t)&&Pt(n)?!1:t in e}function k4(e){const t=Nw();if(!t)return;const n=t.ut=(i=e(t.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${t.uid}"]`)).forEach(s=>Jy(s,i))},r=()=>{const i=e(t.proxy);Xy(t.subTree,i),n(i)};fj(r),up(()=>{const i=new MutationObserver(r);i.observe(t.subTree.el.parentNode,{childList:!0}),Sw(()=>i.disconnect())})}function Xy(e,t){if(e.shapeFlag&128){const n=e.suspense;e=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{Xy(n.activeBranch,t)})}for(;e.component;)e=e.component.subTree;if(e.shapeFlag&1&&e.el)Jy(e.el,t);else if(e.type===Mn)e.children.forEach(n=>Xy(n,t));else if(e.type===Hh){let{el:n,anchor:r}=e;for(;n&&(Jy(n,t),n!==r);)n=n.nextSibling}}function Jy(e,t){if(e.nodeType===1){const n=e.style;for(const r in t)n.setProperty(`--${r}`,t[r])}}const N4={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};vj.props;const R4={beforeMount(e,{value:t},{transition:n}){e._vod=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):Ac(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:r}){!t!=!n&&(r?t?(r.beforeEnter(e),Ac(e,!0),r.enter(e)):r.leave(e,()=>{Ac(e,!1)}):Ac(e,t))},beforeUnmount(e,{value:t}){Ac(e,t)}};function Ac(e,t){e.style.display=t?e._vod:"none"}const O4=hn({patchProp:C4},h4);let dC;function P4(){return dC||(dC=Kj(O4))}const D4=(...e)=>{const t=P4().createApp(...e),{mount:n}=t;return t.mount=r=>{const i=x4(r);if(!i)return;const s=t._component;!Se(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.innerHTML="";const u=n(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),u},t};function x4(e){return Pt(e)?document.querySelector(e):e}var L4=!1;/*!
  * pinia v2.0.29
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */let sR;const hp=e=>sR=e,aR=Symbol();function Zy(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var Kc;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Kc||(Kc={}));function M4(){const e=_N(!0),t=e.run(()=>bw({}));let n=[],r=[];const i=Qa({install(s){hp(i),i._a=s,s.provide(aR,i),s.config.globalProperties.$pinia=i,r.forEach(u=>n.push(u)),r=[]},use(s){return!this._a&&!L4?r.push(s):n.push(s),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return i}const uR=()=>{};function pC(e,t,n,r=uR){e.push(t);const i=()=>{const s=e.indexOf(t);s>-1&&(e.splice(s,1),r())};return!n&&pU()&&vU(i),i}function Ra(e,...t){e.slice().forEach(n=>{n(...t)})}function e_(e,t){e instanceof Map&&t instanceof Map&&t.forEach((n,r)=>e.set(r,n)),e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const r=t[n],i=e[n];Zy(i)&&Zy(r)&&e.hasOwnProperty(n)&&!pt(r)&&!Di(r)?e[n]=e_(i,r):e[n]=r}return e}const F4=Symbol();function U4(e){return!Zy(e)||!e.hasOwnProperty(F4)}const{assign:fo}=Object;function j4(e){return!!(pt(e)&&e.effect)}function V4(e,t,n,r){const{state:i,actions:s,getters:u}=t,c=n.state.value[e];let l;function h(){c||(n.state.value[e]=i?i():{});const p=WU(n.state.value[e]);return fo(p,s,Object.keys(u||{}).reduce((g,m)=>(g[m]=Qa(od(()=>{hp(n);const _=n._s.get(e);return u[m].call(_,_)})),g),{}))}return l=cR(e,h,t,n,r,!0),l.$reset=function(){const g=i?i():{};this.$patch(m=>{fo(m,g)})},l}function cR(e,t,n={},r,i,s){let u;const c=fo({actions:{}},n),l={deep:!0};let h,p,g=Qa([]),m=Qa([]),_;const b=r.state.value[e];!s&&!b&&(r.state.value[e]={}),bw({});let E;function I(ne){let M;h=p=!1,typeof ne=="function"?(ne(r.state.value[e]),M={type:Kc.patchFunction,storeId:e,events:_}):(e_(r.state.value[e],ne),M={type:Kc.patchObject,payload:ne,storeId:e,events:_});const de=E=Symbol();UN().then(()=>{E===de&&(h=!0)}),p=!0,Ra(g,M,r.state.value[e])}const N=uR;function x(){u.stop(),g=[],m=[],r._s.delete(e)}function P(ne,M){return function(){hp(r);const de=Array.from(arguments),k=[],Je=[];function xt(vt){k.push(vt)}function qn(vt){Je.push(vt)}Ra(m,{args:de,name:ne,store:W,after:xt,onError:qn});let gn;try{gn=M.apply(this&&this.$id===e?this:W,de)}catch(vt){throw Ra(Je,vt),vt}return gn instanceof Promise?gn.then(vt=>(Ra(k,vt),vt)).catch(vt=>(Ra(Je,vt),Promise.reject(vt))):(Ra(k,gn),gn)}}const z={_p:r,$id:e,$onAction:pC.bind(null,m),$patch:I,$reset:N,$subscribe(ne,M={}){const de=pC(g,ne,M.detached,()=>k()),k=u.run(()=>Vc(()=>r.state.value[e],Je=>{(M.flush==="sync"?p:h)&&ne({storeId:e,type:Kc.direct,events:_},Je)},fo({},l,M)));return de},$dispose:x},W=np(z);r._s.set(e,W);const V=r._e.run(()=>(u=_N(),u.run(()=>t())));for(const ne in V){const M=V[ne];if(pt(M)&&!j4(M)||Di(M))s||(b&&U4(M)&&(pt(M)?M.value=b[ne]:e_(M,b[ne])),r.state.value[e][ne]=M);else if(typeof M=="function"){const de=P(ne,M);V[ne]=de,c.actions[ne]=M}}return fo(W,V),fo(Fe(W),V),Object.defineProperty(W,"$state",{get:()=>r.state.value[e],set:ne=>{I(M=>{fo(M,ne)})}}),r._p.forEach(ne=>{fo(W,u.run(()=>ne({store:W,app:r._a,pinia:r,options:c})))}),b&&s&&n.hydrate&&n.hydrate(W.$state,b),h=!0,p=!0,W}function B4(e,t,n){let r,i;const s=typeof t=="function";typeof e=="string"?(r=e,i=s?n:t):(i=e,r=e.id);function u(c,l){const h=Nw();return c=c||h&&jc(aR,null),c&&hp(c),c=sR,c._s.has(r)||(s?cR(r,t,i,c):V4(r,i,c)),c._s.get(r)}return u.$id=r,u}function q4(e){{e=Fe(e);const t={};for(const n in e){const r=e[n];(pt(r)||Di(r))&&(t[n]=LN(e,n))}return t}}var t_=function(e,t){return t_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},t_(e,t)};function Z(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");t_(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var he=function(){return he=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},he.apply(this,arguments)};function C(e,t,n,r){function i(s){return s instanceof n?s:new n(function(u){u(s)})}return new(n||(n=Promise))(function(s,u){function c(p){try{h(r.next(p))}catch(g){u(g)}}function l(p){try{h(r.throw(p))}catch(g){u(g)}}function h(p){p.done?s(p.value):i(p.value).then(c,l)}h((r=r.apply(e,t||[])).next())})}function S(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,u;return u={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function c(h){return function(p){return l([h,p])}}function l(h){if(r)throw new TypeError("Generator is already executing.");for(;u&&(u=0,h[0]&&(n=0)),n;)try{if(r=1,i&&(s=h[0]&2?i.return:h[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,h[1])).done)return s;switch(i=0,s&&(h=[h[0]&2,s.value]),h[0]){case 0:case 1:s=h;break;case 4:return n.label++,{value:h[1],done:!1};case 5:n.label++,i=h[1],h=[0];continue;case 7:h=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(h[0]===6||h[0]===2)){n=0;continue}if(h[0]===3&&(!s||h[1]>s[0]&&h[1]<s[3])){n.label=h[1];break}if(h[0]===6&&n.label<s[1]){n.label=s[1],s=h;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(h);break}s[2]&&n.ops.pop(),n.trys.pop();continue}h=t.call(e,n)}catch(p){h=[6,p],i=0}finally{r=s=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function Kt(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Yt(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,s=[],u;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(c){u={error:c}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(u)throw u.error}}return s}function Ie(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lR={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var H=function(e,t){if(!e)throw Su(t)},Su=function(e){return new Error("Firebase Database ("+lR.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fR=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},K4=function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){var s=e[n++],u=e[n++],c=e[n++],l=((i&7)<<18|(s&63)<<12|(u&63)<<6|c&63)-65536;t[r++]=String.fromCharCode(55296+(l>>10)),t[r++]=String.fromCharCode(56320+(l&1023))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|u&63)}}return t.join("")},dp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var s=e[i],u=i+1<e.length,c=u?e[i+1]:0,l=i+2<e.length,h=l?e[i+2]:0,p=s>>2,g=(s&3)<<4|c>>4,m=(c&15)<<2|h>>6,_=h&63;l||(_=64,u||(m=64)),r.push(n[p],n[g],n[m],n[_])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(fR(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):K4(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var s=n[e.charAt(i++)],u=i<e.length,c=u?n[e.charAt(i)]:0;++i;var l=i<e.length,h=l?n[e.charAt(i)]:64;++i;var p=i<e.length,g=p?n[e.charAt(i)]:64;if(++i,s==null||c==null||h==null||g==null)throw Error();var m=s<<2|c>>4;if(r.push(m),h!==64){var _=c<<4&240|h>>2;if(r.push(_),g!==64){var b=h<<6&192|g;r.push(b)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},hR=function(e){var t=fR(e);return dp.encodeByteArray(t,!0)},vC=function(e){return hR(e).replace(/\./g,"")},gC=function(e){try{return dp.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dR(e){return ll(void 0,e)}function ll(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:var n=t;return new Date(n.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return t}for(var r in t)!t.hasOwnProperty(r)||!H4(r)||(e[r]=ll(e[r],t[r]));return e}function H4(e){return e!=="__proto__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bt=function(){function e(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(n,r){t.resolve=n,t.reject=r})}return e.prototype.wrapCallback=function(t){var n=this;return function(r,i){r?n.reject(r):n.resolve(i),typeof t=="function"&&(n.promise.catch(function(){}),t.length===1?t(r):t(r,i))}},e}();/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rw(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var u=he({iss:"https://securetoken.google.com/"+r,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e),c="";return[vC(JSON.stringify(n)),vC(JSON.stringify(u)),c].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ls(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ow(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ls())}function pR(){try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function W4(){return typeof self=="object"&&self.self===self}function Pw(){var e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function vR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function G4(){return Ls().indexOf("Electron/")>=0}function $4(){var e=Ls();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function z4(){return Ls().indexOf("MSAppHost/")>=0}function gR(){return lR.NODE_ADMIN===!0}function Q4(){return!pR()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ul(){return"indexedDB"in self&&indexedDB!=null}function Dw(){return new Promise(function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(s){t(s)}})}function mR(){return!(!navigator||!navigator.cookieEnabled)}function Y4(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var X4="FirebaseError",Cu=function(e){Z(t,e);function t(n,r,i){var s=e.call(this,r)||this;return s.code=n,s.customData=i,s.name=X4,Object.setPrototypeOf(s,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(s,Hi.prototype.create),s}return t}(Error),Hi=function(){function e(t,n,r){this.service=t,this.serviceName=n,this.errors=r}return e.prototype.create=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=n[0]||{},s=this.service+"/"+t,u=this.errors[t],c=u?J4(u,i):"Error",l=this.serviceName+": "+c+" ("+s+").",h=new Cu(s,l,i);return h},e}();function J4(e,t){return e.replace(Z4,function(n,r){var i=t[r];return i!=null?String(i):"<"+r+"?>"})}var Z4=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fl(e){return JSON.parse(e)}function Nt(e){return JSON.stringify(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xw=function(e){var t={},n={},r={},i="";try{var s=e.split(".");t=fl(gC(s[0])||""),n=fl(gC(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:t,claims:n,data:r,signature:i}},eV=function(e){var t=xw(e).claims;return typeof t=="object"&&t.hasOwnProperty("iat")?t.iat:null},tV=function(e){var t=xw(e),n=t.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},nV=function(e){var t=xw(e).claims;return typeof t=="object"&&t.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ms(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function n_(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function sd(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rV(e){for(var t=[],n=function(l,h){Array.isArray(h)?h.forEach(function(p){t.push(encodeURIComponent(l)+"="+encodeURIComponent(p))}):t.push(encodeURIComponent(l)+"="+encodeURIComponent(h))},r=0,i=Object.entries(e);r<i.length;r++){var s=i[r],u=s[0],c=s[1];n(u,c)}return t.length?"&"+t.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var iV=function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(t,n){n||(n=0);var r=this.W_;if(typeof t=="string")for(var i=0;i<16;i++)r[i]=t.charCodeAt(n)<<24|t.charCodeAt(n+1)<<16|t.charCodeAt(n+2)<<8|t.charCodeAt(n+3),n+=4;else for(var i=0;i<16;i++)r[i]=t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3],n+=4;for(var i=16;i<80;i++){var s=r[i-3]^r[i-8]^r[i-14]^r[i-16];r[i]=(s<<1|s>>>31)&4294967295}for(var u=this.chain_[0],c=this.chain_[1],l=this.chain_[2],h=this.chain_[3],p=this.chain_[4],g,m,i=0;i<80;i++){i<40?i<20?(g=h^c&(l^h),m=1518500249):(g=c^l^h,m=1859775393):i<60?(g=c&l|h&(c|l),m=2400959708):(g=c^l^h,m=3395469782);var s=(u<<5|u>>>27)+g+p+m+r[i]&4294967295;p=h,h=l,l=(c<<30|c>>>2)&4294967295,c=u,u=s}this.chain_[0]=this.chain_[0]+u&4294967295,this.chain_[1]=this.chain_[1]+c&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+p&4294967295},e.prototype.update=function(t,n){if(t!=null){n===void 0&&(n=t.length);for(var r=n-this.blockSize,i=0,s=this.buf_,u=this.inbuf_;i<n;){if(u===0)for(;i<=r;)this.compress_(t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<n;)if(s[u]=t.charCodeAt(i),++u,++i,u===this.blockSize){this.compress_(s),u=0;break}}else for(;i<n;)if(s[u]=t[i],++u,++i,u===this.blockSize){this.compress_(s),u=0;break}}this.inbuf_=u,this.total_+=n}},e.prototype.digest=function(){var t=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);for(var i=0,r=0;r<5;r++)for(var s=24;s>=0;s-=8)t[i]=this.chain_[r]>>s&255,++i;return t},e}();function oV(e,t){var n=new sV(e,t);return n.subscribe.bind(n)}var sV=function(){function e(t,n){var r=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(function(){t(r)}).catch(function(i){r.error(i)})}return e.prototype.next=function(t){this.forEachObserver(function(n){n.next(t)})},e.prototype.error=function(t){this.forEachObserver(function(n){n.error(t)}),this.close(t)},e.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},e.prototype.subscribe=function(t,n,r){var i=this,s;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");aV(t,["next","error","complete"])?s=t:s={next:t,error:n,complete:r},s.next===void 0&&(s.next=ty),s.error===void 0&&(s.error=ty),s.complete===void 0&&(s.complete=ty);var u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?s.error(i.finalError):s.complete()}catch{}}),this.observers.push(s),u},e.prototype.unsubscribeOne=function(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))},e.prototype.forEachObserver=function(t){if(!this.finalized)for(var n=0;n<this.observers.length;n++)this.sendOne(n,t)},e.prototype.sendOne=function(t,n){var r=this;this.task.then(function(){if(r.observers!==void 0&&r.observers[t]!==void 0)try{n(r.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})},e.prototype.close=function(t){var n=this;this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(function(){n.observers=void 0,n.onNoObservers=void 0}))},e}();function aV(e,t){if(typeof e!="object"||e===null)return!1;for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i in e&&typeof e[i]=="function")return!0}return!1}function ty(){}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pe=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=n===0?"none":"no more than "+n),i){var s=e+" failed: Was called with "+r+(r===1?" argument.":" arguments.")+" Expects "+i+".";throw new Error(s)}};function Un(e,t){return e+" failed: "+t+" argument "}function Ft(e,t,n,r){if(!(r&&!n)&&typeof n!="function")throw new Error(Un(e,t)+"must be a valid function.")}function mC(e,t,n,r){if(!(r&&!n)&&(typeof n!="object"||n===null))throw new Error(Un(e,t)+"must be a valid context object.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var uV=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var s=i-55296;r++,H(r<e.length,"Surrogate pair missing trail surrogate.");var u=e.charCodeAt(r)-56320;i=65536+(s<<10)+u}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},pp=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cV=1e3,lV=2,fV=4*60*60*1e3,hV=.5;function r_(e,t,n){t===void 0&&(t=cV),n===void 0&&(n=lV);var r=t*Math.pow(n,e),i=Math.round(hV*r*(Math.random()-.5)*2);return Math.min(fV,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(e){return e&&e._delegate?e._delegate:e}var dn=function(){function e(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return e.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},e.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},e.prototype.setServiceProps=function(t){return this.serviceProps=t,this},e.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yR=function(){function e(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return e.prototype.get=function(t){var n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){var r=new Bt;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{var i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise},e.prototype.getImmediate=function(t){var n,r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error("Service "+this.name+" is not available")}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(t){var n,r;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,!!this.shouldAutoInitialize()){if(pV(t))try{this.getOrInitializeService({instanceIdentifier:fs})}catch{}try{for(var i=Kt(this.instancesDeferred.entries()),s=i.next();!s.done;s=i.next()){var u=Yt(s.value,2),c=u[0],l=u[1],h=this.normalizeInstanceIdentifier(c);try{var p=this.getOrInitializeService({instanceIdentifier:h});l.resolve(p)}catch{}}}catch(g){n={error:g}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}},e.prototype.clearInstance=function(t){t===void 0&&(t=fs),this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)},e.prototype.delete=function(){return C(this,void 0,void 0,function(){var t;return S(this,function(n){switch(n.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Ie(Ie([],Yt(t.filter(function(r){return"INTERNAL"in r}).map(function(r){return r.INTERNAL.delete()}))),Yt(t.filter(function(r){return"_delete"in r}).map(function(r){return r._delete()}))))];case 1:return n.sent(),[2]}})})},e.prototype.isComponentSet=function(){return this.component!=null},e.prototype.isInitialized=function(t){return t===void 0&&(t=fs),this.instances.has(t)},e.prototype.getOptions=function(t){return t===void 0&&(t=fs),this.instancesOptions.get(t)||{}},e.prototype.initialize=function(t){var n,r;t===void 0&&(t={});var i=t.options,s=i===void 0?{}:i,u=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(u))throw Error(this.name+"("+u+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var c=this.getOrInitializeService({instanceIdentifier:u,options:s});try{for(var l=Kt(this.instancesDeferred.entries()),h=l.next();!h.done;h=l.next()){var p=Yt(h.value,2),g=p[0],m=p[1],_=this.normalizeInstanceIdentifier(g);u===_&&m.resolve(c)}}catch(b){n={error:b}}finally{try{h&&!h.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}return c},e.prototype.onInit=function(t,n){var r,i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);var u=this.instances.get(i);return u&&t(u,i),function(){s.delete(t)}},e.prototype.invokeOnInitCallbacks=function(t,n){var r,i,s=this.onInitCallbacks.get(n);if(s)try{for(var u=Kt(s),c=u.next();!c.done;c=u.next()){var l=c.value;try{l(t,n)}catch{}}}catch(h){r={error:h}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}},e.prototype.getOrInitializeService=function(t){var n=t.instanceIdentifier,r=t.options,i=r===void 0?{}:r,s=this.instances.get(n);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:dV(n),options:i}),this.instances.set(n,s),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(s,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,s)}catch{}return s||null},e.prototype.normalizeInstanceIdentifier=function(t){return t===void 0&&(t=fs),this.component?this.component.multipleInstances?t:fs:t},e.prototype.shouldAutoInitialize=function(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"},e}();function dV(e){return e===fs?void 0:e}function pV(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _R=function(){function e(t){this.name=t,this.providers=new Map}return e.prototype.addComponent=function(t){var n=this.getProvider(t.name);if(n.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);n.setComponent(t)},e.prototype.addOrOverwriteComponent=function(t){var n=this.getProvider(t.name);n.isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},e.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var n=new yR(t,this);return this.providers.set(t,n),n},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function Mr(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var s=arguments[t],u=0,c=s.length;u<c;u++,i++)r[i]=s[u];return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var us,Lw=[],Re;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Re||(Re={}));var wR={debug:Re.DEBUG,verbose:Re.VERBOSE,info:Re.INFO,warn:Re.WARN,error:Re.ERROR,silent:Re.SILENT},vV=Re.INFO,gV=(us={},us[Re.DEBUG]="log",us[Re.VERBOSE]="log",us[Re.INFO]="info",us[Re.WARN]="warn",us[Re.ERROR]="error",us),mV=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(t<e.logLevel)){var i=new Date().toISOString(),s=gV[t];if(s)console[s].apply(console,Mr(["["+i+"]  "+e.name+":"],n));else throw new Error("Attempted to log a message with an invalid logType (value: "+t+")")}},zs=function(){function e(t){this.name=t,this._logLevel=vV,this._logHandler=mV,this._userLogHandler=null,Lw.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in Re))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),e.prototype.setLogLevel=function(t){this._logLevel=typeof t=="string"?wR[t]:t},Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),e.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,Mr([this,Re.DEBUG],t)),this._logHandler.apply(this,Mr([this,Re.DEBUG],t))},e.prototype.log=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,Mr([this,Re.VERBOSE],t)),this._logHandler.apply(this,Mr([this,Re.VERBOSE],t))},e.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,Mr([this,Re.INFO],t)),this._logHandler.apply(this,Mr([this,Re.INFO],t))},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,Mr([this,Re.WARN],t)),this._logHandler.apply(this,Mr([this,Re.WARN],t))},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,Mr([this,Re.ERROR],t)),this._logHandler.apply(this,Mr([this,Re.ERROR],t))},e}();function yV(e){Lw.forEach(function(t){t.setLogLevel(e)})}function _V(e,t){for(var n=function(u){var c=null;t&&t.level&&(c=wR[t.level]),e===null?u.userLogHandler=null:u.userLogHandler=function(l,h){for(var p=[],g=2;g<arguments.length;g++)p[g-2]=arguments[g];var m=p.map(function(_){if(_==null)return null;if(typeof _=="string")return _;if(typeof _=="number"||typeof _=="boolean")return _.toString();if(_ instanceof Error)return _.message;try{return JSON.stringify(_)}catch{return null}}).filter(function(_){return _}).join(" ");h>=(c??l.logLevel)&&e({level:Re[h].toLowerCase(),message:m,args:p,type:l.name})}},r=0,i=Lw;r<i.length;r++){var s=i[r];n(s)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var so,wV=(so={},so["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",so["bad-app-name"]="Illegal App name: '{$appName}",so["duplicate-app"]="Firebase App named '{$appName}' already exists",so["app-deleted"]="Firebase App named '{$appName}' already deleted",so["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",so["invalid-log-argument"]="First argument to `onLog` must be null or a function.",so),La=new Hi("app","Firebase",wV),bR="@firebase/app",bV="0.6.30",EV="@firebase/analytics",TV="@firebase/app-check",IV="@firebase/auth",SV="@firebase/database",CV="@firebase/functions",AV="@firebase/installations",kV="@firebase/messaging",NV="@firebase/performance",RV="@firebase/remote-config",OV="@firebase/storage",PV="@firebase/firestore",DV="firebase-wrapper";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rn,ad="[DEFAULT]",xV=(rn={},rn[bR]="fire-core",rn[EV]="fire-analytics",rn[TV]="fire-app-check",rn[IV]="fire-auth",rn[SV]="fire-rtdb",rn[CV]="fire-fn",rn[AV]="fire-iid",rn[kV]="fire-fcm",rn[NV]="fire-perf",rn[RV]="fire-rc",rn[OV]="fire-gcs",rn[PV]="fire-fst",rn["fire-js"]="fire-js",rn[DV]="fire-js-all",rn);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xa=new zs("@firebase/app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gh=function(){function e(t,n,r){var i=this;this.firebase_=r,this.isDeleted_=!1,this.name_=n.name,this.automaticDataCollectionEnabled_=n.automaticDataCollectionEnabled||!1,this.options_=dR(t),this.container=new _R(n.name),this._addComponent(new dn("app",function(){return i},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(s){return i._addComponent(s)})}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),e.prototype.delete=function(){var t=this;return new Promise(function(n){t.checkDestroyed_(),n()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(n){return n.delete()}))}).then(function(){t.isDeleted_=!0})},e.prototype._getService=function(t,n){var r;n===void 0&&(n=ad),this.checkDestroyed_();var i=this.container.getProvider(t);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})},e.prototype._removeServiceInstance=function(t,n){n===void 0&&(n=ad),this.container.getProvider(t).clearInstance(n)},e.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(n){Xa.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,n)}},e.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},e.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw La.create("app-deleted",{appName:this.name_})},e}();Gh.prototype.name&&Gh.prototype.options||Gh.prototype.delete||console.log("dc");var LV="8.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MV(e){var t={},n=new Map,r={__esModule:!0,initializeApp:u,app:s,registerVersion:h,setLogLevel:yV,onLog:p,apps:null,SDK_VERSION:LV,INTERNAL:{registerComponent:l,removeApp:i,components:n,useAsService:g}};r.default=r,Object.defineProperty(r,"apps",{get:c});function i(m){delete t[m]}function s(m){if(m=m||ad,!or(t,m))throw La.create("no-app",{appName:m});return t[m]}s.App=e;function u(m,_){if(_===void 0&&(_={}),typeof _!="object"||_===null){var b=_;_={name:b}}var E=_;E.name===void 0&&(E.name=ad);var I=E.name;if(typeof I!="string"||!I)throw La.create("bad-app-name",{appName:String(I)});if(or(t,I))throw La.create("duplicate-app",{appName:I});var N=new e(m,E,r);return t[I]=N,N}function c(){return Object.keys(t).map(function(m){return t[m]})}function l(m){var _=m.name;if(n.has(_))return Xa.debug("There were multiple attempts to register component "+_+"."),m.type==="PUBLIC"?r[_]:null;if(n.set(_,m),m.type==="PUBLIC"){var b=function(x){if(x===void 0&&(x=s()),typeof x[_]!="function")throw La.create("invalid-app-argument",{appName:_});return x[_]()};m.serviceProps!==void 0&&ll(b,m.serviceProps),r[_]=b,e.prototype[_]=function(){for(var x=[],P=0;P<arguments.length;P++)x[P]=arguments[P];var z=this._getService.bind(this,_);return z.apply(this,m.multipleInstances?x:[])}}for(var E=0,I=Object.keys(t);E<I.length;E++){var N=I[E];t[N]._addComponent(m)}return m.type==="PUBLIC"?r[_]:null}function h(m,_,b){var E,I=(E=xV[m])!==null&&E!==void 0?E:m;b&&(I+="-"+b);var N=I.match(/\s|\//),x=_.match(/\s|\//);if(N||x){var P=['Unable to register library "'+I+'" with version "'+_+'":'];N&&P.push('library name "'+I+'" contains illegal characters (whitespace or "/")'),N&&x&&P.push("and"),x&&P.push('version name "'+_+'" contains illegal characters (whitespace or "/")'),Xa.warn(P.join(" "));return}l(new dn(I+"-version",function(){return{library:I,version:_}},"VERSION"))}function p(m,_){if(m!==null&&typeof m!="function")throw La.create("invalid-log-argument");_V(m,_)}function g(m,_){if(_==="serverAuth")return null;var b=_;return b}return r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ER(){var e=MV(Gh);e.INTERNAL=he(he({},e.INTERNAL),{createFirebaseNamespace:ER,extendNamespace:t,createSubscribe:oV,ErrorFactory:Hi,deepExtend:ll});function t(n){ll(e,n)}return e}var Mw=ER();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var FV=function(){function e(t){this.container=t}return e.prototype.getPlatformInfoString=function(){var t=this.container.getProviders();return t.map(function(n){if(UV(n)){var r=n.getImmediate();return r.library+"/"+r.version}else return null}).filter(function(n){return n}).join(" ")},e}();function UV(e){var t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jV(e,t){e.INTERNAL.registerComponent(new dn("platform-logger",function(n){return new FV(n)},"PRIVATE")),e.registerVersion(bR,bV,t),e.registerVersion("fire-js","")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(W4()&&self.firebase!==void 0){Xa.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);var yC=self.firebase.SDK_VERSION;yC&&yC.indexOf("LITE")>=0&&Xa.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}var VV=Mw.initializeApp;Mw.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return pR()&&Xa.warn(`
      Warning: This is a browser-targeted Firebase bundle but it appears it is being
      run in a Node environment.  If running in a Node environment, make sure you
      are using the bundle specified by the "main" field in package.json.
      
      If you are using Webpack, you can specify "main" as the first item in
      "resolve.mainFields":
      https://webpack.js.org/configuration/resolve/#resolvemainfields
      
      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"
      as the first item in "mainFields", e.g. ['main', 'module'].
      https://github.com/rollup/@rollup/plugin-node-resolve
      `),VV.apply(void 0,e)};var oe=Mw;jV(oe);(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,a,f){o!=Array.prototype&&o!=Object.prototype&&(o[a]=f.value)};function n(o){o=[typeof window=="object"&&window,typeof self=="object"&&self,typeof global=="object"&&global,o];for(var a=0;a<o.length;++a){var f=o[a];if(f&&f.Math==Math)return f}return globalThis}var r=n(this);function i(o,a){if(a){var f=r;o=o.split(".");for(var d=0;d<o.length-1;d++){var v=o[d];v in f||(f[v]={}),f=f[v]}o=o[o.length-1],d=f[o],a=a(d),a!=d&&a!=null&&t(f,o,{configurable:!0,writable:!0,value:a})}}function s(o){var a=0;return function(){return a<o.length?{done:!1,value:o[a++]}:{done:!0}}}function u(o){var a=typeof Symbol<"u"&&Symbol.iterator&&o[Symbol.iterator];return a?a.call(o):{next:s(o)}}i("Promise",function(o){function a(w){this.b=0,this.c=void 0,this.a=[];var T=this.f();try{w(T.resolve,T.reject)}catch(L){T.reject(L)}}function f(){this.a=null}function d(w){return w instanceof a?w:new a(function(T){T(w)})}if(o)return o;f.prototype.b=function(w){if(this.a==null){this.a=[];var T=this;this.c(function(){T.g()})}this.a.push(w)};var v=r.setTimeout;f.prototype.c=function(w){v(w,0)},f.prototype.g=function(){for(;this.a&&this.a.length;){var w=this.a;this.a=[];for(var T=0;T<w.length;++T){var L=w[T];w[T]=null;try{L()}catch(j){this.f(j)}}}this.a=null},f.prototype.f=function(w){this.c(function(){throw w})},a.prototype.f=function(){function w(j){return function(me){L||(L=!0,j.call(T,me))}}var T=this,L=!1;return{resolve:w(this.m),reject:w(this.g)}},a.prototype.m=function(w){if(w===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(w instanceof a)this.s(w);else{e:switch(typeof w){case"object":var T=w!=null;break e;case"function":T=!0;break e;default:T=!1}T?this.v(w):this.h(w)}},a.prototype.v=function(w){var T=void 0;try{T=w.then}catch(L){this.g(L);return}typeof T=="function"?this.u(T,w):this.h(w)},a.prototype.g=function(w){this.i(2,w)},a.prototype.h=function(w){this.i(1,w)},a.prototype.i=function(w,T){if(this.b!=0)throw Error("Cannot settle("+w+", "+T+"): Promise already settled in state"+this.b);this.b=w,this.c=T,this.l()},a.prototype.l=function(){if(this.a!=null){for(var w=0;w<this.a.length;++w)y.b(this.a[w]);this.a=null}};var y=new f;return a.prototype.s=function(w){var T=this.f();w.Ra(T.resolve,T.reject)},a.prototype.u=function(w,T){var L=this.f();try{w.call(T,L.resolve,L.reject)}catch(j){L.reject(j)}},a.prototype.then=function(w,T){function L(je,Lt){return typeof je=="function"?function(Ii){try{j(je(Ii))}catch($m){me($m)}}:Lt}var j,me,He=new a(function(je,Lt){j=je,me=Lt});return this.Ra(L(w,j),L(T,me)),He},a.prototype.catch=function(w){return this.then(void 0,w)},a.prototype.Ra=function(w,T){function L(){switch(j.b){case 1:w(j.c);break;case 2:T(j.c);break;default:throw Error("Unexpected state: "+j.b)}}var j=this;this.a==null?y.b(L):this.a.push(L)},a.resolve=d,a.reject=function(w){return new a(function(T,L){L(w)})},a.race=function(w){return new a(function(T,L){for(var j=u(w),me=j.next();!me.done;me=j.next())d(me.value).Ra(T,L)})},a.all=function(w){var T=u(w),L=T.next();return L.done?d([]):new a(function(j,me){function He(Ii){return function($m){je[Ii]=$m,Lt--,Lt==0&&j(je)}}var je=[],Lt=0;do je.push(void 0),Lt++,d(L.value).Ra(He(je.length-1),me),L=T.next();while(!L.done)})},a});var c=c||{},l=this||self,h=/^[\w+/_-]+[=]{0,2}$/,p=null;function g(o){return(o=o.querySelector&&o.querySelector("script[nonce]"))&&(o=o.nonce||o.getAttribute("nonce"))&&h.test(o)?o:""}function m(){}function _(o){var a=typeof o;return a!="object"?a:o?Array.isArray(o)?"array":a:"null"}function b(o){var a=_(o);return a=="array"||a=="object"&&typeof o.length=="number"}function E(o){return _(o)=="function"}function I(o){var a=typeof o;return a=="object"&&o!=null||a=="function"}function N(o){return Object.prototype.hasOwnProperty.call(o,x)&&o[x]||(o[x]=++P)}var x="closure_uid_"+(1e9*Math.random()>>>0),P=0;function z(o,a,f){return o.call.apply(o.bind,arguments)}function W(o,a,f){if(!o)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var v=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(v,d),o.apply(a,v)}}return function(){return o.apply(a,arguments)}}function V(o,a,f){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?V=z:V=W,V.apply(null,arguments)}function ne(o,a){var f=Array.prototype.slice.call(arguments,1);return function(){var d=f.slice();return d.push.apply(d,arguments),o.apply(this,d)}}function M(o,a){function f(){}f.prototype=a.prototype,o.bb=a.prototype,o.prototype=new f,o.prototype.constructor=o}function de(o){return o}function k(o,a,f){this.code=xt+o,this.message=a||qn[o]||"",this.a=f||null}M(k,Error),k.prototype.w=function(){var o={code:this.code,message:this.message};return this.a&&(o.serverResponse=this.a),o},k.prototype.toJSON=function(){return this.w()};function Je(o){var a=o&&o.code;return a?new k(a.substring(xt.length),o.message,o.serverResponse):null}var xt="auth/",qn={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},gn={ld:{Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ua:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://securetoken.googleapis.com/v1/token",Xa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ua:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ua:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",$a:"https://test-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function vt(o){for(var a in gn)if(gn[a].id===o)return o=gn[a],{firebaseEndpoint:o.Ua,secureTokenEndpoint:o.$a,identityPlatformEndpoint:o.Xa};return null}var gt;gt=vt("__EID__")?"__EID__":void 0;function Ze(o){if(!o)return!1;try{return!!o.$goog_Thenable}catch{return!1}}function Te(o){if(Error.captureStackTrace)Error.captureStackTrace(this,Te);else{var a=Error().stack;a&&(this.stack=a)}o&&(this.message=String(o))}M(Te,Error),Te.prototype.name="CustomError";function Ir(o,a){o=o.split("%s");for(var f="",d=o.length-1,v=0;v<d;v++)f+=o[v]+(v<a.length?a[v]:"%s");Te.call(this,f+o[d])}M(Ir,Te),Ir.prototype.name="AssertionError";function Sr(o,a){throw new Ir("Failure"+(o?": "+o:""),Array.prototype.slice.call(arguments,1))}function Cr(o,a){this.c=o,this.f=a,this.b=0,this.a=null}Cr.prototype.get=function(){if(0<this.b){this.b--;var o=this.a;this.a=o.next,o.next=null}else o=this.c();return o};function Kn(o,a){o.f(a),100>o.b&&(o.b++,a.next=o.a,o.a=a)}function Ku(){this.b=this.a=null}var mf=new Cr(function(){return new Hn},function(o){o.reset()});Ku.prototype.add=function(o,a){var f=mf.get();f.set(o,a),this.b?this.b.next=f:this.a=f,this.b=f};function _v(){var o=IE,a=null;return o.a&&(a=o.a,o.a=o.a.next,o.a||(o.b=null),a.next=null),a}function Hn(){this.next=this.b=this.a=null}Hn.prototype.set=function(o,a){this.a=o,this.b=a,this.next=null},Hn.prototype.reset=function(){this.next=this.b=this.a=null};var Vo=Array.prototype.indexOf?function(o,a){return Array.prototype.indexOf.call(o,a,void 0)}:function(o,a){if(typeof o=="string")return typeof a!="string"||a.length!=1?-1:o.indexOf(a,0);for(var f=0;f<o.length;f++)if(f in o&&o[f]===a)return f;return-1},Ye=Array.prototype.forEach?function(o,a,f){Array.prototype.forEach.call(o,a,f)}:function(o,a,f){for(var d=o.length,v=typeof o=="string"?o.split(""):o,y=0;y<d;y++)y in v&&a.call(f,v[y],y,o)};function zi(o,a){for(var f=typeof o=="string"?o.split(""):o,d=o.length-1;0<=d;--d)d in f&&a.call(void 0,f[d],d,o)}var Hu=Array.prototype.filter?function(o,a){return Array.prototype.filter.call(o,a,void 0)}:function(o,a){for(var f=o.length,d=[],v=0,y=typeof o=="string"?o.split(""):o,w=0;w<f;w++)if(w in y){var T=y[w];a.call(void 0,T,w,o)&&(d[v++]=T)}return d},Qi=Array.prototype.map?function(o,a){return Array.prototype.map.call(o,a,void 0)}:function(o,a){for(var f=o.length,d=Array(f),v=typeof o=="string"?o.split(""):o,y=0;y<f;y++)y in v&&(d[y]=a.call(void 0,v[y],y,o));return d},A=Array.prototype.some?function(o,a){return Array.prototype.some.call(o,a,void 0)}:function(o,a){for(var f=o.length,d=typeof o=="string"?o.split(""):o,v=0;v<f;v++)if(v in d&&a.call(void 0,d[v],v,o))return!0;return!1};function R(o){e:{for(var a=DM,f=o.length,d=typeof o=="string"?o.split(""):o,v=0;v<f;v++)if(v in d&&a.call(void 0,d[v],v,o)){a=v;break e}a=-1}return 0>a?null:typeof o=="string"?o.charAt(a):o[a]}function D(o,a){return 0<=Vo(o,a)}function U(o,a){a=Vo(o,a);var f;return(f=0<=a)&&Array.prototype.splice.call(o,a,1),f}function F(o,a){var f=0;zi(o,function(d,v){a.call(void 0,d,v,o)&&Array.prototype.splice.call(o,v,1).length==1&&f++})}function $(o){return Array.prototype.concat.apply([],arguments)}function X(o){var a=o.length;if(0<a){for(var f=Array(a),d=0;d<a;d++)f[d]=o[d];return f}return[]}var G=String.prototype.trim?function(o){return o.trim()}:function(o){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(o)[1]},Y=/&/g,q=/</g,ue=/>/g,ie=/"/g,ce=/'/g,ge=/\x00/g,Ne=/[\x00&<>"']/;function fe(o,a){return o.indexOf(a)!=-1}function Ue(o,a){return o<a?-1:o>a?1:0}var ze;e:{var Rn=l.navigator;if(Rn){var _i=Rn.userAgent;if(_i){ze=_i;break e}}ze=""}function lt(o){return fe(ze,o)}function Yi(o,a){for(var f in o)a.call(void 0,o[f],f,o)}function $r(o){for(var a in o)return!1;return!0}function ft(o){var a={},f;for(f in o)a[f]=o[f];return a}var Wn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Wt(o,a){for(var f,d,v=1;v<arguments.length;v++){d=arguments[v];for(f in d)o[f]=d[f];for(var y=0;y<Wn.length;y++)f=Wn[y],Object.prototype.hasOwnProperty.call(d,f)&&(o[f]=d[f])}}function iE(o,a){e:{try{var f=o&&o.ownerDocument,d=f&&(f.defaultView||f.parentWindow);if(d=d||l,d.Element&&d.Location){var v=d;break e}}catch{}v=null}if(v&&typeof v[a]<"u"&&(!o||!(o instanceof v[a])&&(o instanceof v.Location||o instanceof v.Element))){if(I(o))try{var y=o.constructor.displayName||o.constructor.name||Object.prototype.toString.call(o)}catch{y="<object could not be stringified>"}else y=o===void 0?"undefined":o===null?"null":typeof o;Sr("Argument is not a %s (or a non-Element, non-Location mock); got: %s",a,y)}}function zr(o,a){this.a=o===yf&&a||"",this.b=oE}zr.prototype.ta=!0,zr.prototype.sa=function(){return this.a},zr.prototype.toString=function(){return"Const{"+this.a+"}"};function wv(o){return o instanceof zr&&o.constructor===zr&&o.b===oE?o.a:(Sr("expected object of type Const, got '"+o+"'"),"type_error:Const")}var oE={},yf={},_f;function sE(){if(_f===void 0){var o=null,a=l.trustedTypes;if(a&&a.createPolicy){try{o=a.createPolicy("goog#html",{createHTML:de,createScript:de,createScriptURL:de})}catch(f){l.console&&l.console.error(f.message)}_f=o}else _f=o}return _f}function aa(o,a){this.a=a===uE?o:""}aa.prototype.ta=!0,aa.prototype.sa=function(){return this.a.toString()},aa.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};function aE(o){return o instanceof aa&&o.constructor===aa?o.a:(Sr("expected object of type TrustedResourceUrl, got '"+o+"' of type "+_(o)),"type_error:TrustedResourceUrl")}function bv(o,a){var f=wv(o);if(!cL.test(f))throw Error("Invalid TrustedResourceUrl format: "+f);return o=f.replace(uL,function(d,v){if(!Object.prototype.hasOwnProperty.call(a,v))throw Error('Found marker, "'+v+'", in format string, "'+f+'", but no valid label mapping found in args: '+JSON.stringify(a));return d=a[v],d instanceof zr?wv(d):encodeURIComponent(String(d))}),lL(o)}var uL=/%{(\w+)}/g,cL=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,uE={};function lL(o){var a=sE();return o=a?a.createScriptURL(o):o,new aa(o,uE)}function On(o,a){this.a=a===Wu?o:""}On.prototype.ta=!0,On.prototype.sa=function(){return this.a.toString()},On.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};function wf(o){return o instanceof On&&o.constructor===On?o.a:(Sr("expected object of type SafeUrl, got '"+o+"' of type "+_(o)),"type_error:SafeUrl")}var fL=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,hL=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,cE=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function lE(o){if(o instanceof On)return o;if(o=typeof o=="object"&&o.ta?o.sa():String(o),cE.test(o))o=new On(o,Wu);else{o=String(o),o=o.replace(/(%0A|%0D)/g,"");var a=o.match(hL);o=a&&fL.test(a[1])?new On(o,Wu):null}return o}function fE(o){return o instanceof On?o:(o=typeof o=="object"&&o.ta?o.sa():String(o),cE.test(o)||(o="about:invalid#zClosurez"),new On(o,Wu))}var Wu={},hE=new On("about:invalid#zClosurez",Wu);function ua(o,a,f){this.a=f===dE?o:""}ua.prototype.ta=!0,ua.prototype.sa=function(){return this.a.toString()},ua.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};function dL(o){return o instanceof ua&&o.constructor===ua?o.a:(Sr("expected object of type SafeHtml, got '"+o+"' of type "+_(o)),"type_error:SafeHtml")}var dE={};function pL(o,a){iE(o,"HTMLScriptElement"),o.src=aE(a),(a=o.ownerDocument&&o.ownerDocument.defaultView)&&a!=l?a=g(a.document):(p===null&&(p=g(l.document)),a=p),a&&o.setAttribute("nonce",a)}function pE(o,a,f,d){return o=o instanceof On?o:fE(o),a=a||l,f=f instanceof zr?wv(f):f||"",a.open(wf(o),f,d,void 0)}function vE(o,a){for(var f=o.split("%s"),d="",v=Array.prototype.slice.call(arguments,1);v.length&&1<f.length;)d+=f.shift()+v.shift();return d+f.join("%s")}function Ev(o){return Ne.test(o)&&(o.indexOf("&")!=-1&&(o=o.replace(Y,"&amp;")),o.indexOf("<")!=-1&&(o=o.replace(q,"&lt;")),o.indexOf(">")!=-1&&(o=o.replace(ue,"&gt;")),o.indexOf('"')!=-1&&(o=o.replace(ie,"&quot;")),o.indexOf("'")!=-1&&(o=o.replace(ce,"&#39;")),o.indexOf("\0")!=-1&&(o=o.replace(ge,"&#0;"))),o}function Tv(o){return Tv[" "](o),o}Tv[" "]=m;function vL(o,a){var f=_L;return Object.prototype.hasOwnProperty.call(f,o)?f[o]:f[o]=a(o)}var gL=lt("Opera"),Ar=lt("Trident")||lt("MSIE"),gE=lt("Edge"),mL=gE||Ar,mE=lt("Gecko")&&!(fe(ze.toLowerCase(),"webkit")&&!lt("Edge"))&&!(lt("Trident")||lt("MSIE"))&&!lt("Edge"),yL=fe(ze.toLowerCase(),"webkit")&&!lt("Edge");function yE(){var o=l.document;return o?o.documentMode:void 0}var bf;e:{var Iv="",Sv=function(){var o=ze;if(mE)return/rv:([^\);]+)(\)|;)/.exec(o);if(gE)return/Edge\/([\d\.]+)/.exec(o);if(Ar)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(o);if(yL)return/WebKit\/(\S+)/.exec(o);if(gL)return/(?:Version)[ \/]?(\S+)/.exec(o)}();if(Sv&&(Iv=Sv?Sv[1]:""),Ar){var Cv=yE();if(Cv!=null&&Cv>parseFloat(Iv)){bf=String(Cv);break e}}bf=Iv}var _L={};function _E(o){return vL(o,function(){for(var a=0,f=G(String(bf)).split("."),d=G(String(o)).split("."),v=Math.max(f.length,d.length),y=0;a==0&&y<v;y++){var w=f[y]||"",T=d[y]||"";do{if(w=/(\d*)(\D*)(.*)/.exec(w)||["","","",""],T=/(\d*)(\D*)(.*)/.exec(T)||["","","",""],w[0].length==0&&T[0].length==0)break;a=Ue(w[1].length==0?0:parseInt(w[1],10),T[1].length==0?0:parseInt(T[1],10))||Ue(w[2].length==0,T[2].length==0)||Ue(w[2],T[2]),w=w[3],T=T[3]}while(a==0)}return 0<=a})}var Av;if(l.document&&Ar){var wE=yE();Av=wE||parseInt(bf,10)||void 0}else Av=void 0;var Xi=Av;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch{}var wL=!Ar||9<=Number(Xi);function Gu(o){var a=document;return typeof o=="string"?a.getElementById(o):o}function bE(o,a){Yi(a,function(f,d){f&&typeof f=="object"&&f.ta&&(f=f.sa()),d=="style"?o.style.cssText=f:d=="class"?o.className=f:d=="for"?o.htmlFor=f:EE.hasOwnProperty(d)?o.setAttribute(EE[d],f):d.lastIndexOf("aria-",0)==0||d.lastIndexOf("data-",0)==0?o.setAttribute(d,f):o[d]=f})}var EE={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function bL(o,a,f){var d=arguments,v=document,y=String(d[0]),w=d[1];if(!wL&&w&&(w.name||w.type)){if(y=["<",y],w.name&&y.push(' name="',Ev(w.name),'"'),w.type){y.push(' type="',Ev(w.type),'"');var T={};Wt(T,w),delete T.type,w=T}y.push(">"),y=y.join("")}return y=Ef(v,y),w&&(typeof w=="string"?y.className=w:Array.isArray(w)?y.className=w.join(" "):bE(y,w)),2<d.length&&EL(v,y,d),y}function EL(o,a,f){function d(T){T&&a.appendChild(typeof T=="string"?o.createTextNode(T):T)}for(var v=2;v<f.length;v++){var y=f[v];if(!b(y)||I(y)&&0<y.nodeType)d(y);else{e:{if(y&&typeof y.length=="number"){if(I(y)){var w=typeof y.item=="function"||typeof y.item=="string";break e}if(E(y)){w=typeof y.item=="function";break e}}w=!1}Ye(w?X(y):y,d)}}}function Ef(o,a){return a=String(a),o.contentType==="application/xhtml+xml"&&(a=a.toLowerCase()),o.createElement(a)}function TE(o){l.setTimeout(function(){throw o},0)}var kv;function TL(){var o=l.MessageChannel;if(typeof o>"u"&&typeof window<"u"&&window.postMessage&&window.addEventListener&&!lt("Presto")&&(o=function(){var v=Ef(document,"IFRAME");v.style.display="none",document.documentElement.appendChild(v);var y=v.contentWindow;v=y.document,v.open(),v.close();var w="callImmediate"+Math.random(),T=y.location.protocol=="file:"?"*":y.location.protocol+"//"+y.location.host;v=V(function(L){(T=="*"||L.origin==T)&&L.data==w&&this.port1.onmessage()},this),y.addEventListener("message",v,!1),this.port1={},this.port2={postMessage:function(){y.postMessage(w,T)}}}),typeof o<"u"&&!lt("Trident")&&!lt("MSIE")){var a=new o,f={},d=f;return a.port1.onmessage=function(){if(f.next!==void 0){f=f.next;var v=f.Hb;f.Hb=null,v()}},function(v){d.next={Hb:v},d=d.next,a.port2.postMessage(0)}}return function(v){l.setTimeout(v,0)}}function Tf(o,a){If||IL(),Nv||(If(),Nv=!0),IE.add(o,a)}var If;function IL(){if(l.Promise&&l.Promise.resolve){var o=l.Promise.resolve(void 0);If=function(){o.then(SE)}}else If=function(){var a=SE;!E(l.setImmediate)||l.Window&&l.Window.prototype&&!lt("Edge")&&l.Window.prototype.setImmediate==l.setImmediate?(kv||(kv=TL()),kv(a)):l.setImmediate(a)}}var Nv=!1,IE=new Ku;function SE(){for(var o;o=_v();){try{o.a.call(o.b)}catch(a){TE(a)}Kn(mf,o)}Nv=!1}function Oe(o,a){if(this.a=Bo,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,o!=m)try{var f=this;o.call(a,function(d){qo(f,$u,d)},function(d){if(!(d instanceof ca))try{throw d instanceof Error?d:Error("Promise rejected.")}catch{}qo(f,wi,d)})}catch(d){qo(this,wi,d)}}var Bo=0,$u=2,wi=3;function CE(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}CE.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var AE=new Cr(function(){return new CE},function(o){o.reset()});function Rv(o,a,f){var d=AE.get();return d.g=o,d.b=a,d.f=f,d}function le(o){if(o instanceof Oe)return o;var a=new Oe(m);return qo(a,$u,o),a}function nt(o){return new Oe(function(a,f){f(o)})}function kE(o,a,f){PE(o,a,f,null)||Tf(ne(a,o))}function SL(o){return new Oe(function(a,f){var d=o.length,v=[];if(d)for(var y=function(j,me){d--,v[j]=me,d==0&&a(v)},w=function(j){f(j)},T=0,L;T<o.length;T++)L=o[T],kE(L,ne(y,T),w);else a(v)})}function NE(o){return new Oe(function(a){var f=o.length,d=[];if(f)for(var v=function(T,L,j){f--,d[T]=L?{Qb:!0,value:j}:{Qb:!1,reason:j},f==0&&a(d)},y=0,w;y<o.length;y++)w=o[y],kE(w,ne(v,y,!0),ne(v,y,!1));else a(d)})}Oe.prototype.then=function(o,a,f){return OE(this,E(o)?o:null,E(a)?a:null,f)},Oe.prototype.$goog_Thenable=!0,e=Oe.prototype,e.oa=function(o,a){return o=Rv(o,o,a),o.c=!0,Ov(this,o),this},e.o=function(o,a){return OE(this,null,o,a)},e.cancel=function(o){if(this.a==Bo){var a=new ca(o);Tf(function(){RE(this,a)},this)}};function RE(o,a){if(o.a==Bo)if(o.c){var f=o.c;if(f.b){for(var d=0,v=null,y=null,w=f.b;w&&(w.c||(d++,w.a==o&&(v=w),!(v&&1<d)));w=w.next)v||(y=w);v&&(f.a==Bo&&d==1?RE(f,a):(y?(d=y,d.next==f.f&&(f.f=d),d.next=d.next.next):xE(f),LE(f,v,wi,a)))}o.c=null}else qo(o,wi,a)}function Ov(o,a){o.b||o.a!=$u&&o.a!=wi||DE(o),o.f?o.f.next=a:o.b=a,o.f=a}function OE(o,a,f,d){var v=Rv(null,null,null);return v.a=new Oe(function(y,w){v.g=a?function(T){try{var L=a.call(d,T);y(L)}catch(j){w(j)}}:y,v.b=f?function(T){try{var L=f.call(d,T);L===void 0&&T instanceof ca?w(T):y(L)}catch(j){w(j)}}:w}),v.a.c=o,Ov(o,v),v.a}e.$c=function(o){this.a=Bo,qo(this,$u,o)},e.ad=function(o){this.a=Bo,qo(this,wi,o)};function qo(o,a,f){o.a==Bo&&(o===f&&(a=wi,f=new TypeError("Promise cannot resolve to itself")),o.a=1,PE(f,o.$c,o.ad,o)||(o.i=f,o.a=a,o.c=null,DE(o),a!=wi||f instanceof ca||AL(o,f)))}function PE(o,a,f,d){if(o instanceof Oe)return Ov(o,Rv(a||m,f||null,d)),!0;if(Ze(o))return o.then(a,f,d),!0;if(I(o))try{var v=o.then;if(E(v))return CL(o,v,a,f,d),!0}catch(y){return f.call(d,y),!0}return!1}function CL(o,a,f,d,v){function y(L){T||(T=!0,d.call(v,L))}function w(L){T||(T=!0,f.call(v,L))}var T=!1;try{a.call(o,w,y)}catch(L){y(L)}}function DE(o){o.h||(o.h=!0,Tf(o.gc,o))}function xE(o){var a=null;return o.b&&(a=o.b,o.b=a.next,a.next=null),o.b||(o.f=null),a}e.gc=function(){for(var o;o=xE(this);)LE(this,o,this.a,this.i);this.h=!1};function LE(o,a,f,d){if(f==wi&&a.b&&!a.c)for(;o&&o.g;o=o.c)o.g=!1;if(a.a)a.a.c=null,ME(a,f,d);else try{a.c?a.g.call(a.f):ME(a,f,d)}catch(v){FE.call(null,v)}Kn(AE,a)}function ME(o,a,f){a==$u?o.g.call(o.f,f):o.b&&o.b.call(o.f,f)}function AL(o,a){o.g=!0,Tf(function(){o.g&&FE.call(null,a)})}var FE=TE;function ca(o){Te.call(this,o)}M(ca,Te),ca.prototype.name="cancel";function Sf(){this.ya=this.ya,this.pa=this.pa}var kL=0;Sf.prototype.ya=!1;function UE(o){!o.ya&&(o.ya=!0,o.Da(),kL!=0)&&N(o)}Sf.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var NL=Object.freeze||function(o){return o},jE=!Ar||9<=Number(Xi),RL=Ar&&!_E("9"),OL=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,a=Object.defineProperty({},"passive",{get:function(){o=!0}});try{l.addEventListener("test",m,a),l.removeEventListener("test",m,a)}catch{}return o}();function Pn(o,a){this.type=o,this.b=this.target=a,this.defaultPrevented=!1}Pn.prototype.preventDefault=function(){this.defaultPrevented=!0};function Ko(o,a){if(Pn.call(this,o?o.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,o){var f=this.type=o.type,d=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.b=a,a=o.relatedTarget){if(mE){e:{try{Tv(a.nodeName);var v=!0;break e}catch{}v=!1}v||(a=null)}}else f=="mouseover"?a=o.fromElement:f=="mouseout"&&(a=o.toElement);this.relatedTarget=a,d?(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:PL[o.pointerType]||"",this.a=o,o.defaultPrevented&&this.preventDefault()}}M(Ko,Pn);var PL=NL({2:"touch",3:"pen",4:"mouse"});Ko.prototype.preventDefault=function(){Ko.bb.preventDefault.call(this);var o=this.a;if(o.preventDefault)o.preventDefault();else if(o.returnValue=!1,RL)try{(o.ctrlKey||112<=o.keyCode&&123>=o.keyCode)&&(o.keyCode=-1)}catch{}},Ko.prototype.g=function(){return this.a};var zu="closure_listenable_"+(1e6*Math.random()|0),DL=0;function xL(o,a,f,d,v){this.listener=o,this.proxy=null,this.src=a,this.type=f,this.capture=!!d,this.Wa=v,this.key=++DL,this.wa=this.Qa=!1}function Cf(o){o.wa=!0,o.listener=null,o.proxy=null,o.src=null,o.Wa=null}function Af(o){this.src=o,this.a={},this.b=0}Af.prototype.add=function(o,a,f,d,v){var y=o.toString();o=this.a[y],o||(o=this.a[y]=[],this.b++);var w=Dv(o,a,d,v);return-1<w?(a=o[w],f||(a.Qa=!1)):(a=new xL(a,this.src,y,!!d,v),a.Qa=f,o.push(a)),a};function Pv(o,a){var f=a.type;f in o.a&&U(o.a[f],a)&&(Cf(a),o.a[f].length==0&&(delete o.a[f],o.b--))}function Dv(o,a,f,d){for(var v=0;v<o.length;++v){var y=o[v];if(!y.wa&&y.listener==a&&y.capture==!!f&&y.Wa==d)return v}return-1}var xv="closure_lm_"+(1e6*Math.random()|0),Lv={};function ur(o,a,f,d,v){if(d&&d.once)Mv(o,a,f,d,v);else if(Array.isArray(a))for(var y=0;y<a.length;y++)ur(o,a[y],f,d,v);else f=Uv(f),o&&o[zu]?WE(o,a,f,I(d)?!!d.capture:!!d,v):VE(o,a,f,!1,d,v)}function VE(o,a,f,d,v,y){if(!a)throw Error("Invalid event type");var w=I(v)?!!v.capture:!!v,T=kf(o);if(T||(o[xv]=T=new Af(o)),f=T.add(a,f,d,w,y),!f.proxy)if(d=LL(),f.proxy=d,d.src=o,d.listener=f,o.addEventListener)OL||(v=w),v===void 0&&(v=!1),o.addEventListener(a.toString(),d,v);else if(o.attachEvent)o.attachEvent(qE(a.toString()),d);else if(o.addListener&&o.removeListener)o.addListener(d);else throw Error("addEventListener and attachEvent are unavailable.")}function LL(){var o=ML,a=jE?function(f){return o.call(a.src,a.listener,f)}:function(f){if(f=o.call(a.src,a.listener,f),!f)return f};return a}function Mv(o,a,f,d,v){if(Array.isArray(a))for(var y=0;y<a.length;y++)Mv(o,a[y],f,d,v);else f=Uv(f),o&&o[zu]?jv(o,a,f,I(d)?!!d.capture:!!d,v):VE(o,a,f,!0,d,v)}function Gn(o,a,f,d,v){if(Array.isArray(a))for(var y=0;y<a.length;y++)Gn(o,a[y],f,d,v);else d=I(d)?!!d.capture:!!d,f=Uv(f),o&&o[zu]?(o=o.v,a=String(a).toString(),a in o.a&&(y=o.a[a],f=Dv(y,f,d,v),-1<f&&(Cf(y[f]),Array.prototype.splice.call(y,f,1),y.length==0&&(delete o.a[a],o.b--)))):o&&(o=kf(o))&&(a=o.a[a.toString()],o=-1,a&&(o=Dv(a,f,d,v)),(f=-1<o?a[o]:null)&&BE(f))}function BE(o){if(typeof o!="number"&&o&&!o.wa){var a=o.src;if(a&&a[zu])Pv(a.v,o);else{var f=o.type,d=o.proxy;a.removeEventListener?a.removeEventListener(f,d,o.capture):a.detachEvent?a.detachEvent(qE(f),d):a.addListener&&a.removeListener&&a.removeListener(d),(f=kf(a))?(Pv(f,o),f.b==0&&(f.src=null,a[xv]=null)):Cf(o)}}}function qE(o){return o in Lv?Lv[o]:Lv[o]="on"+o}function KE(o,a,f,d){var v=!0;if((o=kf(o))&&(a=o.a[a.toString()]))for(a=a.concat(),o=0;o<a.length;o++){var y=a[o];y&&y.capture==f&&!y.wa&&(y=HE(y,d),v=v&&y!==!1)}return v}function HE(o,a){var f=o.listener,d=o.Wa||o.src;return o.Qa&&BE(o),f.call(d,a)}function ML(o,a){if(o.wa)return!0;if(!jE){if(!a)e:{a=["window","event"];for(var f=l,d=0;d<a.length;d++)if(f=f[a[d]],f==null){a=null;break e}a=f}if(d=a,a=new Ko(d,this),f=!0,!(0>d.keyCode||d.returnValue!=null)){e:{var v=!1;if(d.keyCode==0)try{d.keyCode=-1;break e}catch{v=!0}(v||d.returnValue==null)&&(d.returnValue=!0)}for(d=[],v=a.b;v;v=v.parentNode)d.push(v);for(o=o.type,v=d.length-1;0<=v;v--){a.b=d[v];var y=KE(d[v],o,!0,a);f=f&&y}for(v=0;v<d.length;v++)a.b=d[v],y=KE(d[v],o,!1,a),f=f&&y}return f}return HE(o,new Ko(a,this))}function kf(o){return o=o[xv],o instanceof Af?o:null}var Fv="__closure_events_fn_"+(1e9*Math.random()>>>0);function Uv(o){return E(o)?o:(o[Fv]||(o[Fv]=function(a){return o.handleEvent(a)}),o[Fv])}function mn(){Sf.call(this),this.v=new Af(this),this.bc=this,this.hb=null}M(mn,Sf),mn.prototype[zu]=!0,mn.prototype.addEventListener=function(o,a,f,d){ur(this,o,a,f,d)},mn.prototype.removeEventListener=function(o,a,f,d){Gn(this,o,a,f,d)},mn.prototype.dispatchEvent=function(o){var a,f=this.hb;if(f)for(a=[];f;f=f.hb)a.push(f);f=this.bc;var d=o.type||o;if(typeof o=="string")o=new Pn(o,f);else if(o instanceof Pn)o.target=o.target||f;else{var v=o;o=new Pn(d,f),Wt(o,v)}if(v=!0,a)for(var y=a.length-1;0<=y;y--){var w=o.b=a[y];v=Nf(w,d,!0,o)&&v}if(w=o.b=f,v=Nf(w,d,!0,o)&&v,v=Nf(w,d,!1,o)&&v,a)for(y=0;y<a.length;y++)w=o.b=a[y],v=Nf(w,d,!1,o)&&v;return v},mn.prototype.Da=function(){if(mn.bb.Da.call(this),this.v){var o=this.v,a;for(a in o.a){for(var f=o.a[a],d=0;d<f.length;d++)Cf(f[d]);delete o.a[a],o.b--}}this.hb=null};function WE(o,a,f,d,v){o.v.add(String(a),f,!1,d,v)}function jv(o,a,f,d,v){o.v.add(String(a),f,!0,d,v)}function Nf(o,a,f,d){if(a=o.v.a[String(a)],!a)return!0;a=a.concat();for(var v=!0,y=0;y<a.length;++y){var w=a[y];if(w&&!w.wa&&w.capture==f){var T=w.listener,L=w.Wa||w.src;w.Qa&&Pv(o.v,w),v=T.call(L,d)!==!1&&v}}return v&&!d.defaultPrevented}function Vv(o,a,f){if(E(o))f&&(o=V(o,f));else if(o&&typeof o.handleEvent=="function")o=V(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(a)?-1:l.setTimeout(o,a||0)}function la(o){var a=null;return new Oe(function(f,d){a=Vv(function(){f(void 0)},o),a==-1&&d(Error("Failed to schedule timer."))}).o(function(f){throw l.clearTimeout(a),f})}function GE(o){if(o.X&&typeof o.X=="function")return o.X();if(typeof o=="string")return o.split("");if(b(o)){for(var a=[],f=o.length,d=0;d<f;d++)a.push(o[d]);return a}a=[],f=0;for(d in o)a[f++]=o[d];return a}function $E(o){if(o.Y&&typeof o.Y=="function")return o.Y();if(!o.X||typeof o.X!="function"){if(b(o)||typeof o=="string"){var a=[];o=o.length;for(var f=0;f<o;f++)a.push(f);return a}a=[],f=0;for(var d in o)a[f++]=d;return a}}function FL(o,a){if(o.forEach&&typeof o.forEach=="function")o.forEach(a,void 0);else if(b(o)||typeof o=="string")Ye(o,a,void 0);else for(var f=$E(o),d=GE(o),v=d.length,y=0;y<v;y++)a.call(void 0,d[y],f&&f[y],o)}function fa(o,a){this.b={},this.a=[],this.c=0;var f=arguments.length;if(1<f){if(f%2)throw Error("Uneven number of arguments");for(var d=0;d<f;d+=2)this.set(arguments[d],arguments[d+1])}else if(o)if(o instanceof fa)for(f=o.Y(),d=0;d<f.length;d++)this.set(f[d],o.get(f[d]));else for(d in o)this.set(d,o[d])}e=fa.prototype,e.X=function(){Bv(this);for(var o=[],a=0;a<this.a.length;a++)o.push(this.b[this.a[a]]);return o},e.Y=function(){return Bv(this),this.a.concat()},e.clear=function(){this.b={},this.c=this.a.length=0};function Bv(o){if(o.c!=o.a.length){for(var a=0,f=0;a<o.a.length;){var d=o.a[a];Ho(o.b,d)&&(o.a[f++]=d),a++}o.a.length=f}if(o.c!=o.a.length){var v={};for(f=a=0;a<o.a.length;)d=o.a[a],Ho(v,d)||(o.a[f++]=d,v[d]=1),a++;o.a.length=f}}e.get=function(o,a){return Ho(this.b,o)?this.b[o]:a},e.set=function(o,a){Ho(this.b,o)||(this.c++,this.a.push(o)),this.b[o]=a},e.forEach=function(o,a){for(var f=this.Y(),d=0;d<f.length;d++){var v=f[d],y=this.get(v);o.call(a,y,v,this)}};function Ho(o,a){return Object.prototype.hasOwnProperty.call(o,a)}var zE=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function UL(o,a){if(o){o=o.split("&");for(var f=0;f<o.length;f++){var d=o[f].indexOf("="),v=null;if(0<=d){var y=o[f].substring(0,d);v=o[f].substring(d+1)}else y=o[f];a(y,v?decodeURIComponent(v.replace(/\+/g," ")):"")}}}function Ji(o,a){this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1;var f;o instanceof Ji?(this.i=a!==void 0?a:o.i,Qu(this,o.c),this.l=o.l,this.a=o.a,Yu(this,o.g),this.f=o.f,qv(this,JE(o.b)),this.h=o.h):o&&(f=String(o).match(zE))?(this.i=!!a,Qu(this,f[1]||"",!0),this.l=Xu(f[2]||""),this.a=Xu(f[3]||"",!0),Yu(this,f[4]),this.f=Xu(f[5]||"",!0),qv(this,f[6]||"",!0),this.h=Xu(f[7]||"")):(this.i=!!a,this.b=new Wo(null,this.i))}Ji.prototype.toString=function(){var o=[],a=this.c;a&&o.push(Ju(a,QE,!0),":");var f=this.a;return(f||a=="file")&&(o.push("//"),(a=this.l)&&o.push(Ju(a,QE,!0),"@"),o.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.g,f!=null&&o.push(":",String(f))),(f=this.f)&&(this.a&&f.charAt(0)!="/"&&o.push("/"),o.push(Ju(f,f.charAt(0)=="/"?BL:VL,!0))),(f=this.b.toString())&&o.push("?",f),(f=this.h)&&o.push("#",Ju(f,KL)),o.join("")},Ji.prototype.resolve=function(o){var a=new Ji(this),f=!!o.c;f?Qu(a,o.c):f=!!o.l,f?a.l=o.l:f=!!o.a,f?a.a=o.a:f=o.g!=null;var d=o.f;if(f)Yu(a,o.g);else if(f=!!o.f){if(d.charAt(0)!="/")if(this.a&&!this.f)d="/"+d;else{var v=a.f.lastIndexOf("/");v!=-1&&(d=a.f.substr(0,v+1)+d)}if(v=d,v==".."||v==".")d="";else if(fe(v,"./")||fe(v,"/.")){d=v.lastIndexOf("/",0)==0,v=v.split("/");for(var y=[],w=0;w<v.length;){var T=v[w++];T=="."?d&&w==v.length&&y.push(""):T==".."?((1<y.length||y.length==1&&y[0]!="")&&y.pop(),d&&w==v.length&&y.push("")):(y.push(T),d=!0)}d=y.join("/")}else d=v}return f?a.f=d:f=o.b.toString()!=="",f?qv(a,JE(o.b)):f=!!o.h,f&&(a.h=o.h),a};function Qu(o,a,f){o.c=f?Xu(a,!0):a,o.c&&(o.c=o.c.replace(/:$/,""))}function Yu(o,a){if(a){if(a=Number(a),isNaN(a)||0>a)throw Error("Bad port number "+a);o.g=a}else o.g=null}function qv(o,a,f){a instanceof Wo?(o.b=a,HL(o.b,o.i)):(f||(a=Ju(a,qL)),o.b=new Wo(a,o.i))}function mt(o,a,f){o.b.set(a,f)}function cr(o,a){return o.b.get(a)}function Dn(o){return o instanceof Ji?new Ji(o):new Ji(o,void 0)}function Rf(o,a,f,d){var v=new Ji(null,void 0);return o&&Qu(v,o),a&&(v.a=a),f&&Yu(v,f),d&&(v.f=d),v}function Xu(o,a){return o?a?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Ju(o,a,f){return typeof o=="string"?(o=encodeURI(o).replace(a,jL),f&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function jL(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var QE=/[#\/\?@]/g,VL=/[#\?:]/g,BL=/[#\?]/g,qL=/[#\?@]/g,KL=/#/g;function Wo(o,a){this.b=this.a=null,this.c=o||null,this.f=!!a}function Zi(o){o.a||(o.a=new fa,o.b=0,o.c&&UL(o.c,function(a,f){o.add(decodeURIComponent(a.replace(/\+/g," ")),f)}))}function YE(o){var a=$E(o);if(typeof a>"u")throw Error("Keys are undefined");var f=new Wo(null,void 0);o=GE(o);for(var d=0;d<a.length;d++){var v=a[d],y=o[d];Array.isArray(y)?XE(f,v,y):f.add(v,y)}return f}e=Wo.prototype,e.add=function(o,a){Zi(this),this.c=null,o=ha(this,o);var f=this.a.get(o);return f||this.a.set(o,f=[]),f.push(a),this.b+=1,this};function Qr(o,a){Zi(o),a=ha(o,a),Ho(o.a.b,a)&&(o.c=null,o.b-=o.a.get(a).length,o=o.a,Ho(o.b,a)&&(delete o.b[a],o.c--,o.a.length>2*o.c&&Bv(o)))}e.clear=function(){this.a=this.c=null,this.b=0};function Kv(o,a){return Zi(o),a=ha(o,a),Ho(o.a.b,a)}e.forEach=function(o,a){Zi(this),this.a.forEach(function(f,d){Ye(f,function(v){o.call(a,v,d,this)},this)},this)},e.Y=function(){Zi(this);for(var o=this.a.X(),a=this.a.Y(),f=[],d=0;d<a.length;d++)for(var v=o[d],y=0;y<v.length;y++)f.push(a[d]);return f},e.X=function(o){Zi(this);var a=[];if(typeof o=="string")Kv(this,o)&&(a=$(a,this.a.get(ha(this,o))));else{o=this.a.X();for(var f=0;f<o.length;f++)a=$(a,o[f])}return a},e.set=function(o,a){return Zi(this),this.c=null,o=ha(this,o),Kv(this,o)&&(this.b-=this.a.get(o).length),this.a.set(o,[a]),this.b+=1,this},e.get=function(o,a){return o?(o=this.X(o),0<o.length?String(o[0]):a):a};function XE(o,a,f){Qr(o,a),0<f.length&&(o.c=null,o.a.set(ha(o,a),X(f)),o.b+=f.length)}e.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var o=[],a=this.a.Y(),f=0;f<a.length;f++){var d=a[f],v=encodeURIComponent(String(d));d=this.X(d);for(var y=0;y<d.length;y++){var w=v;d[y]!==""&&(w+="="+encodeURIComponent(String(d[y]))),o.push(w)}}return this.c=o.join("&")};function JE(o){var a=new Wo;return a.c=o.c,o.a&&(a.a=new fa(o.a),a.b=o.b),a}function ha(o,a){return a=String(a),o.f&&(a=a.toLowerCase()),a}function HL(o,a){a&&!o.f&&(Zi(o),o.c=null,o.a.forEach(function(f,d){var v=d.toLowerCase();d!=v&&(Qr(this,d),XE(this,v,f))},o)),o.f=a}function ZE(o){var a=[];return Hv(new WL,o,a),a.join("")}function WL(){}function Hv(o,a,f){if(a==null)f.push("null");else{if(typeof a=="object"){if(Array.isArray(a)){var d=a;a=d.length,f.push("[");for(var v="",y=0;y<a;y++)f.push(v),Hv(o,d[y],f),v=",";f.push("]");return}if(a instanceof String||a instanceof Number||a instanceof Boolean)a=a.valueOf();else{f.push("{"),v="";for(d in a)Object.prototype.hasOwnProperty.call(a,d)&&(y=a[d],typeof y!="function"&&(f.push(v),tT(d,f),f.push(":"),Hv(o,y,f),v=","));f.push("}");return}}switch(typeof a){case"string":tT(a,f);break;case"number":f.push(isFinite(a)&&!isNaN(a)?String(a):"null");break;case"boolean":f.push(String(a));break;case"function":f.push("null");break;default:throw Error("Unknown type: "+typeof a)}}}var eT={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\u000b"},GL=/\uffff/.test("")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function tT(o,a){a.push('"',o.replace(GL,function(f){var d=eT[f];return d||(d="\\u"+(f.charCodeAt(0)|65536).toString(16).substr(1),eT[f]=d),d}),'"')}function Wv(){var o=Gt();return Ar&&!!Xi&&Xi==11||/Edge\/\d+/.test(o)}function Zu(){return l.window&&l.window.location.href||self&&self.location&&self.location.href||""}function nT(o,a){a=a||l.window;var f="about:blank";o&&(f=wf(lE(o)||hE)),a.location.href=f}function rT(o,a){var f=[],d;for(d in o)d in a?typeof o[d]!=typeof a[d]?f.push(d):typeof o[d]=="object"&&o[d]!=null&&a[d]!=null?0<rT(o[d],a[d]).length&&f.push(d):o[d]!==a[d]&&f.push(d):f.push(d);for(d in a)d in o||f.push(d);return f}function $L(){var o=Gt();return o=da(o)!=aT?null:(o=o.match(/\sChrome\/(\d+)/i))&&o.length==2?parseInt(o[1],10):null,o&&30>o?!1:!Ar||!Xi||9<Xi}function iT(o){return o=(o||Gt()).toLowerCase(),!!(o.match(/android/)||o.match(/webos/)||o.match(/iphone|ipad|ipod/)||o.match(/blackberry/)||o.match(/windows phone/)||o.match(/iemobile/))}function Go(o){o=o||l.window;try{o.close()}catch{}}function oT(o,a,f){var d=Math.floor(1e9*Math.random()).toString();a=a||500,f=f||600;var v=(window.screen.availHeight-f)/2,y=(window.screen.availWidth-a)/2;a={width:a,height:f,top:0<v?v:0,left:0<y?y:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},f=Gt().toLowerCase(),d&&(a.target=d,fe(f,"crios/")&&(a.target="_blank")),da(Gt())==zv&&(o=o||"http://localhost",a.scrollbars=!0),f=o||"",(o=a)||(o={}),d=window,a=f instanceof On?f:lE(typeof f.href<"u"?f.href:String(f))||hE,f=o.target||f.target,v=[];for(w in o)switch(w){case"width":case"height":case"top":case"left":v.push(w+"="+o[w]);break;case"target":case"noopener":case"noreferrer":break;default:v.push(w+"="+(o[w]?1:0))}var w=v.join(",");if((lt("iPhone")&&!lt("iPod")&&!lt("iPad")||lt("iPad")||lt("iPod"))&&d.navigator&&d.navigator.standalone&&f&&f!="_self"?(w=Ef(document,"A"),iE(w,"HTMLAnchorElement"),a=a instanceof On?a:fE(a),w.href=wf(a),w.setAttribute("target",f),o.noreferrer&&w.setAttribute("rel","noreferrer"),o=document.createEvent("MouseEvent"),o.initMouseEvent("click",!0,!0,d,1),w.dispatchEvent(o),w={}):o.noreferrer?(w=pE("",d,f,w),o=wf(a),w&&(mL&&fe(o,";")&&(o="'"+o.replace(/'/g,"%27")+"'"),w.opener=null,o='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Ev(o)+'">',o=(d=sE())?d.createHTML(o):o,o=new ua(o,null,dE),d=w.document)&&(d.write(dL(o)),d.close())):(w=pE(a,d,f,w))&&o.noopener&&(w.opener=null),w)try{w.focus()}catch{}return w}function zL(o){return new Oe(function(a){function f(){la(2e3).then(function(){if(!o||o.closed)a();else return f()})}return f()})}var QL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,YL=/^[^@]+@[^@]+$/;function Of(){var o=null;return new Oe(function(a){l.document.readyState=="complete"?a():(o=function(){a()},Mv(window,"load",o))}).o(function(a){throw Gn(window,"load",o),a})}function XL(){return Gv(void 0)?Of().then(function(){return new Oe(function(o,a){var f=l.document,d=setTimeout(function(){a(Error("Cordova framework is not ready."))},1e3);f.addEventListener("deviceready",function(){clearTimeout(d),o()},!1)})}):nt(Error("Cordova must run in an Android or iOS file scheme."))}function Gv(o){return o=o||Gt(),!(va()!=="file:"&&va()!=="ionic:"||!o.toLowerCase().match(/iphone|ipad|ipod|android/))}function $v(){var o=l.window;try{return!(!o||o==o.top)}catch{return!1}}function kr(){return typeof l.WorkerGlobalScope<"u"&&typeof l.importScripts=="function"}function Yr(){return oe.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":oe.INTERNAL.hasOwnProperty("node")?"Node":kr()?"Worker":"Browser"}function sT(){var o=Yr();return o==="ReactNative"||o==="Node"}function JL(){for(var o=50,a=[];0<o;)a.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),o--;return a.join("")}var zv="Firefox",aT="Chrome";function da(o){var a=o.toLowerCase();if(fe(a,"opera/")||fe(a,"opr/")||fe(a,"opios/"))return"Opera";if(fe(a,"iemobile"))return"IEMobile";if(fe(a,"msie")||fe(a,"trident/"))return"IE";if(fe(a,"edge/"))return"Edge";if(fe(a,"firefox/"))return zv;if(fe(a,"silk/"))return"Silk";if(fe(a,"blackberry"))return"Blackberry";if(fe(a,"webos"))return"Webos";if(!fe(a,"safari/")||fe(a,"chrome/")||fe(a,"crios/")||fe(a,"android"))if(!fe(a,"chrome/")&&!fe(a,"crios/")||fe(a,"edge/")){if(fe(a,"android"))return"Android";if((o=o.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&o.length==2)return o[1]}else return aT;else return"Safari";return"Other"}var uT={md:"FirebaseCore-web",od:"FirebaseUI-web"};function pa(o,a){a=a||[];var f=[],d={},v;for(v in uT)d[uT[v]]=!0;for(v=0;v<a.length;v++)typeof d[a[v]]<"u"&&(delete d[a[v]],f.push(a[v]));return f.sort(),a=f,a.length||(a=["FirebaseCore-web"]),f=Yr(),f==="Browser"?(d=Gt(),f=da(d)):f==="Worker"&&(d=Gt(),f=da(d)+"-"+f),f+"/JsCore/"+o+"/"+a.join(",")}function Gt(){return l.navigator&&l.navigator.userAgent||""}function rt(o,a){o=o.split("."),a=a||l;for(var f=0;f<o.length&&typeof a=="object"&&a!=null;f++)a=a[o[f]];return f!=o.length&&(a=void 0),a}function Qv(){try{var o=l.localStorage,a=zo();if(o)return o.setItem(a,"1"),o.removeItem(a),Wv()?!!l.indexedDB:!0}catch{return kr()&&!!l.indexedDB}return!1}function $o(){return(Pf()||va()==="chrome-extension:"||Gv())&&!sT()&&Qv()&&!kr()}function Pf(){return va()==="http:"||va()==="https:"}function va(){return l.location&&l.location.protocol||null}function ec(o){return o=o||Gt(),!(iT(o)||da(o)==zv)}function tc(o){return typeof o>"u"?null:ZE(o)}function cT(o){var a={},f;for(f in o)o.hasOwnProperty(f)&&o[f]!==null&&o[f]!==void 0&&(a[f]=o[f]);return a}function ga(o){if(o!==null)return JSON.parse(o)}function zo(o){return o||Math.floor(1e9*Math.random()).toString()}function lT(o){return o=o||Gt(),!(da(o)=="Safari"||o.toLowerCase().match(/iphone|ipad|ipod/))}function fT(){var o=l.___jsl;if(o&&o.H){for(var a in o.H)if(o.H[a].r=o.H[a].r||[],o.H[a].L=o.H[a].L||[],o.H[a].r=o.H[a].L.concat(),o.CP)for(var f=0;f<o.CP.length;f++)o.CP[f]=null}}function eo(o,a){if(o>a)throw Error("Short delay should be less than long delay!");this.a=o,this.c=a,o=Gt(),a=Yr(),this.b=iT(o)||a==="ReactNative"}eo.prototype.get=function(){var o=l.navigator;return!(o&&typeof o.onLine=="boolean"&&(Pf()||va()==="chrome-extension:"||typeof o.connection<"u"))||o.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};function Yv(){var o=l.document;return o&&typeof o.visibilityState<"u"?o.visibilityState=="visible":!0}function ZL(){var o=l.document,a=null;return Yv()||!o?le():new Oe(function(f){a=function(){Yv()&&(o.removeEventListener("visibilitychange",a,!1),f())},o.addEventListener("visibilitychange",a,!1)}).o(function(f){throw o.removeEventListener("visibilitychange",a,!1),f})}function nc(o){try{var a=new Date(parseInt(o,10));if(!isNaN(a.getTime())&&!/[^0-9]/.test(o))return a.toUTCString()}catch{}return null}function hT(){return!(!rt("fireauth.oauthhelper",l)&&!rt("fireauth.iframe",l))}function eM(){var o=l.navigator;return o&&o.serviceWorker&&o.serviceWorker.controller||null}function tM(){var o=l.navigator;return o&&o.serviceWorker?le().then(function(){return o.serviceWorker.ready}).then(function(a){return a.active||null}).o(function(){return null}):le(null)}var dT={};function Xv(o){dT[o]||(dT[o]=!0,typeof console<"u"&&typeof console.warn=="function"&&console.warn(o))}var Jv;try{var Zv={};Object.defineProperty(Zv,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Zv,"abcd",{configurable:!0,enumerable:!0,value:2}),Jv=Zv.abcd==2}catch{Jv=!1}function re(o,a,f){Jv?Object.defineProperty(o,a,{configurable:!0,enumerable:!0,value:f}):o[a]=f}function yn(o,a){if(a)for(var f in a)a.hasOwnProperty(f)&&re(o,f,a[f])}function Xr(o){var a={};return yn(a,o),a}function nM(o){var a={},f;for(f in o)o.hasOwnProperty(f)&&(a[f]=o[f]);return a}function rM(o,a){if(!a||!a.length)return!0;if(!o)return!1;for(var f=0;f<a.length;f++){var d=o[a[f]];if(d==null||d==="")return!1}return!0}function eg(o){var a=o;if(typeof o=="object"&&o!=null){a="length"in o?[]:{};for(var f in o)re(a,f,eg(o[f]))}return a}function tg(o){var a=o&&(o[og]?"phone":null);if(a&&o&&o[ig]){re(this,"uid",o[ig]),re(this,"displayName",o[pT]||null);var f=null;o[rg]&&(f=new Date(o[rg]).toUTCString()),re(this,"enrollmentTime",f),re(this,"factorId",a)}else throw new k("internal-error","Internal assert: invalid MultiFactorInfo object")}tg.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};function ng(o){try{var a=new rc(o)}catch{a=null}return a}var pT="displayName",rg="enrolledAt",ig="mfaEnrollmentId",og="phoneInfo";function rc(o){tg.call(this,o),re(this,"phoneNumber",o[og])}M(rc,tg),rc.prototype.w=function(){var o=rc.bb.w.call(this);return o.phoneNumber=this.phoneNumber,o};function iM(o){var a={},f=o[oM],d=o[aM],v=o[uM];if(o=ng(o[sM]),!v||v!=Df&&v!=ic&&!f||v==ic&&!d||v==sg&&!o)throw Error("Invalid checkActionCode response!");v==ic?(a[gT]=f||null,a[mT]=f||null,a[vT]=d):(a[gT]=d||null,a[mT]=d||null,a[vT]=f||null),a[cM]=o||null,re(this,fM,v),re(this,lM,eg(a))}var sg="REVERT_SECOND_FACTOR_ADDITION",Df="EMAIL_SIGNIN",ic="VERIFY_AND_CHANGE_EMAIL",oM="email",sM="mfaInfo",aM="newEmail",uM="requestType",vT="email",gT="fromEmail",cM="multiFactorInfo",mT="previousEmail",lM="data",fM="operation";function ag(o){o=Dn(o);var a=cr(o,yT)||null,f=cr(o,_T)||null,d=cr(o,wT)||null;if(d=d&&vM[d]||null,!a||!f||!d)throw new k("argument-error",yT+", "+_T+"and "+wT+" are required in a valid action code URL.");yn(this,{apiKey:a,operation:d,code:f,continueUrl:cr(o,hM)||null,languageCode:cr(o,dM)||null,tenantId:cr(o,pM)||null})}var yT="apiKey",_T="oobCode",hM="continueUrl",dM="languageCode",wT="mode",pM="tenantId",vM={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:sg,signIn:Df,verifyAndChangeEmail:ic,verifyEmail:"VERIFY_EMAIL"};function bT(o){try{return new ag(o)}catch{return null}}function xf(o){var a=o[gM];if(typeof a>"u")throw new k("missing-continue-uri");if(typeof a!="string"||typeof a=="string"&&!a.length)throw new k("invalid-continue-uri");this.h=a,this.b=this.a=null,this.g=!1;var f=o[ET];if(f&&typeof f=="object"){a=f[AT];var d=f[ST];if(f=f[CT],typeof a=="string"&&a.length){if(this.a=a,typeof d<"u"&&typeof d!="boolean")throw new k("argument-error",ST+" property must be a boolean when specified.");if(this.g=!!d,typeof f<"u"&&(typeof f!="string"||typeof f=="string"&&!f.length))throw new k("argument-error",CT+" property must be a non empty string when specified.");this.b=f||null}else{if(typeof a<"u")throw new k("argument-error",AT+" property must be a non empty string when specified.");if(typeof d<"u"||typeof f<"u")throw new k("missing-android-pkg-name")}}else if(typeof f<"u")throw new k("argument-error",ET+" property must be a non null object when specified.");if(this.f=null,(a=o[IT])&&typeof a=="object"){if(a=a[kT],typeof a=="string"&&a.length)this.f=a;else if(typeof a<"u")throw new k("argument-error",kT+" property must be a non empty string when specified.")}else if(typeof a<"u")throw new k("argument-error",IT+" property must be a non null object when specified.");if(a=o[ug],typeof a<"u"&&typeof a!="boolean")throw new k("argument-error",ug+" property must be a boolean when specified.");if(this.c=!!a,o=o[TT],typeof o<"u"&&(typeof o!="string"||typeof o=="string"&&!o.length))throw new k("argument-error",TT+" property must be a non empty string when specified.");this.i=o||null}var ET="android",TT="dynamicLinkDomain",ug="handleCodeInApp",IT="iOS",gM="url",ST="installApp",CT="minimumVersion",AT="packageName",kT="bundleId";function Lf(o){var a={};a.continueUrl=o.h,a.canHandleCodeInApp=o.c,(a.androidPackageName=o.a)&&(a.androidMinimumVersion=o.b,a.androidInstallApp=o.g),a.iOSBundleId=o.f,a.dynamicLinkDomain=o.i;for(var f in a)a[f]===null&&delete a[f];return a}function mM(o){return Qi(o,function(a){return a=a.toString(16),1<a.length?a:"0"+a}).join("")}var oc=null;function yM(o){var a=[];return _M(o,function(f){a.push(f)}),a}function _M(o,a){function f(L){for(;d<o.length;){var j=o.charAt(d++),me=oc[j];if(me!=null)return me;if(!/^[\s\xa0]*$/.test(j))throw Error("Unknown base64 encoding at char: "+j)}return L}wM();for(var d=0;;){var v=f(-1),y=f(0),w=f(64),T=f(64);if(T===64&&v===-1)break;a(v<<2|y>>4),w!=64&&(a(y<<4&240|w>>2),T!=64&&a(w<<6&192|T))}}function wM(){if(!oc){oc={};for(var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),a=["+/=","+/","-_=","-_.","-_"],f=0;5>f;f++)for(var d=o.concat(a[f].split("")),v=0;v<d.length;v++){var y=d[v];oc[y]===void 0&&(oc[y]=v)}}}function Mf(o){var a=NT(o);if(!(a&&a.sub&&a.iss&&a.aud&&a.exp))throw Error("Invalid JWT");this.h=o,this.a=a.exp,this.i=a.sub,o=Date.now()/1e3,this.g=a.iat||(o>this.a?this.a:o),this.b=a.provider_id||a.firebase&&a.firebase.sign_in_provider||null,this.f=a.firebase&&a.firebase.tenant||null,this.c=!!a.is_anonymous||this.b=="anonymous"}Mf.prototype.T=function(){return this.f},Mf.prototype.l=function(){return this.c},Mf.prototype.toString=function(){return this.h};function Ff(o){try{return new Mf(o)}catch{return null}}function NT(o){if(!o||(o=o.split("."),o.length!=3))return null;o=o[1];for(var a=(4-o.length%4)%4,f=0;f<a;f++)o+=".";try{var d=yM(o);for(o=[],f=a=0;a<d.length;){var v=d[a++];if(128>v)o[f++]=String.fromCharCode(v);else if(191<v&&224>v){var y=d[a++];o[f++]=String.fromCharCode((v&31)<<6|y&63)}else if(239<v&&365>v){y=d[a++];var w=d[a++],T=d[a++],L=((v&7)<<18|(y&63)<<12|(w&63)<<6|T&63)-65536;o[f++]=String.fromCharCode(55296+(L>>10)),o[f++]=String.fromCharCode(56320+(L&1023))}else y=d[a++],w=d[a++],o[f++]=String.fromCharCode((v&15)<<12|(y&63)<<6|w&63)}return JSON.parse(o.join(""))}catch{}return null}var RT="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Uf=["client_id","response_type","scope","redirect_uri","state"],cg={nd:{Ja:"locale",va:700,ua:600,fa:"facebook.com",Ya:Uf},pd:{Ja:null,va:500,ua:750,fa:"github.com",Ya:Uf},qd:{Ja:"hl",va:515,ua:680,fa:"google.com",Ya:Uf},wd:{Ja:"lang",va:485,ua:705,fa:"twitter.com",Ya:RT},kd:{Ja:"locale",va:640,ua:600,fa:"apple.com",Ya:[]}};function lg(o){for(var a in cg)if(cg[a].fa==o)return cg[a];return null}function OT(o){var a={};a["facebook.com"]=DT,a["google.com"]=LT,a["github.com"]=xT,a["twitter.com"]=MT;var f=o&&o[PT];try{if(f)return a[f]?new a[f](o):new Jr(o);if(typeof o[fg]<"u")return new hg(o)}catch{}return null}var fg="idToken",PT="providerId";function hg(o){var a=o[PT];if(!a&&o[fg]){var f=Ff(o[fg]);f&&f.b&&(a=f.b)}if(!a)throw Error("Invalid additional user info!");(a=="anonymous"||a=="custom")&&(a=null),f=!1,typeof o.isNewUser<"u"?f=!!o.isNewUser:o.kind==="identitytoolkit#SignupNewUserResponse"&&(f=!0),re(this,"providerId",a),re(this,"isNewUser",f)}function Jr(o){hg.call(this,o),o=ga(o.rawUserInfo||"{}"),re(this,"profile",eg(o||{}))}M(Jr,hg);function DT(o){if(Jr.call(this,o),this.providerId!="facebook.com")throw Error("Invalid provider ID!")}M(DT,Jr);function xT(o){if(Jr.call(this,o),this.providerId!="github.com")throw Error("Invalid provider ID!");re(this,"username",this.profile&&this.profile.login||null)}M(xT,Jr);function LT(o){if(Jr.call(this,o),this.providerId!="google.com")throw Error("Invalid provider ID!")}M(LT,Jr);function MT(o){if(Jr.call(this,o),this.providerId!="twitter.com")throw Error("Invalid provider ID!");re(this,"username",o.screenName||null)}M(MT,Jr);function FT(o){var a=Dn(o),f=cr(a,"link"),d=cr(Dn(f),"link");return a=cr(a,"deep_link_id"),cr(Dn(a),"link")||a||d||f||o}function jf(o,a){if(!o&&!a)throw new k("internal-error","Internal assert: no raw session string available");if(o&&a)throw new k("internal-error","Internal assert: unable to determine the session type");this.a=o||null,this.b=a||null,this.type=this.a?sc:Vf}var sc="enroll",Vf="signin";jf.prototype.Ha=function(){return this.a?le(this.a):le(this.b)},jf.prototype.w=function(){return this.type==sc?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}};function ma(){}ma.prototype.ka=function(){},ma.prototype.b=function(){},ma.prototype.c=function(){},ma.prototype.w=function(){};function ya(o,a){return o.then(function(f){if(f[Or]){var d=Ff(f[Or]);if(!d||a!=d.i)throw new k("user-mismatch");return f}throw new k("user-mismatch")}).o(function(f){throw f&&f.code&&f.code==xt+"user-not-found"?new k("user-mismatch"):f})}function Qo(o,a){if(a)this.a=a;else throw new k("internal-error","failed to construct a credential");re(this,"providerId",o),re(this,"signInMethod",o)}Qo.prototype.ka=function(o){return Mg(o,dg(this))},Qo.prototype.b=function(o,a){var f=dg(this);return f.idToken=a,Fg(o,f)},Qo.prototype.c=function(o,a){return ya(Ug(o,dg(this)),a)};function dg(o){return{pendingToken:o.a,requestUri:"http://localhost"}}Qo.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}};function bM(o){if(o&&o.providerId&&o.signInMethod&&o.providerId.indexOf("saml.")==0&&o.pendingToken)try{return new Qo(o.providerId,o.pendingToken)}catch{}return null}function bi(o,a,f){if(this.a=null,a.idToken||a.accessToken)a.idToken&&re(this,"idToken",a.idToken),a.accessToken&&re(this,"accessToken",a.accessToken),a.nonce&&!a.pendingToken&&re(this,"nonce",a.nonce),a.pendingToken&&(this.a=a.pendingToken);else if(a.oauthToken&&a.oauthTokenSecret)re(this,"accessToken",a.oauthToken),re(this,"secret",a.oauthTokenSecret);else throw new k("internal-error","failed to construct a credential");re(this,"providerId",o),re(this,"signInMethod",f)}bi.prototype.ka=function(o){return Mg(o,pg(this))},bi.prototype.b=function(o,a){var f=pg(this);return f.idToken=a,Fg(o,f)},bi.prototype.c=function(o,a){var f=pg(this);return ya(Ug(o,f),a)};function pg(o){var a={};return o.idToken&&(a.id_token=o.idToken),o.accessToken&&(a.access_token=o.accessToken),o.secret&&(a.oauth_token_secret=o.secret),a.providerId=o.providerId,o.nonce&&!o.a&&(a.nonce=o.nonce),a={postBody:YE(a).toString(),requestUri:"http://localhost"},o.a&&(delete a.postBody,a.pendingToken=o.a),a}bi.prototype.w=function(){var o={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(o.oauthIdToken=this.idToken),this.accessToken&&(o.oauthAccessToken=this.accessToken),this.secret&&(o.oauthTokenSecret=this.secret),this.nonce&&(o.nonce=this.nonce),this.a&&(o.pendingToken=this.a),o};function EM(o){if(o&&o.providerId&&o.signInMethod){var a={idToken:o.oauthIdToken,accessToken:o.oauthTokenSecret?null:o.oauthAccessToken,oauthTokenSecret:o.oauthTokenSecret,oauthToken:o.oauthTokenSecret&&o.oauthAccessToken,nonce:o.nonce,pendingToken:o.pendingToken};try{return new bi(o.providerId,a,o.signInMethod)}catch{}}return null}function Yo(o,a){this.Qc=a||[],yn(this,{providerId:o,isOAuthProvider:!0}),this.Jb={},this.qb=(lg(o)||{}).Ja||null,this.pb=null}Yo.prototype.Ka=function(o){return this.Jb=ft(o),this};function UT(o){if(typeof o!="string"||o.indexOf("saml.")!=0)throw new k("argument-error",'SAML provider IDs must be prefixed with "saml."');Yo.call(this,o,[])}M(UT,Yo);function $n(o){Yo.call(this,o,Uf),this.a=[]}M($n,Yo),$n.prototype.Ca=function(o){return D(this.a,o)||this.a.push(o),this},$n.prototype.Rb=function(){return X(this.a)},$n.prototype.credential=function(o,a){var f;if(I(o)?f={idToken:o.idToken||null,accessToken:o.accessToken||null,nonce:o.rawNonce||null}:f={idToken:o||null,accessToken:a||null},!f.idToken&&!f.accessToken)throw new k("argument-error","credential failed: must provide the ID token and/or the access token.");return new bi(this.providerId,f,this.providerId)};function Xo(){$n.call(this,"facebook.com")}M(Xo,$n),re(Xo,"PROVIDER_ID","facebook.com"),re(Xo,"FACEBOOK_SIGN_IN_METHOD","facebook.com");function jT(o){if(!o)throw new k("argument-error","credential failed: expected 1 argument (the OAuth access token).");var a=o;return I(o)&&(a=o.accessToken),new Xo().credential({accessToken:a})}function Jo(){$n.call(this,"github.com")}M(Jo,$n),re(Jo,"PROVIDER_ID","github.com"),re(Jo,"GITHUB_SIGN_IN_METHOD","github.com");function VT(o){if(!o)throw new k("argument-error","credential failed: expected 1 argument (the OAuth access token).");var a=o;return I(o)&&(a=o.accessToken),new Jo().credential({accessToken:a})}function Zo(){$n.call(this,"google.com"),this.Ca("profile")}M(Zo,$n),re(Zo,"PROVIDER_ID","google.com"),re(Zo,"GOOGLE_SIGN_IN_METHOD","google.com");function BT(o,a){var f=o;return I(o)&&(f=o.idToken,a=o.accessToken),new Zo().credential({idToken:f,accessToken:a})}function _a(){Yo.call(this,"twitter.com",RT)}M(_a,Yo),re(_a,"PROVIDER_ID","twitter.com"),re(_a,"TWITTER_SIGN_IN_METHOD","twitter.com");function qT(o,a){var f=o;if(I(f)||(f={oauthToken:o,oauthTokenSecret:a}),!f.oauthToken||!f.oauthTokenSecret)throw new k("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new bi("twitter.com",f,"twitter.com")}function to(o,a,f){this.a=o,this.f=a,re(this,"providerId","password"),re(this,"signInMethod",f===lr.EMAIL_LINK_SIGN_IN_METHOD?lr.EMAIL_LINK_SIGN_IN_METHOD:lr.EMAIL_PASSWORD_SIGN_IN_METHOD)}to.prototype.ka=function(o){return this.signInMethod==lr.EMAIL_LINK_SIGN_IN_METHOD?Pe(o,sF,{email:this.a,oobCode:this.f}):Pe(o,gI,{email:this.a,password:this.f})},to.prototype.b=function(o,a){return this.signInMethod==lr.EMAIL_LINK_SIGN_IN_METHOD?Pe(o,aF,{idToken:a,email:this.a,oobCode:this.f}):Pe(o,vI,{idToken:a,email:this.a,password:this.f})},to.prototype.c=function(o,a){return ya(this.ka(o),a)},to.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}};function TM(o){return o&&o.email&&o.password?new to(o.email,o.password,o.signInMethod):null}function lr(){yn(this,{providerId:"password",isOAuthProvider:!1})}function KT(o,a){if(a=vg(a),!a)throw new k("argument-error","Invalid email link!");return new to(o,a.code,lr.EMAIL_LINK_SIGN_IN_METHOD)}function vg(o){return o=FT(o),(o=bT(o))&&o.operation===Df?o:null}yn(lr,{PROVIDER_ID:"password"}),yn(lr,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),yn(lr,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"});function no(o){if(!(o.fb&&o.eb||o.La&&o.ea))throw new k("internal-error");this.a=o,re(this,"providerId","phone"),this.fa="phone",re(this,"signInMethod","phone")}no.prototype.ka=function(o){return o.gb(ac(this))},no.prototype.b=function(o,a){var f=ac(this);return f.idToken=a,Pe(o,AF,f)},no.prototype.c=function(o,a){var f=ac(this);return f.operation="REAUTH",o=Pe(o,kF,f),ya(o,a)},no.prototype.w=function(){var o={providerId:"phone"};return this.a.fb&&(o.verificationId=this.a.fb),this.a.eb&&(o.verificationCode=this.a.eb),this.a.La&&(o.temporaryProof=this.a.La),this.a.ea&&(o.phoneNumber=this.a.ea),o};function IM(o){if(o&&o.providerId==="phone"&&(o.verificationId&&o.verificationCode||o.temporaryProof&&o.phoneNumber)){var a={};return Ye(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(f){o[f]&&(a[f]=o[f])}),new no(a)}return null}function ac(o){return o.a.La&&o.a.ea?{temporaryProof:o.a.La,phoneNumber:o.a.ea}:{sessionInfo:o.a.fb,code:o.a.eb}}function Ei(o){try{this.a=o||oe.auth()}catch{throw new k("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}yn(this,{providerId:"phone",isOAuthProvider:!1})}Ei.prototype.gb=function(o,a){var f=this.a.a;return le(a.verify()).then(function(d){if(typeof d!="string")throw new k("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(a.type){case"recaptcha":var v=I(o)?o.session:null,y=I(o)?o.phoneNumber:o,w;return v&&v.type==sc?w=v.Ha().then(function(T){return XM(f,{idToken:T,phoneEnrollmentInfo:{phoneNumber:y,recaptchaToken:d}})}):v&&v.type==Vf?w=v.Ha().then(function(T){return JM(f,{mfaPendingCredential:T,mfaEnrollmentId:o.multiFactorHint&&o.multiFactorHint.uid||o.multiFactorUid,phoneSignInInfo:{recaptchaToken:d}})}):w=YM(f,{phoneNumber:y,recaptchaToken:d}),w.then(function(T){return typeof a.reset=="function"&&a.reset(),T},function(T){throw typeof a.reset=="function"&&a.reset(),T});default:throw new k("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})};function HT(o,a){if(!o)throw new k("missing-verification-id");if(!a)throw new k("missing-verification-code");return new no({fb:o,eb:a})}yn(Ei,{PROVIDER_ID:"phone"}),yn(Ei,{PHONE_SIGN_IN_METHOD:"phone"});function gg(o){if(o.temporaryProof&&o.phoneNumber)return new no({La:o.temporaryProof,ea:o.phoneNumber});var a=o&&o.providerId;if(!a||a==="password")return null;var f=o&&o.oauthAccessToken,d=o&&o.oauthTokenSecret,v=o&&o.nonce,y=o&&o.oauthIdToken,w=o&&o.pendingToken;try{switch(a){case"google.com":return BT(y,f);case"facebook.com":return jT(f);case"github.com":return VT(f);case"twitter.com":return qT(f,d);default:return f||d||y||w?w?a.indexOf("saml.")==0?new Qo(a,w):new bi(a,{pendingToken:w,idToken:o.oauthIdToken,accessToken:o.oauthAccessToken},a):new $n(a).credential({idToken:y,accessToken:f,rawNonce:v}):null}}catch{return null}}function mg(o){if(!o.isOAuthProvider)throw new k("invalid-oauth-provider")}function Nr(o,a,f,d,v,y,w){if(this.c=o,this.b=a||null,this.g=f||null,this.f=d||null,this.i=y||null,this.h=w||null,this.a=v||null,this.g||this.a){if(this.g&&this.a)throw new k("invalid-auth-event");if(this.g&&!this.f)throw new k("invalid-auth-event")}else throw new k("invalid-auth-event")}Nr.prototype.getUid=function(){var o=[];return o.push(this.c),this.b&&o.push(this.b),this.f&&o.push(this.f),this.h&&o.push(this.h),o.join("-")},Nr.prototype.T=function(){return this.h},Nr.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};function WT(o){return o=o||{},o.type?new Nr(o.type,o.eventId,o.urlResponse,o.sessionId,o.error&&Je(o.error),o.postBody,o.tenantId):null}function SM(){this.b=null,this.a=[]}var yg=null;function CM(o){var a=yg;a.a.push(o),a.b||(a.b=function(f){for(var d=0;d<a.a.length;d++)a.a[d](f)},o=rt("universalLinks.subscribe",l),typeof o=="function"&&o(null,a.b))}function _g(o){var a="unauthorized-domain",f=void 0,d=Dn(o);o=d.a,d=d.c,d=="chrome-extension"?f=vE("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",o):d=="http"||d=="https"?f=vE("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",o):a="operation-not-supported-in-this-environment",k.call(this,a,f)}M(_g,k);function uc(o,a,f){k.call(this,o,f),o=a||{},o.Kb&&re(this,"email",o.Kb),o.ea&&re(this,"phoneNumber",o.ea),o.credential&&re(this,"credential",o.credential),o.$b&&re(this,"tenantId",o.$b)}M(uc,k),uc.prototype.w=function(){var o={code:this.code,message:this.message};this.email&&(o.email=this.email),this.phoneNumber&&(o.phoneNumber=this.phoneNumber),this.tenantId&&(o.tenantId=this.tenantId);var a=this.credential&&this.credential.w();return a&&Wt(o,a),o},uc.prototype.toJSON=function(){return this.w()};function Bf(o){if(o.code){var a=o.code||"";a.indexOf(xt)==0&&(a=a.substring(xt.length));var f={credential:gg(o),$b:o.tenantId};if(o.email)f.Kb=o.email;else if(o.phoneNumber)f.ea=o.phoneNumber;else if(!f.credential)return new k(a,o.message||void 0);return new uc(a,f,o.message)}return null}function cc(){}cc.prototype.c=null;function GT(o){return o.c||(o.c=o.b())}var wg;function qf(){}M(qf,cc),qf.prototype.a=function(){var o=$T(this);return o?new ActiveXObject(o):new XMLHttpRequest},qf.prototype.b=function(){var o={};return $T(this)&&(o[0]=!0,o[1]=!0),o};function $T(o){if(!o.f&&typeof XMLHttpRequest>"u"&&typeof ActiveXObject<"u"){for(var a=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],f=0;f<a.length;f++){var d=a[f];try{return new ActiveXObject(d),o.f=d}catch{}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return o.f}wg=new qf;function Kf(){}M(Kf,cc),Kf.prototype.a=function(){var o=new XMLHttpRequest;if("withCredentials"in o)return o;if(typeof XDomainRequest<"u")return new zT;throw Error("Unsupported browser")},Kf.prototype.b=function(){return{}};function zT(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=V(this.qc,this),this.a.onerror=V(this.Tb,this),this.a.onprogress=V(this.rc,this),this.a.ontimeout=V(this.vc,this)}e=zT.prototype,e.open=function(o,a,f){if(f!=null&&!f)throw Error("Only async requests are supported.");this.a.open(o,a)},e.send=function(o){if(o)if(typeof o=="string")this.a.send(o);else throw Error("Only string data is supported");else this.a.send()},e.abort=function(){this.a.abort()},e.setRequestHeader=function(){},e.getResponseHeader=function(o){return o.toLowerCase()=="content-type"?this.a.contentType:""},e.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,bg(this,4)},e.Tb=function(){this.status=500,this.response=this.responseText="",bg(this,4)},e.vc=function(){this.Tb()},e.rc=function(){this.status=200,bg(this,1)};function bg(o,a){o.readyState=a,o.onreadystatechange&&o.onreadystatechange()}e.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType};function Eg(o,a,f){this.reset(o,a,f,void 0,void 0)}Eg.prototype.a=null,Eg.prototype.reset=function(o,a,f,d,v){delete this.a};function Tg(o){this.f=o,this.b=this.c=this.a=null}function lc(o,a){this.name=o,this.value=a}lc.prototype.toString=function(){return this.name};var QT=new lc("SEVERE",1e3),Ig=new lc("WARNING",900),AM=new lc("CONFIG",700),kM=new lc("FINE",500);function YT(o){return o.c?o.c:o.a?YT(o.a):(Sr("Root logger has no level set."),null)}Tg.prototype.log=function(o,a,f){if(o.value>=YT(this).value)for(E(a)&&(a=a()),o=new Eg(o,String(a),this.f),f&&(o.a=f),f=this;f;)f=f.a};var Sg={},Hf=null;function Cg(o){Hf||(Hf=new Tg(""),Sg[""]=Hf,Hf.c=AM);var a;if(!(a=Sg[o])){a=new Tg(o);var f=o.lastIndexOf("."),d=o.substr(f+1);f=Cg(o.substr(0,f)),f.b||(f.b={}),f.b[d]=a,a.a=f,Sg[o]=a}return a}function fr(o,a){o&&o.log(kM,a,void 0)}function Wf(o){this.f=o}M(Wf,cc),Wf.prototype.a=function(){return new Gf(this.f)},Wf.prototype.b=function(o){return function(){return o}}({});function Gf(o){mn.call(this),this.u=o,this.h=void 0,this.readyState=Ag,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=Cg("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}M(Gf,mn);var Ag=0;e=Gf.prototype,e.open=function(o,a){if(this.readyState!=Ag)throw this.abort(),Error("Error reopening a connection");this.s=o,this.f=a,this.readyState=1,hc(this)},e.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.a=!0;var a={headers:this.l,method:this.s,credentials:this.h,cache:void 0};o&&(a.body=o),this.u.fetch(new Request(this.f,a)).then(this.uc.bind(this),this.Va.bind(this))},e.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&this.readyState!=4&&(this.a=!1,fc(this)),this.readyState=Ag},e.uc=function(o){this.a&&(this.g=o,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=o.headers,this.readyState=2,hc(this)),this.a&&(this.readyState=3,hc(this),this.a&&(this.responseType==="arraybuffer"?o.arrayBuffer().then(this.sc.bind(this),this.Va.bind(this)):typeof l.ReadableStream<"u"&&"body"in o?(this.response=this.responseText="",this.c=o.body.getReader(),this.m=new TextDecoder,XT(this)):o.text().then(this.tc.bind(this),this.Va.bind(this)))))};function XT(o){o.c.read().then(o.pc.bind(o)).catch(o.Va.bind(o))}e.pc=function(o){if(this.a){var a=this.m.decode(o.value?o.value:new Uint8Array(0),{stream:!o.done});a&&(this.response=this.responseText+=a),o.done?fc(this):hc(this),this.readyState==3&&XT(this)}},e.tc=function(o){this.a&&(this.response=this.responseText=o,fc(this))},e.sc=function(o){this.a&&(this.response=o,fc(this))},e.Va=function(o){var a=this.i;a&&a.log(Ig,"Failed to fetch url "+this.f,o instanceof Error?o:Error(o)),this.a&&fc(this)};function fc(o){o.readyState=4,o.g=null,o.c=null,o.m=null,hc(o)}e.setRequestHeader=function(o,a){this.l.append(o,a)},e.getResponseHeader=function(o){return this.b?this.b.get(o.toLowerCase())||"":((o=this.i)&&o.log(Ig,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},e.getAllResponseHeaders=function(){if(!this.b){var o=this.i;return o&&o.log(Ig,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}o=[];for(var a=this.b.entries(),f=a.next();!f.done;)f=f.value,o.push(f[0]+": "+f[1]),f=a.next();return o.join(`\r
`)};function hc(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Gf.prototype,"withCredentials",{get:function(){return this.h==="include"},set:function(o){this.h=o?"include":"same-origin"}});function dc(o){mn.call(this),this.headers=new fa,this.D=o||null,this.c=!1,this.C=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.J=!1,this.g=0,this.s=null,this.m=JT,this.u=this.S=!1}M(dc,mn);var JT="";dc.prototype.b=Cg("goog.net.XhrIo");var NM=/^https?$/i,RM=["POST","PUT"];function OM(o,a,f,d,v){if(o.a)throw Error("[goog.net.XhrIo] Object is active with another request="+o.l+"; newUri="+a);f=f?f.toUpperCase():"GET",o.l=a,o.h="",o.P=f,o.J=!1,o.c=!0,o.a=o.D?o.D.a():wg.a(),o.C=o.D?GT(o.D):GT(wg),o.a.onreadystatechange=V(o.Wb,o);try{fr(o.b,Ti(o,"Opening Xhr")),o.N=!0,o.a.open(f,String(a),!0),o.N=!1}catch(w){fr(o.b,Ti(o,"Error opening Xhr: "+w.message)),ZT(o,w);return}a=d||"";var y=new fa(o.headers);v&&FL(v,function(w,T){y.set(T,w)}),v=R(y.Y()),d=l.FormData&&a instanceof l.FormData,!D(RM,f)||v||d||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),y.forEach(function(w,T){this.a.setRequestHeader(T,w)},o),o.m&&(o.a.responseType=o.m),"withCredentials"in o.a&&o.a.withCredentials!==o.S&&(o.a.withCredentials=o.S);try{nI(o),0<o.g&&(o.u=PM(o.a),fr(o.b,Ti(o,"Will abort after "+o.g+"ms if incomplete, xhr2 "+o.u)),o.u?(o.a.timeout=o.g,o.a.ontimeout=V(o.Ma,o)):o.s=Vv(o.Ma,o.g,o)),fr(o.b,Ti(o,"Sending request")),o.i=!0,o.a.send(a),o.i=!1}catch(w){fr(o.b,Ti(o,"Send error: "+w.message)),ZT(o,w)}}function PM(o){return Ar&&_E(9)&&typeof o.timeout=="number"&&o.ontimeout!==void 0}function DM(o){return o.toLowerCase()=="content-type"}e=dc.prototype,e.Ma=function(){typeof c<"u"&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",fr(this.b,Ti(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))};function ZT(o,a){o.c=!1,o.a&&(o.f=!0,o.a.abort(),o.f=!1),o.h=a,eI(o),$f(o)}function eI(o){o.J||(o.J=!0,o.dispatchEvent("complete"),o.dispatchEvent("error"))}e.abort=function(){this.a&&this.c&&(fr(this.b,Ti(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),$f(this))},e.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),$f(this,!0)),dc.bb.Da.call(this)},e.Wb=function(){this.ya||(this.N||this.i||this.f?tI(this):this.Jc())},e.Jc=function(){tI(this)};function tI(o){if(o.c&&typeof c<"u"){if(o.C[1]&&pc(o)==4&&zf(o)==2)fr(o.b,Ti(o,"Local request error detected and ignored"));else if(o.i&&pc(o)==4)Vv(o.Wb,0,o);else if(o.dispatchEvent("readystatechange"),pc(o)==4){fr(o.b,Ti(o,"Request complete")),o.c=!1;try{var a=zf(o);e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var d;if(!(d=f)){var v;if(v=a===0){var y=String(o.l).match(zE)[1]||null;if(!y&&l.self&&l.self.location){var w=l.self.location.protocol;y=w.substr(0,w.length-1)}v=!NM.test(y?y.toLowerCase():"")}d=v}if(d)o.dispatchEvent("complete"),o.dispatchEvent("success");else{try{var T=2<pc(o)?o.a.statusText:""}catch(L){fr(o.b,"Can not get status: "+L.message),T=""}o.h=T+" ["+zf(o)+"]",eI(o)}}finally{$f(o)}}}}function $f(o,a){if(o.a){nI(o);var f=o.a,d=o.C[0]?m:null;o.a=null,o.C=null,a||o.dispatchEvent("ready");try{f.onreadystatechange=d}catch(v){(o=o.b)&&o.log(QT,"Problem encountered resetting onreadystatechange: "+v.message,void 0)}}}function nI(o){o.a&&o.u&&(o.a.ontimeout=null),o.s&&(l.clearTimeout(o.s),o.s=null)}function pc(o){return o.a?o.a.readyState:0}function zf(o){try{return 2<pc(o)?o.a.status:-1}catch{return-1}}function xM(o){try{return o.a?o.a.responseText:""}catch(a){return fr(o.b,"Can not get responseText: "+a.message),""}}e.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case JT:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var o=this.b;return o&&o.log(QT,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(a){return fr(this.b,"Can not get response: "+a.message),null}};function Ti(o,a){return a+" ["+o.P+" "+o.l+" "+zf(o)+"]"}function es(o){var a=FM;this.g=[],this.u=a,this.s=o||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}es.prototype.cancel=function(o){if(this.a)this.c instanceof es&&this.c.cancel();else{if(this.b){var a=this.b;delete this.b,o?a.cancel(o):(a.l--,0>=a.l&&a.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(o=new gc,Qf(this),vc(this,!1,o))}},es.prototype.m=function(o,a){this.i=!1,vc(this,o,a)};function vc(o,a,f){o.a=!0,o.c=f,o.f=!a,iI(o)}function Qf(o){if(o.a){if(!o.v)throw new Yf;o.v=!1}}function LM(o,a){kg(o,null,a,void 0)}function kg(o,a,f,d){o.g.push([a,f,d]),o.a&&iI(o)}es.prototype.then=function(o,a,f){var d,v,y=new Oe(function(w,T){d=w,v=T});return kg(this,d,function(w){w instanceof gc?y.cancel():v(w)}),y.then(o,a,f)},es.prototype.$goog_Thenable=!0;function rI(o){return A(o.g,function(a){return E(a[1])})}function iI(o){if(o.h&&o.a&&rI(o)){var a=o.h,f=Xf[a];f&&(l.clearTimeout(f.a),delete Xf[a]),o.h=0}o.b&&(o.b.l--,delete o.b),a=o.c;for(var d=f=!1;o.g.length&&!o.i;){var v=o.g.shift(),y=v[0],w=v[1];if(v=v[2],y=o.f?w:y)try{var T=y.call(v||o.s,a);T!==void 0&&(o.f=o.f&&(T==a||T instanceof Error),o.c=a=T),(Ze(a)||typeof l.Promise=="function"&&a instanceof l.Promise)&&(d=!0,o.i=!0)}catch(L){a=L,o.f=!0,rI(o)||(f=!0)}}o.c=a,d&&(T=V(o.m,o,!0),d=V(o.m,o,!1),a instanceof es?(kg(a,T,d),a.C=!0):a.then(T,d)),f&&(a=new oI(a),Xf[a.a]=a,o.h=a.a)}function Yf(){Te.call(this)}M(Yf,Te),Yf.prototype.message="Deferred has already fired",Yf.prototype.name="AlreadyCalledError";function gc(){Te.call(this)}M(gc,Te),gc.prototype.message="Deferred was canceled",gc.prototype.name="CanceledError";function oI(o){this.a=l.setTimeout(V(this.c,this),0),this.b=o}oI.prototype.c=function(){throw delete Xf[this.a],this.b};var Xf={};function Ng(o){var a={},f=a.document||document,d=aE(o).toString(),v=Ef(document,"SCRIPT"),y={Xb:v,Ma:void 0},w=new es(y),T=null,L=a.timeout!=null?a.timeout:5e3;return 0<L&&(T=window.setTimeout(function(){Jf(v,!0);var j=new Rg(jM,"Timeout reached for loading script "+d);Qf(w),vc(w,!1,j)},L),y.Ma=T),v.onload=v.onreadystatechange=function(){v.readyState&&v.readyState!="loaded"&&v.readyState!="complete"||(Jf(v,a.xd||!1,T),Qf(w),vc(w,!0,null))},v.onerror=function(){Jf(v,!0,T);var j=new Rg(UM,"Error while loading script "+d);Qf(w),vc(w,!1,j)},y=a.attributes||{},Wt(y,{type:"text/javascript",charset:"UTF-8"}),bE(v,y),pL(v,o),MM(f).appendChild(v),w}function MM(o){var a;return(a=(o||document).getElementsByTagName("HEAD"))&&a.length!=0?a[0]:o.documentElement}function FM(){if(this&&this.Xb){var o=this.Xb;o&&o.tagName=="SCRIPT"&&Jf(o,!0,this.Ma)}}function Jf(o,a,f){f!=null&&l.clearTimeout(f),o.onload=m,o.onerror=m,o.onreadystatechange=m,a&&window.setTimeout(function(){o&&o.parentNode&&o.parentNode.removeChild(o)},0)}var UM=0,jM=1;function Rg(o,a){var f="Jsloader error (code #"+o+")";a&&(f+=": "+a),Te.call(this,f),this.code=o}M(Rg,Te);function Zf(o){this.f=o}M(Zf,cc),Zf.prototype.a=function(){return new this.f},Zf.prototype.b=function(){return{}};function Rr(o,a,f){if(this.c=o,o=a||{},this.l=o.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=o.secureTokenTimeout||VM,this.g=ft(o.secureTokenHeaders||BM),this.h=o.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=o.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=o.firebaseTimeout||qM,this.a=ft(o.firebaseHeaders||KM),f&&(this.a["X-Client-Version"]=f,this.g["X-Client-Version"]=f),f=Yr()=="Node",f=l.XMLHttpRequest||f&&oe.INTERNAL.node&&oe.INTERNAL.node.XMLHttpRequest,!f&&!kr())throw new k("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,kr()?this.f=new Wf(self):sT()?this.f=new Zf(f):this.f=new Kf,this.b=null}var Og,Or="idToken",VM=new eo(3e4,6e4),BM={"Content-Type":"application/x-www-form-urlencoded"},qM=new eo(3e4,6e4),KM={"Content-Type":"application/json"};function sI(o,a){a?o.a["X-Firebase-Locale"]=a:delete o.a["X-Firebase-Locale"]}function eh(o,a){a&&(o.l=Pg("https://securetoken.googleapis.com/v1/token",a),o.h=Pg("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",a),o.i=Pg("https://identitytoolkit.googleapis.com/v2/",a))}function Pg(o,a){return o=Dn(o),a=Dn(a.url),o.f=o.a+o.f,Qu(o,a.c),o.a=a.a,Yu(o,a.g),o.toString()}function aI(o,a){a?(o.a["X-Client-Version"]=a,o.g["X-Client-Version"]=a):(delete o.a["X-Client-Version"],delete o.g["X-Client-Version"])}Rr.prototype.T=function(){return this.b};function uI(o,a,f,d,v,y,w){$L()||kr()?o=V(o.u,o):(Og||(Og=new Oe(function(T,L){WM(T,L)})),o=V(o.s,o)),o(a,f,d,v,y,w)}Rr.prototype.u=function(o,a,f,d,v,y){if(kr()&&(typeof l.fetch>"u"||typeof l.Headers>"u"||typeof l.Request>"u"))throw new k("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var w=new dc(this.f);if(y){w.g=Math.max(0,y);var T=setTimeout(function(){w.dispatchEvent("timeout")},y)}WE(w,"complete",function(){T&&clearTimeout(T);var L=null;try{L=JSON.parse(xM(this))||null}catch{L=null}a&&a(L)}),jv(w,"ready",function(){T&&clearTimeout(T),UE(this)}),jv(w,"timeout",function(){T&&clearTimeout(T),UE(this),a&&a(null)}),OM(w,o,f,d,v)};var HM=new zr(yf,"https://apis.google.com/js/client.js?onload=%{onload}"),cI="__fcb"+Math.floor(1e6*Math.random()).toString();function WM(o,a){if(((window.gapi||{}).client||{}).request)o();else{l[cI]=function(){((window.gapi||{}).client||{}).request?o():a(Error("CORS_UNSUPPORTED"))};var f=bv(HM,{onload:cI});LM(Ng(f),function(){a(Error("CORS_UNSUPPORTED"))})}}Rr.prototype.s=function(o,a,f,d,v){var y=this;Og.then(function(){window.gapi.client.setApiKey(y.c);var w=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:o,method:f,body:d,headers:v,authType:"none",callback:function(T){window.gapi.auth.setToken(w),a&&a(T)}})}).o(function(w){a&&a({error:{message:w&&w.message||"CORS_UNSUPPORTED"}})})};function GM(o,a){return new Oe(function(f,d){a.grant_type=="refresh_token"&&a.refresh_token||a.grant_type=="authorization_code"&&a.code?uI(o,o.l+"?key="+encodeURIComponent(o.c),function(v){v?v.error?d(Vg(v)):v.access_token&&v.refresh_token?f(v):d(new k("internal-error")):d(new k("network-request-failed"))},"POST",YE(a).toString(),o.g,o.m.get()):d(new k("internal-error"))})}function lI(o,a,f,d,v,y,w){var T=Dn(a+f);mt(T,"key",o.c),w&&mt(T,"cb",Date.now().toString());var L=d=="GET";if(L)for(var j in v)v.hasOwnProperty(j)&&mt(T,j,v[j]);return new Oe(function(me,He){uI(o,T.toString(),function(je){je?je.error?He(Vg(je,y||{})):me(je):He(new k("network-request-failed"))},d,L?void 0:ZE(cT(v)),o.a,o.v.get())})}function ts(o){if(o=o.email,typeof o!="string"||!YL.test(o))throw new k("invalid-email")}function fI(o){"email"in o&&ts(o)}function $M(o,a){return Pe(o,rF,{identifier:a,continueUri:Pf()?Zu():"http://localhost"}).then(function(f){return f.signinMethods||[]})}function zM(o){return Pe(o,vF,{}).then(function(a){return a.authorizedDomains||[]})}function xn(o){if(!o[Or])throw o.mfaPendingCredential?new k("multi-factor-auth-required",null,ft(o)):new k("internal-error")}function Dg(o){if(o.phoneNumber||o.temporaryProof){if(!o.phoneNumber||!o.temporaryProof)throw new k("internal-error")}else{if(!o.sessionInfo)throw new k("missing-verification-id");if(!o.code)throw new k("missing-verification-code")}}Rr.prototype.Ab=function(){return Pe(this,_F,{})},Rr.prototype.Cb=function(o,a){return Pe(this,pI,{idToken:o,email:a})},Rr.prototype.Db=function(o,a){return Pe(this,vI,{idToken:o,password:a})};var QM={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};e=Rr.prototype,e.Eb=function(o,a){var f={idToken:o},d=[];return Yi(QM,function(v,y){var w=a[y];w===null?d.push(v):y in a&&(f[y]=w)}),d.length&&(f.deleteAttribute=d),Pe(this,pI,f)},e.wb=function(o,a){return o={requestType:"PASSWORD_RESET",email:o},Wt(o,a),Pe(this,pF,o)},e.xb=function(o,a){return o={requestType:"EMAIL_SIGNIN",email:o},Wt(o,a),Pe(this,fF,o)},e.vb=function(o,a){return o={requestType:"VERIFY_EMAIL",idToken:o},Wt(o,a),Pe(this,hF,o)},e.Fb=function(o,a,f){return o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:o,newEmail:a},Wt(o,f),Pe(this,dF,o)};function YM(o,a){return Pe(o,yF,a)}e.gb=function(o){return Pe(this,CF,o)};function XM(o,a){return Pe(o,wF,a).then(function(f){return f.phoneSessionInfo.sessionInfo})}function hI(o){if(!o.phoneVerificationInfo)throw new k("internal-error");if(!o.phoneVerificationInfo.sessionInfo)throw new k("missing-verification-id");if(!o.phoneVerificationInfo.code)throw new k("missing-verification-code")}function JM(o,a){return Pe(o,bF,a).then(function(f){return f.phoneResponseInfo.sessionInfo})}function ZM(o,a,f){return Pe(o,oF,{idToken:a,deleteProvider:f})}function xg(o){if(!o.requestUri||!o.sessionId&&!o.postBody&&!o.pendingToken)throw new k("internal-error")}function Lg(o,a){return a.oauthIdToken&&a.providerId&&a.providerId.indexOf("oidc.")==0&&!a.pendingToken&&(o.sessionId?a.nonce=o.sessionId:o.postBody&&(o=new Wo(o.postBody),Kv(o,"nonce")&&(a.nonce=o.get("nonce")))),a}function dI(o){var a=null;if(o.needConfirmation?(o.code="account-exists-with-different-credential",a=Bf(o)):o.errorMessage=="FEDERATED_USER_ID_ALREADY_LINKED"?(o.code="credential-already-in-use",a=Bf(o)):o.errorMessage=="EMAIL_EXISTS"?(o.code="email-already-in-use",a=Bf(o)):o.errorMessage&&(a=mI(o.errorMessage)),a)throw a;xn(o)}function Mg(o,a){return a.returnIdpCredential=!0,Pe(o,EF,a)}function Fg(o,a){return a.returnIdpCredential=!0,Pe(o,IF,a)}function Ug(o,a){return a.returnIdpCredential=!0,a.autoCreate=!1,Pe(o,TF,a)}function jg(o){if(!o.oobCode)throw new k("invalid-action-code")}e.ob=function(o,a){return Pe(this,mF,{oobCode:o,newPassword:a})},e.Sa=function(o){return Pe(this,tF,{oobCode:o})},e.kb=function(o){return Pe(this,eF,{oobCode:o})};var eF={endpoint:"setAccountInfo",A:jg,Z:"email",B:!0},tF={endpoint:"resetPassword",A:jg,G:function(o){var a=o.requestType;if(!a||!o.email&&a!="EMAIL_SIGNIN"&&a!="VERIFY_AND_CHANGE_EMAIL")throw new k("internal-error")},B:!0},nF={endpoint:"signupNewUser",A:function(o){if(ts(o),!o.password)throw new k("weak-password")},G:xn,V:!0,B:!0},rF={endpoint:"createAuthUri",B:!0},iF={endpoint:"deleteAccount",O:["idToken"]},oF={endpoint:"setAccountInfo",O:["idToken","deleteProvider"],A:function(o){if(!Array.isArray(o.deleteProvider))throw new k("internal-error")}},sF={endpoint:"emailLinkSignin",O:["email","oobCode"],A:ts,G:xn,V:!0,B:!0},aF={endpoint:"emailLinkSignin",O:["idToken","email","oobCode"],A:ts,G:xn,V:!0},uF={endpoint:"accounts/mfaEnrollment:finalize",O:["idToken","phoneVerificationInfo"],A:hI,G:xn,B:!0,Na:!0},cF={endpoint:"accounts/mfaSignIn:finalize",O:["mfaPendingCredential","phoneVerificationInfo"],A:hI,G:xn,B:!0,Na:!0},lF={endpoint:"getAccountInfo"},fF={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(o){if(o.requestType!="EMAIL_SIGNIN")throw new k("internal-error");ts(o)},Z:"email",B:!0},hF={endpoint:"getOobConfirmationCode",O:["idToken","requestType"],A:function(o){if(o.requestType!="VERIFY_EMAIL")throw new k("internal-error")},Z:"email",B:!0},dF={endpoint:"getOobConfirmationCode",O:["idToken","newEmail","requestType"],A:function(o){if(o.requestType!="VERIFY_AND_CHANGE_EMAIL")throw new k("internal-error")},Z:"email",B:!0},pF={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(o){if(o.requestType!="PASSWORD_RESET")throw new k("internal-error");ts(o)},Z:"email",B:!0},vF={mb:!0,endpoint:"getProjectConfig",Vb:"GET"},gF={mb:!0,endpoint:"getRecaptchaParam",Vb:"GET",G:function(o){if(!o.recaptchaSiteKey)throw new k("internal-error")}},mF={endpoint:"resetPassword",A:jg,Z:"email",B:!0},yF={endpoint:"sendVerificationCode",O:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},pI={endpoint:"setAccountInfo",O:["idToken"],A:fI,V:!0},vI={endpoint:"setAccountInfo",O:["idToken"],A:function(o){if(fI(o),!o.password)throw new k("weak-password")},G:xn,V:!0},_F={endpoint:"signupNewUser",G:xn,V:!0,B:!0},wF={endpoint:"accounts/mfaEnrollment:start",O:["idToken","phoneEnrollmentInfo"],A:function(o){if(!o.phoneEnrollmentInfo)throw new k("internal-error");if(!o.phoneEnrollmentInfo.phoneNumber)throw new k("missing-phone-number");if(!o.phoneEnrollmentInfo.recaptchaToken)throw new k("missing-app-credential")},G:function(o){if(!o.phoneSessionInfo||!o.phoneSessionInfo.sessionInfo)throw new k("internal-error")},B:!0,Na:!0},bF={endpoint:"accounts/mfaSignIn:start",O:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(o){if(!o.phoneSignInInfo||!o.phoneSignInInfo.recaptchaToken)throw new k("missing-app-credential")},G:function(o){if(!o.phoneResponseInfo||!o.phoneResponseInfo.sessionInfo)throw new k("internal-error")},B:!0,Na:!0},EF={endpoint:"verifyAssertion",A:xg,Za:Lg,G:dI,V:!0,B:!0},TF={endpoint:"verifyAssertion",A:xg,Za:Lg,G:function(o){if(o.errorMessage&&o.errorMessage=="USER_NOT_FOUND")throw new k("user-not-found");if(o.errorMessage)throw mI(o.errorMessage);xn(o)},V:!0,B:!0},IF={endpoint:"verifyAssertion",A:function(o){if(xg(o),!o.idToken)throw new k("internal-error")},Za:Lg,G:dI,V:!0},SF={endpoint:"verifyCustomToken",A:function(o){if(!o.token)throw new k("invalid-custom-token")},G:xn,V:!0,B:!0},gI={endpoint:"verifyPassword",A:function(o){if(ts(o),!o.password)throw new k("wrong-password")},G:xn,V:!0,B:!0},CF={endpoint:"verifyPhoneNumber",A:Dg,G:xn,B:!0},AF={endpoint:"verifyPhoneNumber",A:function(o){if(!o.idToken)throw new k("internal-error");Dg(o)},G:function(o){if(o.temporaryProof)throw o.code="credential-already-in-use",Bf(o);xn(o)}},kF={Ib:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:Dg,G:xn,B:!0},NF={endpoint:"accounts/mfaEnrollment:withdraw",O:["idToken","mfaEnrollmentId"],G:function(o){if(!!o[Or]^!!o.refreshToken)throw new k("internal-error")},B:!0,Na:!0};function Pe(o,a,f){if(!rM(f,a.O))return nt(new k("internal-error"));var d=!!a.Na,v=a.Vb||"POST",y;return le(f).then(a.A).then(function(){return a.V&&(f.returnSecureToken=!0),a.B&&o.b&&typeof f.tenantId>"u"&&(f.tenantId=o.b),d?lI(o,o.i,a.endpoint,v,f,a.Ib,a.mb||!1):lI(o,o.h,a.endpoint,v,f,a.Ib,a.mb||!1)}).then(function(w){return y=w,a.Za?a.Za(f,y):y}).then(a.G).then(function(){if(!a.Z)return y;if(!(a.Z in y))throw new k("internal-error");return y[a.Z]})}function mI(o){return Vg({error:{errors:[{message:o}],code:400,message:o}})}function Vg(o,a){var f=(o.error&&o.error.errors&&o.error.errors[0]||{}).reason||"",d={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(f=d[f]?new k(d[f]):null)return f;f=o.error&&o.error.message||"",d={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},Wt(d,a||{}),a=(a=f.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<a.length?a[1]:void 0;for(var v in d)if(f.indexOf(v)===0)return new k(d[v],a);return!a&&o&&(a=tc(o)),new k("internal-error",a)}function RF(o){this.b=o,this.a=null,this.sb=OF(this)}function OF(o){return FF().then(function(){return new Oe(function(a,f){rt("gapi.iframes.getContext")().open({where:document.body,url:o.b,messageHandlersFilter:rt("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(d){function v(){clearTimeout(y),a()}o.a=d,o.a.restyle({setHideOnLeave:!1});var y=setTimeout(function(){f(Error("Network Error"))},MF.get());d.ping(v).then(v,function(){f(Error("Network Error"))})})})})}function PF(o,a){return o.sb.then(function(){return new Oe(function(f){o.a.send(a.type,a,f,rt("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}function DF(o,a){o.sb.then(function(){o.a.register("authEvent",a,rt("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}var xF=new zr(yf,"https://apis.google.com/js/api.js?onload=%{onload}"),LF=new eo(3e4,6e4),MF=new eo(5e3,15e3),th=null;function FF(){return th||(th=new Oe(function(o,a){function f(){fT(),rt("gapi.load")("gapi.iframes",{callback:o,ontimeout:function(){fT(),a(Error("Network Error"))},timeout:LF.get()})}if(rt("gapi.iframes.Iframe"))o();else if(rt("gapi.load"))f();else{var d="__iframefcb"+Math.floor(1e6*Math.random()).toString();l[d]=function(){rt("gapi.load")?f():a(Error("Network Error"))},d=bv(xF,{onload:d}),le(Ng(d)).o(function(){a(Error("Network Error"))})}}).o(function(o){throw th=null,o}))}function yI(o,a,f,d){this.l=o,this.h=a,this.i=f,this.g=d,this.f=null,this.g?(o=Dn(this.g.url),o=Rf(o.c,o.a,o.g,"/emulator/auth/iframe")):o=Rf("https",this.l,null,"/__/auth/iframe"),this.a=o,mt(this.a,"apiKey",this.h),mt(this.a,"appName",this.i),this.b=null,this.c=[]}yI.prototype.toString=function(){return this.f?mt(this.a,"v",this.f):Qr(this.a.b,"v"),this.b?mt(this.a,"eid",this.b):Qr(this.a.b,"eid"),this.c.length?mt(this.a,"fw",this.c.join(",")):Qr(this.a.b,"fw"),this.a.toString()};function Bg(o,a,f,d,v,y){this.u=o,this.s=a,this.c=f,this.m=d,this.v=y,this.i=this.g=this.l=null,this.a=v,this.h=this.f=null}Bg.prototype.zb=function(o){return this.h=o,this},Bg.prototype.toString=function(){if(this.v){var o=Dn(this.v.url);o=Rf(o.c,o.a,o.g,"/emulator/auth/handler")}else o=Rf("https",this.u,null,"/__/auth/handler");if(mt(o,"apiKey",this.s),mt(o,"appName",this.c),mt(o,"authType",this.m),this.a.isOAuthProvider){var a=this.a;try{var f=oe.app(this.c).auth().la()}catch{f=null}a.pb=f,mt(o,"providerId",this.a.providerId),f=this.a,a=cT(f.Jb);for(var d in a)a[d]=a[d].toString();d=f.Qc,a=ft(a);for(var v=0;v<d.length;v++){var y=d[v];y in a&&delete a[y]}f.qb&&f.pb&&!a[f.qb]&&(a[f.qb]=f.pb),$r(a)||mt(o,"customParameters",tc(a))}if(typeof this.a.Rb=="function"&&(f=this.a.Rb(),f.length&&mt(o,"scopes",f.join(","))),this.l?mt(o,"redirectUrl",this.l):Qr(o.b,"redirectUrl"),this.g?mt(o,"eventId",this.g):Qr(o.b,"eventId"),this.i?mt(o,"v",this.i):Qr(o.b,"v"),this.b)for(var w in this.b)this.b.hasOwnProperty(w)&&!cr(o,w)&&mt(o,w,this.b[w]);return this.h?mt(o,"tid",this.h):Qr(o.b,"tid"),this.f?mt(o,"eid",this.f):Qr(o.b,"eid"),w=qg(this.c),w.length&&mt(o,"fw",w.join(",")),o.toString()};function qg(o){try{return oe.app(o).auth().Ga()}catch{return[]}}function _I(o,a,f,d,v,y){this.s=o,this.g=a,this.b=f,this.f=y,this.c=d||null,this.i=v||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function wI(o){var a=Zu();return zM(o).then(function(f){e:{var d=Dn(a),v=d.c;d=d.a;for(var y=0;y<f.length;y++){var w=f[y],T=d,L=v;if(w.indexOf("chrome-extension://")==0?T=Dn(w).a==T&&L=="chrome-extension":L!="http"&&L!="https"?T=!1:QL.test(w)?T=T==w:(w=w.split(".").join("\\."),T=new RegExp("^(.+\\."+w+"|"+w+")$","i").test(T)),T){f=!0;break e}}f=!1}if(!f)throw new _g(Zu())})}function bI(o){return o.m||(o.m=Of().then(function(){if(!o.u){var a=o.c,f=o.i,d=qg(o.b),v=new yI(o.s,o.g,o.b,o.f);v.f=a,v.b=f,v.c=X(d||[]),o.u=v.toString()}o.v=new RF(o.u),UF(o)})),o.m}e=_I.prototype,e.Pb=function(o,a,f){var d=new k("popup-closed-by-user"),v=new k("web-storage-unsupported"),y=this,w=!1;return this.ma().then(function(){jF(y).then(function(T){T||(o&&Go(o),a(v),w=!0)})}).o(function(){}).then(function(){if(!w)return zL(o)}).then(function(){if(!w)return la(f).then(function(){a(d)})})},e.Yb=function(){var o=Gt();return!ec(o)&&!lT(o)},e.Ub=function(){return!1},e.Nb=function(o,a,f,d,v,y,w,T){if(!o)return nt(new k("popup-blocked"));if(w&&!ec())return this.ma().o(function(j){Go(o),v(j)}),d(),le();this.a||(this.a=wI(EI(this)));var L=this;return this.a.then(function(){var j=L.ma().o(function(me){throw Go(o),v(me),me});return d(),j}).then(function(){if(mg(f),!w){var j=mc(L.s,L.g,L.b,a,f,null,y,L.c,void 0,L.i,T,L.f);nT(j,o)}}).o(function(j){throw j.code=="auth/network-request-failed"&&(L.a=null),j})};function EI(o){return o.l||(o.C=o.c?pa(o.c,qg(o.b)):null,o.l=new Rr(o.g,vt(o.i),o.C),o.f&&eh(o.l,o.f)),o.l}e.Ob=function(o,a,f,d){this.a||(this.a=wI(EI(this)));var v=this;return this.a.then(function(){mg(a);var y=mc(v.s,v.g,v.b,o,a,Zu(),f,v.c,void 0,v.i,d,v.f);nT(y)}).o(function(y){throw y.code=="auth/network-request-failed"&&(v.a=null),y})},e.ma=function(){var o=this;return bI(this).then(function(){return o.v.sb}).o(function(){throw o.a=null,new k("network-request-failed")})},e.ac=function(){return!0};function mc(o,a,f,d,v,y,w,T,L,j,me,He){return o=new Bg(o,a,f,d,v,He),o.l=y,o.g=w,o.i=T,o.b=ft(L||null),o.f=j,o.zb(me).toString()}function UF(o){if(!o.v)throw Error("IfcHandler must be initialized!");DF(o.v,function(a){var f={};if(a&&a.authEvent){var d=!1;for(a=WT(a.authEvent),f=0;f<o.h.length;f++)d=o.h[f](a)||d;return f={},f.status=d?"ACK":"ERROR",le(f)}return f.status="ERROR",le(f)})}function jF(o){var a={type:"webStorageSupport"};return bI(o).then(function(){return PF(o.v,a)}).then(function(f){if(f&&f.length&&typeof f[0].webStorageSupport<"u")return f[0].webStorageSupport;throw Error()})}e.Ea=function(o){this.h.push(o)},e.Ta=function(o){F(this.h,function(a){return a==o})};function TI(o){if(this.a=o||oe.INTERNAL.reactNative&&oe.INTERNAL.reactNative.AsyncStorage,!this.a)throw new k("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}e=TI.prototype,e.get=function(o){return le(this.a.getItem(o)).then(function(a){return a&&ga(a)})},e.set=function(o,a){return le(this.a.setItem(o,tc(a)))},e.U=function(o){return le(this.a.removeItem(o))},e.ca=function(){},e.ia=function(){};function II(o){this.b=o,this.a={},this.f=V(this.c,this)}var SI=[];function VF(){var o=kr()?self:null;if(Ye(SI,function(f){f.b==o&&(a=f)}),!a){var a=new II(o);SI.push(a)}return a}II.prototype.c=function(o){var a=o.data.eventType,f=o.data.eventId,d=this.a[a];if(d&&0<d.length){o.ports[0].postMessage({status:"ack",eventId:f,eventType:a,response:null});var v=[];Ye(d,function(y){v.push(le().then(function(){return y(o.origin,o.data.data)}))}),NE(v).then(function(y){var w=[];Ye(y,function(T){w.push({fulfilled:T.Qb,value:T.value,reason:T.reason?T.reason.message:void 0})}),Ye(w,function(T){for(var L in T)typeof T[L]>"u"&&delete T[L]}),o.ports[0].postMessage({status:"done",eventId:f,eventType:a,response:w})})}};function CI(o,a,f){$r(o.a)&&o.b.addEventListener("message",o.f),typeof o.a[a]>"u"&&(o.a[a]=[]),o.a[a].push(f)}function AI(o){this.a=o}AI.prototype.postMessage=function(o,a){this.a.postMessage(o,a)};function kI(o){this.c=o,this.b=!1,this.a=[]}function NI(o,a,f,d){var v,y=f||{},w,T,L,j=null;if(o.b)return nt(Error("connection_unavailable"));var me=d?800:50,He=typeof MessageChannel<"u"?new MessageChannel:null;return new Oe(function(je,Lt){He?(v=Math.floor(Math.random()*Math.pow(10,20)).toString(),He.port1.start(),T=setTimeout(function(){Lt(Error("unsupported_event"))},me),w=function(Ii){Ii.data.eventId===v&&(Ii.data.status==="ack"?(clearTimeout(T),L=setTimeout(function(){Lt(Error("timeout"))},3e3)):Ii.data.status==="done"?(clearTimeout(L),typeof Ii.data.response<"u"?je(Ii.data.response):Lt(Error("unknown_error"))):(clearTimeout(T),clearTimeout(L),Lt(Error("invalid_response"))))},j={messageChannel:He,onMessage:w},o.a.push(j),He.port1.addEventListener("message",w),o.c.postMessage({eventType:a,eventId:v,data:y},[He.port2])):Lt(Error("connection_unavailable"))}).then(function(je){return Kg(o,j),je}).o(function(je){throw Kg(o,j),je})}function Kg(o,a){if(a){var f=a.messageChannel,d=a.onMessage;f&&(f.port1.removeEventListener("message",d),f.port1.close()),F(o.a,function(v){return v==a})}}kI.prototype.close=function(){for(;0<this.a.length;)Kg(this,this.a[0]);this.b=!0};function RI(){if(!Gg())throw new k("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=l.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var o=this;kr()&&self?(this.v=VF(),CI(this.v,"keyChanged",function(a,f){return DI(o).then(function(d){return 0<d.length&&Ye(o.a,function(v){v(d)}),{keyProcessed:D(d,f.key)}})}),CI(this.v,"ping",function(){return le(["keyChanged"])})):tM().then(function(a){(o.h=a)&&(o.g=new kI(new AI(a)),NI(o.g,"ping",null,!0).then(function(f){f[0].fulfilled&&D(f[0].value,"keyChanged")&&(o.s=!0)}).o(function(){}))})}var Hg;function BF(o){return new Oe(function(a,f){var d=o.m.deleteDatabase("firebaseLocalStorageDb");d.onsuccess=function(){a()},d.onerror=function(v){f(Error(v.target.error))}})}function OI(o){return new Oe(function(a,f){var d=o.m.open("firebaseLocalStorageDb",1);d.onerror=function(v){try{v.preventDefault()}catch{}f(Error(v.target.error))},d.onupgradeneeded=function(v){v=v.target.result;try{v.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(y){f(y)}},d.onsuccess=function(v){v=v.target.result,v.objectStoreNames.contains("firebaseLocalStorage")?a(v):BF(o).then(function(){return OI(o)}).then(function(y){a(y)}).o(function(y){f(y)})}})}function Wg(o){return o.i||(o.i=OI(o)),o.i}function nh(o,a){function f(v,y){Wg(o).then(a).then(v).o(function(w){if(3<++d)y(w);else return Wg(o).then(function(T){return T.close(),o.i=void 0,f(v,y)}).o(function(T){y(T)})})}var d=0;return new Oe(f)}function Gg(){try{return!!l.indexedDB}catch{return!1}}function yc(o){return o.objectStore("firebaseLocalStorage")}function _c(o,a){return o.transaction(["firebaseLocalStorage"],a?"readwrite":"readonly")}function wa(o){return new Oe(function(a,f){o.onsuccess=function(d){d&&d.target?a(d.target.result):a()},o.onerror=function(d){f(d.target.error)}})}e=RI.prototype,e.set=function(o,a){var f=this,d=!1;return nh(this,function(v){return v=yc(_c(v,!0)),wa(v.get(o))}).then(function(v){return nh(f,function(y){if(y=yc(_c(y,!0)),v)return v.value=a,wa(y.put(v));f.b++,d=!0;var w={};return w.fbase_key=o,w.value=a,wa(y.add(w))})}).then(function(){return f.c[o]=a,PI(f,o)}).oa(function(){d&&f.b--})};function PI(o,a){return o.g&&o.h&&eM()===o.h?NI(o.g,"keyChanged",{key:a},o.s).then(function(){}).o(function(){}):le()}e.get=function(o){return nh(this,function(a){return wa(yc(_c(a,!1)).get(o))}).then(function(a){return a&&a.value})},e.U=function(o){var a=this,f=!1;return nh(this,function(d){return f=!0,a.b++,wa(yc(_c(d,!0)).delete(o))}).then(function(){return delete a.c[o],PI(a,o)}).oa(function(){f&&a.b--})};function DI(o){return Wg(o).then(function(a){var f=yc(_c(a,!1));return f.getAll?wa(f.getAll()):new Oe(function(d,v){var y=[],w=f.openCursor();w.onsuccess=function(T){(T=T.target.result)?(y.push(T.value),T.continue()):d(y)},w.onerror=function(T){v(T.target.error)}})}).then(function(a){var f={},d=[];if(o.b==0){for(d=0;d<a.length;d++)f[a[d].fbase_key]=a[d].value;d=rT(o.c,f),o.c=f}return d})}e.ca=function(o){this.a.length==0&&qF(this),this.a.push(o)},e.ia=function(o){F(this.a,function(a){return a==o}),this.a.length==0&&xI(this)};function qF(o){function a(){o.f=setTimeout(function(){o.l=DI(o).then(function(f){0<f.length&&Ye(o.a,function(d){d(f)})}).then(function(){a()}).o(function(f){f.message!="STOP_EVENT"&&a()})},800)}xI(o),a()}function xI(o){o.l&&o.l.cancel("STOP_EVENT"),o.f&&(clearTimeout(o.f),o.f=null)}function LI(o){var a=this,f=null;this.a=[],this.type="indexedDB",this.c=o,this.b=le().then(function(){if(Gg()){var d=zo(),v="__sak"+d;return Hg||(Hg=new RI),f=Hg,f.set(v,d).then(function(){return f.get(v)}).then(function(y){if(y!==d)throw Error("indexedDB not supported!");return f.U(v)}).then(function(){return f}).o(function(){return a.c})}return a.c}).then(function(d){return a.type=d.type,d.ca(function(v){Ye(a.a,function(y){y(v)})}),d})}e=LI.prototype,e.get=function(o){return this.b.then(function(a){return a.get(o)})},e.set=function(o,a){return this.b.then(function(f){return f.set(o,a)})},e.U=function(o){return this.b.then(function(a){return a.U(o)})},e.ca=function(o){this.a.push(o)},e.ia=function(o){F(this.a,function(a){return a==o})};function wc(){this.a={},this.type="inMemory"}e=wc.prototype,e.get=function(o){return le(this.a[o])},e.set=function(o,a){return this.a[o]=a,le()},e.U=function(o){return delete this.a[o],le()},e.ca=function(){},e.ia=function(){};function rh(){if(!KF())throw Yr()=="Node"?new k("internal-error","The LocalStorage compatibility library was not found."):new k("web-storage-unsupported");this.a=MI()||oe.INTERNAL.node.localStorage,this.type="localStorage"}function MI(){try{var o=l.localStorage,a=zo();return o&&(o.setItem(a,"1"),o.removeItem(a)),o}catch{return null}}function KF(){var o=Yr()=="Node";if(o=MI()||o&&oe.INTERNAL.node&&oe.INTERNAL.node.localStorage,!o)return!1;try{return o.setItem("__sak","1"),o.removeItem("__sak"),!0}catch{return!1}}e=rh.prototype,e.get=function(o){var a=this;return le().then(function(){var f=a.a.getItem(o);return ga(f)})},e.set=function(o,a){var f=this;return le().then(function(){var d=tc(a);d===null?f.U(o):f.a.setItem(o,d)})},e.U=function(o){var a=this;return le().then(function(){a.a.removeItem(o)})},e.ca=function(o){l.window&&ur(l.window,"storage",o)},e.ia=function(o){l.window&&Gn(l.window,"storage",o)};function $g(){this.type="nullStorage"}e=$g.prototype,e.get=function(){return le(null)},e.set=function(){return le()},e.U=function(){return le()},e.ca=function(){},e.ia=function(){};function zg(){if(!HF())throw Yr()=="Node"?new k("internal-error","The SessionStorage compatibility library was not found."):new k("web-storage-unsupported");this.a=FI()||oe.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function FI(){try{var o=l.sessionStorage,a=zo();return o&&(o.setItem(a,"1"),o.removeItem(a)),o}catch{return null}}function HF(){var o=Yr()=="Node";if(o=FI()||o&&oe.INTERNAL.node&&oe.INTERNAL.node.sessionStorage,!o)return!1;try{return o.setItem("__sak","1"),o.removeItem("__sak"),!0}catch{return!1}}e=zg.prototype,e.get=function(o){var a=this;return le().then(function(){var f=a.a.getItem(o);return ga(f)})},e.set=function(o,a){var f=this;return le().then(function(){var d=tc(a);d===null?f.U(o):f.a.setItem(o,d)})},e.U=function(o){var a=this;return le().then(function(){a.a.removeItem(o)})},e.ca=function(){},e.ia=function(){};function WF(){var o={};o.Browser=GF,o.Node=$F,o.ReactNative=zF,o.Worker=QF,this.a=o[Yr()]}var Qg,GF={F:rh,cb:zg},$F={F:rh,cb:zg},zF={F:TI,cb:$g},QF={F:rh,cb:$g},ba={rd:"local",NONE:"none",td:"session"};function YF(o){var a=new k("invalid-persistence-type"),f=new k("unsupported-persistence-type");e:{for(d in ba)if(ba[d]==o){var d=!0;break e}d=!1}if(!d||typeof o!="string")throw a;switch(Yr()){case"ReactNative":if(o==="session")throw f;break;case"Node":if(o!=="none")throw f;break;case"Worker":if(o==="session"||!Gg()&&o!=="none")throw f;break;default:if(!Qv()&&o!=="none")throw f}}function UI(){var o=!!(!lT(Gt())&&$v()),a=ec(),f=Qv();this.m=o,this.h=a,this.l=f,this.a={},Qg||(Qg=new WF),o=Qg;try{this.g=!Wv()&&hT()||!l.indexedDB?new o.a.F:new LI(kr()?new wc:new o.a.F)}catch{this.g=new wc,this.h=!0}try{this.i=new o.a.cb}catch{this.i=new wc}this.v=new wc,this.f=V(this.Zb,this),this.b={}}var Yg;function bc(){return Yg||(Yg=new UI),Yg}function ns(o,a){switch(a){case"session":return o.i;case"none":return o.v;default:return o.g}}function Ea(o,a){return"firebase:"+o.name+(a?":"+a:"")}function XF(o,a,f){var d=Ea(a,f),v=ns(o,a.F);return o.get(a,f).then(function(y){var w=null;try{w=ga(l.localStorage.getItem(d))}catch{}if(w&&!y)return l.localStorage.removeItem(d),o.set(a,w,f);w&&y&&v.type!="localStorage"&&l.localStorage.removeItem(d)})}e=UI.prototype,e.get=function(o,a){return ns(this,o.F).get(Ea(o,a))};function Ta(o,a,f){return f=Ea(a,f),a.F=="local"&&(o.b[f]=null),ns(o,a.F).U(f)}e.set=function(o,a,f){var d=Ea(o,f),v=this,y=ns(this,o.F);return y.set(d,a).then(function(){return y.get(d)}).then(function(w){o.F=="local"&&(v.b[d]=w)})},e.addListener=function(o,a,f){o=Ea(o,a),this.l&&(this.b[o]=l.localStorage.getItem(o)),$r(this.a)&&(ns(this,"local").ca(this.f),this.h||(Wv()||!hT())&&l.indexedDB||!this.l||JF(this)),this.a[o]||(this.a[o]=[]),this.a[o].push(f)},e.removeListener=function(o,a,f){o=Ea(o,a),this.a[o]&&(F(this.a[o],function(d){return d==f}),this.a[o].length==0&&delete this.a[o]),$r(this.a)&&(ns(this,"local").ia(this.f),Xg(this))};function JF(o){Xg(o),o.c=setInterval(function(){for(var a in o.a){var f=l.localStorage.getItem(a),d=o.b[a];f!=d&&(o.b[a]=f,f=new Ko({type:"storage",key:a,target:window,oldValue:d,newValue:f,a:!0}),o.Zb(f))}},1e3)}function Xg(o){o.c&&(clearInterval(o.c),o.c=null)}e.Zb=function(o){if(o&&o.g){var a=o.a.key;if(a==null)for(var f in this.a){var d=this.b[f];typeof d>"u"&&(d=null);var v=l.localStorage.getItem(f);v!==d&&(this.b[f]=v,this.nb(f))}else if(a.indexOf("firebase:")==0&&this.a[a]){if(typeof o.a.a<"u"?ns(this,"local").ia(this.f):Xg(this),this.m){if(f=l.localStorage.getItem(a),d=o.a.newValue,d!==f)d!==null?l.localStorage.setItem(a,d):l.localStorage.removeItem(a);else if(this.b[a]===d&&typeof o.a.a>"u")return}var y=this;f=function(){(typeof o.a.a<"u"||y.b[a]!==l.localStorage.getItem(a))&&(y.b[a]=l.localStorage.getItem(a),y.nb(a))},Ar&&Xi&&Xi==10&&l.localStorage.getItem(a)!==o.a.newValue&&o.a.newValue!==o.a.oldValue?setTimeout(f,10):f()}}else Ye(o,V(this.nb,this))},e.nb=function(o){this.a[o]&&Ye(this.a[o],function(a){a()})};function ZF(o){this.a=o,this.b=bc()}var Jg={name:"authEvent",F:"local"};function e2(o){return o.b.get(Jg,o.a).then(function(a){return WT(a)})}function t2(){this.a=bc()}function n2(){this.b=-1}function ih(o,a){this.b=jI,this.f=l.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=o,this.h=a,this.l=l.Int32Array?new Int32Array(64):Array(64),oh===void 0&&(l.Int32Array?oh=new Int32Array(qI):oh=qI),this.reset()}var oh;M(ih,n2);for(var jI=64,r2=jI-1,VI=[],Zg=0;Zg<r2;Zg++)VI[Zg]=0;var BI=$(128,VI);ih.prototype.reset=function(){this.g=this.c=0,this.a=l.Int32Array?new Int32Array(this.h):X(this.h)};function em(o){for(var a=o.f,f=o.l,d=0,v=0;v<a.length;)f[d++]=a[v]<<24|a[v+1]<<16|a[v+2]<<8|a[v+3],v=4*d;for(a=16;64>a;a++){v=f[a-15]|0,d=f[a-2]|0;var y=(f[a-16]|0)+((v>>>7|v<<25)^(v>>>18|v<<14)^v>>>3)|0,w=(f[a-7]|0)+((d>>>17|d<<15)^(d>>>19|d<<13)^d>>>10)|0;f[a]=y+w|0}d=o.a[0]|0,v=o.a[1]|0;var T=o.a[2]|0,L=o.a[3]|0,j=o.a[4]|0,me=o.a[5]|0,He=o.a[6]|0;for(y=o.a[7]|0,a=0;64>a;a++){var je=((d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10))+(d&v^d&T^v&T)|0;w=j&me^~j&He,y=y+((j>>>6|j<<26)^(j>>>11|j<<21)^(j>>>25|j<<7))|0,w=w+(oh[a]|0)|0,w=y+(w+(f[a]|0)|0)|0,y=He,He=me,me=j,j=L+w|0,L=T,T=v,v=d,d=w+je|0}o.a[0]=o.a[0]+d|0,o.a[1]=o.a[1]+v|0,o.a[2]=o.a[2]+T|0,o.a[3]=o.a[3]+L|0,o.a[4]=o.a[4]+j|0,o.a[5]=o.a[5]+me|0,o.a[6]=o.a[6]+He|0,o.a[7]=o.a[7]+y|0}function tm(o,a,f){f===void 0&&(f=a.length);var d=0,v=o.c;if(typeof a=="string")for(;d<f;)o.f[v++]=a.charCodeAt(d++),v==o.b&&(em(o),v=0);else if(b(a))for(;d<f;){var y=a[d++];if(!(typeof y=="number"&&0<=y&&255>=y&&y==(y|0)))throw Error("message must be a byte array");o.f[v++]=y,v==o.b&&(em(o),v=0)}else throw Error("message must be string or array");o.c=v,o.g+=f}var qI=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function KI(){ih.call(this,8,i2)}M(KI,ih);var i2=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function HI(o,a,f,d,v,y){this.v=o,this.i=a,this.l=f,this.m=d||null,this.u=v||null,this.s=y,this.h=a+":"+f,this.C=new t2,this.g=new ZF(this.h),this.f=null,this.b=[],this.a=this.c=null}function sh(o){return new k("invalid-cordova-configuration",o)}e=HI.prototype,e.ma=function(){return this.Ia?this.Ia:this.Ia=XL().then(function(){if(typeof rt("universalLinks.subscribe",l)!="function")throw sh("cordova-universal-links-plugin-fix is not installed");if(typeof rt("BuildInfo.packageName",l)>"u")throw sh("cordova-plugin-buildinfo is not installed");if(typeof rt("cordova.plugins.browsertab.openUrl",l)!="function")throw sh("cordova-plugin-browsertab is not installed");if(typeof rt("cordova.InAppBrowser.open",l)!="function")throw sh("cordova-plugin-inappbrowser is not installed")},function(){throw new k("cordova-not-ready")})};function o2(){for(var o=20,a=[];0<o;)a.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),o--;return a.join("")}function s2(o){var a=new KI;tm(a,o),o=[];var f=8*a.g;56>a.c?tm(a,BI,56-a.c):tm(a,BI,a.b-(a.c-56));for(var d=63;56<=d;d--)a.f[d]=f&255,f/=256;for(em(a),d=f=0;d<a.i;d++)for(var v=24;0<=v;v-=8)o[f++]=a.a[d]>>v&255;return mM(o)}e.Pb=function(o,a){return a(new k("operation-not-supported-in-this-environment")),le()},e.Nb=function(){return nt(new k("operation-not-supported-in-this-environment"))},e.ac=function(){return!1},e.Yb=function(){return!0},e.Ub=function(){return!0},e.Ob=function(o,a,f,d){if(this.c)return nt(new k("redirect-operation-pending"));var v=this,y=l.document,w=null,T=null,L=null,j=null;return this.c=le().then(function(){return mg(a),GI(v)}).then(function(){return a2(v,o,a,f,d)}).then(function(){return new Oe(function(me,He){T=function(){var je=rt("cordova.plugins.browsertab.close",l);return me(),typeof je=="function"&&je(),v.a&&typeof v.a.close=="function"&&(v.a.close(),v.a=null),!1},v.Ea(T),L=function(){w||(w=la(2e3).then(function(){He(new k("redirect-cancelled-by-user"))}))},j=function(){Yv()&&L()},y.addEventListener("resume",L,!1),Gt().toLowerCase().match(/android/)||y.addEventListener("visibilitychange",j,!1)}).o(function(me){return nm(v).then(function(){throw me})})}).oa(function(){L&&y.removeEventListener("resume",L,!1),j&&y.removeEventListener("visibilitychange",j,!1),w&&w.cancel(),T&&v.Ta(T),v.c=null})};function a2(o,a,f,d,v){var y=o2(),w=new Nr(a,d,null,y,new k("no-auth-event"),null,v),T=rt("BuildInfo.packageName",l);if(typeof T!="string")throw new k("invalid-cordova-configuration");var L=rt("BuildInfo.displayName",l),j={};if(Gt().toLowerCase().match(/iphone|ipad|ipod/))j.ibi=T;else if(Gt().toLowerCase().match(/android/))j.apn=T;else return nt(new k("operation-not-supported-in-this-environment"));L&&(j.appDisplayName=L),y=s2(y),j.sessionId=y;var me=mc(o.v,o.i,o.l,a,f,null,d,o.m,j,o.u,v,o.s);return o.ma().then(function(){var He=o.h;return o.C.a.set(Jg,w.w(),He)}).then(function(){var He=rt("cordova.plugins.browsertab.isAvailable",l);if(typeof He!="function")throw new k("invalid-cordova-configuration");var je=null;He(function(Lt){if(Lt){if(je=rt("cordova.plugins.browsertab.openUrl",l),typeof je!="function")throw new k("invalid-cordova-configuration");je(me)}else{if(je=rt("cordova.InAppBrowser.open",l),typeof je!="function")throw new k("invalid-cordova-configuration");Lt=Gt(),o.a=je(me,Lt.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||Lt.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}function WI(o,a){for(var f=0;f<o.b.length;f++)try{o.b[f](a)}catch{}}function GI(o){return o.f||(o.f=o.ma().then(function(){return new Oe(function(a){function f(d){return a(d),o.Ta(f),!1}o.Ea(f),u2(o)})})),o.f}function nm(o){var a=null;return e2(o.g).then(function(f){return a=f,f=o.g,Ta(f.b,Jg,f.a)}).then(function(){return a})}function u2(o){function a(w){d=!0,v&&v.cancel(),nm(o).then(function(T){var L=f;if(T&&w&&w.url){var j=null;L=FT(w.url),L.indexOf("/__/auth/callback")!=-1&&(j=Dn(L),j=ga(cr(j,"firebaseError")||null),j=(j=typeof j=="object"?Je(j):null)?new Nr(T.c,T.b,null,null,j,null,T.T()):new Nr(T.c,T.b,L,T.f,null,null,T.T())),L=j||f}WI(o,L)})}var f=new Nr("unknown",null,null,null,new k("no-auth-event")),d=!1,v=la(500).then(function(){return nm(o).then(function(){d||WI(o,f)})}),y=l.handleOpenURL;l.handleOpenURL=function(w){if(w.toLowerCase().indexOf(rt("BuildInfo.packageName",l).toLowerCase()+"://")==0&&a({url:w}),typeof y=="function")try{y(w)}catch(T){console.error(T)}},yg||(yg=new SM),CM(a)}e.Ea=function(o){this.b.push(o),GI(this).o(function(a){a.code==="auth/invalid-cordova-configuration"&&(a=new Nr("unknown",null,null,null,new k("no-auth-event")),o(a))})},e.Ta=function(o){F(this.b,function(a){return a==o})};function c2(o){this.a=o,this.b=bc()}var rm={name:"pendingRedirect",F:"session"};function l2(o){return o.b.set(rm,"pending",o.a)}function im(o){return Ta(o.b,rm,o.a)}function f2(o){return o.b.get(rm,o.a).then(function(a){return a=="pending"})}function ah(o,a,f,d){this.i={},this.u=0,this.D=o,this.v=a,this.m=f,this.J=d,this.h=[],this.f=!1,this.l=V(this.s,this),this.b=new ch,this.C=new nS,this.g=new c2(ZI(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=$I(this.D,this.v,this.m,gt,this.J)}function $I(o,a,f,d,v){var y=oe.SDK_VERSION||null;return Gv()?new HI(o,a,f,y,d,v):new _I(o,a,f,y,d,v)}ah.prototype.reset=function(){this.f=!1,this.a.Ta(this.l),this.a=$I(this.D,this.v,this.m,null,this.J),this.i={}};function zI(o){o.f||(o.f=!0,o.a.Ea(o.l));var a=o.a;return o.a.ma().o(function(f){throw o.a==a&&o.reset(),f})}function QI(o){o.a.Yb()&&zI(o).o(function(a){var f=new Nr("unknown",null,null,null,new k("operation-not-supported-in-this-environment"));sm(a)&&o.s(f)}),o.a.Ub()||eS(o.b)}function uh(o,a){D(o.h,a)||o.h.push(a),o.f||f2(o.g).then(function(f){f?im(o.g).then(function(){zI(o).o(function(d){var v=new Nr("unknown",null,null,null,new k("operation-not-supported-in-this-environment"));sm(d)&&o.s(v)})}):QI(o)}).o(function(){QI(o)})}function om(o,a){F(o.h,function(f){return f==a})}ah.prototype.s=function(o){if(!o)throw new k("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),o&&o.getUid()&&this.i.hasOwnProperty(o.getUid()))return!1;for(var a=!1,f=0;f<this.h.length;f++){var d=this.h[f];if(d.Gb(o.c,o.b)){(a=this.c[o.c])&&(a.h(o,d),o&&(o.f||o.b)&&(this.i[o.getUid()]=!0,this.u=Date.now())),a=!0;break}}return eS(this.b),a};var h2=new eo(2e3,1e4),d2=new eo(3e4,6e4);ah.prototype.ra=function(){return this.b.ra()};function YI(o,a,f,d,v,y,w){return o.a.Nb(a,f,d,function(){o.f||(o.f=!0,o.a.Ea(o.l))},function(){o.reset()},v,y,w)}function sm(o){return!!(o&&o.code=="auth/cordova-not-ready")}function XI(o,a,f,d,v){var y;return l2(o.g).then(function(){return o.a.Ob(a,f,d,v).o(function(w){if(sm(w))throw new k("operation-not-supported-in-this-environment");return y=w,im(o.g).then(function(){throw y})}).then(function(){return o.a.ac()?new Oe(function(){}):im(o.g).then(function(){return o.ra()}).then(function(){}).o(function(){})})})}function JI(o,a,f,d,v){return o.a.Pb(d,function(y){a.na(f,null,y,v)},h2.get())}var am={};function ZI(o,a,f){return o=o+":"+a,f&&(o=o+":"+f.url),o}function um(o,a,f,d){var v=ZI(a,f,d);return am[v]||(am[v]=new ah(o,a,f,d)),am[v]}function ch(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}ch.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},ch.prototype.h=function(o,a){if(o){this.reset(),this.g=!0;var f=o.c,d=o.b,v=o.a&&o.a.code=="auth/web-storage-unsupported",y=o.a&&o.a.code=="auth/operation-not-supported-in-this-environment";this.i=!(!v&&!y),f!="unknown"||v||y?o.a?(rs(this,!0,null,o.a),le()):a.Fa(f,d)?p2(this,o,a):nt(new k("invalid-auth-event")):(rs(this,!1,null,null),le())}else nt(new k("invalid-auth-event"))};function eS(o){o.g||(o.g=!0,rs(o,!1,null,null))}function lh(o){o.g&&!o.i&&rs(o,!1,null,null)}function p2(o,a,f){f=f.Fa(a.c,a.b);var d=a.g,v=a.f,y=a.i,w=a.T(),T=!!a.c.match(/Redirect$/);f(d,v,w,y).then(function(L){rs(o,T,L,null)}).o(function(L){rs(o,T,null,L)})}function v2(o,a){if(o.b=function(){return nt(a)},o.c.length)for(var f=0;f<o.c.length;f++)o.c[f](a)}function tS(o,a){if(o.b=function(){return le(a)},o.f.length)for(var f=0;f<o.f.length;f++)o.f[f](a)}function rs(o,a,f,d){a?d?v2(o,d):tS(o,f):tS(o,{user:null}),o.f=[],o.c=[]}ch.prototype.ra=function(){var o=this;return new Oe(function(a,f){o.b?o.b().then(a,f):(o.f.push(a),o.c.push(f),g2(o))})};function g2(o){var a=new k("timeout");o.a&&o.a.cancel(),o.a=la(d2.get()).then(function(){o.b||(o.g=!0,rs(o,!0,null,a))})}function nS(){}nS.prototype.h=function(o,a){if(o){var f=o.c,d=o.b;o.a?(a.na(o.c,null,o.a,o.b),le()):a.Fa(f,d)?m2(o,a):nt(new k("invalid-auth-event"))}else nt(new k("invalid-auth-event"))};function m2(o,a){var f=o.b,d=o.c;a.Fa(d,f)(o.g,o.f,o.T(),o.i).then(function(v){a.na(d,v,null,f)}).o(function(v){a.na(d,null,v,f)})}function rS(){this.jb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.jb},set:function(o){this.jb=o},enumerable:!1})}function cm(o,a){this.a=a,re(this,"verificationId",o)}cm.prototype.confirm=function(o){return o=HT(this.verificationId,o),this.a(o)};function lm(o,a,f,d){return new Ei(o).gb(a,f).then(function(v){return new cm(v,d)})}function y2(o){var a=NT(o);if(!(a&&a.exp&&a.auth_time&&a.iat))throw new k("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");yn(this,{token:o,expirationTime:nc(1e3*a.exp),authTime:nc(1e3*a.auth_time),issuedAtTime:nc(1e3*a.iat),signInProvider:a.firebase&&a.firebase.sign_in_provider?a.firebase.sign_in_provider:null,signInSecondFactor:a.firebase&&a.firebase.sign_in_second_factor?a.firebase.sign_in_second_factor:null,claims:a})}function fm(o,a,f){var d=a&&a[oS];if(!d)throw new k("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=o,this.f=ft(a),this.g=f,this.c=new jf(null,d),this.b=[];var v=this;Ye(a[iS]||[],function(y){(y=ng(y))&&v.b.push(y)}),re(this,"auth",this.a),re(this,"session",this.c),re(this,"hints",this.b)}var iS="mfaInfo",oS="mfaPendingCredential";fm.prototype.Rc=function(o){var a=this;return o.tb(this.a.a,this.c).then(function(f){var d=ft(a.f);return delete d[iS],delete d[oS],Wt(d,f),a.g(d)})};function hm(o,a,f,d){k.call(this,"multi-factor-auth-required",d,a),this.b=new fm(o,a,f),re(this,"resolver",this.b)}M(hm,k);function sS(o,a,f){if(o&&I(o.serverResponse)&&o.code==="auth/multi-factor-auth-required")try{return new hm(a,o.serverResponse,f,o.message)}catch{}return null}function aS(){}aS.prototype.tb=function(o,a,f){return a.type==sc?_2(this,o,a,f):w2(this,o,a)};function _2(o,a,f,d){return f.Ha().then(function(v){return v={idToken:v},typeof d<"u"&&(v.displayName=d),Wt(v,{phoneVerificationInfo:ac(o.a)}),Pe(a,uF,v)})}function w2(o,a,f){return f.Ha().then(function(d){return d={mfaPendingCredential:d},Wt(d,{phoneVerificationInfo:ac(o.a)}),Pe(a,cF,d)})}function dm(o){re(this,"factorId",o.fa),this.a=o}M(dm,aS);function uS(o){if(dm.call(this,o),this.a.fa!=Ei.PROVIDER_ID)throw new k("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}M(uS,dm);function Ia(o,a){Pn.call(this,o);for(var f in a)this[f]=a[f]}M(Ia,Pn);function pm(o,a){this.a=o,this.b=[],this.c=V(this.yc,this),ur(this.a,"userReloaded",this.c);var f=[];a&&a.multiFactor&&a.multiFactor.enrolledFactors&&Ye(a.multiFactor.enrolledFactors,function(d){var v=null,y={};if(d){d.uid&&(y[ig]=d.uid),d.displayName&&(y[pT]=d.displayName),d.enrollmentTime&&(y[rg]=new Date(d.enrollmentTime).toISOString()),d.phoneNumber&&(y[og]=d.phoneNumber);try{v=new rc(y)}catch{}d=v}else d=null;d&&f.push(d)}),fh(this,f)}function b2(o){var a=[];return Ye(o.mfaInfo||[],function(f){(f=ng(f))&&a.push(f)}),a}e=pm.prototype,e.yc=function(o){fh(this,b2(o.hd))};function fh(o,a){o.b=a,re(o,"enrolledFactors",a)}e.Sb=function(){return this.a.I().then(function(o){return new jf(o,null)})},e.fc=function(o,a){var f=this,d=this.a.a;return this.Sb().then(function(v){return o.tb(d,v,a)}).then(function(v){return Zr(f.a,v),f.a.reload()})},e.bd=function(o){var a=this,f=typeof o=="string"?o:o.uid,d=this.a.a;return this.a.I().then(function(v){return Pe(d,NF,{idToken:v,mfaEnrollmentId:f})}).then(function(v){var y=Hu(a.b,function(w){return w.uid!=f});return fh(a,y),Zr(a.a,v),a.a.reload().o(function(w){if(w.code!="auth/user-token-expired")throw w})})},e.w=function(){return{multiFactor:{enrolledFactors:Qi(this.b,function(o){return o.w()})}}};function vm(o,a,f){if(this.h=o,this.i=a,this.g=f,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}vm.prototype.start=function(){this.a=this.c,gm(this,!0)};function E2(o,a){return a?(o.a=o.c,o.g()):(a=o.a,o.a*=2,o.a>o.f&&(o.a=o.f),a)}function gm(o,a){o.stop(),o.b=la(E2(o,a)).then(function(){return ZL()}).then(function(){return o.h()}).then(function(){gm(o,!0)}).o(function(f){o.i(f)&&gm(o,!1)})}vm.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)};function mm(o){this.f=o,this.b=this.a=null,this.c=Date.now()}mm.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}};function cS(o,a){typeof a>"u"&&(o.b?(a=o.b,a=a.a-a.g):a=0),o.c=Date.now()+1e3*a}function lS(o,a){o.b=Ff(a[Or]||""),o.a=a.refreshToken,a=a.expiresIn,cS(o,typeof a<"u"?Number(a):void 0)}function T2(o,a){o.b=a.b,o.a=a.a,o.c=a.c}function I2(o,a){return GM(o.f,a).then(function(f){return o.b=Ff(f.access_token),o.a=f.refresh_token,cS(o,f.expires_in),{accessToken:o.b.toString(),refreshToken:o.a}}).o(function(f){throw f.code=="auth/user-token-expired"&&(o.a=null),f})}mm.prototype.getToken=function(o){return o=!!o,this.b&&!this.a?nt(new k("user-token-expired")):o||!this.b||Date.now()>this.c-3e4?this.a?I2(this,{grant_type:"refresh_token",refresh_token:this.a}):le(null):le({accessToken:this.b.toString(),refreshToken:this.a})};function hh(o,a){this.a=o||null,this.b=a||null,yn(this,{lastSignInTime:nc(a||null),creationTime:nc(o||null)})}function S2(o){return new hh(o.a,o.b)}hh.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}};function C2(o,a,f,d,v,y){yn(this,{uid:o,displayName:d||null,photoURL:v||null,email:f||null,phoneNumber:y||null,providerId:a})}function zn(o,a,f){this.N=[],this.l=o.apiKey,this.m=o.appName,this.s=o.authDomain||null;var d=oe.SDK_VERSION?pa(oe.SDK_VERSION):null;this.a=new Rr(this.l,vt(gt),d),(this.u=o.emulatorConfig||null)&&eh(this.a,this.u),this.h=new mm(this.a),Im(this,a[Or]),lS(this.h,a),re(this,"refreshToken",this.h.a),hS(this,f||{}),mn.call(this),this.P=!1,this.s&&$o()&&(this.b=um(this.s,this.l,this.m,this.u)),this.W=[],this.i=null,this.D=A2(this),this.ba=V(this.ib,this);var v=this;this.za=null,this.Pa=function(y){v.xa(y.h)},this.qa=null,this.Ba=function(y){ym(v,y.c)},this.$=null,this.aa=[],this.Oa=function(y){Ec(v,y.f)},this.ja=null,this.S=new pm(this,f),re(this,"multiFactor",this.S)}M(zn,mn),zn.prototype.xa=function(o){this.za=o,sI(this.a,o)};function ym(o,a){o.u=a,eh(o.a,a),o.b&&(a=o.b,o.b=um(o.s,o.l,o.m,o.u),o.P&&(om(a,o),uh(o.b,o)))}zn.prototype.la=function(){return this.za};function _m(o,a){o.qa&&Gn(o.qa,"languageCodeChanged",o.Pa),(o.qa=a)&&ur(a,"languageCodeChanged",o.Pa)}function wm(o,a){o.$&&Gn(o.$,"emulatorConfigChanged",o.Ba),(o.$=a)&&ur(a,"emulatorConfigChanged",o.Ba)}function Ec(o,a){o.aa=a,aI(o.a,oe.SDK_VERSION?pa(oe.SDK_VERSION,o.aa):null)}zn.prototype.Ga=function(){return X(this.aa)};function bm(o,a){o.ja&&Gn(o.ja,"frameworkChanged",o.Oa),(o.ja=a)&&ur(a,"frameworkChanged",o.Oa)}zn.prototype.ib=function(){this.D.b&&(this.D.stop(),this.D.start())};function Em(o){try{return oe.app(o.m).auth()}catch{throw new k("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+o.m+"'!")}}function A2(o){return new vm(function(){return o.I(!0)},function(a){return!!(a&&a.code=="auth/network-request-failed")},function(){var a=o.h.c-Date.now()-3e5;return 0<a?a:0})}function fS(o){o.J||o.D.b||(o.D.start(),Gn(o,"tokenChanged",o.ba),ur(o,"tokenChanged",o.ba))}function Tm(o){Gn(o,"tokenChanged",o.ba),o.D.stop()}function Im(o,a){o.Aa=a,re(o,"_lat",a)}function k2(o,a){F(o.W,function(f){return f==a})}function is(o){for(var a=[],f=0;f<o.W.length;f++)a.push(o.W[f](o));return NE(a).then(function(){return o})}function Tc(o){o.b&&!o.P&&(o.P=!0,uh(o.b,o))}function hS(o,a){yn(o,{uid:a.uid,displayName:a.displayName||null,photoURL:a.photoURL||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,isAnonymous:a.isAnonymous||!1,tenantId:a.tenantId||null,metadata:new hh(a.createdAt,a.lastLoginAt),providerData:[]}),o.a.b=o.tenantId}re(zn.prototype,"providerId","firebase");function dS(){}function Sm(o){return le().then(function(){if(o.J)throw new k("app-deleted")})}function Cm(o){return Qi(o.providerData,function(a){return a.providerId})}function Am(o,a){a&&(pS(o,a.providerId),o.providerData.push(a))}function pS(o,a){F(o.providerData,function(f){return f.providerId==a})}function ro(o,a,f){(a!="uid"||f)&&o.hasOwnProperty(a)&&re(o,a,f)}function dh(o,a){o!=a&&(yn(o,{uid:a.uid,displayName:a.displayName,photoURL:a.photoURL,email:a.email,emailVerified:a.emailVerified,phoneNumber:a.phoneNumber,isAnonymous:a.isAnonymous,tenantId:a.tenantId,providerData:[]}),a.metadata?re(o,"metadata",S2(a.metadata)):re(o,"metadata",new hh),Ye(a.providerData,function(f){Am(o,f)}),T2(o.h,a.h),re(o,"refreshToken",o.h.a),fh(o.S,a.S.b))}e=zn.prototype,e.reload=function(){var o=this;return At(this,Sm(this).then(function(){return km(o).then(function(){return is(o)}).then(dS)}))};function km(o){return o.I().then(function(a){var f=o.isAnonymous;return N2(o,a).then(function(){return f||ro(o,"isAnonymous",!1),a})})}e.oc=function(o){return this.I(o).then(function(a){return new y2(a)})},e.I=function(o){var a=this;return At(this,Sm(this).then(function(){return a.h.getToken(o)}).then(function(f){if(!f)throw new k("internal-error");return f.accessToken!=a.Aa&&(Im(a,f.accessToken),a.dispatchEvent(new Ia("tokenChanged"))),ro(a,"refreshToken",f.refreshToken),f.accessToken}))};function Zr(o,a){a[Or]&&o.Aa!=a[Or]&&(lS(o.h,a),o.dispatchEvent(new Ia("tokenChanged")),Im(o,a[Or]),ro(o,"refreshToken",o.h.a))}function N2(o,a){return Pe(o.a,lF,{idToken:a}).then(V(o.Kc,o))}e.Kc=function(o){if(o=o.users,!o||!o.length)throw new k("internal-error");o=o[0],hS(this,{uid:o.localId,displayName:o.displayName,photoURL:o.photoUrl,email:o.email,emailVerified:!!o.emailVerified,phoneNumber:o.phoneNumber,lastLoginAt:o.lastLoginAt,createdAt:o.createdAt,tenantId:o.tenantId});for(var a=R2(o),f=0;f<a.length;f++)Am(this,a[f]);ro(this,"isAnonymous",!(this.email&&o.passwordHash)&&!(this.providerData&&this.providerData.length)),this.dispatchEvent(new Ia("userReloaded",{hd:o}))};function R2(o){return(o=o.providerUserInfo)&&o.length?Qi(o,function(a){return new C2(a.rawId,a.providerId,a.email,a.displayName,a.photoUrl,a.phoneNumber)}):[]}e.Lc=function(o){return Xv("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.ub(o)},e.ub=function(o){var a=this,f=null;return At(this,o.c(this.a,this.uid).then(function(d){return Zr(a,d),f=Ic(a,d,"reauthenticate"),a.i=null,a.reload()}).then(function(){return f}),!0)};function ph(o,a){return km(o).then(function(){if(D(Cm(o),a))return is(o).then(function(){throw new k("provider-already-linked")})})}e.Cc=function(o){return Xv("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.rb(o)},e.rb=function(o){var a=this,f=null;return At(this,ph(this,o.providerId).then(function(){return a.I()}).then(function(d){return o.b(a.a,d)}).then(function(d){return f=Ic(a,d,"link"),vS(a,d)}).then(function(){return f}))},e.Dc=function(o,a){var f=this;return At(this,ph(this,"phone").then(function(){return lm(Em(f),o,a,V(f.rb,f))}))},e.Mc=function(o,a){var f=this;return At(this,le().then(function(){return lm(Em(f),o,a,V(f.ub,f))}),!0)};function Ic(o,a,f){var d=gg(a);return a=OT(a),Xr({user:o,credential:d,additionalUserInfo:a,operationType:f})}function vS(o,a){return Zr(o,a),o.reload().then(function(){return o})}e.Cb=function(o){var a=this;return At(this,this.I().then(function(f){return a.a.Cb(f,o)}).then(function(f){return Zr(a,f),a.reload()}))},e.ed=function(o){var a=this;return At(this,this.I().then(function(f){return o.b(a.a,f)}).then(function(f){return Zr(a,f),a.reload()}))},e.Db=function(o){var a=this;return At(this,this.I().then(function(f){return a.a.Db(f,o)}).then(function(f){return Zr(a,f),a.reload()}))},e.Eb=function(o){if(o.displayName===void 0&&o.photoURL===void 0)return Sm(this);var a=this;return At(this,this.I().then(function(f){return a.a.Eb(f,{displayName:o.displayName,photoUrl:o.photoURL})}).then(function(f){return Zr(a,f),ro(a,"displayName",f.displayName||null),ro(a,"photoURL",f.photoUrl||null),Ye(a.providerData,function(d){d.providerId==="password"&&(re(d,"displayName",a.displayName),re(d,"photoURL",a.photoURL))}),is(a)}).then(dS))},e.cd=function(o){var a=this;return At(this,km(this).then(function(f){return D(Cm(a),o)?ZM(a.a,f,[o]).then(function(d){var v={};return Ye(d.providerUserInfo||[],function(y){v[y.providerId]=!0}),Ye(Cm(a),function(y){v[y]||pS(a,y)}),v[Ei.PROVIDER_ID]||re(a,"phoneNumber",null),is(a)}):is(a).then(function(){throw new k("no-such-provider")})}))},e.delete=function(){var o=this;return At(this,this.I().then(function(a){return Pe(o.a,iF,{idToken:a})}).then(function(){o.dispatchEvent(new Ia("userDeleted"))})).then(function(){for(var a=0;a<o.N.length;a++)o.N[a].cancel("app-deleted");_m(o,null),wm(o,null),bm(o,null),o.N=[],o.J=!0,Tm(o),re(o,"refreshToken",null),o.b&&om(o.b,o)})},e.Gb=function(o,a){return!!(o=="linkViaPopup"&&(this.g||null)==a&&this.f||o=="reauthViaPopup"&&(this.g||null)==a&&this.f||o=="linkViaRedirect"&&(this.ga||null)==a||o=="reauthViaRedirect"&&(this.ga||null)==a)},e.na=function(o,a,f,d){o!="linkViaPopup"&&o!="reauthViaPopup"||d!=(this.g||null)||(f&&this.C?this.C(f):a&&!f&&this.f&&this.f(a),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},e.Fa=function(o,a){return o=="linkViaPopup"&&a==(this.g||null)?V(this.Lb,this):o=="reauthViaPopup"&&a==(this.g||null)?V(this.Mb,this):o=="linkViaRedirect"&&(this.ga||null)==a?V(this.Lb,this):o=="reauthViaRedirect"&&(this.ga||null)==a?V(this.Mb,this):null},e.Ec=function(o){var a=this;return gS(this,"linkViaPopup",o,function(){return ph(a,o.providerId).then(function(){return is(a)})},!1)},e.Nc=function(o){return gS(this,"reauthViaPopup",o,function(){return le()},!0)};function gS(o,a,f,d,v){if(!$o())return nt(new k("operation-not-supported-in-this-environment"));if(o.i&&!v)return nt(o.i);var y=lg(f.providerId),w=zo(o.uid+":::"),T=null;(!ec()||$v())&&o.s&&f.isOAuthProvider&&(T=mc(o.s,o.l,o.m,a,f,null,w,oe.SDK_VERSION||null,null,null,o.tenantId,o.u));var L=oT(T,y&&y.va,y&&y.ua);return d=d().then(function(){if(yS(o),!v)return o.I().then(function(){})}).then(function(){return YI(o.b,L,a,f,w,!!T,o.tenantId)}).then(function(){return new Oe(function(j,me){o.na(a,null,new k("cancelled-popup-request"),o.g||null),o.f=j,o.C=me,o.g=w,o.c=JI(o.b,o,a,L,w)})}).then(function(j){return L&&Go(L),j?Xr(j):null}).o(function(j){throw L&&Go(L),j}),At(o,d,v)}e.Fc=function(o){var a=this;return mS(this,"linkViaRedirect",o,function(){return ph(a,o.providerId)},!1)},e.Oc=function(o){return mS(this,"reauthViaRedirect",o,function(){return le()},!0)};function mS(o,a,f,d,v){if(!$o())return nt(new k("operation-not-supported-in-this-environment"));if(o.i&&!v)return nt(o.i);var y=null,w=zo(o.uid+":::");return d=d().then(function(){if(yS(o),!v)return o.I().then(function(){})}).then(function(){return o.ga=w,is(o)}).then(function(T){return o.ha&&(T=o.ha,T=T.b.set(Nm,o.w(),T.a)),T}).then(function(){return XI(o.b,a,f,w,o.tenantId)}).o(function(T){if(y=T,o.ha)return wS(o.ha);throw y}).then(function(){if(y)throw y}),At(o,d,v)}function yS(o){if(!o.b||!o.P)throw o.b&&!o.P?new k("internal-error"):new k("auth-domain-config-required")}e.Lb=function(o,a,f,d){var v=this;this.c&&(this.c.cancel(),this.c=null);var y=null;return f=this.I().then(function(w){return Fg(v.a,{requestUri:o,postBody:d,sessionId:a,idToken:w})}).then(function(w){return y=Ic(v,w,"link"),vS(v,w)}).then(function(){return y}),At(this,f)},e.Mb=function(o,a,f,d){var v=this;this.c&&(this.c.cancel(),this.c=null);var y=null,w=le().then(function(){return ya(Ug(v.a,{requestUri:o,sessionId:a,postBody:d,tenantId:f}),v.uid)}).then(function(T){return y=Ic(v,T,"reauthenticate"),Zr(v,T),v.i=null,v.reload()}).then(function(){return y});return At(this,w,!0)},e.vb=function(o){var a=this,f=null;return At(this,this.I().then(function(d){return f=d,typeof o>"u"||$r(o)?{}:Lf(new xf(o))}).then(function(d){return a.a.vb(f,d)}).then(function(d){if(a.email!=d)return a.reload()}).then(function(){}))},e.Fb=function(o,a){var f=this,d=null;return At(this,this.I().then(function(v){return d=v,typeof a>"u"||$r(a)?{}:Lf(new xf(a))}).then(function(v){return f.a.Fb(d,o,v)}).then(function(v){if(f.email!=v)return f.reload()}).then(function(){}))};function At(o,a,f){var d=O2(o,a,f);return o.N.push(d),d.oa(function(){U(o.N,d)}),d.o(function(v){var y=null;throw v&&v.code==="auth/multi-factor-auth-required"&&(y=sS(v.w(),Em(o),V(o.jc,o))),y||v})}e.jc=function(o){var a=null,f=this;return o=ya(le(o),f.uid).then(function(d){return a=Ic(f,d,"reauthenticate"),Zr(f,d),f.i=null,f.reload()}).then(function(){return a}),At(this,o,!0)};function O2(o,a,f){return o.i&&!f?(a.cancel(),nt(o.i)):a.o(function(d){throw!d||d.code!="auth/user-disabled"&&d.code!="auth/user-token-expired"||(o.i||o.dispatchEvent(new Ia("userInvalidated")),o.i=d),d})}e.toJSON=function(){return this.w()},e.w=function(){var o={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.h.w(),redirectEventId:this.ga||null};return this.metadata&&Wt(o,this.metadata.w()),Ye(this.providerData,function(a){o.providerData.push(nM(a))}),Wt(o,this.S.w()),o};function _S(o){if(!o.apiKey)return null;var a={apiKey:o.apiKey,authDomain:o.authDomain,appName:o.appName,emulatorConfig:o.emulatorConfig},f={};if(o.stsTokenManager&&o.stsTokenManager.accessToken){f[Or]=o.stsTokenManager.accessToken,f.refreshToken=o.stsTokenManager.refreshToken||null;var d=o.stsTokenManager.expirationTime;d&&(f.expiresIn=(d-Date.now())/1e3)}else return null;var v=new zn(a,f,o);return o.providerData&&Ye(o.providerData,function(y){y&&Am(v,Xr(y))}),o.redirectEventId&&(v.ga=o.redirectEventId),v}function P2(o,a,f,d){var v=new zn(o,a);return f&&(v.ha=f),d&&Ec(v,d),v.reload().then(function(){return v})}function D2(o,a,f,d){var v=o.h,y={};return y[Or]=v.b&&v.b.toString(),y.refreshToken=v.a,a=new zn(a||{apiKey:o.l,authDomain:o.s,appName:o.m},y),f&&(a.ha=f),d&&Ec(a,d),dh(a,o),a}function x2(o){this.a=o,this.b=bc()}var Nm={name:"redirectUser",F:"session"};function wS(o){return Ta(o.b,Nm,o.a)}function L2(o,a){return o.b.get(Nm,o.a).then(function(f){return f&&a&&(f.authDomain=a),_S(f||{})})}function Rm(o){this.a=o,this.b=bc(),this.c=null,this.f=M2(this),this.b.addListener(ei("local"),this.a,V(this.g,this))}Rm.prototype.g=function(){var o=this,a=ei("local");Sa(this,function(){return le().then(function(){return o.c&&o.c.F!="local"?o.b.get(a,o.a):null}).then(function(f){if(f)return Om(o,"local").then(function(){o.c=a})})})};function Om(o,a){var f=[],d;for(d in ba)ba[d]!==a&&f.push(Ta(o.b,ei(ba[d]),o.a));return f.push(Ta(o.b,Pm,o.a)),SL(f)}function M2(o){var a=ei("local"),f=ei("session"),d=ei("none");return XF(o.b,a,o.a).then(function(){return o.b.get(f,o.a)}).then(function(v){return v?f:o.b.get(d,o.a).then(function(y){return y?d:o.b.get(a,o.a).then(function(w){return w?a:o.b.get(Pm,o.a).then(function(T){return T?ei(T):a})})})}).then(function(v){return o.c=v,Om(o,v.F)}).o(function(){o.c||(o.c=a)})}var Pm={name:"persistence",F:"session"};function ei(o){return{name:"authUser",F:o}}Rm.prototype.yb=function(o){var a=null,f=this;return YF(o),Sa(this,function(){return o!=f.c.F?f.b.get(f.c,f.a).then(function(d){return a=d,Om(f,o)}).then(function(){if(f.c=ei(o),a)return f.b.set(f.c,a,f.a)}):le()})};function F2(o){return Sa(o,function(){return o.b.set(Pm,o.c.F,o.a)})}function bS(o,a){return Sa(o,function(){return o.b.set(o.c,a.w(),o.a)})}function ES(o){return Sa(o,function(){return Ta(o.b,o.c,o.a)})}function TS(o,a,f){return Sa(o,function(){return o.b.get(o.c,o.a).then(function(d){return d&&a&&(d.authDomain=a),d&&f&&(d.emulatorConfig=f),_S(d||{})})})}function Sa(o,a){return o.f=o.f.then(a,a),o.f}function Pr(o){if(this.l=!1,re(this,"settings",new rS),re(this,"app",o),$e(this).options&&$e(this).options.apiKey)o=oe.SDK_VERSION?pa(oe.SDK_VERSION):null,this.a=new Rr($e(this).options&&$e(this).options.apiKey,vt(gt),o);else throw new k("invalid-api-key");this.P=[],this.s=[],this.N=[],this.Pa=oe.INTERNAL.createSubscribe(V(this.zc,this)),this.W=void 0,this.ib=oe.INTERNAL.createSubscribe(V(this.Ac,this)),Ca(this,null),this.i=new Rm($e(this).options.apiKey+":"+$e(this).name),this.D=new x2($e(this).options.apiKey+":"+$e(this).name),this.$=ht(this,K2(this)),this.h=ht(this,H2(this)),this.ba=!1,this.ja=V(this.Zc,this),this.Ba=V(this.da,this),this.qa=V(this.mc,this),this.za=V(this.wc,this),this.Aa=V(this.xc,this),this.b=null,V2(this),this.INTERNAL={},this.INTERNAL.delete=V(this.delete,this),this.INTERNAL.logFramework=V(this.Gc,this),this.u=0,mn.call(this),j2(this),this.J=[],this.R=null}M(Pr,mn);function IS(o){Pn.call(this,"languageCodeChanged"),this.h=o}M(IS,Pn);function SS(o){Pn.call(this,"emulatorConfigChanged"),this.c=o}M(SS,Pn);function CS(o){Pn.call(this,"frameworkChanged"),this.f=o}M(CS,Pn),e=Pr.prototype,e.yb=function(o){return o=this.i.yb(o),ht(this,o)},e.xa=function(o){this.aa===o||this.l||(this.aa=o,sI(this.a,this.aa),this.dispatchEvent(new IS(this.la())))},e.la=function(){return this.aa},e.fd=function(){var o=l.navigator;this.xa(o&&(o.languages&&o.languages[0]||o.language||o.userLanguage)||null)},e.gd=function(o,a){if(!this.R){if(!/^https?:\/\//.test(o))throw new k("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");a=a?!!a.disableWarnings:!1,U2(a),this.R={url:o,ec:a},this.settings.jb=!0,eh(this.a,this.R),this.dispatchEvent(new SS(this.R))}};function U2(o){typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),l.document&&!o&&Of().then(function(){var a=l.document.createElement("div");a.innerText="Running in emulator mode. Do not use with production credentials.",a.style.position="fixed",a.style.width="100%",a.style.backgroundColor="#ffffff",a.style.border=".1em solid #000000",a.style.color="#b50000",a.style.bottom="0px",a.style.left="0px",a.style.margin="0px",a.style.zIndex=1e4,a.style.textAlign="center",a.classList.add("firebase-emulator-warning"),l.document.body.appendChild(a)})}e.Gc=function(o){this.J.push(o),aI(this.a,oe.SDK_VERSION?pa(oe.SDK_VERSION,this.J):null),this.dispatchEvent(new CS(this.J))},e.Ga=function(){return X(this.J)},e.zb=function(o){this.S===o||this.l||(this.S=o,this.a.b=this.S)},e.T=function(){return this.S};function j2(o){Object.defineProperty(o,"lc",{get:function(){return this.la()},set:function(a){this.xa(a)},enumerable:!1}),o.aa=null,Object.defineProperty(o,"ti",{get:function(){return this.T()},set:function(a){this.zb(a)},enumerable:!1}),o.S=null,Object.defineProperty(o,"emulatorConfig",{get:function(){if(this.R){var a=Dn(this.R.url);a=Xr({protocol:a.c,host:a.a,port:a.g,options:Xr({disableWarnings:this.R.ec})})}else a=null;return a},enumerable:!1})}e.toJSON=function(){return{apiKey:$e(this).options.apiKey,authDomain:$e(this).options.authDomain,appName:$e(this).name,currentUser:be(this)&&be(this).w()}};function Dm(o){return o.Oa||nt(new k("auth-domain-config-required"))}function V2(o){var a=$e(o).options.authDomain,f=$e(o).options.apiKey;a&&$o()&&(o.Oa=o.$.then(function(){if(!o.l){if(o.b=um(a,f,$e(o).name,o.R),uh(o.b,o),be(o)&&Tc(be(o)),o.m){Tc(o.m);var d=o.m;d.xa(o.la()),_m(d,o),d=o.m,Ec(d,o.J),bm(d,o),d=o.m,ym(d,o.R),wm(d,o),o.m=null}return o.b}}))}e.Gb=function(o,a){switch(o){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==a&&!!this.f;default:return!1}},e.na=function(o,a,f,d){o=="signInViaPopup"&&this.g==d&&(f&&this.C?this.C(f):a&&!f&&this.f&&this.f(a),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},e.Fa=function(o,a){return o=="signInViaRedirect"||o=="signInViaPopup"&&this.g==a&&this.f?V(this.ic,this):null},e.ic=function(o,a,f,d){var v=this,y={requestUri:o,postBody:d,sessionId:a,tenantId:f};return this.c&&(this.c.cancel(),this.c=null),v.$.then(function(){return os(v,Mg(v.a,y))})},e.Xc=function(o){if(!$o())return nt(new k("operation-not-supported-in-this-environment"));var a=this,f=lg(o.providerId),d=zo(),v=null;(!ec()||$v())&&$e(this).options.authDomain&&o.isOAuthProvider&&(v=mc($e(this).options.authDomain,$e(this).options.apiKey,$e(this).name,"signInViaPopup",o,null,d,oe.SDK_VERSION||null,null,null,this.T(),this.R));var y=oT(v,f&&f.va,f&&f.ua);return f=Dm(this).then(function(w){return YI(w,y,"signInViaPopup",o,d,!!v,a.T())}).then(function(){return new Oe(function(w,T){a.na("signInViaPopup",null,new k("cancelled-popup-request"),a.g),a.f=w,a.C=T,a.g=d,a.c=JI(a.b,a,"signInViaPopup",y,d)})}).then(function(w){return y&&Go(y),w?Xr(w):null}).o(function(w){throw y&&Go(y),w}),ht(this,f)},e.Yc=function(o){if(!$o())return nt(new k("operation-not-supported-in-this-environment"));var a=this,f=Dm(this).then(function(){return F2(a.i)}).then(function(){return XI(a.b,"signInViaRedirect",o,void 0,a.T())});return ht(this,f)};function AS(o){if(!$o())return nt(new k("operation-not-supported-in-this-environment"));var a=Dm(o).then(function(){return o.b.ra()}).then(function(f){return f?Xr(f):null});return ht(o,a)}e.ra=function(){var o=this;return AS(this).then(function(a){return o.b&&lh(o.b.b),a}).o(function(a){throw o.b&&lh(o.b.b),a})},e.dd=function(o){if(!o)return nt(new k("null-user"));if(this.S!=o.tenantId)return nt(new k("tenant-id-mismatch"));var a=this,f={};f.apiKey=$e(this).options.apiKey,f.authDomain=$e(this).options.authDomain,f.appName=$e(this).name;var d=D2(o,f,a.D,a.Ga());return ht(this,this.h.then(function(){if($e(a).options.apiKey!=o.l)return d.reload()}).then(function(){return be(a)&&o.uid==be(a).uid?(dh(be(a),o),a.da(o)):(Ca(a,d),Tc(d),a.da(d))}).then(function(){Sc(a)}))};function B2(o,a){var f={};return f.apiKey=$e(o).options.apiKey,f.authDomain=$e(o).options.authDomain,f.appName=$e(o).name,o.R&&(f.emulatorConfig=o.R),o.$.then(function(){return P2(f,a,o.D,o.Ga())}).then(function(d){return be(o)&&d.uid==be(o).uid?(dh(be(o),d),o.da(d)):(Ca(o,d),Tc(d),o.da(d))}).then(function(){Sc(o)})}function Ca(o,a){be(o)&&(k2(be(o),o.Ba),Gn(be(o),"tokenChanged",o.qa),Gn(be(o),"userDeleted",o.za),Gn(be(o),"userInvalidated",o.Aa),Tm(be(o))),a&&(a.W.push(o.Ba),ur(a,"tokenChanged",o.qa),ur(a,"userDeleted",o.za),ur(a,"userInvalidated",o.Aa),0<o.u&&fS(a)),re(o,"currentUser",a),a&&(a.xa(o.la()),_m(a,o),Ec(a,o.J),bm(a,o),ym(a,o.R),wm(a,o))}e.Bb=function(){var o=this,a=this.h.then(function(){return o.b&&lh(o.b.b),be(o)?(Ca(o,null),ES(o.i).then(function(){Sc(o)})):le()});return ht(this,a)};function q2(o){var a=L2(o.D,$e(o).options.authDomain).then(function(f){return(o.m=f)&&(f.ha=o.D),wS(o.D)});return ht(o,a)}function K2(o){var a=$e(o).options.authDomain,f=q2(o).then(function(){return TS(o.i,a,o.R)}).then(function(d){return d?(d.ha=o.D,o.m&&(o.m.ga||null)==(d.ga||null)?d:d.reload().then(function(){return bS(o.i,d).then(function(){return d})}).o(function(v){return v.code=="auth/network-request-failed"?d:ES(o.i)})):null}).then(function(d){Ca(o,d||null)});return ht(o,f)}function H2(o){return o.$.then(function(){return AS(o)}).o(function(){}).then(function(){if(!o.l)return o.ja()}).o(function(){}).then(function(){if(!o.l){o.ba=!0;var a=o.i;a.b.addListener(ei("local"),a.a,o.ja)}})}e.Zc=function(){var o=this;return TS(this.i,$e(this).options.authDomain).then(function(a){if(!o.l){var f;if(f=be(o)&&a){f=be(o).uid;var d=a.uid;f=f==null||f===""||d===void 0||d===null||d===""?!1:f==d}if(f)return dh(be(o),a),be(o).I();(be(o)||a)&&(Ca(o,a),a&&(Tc(a),a.ha=o.D),o.b&&uh(o.b,o),Sc(o))}})},e.da=function(o){return bS(this.i,o)},e.mc=function(){Sc(this),this.da(be(this))},e.wc=function(){this.Bb()},e.xc=function(){this.Bb()};function os(o,a){var f=null,d=null;return ht(o,a.then(function(v){return f=gg(v),d=OT(v),B2(o,v)},function(v){var y=null;throw v&&v.code==="auth/multi-factor-auth-required"&&(y=sS(v.w(),o,V(o.kc,o))),y||v}).then(function(){return Xr({user:be(o),credential:f,additionalUserInfo:d,operationType:"signIn"})}))}e.kc=function(o){var a=this;return this.h.then(function(){return os(a,le(o))})},e.zc=function(o){var a=this;this.addAuthTokenListener(function(){o.next(be(a))})},e.Ac=function(o){var a=this;W2(this,function(){o.next(be(a))})},e.Ic=function(o,a,f){var d=this;return this.ba&&Promise.resolve().then(function(){typeof o=="function"?o(be(d)):typeof o.next=="function"&&o.next(be(d))}),this.Pa(o,a,f)},e.Hc=function(o,a,f){var d=this;return this.ba&&Promise.resolve().then(function(){d.W=d.getUid(),typeof o=="function"?o(be(d)):typeof o.next=="function"&&o.next(be(d))}),this.ib(o,a,f)},e.nc=function(o){var a=this,f=this.h.then(function(){return be(a)?be(a).I(o).then(function(d){return{accessToken:d}}):null});return ht(this,f)},e.Tc=function(o){var a=this;return this.h.then(function(){return os(a,Pe(a.a,SF,{token:o}))}).then(function(f){var d=f.user;return ro(d,"isAnonymous",!1),a.da(d),f})},e.Uc=function(o,a){var f=this;return this.h.then(function(){return os(f,Pe(f.a,gI,{email:o,password:a}))})},e.dc=function(o,a){var f=this;return this.h.then(function(){return os(f,Pe(f.a,nF,{email:o,password:a}))})},e.ab=function(o){var a=this;return this.h.then(function(){return os(a,o.ka(a.a))})},e.Sc=function(o){return Xv("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.ab(o)},e.Ab=function(){var o=this;return this.h.then(function(){var a=be(o);if(a&&a.isAnonymous){var f=Xr({providerId:null,isNewUser:!1});return Xr({user:a,credential:null,additionalUserInfo:f,operationType:"signIn"})}return os(o,o.a.Ab()).then(function(d){var v=d.user;return ro(v,"isAnonymous",!0),o.da(v),d})})};function $e(o){return o.app}function be(o){return o.currentUser}e.getUid=function(){return be(this)&&be(this).uid||null};function vh(o){return be(o)&&be(o)._lat||null}function Sc(o){if(o.ba){for(var a=0;a<o.s.length;a++)o.s[a]&&o.s[a](vh(o));if(o.W!==o.getUid()&&o.N.length)for(o.W=o.getUid(),a=0;a<o.N.length;a++)o.N[a]&&o.N[a](vh(o))}}e.cc=function(o){this.addAuthTokenListener(o),this.u++,0<this.u&&be(this)&&fS(be(this))},e.Pc=function(o){var a=this;Ye(this.s,function(f){f==o&&a.u--}),0>this.u&&(this.u=0),this.u==0&&be(this)&&Tm(be(this)),this.removeAuthTokenListener(o)},e.addAuthTokenListener=function(o){var a=this;this.s.push(o),ht(this,this.h.then(function(){a.l||D(a.s,o)&&o(vh(a))}))},e.removeAuthTokenListener=function(o){F(this.s,function(a){return a==o})};function W2(o,a){o.N.push(a),ht(o,o.h.then(function(){!o.l&&D(o.N,a)&&o.W!==o.getUid()&&(o.W=o.getUid(),a(vh(o)))}))}e.delete=function(){this.l=!0;for(var o=0;o<this.P.length;o++)this.P[o].cancel("app-deleted");return this.P=[],this.i&&(o=this.i,o.b.removeListener(ei("local"),o.a,this.ja)),this.b&&(om(this.b,this),lh(this.b.b)),Promise.resolve()};function ht(o,a){return o.P.push(a),a.oa(function(){U(o.P,a)}),a}e.hc=function(o){return ht(this,$M(this.a,o))},e.Bc=function(o){return!!vg(o)},e.xb=function(o,a){var f=this;return ht(this,le().then(function(){var d=new xf(a);if(!d.c)throw new k("argument-error",ug+" must be true when sending sign in link to email");return Lf(d)}).then(function(d){return f.a.xb(o,d)}).then(function(){}))},e.jd=function(o){return this.Sa(o).then(function(a){return a.data.email})},e.ob=function(o,a){return ht(this,this.a.ob(o,a).then(function(){}))},e.Sa=function(o){return ht(this,this.a.Sa(o).then(function(a){return new iM(a)}))},e.kb=function(o){return ht(this,this.a.kb(o).then(function(){}))},e.wb=function(o,a){var f=this;return ht(this,le().then(function(){return typeof a>"u"||$r(a)?{}:Lf(new xf(a))}).then(function(d){return f.a.wb(o,d)}).then(function(){}))},e.Wc=function(o,a){return ht(this,lm(this,o,a,V(this.ab,this)))},e.Vc=function(o,a){var f=this;return ht(this,le().then(function(){var d=a||Zu(),v=KT(o,d);if(d=vg(d),!d)throw new k("argument-error","Invalid email link!");if(d.tenantId!==f.T())throw new k("tenant-id-mismatch");return f.ab(v)}))};function Cc(){}Cc.prototype.render=function(){},Cc.prototype.reset=function(){},Cc.prototype.getResponse=function(){},Cc.prototype.execute=function(){};function Aa(){this.a={},this.b=1e12}var xm=null;Aa.prototype.render=function(o,a){return this.a[this.b.toString()]=new gh(o,a),this.b++},Aa.prototype.reset=function(o){var a=Lm(this,o);o=kS(o),a&&o&&(a.delete(),delete this.a[o])},Aa.prototype.getResponse=function(o){return(o=Lm(this,o))?o.getResponse():null},Aa.prototype.execute=function(o){(o=Lm(this,o))&&o.execute()};function Lm(o,a){return(a=kS(a))&&o.a[a]||null}function kS(o){return(o=typeof o>"u"?1e12:o)?o.toString():null}function gh(o,a){this.g=!1,this.c=a,this.a=this.b=null,this.h=this.c.size!=="invisible",this.f=Gu(o);var f=this;this.i=function(){f.execute()},this.h?this.execute():ur(this.f,"click",this.i)}gh.prototype.getResponse=function(){return Mm(this),this.b},gh.prototype.execute=function(){Mm(this);var o=this;this.a||(this.a=setTimeout(function(){o.b=JL();var a=o.c.callback,f=o.c["expired-callback"];if(a)try{a(o.b)}catch{}o.a=setTimeout(function(){if(o.a=null,o.b=null,f)try{f()}catch{}o.h&&o.execute()},6e4)},500))},gh.prototype.delete=function(){Mm(this),this.g=!0,clearTimeout(this.a),this.a=null,Gn(this.f,"click",this.i)};function Mm(o){if(o.g)throw Error("reCAPTCHA mock was already deleted!")}function Fm(){}re(Fm,"FACTOR_ID","phone");function Um(){}Um.prototype.g=function(){return xm||(xm=new Aa),le(xm)},Um.prototype.c=function(){};var jm=null;function Vm(){this.b=l.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var G2=new zr(yf,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),$2=new eo(3e4,6e4);Vm.prototype.g=function(o){var a=this;return new Oe(function(f,d){var v=setTimeout(function(){d(new k("network-request-failed"))},$2.get());if(!l.grecaptcha||o!==a.f&&!a.b){l[a.a]=function(){if(l.grecaptcha){a.f=o;var w=l.grecaptcha.render;l.grecaptcha.render=function(T,L){return T=w(T,L),a.b++,T},clearTimeout(v),f(l.grecaptcha)}else clearTimeout(v),d(new k("internal-error"));delete l[a.a]};var y=bv(G2,{onload:a.a,hl:o||""});le(Ng(y)).o(function(){clearTimeout(v),d(new k("internal-error","Unable to load external reCAPTCHA dependencies!"))})}else clearTimeout(v),f(l.grecaptcha)})},Vm.prototype.c=function(){this.b--};var Bm=null;function qm(o,a,f,d,v,y,w){if(re(this,"type","recaptcha"),this.c=this.f=null,this.J=!1,this.v=a,this.g=null,w?(jm||(jm=new Um),w=jm):(Bm||(Bm=new Vm),w=Bm),this.m=w,this.a=f||{theme:"light",type:"image"},this.h=[],this.a[OS])throw new k("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i=this.a[z2]==="invisible",!l.document)throw new k("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!Gu(a)||!this.i&&Gu(a).hasChildNodes())throw new k("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Rr(o,y||null,v||null),this.u=d||function(){return null};var T=this;this.l=[];var L=this.a[NS];this.a[NS]=function(me){if(PS(T,me),typeof L=="function")L(me);else if(typeof L=="string"){var He=rt(L,l);typeof He=="function"&&He(me)}};var j=this.a[RS];this.a[RS]=function(){if(PS(T,null),typeof j=="function")j();else if(typeof j=="string"){var me=rt(j,l);typeof me=="function"&&me()}}}var NS="callback",RS="expired-callback",OS="sitekey",z2="size";function PS(o,a){for(var f=0;f<o.l.length;f++)try{o.l[f](a)}catch{}}function Q2(o,a){F(o.l,function(f){return f==a})}function Km(o,a){return o.h.push(a),a.oa(function(){U(o.h,a)}),a}e=qm.prototype,e.Ia=function(){var o=this;return this.f?this.f:this.f=Km(this,le().then(function(){if(Pf()&&!kr())return Of();throw new k("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return o.m.g(o.u())}).then(function(a){return o.g=a,Pe(o.s,gF,{})}).then(function(a){o.a[OS]=a.recaptchaSiteKey}).o(function(a){throw o.f=null,a}))},e.render=function(){mh(this);var o=this;return Km(this,this.Ia().then(function(){if(o.c===null){var a=o.v;if(!o.i){var f=Gu(a);a=bL("DIV"),f.appendChild(a)}o.c=o.g.render(a,o.a)}return o.c}))},e.verify=function(){mh(this);var o=this;return Km(this,this.render().then(function(a){return new Oe(function(f){var d=o.g.getResponse(a);if(d)f(d);else{var v=function(y){y&&(Q2(o,v),f(y))};o.l.push(v),o.i&&o.g.execute(o.c)}})}))},e.reset=function(){mh(this),this.c!==null&&this.g.reset(this.c)};function mh(o){if(o.J)throw new k("internal-error","RecaptchaVerifier instance has been destroyed.")}e.clear=function(){mh(this),this.J=!0,this.m.c();for(var o=0;o<this.h.length;o++)this.h[o].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){o=Gu(this.v);for(var a;a=o.firstChild;)o.removeChild(a)}};function Hm(o,a,f){var d=!1;try{this.b=f||oe.app()}catch{throw new k("argument-error","No firebase.app.App instance is currently initialized.")}if(this.b.options&&this.b.options.apiKey)f=this.b.options.apiKey;else throw new k("invalid-api-key");var v=this,y=null;try{y=this.b.auth().Ga()}catch{}try{d=this.b.auth().settings.appVerificationDisabledForTesting}catch{}y=oe.SDK_VERSION?pa(oe.SDK_VERSION,y):null,qm.call(this,f,o,a,function(){try{var w=v.b.auth().la()}catch{w=null}return w},y,vt(gt),d)}M(Hm,qm);function DS(o,a,f,d){e:{f=Array.prototype.slice.call(f);for(var v=0,y=!1,w=0;w<a.length;w++)if(a[w].optional)y=!0;else{if(y)throw new k("internal-error","Argument validator encountered a required argument after an optional argument.");v++}if(y=a.length,f.length<v||y<f.length)d="Expected "+(v==y?v==1?"1 argument":v+" arguments":v+"-"+y+" arguments")+" but got "+f.length+".";else{for(v=0;v<f.length;v++)if(y=a[v].optional&&f[v]===void 0,!a[v].M(f[v])&&!y){if(a=a[v],0>v||v>=xS.length)throw new k("internal-error","Argument validator received an unsupported number of arguments.");f=xS[v],d=(d?"":f+" argument ")+(a.name?'"'+a.name+'" ':"")+"must be "+a.K+".";break e}d=null}}if(d)throw new k("argument-error",o+" failed: "+d)}var xS="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function te(o,a){return{name:o||"",K:"a valid string",optional:!!a,M:function(f){return typeof f=="string"}}}function Wm(o,a){return{name:o||"",K:"a boolean",optional:!!a,M:function(f){return typeof f=="boolean"}}}function bt(o,a){return{name:o||"",K:"a valid object",optional:!!a,M:I}}function ka(o,a){return{name:o||"",K:"a function",optional:!!a,M:function(f){return typeof f=="function"}}}function ti(o,a){return{name:o||"",K:"null",optional:!!a,M:function(f){return f===null}}}function Y2(){return{name:"",K:"an HTML element",optional:!1,M:function(o){return!!(o&&o instanceof Element)}}}function X2(){return{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(o){return!!(o&&o instanceof Pr)}}}function J2(){return{name:"app",K:"an instance of Firebase App",optional:!0,M:function(o){return!!(o&&o instanceof oe.app.App)}}}function io(o){return{name:o?o+"Credential":"credential",K:o?"a valid "+o+" credential":"a valid credential",optional:!1,M:function(a){if(!a)return!1;var f=!o||a.providerId===o;return!(!a.ka||!f)}}}function LS(){return{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(o){return o?!!o.tb:!1}}}function Na(){return{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(o){return!!(o&&o.providerId&&o.hasOwnProperty&&o.hasOwnProperty("isOAuthProvider"))}}}function Gm(o,a){return I(o)&&typeof o.type=="string"&&o.type===a&&typeof o.Ha=="function"}function MS(o){return I(o)&&typeof o.uid=="string"}function yh(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(o){return!(!o||typeof o.type!="string"||typeof o.verify!="function")}}}function yt(o,a,f,d){return{name:f||"",K:o.K+" or "+a.K,optional:!!d,M:function(v){return o.M(v)||a.M(v)}}}function at(o,a){for(var f in a){var d=a[f].name;o[d]=US(d,o[f],a[f].j)}}function FS(o,a){for(var f in a){var d=a[f].name;d!==f&&Object.defineProperty(o,d,{get:ne(function(v){return this[v]},f),set:ne(function(v,y,w,T){DS(v,[w],[T],!0),this[y]=T},d,f,a[f].lb),enumerable:!0})}}function _t(o,a,f,d){o[a]=US(a,f,d)}function US(o,a,f){function d(){var w=Array.prototype.slice.call(arguments);return DS(v,f,w),a.apply(this,w)}if(!f)return a;var v=Z2(o),y;for(y in a)d[y]=a[y];for(y in a.prototype)d.prototype[y]=a.prototype[y];return d}function Z2(o){return o=o.split("."),o[o.length-1]}at(Pr.prototype,{kb:{name:"applyActionCode",j:[te("code")]},Sa:{name:"checkActionCode",j:[te("code")]},ob:{name:"confirmPasswordReset",j:[te("code"),te("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[te("email"),te("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[te("email")]},ra:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[te("emailLink")]},Hc:{name:"onAuthStateChanged",j:[yt(bt(),ka(),"nextOrObserver"),ka("opt_error",!0),ka("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[yt(bt(),ka(),"nextOrObserver"),ka("opt_error",!0),ka("opt_completed",!0)]},wb:{name:"sendPasswordResetEmail",j:[te("email"),yt(bt("opt_actionCodeSettings",!0),ti(null,!0),"opt_actionCodeSettings",!0)]},xb:{name:"sendSignInLinkToEmail",j:[te("email"),bt("actionCodeSettings")]},yb:{name:"setPersistence",j:[te("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[io()]},Ab:{name:"signInAnonymously",j:[]},ab:{name:"signInWithCredential",j:[io()]},Tc:{name:"signInWithCustomToken",j:[te("token")]},Uc:{name:"signInWithEmailAndPassword",j:[te("email"),te("password")]},Vc:{name:"signInWithEmailLink",j:[te("email"),te("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[te("phoneNumber"),yh()]},Xc:{name:"signInWithPopup",j:[Na()]},Yc:{name:"signInWithRedirect",j:[Na()]},dd:{name:"updateCurrentUser",j:[yt(function(o){return{name:"user",K:"an instance of Firebase User",optional:!!o,M:function(a){return!!(a&&a instanceof zn)}}}(),ti(),"user")]},Bb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[te(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[te("url"),bt("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[te("code")]}}),FS(Pr.prototype,{lc:{name:"languageCode",lb:yt(te(),ti(),"languageCode")},ti:{name:"tenantId",lb:yt(te(),ti(),"tenantId")}}),Pr.Persistence=ba,Pr.Persistence.LOCAL="local",Pr.Persistence.SESSION="session",Pr.Persistence.NONE="none",at(zn.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Wm("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Wm("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[io()]},rb:{name:"linkWithCredential",j:[io()]},Dc:{name:"linkWithPhoneNumber",j:[te("phoneNumber"),yh()]},Ec:{name:"linkWithPopup",j:[Na()]},Fc:{name:"linkWithRedirect",j:[Na()]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[io()]},ub:{name:"reauthenticateWithCredential",j:[io()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[te("phoneNumber"),yh()]},Nc:{name:"reauthenticateWithPopup",j:[Na()]},Oc:{name:"reauthenticateWithRedirect",j:[Na()]},reload:{name:"reload",j:[]},vb:{name:"sendEmailVerification",j:[yt(bt("opt_actionCodeSettings",!0),ti(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[te(null,!0)]},cd:{name:"unlink",j:[te("provider")]},Cb:{name:"updateEmail",j:[te("email")]},Db:{name:"updatePassword",j:[te("password")]},ed:{name:"updatePhoneNumber",j:[io("phone")]},Eb:{name:"updateProfile",j:[bt("profile")]},Fb:{name:"verifyBeforeUpdateEmail",j:[te("email"),yt(bt("opt_actionCodeSettings",!0),ti(null,!0),"opt_actionCodeSettings",!0)]}}),at(Aa.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),at(Cc.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),at(Oe.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),FS(rS.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",lb:Wm("appVerificationDisabledForTesting")}}),at(cm.prototype,{confirm:{name:"confirm",j:[te("verificationCode")]}}),_t(ma,"fromJSON",function(o){o=typeof o=="string"?JSON.parse(o):o;for(var a,f=[EM,TM,IM,bM],d=0;d<f.length;d++)if(a=f[d](o))return a;return null},[yt(te(),bt(),"json")]),_t(lr,"credential",function(o,a){return new to(o,a)},[te("email"),te("password")]),at(to.prototype,{w:{name:"toJSON",j:[te(null,!0)]}}),at(Xo.prototype,{Ca:{name:"addScope",j:[te("scope")]},Ka:{name:"setCustomParameters",j:[bt("customOAuthParameters")]}}),_t(Xo,"credential",jT,[yt(te(),bt(),"token")]),_t(lr,"credentialWithLink",KT,[te("email"),te("emailLink")]),at(Jo.prototype,{Ca:{name:"addScope",j:[te("scope")]},Ka:{name:"setCustomParameters",j:[bt("customOAuthParameters")]}}),_t(Jo,"credential",VT,[yt(te(),bt(),"token")]),at(Zo.prototype,{Ca:{name:"addScope",j:[te("scope")]},Ka:{name:"setCustomParameters",j:[bt("customOAuthParameters")]}}),_t(Zo,"credential",BT,[yt(te(),yt(bt(),ti()),"idToken"),yt(te(),ti(),"accessToken",!0)]),at(_a.prototype,{Ka:{name:"setCustomParameters",j:[bt("customOAuthParameters")]}}),_t(_a,"credential",qT,[yt(te(),bt(),"token"),te("secret",!0)]),at($n.prototype,{Ca:{name:"addScope",j:[te("scope")]},credential:{name:"credential",j:[yt(te(),yt(bt(),ti()),"optionsOrIdToken"),yt(te(),ti(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[bt("customOAuthParameters")]}}),at(bi.prototype,{w:{name:"toJSON",j:[te(null,!0)]}}),at(Qo.prototype,{w:{name:"toJSON",j:[te(null,!0)]}}),_t(Ei,"credential",HT,[te("verificationId"),te("verificationCode")]),at(Ei.prototype,{gb:{name:"verifyPhoneNumber",j:[yt(te(),function(o,a){return{name:o||"phoneInfoOptions",K:"valid phone info options",optional:!!a,M:function(f){return f?f.session&&f.phoneNumber?Gm(f.session,sc)&&typeof f.phoneNumber=="string":f.session&&f.multiFactorHint?Gm(f.session,Vf)&&MS(f.multiFactorHint):f.session&&f.multiFactorUid?Gm(f.session,Vf)&&typeof f.multiFactorUid=="string":f.phoneNumber?typeof f.phoneNumber=="string":!1:!1}}}(),"phoneInfoOptions"),yh()]}}),at(no.prototype,{w:{name:"toJSON",j:[te(null,!0)]}}),at(k.prototype,{toJSON:{name:"toJSON",j:[te(null,!0)]}}),at(uc.prototype,{toJSON:{name:"toJSON",j:[te(null,!0)]}}),at(_g.prototype,{toJSON:{name:"toJSON",j:[te(null,!0)]}}),at(hm.prototype,{toJSON:{name:"toJSON",j:[te(null,!0)]}}),at(fm.prototype,{Rc:{name:"resolveSignIn",j:[LS()]}}),at(pm.prototype,{Sb:{name:"getSession",j:[]},fc:{name:"enroll",j:[LS(),te("displayName",!0)]},bd:{name:"unenroll",j:[yt({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:MS},te(),"multiFactorInfoIdentifier")]}}),at(Hm.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),_t(ag,"parseLink",bT,[te("link")]),_t(Fm,"assertion",function(o){return new uS(o)},[io("phone")]),function(){if(typeof oe<"u"&&oe.INTERNAL&&oe.INTERNAL.registerComponent){var o={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Df,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:sg,VERIFY_AND_CHANGE_EMAIL:ic,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:Pr,AuthCredential:ma,Error:k};_t(o,"EmailAuthProvider",lr,[]),_t(o,"FacebookAuthProvider",Xo,[]),_t(o,"GithubAuthProvider",Jo,[]),_t(o,"GoogleAuthProvider",Zo,[]),_t(o,"TwitterAuthProvider",_a,[]),_t(o,"OAuthProvider",$n,[te("providerId")]),_t(o,"SAMLAuthProvider",UT,[te("providerId")]),_t(o,"PhoneAuthProvider",Ei,[X2()]),_t(o,"RecaptchaVerifier",Hm,[yt(te(),Y2(),"recaptchaContainer"),bt("recaptchaParameters",!0),J2()]),_t(o,"ActionCodeURL",ag,[]),_t(o,"PhoneMultiFactorGenerator",Fm,[]),oe.INTERNAL.registerComponent({name:"auth",instanceFactory:function(a){return a=a.getProvider("app").getImmediate(),new Pr(a)},multipleInstances:!1,serviceProps:o,instantiationMode:"LAZY",type:"PUBLIC",onInstanceCreated:function(a){a.getProvider("auth-internal").initialize()}}),oe.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(a){return a=a.getProvider("auth").getImmediate(),{getUid:V(a.getUid,a),getToken:V(a.nc,a),addAuthTokenListener:V(a.cc,a),removeAuthTokenListener:V(a.Pc,a)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),oe.registerVersion("@firebase/auth","0.16.8"),oe.INTERNAL.extendNamespace({User:zn})}else throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.")}()}).apply(typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{});var BV="@firebase/database",qV="0.11.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var TR="";function IR(e){TR=e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var KV=function(){function e(t){this.domStorage_=t,this.prefix_="firebase:"}return e.prototype.set=function(t,n){n==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Nt(n))},e.prototype.get=function(t){var n=this.domStorage_.getItem(this.prefixedName_(t));return n==null?null:fl(n)},e.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},e.prototype.prefixedName_=function(t){return this.prefix_+t},e.prototype.toString=function(){return this.domStorage_.toString()},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var HV=function(){function e(){this.cache_={},this.isInMemoryStorage=!0}return e.prototype.set=function(t,n){n==null?delete this.cache_[t]:this.cache_[t]=n},e.prototype.get=function(t){return or(this.cache_,t)?this.cache_[t]:null},e.prototype.remove=function(t){delete this.cache_[t]},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var SR=function(e){try{if(typeof window<"u"&&typeof window[e]<"u"){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new KV(t)}}catch{}return new HV},ws=SR("localStorage"),i_=SR("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ka=new zs("@firebase/database"),CR=function(){var e=1;return function(){return e++}}(),AR=function(e){var t=uV(e),n=new iV;n.update(t);var r=n.digest();return dp.encodeByteArray(r)},jl=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n="",r=0;r<e.length;r++){var i=e[r];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?n+=jl.apply(null,i):typeof i=="object"?n+=Nt(i):n+=i,n+=" "}return n},Ns=null,_C=!0,kR=function(e,t){H(!t||e===!0||e===!1,"Can't turn on custom loggers persistently."),e===!0?(Ka.logLevel=Re.VERBOSE,Ns=Ka.log.bind(Ka),t&&i_.set("logging_enabled",!0)):typeof e=="function"?Ns=e:(Ns=null,i_.remove("logging_enabled"))},Ut=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(_C===!0&&(_C=!1,Ns===null&&i_.get("logging_enabled")===!0&&kR(!0)),Ns){var n=jl.apply(null,e);Ns(n)}},Vl=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];Ut.apply(void 0,Ie([e],Yt(t)))}},o_=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE INTERNAL ERROR: "+jl.apply(void 0,Ie([],Yt(e)));Ka.error(n)},di=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE FATAL ERROR: "+jl.apply(void 0,Ie([],Yt(e)));throw Ka.error(n),new Error(n)},Jt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE WARNING: "+jl.apply(void 0,Ie([],Yt(e)));Ka.warn(n)},WV=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Jt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},vp=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},GV=function(e){if(document.readyState==="complete")e();else{var t=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},ji="[MIN_NAME]",pi="[MAX_NAME]",Qs=function(e,t){if(e===t)return 0;if(e===ji||t===pi)return-1;if(t===ji||e===pi)return 1;var n=ud(e),r=ud(t);return n!==null?r!==null?n-r===0?e.length-t.length:n-r:-1:r!==null?1:e<t?-1:1},$V=function(e,t){return e===t?0:e<t?-1:1},kc=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Nt(t))},Fw=function(e){if(typeof e!="object"||e===null)return Nt(e);var t=[];for(var n in e)t.push(n);t.sort();for(var r="{",i=0;i<t.length;i++)i!==0&&(r+=","),r+=Nt(t[i]),r+=":",r+=Fw(e[t[i]]);return r+="}",r},NR=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function Dt(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var RR=function(e){H(!vp(e),"Invalid JSON number");var t=11,n=52,r=(1<<t-1)-1,i,s,u,c,l;e===0?(s=0,u=0,i=1/e===-1/0?1:0):(i=e<0,e=Math.abs(e),e>=Math.pow(2,1-r)?(c=Math.min(Math.floor(Math.log(e)/Math.LN2),r),s=c+r,u=Math.round(e*Math.pow(2,n-c)-Math.pow(2,n))):(s=0,u=Math.round(e/Math.pow(2,1-r-n))));var h=[];for(l=n;l;l-=1)h.push(u%2?1:0),u=Math.floor(u/2);for(l=t;l;l-=1)h.push(s%2?1:0),s=Math.floor(s/2);h.push(i?1:0),h.reverse();var p=h.join(""),g="";for(l=0;l<64;l+=8){var m=parseInt(p.substr(l,8),2).toString(16);m.length===1&&(m="0"+m),g=g+m}return g.toLowerCase()},zV=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},QV=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function YV(e,t){var n="Unknown Error";e==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":e==="permission_denied"?n="Client doesn't have permission to access the desired data.":e==="unavailable"&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}var XV=new RegExp("^-?(0*)\\d{1,10}$"),OR=-2147483648,Uw=2147483647,ud=function(e){if(XV.test(e)){var t=Number(e);if(t>=OR&&t<=Uw)return t}return null},Au=function(e){try{e()}catch(t){setTimeout(function(){var n=t.stack||"";throw Jt("Exception was thrown by user callback.",n),t},Math.floor(0))}},JV=function(){var e=typeof window=="object"&&window.navigator&&window.navigator.userAgent||"";return e.search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Hc=function(e,t){var n=setTimeout(e,t);return typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ZV=function(){function e(t,n){var r=this;this.appName_=t,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(function(i){return r.appCheck=i})}return e.prototype.getToken=function(t){var n=this;return this.appCheck?this.appCheck.getToken(t):new Promise(function(r,i){setTimeout(function(){n.appCheck?n.getToken(t).then(r,i):r(null)},0)})},e.prototype.addTokenChangeListener=function(t){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(function(r){return r.addTokenListener(t)})},e.prototype.notifyForInvalidToken=function(){Jt('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var eB=function(){function e(t,n,r){var i=this;this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(function(s){return i.auth_=s})}return e.prototype.getToken=function(t){var n=this;return this.auth_?this.auth_.getToken(t).catch(function(r){return r&&r.code==="auth/token-not-initialized"?(Ut("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(r)}):new Promise(function(r,i){setTimeout(function(){n.auth_?n.getToken(t).then(r,i):r(null)},0)})},e.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(function(n){return n.addAuthTokenListener(t)})},e.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then(function(n){return n.removeAuthTokenListener(t)})},e.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Jt(t)},e}(),Wc=function(){function e(t){this.accessToken=t}return e.prototype.getToken=function(t){return Promise.resolve({accessToken:this.accessToken})},e.prototype.addTokenChangeListener=function(t){t(this.accessToken)},e.prototype.removeTokenChangeListener=function(t){},e.prototype.notifyForInvalidToken=function(){},e.OWNER="owner",e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jw="5",PR="v",DR="s",xR="r",LR="f",MR=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,FR="ls",tB="p",s_="ac",UR="websocket",jR="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vw=function(){function e(t,n,r,i,s,u,c){s===void 0&&(s=!1),u===void 0&&(u=""),c===void 0&&(c=!1),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=u,this.includeNamespaceInQueryParams=c,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ws.get("host:"+t)||this._host}return e.prototype.isCacheableHost=function(){return this.internalHost.substr(0,2)==="s-"},e.prototype.isCustomHost=function(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"},Object.defineProperty(e.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&ws.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),e.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},e.prototype.toURLString=function(){var t=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?"?ns="+this.namespace:"";return""+t+this.host+"/"+n},e}();function nB(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function VR(e,t,n){H(typeof t=="string","typeof type must == string"),H(typeof n=="object","typeof params must == object");var r;if(t===UR)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(t===jR)r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);nB(e)&&(n.ns=e.namespace);var i=[];return Dt(n,function(s,u){i.push(s+"="+u)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rB=function(){function e(){this.counters_={}}return e.prototype.incrementCounter=function(t,n){n===void 0&&(n=1),or(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=n},e.prototype.get=function(){return dR(this.counters_)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ny={},ry={};function Bw(e){var t=e.toString();return ny[t]||(ny[t]=new rB),ny[t]}function iB(e,t){var n=e.toString();return ry[n]||(ry[n]=t()),ry[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oB=function(){function e(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return e.prototype.closeAfter=function(t,n){this.closeAfterResponse=t,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},e.prototype.handleResponse=function(t,n){var r=this;this.pendingResponses[t]=n;for(var i=function(){var c=s.pendingResponses[s.currentResponseNum];delete s.pendingResponses[s.currentResponseNum];for(var l=function(p){c[p]&&Au(function(){r.onMessage_(c[p])})},h=0;h<c.length;++h)l(h);if(s.currentResponseNum===s.closeAfterResponse)return s.onClose&&(s.onClose(),s.onClose=null),"break";s.currentResponseNum++},s=this;this.pendingResponses[this.currentResponseNum];){var u=i();if(u==="break")break}},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wC="start",sB="close",aB="pLPCommand",uB="pRTLPCB",BR="id",qR="pw",KR="ser",cB="cb",lB="seg",fB="ts",hB="d",dB="dframe",HR=1870,WR=30,pB=HR-WR,vB=25e3,gB=3e4,qw=function(){function e(t,n,r,i,s,u,c){var l=this;this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=u,this.lastSessionId=c,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Vl(t),this.stats_=Bw(n),this.urlFn=function(h){return l.appCheckToken&&(h[s_]=l.appCheckToken),VR(n,jR,h)}}return e.prototype.open=function(t,n){var r=this;this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new oB(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){r.log_("Timed out trying to connect."),r.onClosed_(),r.connectTimeoutTimer_=null},Math.floor(gB)),GV(function(){if(!r.isClosed_){r.scriptTagHolder=new mB(function(){for(var u=[],c=0;c<arguments.length;c++)u[c]=arguments[c];var l=Yt(u,5),h=l[0],p=l[1],g=l[2];if(l[3],l[4],r.incrementIncomingBytes_(u),!!r.scriptTagHolder)if(r.connectTimeoutTimer_&&(clearTimeout(r.connectTimeoutTimer_),r.connectTimeoutTimer_=null),r.everConnected_=!0,h===wC)r.id=p,r.password=g;else if(h===sB)p?(r.scriptTagHolder.sendNewPolls=!1,r.myPacketOrderer.closeAfter(p,function(){r.onClosed_()})):r.onClosed_();else throw new Error("Unrecognized command received: "+h)},function(){for(var u=[],c=0;c<arguments.length;c++)u[c]=arguments[c];var l=Yt(u,2),h=l[0],p=l[1];r.incrementIncomingBytes_(u),r.myPacketOrderer.handleResponse(h,p)},function(){r.onClosed_()},r.urlFn);var i={};i[wC]="t",i[KR]=Math.floor(Math.random()*1e8),r.scriptTagHolder.uniqueCallbackIdentifier&&(i[cB]=r.scriptTagHolder.uniqueCallbackIdentifier),i[PR]=jw,r.transportSessionId&&(i[DR]=r.transportSessionId),r.lastSessionId&&(i[FR]=r.lastSessionId),r.applicationId&&(i[tB]=r.applicationId),r.appCheckToken&&(i[s_]=r.appCheckToken),typeof location<"u"&&location.hostname&&MR.test(location.hostname)&&(i[xR]=LR);var s=r.urlFn(i);r.log_("Connecting via long-poll to "+s),r.scriptTagHolder.addTag(s,function(){})}})},e.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},e.forceAllow=function(){e.forceAllow_=!0},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){return e.forceAllow_?!0:!e.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!zV()&&!QV()},e.prototype.markConnectionHealthy=function(){},e.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},e.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},e.prototype.send=function(t){var n=Nt(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);for(var r=hR(n),i=NR(r,pB),s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++},e.prototype.addDisconnectPingFrame=function(t,n){this.myDisconnFrame=document.createElement("iframe");var r={};r[dB]="t",r[BR]=t,r[qR]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)},e.prototype.incrementIncomingBytes_=function(t){var n=Nt(t).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)},e}(),mB=function(){function e(t,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=CR(),window[aB+this.uniqueCallbackIdentifier]=t,window[uB+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var s="";if(this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"){var u=document.domain;s='<script>document.domain="'+u+'";<\/script>'}var c="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(l){Ut("frame writing exception"),l.stack&&Ut(l.stack),Ut(l)}}}return e.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{var n=t.contentWindow.document;n||Ut("No IE domain setting required")}catch{var r=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},e.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){t.myIFrame!==null&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var n=this.onDisconnect;n&&(this.onDisconnect=null,n())},e.prototype.startLongPoll=function(t,n){for(this.myID=t,this.myPW=n,this.alive=!0;this.newRequest_(););},e.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t[BR]=this.myID,t[qR]=this.myPW,t[KR]=this.currentSerial;for(var n=this.urlFn(t),r="",i=0;this.pendingSegs.length>0;){var s=this.pendingSegs[0];if(s.d.length+WR+r.length<=HR){var u=this.pendingSegs.shift();r=r+"&"+lB+i+"="+u.seg+"&"+fB+i+"="+u.ts+"&"+hB+i+"="+u.d,i++}else break}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1},e.prototype.enqueueSegment=function(t,n,r){this.pendingSegs.push({seg:t,ts:n,d:r}),this.alive&&this.newRequest_()},e.prototype.addLongPollTag_=function(t,n){var r=this;this.outstandingRequests.add(n);var i=function(){r.outstandingRequests.delete(n),r.newRequest_()},s=setTimeout(i,Math.floor(vB)),u=function(){clearTimeout(s),i()};this.addTag(t,u)},e.prototype.addTag=function(t,n){var r=this;setTimeout(function(){try{if(!r.sendNewPolls)return;var i=r.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){var s=i.readyState;(!s||s==="loaded"||s==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=function(){Ut("Long-poll script failed to load: "+t),r.sendNewPolls=!1,r.close()},r.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yB=16384,_B=45e3,cd=null;typeof MozWebSocket<"u"?cd=MozWebSocket:typeof WebSocket<"u"&&(cd=WebSocket);var ms=function(){function e(t,n,r,i,s,u,c){this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Vl(this.connId),this.stats_=Bw(n),this.connURL=e.connectionURL_(n,u,c,i),this.nodeAdmin=n.nodeAdmin}return e.connectionURL_=function(t,n,r,i){var s={};return s[PR]=jw,typeof location<"u"&&location.hostname&&MR.test(location.hostname)&&(s[xR]=LR),n&&(s[DR]=n),r&&(s[FR]=r),i&&(s[s_]=i),VR(t,UR,s)},e.prototype.open=function(t,n){var r=this;this.onDisconnect=n,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ws.set("previous_websocket_failure",!0);try{var i,s,u,c;if(!gR()){var s={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}};this.mySock=new cd(this.connURL,[],s)}}catch(h){this.log_("Error instantiating WebSocket.");var l=h.message||h.data;l&&this.log_(l),this.onClosed_();return}this.mySock.onopen=function(){r.log_("Websocket connected."),r.everConnected_=!0},this.mySock.onclose=function(){r.log_("Websocket connection was disconnected."),r.mySock=null,r.onClosed_()},this.mySock.onmessage=function(h){r.handleIncomingFrame(h)},this.mySock.onerror=function(h){r.log_("WebSocket error.  Closing connection.");var p=h.message||h.data;p&&r.log_(p),r.onClosed_()}},e.prototype.start=function(){},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){var t=!1;if(typeof navigator<"u"&&navigator.userAgent){var n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&cd!==null&&!e.forceDisallow_},e.previouslyFailed=function(){return ws.isInMemoryStorage||ws.get("previous_websocket_failure")===!0},e.prototype.markConnectionHealthy=function(){ws.remove("previous_websocket_failure")},e.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var n=this.frames.join("");this.frames=null;var r=fl(n);this.onMessage(r)}},e.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},e.prototype.extractFrameCount_=function(t){if(H(this.frames===null,"We already have a frame buffer"),t.length<=6){var n=Number(t);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),t},e.prototype.handleIncomingFrame=function(t){if(this.mySock!==null){var n=t.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{var r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}},e.prototype.send=function(t){this.resetKeepAlive();var n=Nt(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);var r=NR(n,yB);r.length>1&&this.sendString_(String(r.length));for(var i=0;i<r.length;i++)this.sendString_(r[i])},e.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},e.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},e.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(_B))},e.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4,e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wB=function(){function e(t){this.initTransports_(t)}return Object.defineProperty(e,"ALL_TRANSPORTS",{get:function(){return[qw,ms]},enumerable:!1,configurable:!0}),e.prototype.initTransports_=function(t){var n,r,i=ms&&ms.isAvailable(),s=i&&!ms.previouslyFailed();if(t.webSocketOnly&&(i||Jt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[ms];else{var u=this.transports_=[];try{for(var c=Kt(e.ALL_TRANSPORTS),l=c.next();!l.done;l=c.next()){var h=l.value;h&&h.isAvailable()&&u.push(h)}}catch(p){n={error:p}}finally{try{l&&!l.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}}},e.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},e.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bB=6e4,EB=5e3,TB=10*1024,IB=100*1024,iy="t",bC="d",SB="s",EC="r",CB="e",TC="o",IC="a",SC="n",CC="p",AB="h",GR=function(){function e(t,n,r,i,s,u,c,l,h,p){this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=u,this.onReady_=c,this.onDisconnect_=l,this.onKill_=h,this.lastSessionId=p,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Vl("c:"+this.id+":"),this.transportManager_=new wB(n),this.log_("Connection created"),this.start_()}return e.prototype.start_=function(){var t=this,n=this.transportManager_.initialTransport();this.conn_=new n(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=n.responsesRequiredToBeHealthy||0;var r=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(r,i)},Math.floor(0));var s=n.healthyTimeout||0;s>0&&(this.healthyTimeout_=Hc(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>IB?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>TB?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(s)))},e.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},e.prototype.disconnReceiver_=function(t){var n=this;return function(r){t===n.conn_?n.onConnectionLost_(r):t===n.secondaryConn_?(n.log_("Secondary connection lost."),n.onSecondaryConnectionLost_()):n.log_("closing an old connection")}},e.prototype.connReceiver_=function(t){var n=this;return function(r){n.state_!==2&&(t===n.rx_?n.onPrimaryMessageReceived_(r):t===n.secondaryConn_?n.onSecondaryMessageReceived_(r):n.log_("message on old connection"))}},e.prototype.sendRequest=function(t){var n={t:"d",d:t};this.sendData_(n)},e.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},e.prototype.onSecondaryControl_=function(t){if(iy in t){var n=t[iy];n===IC?this.upgradeIfSecondaryHealthy_():n===EC?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===TC&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},e.prototype.onSecondaryMessageReceived_=function(t){var n=kc("t",t),r=kc("d",t);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)},e.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:CC,d:{}}}))},e.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:IC,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:SC,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},e.prototype.onPrimaryMessageReceived_=function(t){var n=kc("t",t),r=kc("d",t);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)},e.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},e.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},e.prototype.onControl_=function(t){var n=kc(iy,t);if(bC in t){var r=t[bC];if(n===AB)this.onHandshake_(r);else if(n===SC){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===SB?this.onConnectionShutdown_(r):n===EC?this.onReset_(r):n===CB?o_("Server Error: "+r):n===TC?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):o_("Unknown control packet command: "+n)}},e.prototype.onHandshake_=function(t){var n=t.ts,r=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),jw!==r&&Jt("Protocol version mismatch detected"),this.tryStartUpgrade_())},e.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},e.prototype.startUpgrade_=function(t){var n=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var r=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(r,i),Hc(function(){n.secondaryConn_&&(n.log_("Timed out trying to upgrade."),n.secondaryConn_.close())},Math.floor(bB))},e.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())},e.prototype.onConnectionEstablished_=function(t,n){var r=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Hc(function(){r.sendPingOnPrimaryIfNecessary_()},Math.floor(EB))},e.prototype.sendPingOnPrimaryIfNecessary_=function(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:CC,d:{}}}))},e.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()},e.prototype.onConnectionLost_=function(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ws.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()},e.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},e.prototype.sendData_=function(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)},e.prototype.close=function(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},e.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $R=function(){function e(){}return e.prototype.put=function(t,n,r,i){},e.prototype.merge=function(t,n,r,i){},e.prototype.refreshAuthToken=function(t){},e.prototype.refreshAppCheckToken=function(t){},e.prototype.onDisconnectPut=function(t,n,r){},e.prototype.onDisconnectMerge=function(t,n,r){},e.prototype.onDisconnectCancel=function(t,n){},e.prototype.reportStats=function(t){},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zR=function(){function e(t){this.allowedEvents_=t,this.listeners_={},H(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return e.prototype.trigger=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(Array.isArray(this.listeners_[t]))for(var i=Ie([],Yt(this.listeners_[t])),s=0;s<i.length;s++)i[s].callback.apply(i[s].context,n)},e.prototype.on=function(t,n,r){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:n,context:r});var i=this.getInitialEvent(t);i&&n.apply(r,i)},e.prototype.off=function(t,n,r){this.validateEventType_(t);for(var i=this.listeners_[t]||[],s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}},e.prototype.validateEventType_=function(t){H(this.allowedEvents_.find(function(n){return n===t}),"Unknown event: "+t)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var AC=function(e){Z(t,e);function t(){var n=e.call(this,["online"])||this;return n.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Ow()&&(window.addEventListener("online",function(){n.online_||(n.online_=!0,n.trigger("online",!0))},!1),window.addEventListener("offline",function(){n.online_&&(n.online_=!1,n.trigger("online",!1))},!1)),n}return t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(n){return H(n==="online","Unknown event type: "+n),[this.online_]},t.prototype.currentlyOnline=function(){return this.online_},t}(zR);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kC=32,NC=768,Ke=function(){function e(t,n){if(n===void 0){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return e.prototype.toString=function(){for(var t="",n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(t+="/"+this.pieces_[n]);return t||"/"},e}();function Be(){return new Ke("")}function Ce(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function ko(e){return e.pieces_.length-e.pieceNum_}function Qe(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new Ke(e.pieces_,t)}function Kw(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function kB(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)e.pieces_[n]!==""&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}function hl(e,t){return t===void 0&&(t=0),e.pieces_.slice(e.pieceNum_+t)}function QR(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new Ke(t,0)}function ot(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof Ke)for(var r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else for(var i=t.split("/"),r=0;r<i.length;r++)i[r].length>0&&n.push(i[r]);return new Ke(n,0)}function Ae(e){return e.pieceNum_>=e.pieces_.length}function Cn(e,t){var n=Ce(e),r=Ce(t);if(n===null)return t;if(n===r)return Cn(Qe(e),Qe(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function NB(e,t){for(var n=hl(e,0),r=hl(t,0),i=0;i<n.length&&i<r.length;i++){var s=Qs(n[i],r[i]);if(s!==0)return s}return n.length===r.length?0:n.length<r.length?-1:1}function Hw(e,t){if(ko(e)!==ko(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function dr(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(ko(e)>ko(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var RB=function(){function e(t,n){this.errorPrefix_=n,this.parts_=hl(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=pp(this.parts_[r]);YR(this)}return e}();function OB(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=pp(t),YR(e)}function PB(e){var t=e.parts_.pop();e.byteLength_-=pp(t),e.parts_.length>0&&(e.byteLength_-=1)}function YR(e){if(e.byteLength_>NC)throw new Error(e.errorPrefix_+"has a key path longer than "+NC+" bytes ("+e.byteLength_+").");if(e.parts_.length>kC)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+kC+") or object contains a cycle "+hs(e))}function hs(e){return e.parts_.length===0?"":"in property '"+e.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var DB=function(e){Z(t,e);function t(){var n=e.call(this,["visible"])||this,r,i;return typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(i="visibilitychange",r="hidden"):typeof document.mozHidden<"u"?(i="mozvisibilitychange",r="mozHidden"):typeof document.msHidden<"u"?(i="msvisibilitychange",r="msHidden"):typeof document.webkitHidden<"u"&&(i="webkitvisibilitychange",r="webkitHidden")),n.visible_=!0,i&&document.addEventListener(i,function(){var s=!document[r];s!==n.visible_&&(n.visible_=s,n.trigger("visible",s))},!1),n}return t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(n){return H(n==="visible","Unknown event type: "+n),[this.visible_]},t}(zR);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nc=1e3,xB=60*5*1e3,LB=3*1e3,RC=30*1e3,MB=1.3,FB=3e4,UB="server_kill",OC=3,Rs=function(e){Z(t,e);function t(n,r,i,s,u,c,l,h){var p=e.call(this)||this;if(p.repoInfo_=n,p.applicationId_=r,p.onDataUpdate_=i,p.onConnectStatus_=s,p.onServerInfoUpdate_=u,p.authTokenProvider_=c,p.appCheckTokenProvider_=l,p.authOverride_=h,p.id=t.nextPersistentConnectionId_++,p.log_=Vl("p:"+p.id+":"),p.interruptReasons_={},p.listens=new Map,p.outstandingPuts_=[],p.outstandingGets_=[],p.outstandingPutCount_=0,p.outstandingGetCount_=0,p.onDisconnectRequestQueue_=[],p.connected_=!1,p.reconnectDelay_=Nc,p.maxReconnectDelay_=xB,p.securityDebugCallback_=null,p.lastSessionId=null,p.establishConnectionTimer_=null,p.visible_=!1,p.requestCBHash_={},p.requestNumber_=0,p.realtime_=null,p.authToken_=null,p.appCheckToken_=null,p.forceTokenRefresh_=!1,p.invalidAuthTokenCount_=0,p.invalidAppCheckTokenCount_=0,p.firstConnection_=!0,p.lastConnectionAttemptTime_=null,p.lastConnectionEstablishedTime_=null,h&&!gR())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return DB.getInstance().on("visible",p.onVisible_,p),n.host.indexOf("fblocal")===-1&&AC.getInstance().on("online",p.onOnline_,p),p}return t.prototype.sendRequest=function(n,r,i){var s=++this.requestNumber_,u={r:s,a:n,b:r};this.log_(Nt(u)),H(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),i&&(this.requestCBHash_[s]=i)},t.prototype.get=function(n){var r=this;this.initConnection_();var i=new Bt,s={p:n._path.toString(),q:n._queryObject},u={action:"g",request:s,onComplete:function(l){var h=l.d;l.s==="ok"?(r.onDataUpdate_(s.p,h,!1,null),i.resolve(h)):i.reject(h)}};this.outstandingGets_.push(u),this.outstandingGetCount_++;var c=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var l=r.outstandingGets_[c];l===void 0||u!==l||(delete r.outstandingGets_[c],r.outstandingGetCount_--,r.outstandingGetCount_===0&&(r.outstandingGets_=[]),r.log_("get "+c+" timed out on connection"),i.reject(new Error("Client is offline.")))},LB),this.connected_&&this.sendGet_(c),i.promise},t.prototype.listen=function(n,r,i,s){this.initConnection_();var u=n._queryIdentifier,c=n._path.toString();this.log_("Listen called for "+c+" "+u),this.listens.has(c)||this.listens.set(c,new Map),H(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),H(!this.listens.get(c).has(u),"listen() called twice for same path/queryId.");var l={onComplete:s,hashFn:r,query:n,tag:i};this.listens.get(c).set(u,l),this.connected_&&this.sendListen_(l)},t.prototype.sendGet_=function(n){var r=this,i=this.outstandingGets_[n];this.sendRequest("g",i.request,function(s){delete r.outstandingGets_[n],r.outstandingGetCount_--,r.outstandingGetCount_===0&&(r.outstandingGets_=[]),i.onComplete&&i.onComplete(s)})},t.prototype.sendListen_=function(n){var r=this,i=n.query,s=i._path.toString(),u=i._queryIdentifier;this.log_("Listen on "+s+" for "+u);var c={p:s},l="q";n.tag&&(c.q=i._queryObject,c.t=n.tag),c.h=n.hashFn(),this.sendRequest(l,c,function(h){var p=h.d,g=h.s;t.warnOnListenWarnings_(p,i);var m=r.listens.get(s)&&r.listens.get(s).get(u);m===n&&(r.log_("listen response",h),g!=="ok"&&r.removeListen_(s,u),n.onComplete&&n.onComplete(g,p))})},t.warnOnListenWarnings_=function(n,r){if(n&&typeof n=="object"&&or(n,"w")){var i=Ms(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){var s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',u=r._path.toString();Jt("Using an unspecified index. Your data will be downloaded and "+("filtered on the client. Consider adding "+s+" at ")+(u+" to your security rules for better performance."))}}},t.prototype.refreshAuthToken=function(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(n)},t.prototype.reduceReconnectDelayIfAdminCredential_=function(n){var r=n&&n.length===40;(r||nV(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=RC)},t.prototype.refreshAppCheckToken=function(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},function(){})},t.prototype.tryAuth=function(){var n=this;if(this.connected_&&this.authToken_){var r=this.authToken_,i=tV(r)?"auth":"gauth",s={cred:r};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(i,s,function(u){var c=u.s,l=u.d||"error";n.authToken_===r&&(c==="ok"?n.invalidAuthTokenCount_=0:n.onAuthRevoked_(c,l))})}},t.prototype.tryAppCheck=function(){var n=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},function(r){var i=r.s,s=r.d||"error";i==="ok"?n.invalidAppCheckTokenCount_=0:n.onAppCheckRevoked_(i,s)})},t.prototype.unlisten=function(n,r){var i=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),H(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");var u=this.removeListen_(i,s);u&&this.connected_&&this.sendUnlisten_(i,s,n._queryObject,r)},t.prototype.sendUnlisten_=function(n,r,i,s){this.log_("Unlisten on "+n+" for "+r);var u={p:n},c="n";s&&(u.q=i,u.t=s),this.sendRequest(c,u)},t.prototype.onDisconnectPut=function(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})},t.prototype.onDisconnectMerge=function(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})},t.prototype.onDisconnectCancel=function(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})},t.prototype.sendOnDisconnect_=function(n,r,i,s){var u={p:r,d:i};this.log_("onDisconnect "+n,u),this.sendRequest(n,u,function(c){s&&setTimeout(function(){s(c.s,c.d)},Math.floor(0))})},t.prototype.put=function(n,r,i,s){this.putInternal("p",n,r,i,s)},t.prototype.merge=function(n,r,i,s){this.putInternal("m",n,r,i,s)},t.prototype.putInternal=function(n,r,i,s,u){this.initConnection_();var c={p:r,d:i};u!==void 0&&(c.h=u),this.outstandingPuts_.push({action:n,request:c,onComplete:s}),this.outstandingPutCount_++;var l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+r)},t.prototype.sendPut_=function(n){var r=this,i=this.outstandingPuts_[n].action,s=this.outstandingPuts_[n].request,u=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(i,s,function(c){r.log_(i+" response",c),delete r.outstandingPuts_[n],r.outstandingPutCount_--,r.outstandingPutCount_===0&&(r.outstandingPuts_=[]),u&&u(c.s,c.d)})},t.prototype.reportStats=function(n){var r=this;if(this.connected_){var i={c:n};this.log_("reportStats",i),this.sendRequest("s",i,function(s){var u=s.s;if(u!=="ok"){var c=s.d;r.log_("reportStats","Error sending stats: "+c)}})}},t.prototype.onDataMessage_=function(n){if("r"in n){this.log_("from server: "+Nt(n));var r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}},t.prototype.onDataPush_=function(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):o_("Unrecognized action received from server: "+Nt(n)+`
Are you using the latest client?`)},t.prototype.onReady_=function(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},t.prototype.scheduleConnect_=function(n){var r=this;H(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){r.establishConnectionTimer_=null,r.establishConnection_()},Math.floor(n))},t.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},t.prototype.onVisible_=function(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Nc,this.realtime_||this.scheduleConnect_(0)),this.visible_=n},t.prototype.onOnline_=function(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Nc,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},t.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(!this.visible_)this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime();else if(this.lastConnectionEstablishedTime_){var n=new Date().getTime()-this.lastConnectionEstablishedTime_;n>FB&&(this.reconnectDelay_=Nc),this.lastConnectionEstablishedTime_=null}var r=new Date().getTime()-this.lastConnectionAttemptTime_,i=Math.max(0,this.reconnectDelay_-r);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*MB)}this.onConnectStatus_(!1)},t.prototype.establishConnection_=function(){return C(this,void 0,void 0,function(){var n,r,i,s,u,c,l,h,p,g,m,_,b,E,I=this;return S(this,function(N){switch(N.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null,n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+t.nextConnectionId_++,u=this.lastSessionId,c=!1,l=null,h=function(){l?l.close():(c=!0,i())},p=function(x){H(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(x)},this.realtime_={close:h,sendRequest:p},g=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,N.label=1;case 1:return N.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(g),this.appCheckTokenProvider_.getToken(g)])];case 2:return m=Yt.apply(void 0,[N.sent(),2]),_=m[0],b=m[1],c?Ut("getToken() completed but was canceled"):(Ut("getToken() completed. Creating connection."),this.authToken_=_&&_.accessToken,this.appCheckToken_=b&&b.token,l=new GR(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,function(x){Jt(x+" ("+I.repoInfo_.toString()+")"),I.interrupt(UB)},u)),[3,4];case 3:return E=N.sent(),this.log_("Failed to get token: "+E),c||(this.repoInfo_.nodeAdmin&&Jt(E),h()),[3,4];case 4:return[2]}})})},t.prototype.interrupt=function(n){Ut("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},t.prototype.resume=function(n){Ut("Resuming connection for reason: "+n),delete this.interruptReasons_[n],n_(this.interruptReasons_)&&(this.reconnectDelay_=Nc,this.realtime_||this.scheduleConnect_(0))},t.prototype.handleTimestamp_=function(n){var r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})},t.prototype.cancelSentTransactions_=function(){for(var n=0;n<this.outstandingPuts_.length;n++){var r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])},t.prototype.onListenRevoked_=function(n,r){var i;r?i=r.map(function(u){return Fw(u)}).join("$"):i="default";var s=this.removeListen_(n,i);s&&s.onComplete&&s.onComplete("permission_denied")},t.prototype.removeListen_=function(n,r){var i=new Ke(n).toString(),s;if(this.listens.has(i)){var u=this.listens.get(i);s=u.get(r),u.delete(r),u.size===0&&this.listens.delete(i)}else s=void 0;return s},t.prototype.onAuthRevoked_=function(n,r){Ut("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=OC&&(this.reconnectDelay_=RC,this.authTokenProvider_.notifyForInvalidToken()))},t.prototype.onAppCheckRevoked_=function(n,r){Ut("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=OC&&this.appCheckTokenProvider_.notifyForInvalidToken())},t.prototype.onSecurityDebugPacket_=function(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))},t.prototype.restoreState_=function(){var n,r,i,s;this.tryAuth(),this.tryAppCheck();try{for(var u=Kt(this.listens.values()),c=u.next();!c.done;c=u.next()){var l=c.value;try{for(var h=(i=void 0,Kt(l.values())),p=h.next();!p.done;p=h.next()){var g=p.value;this.sendListen_(g)}}catch(b){i={error:b}}finally{try{p&&!p.done&&(s=h.return)&&s.call(h)}finally{if(i)throw i.error}}}}catch(b){n={error:b}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}for(var m=0;m<this.outstandingPuts_.length;m++)this.outstandingPuts_[m]&&this.sendPut_(m);for(;this.onDisconnectRequestQueue_.length;){var _=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(_.action,_.pathString,_.data,_.onComplete)}for(var m=0;m<this.outstandingGets_.length;m++)this.outstandingGets_[m]&&this.sendGet_(m)},t.prototype.sendConnectStats_=function(){var n={},r="js";n["sdk."+r+"."+TR.replace(/\./g,"-")]=1,Ow()?n["framework.cordova"]=1:vR()&&(n["framework.reactnative"]=1),this.reportStats(n)},t.prototype.shouldReconnect_=function(){var n=AC.getInstance().currentlyOnline();return n_(this.interruptReasons_)&&n},t.nextPersistentConnectionId_=0,t.nextConnectionId_=0,t}($R);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xe=function(){function e(t,n){this.name=t,this.node=n}return e.Wrap=function(t,n){return new e(t,n)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gp=function(){function e(){}return e.prototype.getCompare=function(){return this.compare.bind(this)},e.prototype.indexedValueChanged=function(t,n){var r=new xe(ji,t),i=new xe(ji,n);return this.compare(r,i)!==0},e.prototype.minPost=function(){return xe.MIN},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ch,XR=function(e){Z(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t,"__EMPTY_NODE",{get:function(){return Ch},set:function(n){Ch=n},enumerable:!1,configurable:!0}),t.prototype.compare=function(n,r){return Qs(n.name,r.name)},t.prototype.isDefinedOn=function(n){throw Su("KeyIndex.isDefinedOn not expected to be called.")},t.prototype.indexedValueChanged=function(n,r){return!1},t.prototype.minPost=function(){return xe.MIN},t.prototype.maxPost=function(){return new xe(pi,Ch)},t.prototype.makePost=function(n,r){return H(typeof n=="string","KeyIndex indexValue must always be a string."),new xe(n,Ch)},t.prototype.toString=function(){return".key"},t}(gp),ai=new XR;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ah=function(){function e(t,n,r,i,s){s===void 0&&(s=null),this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];for(var u=1;!t.isEmpty();)if(t=t,u=n?r(t.key,n):1,i&&(u*=-1),u<0)this.isReverse_?t=t.left:t=t.right;else if(u===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}return e.prototype.getNext=function(){if(this.nodeStack_.length===0)return null;var t=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(t.key,t.value):n={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return n},e.prototype.hasNext=function(){return this.nodeStack_.length>0},e.prototype.peek=function(){if(this.nodeStack_.length===0)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},e}(),Fr=function(){function e(t,n,r,i,s){this.key=t,this.value=n,this.color=r??e.RED,this.left=i??Ri.EMPTY_NODE,this.right=s??Ri.EMPTY_NODE}return e.prototype.copy=function(t,n,r,i,s){return new e(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)},e.prototype.count=function(){return this.left.count()+1+this.right.count()},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},e.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},e.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},e.prototype.minKey=function(){return this.min_().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(t,n,r){var i=this,s=r(t,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp_()},e.prototype.removeMin_=function(){if(this.left.isEmpty())return Ri.EMPTY_NODE;var t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()},e.prototype.remove=function(t,n){var r,i;if(r=this,n(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(t,r.key)===0){if(r.right.isEmpty())return Ri.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,n))}return r.fixUp_()},e.prototype.isRed_=function(){return this.color},e.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},e.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t},e.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t},e.prototype.rotateLeft_=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight_=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)},e.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},e.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},e.RED=!0,e.BLACK=!1,e}(),jB=function(){function e(){}return e.prototype.copy=function(t,n,r,i,s){return this},e.prototype.insert=function(t,n,r){return new Fr(t,n,null)},e.prototype.remove=function(t,n){return this},e.prototype.count=function(){return 0},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(t){return!1},e.prototype.reverseTraversal=function(t){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.check_=function(){return 0},e.prototype.isRed_=function(){return!1},e}(),Ri=function(){function e(t,n){n===void 0&&(n=e.EMPTY_NODE),this.comparator_=t,this.root_=n}return e.prototype.insert=function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Fr.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Fr.BLACK,null,null))},e.prototype.get=function(t){for(var n,r=this.root_;!r.isEmpty();){if(n=this.comparator_(t,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null},e.prototype.getPredecessorKey=function(t){for(var n,r=this.root_,i=null;!r.isEmpty();)if(n=this.comparator_(t,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},e.prototype.isEmpty=function(){return this.root_.isEmpty()},e.prototype.count=function(){return this.root_.count()},e.prototype.minKey=function(){return this.root_.minKey()},e.prototype.maxKey=function(){return this.root_.maxKey()},e.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},e.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},e.prototype.getIterator=function(t){return new Ah(this.root_,null,this.comparator_,!1,t)},e.prototype.getIteratorFrom=function(t,n){return new Ah(this.root_,t,this.comparator_,!1,n)},e.prototype.getReverseIteratorFrom=function(t,n){return new Ah(this.root_,t,this.comparator_,!0,n)},e.prototype.getReverseIterator=function(t){return new Ah(this.root_,null,this.comparator_,!0,t)},e.EMPTY_NODE=new jB,e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VB(e,t){return Qs(e.name,t.name)}function Ww(e,t){return Qs(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var a_;function BB(e){a_=e}var JR=function(e){return typeof e=="number"?"number:"+RR(e):"string:"+e},ZR=function(e){if(e.isLeafNode()){var t=e.val();H(typeof t=="string"||typeof t=="number"||typeof t=="object"&&or(t,".sv"),"Priority must be a string or number.")}else H(e===a_||e.isEmpty(),"priority of unexpected type.");H(e===a_||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var PC,Ja=function(){function e(t,n){n===void 0&&(n=e.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,H(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),ZR(this.priorityNode_)}return Object.defineProperty(e,"__childrenNodeConstructor",{get:function(){return PC},set:function(t){PC=t},enumerable:!1,configurable:!0}),e.prototype.isLeafNode=function(){return!0},e.prototype.getPriority=function(){return this.priorityNode_},e.prototype.updatePriority=function(t){return new e(this.value_,t)},e.prototype.getImmediateChild=function(t){return t===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.getChild=function(t){return Ae(t)?this:Ce(t)===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.hasChild=function(){return!1},e.prototype.getPredecessorChildName=function(t,n){return null},e.prototype.updateImmediateChild=function(t,n){return t===".priority"?this.updatePriority(n):n.isEmpty()&&t!==".priority"?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)},e.prototype.updateChild=function(t,n){var r=Ce(t);return r===null?n:n.isEmpty()&&r!==".priority"?this:(H(r!==".priority"||ko(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(Qe(t),n)))},e.prototype.isEmpty=function(){return!1},e.prototype.numChildren=function(){return 0},e.prototype.forEachChild=function(t,n){return!1},e.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},e.prototype.hash=function(){if(this.lazyHash_===null){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+JR(this.priorityNode_.val())+":");var n=typeof this.value_;t+=n+":",n==="number"?t+=RR(this.value_):t+=this.value_,this.lazyHash_=AR(t)}return this.lazyHash_},e.prototype.getValue=function(){return this.value_},e.prototype.compareTo=function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(H(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},e.prototype.compareToLeafNode_=function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),s=e.VALUE_TYPE_ORDER.indexOf(r);return H(i>=0,"Unknown leaf type: "+n),H(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:s-i},e.prototype.withIndex=function(){return this},e.prototype.isIndexed=function(){return!0},e.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode()){var n=t;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1},e.VALUE_TYPE_ORDER=["object","boolean","number","string"],e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var e1,t1;function qB(e){e1=e}function KB(e){t1=e}var HB=function(e){Z(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.compare=function(n,r){var i=n.node.getPriority(),s=r.node.getPriority(),u=i.compareTo(s);return u===0?Qs(n.name,r.name):u},t.prototype.isDefinedOn=function(n){return!n.getPriority().isEmpty()},t.prototype.indexedValueChanged=function(n,r){return!n.getPriority().equals(r.getPriority())},t.prototype.minPost=function(){return xe.MIN},t.prototype.maxPost=function(){return new xe(pi,new Ja("[PRIORITY-POST]",t1))},t.prototype.makePost=function(n,r){var i=e1(n);return new xe(r,new Ja("[PRIORITY-POST]",i))},t.prototype.toString=function(){return".priority"},t}(gp),Xe=new HB;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var WB=Math.log(2),GB=function(){function e(t){var n=function(s){return parseInt(Math.log(s)/WB,10)},r=function(s){return parseInt(Array(s+1).join("1"),2)};this.count=n(t+1),this.current_=this.count-1;var i=r(this.count);this.bits_=t+1&i}return e.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},e}(),ld=function(e,t,n,r){e.sort(t);var i=function(l,h){var p=h-l,g,m;if(p===0)return null;if(p===1)return g=e[l],m=n?n(g):g,new Fr(m,g.node,Fr.BLACK,null,null);var _=parseInt(p/2,10)+l,b=i(l,_),E=i(_+1,h);return g=e[_],m=n?n(g):g,new Fr(m,g.node,Fr.BLACK,b,E)},s=function(l){for(var h=null,p=null,g=e.length,m=function(N,x){var P=g-N,z=g;g-=N;var W=i(P+1,z),V=e[P],ne=n?n(V):V;_(new Fr(ne,V.node,x,null,W))},_=function(N){h?(h.left=N,h=N):(p=N,h=N)},b=0;b<l.count;++b){var E=l.nextBitIsOne(),I=Math.pow(2,l.count-(b+1));E?m(I,Fr.BLACK):(m(I,Fr.BLACK),m(I,Fr.RED))}return p},u=new GB(e.length),c=s(u);return new Ri(r||t,c)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oy,Oa={},fd=function(){function e(t,n){this.indexes_=t,this.indexSet_=n}return Object.defineProperty(e,"Default",{get:function(){return H(Oa&&Xe,"ChildrenNode.ts has not been loaded"),oy=oy||new e({".priority":Oa},{".priority":Xe}),oy},enumerable:!1,configurable:!0}),e.prototype.get=function(t){var n=Ms(this.indexes_,t);if(!n)throw new Error("No index defined for "+t);return n instanceof Ri?n:null},e.prototype.hasIndex=function(t){return or(this.indexSet_,t.toString())},e.prototype.addIndex=function(t,n){H(t!==ai,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r=[],i=!1,s=n.getIterator(xe.Wrap),u=s.getNext();u;)i=i||t.isDefinedOn(u.node),r.push(u),u=s.getNext();var c;i?c=ld(r,t.getCompare()):c=Oa;var l=t.toString(),h=he({},this.indexSet_);h[l]=t;var p=he({},this.indexes_);return p[l]=c,new e(p,h)},e.prototype.addToIndexes=function(t,n){var r=this,i=sd(this.indexes_,function(s,u){var c=Ms(r.indexSet_,u);if(H(c,"Missing index implementation for "+u),s===Oa)if(c.isDefinedOn(t.node)){for(var l=[],h=n.getIterator(xe.Wrap),p=h.getNext();p;)p.name!==t.name&&l.push(p),p=h.getNext();return l.push(t),ld(l,c.getCompare())}else return Oa;else{var g=n.get(t.name),m=s;return g&&(m=m.remove(new xe(t.name,g))),m.insert(t,t.node)}});return new e(i,this.indexSet_)},e.prototype.removeFromIndexes=function(t,n){var r=sd(this.indexes_,function(i){if(i===Oa)return i;var s=n.get(t.name);return s?i.remove(new xe(t.name,s)):i});return new e(r,this.indexSet_)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rc,we=function(){function e(t,n,r){this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&ZR(this.priorityNode_),this.children_.isEmpty()&&H(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(e,"EMPTY_NODE",{get:function(){return Rc||(Rc=new e(new Ri(Ww),null,fd.Default))},enumerable:!1,configurable:!0}),e.prototype.isLeafNode=function(){return!1},e.prototype.getPriority=function(){return this.priorityNode_||Rc},e.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)},e.prototype.getImmediateChild=function(t){if(t===".priority")return this.getPriority();var n=this.children_.get(t);return n===null?Rc:n},e.prototype.getChild=function(t){var n=Ce(t);return n===null?this:this.getImmediateChild(n).getChild(Qe(t))},e.prototype.hasChild=function(t){return this.children_.get(t)!==null},e.prototype.updateImmediateChild=function(t,n){if(H(n,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(n);var r=new xe(t,n),i=void 0,s=void 0;n.isEmpty()?(i=this.children_.remove(t),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(t,n),s=this.indexMap_.addToIndexes(r,this.children_));var u=i.isEmpty()?Rc:this.priorityNode_;return new e(i,u,s)},e.prototype.updateChild=function(t,n){var r=Ce(t);if(r===null)return n;H(Ce(t)!==".priority"||ko(t)===1,".priority must be the last token in a path");var i=this.getImmediateChild(r).updateChild(Qe(t),n);return this.updateImmediateChild(r,i)},e.prototype.isEmpty=function(){return this.children_.isEmpty()},e.prototype.numChildren=function(){return this.children_.count()},e.prototype.val=function(t){if(this.isEmpty())return null;var n={},r=0,i=0,s=!0;if(this.forEachChild(Xe,function(l,h){n[l]=h.val(t),r++,s&&e.INTEGER_REGEXP_.test(l)?i=Math.max(i,Number(l)):s=!1}),!t&&s&&i<2*r){var u=[];for(var c in n)u[c]=n[c];return u}else return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},e.prototype.hash=function(){if(this.lazyHash_===null){var t="";this.getPriority().isEmpty()||(t+="priority:"+JR(this.getPriority().val())+":"),this.forEachChild(Xe,function(n,r){var i=r.hash();i!==""&&(t+=":"+n+":"+i)}),this.lazyHash_=t===""?"":AR(t)}return this.lazyHash_},e.prototype.getPredecessorChildName=function(t,n,r){var i=this.resolveIndex_(r);if(i){var s=i.getPredecessorKey(new xe(t,n));return s?s.name:null}else return this.children_.getPredecessorKey(t)},e.prototype.getFirstChildName=function(t){var n=this.resolveIndex_(t);if(n){var r=n.minKey();return r&&r.name}else return this.children_.minKey()},e.prototype.getFirstChild=function(t){var n=this.getFirstChildName(t);return n?new xe(n,this.children_.get(n)):null},e.prototype.getLastChildName=function(t){var n=this.resolveIndex_(t);if(n){var r=n.maxKey();return r&&r.name}else return this.children_.maxKey()},e.prototype.getLastChild=function(t){var n=this.getLastChildName(t);return n?new xe(n,this.children_.get(n)):null},e.prototype.forEachChild=function(t,n){var r=this.resolveIndex_(t);return r?r.inorderTraversal(function(i){return n(i.name,i.node)}):this.children_.inorderTraversal(n)},e.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},e.prototype.getIteratorFrom=function(t,n){var r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(t,function(u){return u});for(var i=this.children_.getIteratorFrom(t.name,xe.Wrap),s=i.peek();s!=null&&n.compare(s,t)<0;)i.getNext(),s=i.peek();return i},e.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},e.prototype.getReverseIteratorFrom=function(t,n){var r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(t,function(u){return u});for(var i=this.children_.getReverseIteratorFrom(t.name,xe.Wrap),s=i.peek();s!=null&&n.compare(s,t)>0;)i.getNext(),s=i.peek();return i},e.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Bl?-1:0},e.prototype.withIndex=function(t){if(t===ai||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)},e.prototype.isIndexed=function(t){return t===ai||this.indexMap_.hasIndex(t)},e.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var n=t;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){for(var r=this.getIterator(Xe),i=n.getIterator(Xe),s=r.getNext(),u=i.getNext();s&&u;){if(s.name!==u.name||!s.node.equals(u.node))return!1;s=r.getNext(),u=i.getNext()}return s===null&&u===null}else return!1;else return!1},e.prototype.resolveIndex_=function(t){return t===ai?null:this.indexMap_.get(t.toString())},e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e}(),$B=function(e){Z(t,e);function t(){return e.call(this,new Ri(Ww),we.EMPTY_NODE,fd.Default)||this}return t.prototype.compareTo=function(n){return n===this?0:1},t.prototype.equals=function(n){return n===this},t.prototype.getPriority=function(){return this},t.prototype.getImmediateChild=function(n){return we.EMPTY_NODE},t.prototype.isEmpty=function(){return!1},t}(we),Bl=new $B;Object.defineProperties(xe,{MIN:{value:new xe(ji,we.EMPTY_NODE)},MAX:{value:new xe(pi,Bl)}});XR.__EMPTY_NODE=we.EMPTY_NODE;Ja.__childrenNodeConstructor=we;BB(Bl);KB(Bl);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zB=!0;function ut(e,t){if(t===void 0&&(t=null),e===null)return we.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(t=e[".priority"]),H(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){var n=e;return new Ja(n,ut(t))}if(!(e instanceof Array)&&zB){var r=[],i=!1,s=e;if(Dt(s,function(h,p){if(h.substring(0,1)!=="."){var g=ut(p);g.isEmpty()||(i=i||!g.getPriority().isEmpty(),r.push(new xe(h,g)))}}),r.length===0)return we.EMPTY_NODE;var u=ld(r,VB,function(h){return h.name},Ww);if(i){var c=ld(r,Xe.getCompare());return new we(u,ut(t),new fd({".priority":c},{".priority":Xe}))}else return new we(u,ut(t),fd.Default)}else{var l=we.EMPTY_NODE;return Dt(e,function(h,p){if(or(e,h)&&h.substring(0,1)!=="."){var g=ut(p);(g.isLeafNode()||!g.isEmpty())&&(l=l.updateImmediateChild(h,g))}}),l.updatePriority(ut(t))}}qB(ut);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gw=function(e){Z(t,e);function t(n){var r=e.call(this)||this;return r.indexPath_=n,H(!Ae(n)&&Ce(n)!==".priority","Can't create PathIndex with empty path or .priority key"),r}return t.prototype.extractChild=function(n){return n.getChild(this.indexPath_)},t.prototype.isDefinedOn=function(n){return!n.getChild(this.indexPath_).isEmpty()},t.prototype.compare=function(n,r){var i=this.extractChild(n.node),s=this.extractChild(r.node),u=i.compareTo(s);return u===0?Qs(n.name,r.name):u},t.prototype.makePost=function(n,r){var i=ut(n),s=we.EMPTY_NODE.updateChild(this.indexPath_,i);return new xe(r,s)},t.prototype.maxPost=function(){var n=we.EMPTY_NODE.updateChild(this.indexPath_,Bl);return new xe(pi,n)},t.prototype.toString=function(){return hl(this.indexPath_,0).join("/")},t}(gp);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var QB=function(e){Z(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.compare=function(n,r){var i=n.node.compareTo(r.node);return i===0?Qs(n.name,r.name):i},t.prototype.isDefinedOn=function(n){return!0},t.prototype.indexedValueChanged=function(n,r){return!n.equals(r)},t.prototype.minPost=function(){return xe.MIN},t.prototype.maxPost=function(){return xe.MAX},t.prototype.makePost=function(n,r){var i=ut(n);return new xe(r,i)},t.prototype.toString=function(){return".value"},t}(gp),$w=new QB;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Za="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",u_="-",n1="z",r1=786,YB=function(){var e=0,t=[];return function(n){var r=n===e;e=n;var i,s=new Array(8);for(i=7;i>=0;i--)s[i]=Za.charAt(n%64),n=Math.floor(n/64);H(n===0,"Cannot push at time == 0");var u=s.join("");if(r){for(i=11;i>=0&&t[i]===63;i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)u+=Za.charAt(t[i]);return H(u.length===20,"nextPushId: Length should be 20."),u}}(),DC=function(e){if(e===""+Uw)return u_;var t=ud(e);if(t!=null)return""+(t+1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);if(n.length<r1)return n.push(u_),n.join("");for(var i=n.length-1;i>=0&&n[i]===n1;)i--;if(i===-1)return pi;var s=n[i],u=Za.charAt(Za.indexOf(s)+1);return n[i]=u,n.slice(0,i+1).join("")},xC=function(e){if(e===""+OR)return ji;var t=ud(e);if(t!=null)return""+(t-1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);return n[n.length-1]===u_?n.length===1?""+Uw:(delete n[n.length-1],n.join("")):(n[n.length-1]=Za.charAt(Za.indexOf(n[n.length-1])-1),n.join("")+n1.repeat(r1-n.length))};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i1(e){return{type:"value",snapshotNode:e}}function eu(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function dl(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function pl(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}function XB(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zw=function(){function e(t){this.index_=t}return e.prototype.updateChild=function(t,n,r,i,s,u){H(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var c=t.getImmediateChild(n);return c.getChild(i).equals(r.getChild(i))&&c.isEmpty()===r.isEmpty()||(u!=null&&(r.isEmpty()?t.hasChild(n)?u.trackChildChange(dl(n,c)):H(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):c.isEmpty()?u.trackChildChange(eu(n,r)):u.trackChildChange(pl(n,r,c))),t.isLeafNode()&&r.isEmpty())?t:t.updateImmediateChild(n,r).withIndex(this.index_)},e.prototype.updateFullNode=function(t,n,r){return r!=null&&(t.isLeafNode()||t.forEachChild(Xe,function(i,s){n.hasChild(i)||r.trackChildChange(dl(i,s))}),n.isLeafNode()||n.forEachChild(Xe,function(i,s){if(t.hasChild(i)){var u=t.getImmediateChild(i);u.equals(s)||r.trackChildChange(pl(i,s,u))}else r.trackChildChange(eu(i,s))})),n.withIndex(this.index_)},e.prototype.updatePriority=function(t,n){return t.isEmpty()?we.EMPTY_NODE:t.updatePriority(n)},e.prototype.filtersNodes=function(){return!1},e.prototype.getIndexedFilter=function(){return this},e.prototype.getIndex=function(){return this.index_},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var o1=function(){function e(t){this.indexedFilter_=new zw(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return e.prototype.getStartPost=function(){return this.startPost_},e.prototype.getEndPost=function(){return this.endPost_},e.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},e.prototype.updateChild=function(t,n,r,i,s,u){return this.matches(new xe(n,r))||(r=we.EMPTY_NODE),this.indexedFilter_.updateChild(t,n,r,i,s,u)},e.prototype.updateFullNode=function(t,n,r){n.isLeafNode()&&(n=we.EMPTY_NODE);var i=n.withIndex(this.index_);i=i.updatePriority(we.EMPTY_NODE);var s=this;return n.forEachChild(Xe,function(u,c){s.matches(new xe(u,c))||(i=i.updateImmediateChild(u,we.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,i,r)},e.prototype.updatePriority=function(t,n){return t},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.indexedFilter_},e.prototype.getIndex=function(){return this.index_},e.getStartPost_=function(t){if(t.hasStart()){var n=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),n)}else return t.getIndex().minPost()},e.getEndPost_=function(t){if(t.hasEnd()){var n=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),n)}else return t.getIndex().maxPost()},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var JB=function(){function e(t){this.rangedFilter_=new o1(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return e.prototype.updateChild=function(t,n,r,i,s,u){return this.rangedFilter_.matches(new xe(n,r))||(r=we.EMPTY_NODE),t.getImmediateChild(n).equals(r)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,n,r,i,s,u):this.fullLimitUpdateChild_(t,n,r,s,u)},e.prototype.updateFullNode=function(t,n,r){var i;if(n.isLeafNode()||n.isEmpty())i=we.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=we.EMPTY_NODE.withIndex(this.index_);var s=void 0;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var u=0;s.hasNext()&&u<this.limit_;){var c=s.getNext(),l=void 0;if(this.reverse_?l=this.index_.compare(this.rangedFilter_.getStartPost(),c)<=0:l=this.index_.compare(c,this.rangedFilter_.getEndPost())<=0,l)i=i.updateImmediateChild(c.name,c.node),u++;else break}}else{i=n.withIndex(this.index_),i=i.updatePriority(we.EMPTY_NODE);var h=void 0,p=void 0,g=void 0,s=void 0;if(this.reverse_){s=i.getReverseIterator(this.index_),h=this.rangedFilter_.getEndPost(),p=this.rangedFilter_.getStartPost();var m=this.index_.getCompare();g=function(I,N){return m(N,I)}}else s=i.getIterator(this.index_),h=this.rangedFilter_.getStartPost(),p=this.rangedFilter_.getEndPost(),g=this.index_.getCompare();for(var u=0,_=!1;s.hasNext();){var c=s.getNext();!_&&g(h,c)<=0&&(_=!0);var l=_&&u<this.limit_&&g(c,p)<=0;l?u++:i=i.updateImmediateChild(c.name,we.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,i,r)},e.prototype.updatePriority=function(t,n){return t},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},e.prototype.getIndex=function(){return this.index_},e.prototype.fullLimitUpdateChild_=function(t,n,r,i,s){var u;if(this.reverse_){var c=this.index_.getCompare();u=function(x,P){return c(P,x)}}else u=this.index_.getCompare();var l=t;H(l.numChildren()===this.limit_,"");var h=new xe(n,r),p=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),g=this.rangedFilter_.matches(h);if(l.hasChild(n)){for(var m=l.getImmediateChild(n),_=i.getChildAfterChild(this.index_,p,this.reverse_);_!=null&&(_.name===n||l.hasChild(_.name));)_=i.getChildAfterChild(this.index_,_,this.reverse_);var b=_==null?1:u(_,h),E=g&&!r.isEmpty()&&b>=0;if(E)return s!=null&&s.trackChildChange(pl(n,r,m)),l.updateImmediateChild(n,r);s!=null&&s.trackChildChange(dl(n,m));var I=l.updateImmediateChild(n,we.EMPTY_NODE),N=_!=null&&this.rangedFilter_.matches(_);return N?(s!=null&&s.trackChildChange(eu(_.name,_.node)),I.updateImmediateChild(_.name,_.node)):I}else return r.isEmpty()?t:g&&u(p,h)>=0?(s!=null&&(s.trackChildChange(dl(p.name,p.node)),s.trackChildChange(eu(n,r))),l.updateImmediateChild(n,r).updateImmediateChild(p.name,we.EMPTY_NODE)):t},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var s1=function(){function e(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Xe}return e.prototype.hasStart=function(){return this.startSet_},e.prototype.hasStartAfter=function(){return this.startAfterSet_},e.prototype.hasEndBefore=function(){return this.endBeforeSet_},e.prototype.isViewFromLeft=function(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"},e.prototype.getIndexStartValue=function(){return H(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},e.prototype.getIndexStartName=function(){return H(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ji},e.prototype.hasEnd=function(){return this.endSet_},e.prototype.getIndexEndValue=function(){return H(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},e.prototype.getIndexEndName=function(){return H(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:pi},e.prototype.hasLimit=function(){return this.limitSet_},e.prototype.hasAnchoredLimit=function(){return this.limitSet_&&this.viewFrom_!==""},e.prototype.getLimit=function(){return H(this.limitSet_,"Only valid if limit has been set"),this.limit_},e.prototype.getIndex=function(){return this.index_},e.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},e.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Xe},e.prototype.copy=function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},e}();function ZB(e){return e.loadsAllData()?new zw(e.getIndex()):e.hasLimit()?new JB(e):new o1(e)}function e3(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}function t3(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}function c_(e,t,n){var r=e.copy();return r.startSet_=!0,t===void 0&&(t=null),r.indexStartValue_=t,n!=null?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function n3(e,t,n){var r;if(e.index_===ai)typeof t=="string"&&(t=DC(t)),r=c_(e,t,n);else{var i=void 0;n==null?i=pi:i=DC(n),r=c_(e,t,i)}return r.startAfterSet_=!0,r}function l_(e,t,n){var r=e.copy();return r.endSet_=!0,t===void 0&&(t=null),r.indexEndValue_=t,n!==void 0?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function r3(e,t,n){var r,i;return e.index_===ai?(typeof t=="string"&&(t=xC(t)),i=l_(e,t,n)):(n==null?r=ji:r=xC(n),i=l_(e,t,r)),i.endBeforeSet_=!0,i}function mp(e,t){var n=e.copy();return n.index_=t,n}function LC(e){var t={};if(e.isDefault())return t;var n;return e.index_===Xe?n="$priority":e.index_===$w?n="$value":e.index_===ai?n="$key":(H(e.index_ instanceof Gw,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=Nt(n),e.startSet_&&(t.startAt=Nt(e.indexStartValue_),e.startNameSet_&&(t.startAt+=","+Nt(e.indexStartName_))),e.endSet_&&(t.endAt=Nt(e.indexEndValue_),e.endNameSet_&&(t.endAt+=","+Nt(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function MC(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;n===""&&(e.isViewFromLeft()?n="l":n="r"),t.vf=n}return e.index_!==Xe&&(t.i=e.index_.toString()),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var i3=function(e){Z(t,e);function t(n,r,i,s){var u=e.call(this)||this;return u.repoInfo_=n,u.onDataUpdate_=r,u.authTokenProvider_=i,u.appCheckTokenProvider_=s,u.log_=Vl("p:rest:"),u.listens_={},u}return t.prototype.reportStats=function(n){throw new Error("Method not implemented.")},t.getListenId_=function(n,r){return r!==void 0?"tag$"+r:(H(n._queryParams.isDefault(),"should have a tag if it's not a default query."),n._path.toString())},t.prototype.listen=function(n,r,i,s){var u=this,c=n._path.toString();this.log_("Listen called for "+c+" "+n._queryIdentifier);var l=t.getListenId_(n,i),h={};this.listens_[l]=h;var p=LC(n._queryParams);this.restRequest_(c+".json",p,function(g,m){var _=m;if(g===404&&(_=null,g=null),g===null&&u.onDataUpdate_(c,_,!1,i),Ms(u.listens_,l)===h){var b;g?g===401?b="permission_denied":b="rest_error:"+g:b="ok",s(b,null)}})},t.prototype.unlisten=function(n,r){var i=t.getListenId_(n,r);delete this.listens_[i]},t.prototype.get=function(n){var r=this,i=LC(n._queryParams),s=n._path.toString(),u=new Bt;return this.restRequest_(s+".json",i,function(c,l){var h=l;c===404&&(h=null,c=null),c===null?(r.onDataUpdate_(s,h,!1,null),u.resolve(h)):u.reject(new Error(h))}),u.promise},t.prototype.refreshAuthToken=function(n){},t.prototype.restRequest_=function(n,r,i){var s=this;return r===void 0&&(r={}),r.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(function(u){var c=Yt(u,2),l=c[0],h=c[1];l&&l.accessToken&&(r.auth=l.accessToken),h&&h.token&&(r.ac=h.token);var p=(s.repoInfo_.secure?"https://":"http://")+s.repoInfo_.host+n+"?ns="+s.repoInfo_.namespace+rV(r);s.log_("Sending REST request for "+p);var g=new XMLHttpRequest;g.onreadystatechange=function(){if(i&&g.readyState===4){s.log_("REST Response for "+p+" received. status:",g.status,"response:",g.responseText);var m=null;if(g.status>=200&&g.status<300){try{m=fl(g.responseText)}catch{Jt("Failed to parse JSON response for "+p+": "+g.responseText)}i(null,m)}else g.status!==401&&g.status!==404&&Jt("Got unsuccessful REST response for "+p+" Status: "+g.status),i(g.status);i=null}},g.open("GET",p,!0),g.send()})},t}($R);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var o3=function(){function e(){this.rootNode_=we.EMPTY_NODE}return e.prototype.getNode=function(t){return this.rootNode_.getChild(t)},e.prototype.updateSnapshot=function(t,n){this.rootNode_=this.rootNode_.updateChild(t,n)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hd(){return{value:null,children:new Map}}function ku(e,t,n){if(Ae(t))e.value=n,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(t,n);else{var r=Ce(t);e.children.has(r)||e.children.set(r,hd());var i=e.children.get(r);t=Qe(t),ku(i,t,n)}}function f_(e,t){if(Ae(t))return e.value=null,e.children.clear(),!0;if(e.value!==null){if(e.value.isLeafNode())return!1;var n=e.value;return e.value=null,n.forEachChild(Xe,function(s,u){ku(e,new Ke(s),u)}),f_(e,t)}else if(e.children.size>0){var r=Ce(t);if(t=Qe(t),e.children.has(r)){var i=f_(e.children.get(r),t);i&&e.children.delete(r)}return e.children.size===0}else return!0}function h_(e,t,n){e.value!==null?n(t,e.value):s3(e,function(r,i){var s=new Ke(t.toString()+"/"+r);h_(i,s,n)})}function s3(e,t){e.children.forEach(function(n,r){t(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var a1=function(){function e(t){this.collection_=t,this.last_=null}return e.prototype.get=function(){var t=this.collection_.get(),n=he({},t);return this.last_&&Dt(this.last_,function(r,i){n[r]=n[r]-i}),this.last_=t,n},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var FC=10*1e3,a3=30*1e3,u3=5*60*1e3,c3=function(){function e(t,n){this.server_=n,this.statsToReport_={},this.statsListener_=new a1(t);var r=FC+(a3-FC)*Math.random();Hc(this.reportStats_.bind(this),Math.floor(r))}return e.prototype.reportStats_=function(){var t=this,n=this.statsListener_.get(),r={},i=!1;Dt(n,function(s,u){u>0&&or(t.statsToReport_,s)&&(r[s]=u,i=!0)}),i&&this.server_.reportStats(r),Hc(this.reportStats_.bind(this),Math.floor(Math.random()*2*u3))},e}();function l3(e,t){e.statsToReport_[t]=!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Br;(function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Br||(Br={}));function Qw(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Yw(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Xw(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var f3=function(){function e(t,n,r){this.path=t,this.affectedTree=n,this.revert=r,this.type=Br.ACK_USER_WRITE,this.source=Qw()}return e.prototype.operationForChild=function(t){if(Ae(this.path)){if(this.affectedTree.value!=null)return H(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new Ke(t));return new e(Be(),n,this.revert)}else return H(Ce(this.path)===t,"operationForChild called for unrelated child."),new e(Qe(this.path),this.affectedTree,this.revert)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var u1=function(){function e(t,n){this.source=t,this.path=n,this.type=Br.LISTEN_COMPLETE}return e.prototype.operationForChild=function(t){return Ae(this.path)?new e(this.source,Be()):new e(this.source,Qe(this.path))},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yp=function(){function e(t,n,r){this.source=t,this.path=n,this.snap=r,this.type=Br.OVERWRITE}return e.prototype.operationForChild=function(t){return Ae(this.path)?new e(this.source,Be(),this.snap.getImmediateChild(t)):new e(this.source,Qe(this.path),this.snap)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jw=function(){function e(t,n,r){this.source=t,this.path=n,this.children=r,this.type=Br.MERGE}return e.prototype.operationForChild=function(t){if(Ae(this.path)){var n=this.children.subtree(new Ke(t));return n.isEmpty()?null:n.value?new yp(this.source,Be(),n.value):new e(this.source,Be(),n)}else return H(Ce(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,Qe(this.path),this.children)},e.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var No=function(){function e(t,n,r){this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return e.prototype.isFullyInitialized=function(){return this.fullyInitialized_},e.prototype.isFiltered=function(){return this.filtered_},e.prototype.isCompleteForPath=function(t){if(Ae(t))return this.isFullyInitialized()&&!this.filtered_;var n=Ce(t);return this.isCompleteForChild(n)},e.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},e.prototype.getNode=function(){return this.node_},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var h3=function(){function e(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}return e}();function d3(e,t,n,r){var i=[],s=[];return t.forEach(function(u){u.type==="child_changed"&&e.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&s.push(XB(u.childName,u.snapshotNode))}),Oc(e,i,"child_removed",t,r,n),Oc(e,i,"child_added",t,r,n),Oc(e,i,"child_moved",s,r,n),Oc(e,i,"child_changed",t,r,n),Oc(e,i,"value",t,r,n),i}function Oc(e,t,n,r,i,s){var u=r.filter(function(c){return c.type===n});u.sort(function(c,l){return v3(e,c,l)}),u.forEach(function(c){var l=p3(e,c,s);i.forEach(function(h){h.respondsTo(c.type)&&t.push(h.createEvent(l,e.query_))})})}function p3(e,t,n){return t.type==="value"||t.type==="child_removed"||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function v3(e,t,n){if(t.childName==null||n.childName==null)throw Su("Should only compare child_ events.");var r=new xe(t.childName,t.snapshotNode),i=new xe(n.childName,n.snapshotNode);return e.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _p(e,t){return{eventCache:e,serverCache:t}}function Gc(e,t,n,r){return _p(new No(t,n,r),e.serverCache)}function c1(e,t,n,r){return _p(e.eventCache,new No(t,n,r))}function dd(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Fs(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sy,g3=function(){return sy||(sy=new Ri($V)),sy},sr=function(){function e(t,n){n===void 0&&(n=g3()),this.value=t,this.children=n}return e.fromObject=function(t){var n=new e(null);return Dt(t,function(r,i){n=n.set(new Ke(r),i)}),n},e.prototype.isEmpty=function(){return this.value===null&&this.children.isEmpty()},e.prototype.findRootMostMatchingPathAndValue=function(t,n){if(this.value!=null&&n(this.value))return{path:Be(),value:this.value};if(Ae(t))return null;var r=Ce(t),i=this.children.get(r);if(i!==null){var s=i.findRootMostMatchingPathAndValue(Qe(t),n);if(s!=null){var u=ot(new Ke(r),s.path);return{path:u,value:s.value}}else return null}else return null},e.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},e.prototype.subtree=function(t){if(Ae(t))return this;var n=Ce(t),r=this.children.get(n);return r!==null?r.subtree(Qe(t)):new e(null)},e.prototype.set=function(t,n){if(Ae(t))return new e(n,this.children);var r=Ce(t),i=this.children.get(r)||new e(null),s=i.set(Qe(t),n),u=this.children.insert(r,s);return new e(this.value,u)},e.prototype.remove=function(t){if(Ae(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=Ce(t),r=this.children.get(n);if(r){var i=r.remove(Qe(t)),s=void 0;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new e(null):new e(this.value,s)}else return this},e.prototype.get=function(t){if(Ae(t))return this.value;var n=Ce(t),r=this.children.get(n);return r?r.get(Qe(t)):null},e.prototype.setTree=function(t,n){if(Ae(t))return n;var r=Ce(t),i=this.children.get(r)||new e(null),s=i.setTree(Qe(t),n),u=void 0;return s.isEmpty()?u=this.children.remove(r):u=this.children.insert(r,s),new e(this.value,u)},e.prototype.fold=function(t){return this.fold_(Be(),t)},e.prototype.fold_=function(t,n){var r={};return this.children.inorderTraversal(function(i,s){r[i]=s.fold_(ot(t,i),n)}),n(t,this.value,r)},e.prototype.findOnPath=function(t,n){return this.findOnPath_(t,Be(),n)},e.prototype.findOnPath_=function(t,n,r){var i=this.value?r(n,this.value):!1;if(i)return i;if(Ae(t))return null;var s=Ce(t),u=this.children.get(s);return u?u.findOnPath_(Qe(t),ot(n,s),r):null},e.prototype.foreachOnPath=function(t,n){return this.foreachOnPath_(t,Be(),n)},e.prototype.foreachOnPath_=function(t,n,r){if(Ae(t))return this;this.value&&r(n,this.value);var i=Ce(t),s=this.children.get(i);return s?s.foreachOnPath_(Qe(t),ot(n,i),r):new e(null)},e.prototype.foreach=function(t){this.foreach_(Be(),t)},e.prototype.foreach_=function(t,n){this.children.inorderTraversal(function(r,i){i.foreach_(ot(t,r),n)}),this.value&&n(t,this.value)},e.prototype.foreachChild=function(t){this.children.inorderTraversal(function(n,r){r.value&&t(n,r.value)})},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Li=function(){function e(t){this.writeTree_=t}return e.empty=function(){return new e(new sr(null))},e}();function $c(e,t,n){if(Ae(t))return new Li(new sr(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(r!=null){var i=r.path,s=r.value,u=Cn(i,t);return s=s.updateChild(u,n),new Li(e.writeTree_.set(i,s))}else{var c=new sr(n),l=e.writeTree_.setTree(t,c);return new Li(l)}}function d_(e,t,n){var r=e;return Dt(n,function(i,s){r=$c(r,ot(t,i),s)}),r}function UC(e,t){if(Ae(t))return Li.empty();var n=e.writeTree_.setTree(t,new sr(null));return new Li(n)}function p_(e,t){return Ys(e,t)!=null}function Ys(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return n!=null?e.writeTree_.get(n.path).getChild(Cn(n.path,t)):null}function jC(e){var t=[],n=e.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Xe,function(r,i){t.push(new xe(r,i))}):e.writeTree_.children.inorderTraversal(function(r,i){i.value!=null&&t.push(new xe(r,i.value))}),t}function bo(e,t){if(Ae(t))return e;var n=Ys(e,t);return n!=null?new Li(new sr(n)):new Li(e.writeTree_.subtree(t))}function v_(e){return e.writeTree_.isEmpty()}function tu(e,t){return l1(Be(),e.writeTree_,t)}function l1(e,t,n){if(t.value!=null)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal(function(i,s){i===".priority"?(H(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=l1(ot(e,i),s,n)}),!n.getChild(e).isEmpty()&&r!==null&&(n=n.updateChild(ot(e,".priority"),r)),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wp(e,t){return p1(t,e)}function m3(e,t,n,r,i){H(r>e.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=$c(e.visibleWrites,t,n)),e.lastWriteId=r}function y3(e,t,n,r){H(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=d_(e.visibleWrites,t,n),e.lastWriteId=r}function _3(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}function w3(e,t){var n=e.allWrites.findIndex(function(h){return h.writeId===t});H(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,s=!1,u=e.allWrites.length-1;i&&u>=0;){var c=e.allWrites[u];c.visible&&(u>=n&&b3(c,r.path)?i=!1:dr(r.path,c.path)&&(s=!0)),u--}if(i){if(s)return E3(e),!0;if(r.snap)e.visibleWrites=UC(e.visibleWrites,r.path);else{var l=r.children;Dt(l,function(h){e.visibleWrites=UC(e.visibleWrites,ot(r.path,h))})}return!0}else return!1}function b3(e,t){if(e.snap)return dr(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&dr(ot(e.path,n),t))return!0;return!1}function E3(e){e.visibleWrites=f1(e.allWrites,T3,Be()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function T3(e){return e.visible}function f1(e,t,n){for(var r=Li.empty(),i=0;i<e.length;++i){var s=e[i];if(t(s)){var u=s.path,c=void 0;if(s.snap)dr(n,u)?(c=Cn(n,u),r=$c(r,c,s.snap)):dr(u,n)&&(c=Cn(u,n),r=$c(r,Be(),s.snap.getChild(c)));else if(s.children){if(dr(n,u))c=Cn(n,u),r=d_(r,c,s.children);else if(dr(u,n))if(c=Cn(u,n),Ae(c))r=d_(r,Be(),s.children);else{var l=Ms(s.children,Ce(c));if(l){var h=l.getChild(Qe(c));r=$c(r,Be(),h)}}}else throw Su("WriteRecord should have .snap or .children")}}return r}function h1(e,t,n,r,i){if(!r&&!i){var s=Ys(e.visibleWrites,t);if(s!=null)return s;var u=bo(e.visibleWrites,t);if(v_(u))return n;if(n==null&&!p_(u,Be()))return null;var c=n||we.EMPTY_NODE;return tu(u,c)}else{var l=bo(e.visibleWrites,t);if(!i&&v_(l))return n;if(!i&&n==null&&!p_(l,Be()))return null;var h=function(m){return(m.visible||i)&&(!r||!~r.indexOf(m.writeId))&&(dr(m.path,t)||dr(t,m.path))},p=f1(e.allWrites,h,t),c=n||we.EMPTY_NODE;return tu(p,c)}}function I3(e,t,n){var r=we.EMPTY_NODE,i=Ys(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(Xe,function(c,l){r=r.updateImmediateChild(c,l)}),r;if(n){var s=bo(e.visibleWrites,t);return n.forEachChild(Xe,function(c,l){var h=tu(bo(s,new Ke(c)),l);r=r.updateImmediateChild(c,h)}),jC(s).forEach(function(c){r=r.updateImmediateChild(c.name,c.node)}),r}else{var u=bo(e.visibleWrites,t);return jC(u).forEach(function(c){r=r.updateImmediateChild(c.name,c.node)}),r}}function S3(e,t,n,r,i){H(r||i,"Either existingEventSnap or existingServerSnap must exist");var s=ot(t,n);if(p_(e.visibleWrites,s))return null;var u=bo(e.visibleWrites,s);return v_(u)?i.getChild(n):tu(u,i.getChild(n))}function C3(e,t,n,r){var i=ot(t,n),s=Ys(e.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){var u=bo(e.visibleWrites,i);return tu(u,r.getNode().getImmediateChild(n))}else return null}function A3(e,t){return Ys(e.visibleWrites,t)}function k3(e,t,n,r,i,s,u){var c,l=bo(e.visibleWrites,t),h=Ys(l,Be());if(h!=null)c=h;else if(n!=null)c=tu(l,n);else return[];if(c=c.withIndex(u),!c.isEmpty()&&!c.isLeafNode()){for(var p=[],g=u.getCompare(),m=s?c.getReverseIteratorFrom(r,u):c.getIteratorFrom(r,u),_=m.getNext();_&&p.length<i;)g(_,r)!==0&&p.push(_),_=m.getNext();return p}else return[]}function N3(){return{visibleWrites:Li.empty(),allWrites:[],lastWriteId:-1}}function pd(e,t,n,r){return h1(e.writeTree,e.treePath,t,n,r)}function Zw(e,t){return I3(e.writeTree,e.treePath,t)}function VC(e,t,n,r){return S3(e.writeTree,e.treePath,t,n,r)}function vd(e,t){return A3(e.writeTree,ot(e.treePath,t))}function R3(e,t,n,r,i,s){return k3(e.writeTree,e.treePath,t,n,r,i,s)}function eb(e,t,n){return C3(e.writeTree,e.treePath,t,n)}function d1(e,t){return p1(ot(e.treePath,t),e.writeTree)}function p1(e,t){return{treePath:e,writeTree:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var O3=function(){function e(){this.changeMap=new Map}return e.prototype.trackChildChange=function(t){var n=t.type,r=t.childName;H(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),H(r!==".priority","Only non-priority child changes can be tracked.");var i=this.changeMap.get(r);if(i){var s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,pl(r,t.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,dl(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,eu(r,t.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,pl(r,t.snapshotNode,i.oldSnap));else throw Su("Illegal combination of changes: "+t+" occurred after "+i)}else this.changeMap.set(r,t)},e.prototype.getChanges=function(){return Array.from(this.changeMap.values())},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var P3=function(){function e(){}return e.prototype.getCompleteChild=function(t){return null},e.prototype.getChildAfterChild=function(t,n,r){return null},e}(),v1=new P3,tb=function(){function e(t,n,r){r===void 0&&(r=null),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return e.prototype.getCompleteChild=function(t){var n=this.viewCache_.eventCache;if(n.isCompleteForChild(t))return n.getNode().getImmediateChild(t);var r=this.optCompleteServerCache_!=null?new No(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return eb(this.writes_,t,r)},e.prototype.getChildAfterChild=function(t,n,r){var i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Fs(this.viewCache_),s=R3(this.writes_,i,n,1,r,t);return s.length===0?null:s[0]},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D3(e){return{filter:e}}function x3(e,t){H(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),H(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function L3(e,t,n,r,i){var s=new O3,u,c;if(n.type===Br.OVERWRITE){var l=n;l.source.fromUser?u=g_(e,t,l.path,l.snap,r,i,s):(H(l.source.fromServer,"Unknown source."),c=l.source.tagged||t.serverCache.isFiltered()&&!Ae(l.path),u=gd(e,t,l.path,l.snap,r,i,c,s))}else if(n.type===Br.MERGE){var h=n;h.source.fromUser?u=F3(e,t,h.path,h.children,r,i,s):(H(h.source.fromServer,"Unknown source."),c=h.source.tagged||t.serverCache.isFiltered(),u=m_(e,t,h.path,h.children,r,i,c,s))}else if(n.type===Br.ACK_USER_WRITE){var p=n;p.revert?u=V3(e,t,p.path,r,i,s):u=U3(e,t,p.path,p.affectedTree,r,i,s)}else if(n.type===Br.LISTEN_COMPLETE)u=j3(e,t,n.path,r,s);else throw Su("Unknown operation type: "+n.type);var g=s.getChanges();return M3(t,u,g),{viewCache:u,changes:g}}function M3(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=dd(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(i1(dd(t)))}}function g1(e,t,n,r,i,s){var u=t.eventCache;if(vd(r,n)!=null)return t;var c=void 0,l=void 0;if(Ae(n))if(H(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var h=Fs(t),p=h instanceof we?h:we.EMPTY_NODE,g=Zw(r,p);c=e.filter.updateFullNode(t.eventCache.getNode(),g,s)}else{var m=pd(r,Fs(t));c=e.filter.updateFullNode(t.eventCache.getNode(),m,s)}else{var _=Ce(n);if(_===".priority"){H(ko(n)===1,"Can't have a priority with additional path components");var b=u.getNode();l=t.serverCache.getNode();var E=VC(r,n,b,l);E!=null?c=e.filter.updatePriority(b,E):c=u.getNode()}else{var I=Qe(n),N=void 0;if(u.isCompleteForChild(_)){l=t.serverCache.getNode();var x=VC(r,n,u.getNode(),l);x!=null?N=u.getNode().getImmediateChild(_).updateChild(I,x):N=u.getNode().getImmediateChild(_)}else N=eb(r,_,t.serverCache);N!=null?c=e.filter.updateChild(u.getNode(),_,N,I,i,s):c=u.getNode()}}return Gc(t,c,u.isFullyInitialized()||Ae(n),e.filter.filtersNodes())}function gd(e,t,n,r,i,s,u,c){var l=t.serverCache,h,p=u?e.filter:e.filter.getIndexedFilter();if(Ae(n))h=p.updateFullNode(l.getNode(),r,null);else if(p.filtersNodes()&&!l.isFiltered()){var g=l.getNode().updateChild(n,r);h=p.updateFullNode(l.getNode(),g,null)}else{var m=Ce(n);if(!l.isCompleteForPath(n)&&ko(n)>1)return t;var _=Qe(n),b=l.getNode().getImmediateChild(m),E=b.updateChild(_,r);m===".priority"?h=p.updatePriority(l.getNode(),E):h=p.updateChild(l.getNode(),m,E,_,v1,null)}var I=c1(t,h,l.isFullyInitialized()||Ae(n),p.filtersNodes()),N=new tb(i,I,s);return g1(e,I,n,i,N,c)}function g_(e,t,n,r,i,s,u){var c=t.eventCache,l,h,p=new tb(i,t,s);if(Ae(n))h=e.filter.updateFullNode(t.eventCache.getNode(),r,u),l=Gc(t,h,!0,e.filter.filtersNodes());else{var g=Ce(n);if(g===".priority")h=e.filter.updatePriority(t.eventCache.getNode(),r),l=Gc(t,h,c.isFullyInitialized(),c.isFiltered());else{var m=Qe(n),_=c.getNode().getImmediateChild(g),b=void 0;if(Ae(m))b=r;else{var E=p.getCompleteChild(g);E!=null?Kw(m)===".priority"&&E.getChild(QR(m)).isEmpty()?b=E:b=E.updateChild(m,r):b=we.EMPTY_NODE}if(_.equals(b))l=t;else{var I=e.filter.updateChild(c.getNode(),g,b,m,p,u);l=Gc(t,I,c.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function BC(e,t){return e.eventCache.isCompleteForChild(t)}function F3(e,t,n,r,i,s,u){var c=t;return r.foreach(function(l,h){var p=ot(n,l);BC(t,Ce(p))&&(c=g_(e,c,p,h,i,s,u))}),r.foreach(function(l,h){var p=ot(n,l);BC(t,Ce(p))||(c=g_(e,c,p,h,i,s,u))}),c}function qC(e,t,n){return n.foreach(function(r,i){t=t.updateChild(r,i)}),t}function m_(e,t,n,r,i,s,u,c){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var l=t,h;Ae(n)?h=r:h=new sr(null).setTree(n,r);var p=t.serverCache.getNode();return h.children.inorderTraversal(function(g,m){if(p.hasChild(g)){var _=t.serverCache.getNode().getImmediateChild(g),b=qC(e,_,m);l=gd(e,l,new Ke(g),b,i,s,u,c)}}),h.children.inorderTraversal(function(g,m){var _=!t.serverCache.isCompleteForChild(g)&&m.value===void 0;if(!p.hasChild(g)&&!_){var b=t.serverCache.getNode().getImmediateChild(g),E=qC(e,b,m);l=gd(e,l,new Ke(g),E,i,s,u,c)}}),l}function U3(e,t,n,r,i,s,u){if(vd(i,n)!=null)return t;var c=t.serverCache.isFiltered(),l=t.serverCache;if(r.value!=null){if(Ae(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return gd(e,t,n,l.getNode().getChild(n),i,s,c,u);if(Ae(n)){var h=new sr(null);return l.getNode().forEachChild(ai,function(g,m){h=h.set(new Ke(g),m)}),m_(e,t,n,h,i,s,c,u)}else return t}else{var p=new sr(null);return r.foreach(function(g,m){var _=ot(n,g);l.isCompleteForPath(_)&&(p=p.set(g,l.getNode().getChild(_)))}),m_(e,t,n,p,i,s,c,u)}}function j3(e,t,n,r,i){var s=t.serverCache,u=c1(t,s.getNode(),s.isFullyInitialized()||Ae(n),s.isFiltered());return g1(e,u,n,r,v1,i)}function V3(e,t,n,r,i,s){var u;if(vd(r,n)!=null)return t;var c=new tb(r,t,i),l=t.eventCache.getNode(),h=void 0;if(Ae(n)||Ce(n)===".priority"){var p=void 0;if(t.serverCache.isFullyInitialized())p=pd(r,Fs(t));else{var g=t.serverCache.getNode();H(g instanceof we,"serverChildren would be complete if leaf node"),p=Zw(r,g)}p=p,h=e.filter.updateFullNode(l,p,s)}else{var m=Ce(n),_=eb(r,m,t.serverCache);_==null&&t.serverCache.isCompleteForChild(m)&&(_=l.getImmediateChild(m)),_!=null?h=e.filter.updateChild(l,m,_,Qe(n),c,s):t.eventCache.getNode().hasChild(m)?h=e.filter.updateChild(l,m,we.EMPTY_NODE,Qe(n),c,s):h=l,h.isEmpty()&&t.serverCache.isFullyInitialized()&&(u=pd(r,Fs(t)),u.isLeafNode()&&(h=e.filter.updateFullNode(h,u,s)))}return u=t.serverCache.isFullyInitialized()||vd(r,Be())!=null,Gc(t,h,u,e.filter.filtersNodes())}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var B3=function(){function e(t,n){this.query_=t,this.eventRegistrations_=[];var r=this.query_._queryParams,i=new zw(r.getIndex()),s=ZB(r);this.processor_=D3(s);var u=n.serverCache,c=n.eventCache,l=i.updateFullNode(we.EMPTY_NODE,u.getNode(),null),h=s.updateFullNode(we.EMPTY_NODE,c.getNode(),null),p=new No(l,u.isFullyInitialized(),i.filtersNodes()),g=new No(h,c.isFullyInitialized(),s.filtersNodes());this.viewCache_=_p(g,p),this.eventGenerator_=new h3(this.query_)}return Object.defineProperty(e.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),e}();function q3(e){return e.viewCache_.serverCache.getNode()}function K3(e){return dd(e.viewCache_)}function H3(e,t){var n=Fs(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!Ae(t)&&!n.getImmediateChild(Ce(t)).isEmpty())?n.getChild(t):null}function KC(e){return e.eventRegistrations_.length===0}function W3(e,t){e.eventRegistrations_.push(t)}function HC(e,t,n){var r=[];if(n){H(t==null,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach(function(l){var h=l.createCancelEvent(n,i);h&&r.push(h)})}if(t){for(var s=[],u=0;u<e.eventRegistrations_.length;++u){var c=e.eventRegistrations_[u];if(!c.matches(t))s.push(c);else if(t.hasAnyCallback()){s=s.concat(e.eventRegistrations_.slice(u+1));break}}e.eventRegistrations_=s}else e.eventRegistrations_=[];return r}function WC(e,t,n,r){t.type===Br.MERGE&&t.source.queryId!==null&&(H(Fs(e.viewCache_),"We should always have a full cache before handling merges"),H(dd(e.viewCache_),"Missing event cache, even though we have a server cache"));var i=e.viewCache_,s=L3(e.processor_,i,t,n,r);return x3(e.processor_,s.viewCache),H(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,m1(e,s.changes,s.viewCache.eventCache.getNode(),null)}function G3(e,t){var n=e.viewCache_.eventCache,r=[];if(!n.getNode().isLeafNode()){var i=n.getNode();i.forEachChild(Xe,function(s,u){r.push(eu(s,u))})}return n.isFullyInitialized()&&r.push(i1(n.getNode())),m1(e,r,n.getNode(),t)}function m1(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return d3(e.eventGenerator_,t,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var md,y1=function(){function e(){this.views=new Map}return e}();function $3(e){H(!md,"__referenceConstructor has already been defined"),md=e}function z3(){return H(md,"Reference.ts has not been loaded"),md}function Q3(e){return e.views.size===0}function nb(e,t,n,r){var i,s,u=t.source.queryId;if(u!==null){var c=e.views.get(u);return H(c!=null,"SyncTree gave us an op for an invalid query."),WC(c,t,n,r)}else{var l=[];try{for(var h=Kt(e.views.values()),p=h.next();!p.done;p=h.next()){var c=p.value;l=l.concat(WC(c,t,n,r))}}catch(g){i={error:g}}finally{try{p&&!p.done&&(s=h.return)&&s.call(h)}finally{if(i)throw i.error}}return l}}function _1(e,t,n,r,i){var s=t._queryIdentifier,u=e.views.get(s);if(!u){var c=pd(n,i?r:null),l=!1;c?l=!0:r instanceof we?(c=Zw(n,r),l=!1):(c=we.EMPTY_NODE,l=!1);var h=_p(new No(c,l,!1),new No(r,i,!1));return new B3(t,h)}return u}function Y3(e,t,n,r,i,s){var u=_1(e,t,r,i,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,u),W3(u,n),G3(u,n)}function X3(e,t,n,r){var i,s,u=t._queryIdentifier,c=[],l=[],h=Ro(e);if(u==="default")try{for(var p=Kt(e.views.entries()),g=p.next();!g.done;g=p.next()){var m=Yt(g.value,2),_=m[0],b=m[1];l=l.concat(HC(b,n,r)),KC(b)&&(e.views.delete(_),b.query._queryParams.loadsAllData()||c.push(b.query))}}catch(E){i={error:E}}finally{try{g&&!g.done&&(s=p.return)&&s.call(p)}finally{if(i)throw i.error}}else{var b=e.views.get(u);b&&(l=l.concat(HC(b,n,r)),KC(b)&&(e.views.delete(u),b.query._queryParams.loadsAllData()||c.push(b.query)))}return h&&!Ro(e)&&c.push(new(z3())(t._repo,t._path)),{removed:c,events:l}}function w1(e){var t,n,r=[];try{for(var i=Kt(e.views.values()),s=i.next();!s.done;s=i.next()){var u=s.value;u.query._queryParams.loadsAllData()||r.push(u)}}catch(c){t={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}function Eo(e,t){var n,r,i=null;try{for(var s=Kt(e.views.values()),u=s.next();!u.done;u=s.next()){var c=u.value;i=i||H3(c,t)}}catch(l){n={error:l}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return i}function b1(e,t){var n=t._queryParams;if(n.loadsAllData())return bp(e);var r=t._queryIdentifier;return e.views.get(r)}function E1(e,t){return b1(e,t)!=null}function Ro(e){return bp(e)!=null}function bp(e){var t,n;try{for(var r=Kt(e.views.values()),i=r.next();!i.done;i=r.next()){var s=i.value;if(s.query._queryParams.loadsAllData())return s}}catch(u){t={error:u}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yd;function J3(e){H(!yd,"__referenceConstructor has already been defined"),yd=e}function Z3(){return H(yd,"Reference.ts has not been loaded"),yd}var eq=1,GC=function(){function e(t){this.listenProvider_=t,this.syncPointTree_=new sr(null),this.pendingWriteTree_=N3(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return e}();function rb(e,t,n,r,i){return m3(e.pendingWriteTree_,t,n,r,i),i?Nu(e,new yp(Qw(),t,n)):[]}function tq(e,t,n,r){y3(e.pendingWriteTree_,t,n,r);var i=sr.fromObject(n);return Nu(e,new Jw(Qw(),t,i))}function yo(e,t,n){n===void 0&&(n=!1);var r=_3(e.pendingWriteTree_,t),i=w3(e.pendingWriteTree_,t);if(i){var s=new sr(null);return r.snap!=null?s=s.set(Be(),!0):Dt(r.children,function(u){s=s.set(new Ke(u),!0)}),Nu(e,new f3(r.path,s,n))}else return[]}function ql(e,t,n){return Nu(e,new yp(Yw(),t,n))}function nq(e,t,n){var r=sr.fromObject(n);return Nu(e,new Jw(Yw(),t,r))}function rq(e,t){return Nu(e,new u1(Yw(),t))}function iq(e,t,n){var r=ib(e,n);if(r){var i=ob(r),s=i.path,u=i.queryId,c=Cn(s,t),l=new u1(Xw(u),c);return sb(e,s,l)}else return[]}function y_(e,t,n,r){var i=t._path,s=e.syncPointTree_.get(i),u=[];if(s&&(t._queryIdentifier==="default"||E1(s,t))){var c=X3(s,t,n,r);Q3(s)&&(e.syncPointTree_=e.syncPointTree_.remove(i));var l=c.removed;u=c.events;var h=l.findIndex(function(x){return x._queryParams.loadsAllData()})!==-1,p=e.syncPointTree_.findOnPath(i,function(x,P){return Ro(P)});if(h&&!p){var g=e.syncPointTree_.subtree(i);if(!g.isEmpty())for(var m=uq(g),_=0;_<m.length;++_){var b=m[_],E=b.query,I=S1(e,b);e.listenProvider_.startListening(zc(E),_d(e,E),I.hashFn,I.onComplete)}}if(!p&&l.length>0&&!r)if(h){var N=null;e.listenProvider_.stopListening(zc(t),N)}else l.forEach(function(x){var P=e.queryToTagMap.get(Tp(x));e.listenProvider_.stopListening(zc(x),P)});cq(e,l)}return u}function oq(e,t,n,r){var i=ib(e,r);if(i!=null){var s=ob(i),u=s.path,c=s.queryId,l=Cn(u,t),h=new yp(Xw(c),l,n);return sb(e,u,h)}else return[]}function sq(e,t,n,r){var i=ib(e,r);if(i){var s=ob(i),u=s.path,c=s.queryId,l=Cn(u,t),h=sr.fromObject(n),p=new Jw(Xw(c),l,h);return sb(e,u,p)}else return[]}function $C(e,t,n){var r=t._path,i=null,s=!1;e.syncPointTree_.foreachOnPath(r,function(E,I){var N=Cn(E,r);i=i||Eo(I,N),s=s||Ro(I)});var u=e.syncPointTree_.get(r);u?(s=s||Ro(u),i=i||Eo(u,Be())):(u=new y1,e.syncPointTree_=e.syncPointTree_.set(r,u));var c;if(i!=null)c=!0;else{c=!1,i=we.EMPTY_NODE;var l=e.syncPointTree_.subtree(r);l.foreachChild(function(E,I){var N=Eo(I,Be());N&&(i=i.updateImmediateChild(E,N))})}var h=E1(u,t);if(!h&&!t._queryParams.loadsAllData()){var p=Tp(t);H(!e.queryToTagMap.has(p),"View does not exist, but we have a tag");var g=lq();e.queryToTagMap.set(p,g),e.tagToQueryMap.set(g,p)}var m=wp(e.pendingWriteTree_,r),_=Y3(u,t,n,m,i,c);if(!h&&!s){var b=b1(u,t);_=_.concat(fq(e,t,b))}return _}function Ep(e,t,n){var r=!0,i=e.pendingWriteTree_,s=e.syncPointTree_.findOnPath(t,function(u,c){var l=Cn(u,t),h=Eo(c,l);if(h)return h});return h1(i,t,s,n,r)}function aq(e,t){var n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,function(h,p){var g=Cn(h,n);r=r||Eo(p,g)});var i=e.syncPointTree_.get(n);i?r=r||Eo(i,Be()):(i=new y1,e.syncPointTree_=e.syncPointTree_.set(n,i));var s=r!=null,u=s?new No(r,!0,!1):null,c=wp(e.pendingWriteTree_,t._path),l=_1(i,t,c,s?u.getNode():we.EMPTY_NODE,s);return K3(l)}function Nu(e,t){return T1(t,e.syncPointTree_,null,wp(e.pendingWriteTree_,Be()))}function T1(e,t,n,r){if(Ae(e.path))return I1(e,t,n,r);var i=t.get(Be());n==null&&i!=null&&(n=Eo(i,Be()));var s=[],u=Ce(e.path),c=e.operationForChild(u),l=t.children.get(u);if(l&&c){var h=n?n.getImmediateChild(u):null,p=d1(r,u);s=s.concat(T1(c,l,h,p))}return i&&(s=s.concat(nb(i,e,r,n))),s}function I1(e,t,n,r){var i=t.get(Be());n==null&&i!=null&&(n=Eo(i,Be()));var s=[];return t.children.inorderTraversal(function(u,c){var l=n?n.getImmediateChild(u):null,h=d1(r,u),p=e.operationForChild(u);p&&(s=s.concat(I1(p,c,l,h)))}),i&&(s=s.concat(nb(i,e,r,n))),s}function S1(e,t){var n=t.query,r=_d(e,n);return{hashFn:function(){var i=q3(t)||we.EMPTY_NODE;return i.hash()},onComplete:function(i){if(i==="ok")return r?iq(e,n._path,r):rq(e,n._path);var s=YV(i,n);return y_(e,n,null,s)}}}function _d(e,t){var n=Tp(t);return e.queryToTagMap.get(n)}function Tp(e){return e._path.toString()+"$"+e._queryIdentifier}function ib(e,t){return e.tagToQueryMap.get(t)}function ob(e){var t=e.indexOf("$");return H(t!==-1&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Ke(e.substr(0,t))}}function sb(e,t,n){var r=e.syncPointTree_.get(t);H(r,"Missing sync point for query tag that we're tracking");var i=wp(e.pendingWriteTree_,t);return nb(r,n,i,null)}function uq(e){return e.fold(function(t,n,r){if(n&&Ro(n)){var i=bp(n);return[i]}else{var s=[];return n&&(s=w1(n)),Dt(r,function(u,c){s=s.concat(c)}),s}})}function zc(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Z3())(e._repo,e._path):e}function cq(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=Tp(r),s=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(s)}}}function lq(){return eq++}function fq(e,t,n){var r=t._path,i=_d(e,t),s=S1(e,n),u=e.listenProvider_.startListening(zc(t),i,s.hashFn,s.onComplete),c=e.syncPointTree_.subtree(r);if(i)H(!Ro(c.value),"If we're adding a query, it shouldn't be shadowed");else for(var l=c.fold(function(g,m,_){if(!Ae(g)&&m&&Ro(m))return[bp(m).query];var b=[];return m&&(b=b.concat(w1(m).map(function(E){return E.query}))),Dt(_,function(E,I){b=b.concat(I)}),b}),h=0;h<l.length;++h){var p=l[h];e.listenProvider_.stopListening(zc(p),_d(e,p))}return u}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hq=function(){function e(t){this.node_=t}return e.prototype.getImmediateChild=function(t){var n=this.node_.getImmediateChild(t);return new e(n)},e.prototype.node=function(){return this.node_},e}(),dq=function(){function e(t,n){this.syncTree_=t,this.path_=n}return e.prototype.getImmediateChild=function(t){var n=ot(this.path_,t);return new e(this.syncTree_,n)},e.prototype.node=function(){return Ep(this.syncTree_,this.path_)},e}(),pq=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},zC=function(e,t,n){if(!e||typeof e!="object")return e;if(H(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return vq(e[".sv"],t,n);if(typeof e[".sv"]=="object")return gq(e[".sv"],t);H(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},vq=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:H(!1,"Unexpected server value: "+e)}},gq=function(e,t,n){e.hasOwnProperty("increment")||H(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;typeof r!="number"&&H(!1,"Unexpected increment value: "+r);var i=t.node();if(H(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var s=i,u=s.getValue();return typeof u!="number"?r:u+r},C1=function(e,t,n,r){return ub(t,new dq(n,e),r)},ab=function(e,t,n){return ub(e,new hq(t),n)};function ub(e,t,n){var r=e.getPriority().val(),i=zC(r,t.getImmediateChild(".priority"),n),s;if(e.isLeafNode()){var u=e,c=zC(u.getValue(),t,n);return c!==u.getValue()||i!==u.getPriority().val()?new Ja(c,ut(i)):e}else{var l=e;return s=l,i!==l.getPriority().val()&&(s=s.updatePriority(new Ja(i))),l.forEachChild(Xe,function(h,p){var g=ub(p,t.getImmediateChild(h),n);g!==p&&(s=s.updateImmediateChild(h,g))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cb=function(){function e(t,n,r){t===void 0&&(t=""),n===void 0&&(n=null),r===void 0&&(r={children:{},childCount:0}),this.name=t,this.parent=n,this.node=r}return e}();function Ip(e,t){for(var n=t instanceof Ke?t:new Ke(t),r=e,i=Ce(n);i!==null;){var s=Ms(r.node.children,i)||{children:{},childCount:0};r=new cb(i,r,s),n=Qe(n),i=Ce(n)}return r}function Xs(e){return e.node.value}function lb(e,t){e.node.value=t,__(e)}function A1(e){return e.node.childCount>0}function mq(e){return Xs(e)===void 0&&!A1(e)}function Sp(e,t){Dt(e.node.children,function(n,r){t(new cb(n,e,r))})}function k1(e,t,n,r){n&&!r&&t(e),Sp(e,function(i){k1(i,t,!0,r)}),n&&r&&t(e)}function yq(e,t,n){for(var r=n?e:e.parent;r!==null;){if(t(r))return!0;r=r.parent}return!1}function Kl(e){return new Ke(e.parent===null?e.name:Kl(e.parent)+"/"+e.name)}function __(e){e.parent!==null&&_q(e.parent,e.name,e)}function _q(e,t,n){var r=mq(n),i=or(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,__(e)):!r&&!i&&(e.node.children[t]=n.node,e.node.childCount++,__(e))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wq=/[\[\].#$\/\u0000-\u001F\u007F]/,bq=/[\[\].#$\u0000-\u001F\u007F]/,ay=10*1024*1024,Cp=function(e){return typeof e=="string"&&e.length!==0&&!wq.test(e)},N1=function(e){return typeof e=="string"&&e.length!==0&&!bq.test(e)},Eq=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),N1(e)},vl=function(e){return e===null||typeof e=="string"||typeof e=="number"&&!vp(e)||e&&typeof e=="object"&&or(e,".sv")},vi=function(e,t,n,r){r&&t===void 0||Hl(Un(e,"value"),t,n)},Hl=function(e,t,n){var r=n instanceof Ke?new RB(n,e):n;if(t===void 0)throw new Error(e+"contains undefined "+hs(r));if(typeof t=="function")throw new Error(e+"contains a function "+hs(r)+" with contents = "+t.toString());if(vp(t))throw new Error(e+"contains "+t.toString()+" "+hs(r));if(typeof t=="string"&&t.length>ay/3&&pp(t)>ay)throw new Error(e+"contains a string greater than "+ay+" utf8 bytes "+hs(r)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){var i=!1,s=!1;if(Dt(t,function(u,c){if(u===".value")i=!0;else if(u!==".priority"&&u!==".sv"&&(s=!0,!Cp(u)))throw new Error(e+" contains an invalid key ("+u+") "+hs(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);OB(r,u),Hl(e,c,r),PB(r)}),i&&s)throw new Error(e+' contains ".value" child '+hs(r)+" in addition to actual children.")}},Tq=function(e,t){var n,r;for(n=0;n<t.length;n++){r=t[n];for(var i=hl(r),s=0;s<i.length;s++)if(!(i[s]===".priority"&&s===i.length-1)){if(!Cp(i[s]))throw new Error(e+"contains an invalid key ("+i[s]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}t.sort(NB);var u=null;for(n=0;n<t.length;n++){if(r=t[n],u!==null&&dr(u,r))throw new Error(e+"contains a path "+u.toString()+" that is ancestor of another path "+r.toString());u=r}},R1=function(e,t,n,r){if(!(r&&t===void 0)){var i=Un(e,"values");if(!(t&&typeof t=="object")||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");var s=[];Dt(t,function(u,c){var l=new Ke(u);if(Hl(i,c,ot(n,l)),Kw(l)===".priority"&&!vl(c))throw new Error(i+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(l)}),Tq(i,s)}},fb=function(e,t,n){if(!(n&&t===void 0)){if(vp(t))throw new Error(Un(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!vl(t))throw new Error(Un(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Iq=function(e,t,n){if(!(n&&t===void 0))switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Un(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Wl=function(e,t,n,r){if(!(r&&n===void 0)&&!Cp(n))throw new Error(Un(e,t)+'was an invalid key = "'+n+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},gl=function(e,t,n,r){if(!(r&&n===void 0)&&!N1(n))throw new Error(Un(e,t)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Sq=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),gl(e,t,n,r)},pr=function(e,t){if(Ce(t)===".info")throw new Error(e+" failed = Can't modify data under /.info/")},O1=function(e,t){var n=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!Cp(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!Eq(n))throw new Error(Un(e,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)},Cq=function(e,t,n,r){if(!(r&&n===void 0)&&typeof n!="boolean")throw new Error(Un(e,t)+"must be a boolean.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Aq=function(){function e(){this.eventLists_=[],this.recursionDepth_=0}return e}();function Ap(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],s=i.getPath();n!==null&&!Hw(s,n.path)&&(e.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&e.eventLists_.push(n)}function hb(e,t,n){Ap(e,n),P1(e,function(r){return Hw(r,t)})}function br(e,t,n){Ap(e,n),P1(e,function(r){return dr(r,t)||dr(t,r)})}function P1(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i){var s=i.path;t(s)?(kq(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function kq(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(n!==null){e.events[t]=null;var r=n.getEventRunner();Ns&&Ut("event: "+n.toString()),Au(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var D1="repo_interrupt",Nq=25,Rq=function(){function e(t,n,r,i){this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Aq,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=hd(),this.transactionQueueTree_=new cb,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return e.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},e}();function Oq(e,t,n){if(e.stats_=Bw(e.repoInfo_),e.forceRestClient_||JV())e.server_=new i3(e.repoInfo_,function(r,i,s,u){QC(e,r,i,s,u)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(function(){return YC(e,!0)},0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Nt(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new Rs(e.repoInfo_,t,function(r,i,s,u){QC(e,r,i,s,u)},function(r){YC(e,r)},function(r){Dq(e,r)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(function(r){e.server_.refreshAuthToken(r)}),e.appCheckProvider_.addTokenChangeListener(function(r){e.server_.refreshAppCheckToken(r.token)}),e.statsReporter_=iB(e.repoInfo_,function(){return new c3(e.stats_,e.server_)}),e.infoData_=new o3,e.infoSyncTree_=new GC({startListening:function(r,i,s,u){var c=[],l=e.infoData_.getNode(r._path);return l.isEmpty()||(c=ql(e.infoSyncTree_,r._path,l),setTimeout(function(){u("ok")},0)),c},stopListening:function(){}}),db(e,"connected",!1),e.serverSyncTree_=new GC({startListening:function(r,i,s,u){return e.server_.listen(r,s,i,function(c,l){var h=u(c,l);br(e.eventQueue_,r._path,h)}),[]},stopListening:function(r,i){e.server_.unlisten(r,i)}})}function x1(e){var t=e.infoData_.getNode(new Ke(".info/serverTimeOffset")),n=t.val()||0;return new Date().getTime()+n}function Gl(e){return pq({timestamp:x1(e)})}function QC(e,t,n,r,i){e.dataUpdateCount++;var s=new Ke(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var u=[];if(i)if(r){var c=sd(n,function(m){return ut(m)});u=sq(e.serverSyncTree_,s,c,i)}else{var l=ut(n);u=oq(e.serverSyncTree_,s,l,i)}else if(r){var h=sd(n,function(m){return ut(m)});u=nq(e.serverSyncTree_,s,h)}else{var p=ut(n);u=ql(e.serverSyncTree_,s,p)}var g=s;u.length>0&&(g=nu(e,s)),br(e.eventQueue_,g,u)}function Pq(e,t){e.interceptServerDataCallback_=t}function YC(e,t){db(e,"connected",t),t===!1&&Mq(e)}function Dq(e,t){Dt(t,function(n,r){db(e,n,r)})}function db(e,t,n){var r=new Ke("/.info/"+t),i=ut(n);e.infoData_.updateSnapshot(r,i);var s=ql(e.infoSyncTree_,r,i);br(e.eventQueue_,r,s)}function kp(e){return e.nextWriteId_++}function xq(e,t){var n=aq(e.serverSyncTree_,t);return n!=null?Promise.resolve(n):e.server_.get(t).then(function(r){var i=ut(r).withIndex(t._queryParams.getIndex()),s=ql(e.serverSyncTree_,t._path,i);return hb(e.eventQueue_,t._path,s),Promise.resolve(i)},function(r){return Ru(e,"get for query "+Nt(t)+" failed: "+r),Promise.reject(new Error(r))})}function pb(e,t,n,r,i){Ru(e,"set",{path:t.toString(),value:n,priority:r});var s=Gl(e),u=ut(n,r),c=Ep(e.serverSyncTree_,t),l=ab(u,c,s),h=kp(e),p=rb(e.serverSyncTree_,t,l,h,!0);Ap(e.eventQueue_,p),e.server_.put(t.toString(),u.val(!0),function(m,_){var b=m==="ok";b||Jt("set at "+t+" failed: "+m);var E=yo(e.serverSyncTree_,h,!b);br(e.eventQueue_,t,E),Oo(e,i,m,_)});var g=gb(e,t);nu(e,g),br(e.eventQueue_,g,[])}function Lq(e,t,n,r){Ru(e,"update",{path:t.toString(),value:n});var i=!0,s=Gl(e),u={};if(Dt(n,function(h,p){i=!1,u[h]=C1(ot(t,h),ut(p),e.serverSyncTree_,s)}),i)Ut("update() called with empty data.  Don't do anything."),Oo(e,r,"ok",void 0);else{var c=kp(e),l=tq(e.serverSyncTree_,t,u,c);Ap(e.eventQueue_,l),e.server_.merge(t.toString(),n,function(h,p){var g=h==="ok";g||Jt("update at "+t+" failed: "+h);var m=yo(e.serverSyncTree_,c,!g),_=m.length>0?nu(e,t):t;br(e.eventQueue_,_,m),Oo(e,r,h,p)}),Dt(n,function(h){var p=gb(e,ot(t,h));nu(e,p)}),br(e.eventQueue_,t,[])}}function Mq(e){Ru(e,"onDisconnectEvents");var t=Gl(e),n=hd();h_(e.onDisconnect_,Be(),function(i,s){var u=C1(i,s,e.serverSyncTree_,t);ku(n,i,u)});var r=[];h_(n,Be(),function(i,s){r=r.concat(ql(e.serverSyncTree_,i,s));var u=gb(e,i);nu(e,u)}),e.onDisconnect_=hd(),br(e.eventQueue_,Be(),r)}function Fq(e,t,n){e.server_.onDisconnectCancel(t.toString(),function(r,i){r==="ok"&&f_(e.onDisconnect_,t),Oo(e,n,r,i)})}function XC(e,t,n,r){var i=ut(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),function(s,u){s==="ok"&&ku(e.onDisconnect_,t,i),Oo(e,r,s,u)})}function Uq(e,t,n,r,i){var s=ut(n,r);e.server_.onDisconnectPut(t.toString(),s.val(!0),function(u,c){u==="ok"&&ku(e.onDisconnect_,t,s),Oo(e,i,u,c)})}function jq(e,t,n,r){if(n_(n)){Ut("onDisconnect().update() called with empty data.  Don't do anything."),Oo(e,r,"ok",void 0);return}e.server_.onDisconnectMerge(t.toString(),n,function(i,s){i==="ok"&&Dt(n,function(u,c){var l=ut(c);ku(e.onDisconnect_,ot(t,u),l)}),Oo(e,r,i,s)})}function Vq(e,t,n){var r;Ce(t._path)===".info"?r=$C(e.infoSyncTree_,t,n):r=$C(e.serverSyncTree_,t,n),hb(e.eventQueue_,t._path,r)}function w_(e,t,n){var r;Ce(t._path)===".info"?r=y_(e.infoSyncTree_,t,n):r=y_(e.serverSyncTree_,t,n),hb(e.eventQueue_,t._path,r)}function L1(e){e.persistentConnection_&&e.persistentConnection_.interrupt(D1)}function Bq(e){e.persistentConnection_&&e.persistentConnection_.resume(D1)}function qq(e,t){if(t===void 0&&(t=!1),!(typeof console>"u")){var n;t?(e.statsListener_||(e.statsListener_=new a1(e.stats_)),n=e.statsListener_.get()):n=e.stats_.get();var r=Object.keys(n).reduce(function(i,s){return Math.max(s.length,i)},0);Dt(n,function(i,s){for(var u=i,c=i.length;c<r+2;c++)u+=" ";console.log(u+s)})}}function Kq(e,t){e.stats_.incrementCounter(t),l3(e.statsReporter_,t)}function Ru(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r="";e.persistentConnection_&&(r=e.persistentConnection_.id+":"),Ut.apply(void 0,Ie([r],Yt(t)))}function Oo(e,t,n,r){t&&Au(function(){if(n==="ok")t(null);else{var i=(n||"error").toUpperCase(),s=i;r&&(s+=": "+r);var u=new Error(s);u.code=i,t(u)}})}function Hq(e,t,n,r,i,s){Ru(e,"transaction on "+t);var u={path:t,update:n,onComplete:r,status:null,order:CR(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},c=vb(e,t,void 0);u.currentInputSnapshot=c;var l=u.update(c.val());if(l===void 0)u.unwatcher(),u.currentOutputSnapshotRaw=null,u.currentOutputSnapshotResolved=null,u.onComplete&&u.onComplete(null,!1,u.currentInputSnapshot);else{Hl("transaction failed: Data returned ",l,u.path),u.status=0;var h=Ip(e.transactionQueueTree_,t),p=Xs(h)||[];p.push(u),lb(h,p);var g=void 0;if(typeof l=="object"&&l!==null&&or(l,".priority"))g=Ms(l,".priority"),H(vl(g),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else{var m=Ep(e.serverSyncTree_,t)||we.EMPTY_NODE;g=m.getPriority().val()}var _=Gl(e),b=ut(l,g),E=ab(b,c,_);u.currentOutputSnapshotRaw=b,u.currentOutputSnapshotResolved=E,u.currentWriteId=kp(e);var I=rb(e.serverSyncTree_,t,E,u.currentWriteId,u.applyLocally);br(e.eventQueue_,t,I),Np(e,e.transactionQueueTree_)}}function vb(e,t,n){return Ep(e.serverSyncTree_,t,n)||we.EMPTY_NODE}function Np(e,t){if(t===void 0&&(t=e.transactionQueueTree_),t||Rp(e,t),Xs(t)){var n=F1(e,t);H(n.length>0,"Sending zero length transaction queue");var r=n.every(function(i){return i.status===0});r&&Wq(e,Kl(t),n)}else A1(t)&&Sp(t,function(i){Np(e,i)})}function Wq(e,t,n){for(var r=n.map(function(m){return m.currentWriteId}),i=vb(e,t,r),s=i,u=i.hash(),c=0;c<n.length;c++){var l=n[c];H(l.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),l.status=1,l.retryCount++;var h=Cn(t,l.path);s=s.updateChild(h,l.currentOutputSnapshotRaw)}var p=s.val(!0),g=t;e.server_.put(g.toString(),p,function(m){Ru(e,"transaction put response",{path:g.toString(),status:m});var _=[];if(m==="ok"){for(var b=[],E=function(N){n[N].status=2,_=_.concat(yo(e.serverSyncTree_,n[N].currentWriteId)),n[N].onComplete&&b.push(function(){return n[N].onComplete(null,!0,n[N].currentOutputSnapshotResolved)}),n[N].unwatcher()},I=0;I<n.length;I++)E(I);Rp(e,Ip(e.transactionQueueTree_,t)),Np(e,e.transactionQueueTree_),br(e.eventQueue_,t,_);for(var I=0;I<b.length;I++)Au(b[I])}else{if(m==="datastale")for(var I=0;I<n.length;I++)n[I].status===3?n[I].status=4:n[I].status=0;else{Jt("transaction at "+g.toString()+" failed: "+m);for(var I=0;I<n.length;I++)n[I].status=4,n[I].abortReason=m}nu(e,t)}},u)}function nu(e,t){var n=M1(e,t),r=Kl(n),i=F1(e,n);return Gq(e,i,r),r}function Gq(e,t,n){if(t.length!==0){for(var r=[],i=[],s=t.filter(function(h){return h.status===0}),u=s.map(function(h){return h.currentWriteId}),c=function(h){var p=t[h],g=Cn(n,p.path),m=!1,_;if(H(g!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),p.status===4)m=!0,_=p.abortReason,i=i.concat(yo(e.serverSyncTree_,p.currentWriteId,!0));else if(p.status===0)if(p.retryCount>=Nq)m=!0,_="maxretry",i=i.concat(yo(e.serverSyncTree_,p.currentWriteId,!0));else{var b=vb(e,p.path,u);p.currentInputSnapshot=b;var E=t[h].update(b.val());if(E!==void 0){Hl("transaction failed: Data returned ",E,p.path);var I=ut(E),N=typeof E=="object"&&E!=null&&or(E,".priority");N||(I=I.updatePriority(b.getPriority()));var x=p.currentWriteId,P=Gl(e),z=ab(I,b,P);p.currentOutputSnapshotRaw=I,p.currentOutputSnapshotResolved=z,p.currentWriteId=kp(e),u.splice(u.indexOf(x),1),i=i.concat(rb(e.serverSyncTree_,p.path,z,p.currentWriteId,p.applyLocally)),i=i.concat(yo(e.serverSyncTree_,x,!0))}else m=!0,_="nodata",i=i.concat(yo(e.serverSyncTree_,p.currentWriteId,!0))}br(e.eventQueue_,n,i),i=[],m&&(t[h].status=2,function(W){setTimeout(W,Math.floor(0))}(t[h].unwatcher),t[h].onComplete&&(_==="nodata"?r.push(function(){return t[h].onComplete(null,!1,t[h].currentInputSnapshot)}):r.push(function(){return t[h].onComplete(new Error(_),!1,null)})))},l=0;l<t.length;l++)c(l);Rp(e,e.transactionQueueTree_);for(var l=0;l<r.length;l++)Au(r[l]);Np(e,e.transactionQueueTree_)}}function M1(e,t){var n,r=e.transactionQueueTree_;for(n=Ce(t);n!==null&&Xs(r)===void 0;)r=Ip(r,n),t=Qe(t),n=Ce(t);return r}function F1(e,t){var n=[];return U1(e,t,n),n.sort(function(r,i){return r.order-i.order}),n}function U1(e,t,n){var r=Xs(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);Sp(t,function(s){U1(e,s,n)})}function Rp(e,t){var n=Xs(t);if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,lb(t,n.length>0?n:void 0)}Sp(t,function(s){Rp(e,s)})}function gb(e,t){var n=Kl(M1(e,t)),r=Ip(e.transactionQueueTree_,t);return yq(r,function(i){uy(e,i)}),uy(e,r),k1(r,function(i){uy(e,i)}),n}function uy(e,t){var n=Xs(t);if(n){for(var r=[],i=[],s=-1,u=0;u<n.length;u++)n[u].status===3||(n[u].status===1?(H(s===u-1,"All SENT items should be at beginning of queue."),s=u,n[u].status=3,n[u].abortReason="set"):(H(n[u].status===0,"Unexpected transaction status in abort"),n[u].unwatcher(),i=i.concat(yo(e.serverSyncTree_,n[u].currentWriteId,!0)),n[u].onComplete&&r.push(n[u].onComplete.bind(null,new Error("set"),!1,null))));s===-1?lb(t,void 0):n.length=s+1,br(e.eventQueue_,Kl(t),i);for(var u=0;u<r.length;u++)Au(r[u])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $q(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}t+="/"+i}return t}function zq(e){var t,n,r={};e.charAt(0)==="?"&&(e=e.substring(1));try{for(var i=Kt(e.split("&")),s=i.next();!s.done;s=i.next()){var u=s.value;if(u.length!==0){var c=u.split("=");c.length===2?r[decodeURIComponent(c[0])]=decodeURIComponent(c[1]):Jt("Invalid query segment '"+u+"' in query '"+e+"'")}}}catch(l){t={error:l}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}var b_=function(e,t){var n=Qq(e),r=n.namespace;n.domain==="firebase.com"&&di(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&di("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||WV();var i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Vw(n.host,n.secure,r,t,i,"",r!==n.subdomain),path:new Ke(n.pathString)}},Qq=function(e){var t="",n="",r="",i="",s="",u=!0,c="https",l=443;if(typeof e=="string"){var h=e.indexOf("//");h>=0&&(c=e.substring(0,h-1),e=e.substring(h+2));var p=e.indexOf("/");p===-1&&(p=e.length);var g=e.indexOf("?");g===-1&&(g=e.length),t=e.substring(0,Math.min(p,g)),p<g&&(i=$q(e.substring(p,g)));var m=zq(e.substring(Math.min(e.length,g)));h=t.indexOf(":"),h>=0?(u=c==="https"||c==="wss",l=parseInt(t.substring(h+1),10)):h=t.length;var _=t.slice(0,h);if(_.toLowerCase()==="localhost")n="localhost";else if(_.split(".").length<=2)n=_;else{var b=t.indexOf(".");r=t.substring(0,b).toLowerCase(),n=t.substring(b+1),s=r}"ns"in m&&(s=m.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:u,scheme:c,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var j1=function(){function e(t,n,r,i){this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}return e.prototype.getPath=function(){var t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path},e.prototype.getEventType=function(){return this.eventType},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Nt(this.snapshot.exportVal())},e}(),V1=function(){function e(t,n,r){this.eventRegistration=t,this.error=n,this.path=r}return e.prototype.getPath=function(){return this.path},e.prototype.getEventType=function(){return"cancel"},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.path.toString()+":cancel"},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var B1=function(){function e(t,n){this.snapshotCallback=t,this.cancelCallback=n}return e.prototype.onValue=function(t,n){this.snapshotCallback.call(null,t,n)},e.prototype.onCancel=function(t){return H(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)},Object.defineProperty(e.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),e.prototype.matches=function(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context},e}();/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yq=function(){function e(t,n){this._repo=t,this._path=n}return e.prototype.cancel=function(){var t=new Bt;return Fq(this._repo,this._path,t.wrapCallback(function(){})),t.promise},e.prototype.remove=function(){pr("OnDisconnect.remove",this._path);var t=new Bt;return XC(this._repo,this._path,null,t.wrapCallback(function(){})),t.promise},e.prototype.set=function(t){pr("OnDisconnect.set",this._path),vi("OnDisconnect.set",t,this._path,!1);var n=new Bt;return XC(this._repo,this._path,t,n.wrapCallback(function(){})),n.promise},e.prototype.setWithPriority=function(t,n){pr("OnDisconnect.setWithPriority",this._path),vi("OnDisconnect.setWithPriority",t,this._path,!1),fb("OnDisconnect.setWithPriority",n,!1);var r=new Bt;return Uq(this._repo,this._path,t,n,r.wrapCallback(function(){})),r.promise},e.prototype.update=function(t){pr("OnDisconnect.update",this._path),R1("OnDisconnect.update",t,this._path,!1);var n=new Bt;return jq(this._repo,this._path,t,n.wrapCallback(function(){})),n.promise},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tr=function(){function e(t,n,r,i){this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return Object.defineProperty(e.prototype,"key",{get:function(){return Ae(this._path)?null:Kw(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new mi(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_queryIdentifier",{get:function(){var t=MC(this._queryParams),n=Fw(t);return n==="{}"?"default":n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_queryObject",{get:function(){return MC(this._queryParams)},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){if(t=Ee(t),!(t instanceof e))return!1;var n=this._repo===t._repo,r=Hw(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i},e.prototype.toJSON=function(){return this.toString()},e.prototype.toString=function(){return this._repo.toString()+kB(this._path)},e}();function Op(e,t){if(e._orderByCalled===!0)throw new Error(t+": You can't combine multiple orderBy calls.")}function xo(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===ai){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){var s=e.getIndexStartName();if(s!==ji)throw new Error(r);if(typeof t!="string")throw new Error(i)}if(e.hasEnd()){var u=e.getIndexEndName();if(u!==pi)throw new Error(r);if(typeof n!="string")throw new Error(i)}}else if(e.getIndex()===Xe){if(t!=null&&!vl(t)||n!=null&&!vl(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(H(e.getIndex()instanceof Gw||e.getIndex()===$w,"unknown index type."),t!=null&&typeof t=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Pp(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var mi=function(e){Z(t,e);function t(n,r){return e.call(this,n,r,new s1,!1)||this}return Object.defineProperty(t.prototype,"parent",{get:function(){var n=QR(this._path);return n===null?null:new t(this._repo,n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){for(var n=this;n.parent!==null;)n=n.parent;return n},enumerable:!1,configurable:!0}),t}(Tr),Dp=function(){function e(t,n,r){this._node=t,this.ref=n,this._index=r}return Object.defineProperty(e.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),e.prototype.child=function(t){var n=new Ke(t),r=Us(this.ref,t);return new e(this._node.getChild(n),r,Xe)},e.prototype.exists=function(){return!this._node.isEmpty()},e.prototype.exportVal=function(){return this._node.val(!0)},e.prototype.forEach=function(t){var n=this;if(this._node.isLeafNode())return!1;var r=this._node;return!!r.forEachChild(this._index,function(i,s){return t(new e(s,Us(n.ref,i),Xe))})},e.prototype.hasChild=function(t){var n=new Ke(t);return!this._node.getChild(n).isEmpty()},e.prototype.hasChildren=function(){return this._node.isLeafNode()?!1:!this._node.isEmpty()},e.prototype.toJSON=function(){return this.exportVal()},e.prototype.val=function(){return this._node.val()},e}();function q1(e,t){return e=Ee(e),e._checkNotDeleted("ref"),t!==void 0?Us(e._root,t):e._root}function JC(e,t){e=Ee(e),e._checkNotDeleted("refFromURL");var n=b_(t,e._repo.repoInfo_.nodeAdmin);O1("refFromURL",n);var r=n.repoInfo;return!e._repo.repoInfo_.isCustomHost()&&r.host!==e._repo.repoInfo_.host&&di("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),q1(e,n.path.toString())}function Us(e,t){return e=Ee(e),Ce(e._path)===null?Sq("child","path",t,!1):gl("child","path",t,!1),new mi(e._repo,ot(e._path,t))}function Xq(e,t){e=Ee(e),pr("push",e._path),vi("push",t,e._path,!0);var n=x1(e._repo),r=YB(n),i=Us(e,r),s=Us(e,r),u;return t!=null?u=mb(s,t).then(function(){return s}):u=Promise.resolve(s),i.then=u.then.bind(u),i.catch=u.then.bind(u,void 0),i}function Jq(e){return pr("remove",e._path),mb(e,null)}function mb(e,t){e=Ee(e),pr("set",e._path),vi("set",t,e._path,!1);var n=new Bt;return pb(e._repo,e._path,t,null,n.wrapCallback(function(){})),n.promise}function Zq(e,t){e=Ee(e),pr("setPriority",e._path),fb("setPriority",t,!1);var n=new Bt;return pb(e._repo,ot(e._path,".priority"),t,null,n.wrapCallback(function(){})),n.promise}function eK(e,t,n){if(pr("setWithPriority",e._path),vi("setWithPriority",t,e._path,!1),fb("setWithPriority",n,!1),e.key===".length"||e.key===".keys")throw"setWithPriority failed: "+e.key+" is a read-only object.";var r=new Bt;return pb(e._repo,e._path,t,n,r.wrapCallback(function(){})),r.promise}function tK(e,t){R1("update",t,e._path,!1);var n=new Bt;return Lq(e._repo,e._path,t,n.wrapCallback(function(){})),n.promise}function nK(e){return e=Ee(e),xq(e._repo,e).then(function(t){return new Dp(t,new mi(e._repo,e._path),e._queryParams.getIndex())})}var K1=function(){function e(t){this.callbackContext=t}return e.prototype.respondsTo=function(t){return t==="value"},e.prototype.createEvent=function(t,n){var r=n._queryParams.getIndex();return new j1("value",this,new Dp(t.snapshotNode,new mi(n._repo,n._path),r))},e.prototype.getEventRunner=function(t){var n=this;return t.getEventType()==="cancel"?function(){return n.callbackContext.onCancel(t.error)}:function(){return n.callbackContext.onValue(t.snapshot,null)}},e.prototype.createCancelEvent=function(t,n){return this.callbackContext.hasCancelCallback?new V1(this,t,n):null},e.prototype.matches=function(t){return t instanceof e?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1},e.prototype.hasAnyCallback=function(){return this.callbackContext!==null},e}(),H1=function(){function e(t,n){this.eventType=t,this.callbackContext=n}return e.prototype.respondsTo=function(t){var n=t==="children_added"?"child_added":t;return n=n==="children_removed"?"child_removed":n,this.eventType===n},e.prototype.createCancelEvent=function(t,n){return this.callbackContext.hasCancelCallback?new V1(this,t,n):null},e.prototype.createEvent=function(t,n){H(t.childName!=null,"Child events should have a childName.");var r=Us(new mi(n._repo,n._path),t.childName),i=n._queryParams.getIndex();return new j1(t.type,this,new Dp(t.snapshotNode,r,i),t.prevName)},e.prototype.getEventRunner=function(t){var n=this;return t.getEventType()==="cancel"?function(){return n.callbackContext.onCancel(t.error)}:function(){return n.callbackContext.onValue(t.snapshot,t.prevName)}},e.prototype.matches=function(t){return t instanceof e?this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)):!1},e.prototype.hasAnyCallback=function(){return!!this.callbackContext},e}();function $l(e,t,n,r,i){var s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){var u=n,c=function(p,g){w_(e._repo,e,h),u(p,g)};c.userCallback=n.userCallback,c.context=n.context,n=c}var l=new B1(n,s||void 0),h=t==="value"?new K1(l):new H1(t,l);return Vq(e._repo,e,h),function(){return w_(e._repo,e,h)}}function E_(e,t,n,r){return $l(e,"value",t,n,r)}function ZC(e,t,n,r){return $l(e,"child_added",t,n,r)}function eA(e,t,n,r){return $l(e,"child_changed",t,n,r)}function tA(e,t,n,r){return $l(e,"child_moved",t,n,r)}function nA(e,t,n,r){return $l(e,"child_removed",t,n,r)}function rA(e,t,n){var r=null,i=n?new B1(n):null;t==="value"?r=new K1(i):t&&(r=new H1(t,i)),w_(e._repo,e,r)}var Gr=function(){function e(){}return e}(),W1=function(e){Z(t,e);function t(n,r){var i=e.call(this)||this;return i._value=n,i._key=r,i}return t.prototype._apply=function(n){vi("endAt",this._value,n._path,!0);var r=l_(n._queryParams,this._value,this._key);if(Pp(r),xo(r),n._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Tr(n._repo,n._path,r,n._orderByCalled)},t}(Gr);function rK(e,t){return Wl("endAt","key",t,!0),new W1(e,t)}var iK=function(e){Z(t,e);function t(n,r){var i=e.call(this)||this;return i._value=n,i._key=r,i}return t.prototype._apply=function(n){vi("endBefore",this._value,n._path,!1);var r=r3(n._queryParams,this._value,this._key);if(Pp(r),xo(r),n._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Tr(n._repo,n._path,r,n._orderByCalled)},t}(Gr);function oK(e,t){return Wl("endBefore","key",t,!0),new iK(e,t)}var G1=function(e){Z(t,e);function t(n,r){var i=e.call(this)||this;return i._value=n,i._key=r,i}return t.prototype._apply=function(n){vi("startAt",this._value,n._path,!0);var r=c_(n._queryParams,this._value,this._key);if(Pp(r),xo(r),n._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Tr(n._repo,n._path,r,n._orderByCalled)},t}(Gr);function sK(e,t){return e===void 0&&(e=null),Wl("startAt","key",t,!0),new G1(e,t)}var aK=function(e){Z(t,e);function t(n,r){var i=e.call(this)||this;return i._value=n,i._key=r,i}return t.prototype._apply=function(n){vi("startAfter",this._value,n._path,!1);var r=n3(n._queryParams,this._value,this._key);if(Pp(r),xo(r),n._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Tr(n._repo,n._path,r,n._orderByCalled)},t}(Gr);function uK(e,t){return Wl("startAfter","key",t,!0),new aK(e,t)}var cK=function(e){Z(t,e);function t(n){var r=e.call(this)||this;return r._limit=n,r}return t.prototype._apply=function(n){if(n._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Tr(n._repo,n._path,e3(n._queryParams,this._limit),n._orderByCalled)},t}(Gr);function lK(e){if(typeof e!="number"||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new cK(e)}var fK=function(e){Z(t,e);function t(n){var r=e.call(this)||this;return r._limit=n,r}return t.prototype._apply=function(n){if(n._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Tr(n._repo,n._path,t3(n._queryParams,this._limit),n._orderByCalled)},t}(Gr);function hK(e){if(typeof e!="number"||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new fK(e)}var dK=function(e){Z(t,e);function t(n){var r=e.call(this)||this;return r._path=n,r}return t.prototype._apply=function(n){Op(n,"orderByChild");var r=new Ke(this._path);if(Ae(r))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var i=new Gw(r),s=mp(n._queryParams,i);return xo(s),new Tr(n._repo,n._path,s,!0)},t}(Gr);function pK(e){if(e==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(e==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(e==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return gl("orderByChild","path",e,!1),new dK(e)}var vK=function(e){Z(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype._apply=function(n){Op(n,"orderByKey");var r=mp(n._queryParams,ai);return xo(r),new Tr(n._repo,n._path,r,!0)},t}(Gr);function gK(){return new vK}var mK=function(e){Z(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype._apply=function(n){Op(n,"orderByPriority");var r=mp(n._queryParams,Xe);return xo(r),new Tr(n._repo,n._path,r,!0)},t}(Gr);function yK(){return new mK}var _K=function(e){Z(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype._apply=function(n){Op(n,"orderByValue");var r=mp(n._queryParams,$w);return xo(r),new Tr(n._repo,n._path,r,!0)},t}(Gr);function wK(){return new _K}var bK=function(e){Z(t,e);function t(n,r){var i=e.call(this)||this;return i._value=n,i._key=r,i}return t.prototype._apply=function(n){if(vi("equalTo",this._value,n._path,!1),n._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(n._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new W1(this._value,this._key)._apply(new G1(this._value,this._key)._apply(n))},t}(Gr);function EK(e,t){return Wl("equalTo","key",t,!0),new bK(e,t)}function Dr(e){for(var t,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var s=Ee(e);try{for(var u=Kt(r),c=u.next();!c.done;c=u.next()){var l=c.value;s=l._apply(s)}}catch(h){t={error:h}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}return s}$3(mi);J3(mi);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var TK="FIREBASE_DATABASE_EMULATOR_HOST",T_={},$1=!1;function IK(e,t,n,r){e.repoInfo_=new Vw(t+":"+n,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams),r&&(e.authTokenProvider_=r)}function z1(e,t,n,r,i){var s=r||e.options.databaseURL;s===void 0&&(e.options.projectId||di("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ut("Using default host for project ",e.options.projectId),s=e.options.projectId+"-default-rtdb.firebaseio.com");var u=b_(s,i),c=u.repoInfo,l,h=void 0;typeof process<"u"&&(h=process.env[TK]),h?(l=!0,s="http://"+h+"?ns="+c.namespace,u=b_(s,i),c=u.repoInfo):l=!u.repoInfo.secure;var p=i&&l?new Wc(Wc.OWNER):new eB(e.name,e.options,t);O1("Invalid Firebase Database URL",u),Ae(u.path)||di("Database URL must point to the root of a Firebase Database (not including a child path).");var g=CK(c,e,p,new ZV(e.name,n));return new kK(g,e)}function SK(e,t){var n=T_[t];(!n||n[e.key]!==e)&&di("Database "+t+"("+e.repoInfo_+") has already been deleted."),L1(e),delete n[e.key]}function CK(e,t,n,r){var i=T_[t.name];i||(i={},T_[t.name]=i);var s=i[e.toURLString()];return s&&di("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Rq(e,$1,n,r),i[e.toURLString()]=s,s}function AK(e){$1=e}var kK=function(){function e(t,n){this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return Object.defineProperty(e.prototype,"_repo",{get:function(){return this._instanceStarted||(Oq(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new mi(this._repo,Be())),this._rootInternal},enumerable:!1,configurable:!0}),e.prototype._delete=function(){return this._rootInternal!==null&&(SK(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()},e.prototype._checkNotDeleted=function(t){this._rootInternal===null&&di("Cannot call "+t+" on a deleted database.")},e}();function NK(e,t,n,r){r===void 0&&(r={}),e=Ee(e),e._checkNotDeleted("useEmulator"),e._instanceStarted&&di("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal,s=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&di('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Wc(Wc.OWNER);else if(r.mockUserToken){var u=typeof r.mockUserToken=="string"?r.mockUserToken:Rw(r.mockUserToken,e.app.options.projectId);s=new Wc(u)}IK(i,t,n,s)}function RK(e){e=Ee(e),e._checkNotDeleted("goOffline"),L1(e._repo)}function OK(e){e=Ee(e),e._checkNotDeleted("goOnline"),Bq(e._repo)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var PK={".sv":"timestamp"};function DK(){return PK}function xK(e){return{".sv":{increment:e}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var LK=function(){function e(t,n){this.committed=t,this.snapshot=n}return e.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},e}();function MK(e,t,n){var r;if(e=Ee(e),pr("Reference.transaction",e._path),e.key===".length"||e.key===".keys")throw"Reference.transaction failed: "+e.key+" is a read-only object.";var i=(r=n==null?void 0:n.applyLocally)!==null&&r!==void 0?r:!0,s=new Bt,u=function(l,h,p){var g=null;l?s.reject(l):(g=new Dp(p,new mi(e._repo,e._path),Xe),s.resolve(new LK(h,g)))},c=E_(e,function(){});return Hq(e._repo,e._path,t,u,c,i),s.promise}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var FK=function(){function e(t){this._delegate=t}return e.prototype.cancel=function(t){pe("OnDisconnect.cancel",0,1,arguments.length),Ft("OnDisconnect.cancel","onComplete",t,!0);var n=this._delegate.cancel();return t&&n.then(function(){return t(null)},function(r){return t(r)}),n},e.prototype.remove=function(t){pe("OnDisconnect.remove",0,1,arguments.length),Ft("OnDisconnect.remove","onComplete",t,!0);var n=this._delegate.remove();return t&&n.then(function(){return t(null)},function(r){return t(r)}),n},e.prototype.set=function(t,n){pe("OnDisconnect.set",1,2,arguments.length),Ft("OnDisconnect.set","onComplete",n,!0);var r=this._delegate.set(t);return n&&r.then(function(){return n(null)},function(i){return n(i)}),r},e.prototype.setWithPriority=function(t,n,r){pe("OnDisconnect.setWithPriority",2,3,arguments.length),Ft("OnDisconnect.setWithPriority","onComplete",r,!0);var i=this._delegate.setWithPriority(t,n);return r&&i.then(function(){return r(null)},function(s){return r(s)}),i},e.prototype.update=function(t,n){if(pe("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){for(var r={},i=0;i<t.length;++i)r[""+i]=t[i];t=r,Jt("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ft("OnDisconnect.update","onComplete",n,!0);var s=this._delegate.update(t);return n&&s.then(function(){return n(null)},function(u){return n(u)}),s},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var UK=function(){function e(t,n){this.committed=t,this.snapshot=n}return e.prototype.toJSON=function(){return pe("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qc=function(){function e(t,n){this._database=t,this._delegate=n}return e.prototype.val=function(){return pe("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},e.prototype.exportVal=function(){return pe("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},e.prototype.toJSON=function(){return pe("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},e.prototype.exists=function(){return pe("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},e.prototype.child=function(t){return pe("DataSnapshot.child",0,1,arguments.length),t=String(t),gl("DataSnapshot.child","path",t,!1),new e(this._database,this._delegate.child(t))},e.prototype.hasChild=function(t){return pe("DataSnapshot.hasChild",1,1,arguments.length),gl("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)},e.prototype.getPriority=function(){return pe("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},e.prototype.forEach=function(t){var n=this;return pe("DataSnapshot.forEach",1,1,arguments.length),Ft("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(function(r){return t(new e(n._database,r))})},e.prototype.hasChildren=function(){return pe("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(e.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),e.prototype.numChildren=function(){return pe("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},e.prototype.getRef=function(){return pe("DataSnapshot.ref",0,0,arguments.length),new bs(this._database,this._delegate.ref)},Object.defineProperty(e.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),e}(),Q1=function(){function e(t,n){this.database=t,this._delegate=n}return e.prototype.on=function(t,n,r,i){var s=this,u;pe("Query.on",2,4,arguments.length),Ft("Query.on","callback",n,!1);var c=e.getCancelAndContextArgs_("Query.on",r,i),l=function(p,g){n.call(c.context,new Qc(s.database,p),g)};l.userCallback=n,l.context=c.context;var h=(u=c.cancel)===null||u===void 0?void 0:u.bind(c.context);switch(t){case"value":return E_(this._delegate,l,h),n;case"child_added":return ZC(this._delegate,l,h),n;case"child_removed":return nA(this._delegate,l,h),n;case"child_changed":return eA(this._delegate,l,h),n;case"child_moved":return tA(this._delegate,l,h),n;default:throw new Error(Un("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},e.prototype.off=function(t,n,r){if(pe("Query.off",0,3,arguments.length),Iq("Query.off",t,!0),Ft("Query.off","callback",n,!0),mC("Query.off","context",r,!0),n){var i=function(){};i.userCallback=n,i.context=r,rA(this._delegate,t,i)}else rA(this._delegate,t)},e.prototype.get=function(){var t=this;return nK(this._delegate).then(function(n){return new Qc(t.database,n)})},e.prototype.once=function(t,n,r,i){var s=this;pe("Query.once",1,4,arguments.length),Ft("Query.once","callback",n,!0);var u=e.getCancelAndContextArgs_("Query.once",r,i),c=new Bt,l=function(p,g){var m=new Qc(s.database,p);n&&n.call(u.context,m,g),c.resolve(m)};l.userCallback=n,l.context=u.context;var h=function(p){u.cancel&&u.cancel.call(u.context,p),c.reject(p)};switch(t){case"value":E_(this._delegate,l,h,{onlyOnce:!0});break;case"child_added":ZC(this._delegate,l,h,{onlyOnce:!0});break;case"child_removed":nA(this._delegate,l,h,{onlyOnce:!0});break;case"child_changed":eA(this._delegate,l,h,{onlyOnce:!0});break;case"child_moved":tA(this._delegate,l,h,{onlyOnce:!0});break;default:throw new Error(Un("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise},e.prototype.limitToFirst=function(t){return pe("Query.limitToFirst",1,1,arguments.length),new e(this.database,Dr(this._delegate,lK(t)))},e.prototype.limitToLast=function(t){return pe("Query.limitToLast",1,1,arguments.length),new e(this.database,Dr(this._delegate,hK(t)))},e.prototype.orderByChild=function(t){return pe("Query.orderByChild",1,1,arguments.length),new e(this.database,Dr(this._delegate,pK(t)))},e.prototype.orderByKey=function(){return pe("Query.orderByKey",0,0,arguments.length),new e(this.database,Dr(this._delegate,gK()))},e.prototype.orderByPriority=function(){return pe("Query.orderByPriority",0,0,arguments.length),new e(this.database,Dr(this._delegate,yK()))},e.prototype.orderByValue=function(){return pe("Query.orderByValue",0,0,arguments.length),new e(this.database,Dr(this._delegate,wK()))},e.prototype.startAt=function(t,n){return t===void 0&&(t=null),pe("Query.startAt",0,2,arguments.length),new e(this.database,Dr(this._delegate,sK(t,n)))},e.prototype.startAfter=function(t,n){return t===void 0&&(t=null),pe("Query.startAfter",0,2,arguments.length),new e(this.database,Dr(this._delegate,uK(t,n)))},e.prototype.endAt=function(t,n){return t===void 0&&(t=null),pe("Query.endAt",0,2,arguments.length),new e(this.database,Dr(this._delegate,rK(t,n)))},e.prototype.endBefore=function(t,n){return t===void 0&&(t=null),pe("Query.endBefore",0,2,arguments.length),new e(this.database,Dr(this._delegate,oK(t,n)))},e.prototype.equalTo=function(t,n){return pe("Query.equalTo",1,2,arguments.length),new e(this.database,Dr(this._delegate,EK(t,n)))},e.prototype.toString=function(){return pe("Query.toString",0,0,arguments.length),this._delegate.toString()},e.prototype.toJSON=function(){return pe("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},e.prototype.isEqual=function(t){if(pe("Query.isEqual",1,1,arguments.length),!(t instanceof e)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(t._delegate)},e.getCancelAndContextArgs_=function(t,n,r){var i={cancel:void 0,context:void 0};if(n&&r)i.cancel=n,Ft(t,"cancel",i.cancel,!0),i.context=r,mC(t,"context",i.context,!0);else if(n)if(typeof n=="object"&&n!==null)i.context=n;else if(typeof n=="function")i.cancel=n;else throw new Error(Un(t,"cancelOrContext")+" must either be a cancel callback or a context object.");return i},Object.defineProperty(e.prototype,"ref",{get:function(){return new bs(this.database,new mi(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),e}(),bs=function(e){Z(t,e);function t(n,r){var i=e.call(this,n,new Tr(r._repo,r._path,new s1,!1))||this;return i.database=n,i._delegate=r,i}return t.prototype.getKey=function(){return pe("Reference.key",0,0,arguments.length),this._delegate.key},t.prototype.child=function(n){return pe("Reference.child",1,1,arguments.length),typeof n=="number"&&(n=String(n)),new t(this.database,Us(this._delegate,n))},t.prototype.getParent=function(){pe("Reference.parent",0,0,arguments.length);var n=this._delegate.parent;return n?new t(this.database,n):null},t.prototype.getRoot=function(){return pe("Reference.root",0,0,arguments.length),new t(this.database,this._delegate.root)},t.prototype.set=function(n,r){pe("Reference.set",1,2,arguments.length),Ft("Reference.set","onComplete",r,!0);var i=mb(this._delegate,n);return r&&i.then(function(){return r(null)},function(s){return r(s)}),i},t.prototype.update=function(n,r){if(pe("Reference.update",1,2,arguments.length),Array.isArray(n)){for(var i={},s=0;s<n.length;++s)i[""+s]=n[s];n=i,Jt("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}pr("Reference.update",this._delegate._path),Ft("Reference.update","onComplete",r,!0);var u=tK(this._delegate,n);return r&&u.then(function(){return r(null)},function(c){return r(c)}),u},t.prototype.setWithPriority=function(n,r,i){pe("Reference.setWithPriority",2,3,arguments.length),Ft("Reference.setWithPriority","onComplete",i,!0);var s=eK(this._delegate,n,r);return i&&s.then(function(){return i(null)},function(u){return i(u)}),s},t.prototype.remove=function(n){pe("Reference.remove",0,1,arguments.length),Ft("Reference.remove","onComplete",n,!0);var r=Jq(this._delegate);return n&&r.then(function(){return n(null)},function(i){return n(i)}),r},t.prototype.transaction=function(n,r,i){var s=this;pe("Reference.transaction",1,3,arguments.length),Ft("Reference.transaction","transactionUpdate",n,!1),Ft("Reference.transaction","onComplete",r,!0),Cq("Reference.transaction","applyLocally",i,!0);var u=MK(this._delegate,n,{applyLocally:i}).then(function(c){return new UK(c.committed,new Qc(s.database,c.snapshot))});return r&&u.then(function(c){return r(null,c.committed,c.snapshot)},function(c){return r(c,!1,null)}),u},t.prototype.setPriority=function(n,r){pe("Reference.setPriority",1,2,arguments.length),Ft("Reference.setPriority","onComplete",r,!0);var i=Zq(this._delegate,n);return r&&i.then(function(){return r(null)},function(s){return r(s)}),i},t.prototype.push=function(n,r){var i=this;pe("Reference.push",0,2,arguments.length),Ft("Reference.push","onComplete",r,!0);var s=Xq(this._delegate,n),u=s.then(function(l){return new t(i.database,l)});r&&u.then(function(){return r(null)},function(l){return r(l)});var c=new t(this.database,s);return c.then=u.then.bind(u),c.catch=u.catch.bind(u,void 0),c},t.prototype.onDisconnect=function(){return pr("Reference.onDisconnect",this._delegate._path),new FK(new Yq(this._delegate._repo,this._delegate._path))},Object.defineProperty(t.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),t}(Q1);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wd=function(){function e(t,n){var r=this;this._delegate=t,this.app=n,this.INTERNAL={delete:function(){return r._delegate._delete()}}}return e.prototype.useEmulator=function(t,n,r){r===void 0&&(r={}),NK(this._delegate,t,n,r)},e.prototype.ref=function(t){if(pe("database.ref",0,1,arguments.length),t instanceof bs){var n=JC(this._delegate,t.toString());return new bs(this,n)}else{var n=q1(this._delegate,t);return new bs(this,n)}},e.prototype.refFromURL=function(t){var n="database.refFromURL";pe(n,1,1,arguments.length);var r=JC(this._delegate,t);return new bs(this,r)},e.prototype.goOffline=function(){return pe("database.goOffline",0,0,arguments.length),RK(this._delegate)},e.prototype.goOnline=function(){return pe("database.goOnline",0,0,arguments.length),OK(this._delegate)},e.ServerValue={TIMESTAMP:DK(),increment:function(t){return xK(t)}},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jK=function(){ms.forceDisallow(),qw.forceAllow()},VK=function(){qw.forceDisallow()},BK=function(){return ms.isAvailable()},qK=function(e,t){var n=e._delegate._repo.persistentConnection_;n.securityDebugCallback_=t},KK=function(e,t){qq(e._delegate._repo,t)},HK=function(e,t){Kq(e._delegate._repo,t)},WK=function(e){return e._delegate._repo.dataUpdateCount},GK=function(e,t){return Pq(e._delegate._repo,t)};function $K(e){var t=e.app,n=e.url,r=e.version,i=e.customAuthImpl,s=e.namespace,u=e.nodeAdmin,c=u===void 0?!1:u;IR(r);var l=new yR("auth-internal",new _R("database-standalone"));return l.setComponent(new dn("auth-internal",function(){return i},"PRIVATE")),{instance:new wd(z1(t,l,void 0,n,c),t),namespace:s}}var zK=Object.freeze({__proto__:null,forceLongPolling:jK,forceWebSockets:VK,isWebSocketsAvailable:BK,setSecurityDebugCallback:qK,stats:KK,statsIncrementCounter:HK,dataUpdateCount:WK,interceptServerData:GK,initStandalone:$K});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var QK=Rs;Rs.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)};Rs.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};var YK=GR,XK=function(e){var t=Rs.prototype.put;return Rs.prototype.put=function(n,r,i,s){s!==void 0&&(s=e()),t.call(this,n,r,i,s)},function(){Rs.prototype.put=t}},JK=Vw,ZK=function(e){return e._delegate._queryIdentifier},eH=function(e){AK(e)},tH=Object.freeze({__proto__:null,DataConnection:QK,RealTimeConnection:YK,hijackHash:XK,ConnectionTarget:JK,queryIdentifier:ZK,forceRestClient:eH});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nH=wd.ServerValue;function rH(e){IR(e.SDK_VERSION),e.INTERNAL.registerComponent(new dn("database",function(t,n){var r=n.instanceIdentifier,i=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),u=t.getProvider("app-check-internal");return new wd(z1(i,s,u,r),i)},"PUBLIC").setServiceProps({Reference:bs,Query:Q1,Database:wd,DataSnapshot:Qc,enableLogging:kR,INTERNAL:zK,ServerValue:nH,TEST_ACCESS:tH}).setMultipleInstances(!0)),e.registerVersion(BV,qV)}rH(oe);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var I_=function(e,t){return I_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},I_(e,t)};function iH(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");I_(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function Y1(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var oH=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ee,yb=yb||{},ye=oH||self;function bd(){}function S_(e){var t=typeof e;return t=t!="object"?t:e?Array.isArray(e)?"array":t:"null",t=="array"||t=="object"&&typeof e.length=="number"}function zl(e){var t=typeof e;return t=="object"&&e!=null||t=="function"}function sH(e){return Object.prototype.hasOwnProperty.call(e,cy)&&e[cy]||(e[cy]=++aH)}var cy="closure_uid_"+(1e9*Math.random()>>>0),aH=0;function uH(e,t,n){return e.call.apply(e.bind,arguments)}function cH(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),e.apply(t,i)}}return function(){return e.apply(t,arguments)}}function Zt(e,t,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Zt=uH:Zt=cH,Zt.apply(null,arguments)}function kh(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),e.apply(this,r)}}function nn(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(r,i,s){for(var u=Array(arguments.length-2),c=2;c<arguments.length;c++)u[c-2]=arguments[c];return t.prototype[i].apply(r,u)}}function Lo(){this.s=this.s,this.o=this.o}var lH=0;Lo.prototype.s=!1;Lo.prototype.na=function(){!this.s&&(this.s=!0,this.M(),lH!=0)&&sH(this)};Lo.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var X1=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(typeof e=="string")return typeof t!="string"||t.length!=1?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},J1=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=typeof e=="string"?e.split(""):e,s=0;s<r;s++)s in i&&t.call(n,i[s],s,e)};function fH(e){e:{for(var t=nW,n=e.length,r=typeof e=="string"?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:typeof e=="string"?e.charAt(t):e[t]}function iA(e){return Array.prototype.concat.apply([],arguments)}function _b(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Ed(e){return/^[\s\xa0]*$/.test(e)}var oA=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function In(e,t){return e.indexOf(t)!=-1}function ly(e,t){return e<t?-1:e>t?1:0}var Sn;e:{var sA=ye.navigator;if(sA){var aA=sA.userAgent;if(aA){Sn=aA;break e}}Sn=""}function wb(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Z1(e){var t={};for(var n in e)t[n]=e[n];return t}var uA="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function eO(e,t){for(var n,r,i=1;i<arguments.length;i++){r=arguments[i];for(n in r)e[n]=r[n];for(var s=0;s<uA.length;s++)n=uA[s],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function bb(e){return bb[" "](e),e}bb[" "]=bd;function hH(e){var t=vH;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}var dH=In(Sn,"Opera"),ru=In(Sn,"Trident")||In(Sn,"MSIE"),tO=In(Sn,"Edge"),C_=tO||ru,nO=In(Sn,"Gecko")&&!(In(Sn.toLowerCase(),"webkit")&&!In(Sn,"Edge"))&&!(In(Sn,"Trident")||In(Sn,"MSIE"))&&!In(Sn,"Edge"),pH=In(Sn.toLowerCase(),"webkit")&&!In(Sn,"Edge");function rO(){var e=ye.document;return e?e.documentMode:void 0}var Td;e:{var fy="",hy=function(){var e=Sn;if(nO)return/rv:([^\);]+)(\)|;)/.exec(e);if(tO)return/Edge\/([\d\.]+)/.exec(e);if(ru)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e);if(pH)return/WebKit\/(\S+)/.exec(e);if(dH)return/(?:Version)[ \/]?(\S+)/.exec(e)}();if(hy&&(fy=hy?hy[1]:""),ru){var dy=rO();if(dy!=null&&dy>parseFloat(fy)){Td=String(dy);break e}}Td=fy}var vH={};function gH(){return hH(function(){for(var e=0,t=oA(String(Td)).split("."),n=oA("9").split("."),r=Math.max(t.length,n.length),i=0;e==0&&i<r;i++){var s=t[i]||"",u=n[i]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],s[0].length==0&&u[0].length==0)break;e=ly(s[1].length==0?0:parseInt(s[1],10),u[1].length==0?0:parseInt(u[1],10))||ly(s[2].length==0,u[2].length==0)||ly(s[2],u[2]),s=s[3],u=u[3]}while(e==0)}return 0<=e})}var A_;if(ye.document&&ru){var cA=rO();A_=cA||parseInt(Td,10)||void 0}else A_=void 0;var mH=A_,yH=function(){if(!ye.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{ye.addEventListener("test",bd,t),ye.removeEventListener("test",bd,t)}catch{}return e}();function cn(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}cn.prototype.h=function(){this.defaultPrevented=!0};function ml(e,t){if(cn.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(nO){e:{try{bb(t.nodeName);var i=!0;break e}catch{}i=!1}i||(t=null)}}else n=="mouseover"?t=e.fromElement:n=="mouseout"&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=e.clientX!==void 0?e.clientX:e.pageX,this.clientY=e.clientY!==void 0?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=typeof e.pointerType=="string"?e.pointerType:_H[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&ml.Z.h.call(this)}}nn(ml,cn);var _H={2:"touch",3:"pen",4:"mouse"};ml.prototype.h=function(){ml.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Ql="closure_listenable_"+(1e6*Math.random()|0),wH=0;function bH(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++wH,this.ca=this.fa=!1}function xp(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function Lp(e){this.src=e,this.g={},this.h=0}Lp.prototype.add=function(e,t,n,r,i){var s=e.toString();e=this.g[s],e||(e=this.g[s]=[],this.h++);var u=N_(e,t,r,i);return-1<u?(t=e[u],n||(t.fa=!1)):(t=new bH(t,this.src,s,!!r,i),t.fa=n,e.push(t)),t};function k_(e,t){var n=t.type;if(n in e.g){var r=e.g[n],i=X1(r,t),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(xp(t),e.g[n].length==0&&(delete e.g[n],e.h--))}}function N_(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.ca&&s.listener==t&&s.capture==!!n&&s.ia==r)return i}return-1}var Eb="closure_lm_"+(1e6*Math.random()|0),py={};function iO(e,t,n,r,i){if(r&&r.once)return sO(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)iO(e,t[s],n,r,i);return null}return n=Sb(n),e&&e[Ql]?e.N(t,n,zl(r)?!!r.capture:!!r,i):oO(e,t,n,!1,r,i)}function oO(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var u=zl(i)?!!i.capture:!!i,c=Ib(e);if(c||(e[Eb]=c=new Lp(e)),n=c.add(t,n,r,u,s),n.proxy)return n;if(r=EH(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)yH||(i=u),i===void 0&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(uO(t.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function EH(){function e(n){return t.call(e.src,e.listener,n)}var t=TH;return e}function sO(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)sO(e,t[s],n,r,i);return null}return n=Sb(n),e&&e[Ql]?e.O(t,n,zl(r)?!!r.capture:!!r,i):oO(e,t,n,!0,r,i)}function aO(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)aO(e,t[s],n,r,i);else r=zl(r)?!!r.capture:!!r,n=Sb(n),e&&e[Ql]?(e=e.i,t=String(t).toString(),t in e.g&&(s=e.g[t],n=N_(s,n,r,i),-1<n&&(xp(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete e.g[t],e.h--)))):e&&(e=Ib(e))&&(t=e.g[t.toString()],e=-1,t&&(e=N_(t,n,r,i)),(n=-1<e?t[e]:null)&&Tb(n))}function Tb(e){if(typeof e!="number"&&e&&!e.ca){var t=e.src;if(t&&t[Ql])k_(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(uO(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Ib(t))?(k_(n,e),n.h==0&&(n.src=null,t[Eb]=null)):xp(e)}}}function uO(e){return e in py?py[e]:py[e]="on"+e}function TH(e,t){if(e.ca)e=!0;else{t=new ml(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&Tb(e),e=n.call(r,t)}return e}function Ib(e){return e=e[Eb],e instanceof Lp?e:null}var vy="__closure_events_fn_"+(1e9*Math.random()>>>0);function Sb(e){return typeof e=="function"?e:(e[vy]||(e[vy]=function(t){return e.handleEvent(t)}),e[vy])}function Ht(){Lo.call(this),this.i=new Lp(this),this.P=this,this.I=null}nn(Ht,Lo);Ht.prototype[Ql]=!0;Ht.prototype.removeEventListener=function(e,t,n,r){aO(this,e,t,n,r)};function en(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,typeof t=="string")t=new cn(t,e);else if(t instanceof cn)t.target=t.target||e;else{var i=t;t=new cn(r,e),eO(t,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var u=t.g=n[s];i=Nh(u,r,!0,t)&&i}if(u=t.g=e,i=Nh(u,r,!0,t)&&i,i=Nh(u,r,!1,t)&&i,n)for(s=0;s<n.length;s++)u=t.g=n[s],i=Nh(u,r,!1,t)&&i}Ht.prototype.M=function(){if(Ht.Z.M.call(this),this.i){var e=this.i,t;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)xp(n[r]);delete e.g[t],e.h--}}this.I=null};Ht.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)};Ht.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};function Nh(e,t,n,r){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var u=t[s];if(u&&!u.ca&&u.capture==n){var c=u.listener,l=u.ia||u.src;u.fa&&k_(e.i,u),i=c.call(l,r)!==!1&&i}}return i&&!r.defaultPrevented}var Cb=ye.JSON.stringify;function IH(){var e=lO,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var SH=function(){function e(){this.h=this.g=null}return e.prototype.add=function(t,n){var r=cO.get();r.set(t,n),this.h?this.h.next=r:this.g=r,this.h=r},e}(),cO=new(function(){function e(t,n){this.i=t,this.j=n,this.h=0,this.g=null}return e.prototype.get=function(){var t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t},e}())(function(){return new CH},function(e){return e.reset()}),CH=function(){function e(){this.next=this.g=this.h=null}return e.prototype.set=function(t,n){this.h=t,this.g=n,this.next=null},e.prototype.reset=function(){this.next=this.g=this.h=null},e}();function AH(e){ye.setTimeout(function(){throw e},0)}function Ab(e,t){R_||kH(),O_||(R_(),O_=!0),lO.add(e,t)}var R_;function kH(){var e=ye.Promise.resolve(void 0);R_=function(){e.then(NH)}}var O_=!1,lO=new SH;function NH(){for(var e;e=IH();){try{e.h.call(e.g)}catch(n){AH(n)}var t=cO;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}O_=!1}function Mp(e,t){Ht.call(this),this.h=e||1,this.g=t||ye,this.j=Zt(this.kb,this),this.l=Date.now()}nn(Mp,Ht);ee=Mp.prototype;ee.da=!1;ee.S=null;ee.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),en(this,"tick"),this.da&&(kb(this),this.start()))}};ee.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function kb(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}ee.M=function(){Mp.Z.M.call(this),kb(this),delete this.g};function Nb(e,t,n){if(typeof e=="function")n&&(e=Zt(e,n));else if(e&&typeof e.handleEvent=="function")e=Zt(e.handleEvent,e);else throw Error("Invalid listener argument");return 2147483647<Number(t)?-1:ye.setTimeout(e,t||0)}function fO(e){e.g=Nb(function(){e.g=null,e.i&&(e.i=!1,fO(e))},e.j);var t=e.h;e.h=null,e.m.apply(null,t)}var RH=function(e){iH(t,e);function t(n,r){var i=e.call(this)||this;return i.m=n,i.j=r,i.h=null,i.i=!1,i.g=null,i}return t.prototype.l=function(n){this.h=arguments,this.g?this.i=!0:fO(this)},t.prototype.M=function(){e.prototype.M.call(this),this.g&&(ye.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},t}(Lo);function yl(e){Lo.call(this),this.h=e,this.g={}}nn(yl,Lo);var lA=[];function hO(e,t,n,r){Array.isArray(n)||(n&&(lA[0]=n.toString()),n=lA);for(var i=0;i<n.length;i++){var s=iO(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function dO(e){wb(e.g,function(t,n){this.g.hasOwnProperty(n)&&Tb(t)},e),e.g={}}yl.prototype.M=function(){yl.Z.M.call(this),dO(this)};yl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Fp(){this.g=!0}Fp.prototype.Aa=function(){this.g=!1};function OH(e,t,n,r,i,s){e.info(function(){if(e.g)if(s)for(var u="",c=s.split("&"),l=0;l<c.length;l++){var h=c[l].split("=");if(1<h.length){var p=h[0];h=h[1];var g=p.split("_");u=2<=g.length&&g[1]=="type"?u+(p+"="+h+"&"):u+(p+"=redacted&")}}else u=null;else u=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+`
`+n+`
`+u})}function PH(e,t,n,r,i,s,u){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+`
`+n+`
`+s+" "+u})}function Ua(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+xH(e,n)+(r?" "+r:"")})}function DH(e,t){e.info(function(){return"TIMEOUT: "+t})}Fp.prototype.info=function(){};function xH(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n){for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var u=1;u<i.length;u++)i[u]=""}}}}return Cb(n)}catch{return t}}var Js={},fA=null;function Up(){return fA=fA||new Ht}Js.Ma="serverreachability";function pO(e){cn.call(this,Js.Ma,e)}nn(pO,cn);function _l(e){var t=Up();en(t,new pO(t))}Js.STAT_EVENT="statevent";function vO(e,t){cn.call(this,Js.STAT_EVENT,e),this.stat=t}nn(vO,cn);function An(e){var t=Up();en(t,new vO(t,e))}Js.Na="timingevent";function gO(e,t){cn.call(this,Js.Na,e),this.size=t}nn(gO,cn);function Yl(e,t){if(typeof e!="function")throw Error("Fn must not be null and must be a function");return ye.setTimeout(function(){e()},t)}var jp={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},mO={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Rb(){}Rb.prototype.h=null;function hA(e){return e.h||(e.h=e.i())}function yO(){}var Xl={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Ob(){cn.call(this,"d")}nn(Ob,cn);function Pb(){cn.call(this,"c")}nn(Pb,cn);var P_;function Vp(){}nn(Vp,Rb);Vp.prototype.g=function(){return new XMLHttpRequest};Vp.prototype.i=function(){return{}};P_=new Vp;function Jl(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new yl(this),this.P=LH,e=C_?125:void 0,this.W=new Mp(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new _O}function _O(){this.i=null,this.g="",this.h=!1}var LH=45e3,D_={},Id={};ee=Jl.prototype;ee.setTimeout=function(e){this.P=e};function x_(e,t,n){e.K=1,e.v=qp(Vi(t)),e.s=n,e.U=!0,wO(e,null)}function wO(e,t){e.F=Date.now(),Zl(e),e.A=Vi(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),AO(n.h,"t",r),e.C=0,n=e.l.H,e.h=new _O,e.g=$O(e.l,n?t:null,!e.s),0<e.O&&(e.L=new RH(Zt(e.Ia,e,e.g),e.O)),hO(e.V,e.g,"readystatechange",e.gb),t=e.H?Z1(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),_l(),OH(e.j,e.u,e.A,e.m,e.X,e.s)}ee.gb=function(e){e=e.target;var t=this.L;t&&Oi(e)==3?t.l():this.Ia(e)};ee.Ia=function(e){try{if(e==this.g)e:{var t=Oi(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(t!=3||C_||this.g&&(this.h.h||this.g.ga()||gA(this.g)))){this.I||t!=4||n==7||(n==8||0>=r?_l(3):_l(2)),Bp(this);var i=this.g.ba();this.N=i;t:if(bO(this)){var s=gA(this.g);e="";var u=s.length,c=Oi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Es(this),Yc(this);var l="";break t}this.h.i=new ye.TextDecoder}for(n=0;n<u;n++)this.h.h=!0,e+=this.h.i.decode(s[n],{stream:c&&n==u-1});s.splice(0,u),this.h.g+=e,this.C=0,l=this.h.g}else l=this.g.ga();if(this.i=i==200,PH(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var h,p=this.g;if((h=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ed(h)){var g=h;break t}}g=null}if(i=g)Ua(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,L_(this,i);else{this.i=!1,this.o=3,An(12),Es(this),Yc(this);break e}}this.U?(EO(this,t,l),C_&&this.i&&t==3&&(hO(this.V,this.W,"tick",this.fb),this.W.start())):(Ua(this.j,this.m,l,null),L_(this,l)),t==4&&Es(this),this.i&&!this.I&&(t==4?KO(this.l,this):(this.i=!1,Zl(this)))}else i==400&&0<l.indexOf("Unknown SID")?(this.o=3,An(12)):(this.o=0,An(13)),Es(this),Yc(this)}}}catch{}finally{}};function bO(e){return e.g?e.u=="GET"&&e.K!=2&&e.l.Ba:!1}function EO(e,t,n){for(var r=!0,i;!e.I&&e.C<n.length;)if(i=MH(e,n),i==Id){t==4&&(e.o=4,An(14),r=!1),Ua(e.j,e.m,null,"[Incomplete Response]");break}else if(i==D_){e.o=4,An(15),Ua(e.j,e.m,n,"[Invalid Chunk]"),r=!1;break}else Ua(e.j,e.m,i,null),L_(e,i);bO(e)&&i!=Id&&i!=D_&&(e.h.g="",e.C=0),t!=4||n.length!=0||e.h.h||(e.o=1,An(16),r=!1),e.i=e.i&&r,r?0<n.length&&!e.aa&&(e.aa=!0,t=e.l,t.g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Bb(t),t.L=!0,An(11))):(Ua(e.j,e.m,n,"[Invalid Chunked Response]"),Es(e),Yc(e))}ee.fb=function(){if(this.g){var e=Oi(this.g),t=this.g.ga();this.C<t.length&&(Bp(this),EO(this,e,t),this.i&&e!=4&&Zl(this))}};function MH(e,t){var n=e.C,r=t.indexOf(`
`,n);return r==-1?Id:(n=Number(t.substring(n,r)),isNaN(n)?D_:(r+=1,r+n>t.length?Id:(t=t.substr(r,n),e.C=r+n,t)))}ee.cancel=function(){this.I=!0,Es(this)};function Zl(e){e.Y=Date.now()+e.P,TO(e,e.P)}function TO(e,t){if(e.B!=null)throw Error("WatchDog timer not null");e.B=Yl(Zt(e.eb,e),t)}function Bp(e){e.B&&(ye.clearTimeout(e.B),e.B=null)}ee.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(DH(this.j,this.A),this.K!=2&&(_l(),An(17)),Es(this),this.o=2,Yc(this)):TO(this,this.Y-e)};function Yc(e){e.l.G==0||e.I||KO(e.l,e)}function Es(e){Bp(e);var t=e.L;t&&typeof t.na=="function"&&t.na(),e.L=null,kb(e.W),dO(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function L_(e,t){try{var n=e.l;if(n.G!=0&&(n.g==e||M_(n.i,e))){if(n.I=e.N,!e.J&&M_(n.i,e)&&n.G==3){try{var r=n.Ca.g.parse(t)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.F+3e3<e.F)kd(n),Wp(n);else break e;Vb(n),An(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&n.A==0&&!n.v&&(n.v=Yl(Zt(n.ab,n),6e3));if(1>=RO(n.i)&&n.ka){try{n.ka()}catch{}n.ka=void 0}}else Ts(n,11)}else if((e.J||n.g==e)&&kd(n),!Ed(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var s=i[t];if(n.U=s[0],s=s[1],n.G==2)if(s[0]=="c"){n.J=s[1],n.la=s[2];var u=s[3];u!=null&&(n.ma=u,n.h.info("VER="+n.ma));var c=s[4];c!=null&&(n.za=c,n.h.info("SVER="+n.za));var l=s[5];l!=null&&typeof l=="number"&&0<l&&(r=1.5*l,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var h=e.g;if(h){var p=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var g=r.i;!g.g&&(In(p,"spdy")||In(p,"quic")||In(p,"h2"))&&(g.j=g.l,g.g=new Set,g.h&&(Lb(g,g.h),g.h=null))}if(r.D){var m=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;m&&(r.sa=m,it(r.F,r.D,m))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms")),r=n;var _=e;if(r.oa=GO(r,r.H?r.la:null,r.W),_.J){OO(r.i,_);var b=_,E=r.K;E&&b.setTimeout(E),b.B&&(Bp(b),Zl(b)),r.g=_}else BO(r);0<n.l.length&&Gp(n)}else s[0]!="stop"&&s[0]!="close"||Ts(n,7);else n.G==3&&(s[0]=="stop"||s[0]=="close"?s[0]=="stop"?Ts(n,7):jb(n):s[0]!="noop"&&n.j&&n.j.wa(s),n.A=0)}}_l(4)}catch{}}function FH(e){if(e.R&&typeof e.R=="function")return e.R();if(typeof e=="string")return e.split("");if(S_(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}t=[],n=0;for(r in e)t[n++]=e[r];return t}function Db(e,t){if(e.forEach&&typeof e.forEach=="function")e.forEach(t,void 0);else if(S_(e)||typeof e=="string")J1(e,t,void 0);else{if(e.T&&typeof e.T=="function")var n=e.T();else if(e.R&&typeof e.R=="function")n=void 0;else if(S_(e)||typeof e=="string"){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=FH(e),i=r.length;for(var s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}}function Ou(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Ou)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}ee=Ou.prototype;ee.R=function(){xb(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e};ee.T=function(){return xb(this),this.g.concat()};function xb(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];js(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)r=e.g[t],js(i,r)||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}ee.get=function(e,t){return js(this.h,e)?this.h[e]:t};ee.set=function(e,t){js(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t};ee.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);e.call(t,s,i,this)}};function js(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var IO=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function UH(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Vs(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Vs){this.g=t!==void 0?t:e.g,Sd(this,e.j),this.s=e.s,Cd(this,e.i),Ad(this,e.m),this.l=e.l,t=e.h;var n=new wl;n.i=t.i,t.g&&(n.g=new Ou(t.g),n.h=t.h),dA(this,n),this.o=e.o}else e&&(n=String(e).match(IO))?(this.g=!!t,Sd(this,n[1]||"",!0),this.s=Xc(n[2]||""),Cd(this,n[3]||"",!0),Ad(this,n[4]),this.l=Xc(n[5]||"",!0),dA(this,n[6]||"",!0),this.o=Xc(n[7]||"")):(this.g=!!t,this.h=new wl(null,this.g))}Vs.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Fc(t,pA,!0),":");var n=this.i;return(n||t=="file")&&(e.push("//"),(t=this.s)&&e.push(Fc(t,pA,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&e.push(":",String(n))),(n=this.l)&&(this.i&&n.charAt(0)!="/"&&e.push("/"),e.push(Fc(n,n.charAt(0)=="/"?KH:qH,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Fc(n,WH)),e.join("")};function Vi(e){return new Vs(e)}function Sd(e,t,n){e.j=n?Xc(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Cd(e,t,n){e.i=n?Xc(t,!0):t}function Ad(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function dA(e,t,n){t instanceof wl?(e.h=t,GH(e.h,e.g)):(n||(t=Fc(t,HH)),e.h=new wl(t,e.g))}function it(e,t,n){e.h.set(t,n)}function qp(e){return it(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function jH(e){return e instanceof Vs?Vi(e):new Vs(e,void 0)}function VH(e,t,n,r){var i=new Vs(null,void 0);return e&&Sd(i,e),t&&Cd(i,t),n&&Ad(i,n),r&&(i.l=r),i}function Xc(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Fc(e,t,n){return typeof e=="string"?(e=encodeURI(e).replace(t,BH),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function BH(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var pA=/[#\/\?@]/g,qH=/[#\?:]/g,KH=/[#\?]/g,HH=/[#\?@]/g,WH=/#/g;function wl(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Mo(e){e.g||(e.g=new Ou,e.h=0,e.i&&UH(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}ee=wl.prototype;ee.add=function(e,t){Mo(this),this.i=null,e=Pu(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this};function SO(e,t){Mo(e),t=Pu(e,t),js(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,e=e.g,js(e.h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&xb(e)))}function CO(e,t){return Mo(e),t=Pu(e,t),js(e.g.h,t)}ee.forEach=function(e,t){Mo(this),this.g.forEach(function(n,r){J1(n,function(i){e.call(t,i,r,this)},this)},this)};ee.T=function(){Mo(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],s=0;s<i.length;s++)n.push(t[r]);return n};ee.R=function(e){Mo(this);var t=[];if(typeof e=="string")CO(this,e)&&(t=iA(t,this.g.get(Pu(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=iA(t,e[n])}return t};ee.set=function(e,t){return Mo(this),this.i=null,e=Pu(this,e),CO(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this};ee.get=function(e,t){return e?(e=this.R(e),0<e.length?String(e[0]):t):t};function AO(e,t,n){SO(e,t),0<n.length&&(e.i=null,e.g.set(Pu(e,t),_b(n)),e.h+=n.length)}ee.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var u=i;r[s]!==""&&(u+="="+encodeURIComponent(String(r[s]))),e.push(u)}}return this.i=e.join("&")};function Pu(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function GH(e,t){t&&!e.j&&(Mo(e),e.i=null,e.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(SO(this,r),AO(this,i,n))},e)),e.j=t}var $H=function(){function e(t,n){this.h=t,this.g=n}return e}();function kO(e){this.l=e||zH,ye.PerformanceNavigationTiming?(e=ye.performance.getEntriesByType("navigation"),e=0<e.length&&(e[0].nextHopProtocol=="hq"||e[0].nextHopProtocol=="h2")):e=!!(ye.g&&ye.g.Ea&&ye.g.Ea()&&ye.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var zH=10;function NO(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function RO(e){return e.h?1:e.g?e.g.size:0}function M_(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function Lb(e,t){e.g?e.g.add(t):e.h=t}function OO(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}kO.prototype.cancel=function(){var e,t;if(this.i=PO(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){try{for(var n=Y1(this.g.values()),r=n.next();!r.done;r=n.next()){var i=r.value;i.cancel()}}catch(s){e={error:s}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.g.clear()}};function PO(e){var t,n;if(e.h!=null)return e.i.concat(e.h.D);if(e.g!=null&&e.g.size!==0){var r=e.i;try{for(var i=Y1(e.g.values()),s=i.next();!s.done;s=i.next()){var u=s.value;r=r.concat(u.D)}}catch(c){t={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}return _b(e.i)}function Mb(){}Mb.prototype.stringify=function(e){return ye.JSON.stringify(e,void 0)};Mb.prototype.parse=function(e){return ye.JSON.parse(e,void 0)};function QH(){this.g=new Mb}function YH(e,t,n){var r=n||"";try{Db(e,function(i,s){var u=i;zl(i)&&(u=Cb(i)),t.push(r+s+"="+encodeURIComponent(u))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function XH(e,t){var n=new Fp;if(ye.Image){var r=new Image;r.onload=kh(Rh,n,r,"TestLoadImage: loaded",!0,t),r.onerror=kh(Rh,n,r,"TestLoadImage: error",!1,t),r.onabort=kh(Rh,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=kh(Rh,n,r,"TestLoadImage: timeout",!1,t),ye.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}function Rh(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch{}}function ef(e){this.l=e.$b||null,this.j=e.ib||!1}nn(ef,Rb);ef.prototype.g=function(){return new Kp(this.l,this.j)};ef.prototype.i=function(e){return function(){return e}}({});function Kp(e,t){Ht.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Fb,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}nn(Kp,Ht);var Fb=0;ee=Kp.prototype;ee.open=function(e,t){if(this.readyState!=Fb)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,bl(this)};ee.send=function(e){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||ye).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))};ee.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,tf(this)),this.readyState=Fb};ee.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,bl(this)),this.g&&(this.readyState=3,bl(this),this.g)))if(this.responseType==="arraybuffer")e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof ye.ReadableStream<"u"&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;DO(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))};function DO(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}ee.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?tf(this):bl(this),this.readyState==3&&DO(this)}};ee.Ua=function(e){this.g&&(this.response=this.responseText=e,tf(this))};ee.Ta=function(e){this.g&&(this.response=e,tf(this))};ee.ha=function(){this.g&&tf(this)};function tf(e){e.readyState=4,e.l=null,e.j=null,e.A=null,bl(e)}ee.setRequestHeader=function(e,t){this.v.append(e,t)};ee.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""};ee.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join(`\r
`)};function bl(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty(Kp.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(e){this.m=e?"include":"same-origin"}});var JH=ye.JSON.parse;function St(e){Ht.call(this),this.headers=new Ou,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=xO,this.K=this.L=!1}nn(St,Ht);var xO="",ZH=/^https?$/i,eW=["POST","PUT"];ee=St.prototype;ee.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():P_.g(),this.C=this.u?hA(this.u):hA(P_),this.g.onreadystatechange=Zt(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(s){vA(this,s);return}e=n||"";var i=new Ou(this.headers);r&&Db(r,function(s,u){i.set(u,s)}),r=fH(i.T()),n=ye.FormData&&e instanceof ye.FormData,!(0<=X1(eW,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(s,u){this.g.setRequestHeader(u,s)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{FO(this),0<this.B&&((this.K=tW(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Zt(this.pa,this)):this.A=Nb(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){vA(this,s)}};function tW(e){return ru&&gH()&&typeof e.timeout=="number"&&e.ontimeout!==void 0}function nW(e){return e.toLowerCase()=="content-type"}ee.pa=function(){typeof yb<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,en(this,"timeout"),this.abort(8))};function vA(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,LO(e),Hp(e)}function LO(e){e.D||(e.D=!0,en(e,"complete"),en(e,"error"))}ee.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,en(this,"complete"),en(this,"abort"),Hp(this))};ee.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Hp(this,!0)),St.Z.M.call(this)};ee.Fa=function(){this.s||(this.F||this.v||this.l?MO(this):this.cb())};ee.cb=function(){MO(this)};function MO(e){if(e.h&&typeof yb<"u"&&(!e.C[1]||Oi(e)!=4||e.ba()!=2)){if(e.v&&Oi(e)==4)Nb(e.Fa,0,e);else if(en(e,"readystatechange"),Oi(e)==4){e.h=!1;try{var t=e.ba();e:switch(t){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var n=!0;break e;default:n=!1}var r;if(!(r=n)){var i;if(i=t===0){var s=String(e.H).match(IO)[1]||null;if(!s&&ye.self&&ye.self.location){var u=ye.self.location.protocol;s=u.substr(0,u.length-1)}i=!ZH.test(s?s.toLowerCase():"")}r=i}if(r)en(e,"complete"),en(e,"success");else{e.m=6;try{var c=2<Oi(e)?e.g.statusText:""}catch{c=""}e.j=c+" ["+e.ba()+"]",LO(e)}}finally{Hp(e)}}}}function Hp(e,t){if(e.g){FO(e);var n=e.g,r=e.C[0]?bd:null;e.g=null,e.C=null,t||en(e,"ready");try{n.onreadystatechange=r}catch{}}}function FO(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(ye.clearTimeout(e.A),e.A=null)}function Oi(e){return e.g?e.g.readyState:0}ee.ba=function(){try{return 2<Oi(this)?this.g.status:-1}catch{return-1}};ee.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}};ee.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),JH(t)}};function gA(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case xO:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}ee.Da=function(){return this.m};ee.La=function(){return typeof this.j=="string"?this.j:String(this.j)};function rW(e){var t="";return wb(e,function(n,r){t+=r,t+=":",t+=n,t+=`\r
`}),t}function Ub(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=rW(n),typeof e=="string"?n!=null&&encodeURIComponent(String(n)):it(e,t,n))}function Pc(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function UO(e){this.za=0,this.l=[],this.h=new Fp,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Pc("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Pc("baseRetryDelayMs",5e3,e),this.$a=Pc("retryDelaySeedMs",1e4,e),this.Ya=Pc("forwardChannelMaxRetries",2,e),this.ra=Pc("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new kO(e&&e.concurrentRequestLimit),this.Ca=new QH,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||e.Xb!==!1}ee=UO.prototype;ee.ma=8;ee.G=1;function jb(e){if(jO(e),e.G==3){var t=e.V++,n=Vi(e.F);it(n,"SID",e.J),it(n,"RID",t),it(n,"TYPE","terminate"),nf(e,n),t=new Jl(e,e.h,t,void 0),t.K=2,t.v=qp(Vi(n)),n=!1,ye.navigator&&ye.navigator.sendBeacon&&(n=ye.navigator.sendBeacon(t.v.toString(),"")),!n&&ye.Image&&(new Image().src=t.v,n=!0),n||(t.g=$O(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Zl(t)}WO(e)}ee.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch{}};function Wp(e){e.g&&(Bb(e),e.g.cancel(),e.g=null)}function jO(e){Wp(e),e.u&&(ye.clearTimeout(e.u),e.u=null),kd(e),e.i.cancel(),e.m&&(typeof e.m=="number"&&ye.clearTimeout(e.m),e.m=null)}function gy(e,t){e.l.push(new $H(e.Za++,t)),e.G==3&&Gp(e)}function Gp(e){NO(e.i)||e.m||(e.m=!0,Ab(e.Ha,e),e.C=0)}function iW(e,t){return RO(e.i)>=e.i.j-(e.m?1:0)?!1:e.m?(e.l=t.D.concat(e.l),!0):e.G==1||e.G==2||e.C>=(e.Xa?0:e.Ya)?!1:(e.m=Yl(Zt(e.Ha,e,t),HO(e,e.C)),e.C++,!0)}ee.Ha=function(e){if(this.m)if(this.m=null,this.G==1){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new Jl(this,this.h,e,void 0),n=this.s;if(this.P&&(n?(n=Z1(n),eO(n,this.P)):n=this.P),this.o===null&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){t:{var s=this.l[i];if("__data__"in s.g&&(s=s.g.__data__,typeof s=="string")){s=s.length;break t}s=void 0}if(s===void 0)break;if(r+=s,4096<r){r=i;break e}if(r===4096||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=VO(this,t,r),i=Vi(this.F),it(i,"RID",e),it(i,"CVER",22),this.D&&it(i,"X-HTTP-Session-Id",this.D),nf(this,i),this.o&&n&&Ub(i,this.o,n),Lb(this.i,t),this.Ra&&it(i,"TYPE","init"),this.ja?(it(i,"$req",r),it(i,"SID","null"),t.$=!0,x_(t,i,null)):x_(t,i,r),this.G=2}}else this.G==3&&(e?mA(this,e):this.l.length==0||NO(this.i)||mA(this))};function mA(e,t){var n;t?n=t.m:n=e.V++;var r=Vi(e.F);it(r,"SID",e.J),it(r,"RID",n),it(r,"AID",e.U),nf(e,r),e.o&&e.s&&Ub(r,e.o,e.s),n=new Jl(e,e.h,n,e.C+1),e.o===null&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=VO(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Lb(e.i,n),x_(n,r,t)}function nf(e,t){e.j&&Db({},function(n,r){it(t,r,n)})}function VO(e,t,n){n=Math.min(e.l.length,n);var r=e.j?Zt(e.j.Oa,e.j,e):null;e:for(var i=e.l,s=-1;;){var u=["count="+n];s==-1?0<n?(s=i[0].h,u.push("ofs="+s)):s=0:u.push("ofs="+s);for(var c=!0,l=0;l<n;l++){var h=i[l].h,p=i[l].g;if(h-=s,0>h)s=Math.max(0,i[l].h-100),c=!1;else try{YH(p,u,"req"+h+"_")}catch{r&&r(p)}}if(c){r=u.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function BO(e){e.g||e.u||(e.Y=1,Ab(e.Ga,e),e.A=0)}function Vb(e){return e.g||e.u||3<=e.A?!1:(e.Y++,e.u=Yl(Zt(e.Ga,e),HO(e,e.A)),e.A++,!0)}ee.Ga=function(){if(this.u=null,qO(this),this.$&&!(this.L||this.g==null||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Yl(Zt(this.bb,this),e)}};ee.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,An(10),Wp(this),qO(this))};function Bb(e){e.B!=null&&(ye.clearTimeout(e.B),e.B=null)}function qO(e){e.g=new Jl(e,e.h,"rpc",e.Y),e.o===null&&(e.g.H=e.s),e.g.O=0;var t=Vi(e.oa);it(t,"RID","rpc"),it(t,"SID",e.J),it(t,"CI",e.N?"0":"1"),it(t,"AID",e.U),nf(e,t),it(t,"TYPE","xmlhttp"),e.o&&e.s&&Ub(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=qp(Vi(t)),n.s=null,n.U=!0,wO(n,e)}ee.ab=function(){this.v!=null&&(this.v=null,Wp(this),Vb(this),An(19))};function kd(e){e.v!=null&&(ye.clearTimeout(e.v),e.v=null)}function KO(e,t){var n=null;if(e.g==t){kd(e),Bb(e),e.g=null;var r=2}else if(M_(e.i,t))n=t.D,OO(e.i,t),r=1;else return;if(e.I=t.N,e.G!=0){if(t.i)if(r==1){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;r=Up(),en(r,new gO(r,n)),Gp(e)}else BO(e);else if(i=t.o,i==3||i==0&&0<e.I||!(r==1&&iW(e,t)||r==2&&Vb(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Ts(e,5);break;case 4:Ts(e,10);break;case 3:Ts(e,6);break;default:Ts(e,2)}}}function HO(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Ts(e,t){if(e.h.info("Error code "+t),t==2){var n=null;e.j&&(n=null);var r=Zt(e.jb,e);n||(n=new Vs("//www.google.com/images/cleardot.gif"),ye.location&&ye.location.protocol=="http"||Sd(n,"https"),qp(n)),XH(n.toString(),r)}else An(2);e.G=0,e.j&&e.j.va(t),WO(e),jO(e)}ee.jb=function(e){e?(this.h.info("Successfully pinged google.com"),An(2)):(this.h.info("Failed to ping google.com"),An(1))};function WO(e){e.G=0,e.I=-1,e.j&&((PO(e.i).length!=0||e.l.length!=0)&&(e.i.i.length=0,_b(e.l),e.l.length=0),e.j.ua())}function GO(e,t,n){var r=jH(n);if(r.i!="")t&&Cd(r,t+"."+r.i),Ad(r,r.m);else{var i=ye.location;r=VH(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&wb(e.aa,function(s,u){it(r,u,s)}),t=e.D,n=e.sa,t&&n&&it(r,t,n),it(r,"VER",e.ma),nf(e,r),r}function $O(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return t=n&&e.Ba&&!e.qa?new St(new ef({ib:!0})):new St(e.qa),t.L=e.H,t}function zO(){}ee=zO.prototype;ee.xa=function(){};ee.wa=function(){};ee.va=function(){};ee.ua=function(){};ee.Oa=function(){};function Nd(){if(ru&&!(10<=Number(mH)))throw Error("Environmental error: no available transport.")}Nd.prototype.g=function(e,t){return new ar(e,t)};function ar(e,t){Ht.call(this),this.g=new UO(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!Ed(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Ed(t)&&(this.g.D=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new Du(this)}nn(ar,Ht);ar.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Ab(Zt(e.hb,e,t))),An(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=GO(e,null,e.W),Gp(e)};ar.prototype.close=function(){jb(this.g)};ar.prototype.u=function(e){if(typeof e=="string"){var t={};t.__data__=e,gy(this.g,t)}else this.v?(t={},t.__data__=Cb(e),gy(this.g,t)):gy(this.g,e)};ar.prototype.M=function(){this.g.j=null,delete this.j,jb(this.g),delete this.g,ar.Z.M.call(this)};function QO(e){Ob.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}nn(QO,Ob);function YO(){Pb.call(this),this.status=1}nn(YO,Pb);function Du(e){this.g=e}nn(Du,zO);Du.prototype.xa=function(){en(this.g,"a")};Du.prototype.wa=function(e){en(this.g,new QO(e))};Du.prototype.va=function(e){en(this.g,new YO)};Du.prototype.ua=function(){en(this.g,"b")};Nd.prototype.createWebChannel=Nd.prototype.g;ar.prototype.send=ar.prototype.u;ar.prototype.open=ar.prototype.m;ar.prototype.close=ar.prototype.close;jp.NO_ERROR=0;jp.TIMEOUT=8;jp.HTTP_ERROR=6;mO.COMPLETE="complete";yO.EventType=Xl;Xl.OPEN="a";Xl.CLOSE="b";Xl.ERROR="c";Xl.MESSAGE="d";Ht.prototype.listen=Ht.prototype.N;St.prototype.listenOnce=St.prototype.O;St.prototype.getLastError=St.prototype.La;St.prototype.getLastErrorCode=St.prototype.Da;St.prototype.getStatus=St.prototype.ba;St.prototype.getResponseJson=St.prototype.Qa;St.prototype.getResponseText=St.prototype.ga;St.prototype.send=St.prototype.ea;var oW=function(){return new Nd},sW=function(){return Up()},my=jp,aW=mO,uW=Js,yA={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},cW=ef,Oh=yO,lW=St;/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tr=function(){function e(t,n){var r=this;this.previousValue=t,n&&(n.sequenceNumberHandler=function(i){return r.t(i)},this.i=function(i){return n.writeSequenceNumber(i)})}return e.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},e.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},e}();tr.o=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},B=function(e){function t(n,r){var i=this;return(i=e.call(this,r)||this).code=n,i.message=r,i.name="FirebaseError",i.toString=function(){return i.name+": [code="+i.code+"]: "+i.message},i}return Z(t,e),t}(Error),Kr=new zs("@firebase/firestore");function F_(){return Kr.logLevel}function Q(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Kr.logLevel<=Re.DEBUG){var r=t.map(qb);Kr.debug.apply(Kr,Ie(["Firestore (8.10.1): "+e],r))}}function It(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Kr.logLevel<=Re.ERROR){var r=t.map(qb);Kr.error.apply(Kr,Ie(["Firestore (8.10.1): "+e],r))}}function El(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Kr.logLevel<=Re.WARN){var r=t.map(qb);Kr.warn.apply(Kr,Ie(["Firestore (8.10.1): "+e],r))}}function qb(e){if(typeof e=="string")return e;try{return t=e,JSON.stringify(t)}catch{return e}var t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function se(e){e===void 0&&(e="Unexpected state");var t="FIRESTORE (8.10.1) INTERNAL ASSERTION FAILED: "+e;throw It(t),new Error(t)}function ve(e,t){e||se()}function J(e,t){return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fW(e){var t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var XO=function(){function e(){}return e.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length,r="";r.length<20;)for(var i=fW(40),s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length));return r},e}();function De(e,t){return e<t?-1:e>t?1:0}function iu(e,t,n){return e.length===t.length&&e.every(function(r,i){return n(r,t[i])})}function JO(e){return e+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jn=function(){function e(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new B(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new B(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new B(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new B(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return e.now=function(){return e.fromMillis(Date.now())},e.fromDate=function(t){return e.fromMillis(t.getTime())},e.fromMillis=function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))},e.prototype.toDate=function(){return new Date(this.toMillis())},e.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},e.prototype._compareTo=function(t){return this.seconds===t.seconds?De(this.nanoseconds,t.nanoseconds):De(this.seconds,t.seconds)},e.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},e.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},e.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},e.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},e}(),ke=function(){function e(t){this.timestamp=t}return e.fromTimestamp=function(t){return new e(t)},e.min=function(){return new e(new jn(0,0))},e.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},e.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},e.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},e.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},e.prototype.toTimestamp=function(){return this.timestamp},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _A(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Zs(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ZO(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var eP=function(){function e(t,n,r){n===void 0?n=0:n>t.length&&se(),r===void 0?r=t.length-n:r>t.length-n&&se(),this.segments=t,this.offset=n,this.len=r}return Object.defineProperty(e.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return e.comparator(this,t)===0},e.prototype.child=function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach(function(r){n.push(r)}):n.push(t),this.construct(n)},e.prototype.limit=function(){return this.offset+this.length},e.prototype.popFirst=function(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)},e.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},e.prototype.firstSegment=function(){return this.segments[this.offset]},e.prototype.lastSegment=function(){return this.get(this.length-1)},e.prototype.get=function(t){return this.segments[this.offset+t]},e.prototype.isEmpty=function(){return this.length===0},e.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0},e.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0},e.prototype.forEach=function(t){for(var n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])},e.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},e.comparator=function(t,n){for(var r=Math.min(t.length,n.length),i=0;i<r;i++){var s=t.get(i),u=n.get(i);if(s<u)return-1;if(s>u)return 1}return t.length<n.length?-1:t.length>n.length?1:0},e}(),qe=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Z(t,e),t.prototype.construct=function(n,r,i){return new t(n,r,i)},t.prototype.canonicalString=function(){return this.toArray().join("/")},t.prototype.toString=function(){return this.canonicalString()},t.fromString=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];for(var i=[],s=0,u=n;s<u.length;s++){var c=u[s];if(c.indexOf("//")>=0)throw new B(O.INVALID_ARGUMENT,"Invalid segment ("+c+"). Paths must not contain // in them.");i.push.apply(i,c.split("/").filter(function(l){return l.length>0}))}return new t(i)},t.emptyPath=function(){return new t([])},t}(eP),hW=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Wr=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Z(t,e),t.prototype.construct=function(n,r,i){return new t(n,r,i)},t.isValidIdentifier=function(n){return hW.test(n)},t.prototype.canonicalString=function(){return this.toArray().map(function(n){return n=n.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(n)||(n="`"+n+"`"),n}).join(".")},t.prototype.toString=function(){return this.canonicalString()},t.prototype.isKeyField=function(){return this.length===1&&this.get(0)==="__name__"},t.keyField=function(){return new t(["__name__"])},t.fromServerFormat=function(n){for(var r=[],i="",s=0,u=function(){if(i.length===0)throw new B(O.INVALID_ARGUMENT,"Invalid field path ("+n+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");r.push(i),i=""},c=!1;s<n.length;){var l=n[s];if(l==="\\"){if(s+1===n.length)throw new B(O.INVALID_ARGUMENT,"Path has trailing escape character: "+n);var h=n[s+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new B(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+n);i+=h,s+=2}else l==="`"?(c=!c,s++):l!=="."||c?(i+=l,s++):(u(),s++)}if(u(),c)throw new B(O.INVALID_ARGUMENT,"Unterminated ` in path: "+n);return new t(r)},t.emptyPath=function(){return new t([])},t}(eP),ou=function(){function e(t){this.fields=t,t.sort(Wr.comparator)}return e.prototype.covers=function(t){for(var n=0,r=this.fields;n<r.length;n++)if(r[n].isPrefixOf(t))return!0;return!1},e.prototype.isEqual=function(t){return iu(this.fields,t.fields,function(n,r){return n.isEqual(r)})},e}(),kn=function(){function e(t){this.binaryString=t}return e.fromBase64String=function(t){return new e(atob(t))},e.fromUint8Array=function(t){return new e(function(n){for(var r="",i=0;i<n.length;++i)r+=String.fromCharCode(n[i]);return r}(t))},e.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},e.prototype.toUint8Array=function(){return function(t){for(var n=new Uint8Array(t.length),r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}(this.binaryString)},e.prototype.approximateByteSize=function(){return 2*this.binaryString.length},e.prototype.compareTo=function(t){return De(this.binaryString,t.binaryString)},e.prototype.isEqual=function(t){return this.binaryString===t.binaryString},e}();kn.EMPTY_BYTE_STRING=new kn("");var dW=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Po(e){if(ve(!!e),typeof e=="string"){var t=0,n=dW.exec(e);if(ve(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Tt(e.seconds),nanos:Tt(e.nanos)}}function Tt(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function su(e){return typeof e=="string"?kn.fromBase64String(e):kn.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kb(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function tP(e){var t=e.mapValue.fields.__previous_value__;return Kb(t)?tP(t):t}function Tl(e){var t=Po(e.mapValue.fields.__local_write_time__.timestampValue);return new jn(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ea(e){return e==null}function Rd(e){return e===0&&1/e==-1/0}function nP(e){return typeof e=="number"&&Number.isInteger(e)&&!Rd(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ae=function(){function e(t){this.path=t}return e.fromPath=function(t){return new e(qe.fromString(t))},e.fromName=function(t){return new e(qe.fromString(t).popFirst(5))},e.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},e.prototype.isEqual=function(t){return t!==null&&qe.comparator(this.path,t.path)===0},e.prototype.toString=function(){return this.path.toString()},e.comparator=function(t,n){return qe.comparator(t.path,n.path)},e.isDocumentKey=function(t){return t.length%2==0},e.fromSegments=function(t){return new e(new qe(t.slice()))},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bs(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Kb(e)?4:10:se()}function gi(e,t){var n=Bs(e);if(n!==Bs(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Tl(e).isEqual(Tl(t));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;var s=Po(r.timestampValue),u=Po(i.timestampValue);return s.seconds===u.seconds&&s.nanos===u.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(r,i){return su(r.bytesValue).isEqual(su(i.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(r,i){return Tt(r.geoPointValue.latitude)===Tt(i.geoPointValue.latitude)&&Tt(r.geoPointValue.longitude)===Tt(i.geoPointValue.longitude)}(e,t);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Tt(r.integerValue)===Tt(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){var s=Tt(r.doubleValue),u=Tt(i.doubleValue);return s===u?Rd(s)===Rd(u):isNaN(s)&&isNaN(u)}return!1}(e,t);case 9:return iu(e.arrayValue.values||[],t.arrayValue.values||[],gi);case 10:return function(r,i){var s=r.mapValue.fields||{},u=i.mapValue.fields||{};if(_A(s)!==_A(u))return!1;for(var c in s)if(s.hasOwnProperty(c)&&(u[c]===void 0||!gi(s[c],u[c])))return!1;return!0}(e,t);default:return se()}}function Il(e,t){return(e.values||[]).find(function(n){return gi(n,t)})!==void 0}function au(e,t){var n=Bs(e),r=Bs(t);if(n!==r)return De(n,r);switch(n){case 0:return 0;case 1:return De(e.booleanValue,t.booleanValue);case 2:return function(i,s){var u=Tt(i.integerValue||i.doubleValue),c=Tt(s.integerValue||s.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(e,t);case 3:return wA(e.timestampValue,t.timestampValue);case 4:return wA(Tl(e),Tl(t));case 5:return De(e.stringValue,t.stringValue);case 6:return function(i,s){var u=su(i),c=su(s);return u.compareTo(c)}(e.bytesValue,t.bytesValue);case 7:return function(i,s){for(var u=i.split("/"),c=s.split("/"),l=0;l<u.length&&l<c.length;l++){var h=De(u[l],c[l]);if(h!==0)return h}return De(u.length,c.length)}(e.referenceValue,t.referenceValue);case 8:return function(i,s){var u=De(Tt(i.latitude),Tt(s.latitude));return u!==0?u:De(Tt(i.longitude),Tt(s.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(i,s){for(var u=i.values||[],c=s.values||[],l=0;l<u.length&&l<c.length;++l){var h=au(u[l],c[l]);if(h)return h}return De(u.length,c.length)}(e.arrayValue,t.arrayValue);case 10:return function(i,s){var u=i.fields||{},c=Object.keys(u),l=s.fields||{},h=Object.keys(l);c.sort(),h.sort();for(var p=0;p<c.length&&p<h.length;++p){var g=De(c[p],h[p]);if(g!==0)return g;var m=au(u[c[p]],l[h[p]]);if(m!==0)return m}return De(c.length,h.length)}(e.mapValue,t.mapValue);default:throw se()}}function wA(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return De(e,t);var n=Po(e),r=Po(t),i=De(n.seconds,r.seconds);return i!==0?i:De(n.nanos,r.nanos)}function Hb(e){return U_(e)}function U_(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(r){var i=Po(r);return"time("+i.seconds+","+i.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?su(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,ae.fromName(n).toString()):"geoPointValue"in e?"geo("+(t=e.geoPointValue).latitude+","+t.longitude+")":"arrayValue"in e?function(r){for(var i="[",s=!0,u=0,c=r.values||[];u<c.length;u++)s?s=!1:i+=",",i+=U_(c[u]);return i+"]"}(e.arrayValue):"mapValue"in e?function(r){for(var i="{",s=!0,u=0,c=Object.keys(r.fields||{}).sort();u<c.length;u++){var l=c[u];s?s=!1:i+=",",i+=l+":"+U_(r.fields[l])}return i+"}"}(e.mapValue):se();var t,n}function Od(e,t){return{referenceValue:"projects/"+e.projectId+"/databases/"+e.database+"/documents/"+t.path.canonicalString()}}function j_(e){return!!e&&"integerValue"in e}function Wb(e){return!!e&&"arrayValue"in e}function bA(e){return!!e&&"nullValue"in e}function EA(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function $h(e){return!!e&&"mapValue"in e}function Jc(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Zs(e.mapValue.fields,function(i,s){return t.mapValue.fields[i]=Jc(s)}),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Jc(e.arrayValue.values[r]);return n}return Object.assign({},e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jn=function(){function e(t){this.value=t}return e.empty=function(){return new e({mapValue:{}})},e.prototype.field=function(t){if(t.isEmpty())return this.value;for(var n=this.value,r=0;r<t.length-1;++r)if(!$h(n=(n.mapValue.fields||{})[t.get(r)]))return null;return(n=(n.mapValue.fields||{})[t.lastSegment()])||null},e.prototype.set=function(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Jc(n)},e.prototype.setAll=function(t){var n=this,r=Wr.emptyPath(),i={},s=[];t.forEach(function(c,l){if(!r.isImmediateParentOf(l)){var h=n.getFieldsMap(r);n.applyChanges(h,i,s),i={},s=[],r=l.popLast()}c?i[l.lastSegment()]=Jc(c):s.push(l.lastSegment())});var u=this.getFieldsMap(r);this.applyChanges(u,i,s)},e.prototype.delete=function(t){var n=this.field(t.popLast());$h(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]},e.prototype.isEqual=function(t){return gi(this.value,t.value)},e.prototype.getFieldsMap=function(t){var n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(var r=0;r<t.length;++r){var i=n.mapValue.fields[t.get(r)];$h(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields},e.prototype.applyChanges=function(t,n,r){Zs(n,function(c,l){return t[c]=l});for(var i=0,s=r;i<s.length;i++){var u=s[i];delete t[u]}},e.prototype.clone=function(){return new e(Jc(this.value))},e}();function rP(e){var t=[];return Zs(e.fields,function(n,r){var i=new Wr([n]);if($h(r)){var s=rP(r.mapValue).fields;if(s.length===0)t.push(i);else for(var u=0,c=s;u<c.length;u++){var l=c[u];t.push(i.child(l))}}else t.push(i)}),new ou(t)}var tn=function(){function e(t,n,r,i,s){this.key=t,this.documentType=n,this.version=r,this.data=i,this.documentState=s}return e.newInvalidDocument=function(t){return new e(t,0,ke.min(),Jn.empty(),0)},e.newFoundDocument=function(t,n,r){return new e(t,1,n,r,0)},e.newNoDocument=function(t,n){return new e(t,2,n,Jn.empty(),0)},e.newUnknownDocument=function(t,n){return new e(t,3,n,Jn.empty(),2)},e.prototype.convertToFoundDocument=function(t,n){return this.version=t,this.documentType=1,this.data=n,this.documentState=0,this},e.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=Jn.empty(),this.documentState=0,this},e.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=Jn.empty(),this.documentState=2,this},e.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},e.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(e.prototype,"hasLocalMutations",{get:function(){return this.documentState===1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasCommittedMutations",{get:function(){return this.documentState===2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isValidDocument=function(){return this.documentType!==0},e.prototype.isFoundDocument=function(){return this.documentType===1},e.prototype.isNoDocument=function(){return this.documentType===2},e.prototype.isUnknownDocument=function(){return this.documentType===3},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)},e.prototype.clone=function(){return new e(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},e}(),pW=function(e,t,n,r,i,s,u){t===void 0&&(t=null),n===void 0&&(n=[]),r===void 0&&(r=[]),i===void 0&&(i=null),s===void 0&&(s=null),u===void 0&&(u=null),this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=u,this.h=null};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TA(e,t,n,r,i,s,u){return t===void 0&&(t=null),n===void 0&&(n=[]),r===void 0&&(r=[]),i===void 0&&(i=null),s===void 0&&(s=null),u===void 0&&(u=null),new pW(e,t,n,r,i,s,u)}function rf(e){var t=J(e);if(t.h===null){var n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(function(r){return function(i){return i.field.canonicalString()+i.op.toString()+Hb(i.value)}(r)}).join(","),n+="|ob:",n+=t.orderBy.map(function(r){return function(i){return i.field.canonicalString()+i.dir}(r)}).join(","),ea(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=Dd(t.startAt)),t.endAt&&(n+="|ub:",n+=Dd(t.endAt)),t.h=n}return t.h}function $p(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!EW(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],s=t.filters[r],i.op!==s.op||!i.field.isEqual(s.field)||!gi(i.value,s.value))return!1;var i,s;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!SA(e.startAt,t.startAt)&&SA(e.endAt,t.endAt)}function Pd(e){return ae.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}var nr=function(e){function t(n,r,i){var s=this;return(s=e.call(this)||this).field=n,s.op=r,s.value=i,s}return Z(t,e),t.create=function(n,r,i){return n.isKeyField()?r==="in"||r==="not-in"?this.l(n,r,i):new vW(n,r,i):r==="array-contains"?new yW(n,i):r==="in"?new _W(n,i):r==="not-in"?new wW(n,i):r==="array-contains-any"?new bW(n,i):new t(n,r,i)},t.l=function(n,r,i){return r==="in"?new gW(n,i):new mW(n,i)},t.prototype.matches=function(n){var r=n.data.field(this.field);return this.op==="!="?r!==null&&this.m(au(r,this.value)):r!==null&&Bs(this.value)===Bs(r)&&this.m(au(r,this.value))},t.prototype.m=function(n){switch(this.op){case"<":return n<0;case"<=":return n<=0;case"==":return n===0;case"!=":return n!==0;case">":return n>0;case">=":return n>=0;default:return se()}},t.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},t}(function(){}),vW=function(e){function t(n,r,i){var s=this;return(s=e.call(this,n,r,i)||this).key=ae.fromName(i.referenceValue),s}return Z(t,e),t.prototype.matches=function(n){var r=ae.comparator(n.key,this.key);return this.m(r)},t}(nr),gW=function(e){function t(n,r){var i=this;return(i=e.call(this,n,"in",r)||this).keys=iP("in",r),i}return Z(t,e),t.prototype.matches=function(n){return this.keys.some(function(r){return r.isEqual(n.key)})},t}(nr),mW=function(e){function t(n,r){var i=this;return(i=e.call(this,n,"not-in",r)||this).keys=iP("not-in",r),i}return Z(t,e),t.prototype.matches=function(n){return!this.keys.some(function(r){return r.isEqual(n.key)})},t}(nr);function iP(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(function(r){return ae.fromName(r.referenceValue)})}var yW=function(e){function t(n,r){return e.call(this,n,"array-contains",r)||this}return Z(t,e),t.prototype.matches=function(n){var r=n.data.field(this.field);return Wb(r)&&Il(r.arrayValue,this.value)},t}(nr),_W=function(e){function t(n,r){return e.call(this,n,"in",r)||this}return Z(t,e),t.prototype.matches=function(n){var r=n.data.field(this.field);return r!==null&&Il(this.value.arrayValue,r)},t}(nr),wW=function(e){function t(n,r){return e.call(this,n,"not-in",r)||this}return Z(t,e),t.prototype.matches=function(n){if(Il(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var r=n.data.field(this.field);return r!==null&&!Il(this.value.arrayValue,r)},t}(nr),bW=function(e){function t(n,r){return e.call(this,n,"array-contains-any",r)||this}return Z(t,e),t.prototype.matches=function(n){var r=this,i=n.data.field(this.field);return!(!Wb(i)||!i.arrayValue.values)&&i.arrayValue.values.some(function(s){return Il(r.value.arrayValue,s)})},t}(nr),Sl=function(e,t){this.position=e,this.before=t};function Dd(e){return(e.before?"b":"a")+":"+e.position.map(function(t){return Hb(t)}).join(",")}var Ha=function(e,t){t===void 0&&(t="asc"),this.field=e,this.dir=t};function EW(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function IA(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var s=t[i],u=e.position[i];if(r=s.field.isKeyField()?ae.comparator(ae.fromName(u.referenceValue),n.key):au(u,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return e.before?r<=0:r<0}function SA(e,t){if(e===null)return t===null;if(t===null||e.before!==t.before||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!gi(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wi=function(e,t,n,r,i,s,u,c){t===void 0&&(t=null),n===void 0&&(n=[]),r===void 0&&(r=[]),i===void 0&&(i=null),s===void 0&&(s="F"),u===void 0&&(u=null),c===void 0&&(c=null),this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=u,this.endAt=c,this.p=null,this.T=null,this.startAt,this.endAt};function oP(e,t,n,r,i,s,u,c){return new Wi(e,t,n,r,i,s,u,c)}function xu(e){return new Wi(e)}function zh(e){return!ea(e.limit)&&e.limitType==="F"}function xd(e){return!ea(e.limit)&&e.limitType==="L"}function Gb(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function $b(e){for(var t=0,n=e.filters;t<n.length;t++){var r=n[t];if(r.g())return r.field}return null}function zb(e){return e.collectionGroup!==null}function uu(e){var t=J(e);if(t.p===null){t.p=[];var n=$b(t),r=Gb(t);if(n!==null&&r===null)n.isKeyField()||t.p.push(new Ha(n)),t.p.push(new Ha(Wr.keyField(),"asc"));else{for(var i=!1,s=0,u=t.explicitOrderBy;s<u.length;s++){var c=u[s];t.p.push(c),c.field.isKeyField()&&(i=!0)}if(!i){var l=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.p.push(new Ha(Wr.keyField(),l))}}}return t.p}function Er(e){var t=J(e);if(!t.T)if(t.limitType==="F")t.T=TA(t.path,t.collectionGroup,uu(t),t.filters,t.limit,t.startAt,t.endAt);else{for(var n=[],r=0,i=uu(t);r<i.length;r++){var s=i[r],u=s.dir==="desc"?"asc":"desc";n.push(new Ha(s.field,u))}var c=t.endAt?new Sl(t.endAt.position,!t.endAt.before):null,l=t.startAt?new Sl(t.startAt.position,!t.startAt.before):null;t.T=TA(t.path,t.collectionGroup,n,t.filters,t.limit,c,l)}return t.T}function sP(e,t,n){return new Wi(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function of(e,t){return $p(Er(e),Er(t))&&e.limitType===t.limitType}function aP(e){return rf(Er(e))+"|lt:"+e.limitType}function V_(e){return"Query(target="+function(t){var n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=", filters: ["+t.filters.map(function(r){return(i=r).field.canonicalString()+" "+i.op+" "+Hb(i.value);var i}).join(", ")+"]"),ea(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=", orderBy: ["+t.orderBy.map(function(r){return function(i){return i.field.canonicalString()+" ("+i.dir+")"}(r)}).join(", ")+"]"),t.startAt&&(n+=", startAt: "+Dd(t.startAt)),t.endAt&&(n+=", endAt: "+Dd(t.endAt)),"Target("+n+")"}(Er(e))+"; limitType="+e.limitType+")"}function sf(e,t){return t.isFoundDocument()&&function(n,r){var i=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):ae.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(e,t)&&function(n,r){for(var i=0,s=n.explicitOrderBy;i<s.length;i++){var u=s[i];if(!u.field.isKeyField()&&r.data.field(u.field)===null)return!1}return!0}(e,t)&&function(n,r){for(var i=0,s=n.filters;i<s.length;i++)if(!s[i].matches(r))return!1;return!0}(e,t)&&function(n,r){return!(n.startAt&&!IA(n.startAt,uu(n),r))&&(!n.endAt||!IA(n.endAt,uu(n),r))}(e,t)}function uP(e){return function(t,n){for(var r=!1,i=0,s=uu(e);i<s.length;i++){var u=s[i],c=TW(u,t,n);if(c!==0)return c;r=r||u.field.isKeyField()}return 0}}function TW(e,t,n){var r=e.field.isKeyField()?ae.comparator(t.key,n.key):function(i,s,u){var c=s.data.field(i),l=u.data.field(i);return c!==null&&l!==null?au(c,l):se()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return se()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cP(e,t){if(e.I){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rd(t)?"-0":t}}function lP(e){return{integerValue:""+e}}function fP(e,t){return nP(t)?lP(t):cP(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zp=function(){this._=void 0};function IW(e,t,n){return e instanceof cu?function(r,i){var s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(n,t):e instanceof qs?dP(e,t):e instanceof Ks?pP(e,t):function(r,i){var s=hP(r,i),u=CA(s)+CA(r.A);return j_(s)&&j_(r.A)?lP(u):cP(r.R,u)}(e,t)}function SW(e,t,n){return e instanceof qs?dP(e,t):e instanceof Ks?pP(e,t):n}function hP(e,t){return e instanceof lu?j_(n=t)||function(r){return!!r&&"doubleValue"in r}(n)?t:{integerValue:0}:null;var n}var cu=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Z(t,e),t}(zp),qs=function(e){function t(n){var r=this;return(r=e.call(this)||this).elements=n,r}return Z(t,e),t}(zp);function dP(e,t){for(var n=vP(t),r=function(u){n.some(function(c){return gi(c,u)})||n.push(u)},i=0,s=e.elements;i<s.length;i++)r(s[i]);return{arrayValue:{values:n}}}var Ks=function(e){function t(n){var r=this;return(r=e.call(this)||this).elements=n,r}return Z(t,e),t}(zp);function pP(e,t){for(var n=vP(t),r=function(u){n=n.filter(function(c){return!gi(c,u)})},i=0,s=e.elements;i<s.length;i++)r(s[i]);return{arrayValue:{values:n}}}var lu=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).R=n,i.A=r,i}return Z(t,e),t}(zp);function CA(e){return Tt(e.integerValue||e.doubleValue)}function vP(e){return Wb(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var af=function(e,t){this.field=e,this.transform=t},CW=function(e,t){this.version=e,this.transformResults=t},un=function(){function e(t,n){this.updateTime=t,this.exists=n}return e.none=function(){return new e},e.exists=function(t){return new e(void 0,t)},e.updateTime=function(t){return new e(t)},Object.defineProperty(e.prototype,"isNone",{get:function(){return this.updateTime===void 0&&this.exists===void 0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},e}();function Qh(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}var Qp=function(){};function AW(e,t,n){e instanceof uf?function(r,i,s){var u=r.value.clone(),c=NA(r.fieldTransforms,i,s.transformResults);u.setAll(c),i.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(e,t,n):e instanceof Fo?function(r,i,s){if(Qh(r.precondition,i)){var u=NA(r.fieldTransforms,i,s.transformResults),c=i.data;c.setAll(gP(r)),c.setAll(u),i.convertToFoundDocument(s.version,c).setHasCommittedMutations()}else i.convertToUnknownDocument(s.version)}(e,t,n):function(r,i,s){i.convertToNoDocument(s.version).setHasCommittedMutations()}(0,t,n)}function B_(e,t,n){e instanceof uf?function(r,i,s){if(Qh(r.precondition,i)){var u=r.value.clone(),c=RA(r.fieldTransforms,s,i);u.setAll(c),i.convertToFoundDocument(kA(i),u).setHasLocalMutations()}}(e,t,n):e instanceof Fo?function(r,i,s){if(Qh(r.precondition,i)){var u=RA(r.fieldTransforms,s,i),c=i.data;c.setAll(gP(r)),c.setAll(u),i.convertToFoundDocument(kA(i),c).setHasLocalMutations()}}(e,t,n):function(r,i){Qh(r.precondition,i)&&i.convertToNoDocument(ke.min())}(e,t)}function kW(e,t){for(var n=null,r=0,i=e.fieldTransforms;r<i.length;r++){var s=i[r],u=t.data.field(s.field),c=hP(s.transform,u||null);c!=null&&(n==null&&(n=Jn.empty()),n.set(s.field,c))}return n||null}function AA(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&iu(n,r,function(i,s){return function(u,c){return u.field.isEqual(c.field)&&function(l,h){return l instanceof qs&&h instanceof qs||l instanceof Ks&&h instanceof Ks?iu(l.elements,h.elements,gi):l instanceof lu&&h instanceof lu?gi(l.A,h.A):l instanceof cu&&h instanceof cu}(u.transform,c.transform)}(i,s)})}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function kA(e){return e.isFoundDocument()?e.version:ke.min()}var uf=function(e){function t(n,r,i,s){s===void 0&&(s=[]);var u=this;return(u=e.call(this)||this).key=n,u.value=r,u.precondition=i,u.fieldTransforms=s,u.type=0,u}return Z(t,e),t}(Qp),Fo=function(e){function t(n,r,i,s,u){u===void 0&&(u=[]);var c=this;return(c=e.call(this)||this).key=n,c.data=r,c.fieldMask=i,c.precondition=s,c.fieldTransforms=u,c.type=1,c}return Z(t,e),t}(Qp);function gP(e){var t=new Map;return e.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}}),t}function NA(e,t,n){var r=new Map;ve(e.length===n.length);for(var i=0;i<n.length;i++){var s=e[i],u=s.transform,c=t.data.field(s.field);r.set(s.field,SW(u,c,n[i]))}return r}function RA(e,t,n){for(var r=new Map,i=0,s=e;i<s.length;i++){var u=s[i],c=u.transform,l=n.data.field(u.field);r.set(u.field,IW(c,l,t))}return r}var Et,Le,cf=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).key=n,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return Z(t,e),t}(Qp),Qb=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).key=n,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return Z(t,e),t}(Qp),NW=function(e){this.count=e};function mP(e){switch(e){case O.OK:return se();case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0;default:return se()}}function yP(e){if(e===void 0)return It("GRPC error has no .code"),O.UNKNOWN;switch(e){case Et.OK:return O.OK;case Et.CANCELLED:return O.CANCELLED;case Et.UNKNOWN:return O.UNKNOWN;case Et.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case Et.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case Et.INTERNAL:return O.INTERNAL;case Et.UNAVAILABLE:return O.UNAVAILABLE;case Et.UNAUTHENTICATED:return O.UNAUTHENTICATED;case Et.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case Et.NOT_FOUND:return O.NOT_FOUND;case Et.ALREADY_EXISTS:return O.ALREADY_EXISTS;case Et.PERMISSION_DENIED:return O.PERMISSION_DENIED;case Et.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case Et.ABORTED:return O.ABORTED;case Et.OUT_OF_RANGE:return O.OUT_OF_RANGE;case Et.UNIMPLEMENTED:return O.UNIMPLEMENTED;case Et.DATA_LOSS:return O.DATA_LOSS;default:return se()}}(Le=Et||(Et={}))[Le.OK=0]="OK",Le[Le.CANCELLED=1]="CANCELLED",Le[Le.UNKNOWN=2]="UNKNOWN",Le[Le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Le[Le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Le[Le.NOT_FOUND=5]="NOT_FOUND",Le[Le.ALREADY_EXISTS=6]="ALREADY_EXISTS",Le[Le.PERMISSION_DENIED=7]="PERMISSION_DENIED",Le[Le.UNAUTHENTICATED=16]="UNAUTHENTICATED",Le[Le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Le[Le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Le[Le.ABORTED=10]="ABORTED",Le[Le.OUT_OF_RANGE=11]="OUT_OF_RANGE",Le[Le.UNIMPLEMENTED=12]="UNIMPLEMENTED",Le[Le.INTERNAL=13]="INTERNAL",Le[Le.UNAVAILABLE=14]="UNAVAILABLE",Le[Le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vn=function(){function e(t,n){this.comparator=t,this.root=n||po.EMPTY}return e.prototype.insert=function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,po.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,po.BLACK,null,null))},e.prototype.get=function(t){for(var n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null},e.prototype.indexOf=function(t){for(var n=0,r=this.root;!r.isEmpty();){var i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1},e.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(e.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),e.prototype.minKey=function(){return this.root.minKey()},e.prototype.maxKey=function(){return this.root.maxKey()},e.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},e.prototype.forEach=function(t){this.inorderTraversal(function(n,r){return t(n,r),!1})},e.prototype.toString=function(){var t=[];return this.inorderTraversal(function(n,r){return t.push(n+":"+r),!1}),"{"+t.join(", ")+"}"},e.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},e.prototype.getIterator=function(){return new Ph(this.root,null,this.comparator,!1)},e.prototype.getIteratorFrom=function(t){return new Ph(this.root,t,this.comparator,!1)},e.prototype.getReverseIterator=function(){return new Ph(this.root,null,this.comparator,!0)},e.prototype.getReverseIteratorFrom=function(t){return new Ph(this.root,t,this.comparator,!0)},e}(),Ph=function(){function e(t,n,r,i){this.isReverse=i,this.nodeStack=[];for(var s=1;!t.isEmpty();)if(s=n?r(t.key,n):1,i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return e.prototype.getNext=function(){var t=this.nodeStack.pop(),n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n},e.prototype.hasNext=function(){return this.nodeStack.length>0},e.prototype.peek=function(){if(this.nodeStack.length===0)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},e}(),po=function(){function e(t,n,r,i,s){this.key=t,this.value=n,this.color=r??e.RED,this.left=i??e.EMPTY,this.right=s??e.EMPTY,this.size=this.left.size+1+this.right.size}return e.prototype.copy=function(t,n,r,i,s){return new e(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},e.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},e.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},e.prototype.minKey=function(){return this.min().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(t,n,r){var i=this,s=r(t,i.key);return(i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r))).fixUp()},e.prototype.removeMin=function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()},e.prototype.remove=function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()},e.prototype.isRed=function(){return this.color},e.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},e.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},e.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},e.prototype.rotateLeft=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)},e.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},e.prototype.check=function(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw se();var t=this.left.check();if(t!==this.right.check())throw se();return t+(this.isRed()?0:1)},e}();po.EMPTY=null,po.RED=!0,po.BLACK=!1,po.EMPTY=new(function(){function e(){this.size=0}return Object.defineProperty(e.prototype,"key",{get:function(){throw se()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){throw se()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){throw se()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){throw se()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){throw se()},enumerable:!1,configurable:!0}),e.prototype.copy=function(t,n,r,i,s){return this},e.prototype.insert=function(t,n,r){return new po(t,n)},e.prototype.remove=function(t,n){return this},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(t){return!1},e.prototype.reverseTraversal=function(t){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.isRed=function(){return!1},e.prototype.checkMaxDepth=function(){return!0},e.prototype.check=function(){return 0},e}());/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ot=function(){function e(t){this.comparator=t,this.data=new vn(this.comparator)}return e.prototype.has=function(t){return this.data.get(t)!==null},e.prototype.first=function(){return this.data.minKey()},e.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(e.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),e.prototype.indexOf=function(t){return this.data.indexOf(t)},e.prototype.forEach=function(t){this.data.inorderTraversal(function(n,r){return t(n),!1})},e.prototype.forEachInRange=function(t,n){for(var r=this.data.getIteratorFrom(t[0]);r.hasNext();){var i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}},e.prototype.forEachWhile=function(t,n){var r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return},e.prototype.firstAfterOrEqual=function(t){var n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null},e.prototype.getIterator=function(){return new OA(this.data.getIterator())},e.prototype.getIteratorFrom=function(t){return new OA(this.data.getIteratorFrom(t))},e.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},e.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},e.prototype.isEmpty=function(){return this.data.isEmpty()},e.prototype.unionWith=function(t){var n=this;return n.size<t.size&&(n=t,t=this),t.forEach(function(r){n=n.add(r)}),n},e.prototype.isEqual=function(t){if(!(t instanceof e)||this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0},e.prototype.toArray=function(){var t=[];return this.forEach(function(n){t.push(n)}),t},e.prototype.toString=function(){var t=[];return this.forEach(function(n){return t.push(n)}),"SortedSet("+t.toString()+")"},e.prototype.copy=function(t){var n=new e(this.comparator);return n.data=t,n},e}(),OA=function(){function e(t){this.iter=t}return e.prototype.getNext=function(){return this.iter.getNext().key},e.prototype.hasNext=function(){return this.iter.hasNext()},e}(),RW=new vn(ae.comparator);function _r(){return RW}var OW=new vn(ae.comparator);function q_(){return OW}var PW=new vn(ae.comparator);function _P(){return PW}var DW=new Ot(ae.comparator);function Ge(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=DW,r=0,i=e;r<i.length;r++){var s=i[r];n=n.add(s)}return n}var xW=new Ot(De);function Yp(){return xW}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yb=function(){function e(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}return e.createSynthesizedRemoteEventForCurrentChange=function(t,n){var r=new Map;return r.set(t,Xb.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(ke.min(),r,Yp(),_r(),Ge())},e}(),Xb=function(){function e(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}return e.createSynthesizedTargetChangeForCurrentChange=function(t,n){return new e(kn.EMPTY_BYTE_STRING,n,Ge(),Ge(),Ge())},e}(),Yh=function(e,t,n,r){this.v=e,this.removedTargetIds=t,this.key=n,this.P=r},wP=function(e,t){this.targetId=e,this.V=t},bP=function(e,t,n,r){n===void 0&&(n=kn.EMPTY_BYTE_STRING),r===void 0&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r},PA=function(){function e(){this.S=0,this.D=xA(),this.C=kn.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}return Object.defineProperty(e.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"F",{get:function(){return this.S!==0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"$",{get:function(){return this.k},enumerable:!1,configurable:!0}),e.prototype.O=function(t){t.approximateByteSize()>0&&(this.k=!0,this.C=t)},e.prototype.M=function(){var t=Ge(),n=Ge(),r=Ge();return this.D.forEach(function(i,s){switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:se()}}),new Xb(this.C,this.N,t,n,r)},e.prototype.L=function(){this.k=!1,this.D=xA()},e.prototype.B=function(t,n){this.k=!0,this.D=this.D.insert(t,n)},e.prototype.q=function(t){this.k=!0,this.D=this.D.remove(t)},e.prototype.U=function(){this.S+=1},e.prototype.K=function(){this.S-=1},e.prototype.j=function(){this.k=!0,this.N=!0},e}(),LW=function(){function e(t){this.W=t,this.G=new Map,this.H=_r(),this.J=DA(),this.Y=new Ot(De)}return e.prototype.X=function(t){for(var n=0,r=t.v;n<r.length;n++){var i=r[n];t.P&&t.P.isFoundDocument()?this.Z(i,t.P):this.tt(i,t.key,t.P)}for(var s=0,u=t.removedTargetIds;s<u.length;s++)i=u[s],this.tt(i,t.key,t.P)},e.prototype.et=function(t){var n=this;this.forEachTarget(t,function(r){var i=n.nt(r);switch(t.state){case 0:n.st(r)&&i.O(t.resumeToken);break;case 1:i.K(),i.F||i.L(),i.O(t.resumeToken);break;case 2:i.K(),i.F||n.removeTarget(r);break;case 3:n.st(r)&&(i.j(),i.O(t.resumeToken));break;case 4:n.st(r)&&(n.it(r),i.O(t.resumeToken));break;default:se()}})},e.prototype.forEachTarget=function(t,n){var r=this;t.targetIds.length>0?t.targetIds.forEach(n):this.G.forEach(function(i,s){r.st(s)&&n(s)})},e.prototype.rt=function(t){var n=t.targetId,r=t.V.count,i=this.ot(n);if(i){var s=i.target;if(Pd(s))if(r===0){var u=new ae(s.path);this.tt(n,u,tn.newNoDocument(u,ke.min()))}else ve(r===1);else this.ct(n)!==r&&(this.it(n),this.Y=this.Y.add(n))}},e.prototype.ut=function(t){var n=this,r=new Map;this.G.forEach(function(u,c){var l=n.ot(c);if(l){if(u.current&&Pd(l.target)){var h=new ae(l.target.path);n.H.get(h)!==null||n.at(c,h)||n.tt(c,h,tn.newNoDocument(h,t))}u.$&&(r.set(c,u.M()),u.L())}});var i=Ge();this.J.forEach(function(u,c){var l=!0;c.forEachWhile(function(h){var p=n.ot(h);return!p||p.purpose===2||(l=!1,!1)}),l&&(i=i.add(u))});var s=new Yb(t,r,this.Y,this.H,i);return this.H=_r(),this.J=DA(),this.Y=new Ot(De),s},e.prototype.Z=function(t,n){if(this.st(t)){var r=this.at(t,n.key)?2:0;this.nt(t).B(n.key,r),this.H=this.H.insert(n.key,n),this.J=this.J.insert(n.key,this.ht(n.key).add(t))}},e.prototype.tt=function(t,n,r){if(this.st(t)){var i=this.nt(t);this.at(t,n)?i.B(n,1):i.q(n),this.J=this.J.insert(n,this.ht(n).delete(t)),r&&(this.H=this.H.insert(n,r))}},e.prototype.removeTarget=function(t){this.G.delete(t)},e.prototype.ct=function(t){var n=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size},e.prototype.U=function(t){this.nt(t).U()},e.prototype.nt=function(t){var n=this.G.get(t);return n||(n=new PA,this.G.set(t,n)),n},e.prototype.ht=function(t){var n=this.J.get(t);return n||(n=new Ot(De),this.J=this.J.insert(t,n)),n},e.prototype.st=function(t){var n=this.ot(t)!==null;return n||Q("WatchChangeAggregator","Detected inactive target",t),n},e.prototype.ot=function(t){var n=this.G.get(t);return n&&n.F?null:this.W.lt(t)},e.prototype.it=function(t){var n=this;this.G.set(t,new PA),this.W.getRemoteKeysForTarget(t).forEach(function(r){n.tt(t,r,null)})},e.prototype.at=function(t,n){return this.W.getRemoteKeysForTarget(t).has(n)},e}();function DA(){return new vn(ae.comparator)}function xA(){return new vn(ae.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var MW={asc:"ASCENDING",desc:"DESCENDING"},FW={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},UW=function(e,t){this.databaseId=e,this.I=t};function Cl(e,t){return e.I?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}}function EP(e,t){return e.I?t.toBase64():t.toUint8Array()}function jW(e,t){return Cl(e,t.toTimestamp())}function qt(e){return ve(!!e),ke.fromTimestamp(function(t){var n=Po(t);return new jn(n.seconds,n.nanos)}(e))}function Jb(e,t){return function(n){return new qe(["projects",n.projectId,"databases",n.database])}(e).child("documents").child(t).canonicalString()}function TP(e){var t=qe.fromString(e);return ve(OP(t)),t}function Al(e,t){return Jb(e.databaseId,t.path)}function ui(e,t){var n=TP(t);if(n.get(1)!==e.databaseId.projectId)throw new B(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new B(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ae(SP(n))}function K_(e,t){return Jb(e.databaseId,t)}function IP(e){var t=TP(e);return t.length===4?qe.emptyPath():SP(t)}function kl(e){return new qe(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function SP(e){return ve(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function LA(e,t,n){return{name:Al(e,t),fields:n.value.mapValue.fields}}function CP(e,t,n){var r=ui(e,t.name),i=qt(t.updateTime),s=new Jn({mapValue:{fields:t.fields}}),u=tn.newFoundDocument(r,i,s);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function Ld(e,t){var n;if(t instanceof uf)n={update:LA(e,t.key,t.value)};else if(t instanceof cf)n={delete:Al(e,t.key)};else if(t instanceof Fo)n={update:LA(e,t.key,t.data),updateMask:HW(t.fieldMask)};else{if(!(t instanceof Qb))return se();n={verify:Al(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(function(r){return function(i,s){var u=s.transform;if(u instanceof cu)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof qs)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Ks)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof lu)return{fieldPath:s.field.canonicalString(),increment:u.A};throw se()}(0,r)})),t.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:jW(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:se()}(e,t.precondition)),n}function MA(e,t){var n=t.currentDocument?function(h){return h.updateTime!==void 0?un.updateTime(qt(h.updateTime)):h.exists!==void 0?un.exists(h.exists):un.none()}(t.currentDocument):un.none(),r=t.updateTransforms?t.updateTransforms.map(function(h){return function(p,g){var m=null;if("setToServerValue"in g)ve(g.setToServerValue==="REQUEST_TIME"),m=new cu;else if("appendMissingElements"in g){var _=g.appendMissingElements.values||[];m=new qs(_)}else if("removeAllFromArray"in g){var b=g.removeAllFromArray.values||[];m=new Ks(b)}else"increment"in g?m=new lu(p,g.increment):se();var E=Wr.fromServerFormat(g.fieldPath);return new af(E,m)}(e,h)}):[];if(t.update){t.update.name;var i=ui(e,t.update.name),s=new Jn({mapValue:{fields:t.update.fields}});if(t.updateMask){var u=function(h){var p=h.fieldPaths||[];return new ou(p.map(function(g){return Wr.fromServerFormat(g)}))}(t.updateMask);return new Fo(i,s,u,n,r)}return new uf(i,s,n,r)}if(t.delete){var c=ui(e,t.delete);return new cf(c,n)}if(t.verify){var l=ui(e,t.verify);return new Qb(l,n)}return se()}function AP(e,t){return{documents:[K_(e,t.path)]}}function kP(e,t){var n={structuredQuery:{}},r=t.path;t.collectionGroup!==null?(n.parent=K_(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=K_(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(c){if(c.length!==0){var l=c.map(function(h){return function(p){if(p.op==="=="){if(EA(p.value))return{unaryFilter:{field:Pa(p.field),op:"IS_NAN"}};if(bA(p.value))return{unaryFilter:{field:Pa(p.field),op:"IS_NULL"}}}else if(p.op==="!="){if(EA(p.value))return{unaryFilter:{field:Pa(p.field),op:"IS_NOT_NAN"}};if(bA(p.value))return{unaryFilter:{field:Pa(p.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Pa(p.field),op:BW(p.op),value:p.value}}}(h)});return l.length===1?l[0]:{compositeFilter:{op:"AND",filters:l}}}}(t.filters);i&&(n.structuredQuery.where=i);var s=function(c){if(c.length!==0)return c.map(function(l){return function(h){return{field:Pa(h.field),direction:VW(h.dir)}}(l)})}(t.orderBy);s&&(n.structuredQuery.orderBy=s);var u=function(c,l){return c.I||ea(l)?l:{value:l}}(e,t.limit);return u!==null&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt=FA(t.startAt)),t.endAt&&(n.structuredQuery.endAt=FA(t.endAt)),n}function NP(e){var t=IP(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ve(r===1);var s=n.from[0];s.allDescendants?i=s.collectionId:t=t.child(s.collectionId)}var u=[];n.where&&(u=RP(n.where));var c=[];n.orderBy&&(c=n.orderBy.map(function(g){return function(m){return new Ha(ja(m.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(g)}));var l=null;n.limit&&(l=function(g){var m;return ea(m=typeof g=="object"?g.value:g)?null:m}(n.limit));var h=null;n.startAt&&(h=UA(n.startAt));var p=null;return n.endAt&&(p=UA(n.endAt)),oP(t,i,c,u,l,"F",h,p)}function RP(e){return e?e.unaryFilter!==void 0?[KW(e)]:e.fieldFilter!==void 0?[qW(e)]:e.compositeFilter!==void 0?e.compositeFilter.filters.map(function(t){return RP(t)}).reduce(function(t,n){return t.concat(n)}):se():[]}function FA(e){return{before:e.before,values:e.position}}function UA(e){var t=!!e.before,n=e.values||[];return new Sl(n,t)}function VW(e){return MW[e]}function BW(e){return FW[e]}function Pa(e){return{fieldPath:e.canonicalString()}}function ja(e){return Wr.fromServerFormat(e.fieldPath)}function qW(e){return nr.create(ja(e.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return se()}}(e.fieldFilter.op),e.fieldFilter.value)}function KW(e){switch(e.unaryFilter.op){case"IS_NAN":var t=ja(e.unaryFilter.field);return nr.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=ja(e.unaryFilter.field);return nr.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=ja(e.unaryFilter.field);return nr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=ja(e.unaryFilter.field);return nr.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return se()}}function HW(e){var t=[];return e.fields.forEach(function(n){return t.push(n.canonicalString())}),{fieldPaths:t}}function OP(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hr(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=jA(t)),t=WW(e.get(n),t);return jA(t)}function WW(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var s=e.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function jA(e){return e+""}function Pi(e){var t=e.length;if(ve(t>=2),t===2)return ve(e.charAt(0)===""&&e.charAt(1)===""),qe.emptyPath();for(var n=t-2,r=[],i="",s=0;s<t;){var u=e.indexOf("",s);switch((u<0||u>n)&&se(),e.charAt(u+1)){case"":var c=e.substring(s,u),l=void 0;i.length===0?l=c:(l=i+=c,i=""),r.push(l);break;case"":i+=e.substring(s,u),i+="\0";break;case"":i+=e.substring(s,u+1);break;default:se()}s=u+2}return new qe(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var GW=function(e,t){this.seconds=e,this.nanoseconds=t},Yn=function(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n};Yn.store="owner",Yn.key="owner";var To=function(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n};To.store="mutationQueues",To.keyPath="userId";var et=function(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};et.store="mutations",et.keyPath="batchId",et.userMutationsIndex="userMutationsIndex",et.userMutationsKeyPath=["userId","batchId"];var sn=function(){function e(){}return e.prefixForUser=function(t){return[t]},e.prefixForPath=function(t,n){return[t,Hr(n)]},e.key=function(t,n,r){return[t,Hr(n),r]},e}();sn.store="documentMutations",sn.PLACEHOLDER=new sn;var $W=function(e,t){this.path=e,this.readTime=t},zW=function(e,t){this.path=e,this.version=t},dt=function(e,t,n,r,i,s){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=s};dt.store="remoteDocuments",dt.readTimeIndex="readTimeIndex",dt.readTimeIndexPath="readTime",dt.collectionReadTimeIndex="collectionReadTimeIndex",dt.collectionReadTimeIndexPath=["parentPath","readTime"];var si=function(e){this.byteSize=e};si.store="remoteDocumentGlobal",si.key="remoteDocumentGlobalKey";var Fn=function(e,t,n,r,i,s,u){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=s,this.query=u};Fn.store="targets",Fn.keyPath="targetId",Fn.queryTargetsIndexName="queryTargetsIndex",Fn.queryTargetsKeyPath=["canonicalId","targetId"];var Xt=function(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n};Xt.store="targetDocuments",Xt.keyPath=["targetId","path"],Xt.documentTargetsIndex="documentTargetsIndex",Xt.documentTargetsKeyPath=["path","targetId"];var Xn=function(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Xn.key="targetGlobalKey",Xn.store="targetGlobal";var Os=function(e,t){this.collectionId=e,this.parent=t};Os.store="collectionParents",Os.keyPath=["collectionId","parent"];var Mi=function(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r};Mi.store="clientMetadata",Mi.keyPath="clientId";var fu=function(e,t,n){this.bundleId=e,this.createTime=t,this.version=n};fu.store="bundles",fu.keyPath="bundleId";var hu=function(e,t,n){this.name=e,this.readTime=t,this.bundledQuery=n};hu.store="namedQueries",hu.keyPath="name";var QW=Ie(Ie([],Ie(Ie([],Ie(Ie([],Ie(Ie([],[To.store,et.store,sn.store,dt.store,Fn.store,Yn.store,Xn.store,Xt.store]),[Mi.store])),[si.store])),[Os.store])),[fu.store,hu.store]),PP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",DP=function(){function e(){this.onCommittedListeners=[]}return e.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},e.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},e}(),pn=function(){var e=this;this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})},K=function(){function e(t){var n=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(r){n.isDone=!0,n.result=r,n.nextCallback&&n.nextCallback(r)},function(r){n.isDone=!0,n.error=r,n.catchCallback&&n.catchCallback(r)})}return e.prototype.catch=function(t){return this.next(void 0,t)},e.prototype.next=function(t,n){var r=this;return this.callbackAttached&&se(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e(function(i,s){r.nextCallback=function(u){r.wrapSuccess(t,u).next(i,s)},r.catchCallback=function(u){r.wrapFailure(n,u).next(i,s)}})},e.prototype.toPromise=function(){var t=this;return new Promise(function(n,r){t.next(n,r)})},e.prototype.wrapUserFunction=function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(r){return e.reject(r)}},e.prototype.wrapSuccess=function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.resolve(n)},e.prototype.wrapFailure=function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.reject(n)},e.resolve=function(t){return new e(function(n,r){n(t)})},e.reject=function(t){return new e(function(n,r){r(t)})},e.waitFor=function(t){return new e(function(n,r){var i=0,s=0,u=!1;t.forEach(function(c){++i,c.next(function(){++s,u&&s===i&&n()},function(l){return r(l)})}),u=!0,s===i&&n()})},e.or=function(t){for(var n=e.resolve(!1),r=function(u){n=n.next(function(c){return c?e.resolve(c):u()})},i=0,s=t;i<s.length;i++)r(s[i]);return n},e.forEach=function(t,n){var r=this,i=[];return t.forEach(function(s,u){i.push(n.call(r,s,u))}),this.waitFor(i)},e}(),xP=function(){function e(t,n){var r=this;this.action=t,this.transaction=n,this.aborted=!1,this.ft=new pn,this.transaction.oncomplete=function(){r.ft.resolve()},this.transaction.onabort=function(){n.error?r.ft.reject(new Zc(t,n.error)):r.ft.resolve()},this.transaction.onerror=function(i){var s=Zb(i.target.error);r.ft.reject(new Zc(t,s))}}return e.open=function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(s){throw new Zc(n,s)}},Object.defineProperty(e.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),e.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Q("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},e.prototype.store=function(t){var n=this.transaction.objectStore(t);return new XW(n)},e}(),du=function(){function e(t,n,r){this.name=t,this.version=n,this.wt=r,e._t(Ls())===12.2&&It("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return e.delete=function(t){return Q("SimpleDb","Removing database:",t),ys(window.indexedDB.deleteDatabase(t)).toPromise()},e.yt=function(){if(typeof indexedDB>"u")return!1;if(e.gt())return!0;var t=Ls(),n=e._t(t),r=0<n&&n<10,i=e.Et(t),s=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||s)},e.gt=function(){var t;return typeof process<"u"&&((t=process.env)===null||t===void 0?void 0:t.Tt)==="YES"},e.It=function(t,n){return t.store(n)},e._t=function(t){var n=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)},e.Et=function(t){var n=t.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)},e.prototype.At=function(t){return C(this,void 0,void 0,function(){var n,r=this;return S(this,function(i){switch(i.label){case 0:return this.db?[3,2]:(Q("SimpleDb","Opening database:",this.name),n=this,[4,new Promise(function(s,u){var c=indexedDB.open(r.name,r.version);c.onsuccess=function(l){var h=l.target.result;s(h)},c.onblocked=function(){u(new Zc(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},c.onerror=function(l){var h=l.target.error;h.name==="VersionError"?u(new B(O.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):u(new Zc(t,h))},c.onupgradeneeded=function(l){Q("SimpleDb",'Database "'+r.name+'" requires upgrade from version:',l.oldVersion);var h=l.target.result;r.wt.Rt(h,c.transaction,l.oldVersion,r.version).next(function(){Q("SimpleDb","Database upgrade to version "+r.version+" complete")})}})]);case 1:n.db=i.sent(),i.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(s){return r.bt(s)}),this.db)]}})})},e.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(n){return t(n)})},e.prototype.runTransaction=function(t,n,r,i){return C(this,void 0,void 0,function(){var s,u,c,l,h;return S(this,function(p){switch(p.label){case 0:s=n==="readonly",u=0,c=function(){var g,m,_,b,E;return S(this,function(I){switch(I.label){case 0:++u,I.label=1;case 1:return I.trys.push([1,4,,5]),[4,l.At(t)];case 2:return l.db=I.sent(),g=xP.open(l.db,t,s?"readonly":"readwrite",r),m=i(g).catch(function(N){return g.abort(N),K.reject(N)}).toPromise(),_={},m.catch(function(){}),[4,g.dt];case 3:return[2,(_.value=(I.sent(),m),_)];case 4:return b=I.sent(),E=b.name!=="FirebaseError"&&u<3,Q("SimpleDb","Transaction failed with error:",b.message,"Retrying:",E),l.close(),E?[3,5]:[2,{value:Promise.reject(b)}];case 5:return[2]}})},l=this,p.label=1;case 1:return[5,c()];case 2:if(typeof(h=p.sent())=="object")return[2,h.value];p.label=3;case 3:return[3,1];case 4:return[2]}})})},e.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},e}(),YW=function(){function e(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(e.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),e.prototype.done=function(){this.Vt=!0},e.prototype.Ct=function(t){this.St=t},e.prototype.delete=function(){return ys(this.Pt.delete())},e}(),Zc=function(e){function t(n,r){var i=this;return(i=e.call(this,O.UNAVAILABLE,"IndexedDB transaction '"+n+"' failed: "+r)||this).name="IndexedDbTransactionError",i}return Z(t,e),t}(B);function ta(e){return e.name==="IndexedDbTransactionError"}var XW=function(){function e(t){this.store=t}return e.prototype.put=function(t,n){var r;return n!==void 0?(Q("SimpleDb","PUT",this.store.name,t,n),r=this.store.put(n,t)):(Q("SimpleDb","PUT",this.store.name,"<auto-key>",t),r=this.store.put(t)),ys(r)},e.prototype.add=function(t){return Q("SimpleDb","ADD",this.store.name,t,t),ys(this.store.add(t))},e.prototype.get=function(t){var n=this;return ys(this.store.get(t)).next(function(r){return r===void 0&&(r=null),Q("SimpleDb","GET",n.store.name,t,r),r})},e.prototype.delete=function(t){return Q("SimpleDb","DELETE",this.store.name,t),ys(this.store.delete(t))},e.prototype.count=function(){return Q("SimpleDb","COUNT",this.store.name),ys(this.store.count())},e.prototype.Nt=function(t,n){var r=this.cursor(this.options(t,n)),i=[];return this.xt(r,function(s,u){i.push(u)}).next(function(){return i})},e.prototype.kt=function(t,n){Q("SimpleDb","DELETE ALL",this.store.name);var r=this.options(t,n);r.Ft=!1;var i=this.cursor(r);return this.xt(i,function(s,u,c){return c.delete()})},e.prototype.$t=function(t,n){var r;n?r=t:(r={},n=t);var i=this.cursor(r);return this.xt(i,n)},e.prototype.Ot=function(t){var n=this.cursor({});return new K(function(r,i){n.onerror=function(s){var u=Zb(s.target.error);i(u)},n.onsuccess=function(s){var u=s.target.result;u?t(u.primaryKey,u.value).next(function(c){c?u.continue():r()}):r()}})},e.prototype.xt=function(t,n){var r=[];return new K(function(i,s){t.onerror=function(u){s(u.target.error)},t.onsuccess=function(u){var c=u.target.result;if(c){var l=new YW(c),h=n(c.primaryKey,c.value,l);if(h instanceof K){var p=h.catch(function(g){return l.done(),K.reject(g)});r.push(p)}l.isDone?i():l.Dt===null?c.continue():c.continue(l.Dt)}else i()}}).next(function(){return K.waitFor(r)})},e.prototype.options=function(t,n){var r;return t!==void 0&&(typeof t=="string"?r=t:n=t),{index:r,range:n}},e.prototype.cursor=function(t){var n="next";if(t.reverse&&(n="prev"),t.index){var r=this.store.index(t.index);return t.Ft?r.openKeyCursor(t.range,n):r.openCursor(t.range,n)}return this.store.openCursor(t.range,n)},e}();function ys(e){return new K(function(t,n){e.onsuccess=function(r){var i=r.target.result;t(i)},e.onerror=function(r){var i=Zb(r.target.error);n(i)}})}var VA=!1;function Zb(e){var t=du._t(Ls());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new B("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return VA||(VA=!0,setTimeout(function(){throw r},0)),r}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var BA=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).Mt=n,i.currentSequenceNumber=r,i}return Z(t,e),t}(DP);function Bn(e,t){var n=J(e);return du.It(n.Mt,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var e0=function(){function e(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return e.prototype.applyToRemoteDocument=function(t,n){for(var r=n.mutationResults,i=0;i<this.mutations.length;i++){var s=this.mutations[i];s.key.isEqual(t.key)&&AW(s,t,r[i])}},e.prototype.applyToLocalView=function(t){for(var n=0,r=this.baseMutations;n<r.length;n++)(u=r[n]).key.isEqual(t.key)&&B_(u,t,this.localWriteTime);for(var i=0,s=this.mutations;i<s.length;i++){var u;(u=s[i]).key.isEqual(t.key)&&B_(u,t,this.localWriteTime)}},e.prototype.applyToLocalDocumentSet=function(t){var n=this;this.mutations.forEach(function(r){var i=t.get(r.key),s=i;n.applyToLocalView(s),i.isValidDocument()||s.convertToNoDocument(ke.min())})},e.prototype.keys=function(){return this.mutations.reduce(function(t,n){return t.add(n.key)},Ge())},e.prototype.isEqual=function(t){return this.batchId===t.batchId&&iu(this.mutations,t.mutations,function(n,r){return AA(n,r)})&&iu(this.baseMutations,t.baseMutations,function(n,r){return AA(n,r)})},e}(),JW=function(){function e(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return e.from=function(t,n,r){ve(t.mutations.length===r.length);for(var i=_P(),s=t.mutations,u=0;u<s.length;u++)i=i.insert(s[u].key,r[u].version);return new e(t,n,r,i)},e}(),Xp=function(){function e(t,n,r,i,s,u,c){s===void 0&&(s=ke.min()),u===void 0&&(u=ke.min()),c===void 0&&(c=kn.EMPTY_BYTE_STRING),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=c}return e.prototype.withSequenceNumber=function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},e.prototype.withResumeToken=function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)},e.prototype.withLastLimboFreeSnapshotVersion=function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)},e}(),LP=function(e){this.Lt=e};function H_(e,t){if(t.document)return CP(e.Lt,t.document,!!t.hasCommittedMutations);if(t.noDocument){var n=ae.fromSegments(t.noDocument.path),r=vu(t.noDocument.readTime),i=tn.newNoDocument(n,r);return t.hasCommittedMutations?i.setHasCommittedMutations():i}if(t.unknownDocument){var s=ae.fromSegments(t.unknownDocument.path);return r=vu(t.unknownDocument.version),tn.newUnknownDocument(s,r)}return se()}function qA(e,t,n){var r=t0(n),i=t.key.path.popLast().toArray();if(t.isFoundDocument()){var s=function(g,m){return{name:Al(g,m.key),fields:m.data.value.mapValue.fields,updateTime:Cl(g,m.version.toTimestamp())}}(e.Lt,t),u=t.hasCommittedMutations;return new dt(null,null,s,u,r,i)}if(t.isNoDocument()){var c=t.key.path.toArray(),l=pu(t.version);return u=t.hasCommittedMutations,new dt(null,new $W(c,l),null,u,r,i)}if(t.isUnknownDocument()){var h=t.key.path.toArray(),p=pu(t.version);return new dt(new zW(h,p),null,null,!0,r,i)}return se()}function t0(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function MP(e){var t=new jn(e[0],e[1]);return ke.fromTimestamp(t)}function pu(e){var t=e.toTimestamp();return new GW(t.seconds,t.nanoseconds)}function vu(e){var t=new jn(e.seconds,e.nanoseconds);return ke.fromTimestamp(t)}function Ma(e,t){for(var n=(t.baseMutations||[]).map(function(l){return MA(e.Lt,l)}),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&t.mutations[r+1].transform!==void 0){var s=t.mutations[r+1];i.updateTransforms=s.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var u=t.mutations.map(function(l){return MA(e.Lt,l)}),c=jn.fromMillis(t.localWriteTimeMs);return new e0(t.batchId,c,n,u)}function Uc(e){var t,n,r=vu(e.readTime),i=e.lastLimboFreeSnapshotVersion!==void 0?vu(e.lastLimboFreeSnapshotVersion):ke.min();return e.query.documents!==void 0?(ve((n=e.query).documents.length===1),t=Er(xu(IP(n.documents[0])))):t=function(s){return Er(NP(s))}(e.query),new Xp(t,e.targetId,0,e.lastListenSequenceNumber,r,i,kn.fromBase64String(e.resumeToken))}function FP(e,t){var n,r=pu(t.snapshotVersion),i=pu(t.lastLimboFreeSnapshotVersion);n=Pd(t.target)?AP(e.Lt,t.target):kP(e.Lt,t.target);var s=t.resumeToken.toBase64();return new Fn(t.targetId,rf(t.target),r,s,t.sequenceNumber,i,n)}function n0(e){var t=NP({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?sP(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ZW=function(){function e(){}return e.prototype.getBundleMetadata=function(t,n){return KA(t).get(n).next(function(r){if(r)return{id:(i=r).bundleId,createTime:vu(i.createTime),version:i.version};var i})},e.prototype.saveBundleMetadata=function(t,n){return KA(t).put({bundleId:(r=n).id,createTime:pu(qt(r.createTime)),version:r.version});var r},e.prototype.getNamedQuery=function(t,n){return HA(t).get(n).next(function(r){if(r)return{name:(i=r).name,query:n0(i.bundledQuery),readTime:vu(i.readTime)};var i})},e.prototype.saveNamedQuery=function(t,n){return HA(t).put(function(r){return{name:r.name,readTime:pu(qt(r.readTime)),bundledQuery:r.bundledQuery}}(n))},e}();function KA(e){return Bn(e,fu.store)}function HA(e){return Bn(e,hu.store)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var eG=function(){function e(){this.Bt=new r0}return e.prototype.addToCollectionParentIndex=function(t,n){return this.Bt.add(n),K.resolve()},e.prototype.getCollectionParents=function(t,n){return K.resolve(this.Bt.getEntries(n))},e}(),r0=function(){function e(){this.index={}}return e.prototype.add=function(t){var n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new Ot(qe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s},e.prototype.has=function(t){var n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)},e.prototype.getEntries=function(t){return(this.index[t]||new Ot(qe.comparator)).toArray()},e}(),tG=function(){function e(){this.qt=new r0}return e.prototype.addToCollectionParentIndex=function(t,n){var r=this;if(!this.qt.has(n)){var i=n.lastSegment(),s=n.popLast();t.addOnCommittedListener(function(){r.qt.add(n)});var u={collectionId:i,parent:Hr(s)};return WA(t).put(u)}return K.resolve()},e.prototype.getCollectionParents=function(t,n){var r=[],i=IDBKeyRange.bound([n,""],[JO(n),""],!1,!0);return WA(t).Nt(i).next(function(s){for(var u=0,c=s;u<c.length;u++){var l=c[u];if(l.collectionId!==n)break;r.push(Pi(l.parent))}return r})},e}();function WA(e){return Bn(e,Os.store)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var GA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ri=function(){function e(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return e.withCacheSize=function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UP(e,t,n){var r=e.store(et.store),i=e.store(sn.store),s=[],u=IDBKeyRange.only(n.batchId),c=0,l=r.$t({range:u},function(b,E,I){return c++,I.delete()});s.push(l.next(function(){ve(c===1)}));for(var h=[],p=0,g=n.mutations;p<g.length;p++){var m=g[p],_=sn.key(t,m.key.path,n.batchId);s.push(i.delete(_)),h.push(m.key)}return K.waitFor(s).next(function(){return h})}function Md(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw se();t=e.noDocument}return JSON.stringify(t).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ri.DEFAULT_COLLECTION_PERCENTILE=10,ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ri.DEFAULT=new ri(41943040,ri.DEFAULT_COLLECTION_PERCENTILE,ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ri.DISABLED=new ri(-1,0,0);var nG=function(){function e(t,n,r,i){this.userId=t,this.R=n,this.Ut=r,this.referenceDelegate=i,this.Kt={}}return e.Qt=function(t,n,r,i){return ve(t.uid!==""),new e(t.isAuthenticated()?t.uid:"",n,r,i)},e.prototype.checkEmpty=function(t){var n=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ao(t).$t({index:et.userMutationsIndex,range:r},function(i,s,u){n=!1,u.done()}).next(function(){return n})},e.prototype.addMutationBatch=function(t,n,r,i){var s=this,u=Fa(t),c=ao(t);return c.add({}).next(function(l){ve(typeof l=="number");for(var h=new e0(l,n,r,i),p=function(N,x,P){var z=P.baseMutations.map(function(V){return Ld(N.Lt,V)}),W=P.mutations.map(function(V){return Ld(N.Lt,V)});return new et(x,P.batchId,P.localWriteTime.toMillis(),z,W)}(s.R,s.userId,h),g=[],m=new Ot(function(N,x){return De(N.canonicalString(),x.canonicalString())}),_=0,b=i;_<b.length;_++){var E=b[_],I=sn.key(s.userId,E.key.path,l);m=m.add(E.key.path.popLast()),g.push(c.put(p)),g.push(u.put(I,sn.PLACEHOLDER))}return m.forEach(function(N){g.push(s.Ut.addToCollectionParentIndex(t,N))}),t.addOnCommittedListener(function(){s.Kt[l]=h.keys()}),K.waitFor(g).next(function(){return h})})},e.prototype.lookupMutationBatch=function(t,n){var r=this;return ao(t).get(n).next(function(i){return i?(ve(i.userId===r.userId),Ma(r.R,i)):null})},e.prototype.jt=function(t,n){var r=this;return this.Kt[n]?K.resolve(this.Kt[n]):this.lookupMutationBatch(t,n).next(function(i){if(i){var s=i.keys();return r.Kt[n]=s,s}return null})},e.prototype.getNextMutationBatchAfterBatchId=function(t,n){var r=this,i=n+1,s=IDBKeyRange.lowerBound([this.userId,i]),u=null;return ao(t).$t({index:et.userMutationsIndex,range:s},function(c,l,h){l.userId===r.userId&&(ve(l.batchId>=i),u=Ma(r.R,l)),h.done()}).next(function(){return u})},e.prototype.getHighestUnacknowledgedBatchId=function(t){var n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return ao(t).$t({index:et.userMutationsIndex,range:n,reverse:!0},function(i,s,u){r=s.batchId,u.done()}).next(function(){return r})},e.prototype.getAllMutationBatches=function(t){var n=this,r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ao(t).Nt(et.userMutationsIndex,r).next(function(i){return i.map(function(s){return Ma(n.R,s)})})},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,n){var r=this,i=sn.prefixForPath(this.userId,n.path),s=IDBKeyRange.lowerBound(i),u=[];return Fa(t).$t({range:s},function(c,l,h){var p=c[0],g=c[1],m=c[2],_=Pi(g);if(p===r.userId&&n.path.isEqual(_))return ao(t).get(m).next(function(b){if(!b)throw se();ve(b.userId===r.userId),u.push(Ma(r.R,b))});h.done()}).next(function(){return u})},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,n){var r=this,i=new Ot(De),s=[];return n.forEach(function(u){var c=sn.prefixForPath(r.userId,u.path),l=IDBKeyRange.lowerBound(c),h=Fa(t).$t({range:l},function(p,g,m){var _=p[0],b=p[1],E=p[2],I=Pi(b);_===r.userId&&u.path.isEqual(I)?i=i.add(E):m.done()});s.push(h)}),K.waitFor(s).next(function(){return r.Wt(t,i)})},e.prototype.getAllMutationBatchesAffectingQuery=function(t,n){var r=this,i=n.path,s=i.length+1,u=sn.prefixForPath(this.userId,i),c=IDBKeyRange.lowerBound(u),l=new Ot(De);return Fa(t).$t({range:c},function(h,p,g){var m=h[0],_=h[1],b=h[2],E=Pi(_);m===r.userId&&i.isPrefixOf(E)?E.length===s&&(l=l.add(b)):g.done()}).next(function(){return r.Wt(t,l)})},e.prototype.Wt=function(t,n){var r=this,i=[],s=[];return n.forEach(function(u){s.push(ao(t).get(u).next(function(c){if(c===null)throw se();ve(c.userId===r.userId),i.push(Ma(r.R,c))}))}),K.waitFor(s).next(function(){return i})},e.prototype.removeMutationBatch=function(t,n){var r=this;return UP(t.Mt,this.userId,n).next(function(i){return t.addOnCommittedListener(function(){r.Gt(n.batchId)}),K.forEach(i,function(s){return r.referenceDelegate.markPotentiallyOrphaned(t,s)})})},e.prototype.Gt=function(t){delete this.Kt[t]},e.prototype.performConsistencyCheck=function(t){var n=this;return this.checkEmpty(t).next(function(r){if(!r)return K.resolve();var i=IDBKeyRange.lowerBound(sn.prefixForUser(n.userId)),s=[];return Fa(t).$t({range:i},function(u,c,l){if(u[0]===n.userId){var h=Pi(u[1]);s.push(h)}else l.done()}).next(function(){ve(s.length===0)})})},e.prototype.containsKey=function(t,n){return jP(t,this.userId,n)},e.prototype.zt=function(t){var n=this;return VP(t).get(this.userId).next(function(r){return r||new To(n.userId,-1,"")})},e}();function jP(e,t,n){var r=sn.prefixForPath(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r),u=!1;return Fa(e).$t({range:s,Ft:!0},function(c,l,h){var p=c[0],g=c[1];c[2],p===t&&g===i&&(u=!0),h.done()}).next(function(){return u})}function ao(e){return Bn(e,et.store)}function Fa(e){return Bn(e,sn.store)}function VP(e){return Bn(e,To.store)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fd=function(){function e(t){this.Ht=t}return e.prototype.next=function(){return this.Ht+=2,this.Ht},e.Jt=function(){return new e(0)},e.Yt=function(){return new e(-1)},e}(),rG=function(){function e(t,n){this.referenceDelegate=t,this.R=n}return e.prototype.allocateTargetId=function(t){var n=this;return this.Xt(t).next(function(r){var i=new Fd(r.highestTargetId);return r.highestTargetId=i.next(),n.Zt(t,r).next(function(){return r.highestTargetId})})},e.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(n){return ke.fromTimestamp(new jn(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds))})},e.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(n){return n.highestListenSequenceNumber})},e.prototype.setTargetsMetadata=function(t,n,r){var i=this;return this.Xt(t).next(function(s){return s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),i.Zt(t,s)})},e.prototype.addTargetData=function(t,n){var r=this;return this.te(t,n).next(function(){return r.Xt(t).next(function(i){return i.targetCount+=1,r.ee(n,i),r.Zt(t,i)})})},e.prototype.updateTargetData=function(t,n){return this.te(t,n)},e.prototype.removeTargetData=function(t,n){var r=this;return this.removeMatchingKeysForTargetId(t,n.targetId).next(function(){return Da(t).delete(n.targetId)}).next(function(){return r.Xt(t)}).next(function(i){return ve(i.targetCount>0),i.targetCount-=1,r.Zt(t,i)})},e.prototype.removeTargets=function(t,n,r){var i=this,s=0,u=[];return Da(t).$t(function(c,l){var h=Uc(l);h.sequenceNumber<=n&&r.get(h.targetId)===null&&(s++,u.push(i.removeTargetData(t,h)))}).next(function(){return K.waitFor(u)}).next(function(){return s})},e.prototype.forEachTarget=function(t,n){return Da(t).$t(function(r,i){var s=Uc(i);n(s)})},e.prototype.Xt=function(t){return $A(t).get(Xn.key).next(function(n){return ve(n!==null),n})},e.prototype.Zt=function(t,n){return $A(t).put(Xn.key,n)},e.prototype.te=function(t,n){return Da(t).put(FP(this.R,n))},e.prototype.ee=function(t,n){var r=!1;return t.targetId>n.highestTargetId&&(n.highestTargetId=t.targetId,r=!0),t.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=t.sequenceNumber,r=!0),r},e.prototype.getTargetCount=function(t){return this.Xt(t).next(function(n){return n.targetCount})},e.prototype.getTargetData=function(t,n){var r=rf(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),s=null;return Da(t).$t({range:i,index:Fn.queryTargetsIndexName},function(u,c,l){var h=Uc(c);$p(n,h.target)&&(s=h,l.done())}).next(function(){return s})},e.prototype.addMatchingKeys=function(t,n,r){var i=this,s=[],u=vo(t);return n.forEach(function(c){var l=Hr(c.path);s.push(u.put(new Xt(r,l))),s.push(i.referenceDelegate.addReference(t,r,c))}),K.waitFor(s)},e.prototype.removeMatchingKeys=function(t,n,r){var i=this,s=vo(t);return K.forEach(n,function(u){var c=Hr(u.path);return K.waitFor([s.delete([r,c]),i.referenceDelegate.removeReference(t,r,u)])})},e.prototype.removeMatchingKeysForTargetId=function(t,n){var r=vo(t),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)},e.prototype.getMatchingKeysForTargetId=function(t,n){var r=IDBKeyRange.bound([n],[n+1],!1,!0),i=vo(t),s=Ge();return i.$t({range:r,Ft:!0},function(u,c,l){var h=Pi(u[1]),p=new ae(h);s=s.add(p)}).next(function(){return s})},e.prototype.containsKey=function(t,n){var r=Hr(n.path),i=IDBKeyRange.bound([r],[JO(r)],!1,!0),s=0;return vo(t).$t({index:Xt.documentTargetsIndex,Ft:!0,range:i},function(u,c,l){var h=u[0];u[1],h!==0&&(s++,l.done())}).next(function(){return s>0})},e.prototype.lt=function(t,n){return Da(t).get(n).next(function(r){return r?Uc(r):null})},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Da(e){return Bn(e,Fn.store)}function $A(e){return Bn(e,Xn.store)}function vo(e){return Bn(e,Xt.store)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function na(e){return C(this,void 0,void 0,function(){return S(this,function(t){if(e.code!==O.FAILED_PRECONDITION||e.message!==PP)throw e;return Q("LocalStore","Unexpectedly lost primary lease"),[2]})})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zA(e,t){var n=e[0],r=e[1],i=t[0],s=t[1],u=De(n,i);return u===0?De(r,s):u}var iG=function(){function e(t){this.ne=t,this.buffer=new Ot(zA),this.se=0}return e.prototype.ie=function(){return++this.se},e.prototype.re=function(t){var n=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(n);else{var r=this.buffer.last();zA(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}},Object.defineProperty(e.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),e}(),oG=function(){function e(t,n){this.garbageCollector=t,this.asyncQueue=n,this.oe=!1,this.ce=null}return e.prototype.start=function(t){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.ue(t)},e.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(e.prototype,"started",{get:function(){return this.ce!==null},enumerable:!1,configurable:!0}),e.prototype.ue=function(t){var n=this,r=this.oe?3e5:6e4;Q("LruGarbageCollector","Garbage collection scheduled in "+r+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,function(){return C(n,void 0,void 0,function(){var i;return S(this,function(s){switch(s.label){case 0:this.ce=null,this.oe=!0,s.label=1;case 1:return s.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return s.sent(),[3,7];case 3:return ta(i=s.sent())?(Q("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i),[3,6]):[3,4];case 4:return[4,na(i)];case 5:s.sent(),s.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return s.sent(),[2]}})})})},e}(),sG=function(){function e(t,n){this.ae=t,this.params=n}return e.prototype.calculateTargetCount=function(t,n){return this.ae.he(t).next(function(r){return Math.floor(n/100*r)})},e.prototype.nthSequenceNumber=function(t,n){var r=this;if(n===0)return K.resolve(tr.o);var i=new iG(n);return this.ae.forEachTarget(t,function(s){return i.re(s.sequenceNumber)}).next(function(){return r.ae.le(t,function(s){return i.re(s)})}).next(function(){return i.maxValue})},e.prototype.removeTargets=function(t,n,r){return this.ae.removeTargets(t,n,r)},e.prototype.removeOrphanedDocuments=function(t,n){return this.ae.removeOrphanedDocuments(t,n)},e.prototype.collect=function(t,n){var r=this;return this.params.cacheSizeCollectionThreshold===-1?(Q("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(GA)):this.getCacheSize(t).next(function(i){return i<r.params.cacheSizeCollectionThreshold?(Q("LruGarbageCollector","Garbage collection skipped; Cache size "+i+" is lower than threshold "+r.params.cacheSizeCollectionThreshold),GA):r.fe(t,n)})},e.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},e.prototype.fe=function(t,n){var r,i,s,u,c,l,h,p=this,g=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(m){return m>p.params.maximumSequenceNumbersToCollect?(Q("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+p.params.maximumSequenceNumbersToCollect+" from "+m),i=p.params.maximumSequenceNumbersToCollect):i=m,u=Date.now(),p.nthSequenceNumber(t,i)}).next(function(m){return r=m,c=Date.now(),p.removeTargets(t,r,n)}).next(function(m){return s=m,l=Date.now(),p.removeOrphanedDocuments(t,r)}).next(function(m){return h=Date.now(),F_()<=Re.DEBUG&&Q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in `+(u-g)+`ms
	Determined least recently used `+i+" in "+(c-u)+`ms
	Removed `+s+" targets in "+(l-c)+`ms
	Removed `+m+" documents in "+(h-l)+`ms
Total Duration: `+(h-g)+"ms"),K.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:m})})},e}(),aG=function(){function e(t,n){this.db=t,this.garbageCollector=function(r,i){return new sG(r,i)}(this,n)}return e.prototype.he=function(t){var n=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(r){return n.next(function(i){return r+i})})},e.prototype.de=function(t){var n=0;return this.le(t,function(r){n++}).next(function(){return n})},e.prototype.forEachTarget=function(t,n){return this.db.getTargetCache().forEachTarget(t,n)},e.prototype.le=function(t,n){return this.we(t,function(r,i){return n(i)})},e.prototype.addReference=function(t,n,r){return Dh(t,r)},e.prototype.removeReference=function(t,n,r){return Dh(t,r)},e.prototype.removeTargets=function(t,n,r){return this.db.getTargetCache().removeTargets(t,n,r)},e.prototype.markPotentiallyOrphaned=function(t,n){return Dh(t,n)},e.prototype._e=function(t,n){return function(r,i){var s=!1;return VP(r).Ot(function(u){return jP(r,u,i).next(function(c){return c&&(s=!0),K.resolve(!c)})}).next(function(){return s})}(t,n)},e.prototype.removeOrphanedDocuments=function(t,n){var r=this,i=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[],u=0;return this.we(t,function(c,l){if(l<=n){var h=r._e(t,c).next(function(p){if(!p)return u++,i.getEntry(t,c).next(function(){return i.removeEntry(c),vo(t).delete([0,Hr(c.path)])})});s.push(h)}}).next(function(){return K.waitFor(s)}).next(function(){return i.apply(t)}).next(function(){return u})},e.prototype.removeTarget=function(t,n){var r=n.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,r)},e.prototype.updateLimboDocument=function(t,n){return Dh(t,n)},e.prototype.we=function(t,n){var r,i=vo(t),s=tr.o;return i.$t({index:Xt.documentTargetsIndex},function(u,c){var l=u[0];u[1];var h=c.path,p=c.sequenceNumber;l===0?(s!==tr.o&&n(new ae(Pi(r)),s),s=p,r=h):s=tr.o}).next(function(){s!==tr.o&&n(new ae(Pi(r)),s)})},e.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},e}();function Dh(e,t){return vo(e).put(function(n,r){return new Xt(0,Hr(n.path),r)}(t,e.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lu=function(){function e(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={}}return e.prototype.get=function(t){var n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0)for(var i=0,s=r;i<s.length;i++){var u=s[i],c=u[0],l=u[1];if(this.equalsFn(c,t))return l}},e.prototype.has=function(t){return this.get(t)!==void 0},e.prototype.set=function(t,n){var r=this.mapKeyFn(t),i=this.inner[r];if(i!==void 0){for(var s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n])}else this.inner[r]=[[t,n]]},e.prototype.delete=function(t){var n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),!0;return!1},e.prototype.forEach=function(t){Zs(this.inner,function(n,r){for(var i=0,s=r;i<s.length;i++){var u=s[i],c=u[0],l=u[1];t(c,l)}})},e.prototype.isEmpty=function(){return ZO(this.inner)},e}(),BP=function(){function e(){this.changes=new Lu(function(t){return t.toString()},function(t,n){return t.isEqual(n)}),this.changesApplied=!1}return e.prototype.getReadTime=function(t){var n=this.changes.get(t);return n?n.readTime:ke.min()},e.prototype.addEntry=function(t,n){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:n})},e.prototype.removeEntry=function(t,n){n===void 0&&(n=null),this.assertNotApplied(),this.changes.set(t,{document:tn.newInvalidDocument(t),readTime:n})},e.prototype.getEntry=function(t,n){this.assertNotApplied();var r=this.changes.get(n);return r!==void 0?K.resolve(r.document):this.getFromCache(t,n)},e.prototype.getEntries=function(t,n){return this.getAllFromCache(t,n)},e.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},e.prototype.assertNotApplied=function(){},e}(),uG=function(){function e(t,n){this.R=t,this.Ut=n}return e.prototype.addEntry=function(t,n,r){return ho(t).put(xh(n),r)},e.prototype.removeEntry=function(t,n){var r=ho(t),i=xh(n);return r.delete(i)},e.prototype.updateMetadata=function(t,n){var r=this;return this.getMetadata(t).next(function(i){return i.byteSize+=n,r.me(t,i)})},e.prototype.getEntry=function(t,n){var r=this;return ho(t).get(xh(n)).next(function(i){return r.ye(n,i)})},e.prototype.ge=function(t,n){var r=this;return ho(t).get(xh(n)).next(function(i){return{document:r.ye(n,i),size:Md(i)}})},e.prototype.getEntries=function(t,n){var r=this,i=_r();return this.pe(t,n,function(s,u){var c=r.ye(s,u);i=i.insert(s,c)}).next(function(){return i})},e.prototype.Ee=function(t,n){var r=this,i=_r(),s=new vn(ae.comparator);return this.pe(t,n,function(u,c){var l=r.ye(u,c);i=i.insert(u,l),s=s.insert(u,Md(c))}).next(function(){return{documents:i,Te:s}})},e.prototype.pe=function(t,n,r){if(n.isEmpty())return K.resolve();var i=IDBKeyRange.bound(n.first().path.toArray(),n.last().path.toArray()),s=n.getIterator(),u=s.getNext();return ho(t).$t({range:i},function(c,l,h){for(var p=ae.fromSegments(c);u&&ae.comparator(u,p)<0;)r(u,null),u=s.getNext();u&&u.isEqual(p)&&(r(u,l),u=s.hasNext()?s.getNext():null),u?h.Ct(u.path.toArray()):h.done()}).next(function(){for(;u;)r(u,null),u=s.hasNext()?s.getNext():null})},e.prototype.getDocumentsMatchingQuery=function(t,n,r){var i=this,s=_r(),u=n.path.length+1,c={};if(r.isEqual(ke.min())){var l=n.path.toArray();c.range=IDBKeyRange.lowerBound(l)}else{var h=n.path.toArray(),p=t0(r);c.range=IDBKeyRange.lowerBound([h,p],!0),c.index=dt.collectionReadTimeIndex}return ho(t).$t(c,function(g,m,_){if(g.length===u){var b=H_(i.R,m);n.path.isPrefixOf(b.key.path)?sf(n,b)&&(s=s.insert(b.key,b)):_.done()}}).next(function(){return s})},e.prototype.newChangeBuffer=function(t){return new cG(this,!!t&&t.trackRemovals)},e.prototype.getSize=function(t){return this.getMetadata(t).next(function(n){return n.byteSize})},e.prototype.getMetadata=function(t){return QA(t).get(si.key).next(function(n){return ve(!!n),n})},e.prototype.me=function(t,n){return QA(t).put(si.key,n)},e.prototype.ye=function(t,n){if(n){var r=H_(this.R,n);if(!r.isNoDocument()||!r.version.isEqual(ke.min()))return r}return tn.newInvalidDocument(t)},e}(),cG=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).Ie=n,i.trackRemovals=r,i.Ae=new Lu(function(s){return s.toString()},function(s,u){return s.isEqual(u)}),i}return Z(t,e),t.prototype.applyChanges=function(n){var r=this,i=[],s=0,u=new Ot(function(c,l){return De(c.canonicalString(),l.canonicalString())});return this.changes.forEach(function(c,l){var h=r.Ae.get(c);if(l.document.isValidDocument()){var p=qA(r.Ie.R,l.document,r.getReadTime(c));u=u.add(c.path.popLast());var g=Md(p);s+=g-h,i.push(r.Ie.addEntry(n,c,p))}else if(s-=h,r.trackRemovals){var m=qA(r.Ie.R,tn.newNoDocument(c,ke.min()),r.getReadTime(c));i.push(r.Ie.addEntry(n,c,m))}else i.push(r.Ie.removeEntry(n,c))}),u.forEach(function(c){i.push(r.Ie.Ut.addToCollectionParentIndex(n,c))}),i.push(this.Ie.updateMetadata(n,s)),K.waitFor(i)},t.prototype.getFromCache=function(n,r){var i=this;return this.Ie.ge(n,r).next(function(s){return i.Ae.set(r,s.size),s.document})},t.prototype.getAllFromCache=function(n,r){var i=this;return this.Ie.Ee(n,r).next(function(s){var u=s.documents;return s.Te.forEach(function(c,l){i.Ae.set(c,l)}),u})},t}(BP);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QA(e){return Bn(e,si.store)}function ho(e){return Bn(e,dt.store)}function xh(e){return e.path.toArray()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lG=function(){function e(t){this.R=t}return e.prototype.Rt=function(t,n,r,i){var s=this;ve(r<i&&r>=0&&i<=11);var u=new xP("createOrUpgrade",n);r<1&&i>=1&&(function(l){l.createObjectStore(Yn.store)}(t),function(l){l.createObjectStore(To.store,{keyPath:To.keyPath}),l.createObjectStore(et.store,{keyPath:et.keyPath,autoIncrement:!0}).createIndex(et.userMutationsIndex,et.userMutationsKeyPath,{unique:!0}),l.createObjectStore(sn.store)}(t),YA(t),function(l){l.createObjectStore(dt.store)}(t));var c=K.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore(Xt.store),l.deleteObjectStore(Fn.store),l.deleteObjectStore(Xn.store)}(t),YA(t)),c=c.next(function(){return function(l){var h=l.store(Xn.store),p=new Xn(0,0,ke.min().toTimestamp(),0);return h.put(Xn.key,p)}(u)})),r<4&&i>=4&&(r!==0&&(c=c.next(function(){return function(l,h){return h.store(et.store).Nt().next(function(p){l.deleteObjectStore(et.store),l.createObjectStore(et.store,{keyPath:et.keyPath,autoIncrement:!0}).createIndex(et.userMutationsIndex,et.userMutationsKeyPath,{unique:!0});var g=h.store(et.store),m=p.map(function(_){return g.put(_)});return K.waitFor(m)})}(t,u)})),c=c.next(function(){(function(l){l.createObjectStore(Mi.store,{keyPath:Mi.keyPath})})(t)})),r<5&&i>=5&&(c=c.next(function(){return s.Re(u)})),r<6&&i>=6&&(c=c.next(function(){return function(l){l.createObjectStore(si.store)}(t),s.be(u)})),r<7&&i>=7&&(c=c.next(function(){return s.ve(u)})),r<8&&i>=8&&(c=c.next(function(){return s.Pe(t,u)})),r<9&&i>=9&&(c=c.next(function(){(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(t),function(l){var h=l.objectStore(dt.store);h.createIndex(dt.readTimeIndex,dt.readTimeIndexPath,{unique:!1}),h.createIndex(dt.collectionReadTimeIndex,dt.collectionReadTimeIndexPath,{unique:!1})}(n)})),r<10&&i>=10&&(c=c.next(function(){return s.Ve(u)})),r<11&&i>=11&&(c=c.next(function(){(function(l){l.createObjectStore(fu.store,{keyPath:fu.keyPath})})(t),function(l){l.createObjectStore(hu.store,{keyPath:hu.keyPath})}(t)})),c},e.prototype.be=function(t){var n=0;return t.store(dt.store).$t(function(r,i){n+=Md(i)}).next(function(){var r=new si(n);return t.store(si.store).put(si.key,r)})},e.prototype.Re=function(t){var n=this,r=t.store(To.store),i=t.store(et.store);return r.Nt().next(function(s){return K.forEach(s,function(u){var c=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return i.Nt(et.userMutationsIndex,c).next(function(l){return K.forEach(l,function(h){ve(h.userId===u.userId);var p=Ma(n.R,h);return UP(t,u.userId,p).next(function(){})})})})})},e.prototype.ve=function(t){var n=t.store(Xt.store),r=t.store(dt.store);return t.store(Xn.store).get(Xn.key).next(function(i){var s=[];return r.$t(function(u,c){var l=new qe(u),h=function(p){return[0,Hr(p)]}(l);s.push(n.get(h).next(function(p){return p?K.resolve():function(g){return n.put(new Xt(0,Hr(g),i.highestListenSequenceNumber))}(l)}))}).next(function(){return K.waitFor(s)})})},e.prototype.Pe=function(t,n){t.createObjectStore(Os.store,{keyPath:Os.keyPath});var r=n.store(Os.store),i=new r0,s=function(u){if(i.add(u)){var c=u.lastSegment(),l=u.popLast();return r.put({collectionId:c,parent:Hr(l)})}};return n.store(dt.store).$t({Ft:!0},function(u,c){var l=new qe(u);return s(l.popLast())}).next(function(){return n.store(sn.store).$t({Ft:!0},function(u,c){u[0];var l=u[1];u[2];var h=Pi(l);return s(h.popLast())})})},e.prototype.Ve=function(t){var n=this,r=t.store(Fn.store);return r.$t(function(i,s){var u=Uc(s),c=FP(n.R,u);return r.put(c)})},e}();function YA(e){e.createObjectStore(Xt.store,{keyPath:Xt.keyPath}).createIndex(Xt.documentTargetsIndex,Xt.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(Fn.store,{keyPath:Fn.keyPath}).createIndex(Fn.queryTargetsIndexName,Fn.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(Xn.store)}var yy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",fG=function(){function e(t,n,r,i,s,u,c,l,h,p){if(this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Se=s,this.window=u,this.document=c,this.De=h,this.Ce=p,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ke=null,this.inForeground=!1,this.Fe=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(g){return Promise.resolve()},!e.yt())throw new B(O.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new aG(this,i),this.Le=n+"main",this.R=new LP(l),this.Be=new du(this.Le,11,new lG(this.R)),this.qe=new rG(this.referenceDelegate,this.R),this.Ut=new tG,this.Ue=function(g,m){return new uG(g,m)}(this.R,this.Ut),this.Ke=new ZW,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,p===!1&&It("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return e.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new B(O.FAILED_PRECONDITION,yy);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(n){return t.qe.getHighestSequenceNumber(n)})}).then(function(n){t.Ne=new tr(n,t.De)}).then(function(){t.xe=!0}).catch(function(n){return t.Be&&t.Be.close(),Promise.reject(n)})},e.prototype.He=function(t){var n=this;return this.Me=function(r){return C(n,void 0,void 0,function(){return S(this,function(i){return this.started?[2,t(r)]:[2]})})},t(this.isPrimary)},e.prototype.setDatabaseDeletedListener=function(t){var n=this;this.Be.vt(function(r){return C(n,void 0,void 0,function(){return S(this,function(i){switch(i.label){case 0:return r.newVersion===null?[4,t()]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})})},e.prototype.setNetworkEnabled=function(t){var n=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return C(n,void 0,void 0,function(){return S(this,function(r){switch(r.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}})})}))},e.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(n){return Lh(n).put(new Mi(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(n).next(function(r){r||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(n)}).next(function(r){return t.isPrimary&&!r?t.Xe(n).next(function(){return!1}):!!r&&t.Ze(n).next(function(){return!0})})}).catch(function(n){if(ta(n))return Q("IndexedDbPersistence","Failed to extend owner lease: ",n),t.isPrimary;if(!t.allowTabSynchronization)throw n;return Q("IndexedDbPersistence","Releasing owner lease after error during lease refresh",n),!1}).then(function(n){t.isPrimary!==n&&t.Se.enqueueRetryable(function(){return t.Me(n)}),t.isPrimary=n})},e.prototype.Je=function(t){var n=this;return Dc(t).get(Yn.key).next(function(r){return K.resolve(n.tn(r))})},e.prototype.en=function(t){return Lh(t).delete(this.clientId)},e.prototype.nn=function(){return C(this,void 0,void 0,function(){var t,n,r,i,s=this;return S(this,function(u){switch(u.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(c){var l=Bn(c,Mi.store);return l.Nt().next(function(h){var p=s.rn(h,18e5),g=h.filter(function(m){return p.indexOf(m)===-1});return K.forEach(g,function(m){return l.delete(m.clientId)}).next(function(){return g})})}).catch(function(){return[]})]);case 1:if(t=u.sent(),this.Qe)for(n=0,r=t;n<r.length;n++)i=r[n],this.Qe.removeItem(this.on(i.clientId));u.label=2;case 2:return[2]}})})},e.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},e.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},e.prototype.Ye=function(t){var n=this;return this.Ce?K.resolve(!0):Dc(t).get(Yn.key).next(function(r){if(r!==null&&n.sn(r.leaseTimestampMs,5e3)&&!n.cn(r.ownerId)){if(n.tn(r)&&n.networkEnabled)return!0;if(!n.tn(r)){if(!r.allowTabSynchronization)throw new B(O.FAILED_PRECONDITION,yy);return!1}}return!(!n.networkEnabled||!n.inForeground)||Lh(t).Nt().next(function(i){return n.rn(i,5e3).find(function(s){if(n.clientId!==s.clientId){var u=!n.networkEnabled&&s.networkEnabled,c=!n.inForeground&&s.inForeground,l=n.networkEnabled===s.networkEnabled;if(u||c&&l)return!0}return!1})===void 0})}).next(function(r){return n.isPrimary!==r&&Q("IndexedDbPersistence","Client "+(r?"is":"is not")+" eligible for a primary lease."),r})},e.prototype.shutdown=function(){return C(this,void 0,void 0,function(){var t=this;return S(this,function(n){switch(n.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Yn.store,Mi.store],function(r){var i=new BA(r,tr.o);return t.Xe(i).next(function(){return t.en(i)})})];case 1:return n.sent(),this.Be.close(),this.ln(),[2]}})})},e.prototype.rn=function(t,n){var r=this;return t.filter(function(i){return r.sn(i.updateTimeMs,n)&&!r.cn(i.clientId)})},e.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(n){return Lh(n).Nt().next(function(r){return t.rn(r,18e5).map(function(i){return i.clientId})})})},Object.defineProperty(e.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),e.prototype.getMutationQueue=function(t){return nG.Qt(t,this.R,this.Ut,this.referenceDelegate)},e.prototype.getTargetCache=function(){return this.qe},e.prototype.getRemoteDocumentCache=function(){return this.Ue},e.prototype.getIndexManager=function(){return this.Ut},e.prototype.getBundleCache=function(){return this.Ke},e.prototype.runTransaction=function(t,n,r){var i=this;Q("IndexedDbPersistence","Starting transaction:",t);var s,u=n==="readonly"?"readonly":"readwrite";return this.Be.runTransaction(t,u,QW,function(c){return s=new BA(c,i.Ne?i.Ne.next():tr.o),n==="readwrite-primary"?i.Je(s).next(function(l){return!!l||i.Ye(s)}).next(function(l){if(!l)throw It("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new B(O.FAILED_PRECONDITION,PP);return r(s)}).next(function(l){return i.Ze(s).next(function(){return l})}):i.dn(s).next(function(){return r(s)})}).then(function(c){return s.raiseOnCommittedEvent(),c})},e.prototype.dn=function(t){var n=this;return Dc(t).get(Yn.key).next(function(r){if(r!==null&&n.sn(r.leaseTimestampMs,5e3)&&!n.cn(r.ownerId)&&!n.tn(r)&&!(n.Ce||n.allowTabSynchronization&&r.allowTabSynchronization))throw new B(O.FAILED_PRECONDITION,yy)})},e.prototype.Ze=function(t){var n=new Yn(this.clientId,this.allowTabSynchronization,Date.now());return Dc(t).put(Yn.key,n)},e.yt=function(){return du.yt()},e.prototype.Xe=function(t){var n=this,r=Dc(t);return r.get(Yn.key).next(function(i){return n.tn(i)?(Q("IndexedDbPersistence","Releasing primary lease."),r.delete(Yn.key)):K.resolve()})},e.prototype.sn=function(t,n){var r=Date.now();return!(t<r-n||t>r&&(It("Detected an update time that is in the future: "+t+" > "+r),1))},e.prototype.We=function(){var t=this;this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Fe=function(){t.Se.enqueueAndForget(function(){return t.inForeground=t.document.visibilityState==="visible",t.je()})},this.document.addEventListener("visibilitychange",this.Fe),this.inForeground=this.document.visibilityState==="visible")},e.prototype.an=function(){this.Fe&&(this.document.removeEventListener("visibilitychange",this.Fe),this.Fe=null)},e.prototype.Ge=function(){var t,n=this;typeof((t=this.window)===null||t===void 0?void 0:t.addEventListener)=="function"&&(this.ke=function(){n.un(),Q4()&&navigator.appVersion.match("Version/14")&&n.Se.enterRestrictedMode(!0),n.Se.enqueueAndForget(function(){return n.shutdown()})},this.window.addEventListener("pagehide",this.ke))},e.prototype.hn=function(){this.ke&&(this.window.removeEventListener("pagehide",this.ke),this.ke=null)},e.prototype.cn=function(t){var n;try{var r=((n=this.Qe)===null||n===void 0?void 0:n.getItem(this.on(t)))!==null;return Q("IndexedDbPersistence","Client '"+t+"' "+(r?"is":"is not")+" zombied in LocalStorage"),r}catch(i){return It("IndexedDbPersistence","Failed to get zombied client id.",i),!1}},e.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){It("Failed to set zombie client id.",t)}},e.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch{}},e.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},e}();function Dc(e){return Bn(e,Yn.store)}function Lh(e){return Bn(e,Mi.store)}function i0(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var hG=function(e,t){this.progress=e,this.wn=t},qP=function(){function e(t,n,r){this.Ue=t,this._n=n,this.Ut=r}return e.prototype.mn=function(t,n){var r=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,n).next(function(i){return r.yn(t,n,i)})},e.prototype.yn=function(t,n,r){return this.Ue.getEntry(t,n).next(function(i){for(var s=0,u=r;s<u.length;s++)u[s].applyToLocalView(i);return i})},e.prototype.gn=function(t,n){t.forEach(function(r,i){for(var s=0,u=n;s<u.length;s++)u[s].applyToLocalView(i)})},e.prototype.pn=function(t,n){var r=this;return this.Ue.getEntries(t,n).next(function(i){return r.En(t,i).next(function(){return i})})},e.prototype.En=function(t,n){var r=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,n).next(function(i){return r.gn(n,i)})},e.prototype.getDocumentsMatchingQuery=function(t,n,r){return function(i){return ae.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.Tn(t,n.path):zb(n)?this.In(t,n,r):this.An(t,n,r)},e.prototype.Tn=function(t,n){return this.mn(t,new ae(n)).next(function(r){var i=q_();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})},e.prototype.In=function(t,n,r){var i=this,s=n.collectionGroup,u=q_();return this.Ut.getCollectionParents(t,s).next(function(c){return K.forEach(c,function(l){var h=function(p,g){return new Wi(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,l.child(s));return i.An(t,h,r).next(function(p){p.forEach(function(g,m){u=u.insert(g,m)})})}).next(function(){return u})})},e.prototype.An=function(t,n,r){var i,s,u=this;return this.Ue.getDocumentsMatchingQuery(t,n,r).next(function(c){return i=c,u._n.getAllMutationBatchesAffectingQuery(t,n)}).next(function(c){return s=c,u.Rn(t,s,i).next(function(l){i=l;for(var h=0,p=s;h<p.length;h++)for(var g=p[h],m=0,_=g.mutations;m<_.length;m++){var b=_[m],E=b.key,I=i.get(E);I==null&&(I=tn.newInvalidDocument(E),i=i.insert(E,I)),B_(b,I,g.localWriteTime),I.isFoundDocument()||(i=i.remove(E))}})}).next(function(){return i.forEach(function(c,l){sf(n,l)||(i=i.remove(c))}),i})},e.prototype.Rn=function(t,n,r){for(var i=Ge(),s=0,u=n;s<u.length;s++)for(var c=0,l=u[s].mutations;c<l.length;c++){var h=l[c];h instanceof Fo&&r.get(h.key)===null&&(i=i.add(h.key))}var p=r;return this.Ue.getEntries(t,i).next(function(g){return g.forEach(function(m,_){_.isFoundDocument()&&(p=p.insert(m,_))}),p})},e}(),dG=function(){function e(t,n,r,i){this.targetId=t,this.fromCache=n,this.bn=r,this.vn=i}return e.Pn=function(t,n){for(var r=Ge(),i=Ge(),s=0,u=n.docChanges;s<u.length;s++){var c=u[s];switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:i=i.add(c.doc.key)}}return new e(t,n.fromCache,r,i)},e}(),KP=function(){function e(){}return e.prototype.Vn=function(t){this.Sn=t},e.prototype.getDocumentsMatchingQuery=function(t,n,r,i){var s=this;return function(u){return u.filters.length===0&&u.limit===null&&u.startAt==null&&u.endAt==null&&(u.explicitOrderBy.length===0||u.explicitOrderBy.length===1&&u.explicitOrderBy[0].field.isKeyField())}(n)||r.isEqual(ke.min())?this.Dn(t,n):this.Sn.pn(t,i).next(function(u){var c=s.Cn(n,u);return(zh(n)||xd(n))&&s.Nn(n.limitType,c,i,r)?s.Dn(t,n):(F_()<=Re.DEBUG&&Q("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),V_(n)),s.Sn.getDocumentsMatchingQuery(t,n,r).next(function(l){return c.forEach(function(h){l=l.insert(h.key,h)}),l}))})},e.prototype.Cn=function(t,n){var r=new Ot(uP(t));return n.forEach(function(i,s){sf(t,s)&&(r=r.add(s))}),r},e.prototype.Nn=function(t,n,r,i){if(r.size!==n.size)return!0;var s=t==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)},e.prototype.Dn=function(t,n){return F_()<=Re.DEBUG&&Q("QueryEngine","Using full collection scan to execute query:",V_(n)),this.Sn.getDocumentsMatchingQuery(t,n,ke.min())},e}(),pG=function(){function e(t,n,r,i){this.persistence=t,this.xn=n,this.R=i,this.kn=new vn(De),this.Fn=new Lu(function(s){return rf(s)},$p),this.$n=ke.min(),this._n=t.getMutationQueue(r),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new qP(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return e.prototype.collectGarbage=function(t){var n=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(r){return t.collect(r,n.kn)})},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HP(e,t,n,r){return new pG(e,t,n,r)}function WP(e,t){return C(this,void 0,void 0,function(){var n,r,i,s;return S(this,function(u){switch(u.label){case 0:return n=J(e),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(c){var l;return n._n.getAllMutationBatches(c).next(function(h){return l=h,r=n.persistence.getMutationQueue(t),i=new qP(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(c)}).next(function(h){for(var p=[],g=[],m=Ge(),_=0,b=l;_<b.length;_++){var E=b[_];p.push(E.batchId);for(var I=0,N=E.mutations;I<N.length;I++){var x=N[I];m=m.add(x.key)}}for(var P=0,z=h;P<z.length;P++){var W=z[P];g.push(W.batchId);for(var V=0,ne=W.mutations;V<ne.length;V++){var M=ne[V];m=m.add(M.key)}}return i.pn(c,m).next(function(de){return{Ln:de,removedBatchIds:p,addedBatchIds:g}})})})];case 1:return s=u.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),s)]}})})}function vG(e,t){var n=J(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(r){var i=t.batch.keys(),s=n.On.newChangeBuffer({trackRemovals:!0});return function(u,c,l,h){var p=l.batch,g=p.keys(),m=K.resolve();return g.forEach(function(_){m=m.next(function(){return h.getEntry(c,_)}).next(function(b){var E=l.docVersions.get(_);ve(E!==null),b.version.compareTo(E)<0&&(p.applyToRemoteDocument(b,l),b.isValidDocument()&&h.addEntry(b,l.commitVersion))})}),m.next(function(){return u._n.removeMutationBatch(c,p)})}(n,r,t,s).next(function(){return s.apply(r)}).next(function(){return n._n.performConsistencyCheck(r)}).next(function(){return n.Mn.pn(r,i)})})}function GP(e){var t=J(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",function(n){return t.qe.getLastRemoteSnapshotVersion(n)})}function gG(e,t){var n=J(e),r=t.snapshotVersion,i=n.kn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(s){var u=n.On.newChangeBuffer({trackRemovals:!0});i=n.kn;var c=[];t.targetChanges.forEach(function(p,g){var m=i.get(g);if(m){c.push(n.qe.removeMatchingKeys(s,p.removedDocuments,g).next(function(){return n.qe.addMatchingKeys(s,p.addedDocuments,g)}));var _=p.resumeToken;if(_.approximateByteSize()>0){var b=m.withResumeToken(_,r).withSequenceNumber(s.currentSequenceNumber);i=i.insert(g,b),function(E,I,N){return ve(I.resumeToken.approximateByteSize()>0),E.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=3e8||N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0}(m,b,p)&&c.push(n.qe.updateTargetData(s,b))}}});var l=_r();if(t.documentUpdates.forEach(function(p,g){t.resolvedLimboDocuments.has(p)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(s,p))}),c.push($P(s,u,t.documentUpdates,r,void 0).next(function(p){l=p})),!r.isEqual(ke.min())){var h=n.qe.getLastRemoteSnapshotVersion(s).next(function(p){return n.qe.setTargetsMetadata(s,s.currentSequenceNumber,r)});c.push(h)}return K.waitFor(c).next(function(){return u.apply(s)}).next(function(){return n.Mn.En(s,l)}).next(function(){return l})}).then(function(s){return n.kn=i,s})}function $P(e,t,n,r,i){var s=Ge();return n.forEach(function(u){return s=s.add(u)}),t.getEntries(e,s).next(function(u){var c=_r();return n.forEach(function(l,h){var p=u.get(l),g=(i==null?void 0:i.get(l))||r;h.isNoDocument()&&h.version.isEqual(ke.min())?(t.removeEntry(l,g),c=c.insert(l,h)):!p.isValidDocument()||h.version.compareTo(p.version)>0||h.version.compareTo(p.version)===0&&p.hasPendingWrites?(t.addEntry(h,g),c=c.insert(l,h)):Q("LocalStore","Ignoring outdated watch update for ",l,". Current version:",p.version," Watch version:",h.version)}),c})}function mG(e,t){var n=J(e);return n.persistence.runTransaction("Get next mutation batch","readonly",function(r){return t===void 0&&(t=-1),n._n.getNextMutationBatchAfterBatchId(r,t)})}function gu(e,t){var n=J(e);return n.persistence.runTransaction("Allocate target","readwrite",function(r){var i;return n.qe.getTargetData(r,t).next(function(s){return s?(i=s,K.resolve(i)):n.qe.allocateTargetId(r).next(function(u){return i=new Xp(t,u,0,r.currentSequenceNumber),n.qe.addTargetData(r,i).next(function(){return i})})})}).then(function(r){var i=n.kn.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.kn=n.kn.insert(r.targetId,r),n.Fn.set(t,r.targetId)),r})}function mu(e,t,n){return C(this,void 0,void 0,function(){var r,i,s,u;return S(this,function(c){switch(c.label){case 0:r=J(e),i=r.kn.get(t),s=n?"readwrite":"readwrite-primary",c.label=1;case 1:return c.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",s,function(l){return r.persistence.referenceDelegate.removeTarget(l,i)})];case 2:c.sent(),c.label=3;case 3:return[3,5];case 4:if(!ta(u=c.sent()))throw u;return Q("LocalStore","Failed to update sequence numbers for target "+t+": "+u),[3,5];case 5:return r.kn=r.kn.remove(t),r.Fn.delete(i.target),[2]}})})}function Ud(e,t,n){var r=J(e),i=ke.min(),s=Ge();return r.persistence.runTransaction("Execute query","readonly",function(u){return function(c,l,h){var p=J(c),g=p.Fn.get(h);return g!==void 0?K.resolve(p.kn.get(g)):p.qe.getTargetData(l,h)}(r,u,Er(t)).next(function(c){if(c)return i=c.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(u,c.targetId).next(function(l){s=l})}).next(function(){return r.xn.getDocumentsMatchingQuery(u,t,n?i:ke.min(),n?s:Ge())}).next(function(c){return{documents:c,Bn:s}})})}function zP(e,t){var n=J(e),r=J(n.qe),i=n.kn.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(s){return r.lt(s,t).next(function(u){return u?u.target:null})})}function QP(e){var t=J(e);return t.persistence.runTransaction("Get new document changes","readonly",function(n){return function(r,i,s){var u=J(r),c=_r(),l=t0(s),h=ho(i),p=IDBKeyRange.lowerBound(l,!0);return h.$t({index:dt.readTimeIndex,range:p},function(g,m){var _=H_(u.R,m);c=c.insert(_.key,_),l=m.readTime}).next(function(){return{wn:c,readTime:MP(l)}})}(t.On,n,t.$n)}).then(function(n){var r=n.wn,i=n.readTime;return t.$n=i,r})}function yG(e){return C(this,void 0,void 0,function(){var t;return S(this,function(n){return[2,(t=J(e)).persistence.runTransaction("Synchronize last document change read time","readonly",function(r){return function(i){var s=ho(i),u=ke.min();return s.$t({index:dt.readTimeIndex,reverse:!0},function(c,l,h){l.readTime&&(u=MP(l.readTime)),h.done()}).next(function(){return u})}(r)}).then(function(r){t.$n=r})]})})}function _G(e,t,n,r){return C(this,void 0,void 0,function(){var i,s,u,c,l,h,p,g,m,_;return S(this,function(b){switch(b.label){case 0:for(i=J(e),s=Ge(),u=_r(),c=_P(),l=0,h=n;l<h.length;l++)p=h[l],g=t.qn(p.metadata.name),p.document&&(s=s.add(g)),u=u.insert(g,t.Un(p)),c=c.insert(g,t.Kn(p.metadata.readTime));return m=i.On.newChangeBuffer({trackRemovals:!0}),[4,gu(i,function(E){return Er(xu(qe.fromString("__bundle__/docs/"+E)))}(r))];case 1:return _=b.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(E){return $P(E,m,u,ke.min(),c).next(function(I){return m.apply(E),I}).next(function(I){return i.qe.removeMatchingKeysForTargetId(E,_.targetId).next(function(){return i.qe.addMatchingKeys(E,s,_.targetId)}).next(function(){return i.Mn.En(E,I)}).next(function(){return I})})})]}})})}function wG(e,t,n){return n===void 0&&(n=Ge()),C(this,void 0,void 0,function(){var r,i;return S(this,function(s){switch(s.label){case 0:return[4,gu(e,Er(n0(t.bundledQuery)))];case 1:return r=s.sent(),[2,(i=J(e)).persistence.runTransaction("Save named query","readwrite",function(u){var c=qt(t.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.Ke.saveNamedQuery(u,t);var l=r.withResumeToken(kn.EMPTY_BYTE_STRING,c);return i.kn=i.kn.insert(l.targetId,l),i.qe.updateTargetData(u,l).next(function(){return i.qe.removeMatchingKeysForTargetId(u,r.targetId)}).next(function(){return i.qe.addMatchingKeys(u,n,r.targetId)}).next(function(){return i.Ke.saveNamedQuery(u,t)})})]}})})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bG=function(){function e(t){this.R=t,this.Qn=new Map,this.jn=new Map}return e.prototype.getBundleMetadata=function(t,n){return K.resolve(this.Qn.get(n))},e.prototype.saveBundleMetadata=function(t,n){var r;return this.Qn.set(n.id,{id:(r=n).id,version:r.version,createTime:qt(r.createTime)}),K.resolve()},e.prototype.getNamedQuery=function(t,n){return K.resolve(this.jn.get(n))},e.prototype.saveNamedQuery=function(t,n){return this.jn.set(n.name,function(r){return{name:r.name,query:n0(r.bundledQuery),readTime:qt(r.readTime)}}(n)),K.resolve()},e}(),o0=function(){function e(){this.Wn=new Ot(Mt.Gn),this.zn=new Ot(Mt.Hn)}return e.prototype.isEmpty=function(){return this.Wn.isEmpty()},e.prototype.addReference=function(t,n){var r=new Mt(t,n);this.Wn=this.Wn.add(r),this.zn=this.zn.add(r)},e.prototype.Jn=function(t,n){var r=this;t.forEach(function(i){return r.addReference(i,n)})},e.prototype.removeReference=function(t,n){this.Yn(new Mt(t,n))},e.prototype.Xn=function(t,n){var r=this;t.forEach(function(i){return r.removeReference(i,n)})},e.prototype.Zn=function(t){var n=this,r=new ae(new qe([])),i=new Mt(r,t),s=new Mt(r,t+1),u=[];return this.zn.forEachInRange([i,s],function(c){n.Yn(c),u.push(c.key)}),u},e.prototype.ts=function(){var t=this;this.Wn.forEach(function(n){return t.Yn(n)})},e.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},e.prototype.es=function(t){var n=new ae(new qe([])),r=new Mt(n,t),i=new Mt(n,t+1),s=Ge();return this.zn.forEachInRange([r,i],function(u){s=s.add(u.key)}),s},e.prototype.containsKey=function(t){var n=new Mt(t,0),r=this.Wn.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)},e}(),Mt=function(){function e(t,n){this.key=t,this.ns=n}return e.Gn=function(t,n){return ae.comparator(t.key,n.key)||De(t.ns,n.ns)},e.Hn=function(t,n){return De(t.ns,n.ns)||ae.comparator(t.key,n.key)},e}(),EG=function(){function e(t,n){this.Ut=t,this.referenceDelegate=n,this._n=[],this.ss=1,this.rs=new Ot(Mt.Gn)}return e.prototype.checkEmpty=function(t){return K.resolve(this._n.length===0)},e.prototype.addMutationBatch=function(t,n,r,i){var s=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var u=new e0(s,n,r,i);this._n.push(u);for(var c=0,l=i;c<l.length;c++){var h=l[c];this.rs=this.rs.add(new Mt(h.key,s)),this.Ut.addToCollectionParentIndex(t,h.key.path.popLast())}return K.resolve(u)},e.prototype.lookupMutationBatch=function(t,n){return K.resolve(this.os(n))},e.prototype.getNextMutationBatchAfterBatchId=function(t,n){var r=n+1,i=this.cs(r),s=i<0?0:i;return K.resolve(this._n.length>s?this._n[s]:null)},e.prototype.getHighestUnacknowledgedBatchId=function(){return K.resolve(this._n.length===0?-1:this.ss-1)},e.prototype.getAllMutationBatches=function(t){return K.resolve(this._n.slice())},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,n){var r=this,i=new Mt(n,0),s=new Mt(n,Number.POSITIVE_INFINITY),u=[];return this.rs.forEachInRange([i,s],function(c){var l=r.os(c.ns);u.push(l)}),K.resolve(u)},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,n){var r=this,i=new Ot(De);return n.forEach(function(s){var u=new Mt(s,0),c=new Mt(s,Number.POSITIVE_INFINITY);r.rs.forEachInRange([u,c],function(l){i=i.add(l.ns)})}),K.resolve(this.us(i))},e.prototype.getAllMutationBatchesAffectingQuery=function(t,n){var r=n.path,i=r.length+1,s=r;ae.isDocumentKey(s)||(s=s.child(""));var u=new Mt(new ae(s),0),c=new Ot(De);return this.rs.forEachWhile(function(l){var h=l.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(c=c.add(l.ns)),!0)},u),K.resolve(this.us(c))},e.prototype.us=function(t){var n=this,r=[];return t.forEach(function(i){var s=n.os(i);s!==null&&r.push(s)}),r},e.prototype.removeMutationBatch=function(t,n){var r=this;ve(this.hs(n.batchId,"removed")===0),this._n.shift();var i=this.rs;return K.forEach(n.mutations,function(s){var u=new Mt(s.key,n.batchId);return i=i.delete(u),r.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(function(){r.rs=i})},e.prototype.Gt=function(t){},e.prototype.containsKey=function(t,n){var r=new Mt(n,0),i=this.rs.firstAfterOrEqual(r);return K.resolve(n.isEqual(i&&i.key))},e.prototype.performConsistencyCheck=function(t){return this._n.length,K.resolve()},e.prototype.hs=function(t,n){return this.cs(t)},e.prototype.cs=function(t){return this._n.length===0?0:t-this._n[0].batchId},e.prototype.os=function(t){var n=this.cs(t);return n<0||n>=this._n.length?null:this._n[n]},e}(),TG=function(){function e(t,n){this.Ut=t,this.ls=n,this.docs=new vn(ae.comparator),this.size=0}return e.prototype.addEntry=function(t,n,r){var i=n.key,s=this.docs.get(i),u=s?s.size:0,c=this.ls(n);return this.docs=this.docs.insert(i,{document:n.clone(),size:c,readTime:r}),this.size+=c-u,this.Ut.addToCollectionParentIndex(t,i.path.popLast())},e.prototype.removeEntry=function(t){var n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)},e.prototype.getEntry=function(t,n){var r=this.docs.get(n);return K.resolve(r?r.document.clone():tn.newInvalidDocument(n))},e.prototype.getEntries=function(t,n){var r=this,i=_r();return n.forEach(function(s){var u=r.docs.get(s);i=i.insert(s,u?u.document.clone():tn.newInvalidDocument(s))}),K.resolve(i)},e.prototype.getDocumentsMatchingQuery=function(t,n,r){for(var i=_r(),s=new ae(n.path.child("")),u=this.docs.getIteratorFrom(s);u.hasNext();){var c=u.getNext(),l=c.key,h=c.value,p=h.document,g=h.readTime;if(!n.path.isPrefixOf(l.path))break;g.compareTo(r)<=0||sf(n,p)&&(i=i.insert(p.key,p.clone()))}return K.resolve(i)},e.prototype.fs=function(t,n){return K.forEach(this.docs,function(r){return n(r)})},e.prototype.newChangeBuffer=function(t){return new IG(this)},e.prototype.getSize=function(t){return K.resolve(this.size)},e}(),IG=function(e){function t(n){var r=this;return(r=e.call(this)||this).Ie=n,r}return Z(t,e),t.prototype.applyChanges=function(n){var r=this,i=[];return this.changes.forEach(function(s,u){u.document.isValidDocument()?i.push(r.Ie.addEntry(n,u.document,r.getReadTime(s))):r.Ie.removeEntry(s)}),K.waitFor(i)},t.prototype.getFromCache=function(n,r){return this.Ie.getEntry(n,r)},t.prototype.getAllFromCache=function(n,r){return this.Ie.getEntries(n,r)},t}(BP),SG=function(){function e(t){this.persistence=t,this.ds=new Lu(function(n){return rf(n)},$p),this.lastRemoteSnapshotVersion=ke.min(),this.highestTargetId=0,this.ws=0,this._s=new o0,this.targetCount=0,this.ys=Fd.Jt()}return e.prototype.forEachTarget=function(t,n){return this.ds.forEach(function(r,i){return n(i)}),K.resolve()},e.prototype.getLastRemoteSnapshotVersion=function(t){return K.resolve(this.lastRemoteSnapshotVersion)},e.prototype.getHighestSequenceNumber=function(t){return K.resolve(this.ws)},e.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),K.resolve(this.highestTargetId)},e.prototype.setTargetsMetadata=function(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ws&&(this.ws=n),K.resolve()},e.prototype.te=function(t){this.ds.set(t.target,t);var n=t.targetId;n>this.highestTargetId&&(this.ys=new Fd(n),this.highestTargetId=n),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},e.prototype.addTargetData=function(t,n){return this.te(n),this.targetCount+=1,K.resolve()},e.prototype.updateTargetData=function(t,n){return this.te(n),K.resolve()},e.prototype.removeTargetData=function(t,n){return this.ds.delete(n.target),this._s.Zn(n.targetId),this.targetCount-=1,K.resolve()},e.prototype.removeTargets=function(t,n,r){var i=this,s=0,u=[];return this.ds.forEach(function(c,l){l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i.ds.delete(c),u.push(i.removeMatchingKeysForTargetId(t,l.targetId)),s++)}),K.waitFor(u).next(function(){return s})},e.prototype.getTargetCount=function(t){return K.resolve(this.targetCount)},e.prototype.getTargetData=function(t,n){var r=this.ds.get(n)||null;return K.resolve(r)},e.prototype.addMatchingKeys=function(t,n,r){return this._s.Jn(n,r),K.resolve()},e.prototype.removeMatchingKeys=function(t,n,r){this._s.Xn(n,r);var i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(function(u){s.push(i.markPotentiallyOrphaned(t,u))}),K.waitFor(s)},e.prototype.removeMatchingKeysForTargetId=function(t,n){return this._s.Zn(n),K.resolve()},e.prototype.getMatchingKeysForTargetId=function(t,n){var r=this._s.es(n);return K.resolve(r)},e.prototype.containsKey=function(t,n){return K.resolve(this._s.containsKey(n))},e}(),CG=function(){function e(t,n){var r=this;this.gs={},this.Ne=new tr(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new SG(this),this.Ut=new eG,this.Ue=function(i,s){return new TG(i,function(u){return r.referenceDelegate.ps(u)})}(this.Ut),this.R=new LP(n),this.Ke=new bG(this.R)}return e.prototype.start=function(){return Promise.resolve()},e.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(e.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),e.prototype.setDatabaseDeletedListener=function(){},e.prototype.setNetworkEnabled=function(){},e.prototype.getIndexManager=function(){return this.Ut},e.prototype.getMutationQueue=function(t){var n=this.gs[t.toKey()];return n||(n=new EG(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=n),n},e.prototype.getTargetCache=function(){return this.qe},e.prototype.getRemoteDocumentCache=function(){return this.Ue},e.prototype.getBundleCache=function(){return this.Ke},e.prototype.runTransaction=function(t,n,r){var i=this;Q("MemoryPersistence","Starting transaction:",t);var s=new AG(this.Ne.next());return this.referenceDelegate.Es(),r(s).next(function(u){return i.referenceDelegate.Ts(s).next(function(){return u})}).toPromise().then(function(u){return s.raiseOnCommittedEvent(),u})},e.prototype.Is=function(t,n){return K.or(Object.values(this.gs).map(function(r){return function(){return r.containsKey(t,n)}}))},e}(),AG=function(e){function t(n){var r=this;return(r=e.call(this)||this).currentSequenceNumber=n,r}return Z(t,e),t}(DP),kG=function(){function e(t){this.persistence=t,this.As=new o0,this.Rs=null}return e.bs=function(t){return new e(t)},Object.defineProperty(e.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw se()},enumerable:!1,configurable:!0}),e.prototype.addReference=function(t,n,r){return this.As.addReference(r,n),this.vs.delete(r.toString()),K.resolve()},e.prototype.removeReference=function(t,n,r){return this.As.removeReference(r,n),this.vs.add(r.toString()),K.resolve()},e.prototype.markPotentiallyOrphaned=function(t,n){return this.vs.add(n.toString()),K.resolve()},e.prototype.removeTarget=function(t,n){var r=this;this.As.Zn(n.targetId).forEach(function(s){return r.vs.add(s.toString())});var i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next(function(s){s.forEach(function(u){return r.vs.add(u.toString())})}).next(function(){return i.removeTargetData(t,n)})},e.prototype.Es=function(){this.Rs=new Set},e.prototype.Ts=function(t){var n=this,r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.vs,function(i){var s=ae.fromPath(i);return n.Ps(t,s).next(function(u){u||r.removeEntry(s)})}).next(function(){return n.Rs=null,r.apply(t)})},e.prototype.updateLimboDocument=function(t,n){var r=this;return this.Ps(t,n).next(function(i){i?r.vs.delete(n.toString()):r.vs.add(n.toString())})},e.prototype.ps=function(t){return 0},e.prototype.Ps=function(t,n){var r=this;return K.or([function(){return K.resolve(r.As.containsKey(n))},function(){return r.persistence.getTargetCache().containsKey(t,n)},function(){return r.persistence.Is(t,n)}])},e}(),zt=function(){function e(t){this.uid=t}return e.prototype.isAuthenticated=function(){return this.uid!=null},e.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},e.prototype.isEqual=function(t){return t.uid===this.uid},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XA(e,t){return"firestore_clients_"+e+"_"+t}function JA(e,t,n){var r="firestore_mutations_"+e+"_"+n;return t.isAuthenticated()&&(r+="_"+t.uid),r}function _y(e,t){return"firestore_targets_"+e+"_"+t}zt.UNAUTHENTICATED=new zt(null),zt.GOOGLE_CREDENTIALS=new zt("google-credentials-uid"),zt.FIRST_PARTY=new zt("first-party-uid"),zt.MOCK_USER=new zt("mock-user");var ZA=function(){function e(t,n,r,i){this.user=t,this.batchId=n,this.state=r,this.error=i}return e.Vs=function(t,n,r){var i,s=JSON.parse(r),u=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return u&&s.error&&(u=typeof s.error.message=="string"&&typeof s.error.code=="string")&&(i=new B(s.error.code,s.error.message)),u?new e(t,n,s.state,i):(It("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},e.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},e}(),wy=function(){function e(t,n,r){this.targetId=t,this.state=n,this.error=r}return e.Vs=function(t,n){var r,i=JSON.parse(n),s=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string")&&(r=new B(i.error.code,i.error.message)),s?new e(t,i.state,r):(It("SharedClientState","Failed to parse target state for ID '"+t+"': "+n),null)},e.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},e}(),ek=function(){function e(t,n){this.clientId=t,this.activeTargetIds=n}return e.Vs=function(t,n){for(var r=JSON.parse(n),i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=Yp(),u=0;i&&u<r.activeTargetIds.length;++u)i=nP(r.activeTargetIds[u]),s=s.add(r.activeTargetIds[u]);return i?new e(t,s):(It("SharedClientState","Failed to parse client data for instance '"+t+"': "+n),null)},e}(),NG=function(){function e(t,n){this.clientId=t,this.onlineState=n}return e.Vs=function(t){var n=JSON.parse(t);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new e(n.clientId,n.onlineState):(It("SharedClientState","Failed to parse online state: "+t),null)},e}(),W_=function(){function e(){this.activeTargetIds=Yp()}return e.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},e.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},e.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},e}(),by=function(){function e(t,n,r,i,s){this.window=t,this.Se=n,this.persistenceKey=r,this.Ns=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.ks.bind(this),this.Fs=new vn(De),this.started=!1,this.$s=[];var u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Os=XA(this.persistenceKey,this.Ns),this.Ms=function(c){return"firestore_sequence_number_"+c}(this.persistenceKey),this.Fs=this.Fs.insert(this.Ns,new W_),this.Ls=new RegExp("^firestore_clients_"+u+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+u+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+u+"_(\\d+)$"),this.Us=function(c){return"firestore_online_state_"+c}(this.persistenceKey),this.Ks=function(c){return"firestore_bundle_loaded_"+c}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return e.yt=function(t){return!(!t||!t.localStorage)},e.prototype.start=function(){return C(this,void 0,void 0,function(){var t,n,r,i,s,u,c,l,h,p,g,m=this;return S(this,function(_){switch(_.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=_.sent(),n=0,r=t;n<r.length;n++)(i=r[n])!==this.Ns&&(s=this.getItem(XA(this.persistenceKey,i)))&&(u=ek.Vs(i,s))&&(this.Fs=this.Fs.insert(u.clientId,u));for(this.Qs(),(c=this.storage.getItem(this.Us))&&(l=this.js(c))&&this.Ws(l),h=0,p=this.$s;h<p.length;h++)g=p[h],this.ks(g);return this.$s=[],this.window.addEventListener("pagehide",function(){return m.shutdown()}),this.started=!0,[2]}})})},e.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},e.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.Fs)},e.prototype.isActiveQueryTarget=function(t){var n=!1;return this.Fs.forEach(function(r,i){i.activeTargetIds.has(t)&&(n=!0)}),n},e.prototype.addPendingMutation=function(t){this.zs(t,"pending")},e.prototype.updateMutationState=function(t,n,r){this.zs(t,n,r),this.Hs(t)},e.prototype.addLocalQueryTarget=function(t){var n="not-current";if(this.isActiveQueryTarget(t)){var r=this.storage.getItem(_y(this.persistenceKey,t));if(r){var i=wy.Vs(t,r);i&&(n=i.state)}}return this.Js.Ds(t),this.Qs(),n},e.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},e.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},e.prototype.clearQueryState=function(t){this.removeItem(_y(this.persistenceKey,t))},e.prototype.updateQueryState=function(t,n,r){this.Ys(t,n,r)},e.prototype.handleUserChange=function(t,n,r){var i=this;n.forEach(function(s){i.Hs(s)}),this.currentUser=t,r.forEach(function(s){i.addPendingMutation(s)})},e.prototype.setOnlineState=function(t){this.Xs(t)},e.prototype.notifyBundleLoaded=function(){this.Zs()},e.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},e.prototype.getItem=function(t){var n=this.storage.getItem(t);return Q("SharedClientState","READ",t,n),n},e.prototype.setItem=function(t,n){Q("SharedClientState","SET",t,n),this.storage.setItem(t,n)},e.prototype.removeItem=function(t){Q("SharedClientState","REMOVE",t),this.storage.removeItem(t)},e.prototype.ks=function(t){var n=this,r=t;if(r.storageArea===this.storage){if(Q("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Os)return void It("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return C(n,void 0,void 0,function(){var i,s,u,c,l,h;return S(this,function(p){if(this.started){if(r.key!==null){if(this.Ls.test(r.key)){if(r.newValue==null)return i=this.ti(r.key),[2,this.ei(i,null)];if(s=this.ni(r.key,r.newValue))return[2,this.ei(s.clientId,s)]}else if(this.Bs.test(r.key)){if(r.newValue!==null&&(u=this.si(r.key,r.newValue)))return[2,this.ii(u)]}else if(this.qs.test(r.key)){if(r.newValue!==null&&(c=this.ri(r.key,r.newValue)))return[2,this.oi(c)]}else if(r.key===this.Us){if(r.newValue!==null&&(l=this.js(r.newValue)))return[2,this.Ws(l)]}else if(r.key===this.Ms)(h=function(g){var m=tr.o;if(g!=null)try{var _=JSON.parse(g);ve(typeof _=="number"),m=_}catch(b){It("SharedClientState","Failed to read sequence number from WebStorage",b)}return m}(r.newValue))!==tr.o&&this.sequenceNumberHandler(h);else if(r.key===this.Ks)return[2,this.syncEngine.ci()]}}else this.$s.push(r);return[2]})})})}},Object.defineProperty(e.prototype,"Js",{get:function(){return this.Fs.get(this.Ns)},enumerable:!1,configurable:!0}),e.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},e.prototype.zs=function(t,n,r){var i=new ZA(this.currentUser,t,n,r),s=JA(this.persistenceKey,this.currentUser,t);this.setItem(s,i.Ss())},e.prototype.Hs=function(t){var n=JA(this.persistenceKey,this.currentUser,t);this.removeItem(n)},e.prototype.Xs=function(t){var n={clientId:this.Ns,onlineState:t};this.storage.setItem(this.Us,JSON.stringify(n))},e.prototype.Ys=function(t,n,r){var i=_y(this.persistenceKey,t),s=new wy(t,n,r);this.setItem(i,s.Ss())},e.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},e.prototype.ti=function(t){var n=this.Ls.exec(t);return n?n[1]:null},e.prototype.ni=function(t,n){var r=this.ti(t);return ek.Vs(r,n)},e.prototype.si=function(t,n){var r=this.Bs.exec(t),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return ZA.Vs(new zt(s),i,n)},e.prototype.ri=function(t,n){var r=this.qs.exec(t),i=Number(r[1]);return wy.Vs(i,n)},e.prototype.js=function(t){return NG.Vs(t)},e.prototype.ii=function(t){return C(this,void 0,void 0,function(){return S(this,function(n){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(Q("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},e.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},e.prototype.ei=function(t,n){var r=this,i=n?this.Fs.insert(t,n):this.Fs.remove(t),s=this.Gs(this.Fs),u=this.Gs(i),c=[],l=[];return u.forEach(function(h){s.has(h)||c.push(h)}),s.forEach(function(h){u.has(h)||l.push(h)}),this.syncEngine.hi(c,l).then(function(){r.Fs=i})},e.prototype.Ws=function(t){this.Fs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},e.prototype.Gs=function(t){var n=Yp();return t.forEach(function(r,i){n=n.unionWith(i.activeTargetIds)}),n},e}(),YP=function(){function e(){this.li=new W_,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return e.prototype.addPendingMutation=function(t){},e.prototype.updateMutationState=function(t,n,r){},e.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},e.prototype.updateQueryState=function(t,n,r){this.fi[t]=n},e.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},e.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},e.prototype.clearQueryState=function(t){delete this.fi[t]},e.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},e.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},e.prototype.start=function(){return this.li=new W_,Promise.resolve()},e.prototype.handleUserChange=function(t,n,r){},e.prototype.setOnlineState=function(t){},e.prototype.shutdown=function(){},e.prototype.writeSequenceNumber=function(t){},e.prototype.notifyBundleLoaded=function(){},e}(),RG=function(){function e(){}return e.prototype.di=function(t){},e.prototype.shutdown=function(){},e}(),tk=function(){function e(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return e.prototype.di=function(t){this.gi.push(t)},e.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},e.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},e.prototype._i=function(){Q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,n=this.gi;t<n.length;t++)(0,n[t])(0)},e.prototype.yi=function(){Q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,n=this.gi;t<n.length;t++)(0,n[t])(1)},e.yt=function(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0},e}(),OG={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},PG=function(){function e(t){this.Ei=t.Ei,this.Ti=t.Ti}return e.prototype.Ii=function(t){this.Ai=t},e.prototype.Ri=function(t){this.bi=t},e.prototype.onMessage=function(t){this.vi=t},e.prototype.close=function(){this.Ti()},e.prototype.send=function(t){this.Ei(t)},e.prototype.Pi=function(){this.Ai()},e.prototype.Vi=function(t){this.bi(t)},e.prototype.Si=function(t){this.vi(t)},e}(),DG=function(e){function t(n){var r=this;return(r=e.call(this,n)||this).forceLongPolling=n.forceLongPolling,r.autoDetectLongPolling=n.autoDetectLongPolling,r.useFetchStreams=n.useFetchStreams,r}return Z(t,e),t.prototype.Fi=function(n,r,i,s){return new Promise(function(u,c){var l=new lW;l.listenOnce(aW.COMPLETE,function(){try{switch(l.getLastErrorCode()){case my.NO_ERROR:var p=l.getResponseJson();Q("Connection","XHR received:",JSON.stringify(p)),u(p);break;case my.TIMEOUT:Q("Connection",'RPC "'+n+'" timed out'),c(new B(O.DEADLINE_EXCEEDED,"Request time out"));break;case my.HTTP_ERROR:var g=l.getStatus();if(Q("Connection",'RPC "'+n+'" failed with status:',g,"response text:",l.getResponseText()),g>0){var m=l.getResponseJson().error;if(m&&m.status&&m.message){var _=function(b){var E=b.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(E)>=0?E:O.UNKNOWN}(m.status);c(new B(_,m.message))}else c(new B(O.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new B(O.UNAVAILABLE,"Connection failed."));break;default:se()}}finally{Q("Connection",'RPC "'+n+'" completed.')}});var h=JSON.stringify(s);l.send(r,"POST",h,i,15)})},t.prototype.Oi=function(n,r){var i=[this.Di,"/","google.firestore.v1.Firestore","/",n,"/channel"],s=oW(),u=sW(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(c.xmlHttpFactory=new cW({})),this.ki(c.initMessageHeaders,r),Ow()||vR()||G4()||$4()||z4()||Pw()||(c.httpHeadersOverwriteParam="$httpHeaders");var l=i.join("");Q("Connection","Creating WebChannel: "+l,c);var h=s.createWebChannel(l,c),p=!1,g=!1,m=new PG({Ei:function(b){g?Q("Connection","Not sending because WebChannel is closed:",b):(p||(Q("Connection","Opening WebChannel transport."),h.open(),p=!0),Q("Connection","WebChannel sending:",b),h.send(b))},Ti:function(){return h.close()}}),_=function(b,E,I){b.listen(E,function(N){try{I(N)}catch(x){setTimeout(function(){throw x},0)}})};return _(h,Oh.EventType.OPEN,function(){g||Q("Connection","WebChannel transport opened.")}),_(h,Oh.EventType.CLOSE,function(){g||(g=!0,Q("Connection","WebChannel transport closed"),m.Vi())}),_(h,Oh.EventType.ERROR,function(b){g||(g=!0,El("Connection","WebChannel transport errored:",b),m.Vi(new B(O.UNAVAILABLE,"The operation could not be completed")))}),_(h,Oh.EventType.MESSAGE,function(b){var E;if(!g){var I=b.data[0];ve(!!I);var N=I,x=N.error||((E=N[0])===null||E===void 0?void 0:E.error);if(x){Q("Connection","WebChannel received error:",x);var P=x.status,z=function(V){var ne=Et[V];if(ne!==void 0)return yP(ne)}(P),W=x.message;z===void 0&&(z=O.INTERNAL,W="Unknown error status: "+P+" with message "+x.message),g=!0,m.Vi(new B(z,W)),h.close()}else Q("Connection","WebChannel received:",I),m.Si(I)}}),_(u,uW.STAT_EVENT,function(b){b.stat===yA.PROXY?Q("Connection","Detected buffering proxy"):b.stat===yA.NOPROXY&&Q("Connection","Detected no buffering proxy")}),setTimeout(function(){m.Pi()},0),m},t}(function(){function e(t){this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.Di=n+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return e.prototype.Ni=function(t,n,r,i){var s=this.xi(t,n);Q("RestConnection","Sending: ",s,r);var u={};return this.ki(u,i),this.Fi(t,s,u,r).then(function(c){return Q("RestConnection","Received: ",c),c},function(c){throw El("RestConnection",t+" failed with error: ",c,"url: ",s,"request:",r),c})},e.prototype.$i=function(t,n,r,i){return this.Ni(t,n,r,i)},e.prototype.ki=function(t,n){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.10.1",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n)for(var r in n.authHeaders)n.authHeaders.hasOwnProperty(r)&&(t[r]=n.authHeaders[r])},e.prototype.xi=function(t,n){var r=OG[t];return this.Di+"/v1/"+n+":"+r},e}());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XP(){return typeof window<"u"?window:null}function Xh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lf(e){return new UW(e,!0)}var s0=function(){function e(t,n,r,i,s){r===void 0&&(r=1e3),i===void 0&&(i=1.5),s===void 0&&(s=6e4),this.Se=t,this.timerId=n,this.Mi=r,this.Li=i,this.Bi=s,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return e.prototype.reset=function(){this.qi=0},e.prototype.Qi=function(){this.qi=this.Bi},e.prototype.ji=function(t){var n=this;this.cancel();var r=Math.floor(this.qi+this.Wi()),i=Math.max(0,Date.now()-this.Ki),s=Math.max(0,r-i);s>0&&Q("ExponentialBackoff","Backing off for "+s+" ms (base delay: "+this.qi+" ms, delay with jitter: "+r+" ms, last attempt: "+i+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,s,function(){return n.Ki=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},e.prototype.Gi=function(){this.Ui!==null&&(this.Ui.skipDelay(),this.Ui=null)},e.prototype.cancel=function(){this.Ui!==null&&(this.Ui.cancel(),this.Ui=null)},e.prototype.Wi=function(){return(Math.random()-.5)*this.qi},e}(),JP=function(){function e(t,n,r,i,s,u){this.Se=t,this.zi=r,this.Hi=i,this.Ji=s,this.listener=u,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new s0(t,n)}return e.prototype.tr=function(){return this.state===1||this.state===2||this.state===4},e.prototype.er=function(){return this.state===2},e.prototype.start=function(){this.state!==3?this.auth():this.nr()},e.prototype.stop=function(){return C(this,void 0,void 0,function(){return S(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},e.prototype.sr=function(){this.state=0,this.Zi.reset()},e.prototype.ir=function(){var t=this;this.er()&&this.Xi===null&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},e.prototype.cr=function(t){this.ur(),this.stream.send(t)},e.prototype.rr=function(){return C(this,void 0,void 0,function(){return S(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},e.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},e.prototype.close=function(t,n){return C(this,void 0,void 0,function(){return S(this,function(r){switch(r.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,t!==3?this.Zi.reset():n&&n.code===O.RESOURCE_EXHAUSTED?(It(n.toString()),It("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):n&&n.code===O.UNAUTHENTICATED&&this.Ji.invalidateToken(),this.stream!==null&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(n)];case 1:return r.sent(),[2]}})})},e.prototype.ar=function(){},e.prototype.auth=function(){var t=this;this.state=1;var n=this.hr(this.Yi),r=this.Yi;this.Ji.getToken().then(function(i){t.Yi===r&&t.lr(i)},function(i){n(function(){var s=new B(O.UNKNOWN,"Fetching auth token failed: "+i.message);return t.dr(s)})})},e.prototype.lr=function(t){var n=this,r=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){r(function(){return n.state=2,n.listener.Ii()})}),this.stream.Ri(function(i){r(function(){return n.dr(i)})}),this.stream.onMessage(function(i){r(function(){return n.onMessage(i)})})},e.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return C(t,void 0,void 0,function(){return S(this,function(n){return this.state=0,this.start(),[2]})})})},e.prototype.dr=function(t){return Q("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},e.prototype.hr=function(t){var n=this;return function(r){n.Se.enqueueAndForget(function(){return n.Yi===t?r():(Q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},e}(),xG=function(e){function t(n,r,i,s,u){var c=this;return(c=e.call(this,n,"listen_stream_connection_backoff","listen_stream_idle",r,i,u)||this).R=s,c}return Z(t,e),t.prototype.wr=function(n){return this.Hi.Oi("Listen",n)},t.prototype.onMessage=function(n){this.Zi.reset();var r=function(s,u){var c;if("targetChange"in u){u.targetChange;var l=function(I){return I==="NO_CHANGE"?0:I==="ADD"?1:I==="REMOVE"?2:I==="CURRENT"?3:I==="RESET"?4:se()}(u.targetChange.targetChangeType||"NO_CHANGE"),h=u.targetChange.targetIds||[],p=function(I,N){return I.I?(ve(N===void 0||typeof N=="string"),kn.fromBase64String(N||"")):(ve(N===void 0||N instanceof Uint8Array),kn.fromUint8Array(N||new Uint8Array))}(s,u.targetChange.resumeToken),g=(m=u.targetChange.cause)&&function(I){var N=I.code===void 0?O.UNKNOWN:yP(I.code);return new B(N,I.message||"")}(m);c=new bP(l,h,p,g||null)}else if("documentChange"in u){u.documentChange,(l=u.documentChange).document,l.document.name,l.document.updateTime,h=ui(s,l.document.name),p=qt(l.document.updateTime);var m=new Jn({mapValue:{fields:l.document.fields}}),_=(g=tn.newFoundDocument(h,p,m),l.targetIds||[]),b=l.removedTargetIds||[];c=new Yh(_,b,g.key,g)}else if("documentDelete"in u)u.documentDelete,(l=u.documentDelete).document,h=ui(s,l.document),p=l.readTime?qt(l.readTime):ke.min(),m=tn.newNoDocument(h,p),g=l.removedTargetIds||[],c=new Yh([],g,m.key,m);else if("documentRemove"in u)u.documentRemove,(l=u.documentRemove).document,h=ui(s,l.document),p=l.removedTargetIds||[],c=new Yh([],p,h,null);else{if(!("filter"in u))return se();u.filter;var E=u.filter;E.targetId,l=E.count||0,h=new NW(l),p=E.targetId,c=new wP(p,h)}return c}(this.R,n),i=function(s){if(!("targetChange"in s))return ke.min();var u=s.targetChange;return u.targetIds&&u.targetIds.length?ke.min():u.readTime?qt(u.readTime):ke.min()}(n);return this.listener._r(r,i)},t.prototype.mr=function(n){var r={};r.database=kl(this.R),r.addTarget=function(s,u){var c,l=u.target;return(c=Pd(l)?{documents:AP(s,l)}:{query:kP(s,l)}).targetId=u.targetId,u.resumeToken.approximateByteSize()>0?c.resumeToken=EP(s,u.resumeToken):u.snapshotVersion.compareTo(ke.min())>0&&(c.readTime=Cl(s,u.snapshotVersion.toTimestamp())),c}(this.R,n);var i=function(s,u){var c=function(l,h){switch(h){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return se()}}(0,u.purpose);return c==null?null:{"goog-listen-tags":c}}(this.R,n);i&&(r.labels=i),this.cr(r)},t.prototype.yr=function(n){var r={};r.database=kl(this.R),r.removeTarget=n,this.cr(r)},t}(JP),LG=function(e){function t(n,r,i,s,u){var c=this;return(c=e.call(this,n,"write_stream_connection_backoff","write_stream_idle",r,i,u)||this).R=s,c.gr=!1,c}return Z(t,e),Object.defineProperty(t.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,e.prototype.start.call(this)},t.prototype.ar=function(){this.gr&&this.Er([])},t.prototype.wr=function(n){return this.Hi.Oi("Write",n)},t.prototype.onMessage=function(n){if(ve(!!n.streamToken),this.lastStreamToken=n.streamToken,this.gr){this.Zi.reset();var r=function(s,u){return s&&s.length>0?(ve(u!==void 0),s.map(function(c){return function(l,h){var p=l.updateTime?qt(l.updateTime):qt(h);return p.isEqual(ke.min())&&(p=qt(h)),new CW(p,l.transformResults||[])}(c,u)})):[]}(n.writeResults,n.commitTime),i=qt(n.commitTime);return this.listener.Tr(i,r)}return ve(!n.writeResults||n.writeResults.length===0),this.gr=!0,this.listener.Ir()},t.prototype.Ar=function(){var n={};n.database=kl(this.R),this.cr(n)},t.prototype.Er=function(n){var r=this,i={streamToken:this.lastStreamToken,writes:n.map(function(s){return Ld(r.R,s)})};this.cr(i)},t}(JP),MG=function(e){function t(n,r,i){var s=this;return(s=e.call(this)||this).credentials=n,s.Hi=r,s.R=i,s.Rr=!1,s}return Z(t,e),t.prototype.br=function(){if(this.Rr)throw new B(O.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.Ni=function(n,r,i){var s=this;return this.br(),this.credentials.getToken().then(function(u){return s.Hi.Ni(n,r,i,u)}).catch(function(u){throw u.name==="FirebaseError"?(u.code===O.UNAUTHENTICATED&&s.credentials.invalidateToken(),u):new B(O.UNKNOWN,u.toString())})},t.prototype.$i=function(n,r,i){var s=this;return this.br(),this.credentials.getToken().then(function(u){return s.Hi.$i(n,r,i,u)}).catch(function(u){throw u.name==="FirebaseError"?(u.code===O.UNAUTHENTICATED&&s.credentials.invalidateToken(),u):new B(O.UNKNOWN,u.toString())})},t.prototype.terminate=function(){this.Rr=!0},t}(function(){}),FG=function(){function e(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return e.prototype.Sr=function(){var t=this;this.vr===0&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},e.prototype.Nr=function(t){this.state==="Online"?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.kr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},e.prototype.set=function(t){this.kr(),this.vr=0,t==="Online"&&(this.Vr=!1),this.Dr(t)},e.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},e.prototype.Cr=function(t){var n="Could not reach Cloud Firestore backend. "+t+`
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Vr?(It(n),this.Vr=!1):Q("OnlineStateTracker",n)},e.prototype.kr=function(){this.Pr!==null&&(this.Pr.cancel(),this.Pr=null)},e}(),UG=function(e,t,n,r,i){var s=this;this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Fr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(u){n.enqueueAndForget(function(){return C(s,void 0,void 0,function(){return S(this,function(c){switch(c.label){case 0:return Uo(this)?(Q("RemoteStore","Restarting streams for network reachability change."),[4,function(l){return C(this,void 0,void 0,function(){var h;return S(this,function(p){switch(p.label){case 0:return(h=J(l)).Or.add(4),[4,Mu(h)];case 1:return p.sent(),h.Br.set("Unknown"),h.Or.delete(4),[4,ff(h)];case 2:return p.sent(),[2]}})})}(this)]):[3,2];case 1:c.sent(),c.label=2;case 2:return[2]}})})})}),this.Br=new FG(n,r)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ff(e){return C(this,void 0,void 0,function(){var t,n;return S(this,function(r){switch(r.label){case 0:if(!Uo(e))return[3,4];t=0,n=e.Mr,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}})})}function Mu(e){return C(this,void 0,void 0,function(){var t,n;return S(this,function(r){switch(r.label){case 0:t=0,n=e.Mr,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}})})}function Jp(e,t){var n=J(e);n.$r.has(t.targetId)||(n.$r.set(t.targetId,t),c0(n)?u0(n):Uu(n).er()&&a0(n,t))}function Nl(e,t){var n=J(e),r=Uu(n);n.$r.delete(t),r.er()&&ZP(n,t),n.$r.size===0&&(r.er()?r.ir():Uo(n)&&n.Br.set("Unknown"))}function a0(e,t){e.qr.U(t.targetId),Uu(e).mr(t)}function ZP(e,t){e.qr.U(t),Uu(e).yr(t)}function u0(e){e.qr=new LW({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},lt:function(t){return e.$r.get(t)||null}}),Uu(e).start(),e.Br.Sr()}function c0(e){return Uo(e)&&!Uu(e).tr()&&e.$r.size>0}function Uo(e){return J(e).Or.size===0}function eD(e){e.qr=void 0}function jG(e){return C(this,void 0,void 0,function(){return S(this,function(t){return e.$r.forEach(function(n,r){a0(e,n)}),[2]})})}function VG(e,t){return C(this,void 0,void 0,function(){return S(this,function(n){return eD(e),c0(e)?(e.Br.Nr(t),u0(e)):e.Br.set("Unknown"),[2]})})}function BG(e,t,n){return C(this,void 0,void 0,function(){var r,i,s;return S(this,function(u){switch(u.label){case 0:if(e.Br.set("Online"),!(t instanceof bP&&t.state===2&&t.cause))return[3,6];u.label=1;case 1:return u.trys.push([1,3,,5]),[4,function(c,l){return C(this,void 0,void 0,function(){var h,p,g,m;return S(this,function(_){switch(_.label){case 0:h=l.cause,p=0,g=l.targetIds,_.label=1;case 1:return p<g.length?(m=g[p],c.$r.has(m)?[4,c.remoteSyncer.rejectListen(m,h)]:[3,3]):[3,5];case 2:_.sent(),c.$r.delete(m),c.qr.removeTarget(m),_.label=3;case 3:_.label=4;case 4:return p++,[3,1];case 5:return[2]}})})}(e,t)];case 2:return u.sent(),[3,5];case 3:return r=u.sent(),Q("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),[4,jd(e,r)];case 4:return u.sent(),[3,5];case 5:return[3,13];case 6:if(t instanceof Yh?e.qr.X(t):t instanceof wP?e.qr.rt(t):e.qr.et(t),n.isEqual(ke.min()))return[3,13];u.label=7;case 7:return u.trys.push([7,11,,13]),[4,GP(e.localStore)];case 8:return i=u.sent(),n.compareTo(i)>=0?[4,function(c,l){var h=c.qr.ut(l);return h.targetChanges.forEach(function(p,g){if(p.resumeToken.approximateByteSize()>0){var m=c.$r.get(g);m&&c.$r.set(g,m.withResumeToken(p.resumeToken,l))}}),h.targetMismatches.forEach(function(p){var g=c.$r.get(p);if(g){c.$r.set(p,g.withResumeToken(kn.EMPTY_BYTE_STRING,g.snapshotVersion)),ZP(c,p);var m=new Xp(g.target,p,1,g.sequenceNumber);a0(c,m)}}),c.remoteSyncer.applyRemoteEvent(h)}(e,n)]:[3,10];case 9:u.sent(),u.label=10;case 10:return[3,13];case 11:return Q("RemoteStore","Failed to raise snapshot:",s=u.sent()),[4,jd(e,s)];case 12:return u.sent(),[3,13];case 13:return[2]}})})}function jd(e,t,n){return C(this,void 0,void 0,function(){var r=this;return S(this,function(i){switch(i.label){case 0:if(!ta(t))throw t;return e.Or.add(1),[4,Mu(e)];case 1:return i.sent(),e.Br.set("Offline"),n||(n=function(){return GP(e.localStore)}),e.asyncQueue.enqueueRetryable(function(){return C(r,void 0,void 0,function(){return S(this,function(s){switch(s.label){case 0:return Q("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return s.sent(),e.Or.delete(1),[4,ff(e)];case 2:return s.sent(),[2]}})})}),[2]}})})}function tD(e,t){return t().catch(function(n){return jd(e,n,t)})}function Fu(e){return C(this,void 0,void 0,function(){var t,n,r,i,s;return S(this,function(u){switch(u.label){case 0:t=J(e),n=Do(t),r=t.Fr.length>0?t.Fr[t.Fr.length-1].batchId:-1,u.label=1;case 1:if(!function(c){return Uo(c)&&c.Fr.length<10}(t))return[3,7];u.label=2;case 2:return u.trys.push([2,4,,6]),[4,mG(t.localStore,r)];case 3:return(i=u.sent())===null?(t.Fr.length===0&&n.ir(),[3,7]):(r=i.batchId,function(c,l){c.Fr.push(l);var h=Do(c);h.er()&&h.pr&&h.Er(l.mutations)}(t,i),[3,6]);case 4:return s=u.sent(),[4,jd(t,s)];case 5:return u.sent(),[3,6];case 6:return[3,1];case 7:return nD(t)&&rD(t),[2]}})})}function nD(e){return Uo(e)&&!Do(e).tr()&&e.Fr.length>0}function rD(e){Do(e).start()}function qG(e){return C(this,void 0,void 0,function(){return S(this,function(t){return Do(e).Ar(),[2]})})}function KG(e){return C(this,void 0,void 0,function(){var t,n,r,i;return S(this,function(s){for(t=Do(e),n=0,r=e.Fr;n<r.length;n++)i=r[n],t.Er(i.mutations);return[2]})})}function HG(e,t,n){return C(this,void 0,void 0,function(){var r,i;return S(this,function(s){switch(s.label){case 0:return r=e.Fr.shift(),i=JW.from(r,t,n),[4,tD(e,function(){return e.remoteSyncer.applySuccessfulWrite(i)})];case 1:return s.sent(),[4,Fu(e)];case 2:return s.sent(),[2]}})})}function WG(e,t){return C(this,void 0,void 0,function(){return S(this,function(n){switch(n.label){case 0:return t&&Do(e).pr?[4,function(r,i){return C(this,void 0,void 0,function(){var s,u;return S(this,function(c){switch(c.label){case 0:return mP(u=i.code)&&u!==O.ABORTED?(s=r.Fr.shift(),Do(r).sr(),[4,tD(r,function(){return r.remoteSyncer.rejectFailedWrite(s.batchId,i)})]):[3,3];case 1:return c.sent(),[4,Fu(r)];case 2:c.sent(),c.label=3;case 3:return[2]}})})}(e,t)]:[3,2];case 1:n.sent(),n.label=2;case 2:return nD(e)&&rD(e),[2]}})})}function G_(e,t){return C(this,void 0,void 0,function(){var n;return S(this,function(r){switch(r.label){case 0:return n=J(e),t?(n.Or.delete(2),[4,ff(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return t?[3,4]:(n.Or.add(2),[4,Mu(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function Uu(e){var t=this;return e.Ur||(e.Ur=function(n,r,i){var s=J(n);return s.br(),new xG(r,s.Hi,s.credentials,s.R,i)}(e.datastore,e.asyncQueue,{Ii:jG.bind(null,e),Ri:VG.bind(null,e),_r:BG.bind(null,e)}),e.Mr.push(function(n){return C(t,void 0,void 0,function(){return S(this,function(r){switch(r.label){case 0:return n?(e.Ur.sr(),c0(e)?u0(e):e.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,e.Ur.stop()];case 2:r.sent(),eD(e),r.label=3;case 3:return[2]}})})})),e.Ur}function Do(e){var t=this;return e.Kr||(e.Kr=function(n,r,i){var s=J(n);return s.br(),new LG(r,s.Hi,s.credentials,s.R,i)}(e.datastore,e.asyncQueue,{Ii:qG.bind(null,e),Ri:WG.bind(null,e),Ir:KG.bind(null,e),Tr:HG.bind(null,e)}),e.Mr.push(function(n){return C(t,void 0,void 0,function(){return S(this,function(r){switch(r.label){case 0:return n?(e.Kr.sr(),[4,Fu(e)]):[3,2];case 1:return r.sent(),[3,4];case 2:return[4,e.Kr.stop()];case 3:r.sent(),e.Fr.length>0&&(Q("RemoteStore","Stopping write stream with "+e.Fr.length+" pending writes"),e.Fr=[]),r.label=4;case 4:return[2]}})})})),e.Kr}var GG=function(){function e(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new pn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(u){})}return e.createAndSchedule=function(t,n,r,i,s){var u=new e(t,n,Date.now()+r,i,s);return u.start(r),u},e.prototype.start=function(t){var n=this;this.timerHandle=setTimeout(function(){return n.handleDelayElapsed()},t)},e.prototype.skipDelay=function(){return this.handleDelayElapsed()},e.prototype.cancel=function(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(O.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},e.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return t.timerHandle!==null?(t.clearTimeout(),t.op().then(function(n){return t.deferred.resolve(n)})):Promise.resolve()})},e.prototype.clearTimeout=function(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},e}();function ju(e,t){if(It("AsyncQueue",t+": "+e),ta(e))return new B(O.UNAVAILABLE,t+": "+e);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var iD=function(){function e(t){this.comparator=t?function(n,r){return t(n,r)||ae.comparator(n.key,r.key)}:function(n,r){return ae.comparator(n.key,r.key)},this.keyedMap=q_(),this.sortedSet=new vn(this.comparator)}return e.emptySet=function(t){return new e(t.comparator)},e.prototype.has=function(t){return this.keyedMap.get(t)!=null},e.prototype.get=function(t){return this.keyedMap.get(t)},e.prototype.first=function(){return this.sortedSet.minKey()},e.prototype.last=function(){return this.sortedSet.maxKey()},e.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},e.prototype.indexOf=function(t){var n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1},Object.defineProperty(e.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),e.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(n,r){return t(n),!1})},e.prototype.add=function(t){var n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))},e.prototype.delete=function(t){var n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this},e.prototype.isEqual=function(t){if(!(t instanceof e)||this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0},e.prototype.toString=function(){var t=[];return this.forEach(function(n){t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`},e.prototype.copy=function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r},e}(),nk=function(){function e(){this.Qr=new vn(ae.comparator)}return e.prototype.track=function(t){var n=t.doc.key,r=this.Qr.get(n);r?t.type!==0&&r.type===3?this.Qr=this.Qr.insert(n,t):t.type===3&&r.type!==1?this.Qr=this.Qr.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.Qr=this.Qr.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.Qr=this.Qr.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.Qr=this.Qr.remove(n):t.type===1&&r.type===2?this.Qr=this.Qr.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.Qr=this.Qr.insert(n,{type:2,doc:t.doc}):se():this.Qr=this.Qr.insert(n,t)},e.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal(function(n,r){t.push(r)}),t},e}(),Vd=function(){function e(t,n,r,i,s,u,c,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=u,this.syncStateChanged=c,this.excludesMetadataChanges=l}return e.fromInitialDocuments=function(t,n,r,i){var s=[];return n.forEach(function(u){s.push({type:0,doc:u})}),new e(t,n,iD.emptySet(n),s,r,i,!0,!1)},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&of(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0},e}(),$G=function(){this.Wr=void 0,this.listeners=[]},zG=function(){this.queries=new Lu(function(e){return aP(e)},of),this.onlineState="Unknown",this.Gr=new Set};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l0(e,t){return C(this,void 0,void 0,function(){var n,r,i,s,u,c,l;return S(this,function(h){switch(h.label){case 0:if(n=J(e),r=t.query,i=!1,(s=n.queries.get(r))||(i=!0,s=new $G),!i)return[3,4];h.label=1;case 1:return h.trys.push([1,3,,4]),u=s,[4,n.onListen(r)];case 2:return u.Wr=h.sent(),[3,4];case 3:return c=h.sent(),l=ju(c,"Initialization of query '"+V_(t.query)+"' failed"),[2,void t.onError(l)];case 4:return n.queries.set(r,s),s.listeners.push(t),t.zr(n.onlineState),s.Wr&&t.Hr(s.Wr)&&h0(n),[2]}})})}function f0(e,t){return C(this,void 0,void 0,function(){var n,r,i,s,u;return S(this,function(c){return n=J(e),r=t.query,i=!1,(s=n.queries.get(r))&&(u=s.listeners.indexOf(t))>=0&&(s.listeners.splice(u,1),i=s.listeners.length===0),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function QG(e,t){for(var n=J(e),r=!1,i=0,s=t;i<s.length;i++){var u=s[i],c=u.query,l=n.queries.get(c);if(l){for(var h=0,p=l.listeners;h<p.length;h++)p[h].Hr(u)&&(r=!0);l.Wr=u}}r&&h0(n)}function YG(e,t,n){var r=J(e),i=r.queries.get(t);if(i)for(var s=0,u=i.listeners;s<u.length;s++)u[s].onError(n);r.queries.delete(t)}function h0(e){e.Gr.forEach(function(t){t.next()})}var d0=function(){function e(t,n,r){this.query=t,this.Jr=n,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=r||{}}return e.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var n=[],r=0,i=t.docChanges;r<i.length;r++){var s=i[r];s.type!==3&&n.push(s)}t=new Vd(t.query,t.docs,t.oldDocs,n,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var u=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),u=!0):this.eo(t,this.onlineState)&&(this.no(t),u=!0),this.Xr=t,u},e.prototype.onError=function(t){this.Jr.error(t)},e.prototype.zr=function(t){this.onlineState=t;var n=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),n=!0),n},e.prototype.eo=function(t,n){if(!t.fromCache)return!0;var r=n!=="Offline";return!(this.options.so&&r||t.docs.isEmpty()&&n!=="Offline")},e.prototype.Zr=function(t){if(t.docChanges.length>0)return!0;var n=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0},e.prototype.no=function(t){t=Vd.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},e}(),XG=function(){function e(t,n){this.payload=t,this.byteLength=n}return e.prototype.io=function(){return"metadata"in this.payload},e}(),rk=function(){function e(t){this.R=t}return e.prototype.qn=function(t){return ui(this.R,t)},e.prototype.Un=function(t){return t.metadata.exists?CP(this.R,t.document,!1):tn.newNoDocument(this.qn(t.metadata.name),this.Kn(t.metadata.readTime))},e.prototype.Kn=function(t){return qt(t)},e}(),JG=function(){function e(t,n,r){this.ro=t,this.localStore=n,this.R=r,this.queries=[],this.documents=[],this.progress=oD(t)}return e.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var n=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++n):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++n),n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null},e.prototype.co=function(t){for(var n=new Map,r=new rk(this.R),i=0,s=t;i<s.length;i++){var u=s[i];if(u.metadata.queries)for(var c=r.qn(u.metadata.name),l=0,h=u.metadata.queries;l<h.length;l++){var p=h[l],g=(n.get(p)||Ge()).add(c);n.set(p,g)}}return n},e.prototype.complete=function(){return C(this,void 0,void 0,function(){var t,n,r,i,s;return S(this,function(u){switch(u.label){case 0:return[4,_G(this.localStore,new rk(this.R),this.documents,this.ro.id)];case 1:t=u.sent(),n=this.co(this.documents),r=0,i=this.queries,u.label=2;case 2:return r<i.length?(s=i[r],[4,wG(this.localStore,s,n.get(s.name))]):[3,5];case 3:u.sent(),u.label=4;case 4:return r++,[3,2];case 5:return[2,(this.progress.taskState="Success",new hG(Object.assign({},this.progress),t))]}})})},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oD(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sD=function(e){this.key=e},aD=function(e){this.key=e},uD=function(){function e(t,n){this.query=t,this.uo=n,this.ao=null,this.current=!1,this.ho=Ge(),this.mutatedKeys=Ge(),this.lo=uP(t),this.fo=new iD(this.lo)}return Object.defineProperty(e.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),e.prototype._o=function(t,n){var r=this,i=n?n.mo:new nk,s=n?n.fo:this.fo,u=n?n.mutatedKeys:this.mutatedKeys,c=s,l=!1,h=zh(this.query)&&s.size===this.query.limit?s.last():null,p=xd(this.query)&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal(function(m,_){var b=s.get(m),E=sf(r.query,_)?_:null,I=!!b&&r.mutatedKeys.has(b.key),N=!!E&&(E.hasLocalMutations||r.mutatedKeys.has(E.key)&&E.hasCommittedMutations),x=!1;b&&E?b.data.isEqual(E.data)?I!==N&&(i.track({type:3,doc:E}),x=!0):r.yo(b,E)||(i.track({type:2,doc:E}),x=!0,(h&&r.lo(E,h)>0||p&&r.lo(E,p)<0)&&(l=!0)):!b&&E?(i.track({type:0,doc:E}),x=!0):b&&!E&&(i.track({type:1,doc:b}),x=!0,(h||p)&&(l=!0)),x&&(E?(c=c.add(E),u=N?u.add(m):u.delete(m)):(c=c.delete(m),u=u.delete(m)))}),zh(this.query)||xd(this.query))for(;c.size>this.query.limit;){var g=zh(this.query)?c.last():c.first();c=c.delete(g.key),u=u.delete(g.key),i.track({type:1,doc:g})}return{fo:c,mo:i,Nn:l,mutatedKeys:u}},e.prototype.yo=function(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations},e.prototype.applyChanges=function(t,n,r){var i=this,s=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var u=t.mo.jr();u.sort(function(p,g){return function(m,_){var b=function(E){switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return se()}};return b(m)-b(_)}(p.type,g.type)||i.lo(p.doc,g.doc)}),this.po(r);var c=n?this.Eo():[],l=this.ho.size===0&&this.current?1:0,h=l!==this.ao;return this.ao=l,u.length!==0||h?{snapshot:new Vd(this.query,t.fo,s,u,t.mutatedKeys,l===0,h,!1),To:c}:{To:c}},e.prototype.zr=function(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({fo:this.fo,mo:new nk,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},e.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},e.prototype.po=function(t){var n=this;t&&(t.addedDocuments.forEach(function(r){return n.uo=n.uo.add(r)}),t.modifiedDocuments.forEach(function(r){}),t.removedDocuments.forEach(function(r){return n.uo=n.uo.delete(r)}),this.current=t.current)},e.prototype.Eo=function(){var t=this;if(!this.current)return[];var n=this.ho;this.ho=Ge(),this.fo.forEach(function(i){t.Io(i.key)&&(t.ho=t.ho.add(i.key))});var r=[];return n.forEach(function(i){t.ho.has(i)||r.push(new aD(i))}),this.ho.forEach(function(i){n.has(i)||r.push(new sD(i))}),r},e.prototype.Ao=function(t){this.uo=t.Bn,this.ho=Ge();var n=this._o(t.documents);return this.applyChanges(n,!0)},e.prototype.Ro=function(){return Vd.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,this.ao===0)},e}(),ZG=function(e,t,n){this.query=e,this.targetId=t,this.view=n},e$=function(e){this.key=e,this.bo=!1},t$=function(){function e(t,n,r,i,s,u){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=u,this.vo={},this.Po=new Lu(function(c){return aP(c)},of),this.Vo=new Map,this.So=new Set,this.Do=new vn(ae.comparator),this.Co=new Map,this.No=new o0,this.xo={},this.ko=new Map,this.Fo=Fd.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(e.prototype,"isPrimaryClient",{get:function(){return this.$o===!0},enumerable:!1,configurable:!0}),e}();function n$(e,t){return C(this,void 0,void 0,function(){var n,r,i,s,u,c;return S(this,function(l){switch(l.label){case 0:return n=y0(e),(s=n.Po.get(t))?(r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Ro(),[3,4]):[3,1];case 1:return[4,gu(n.localStore,Er(t))];case 2:return u=l.sent(),c=n.sharedClientState.addLocalQueryTarget(u.targetId),r=u.targetId,[4,p0(n,t,r,c==="current")];case 3:i=l.sent(),n.isPrimaryClient&&Jp(n.remoteStore,u),l.label=4;case 4:return[2,i]}})})}function p0(e,t,n,r){return C(this,void 0,void 0,function(){var i,s,u,c,l,h;return S(this,function(p){switch(p.label){case 0:return e.Oo=function(g,m,_){return function(b,E,I,N){return C(this,void 0,void 0,function(){var x,P,z;return S(this,function(W){switch(W.label){case 0:return x=E.view._o(I),x.Nn?[4,Ud(b.localStore,E.query,!1).then(function(V){var ne=V.documents;return E.view._o(ne,x)})]:[3,2];case 1:x=W.sent(),W.label=2;case 2:return P=N&&N.targetChanges.get(E.targetId),z=E.view.applyChanges(x,b.isPrimaryClient,P),[2,($_(b,E.targetId,z.To),z.snapshot)]}})})}(e,g,m,_)},[4,Ud(e.localStore,t,!0)];case 1:return i=p.sent(),s=new uD(t,i.Bn),u=s._o(i.documents),c=Xb.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline"),l=s.applyChanges(u,e.isPrimaryClient,c),$_(e,n,l.To),h=new ZG(t,n,s),[2,(e.Po.set(t,h),e.Vo.has(n)?e.Vo.get(n).push(t):e.Vo.set(n,[t]),l.snapshot)]}})})}function r$(e,t){return C(this,void 0,void 0,function(){var n,r,i;return S(this,function(s){switch(s.label){case 0:return n=J(e),r=n.Po.get(t),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(u){return!of(u,t)})),void n.Po.delete(t))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,mu(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),Nl(n.remoteStore,r.targetId),yu(n,r.targetId)}).catch(na)]):[3,3];case 1:s.sent(),s.label=2;case 2:return[3,5];case 3:return yu(n,r.targetId),[4,mu(n.localStore,r.targetId,!0)];case 4:s.sent(),s.label=5;case 5:return[2]}})})}function i$(e,t,n){return C(this,void 0,void 0,function(){var r,i,s,u;return S(this,function(c){switch(c.label){case 0:r=_0(e),c.label=1;case 1:return c.trys.push([1,5,,6]),[4,function(l,h){var p,g=J(l),m=jn.now(),_=h.reduce(function(b,E){return b.add(E.key)},Ge());return g.persistence.runTransaction("Locally write mutations","readwrite",function(b){return g.Mn.pn(b,_).next(function(E){p=E;for(var I=[],N=0,x=h;N<x.length;N++){var P=x[N],z=kW(P,p.get(P.key));z!=null&&I.push(new Fo(P.key,z,rP(z.value.mapValue),un.exists(!0)))}return g._n.addMutationBatch(b,m,I,h)})}).then(function(b){return b.applyToLocalDocumentSet(p),{batchId:b.batchId,changes:p}})}(r.localStore,t)];case 2:return i=c.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(l,h,p){var g=l.xo[l.currentUser.toKey()];g||(g=new vn(De)),g=g.insert(h,p),l.xo[l.currentUser.toKey()]=g}(r,i.batchId,n),[4,Gi(r,i.changes)];case 3:return c.sent(),[4,Fu(r.remoteStore)];case 4:return c.sent(),[3,6];case 5:return s=c.sent(),u=ju(s,"Failed to persist write"),n.reject(u),[3,6];case 6:return[2]}})})}function cD(e,t){return C(this,void 0,void 0,function(){var n,r;return S(this,function(i){switch(i.label){case 0:n=J(e),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,gG(n.localStore,t)];case 2:return r=i.sent(),t.targetChanges.forEach(function(s,u){var c=n.Co.get(u);c&&(ve(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?c.bo=!0:s.modifiedDocuments.size>0?ve(c.bo):s.removedDocuments.size>0&&(ve(c.bo),c.bo=!1))}),[4,Gi(n,r,t)];case 3:return i.sent(),[3,6];case 4:return[4,na(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function ik(e,t,n){var r=J(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){var i=[];r.Po.forEach(function(s,u){var c=u.view.zr(t);c.snapshot&&i.push(c.snapshot)}),function(s,u){var c=J(s);c.onlineState=u;var l=!1;c.queries.forEach(function(h,p){for(var g=0,m=p.listeners;g<m.length;g++)m[g].zr(u)&&(l=!0)}),l&&h0(c)}(r.eventManager,t),i.length&&r.vo._r(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function o$(e,t,n){return C(this,void 0,void 0,function(){var r,i,s,u,c,l;return S(this,function(h){switch(h.label){case 0:return(r=J(e)).sharedClientState.updateQueryState(t,"rejected",n),i=r.Co.get(t),(s=i&&i.key)?(u=(u=new vn(ae.comparator)).insert(s,tn.newNoDocument(s,ke.min())),c=Ge().add(s),l=new Yb(ke.min(),new Map,new Ot(De),u,c),[4,cD(r,l)]):[3,2];case 1:return h.sent(),r.Do=r.Do.remove(s),r.Co.delete(t),m0(r),[3,4];case 2:return[4,mu(r.localStore,t,!1).then(function(){return yu(r,t,n)}).catch(na)];case 3:h.sent(),h.label=4;case 4:return[2]}})})}function s$(e,t){return C(this,void 0,void 0,function(){var n,r,i;return S(this,function(s){switch(s.label){case 0:n=J(e),r=t.batch.batchId,s.label=1;case 1:return s.trys.push([1,4,,6]),[4,vG(n.localStore,t)];case 2:return i=s.sent(),g0(n,r,null),v0(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,Gi(n,i)];case 3:return s.sent(),[3,6];case 4:return[4,na(s.sent())];case 5:return s.sent(),[3,6];case 6:return[2]}})})}function a$(e,t,n){return C(this,void 0,void 0,function(){var r,i;return S(this,function(s){switch(s.label){case 0:r=J(e),s.label=1;case 1:return s.trys.push([1,4,,6]),[4,function(u,c){var l=J(u);return l.persistence.runTransaction("Reject batch","readwrite-primary",function(h){var p;return l._n.lookupMutationBatch(h,c).next(function(g){return ve(g!==null),p=g.keys(),l._n.removeMutationBatch(h,g)}).next(function(){return l._n.performConsistencyCheck(h)}).next(function(){return l.Mn.pn(h,p)})})}(r.localStore,t)];case 2:return i=s.sent(),g0(r,t,n),v0(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),[4,Gi(r,i)];case 3:return s.sent(),[3,6];case 4:return[4,na(s.sent())];case 5:return s.sent(),[3,6];case 6:return[2]}})})}function u$(e,t){return C(this,void 0,void 0,function(){var n,r,i,s,u;return S(this,function(c){switch(c.label){case 0:Uo((n=J(e)).remoteStore)||Q("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,function(l){var h=J(l);return h.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(p){return h._n.getHighestUnacknowledgedBatchId(p)})}(n.localStore)];case 2:return(r=c.sent())===-1?[2,void t.resolve()]:((i=n.ko.get(r)||[]).push(t),n.ko.set(r,i),[3,4]);case 3:return s=c.sent(),u=ju(s,"Initialization of waitForPendingWrites() operation failed"),t.reject(u),[3,4];case 4:return[2]}})})}function v0(e,t){(e.ko.get(t)||[]).forEach(function(n){n.resolve()}),e.ko.delete(t)}function g0(e,t,n){var r=J(e),i=r.xo[r.currentUser.toKey()];if(i){var s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.xo[r.currentUser.toKey()]=i}}function yu(e,t,n){n===void 0&&(n=null),e.sharedClientState.removeLocalQueryTarget(t);for(var r=0,i=e.Vo.get(t);r<i.length;r++){var s=i[r];e.Po.delete(s),n&&e.vo.Mo(s,n)}e.Vo.delete(t),e.isPrimaryClient&&e.No.Zn(t).forEach(function(u){e.No.containsKey(u)||lD(e,u)})}function lD(e,t){e.So.delete(t.path.canonicalString());var n=e.Do.get(t);n!==null&&(Nl(e.remoteStore,n),e.Do=e.Do.remove(t),e.Co.delete(n),m0(e))}function $_(e,t,n){for(var r=0,i=n;r<i.length;r++){var s=i[r];s instanceof sD?(e.No.addReference(s.key,t),c$(e,s)):s instanceof aD?(Q("SyncEngine","Document no longer in limbo: "+s.key),e.No.removeReference(s.key,t),e.No.containsKey(s.key)||lD(e,s.key)):se()}}function c$(e,t){var n=t.key,r=n.path.canonicalString();e.Do.get(n)||e.So.has(r)||(Q("SyncEngine","New document in limbo: "+n),e.So.add(r),m0(e))}function m0(e){for(;e.So.size>0&&e.Do.size<e.maxConcurrentLimboResolutions;){var t=e.So.values().next().value;e.So.delete(t);var n=new ae(qe.fromString(t)),r=e.Fo.next();e.Co.set(r,new e$(n)),e.Do=e.Do.insert(n,r),Jp(e.remoteStore,new Xp(Er(xu(n.path)),r,2,tr.o))}}function Gi(e,t,n){return C(this,void 0,void 0,function(){var r,i,s,u;return S(this,function(c){switch(c.label){case 0:return r=J(e),i=[],s=[],u=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(l,h){u.push(r.Oo(h,t,n).then(function(p){if(p){r.isPrimaryClient&&r.sharedClientState.updateQueryState(h.targetId,p.fromCache?"not-current":"current"),i.push(p);var g=dG.Pn(h.targetId,p);s.push(g)}}))}),[4,Promise.all(u)]);case 1:return c.sent(),r.vo._r(i),[4,function(l,h){return C(this,void 0,void 0,function(){var p,g,m,_,b,E,I,N,x;return S(this,function(P){switch(P.label){case 0:p=J(l),P.label=1;case 1:return P.trys.push([1,3,,4]),[4,p.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(z){return K.forEach(h,function(W){return K.forEach(W.bn,function(V){return p.persistence.referenceDelegate.addReference(z,W.targetId,V)}).next(function(){return K.forEach(W.vn,function(V){return p.persistence.referenceDelegate.removeReference(z,W.targetId,V)})})})})];case 2:return P.sent(),[3,4];case 3:if(!ta(g=P.sent()))throw g;return Q("LocalStore","Failed to update sequence numbers: "+g),[3,4];case 4:for(m=0,_=h;m<_.length;m++)b=_[m],E=b.targetId,b.fromCache||(I=p.kn.get(E),N=I.snapshotVersion,x=I.withLastLimboFreeSnapshotVersion(N),p.kn=p.kn.insert(E,x));return[2]}})})}(r.localStore,s)];case 2:c.sent(),c.label=3;case 3:return[2]}})})}function l$(e,t){return C(this,void 0,void 0,function(){var n,r;return S(this,function(i){switch(i.label){case 0:return(n=J(e)).currentUser.isEqual(t)?[3,3]:(Q("SyncEngine","User change. New user:",t.toKey()),[4,WP(n.localStore,t)]);case 1:return r=i.sent(),n.currentUser=t,function(s,u){s.ko.forEach(function(c){c.forEach(function(l){l.reject(new B(O.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.ko.clear()}(n),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),[4,Gi(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function f$(e,t){var n=J(e),r=n.Co.get(t);if(r&&r.bo)return Ge().add(r.key);var i=Ge(),s=n.Vo.get(t);if(!s)return i;for(var u=0,c=s;u<c.length;u++){var l=c[u],h=n.Po.get(l);i=i.unionWith(h.view.wo)}return i}function h$(e,t){return C(this,void 0,void 0,function(){var n,r,i;return S(this,function(s){switch(s.label){case 0:return[4,Ud((n=J(e)).localStore,t.query,!0)];case 1:return r=s.sent(),i=t.view.Ao(r),[2,(n.isPrimaryClient&&$_(n,t.targetId,i.To),i)]}})})}function d$(e){return C(this,void 0,void 0,function(){var t;return S(this,function(n){return[2,QP((t=J(e)).localStore).then(function(r){return Gi(t,r)})]})})}function p$(e,t,n,r){return C(this,void 0,void 0,function(){var i,s;return S(this,function(u){switch(u.label){case 0:return[4,function(c,l){var h=J(c),p=J(h._n);return h.persistence.runTransaction("Lookup mutation documents","readonly",function(g){return p.jt(g,l).next(function(m){return m?h.Mn.pn(g,m):K.resolve(null)})})}((i=J(e)).localStore,t)];case 1:return(s=u.sent())===null?[3,6]:n!=="pending"?[3,3]:[4,Fu(i.remoteStore)];case 2:return u.sent(),[3,4];case 3:n==="acknowledged"||n==="rejected"?(g0(i,t,r||null),v0(i,t),function(c,l){J(J(c)._n).Gt(l)}(i.localStore,t)):se(),u.label=4;case 4:return[4,Gi(i,s)];case 5:return u.sent(),[3,7];case 6:Q("SyncEngine","Cannot apply mutation batch with id: "+t),u.label=7;case 7:return[2]}})})}function v$(e,t){return C(this,void 0,void 0,function(){var n,r,i,s,u,c,l,h;return S(this,function(p){switch(p.label){case 0:return y0(n=J(e)),_0(n),t!==!0||n.$o===!0?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,ok(n,r.toArray())]);case 1:return i=p.sent(),n.$o=!0,[4,G_(n.remoteStore,!0)];case 2:for(p.sent(),s=0,u=i;s<u.length;s++)c=u[s],Jp(n.remoteStore,c);return[3,7];case 3:return t!==!1||n.$o===!1?[3,7]:(l=[],h=Promise.resolve(),n.Vo.forEach(function(g,m){n.sharedClientState.isLocalQueryTarget(m)?l.push(m):h=h.then(function(){return yu(n,m),mu(n.localStore,m,!0)}),Nl(n.remoteStore,m)}),[4,h]);case 4:return p.sent(),[4,ok(n,l)];case 5:return p.sent(),function(g){var m=J(g);m.Co.forEach(function(_,b){Nl(m.remoteStore,b)}),m.No.ts(),m.Co=new Map,m.Do=new vn(ae.comparator)}(n),n.$o=!1,[4,G_(n.remoteStore,!1)];case 6:p.sent(),p.label=7;case 7:return[2]}})})}function ok(e,t,n){return C(this,void 0,void 0,function(){var r,i,s,u,c,l,h,p,g,m,_,b,E,I;return S(this,function(N){switch(N.label){case 0:r=J(e),i=[],s=[],u=0,c=t,N.label=1;case 1:return u<c.length?(l=c[u],h=void 0,(p=r.Vo.get(l))&&p.length!==0?[4,gu(r.localStore,Er(p[0]))]:[3,7]):[3,13];case 2:h=N.sent(),g=0,m=p,N.label=3;case 3:return g<m.length?(_=m[g],b=r.Po.get(_),[4,h$(r,b)]):[3,6];case 4:(E=N.sent()).snapshot&&s.push(E.snapshot),N.label=5;case 5:return g++,[3,3];case 6:return[3,11];case 7:return[4,zP(r.localStore,l)];case 8:return I=N.sent(),[4,gu(r.localStore,I)];case 9:return h=N.sent(),[4,p0(r,fD(I),l,!1)];case 10:N.sent(),N.label=11;case 11:i.push(h),N.label=12;case 12:return u++,[3,1];case 13:return[2,(r.vo._r(s),i)]}})})}function fD(e){return oP(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function g$(e){var t=J(e);return J(J(t.localStore).persistence).fn()}function m$(e,t,n,r){return C(this,void 0,void 0,function(){var i,s,u;return S(this,function(c){switch(c.label){case 0:return(i=J(e)).$o?(Q("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(t))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,QP(i.localStore)];case 3:return s=c.sent(),u=Yb.createSynthesizedRemoteEventForCurrentChange(t,n==="current"),[4,Gi(i,s,u)];case 4:return c.sent(),[3,8];case 5:return[4,mu(i.localStore,t,!0)];case 6:return c.sent(),yu(i,t,r),[3,8];case 7:se(),c.label=8;case 8:return[2]}})})}function y$(e,t,n){return C(this,void 0,void 0,function(){var r,i,s,u,c,l,h,p,g,m;return S(this,function(_){switch(_.label){case 0:if(!(r=y0(e)).$o)return[3,10];i=0,s=t,_.label=1;case 1:return i<s.length?(u=s[i],r.Vo.has(u)?(Q("SyncEngine","Adding an already active target "+u),[3,5]):[4,zP(r.localStore,u)]):[3,6];case 2:return c=_.sent(),[4,gu(r.localStore,c)];case 3:return l=_.sent(),[4,p0(r,fD(c),l.targetId,!1)];case 4:_.sent(),Jp(r.remoteStore,l),_.label=5;case 5:return i++,[3,1];case 6:h=function(b){return S(this,function(E){switch(E.label){case 0:return r.Vo.has(b)?[4,mu(r.localStore,b,!1).then(function(){Nl(r.remoteStore,b),yu(r,b)}).catch(na)]:[3,2];case 1:E.sent(),E.label=2;case 2:return[2]}})},p=0,g=n,_.label=7;case 7:return p<g.length?(m=g[p],[5,h(m)]):[3,10];case 8:_.sent(),_.label=9;case 9:return p++,[3,7];case 10:return[2]}})})}function y0(e){var t=J(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=cD.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=f$.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=o$.bind(null,t),t.vo._r=QG.bind(null,t.eventManager),t.vo.Mo=YG.bind(null,t.eventManager),t}function _0(e){var t=J(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=s$.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=a$.bind(null,t),t}function _$(e,t,n){var r=J(e);(function(i,s,u){return C(this,void 0,void 0,function(){var c,l,h,p,g,m;return S(this,function(_){switch(_.label){case 0:return _.trys.push([0,14,,15]),[4,s.getMetadata()];case 1:return c=_.sent(),[4,function(b,E){var I=J(b),N=qt(E.createTime);return I.persistence.runTransaction("hasNewerBundle","readonly",function(x){return I.Ke.getBundleMetadata(x,E.id)}).then(function(x){return!!x&&x.createTime.compareTo(N)>=0})}(i.localStore,c)];case 2:return _.sent()?[4,s.close()]:[3,4];case 3:return[2,(_.sent(),void u._completeWith(function(b){return{taskState:"Success",documentsLoaded:b.totalDocuments,bytesLoaded:b.totalBytes,totalDocuments:b.totalDocuments,totalBytes:b.totalBytes}}(c)))];case 4:return u._updateProgress(oD(c)),l=new JG(c,i.localStore,s.R),[4,s.Lo()];case 5:h=_.sent(),_.label=6;case 6:return h?[4,l.oo(h)]:[3,10];case 7:return(p=_.sent())&&u._updateProgress(p),[4,s.Lo()];case 8:h=_.sent(),_.label=9;case 9:return[3,6];case 10:return[4,l.complete()];case 11:return g=_.sent(),[4,Gi(i,g.wn,void 0)];case 12:return _.sent(),[4,function(b,E){var I=J(b);return I.persistence.runTransaction("Save bundle","readwrite",function(N){return I.Ke.saveBundleMetadata(N,E)})}(i.localStore,c)];case 13:return _.sent(),u._completeWith(g.progress),[3,15];case 14:return El("SyncEngine","Loading bundle failed with "+(m=_.sent())),u._failWith(m),[3,15];case 15:return[2]}})})})(r,t,n).then(function(){r.sharedClientState.notifyBundleLoaded()})}var hD=function(){function e(){this.synchronizeTabs=!1}return e.prototype.initialize=function(t){return C(this,void 0,void 0,function(){return S(this,function(n){switch(n.label){case 0:return this.R=lf(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return n.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}})})},e.prototype.Uo=function(t){return null},e.prototype.Ko=function(t){return HP(this.persistence,new KP,t.initialUser,this.R)},e.prototype.qo=function(t){return new CG(kG.bs,this.R)},e.prototype.Bo=function(t){return new YP},e.prototype.terminate=function(){return C(this,void 0,void 0,function(){return S(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},e}(),dD=function(e){function t(n,r,i){var s=this;return(s=e.call(this)||this).Qo=n,s.cacheSizeBytes=r,s.forceOwnership=i,s.synchronizeTabs=!1,s}return Z(t,e),t.prototype.initialize=function(n){return C(this,void 0,void 0,function(){var r=this;return S(this,function(i){switch(i.label){case 0:return[4,e.prototype.initialize.call(this,n)];case 1:return i.sent(),[4,yG(this.localStore)];case 2:return i.sent(),[4,this.Qo.initialize(this,n)];case 3:return i.sent(),[4,_0(this.Qo.syncEngine)];case 4:return i.sent(),[4,Fu(this.Qo.remoteStore)];case 5:return i.sent(),[4,this.persistence.He(function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()})];case 6:return i.sent(),[2]}})})},t.prototype.Ko=function(n){return HP(this.persistence,new KP,n.initialUser,this.R)},t.prototype.Uo=function(n){var r=this.persistence.referenceDelegate.garbageCollector;return new oG(r,n.asyncQueue)},t.prototype.qo=function(n){var r=i0(n.databaseInfo.databaseId,n.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?ri.withCacheSize(this.cacheSizeBytes):ri.DEFAULT;return new fG(this.synchronizeTabs,r,n.clientId,i,n.asyncQueue,XP(),Xh(),this.R,this.sharedClientState,!!this.forceOwnership)},t.prototype.Bo=function(n){return new YP},t}(hD),w$=function(e){function t(n,r){var i=this;return(i=e.call(this,n,r,!1)||this).Qo=n,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return Z(t,e),t.prototype.initialize=function(n){return C(this,void 0,void 0,function(){var r,i=this;return S(this,function(s){switch(s.label){case 0:return[4,e.prototype.initialize.call(this,n)];case 1:return s.sent(),r=this.Qo.syncEngine,this.sharedClientState instanceof by?(this.sharedClientState.syncEngine={ui:p$.bind(null,r),ai:m$.bind(null,r),hi:y$.bind(null,r),fn:g$.bind(null,r),ci:d$.bind(null,r)},[4,this.sharedClientState.start()]):[3,3];case 2:s.sent(),s.label=3;case 3:return[4,this.persistence.He(function(u){return C(i,void 0,void 0,function(){return S(this,function(c){switch(c.label){case 0:return[4,v$(this.Qo.syncEngine,u)];case 1:return c.sent(),this.gcScheduler&&(u&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):u||this.gcScheduler.stop()),[2]}})})})];case 4:return s.sent(),[2]}})})},t.prototype.Bo=function(n){var r=XP();if(!by.yt(r))throw new B(O.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var i=i0(n.databaseInfo.databaseId,n.databaseInfo.persistenceKey);return new by(r,n.asyncQueue,i,n.clientId,n.initialUser)},t}(dD),z_=function(){function e(){}return e.prototype.initialize=function(t,n){return C(this,void 0,void 0,function(){var r=this;return S(this,function(i){switch(i.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(s){return ik(r.syncEngine,s,1)},this.remoteStore.remoteSyncer.handleCredentialChange=l$.bind(null,this.syncEngine),[4,G_(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:i.sent(),i.label=2;case 2:return[2]}})})},e.prototype.createEventManager=function(t){return new zG},e.prototype.createDatastore=function(t){var n,r=lf(t.databaseInfo.databaseId),i=(n=t.databaseInfo,new DG(n));return function(s,u,c){return new MG(s,u,c)}(t.credentials,i,r)},e.prototype.createRemoteStore=function(t){var n,r,i,s,u,c=this;return n=this.localStore,r=this.datastore,i=t.asyncQueue,s=function(l){return ik(c.syncEngine,l,0)},u=tk.yt()?new tk:new RG,new UG(n,r,i,s,u)},e.prototype.createSyncEngine=function(t,n){return function(r,i,s,u,c,l,h){var p=new t$(r,i,s,u,c,l);return h&&(p.$o=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)},e.prototype.terminate=function(){return function(t){return C(this,void 0,void 0,function(){var n;return S(this,function(r){switch(r.label){case 0:return n=J(t),Q("RemoteStore","RemoteStore shutting down."),n.Or.add(5),[4,Mu(n)];case 1:return r.sent(),n.Lr.shutdown(),n.Br.set("Unknown"),[2]}})})}(this.remoteStore)},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sk(e,t){t===void 0&&(t=10240);var n=0;return{read:function(){return C(this,void 0,void 0,function(){var r;return S(this,function(i){return n<e.byteLength?(r={value:e.slice(n,n+t),done:!1},[2,(n+=t,r)]):[2,{done:!0}]})})},cancel:function(){return C(this,void 0,void 0,function(){return S(this,function(r){return[2]})})},releaseLock:function(){},closed:Promise.reject("unimplemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zp=function(){function e(t){this.observer=t,this.muted=!1}return e.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},e.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},e.prototype.Wo=function(){this.muted=!0},e.prototype.jo=function(t,n){var r=this;this.muted||setTimeout(function(){r.muted||t(n)},0)},e}(),b$=function(){function e(t,n){var r=this;this.Go=t,this.R=n,this.metadata=new pn,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(i){i&&i.io()?r.metadata.resolve(i.payload.metadata):r.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             `+JSON.stringify(i==null?void 0:i.payload)))},function(i){return r.metadata.reject(i)})}return e.prototype.close=function(){return this.Go.cancel()},e.prototype.getMetadata=function(){return C(this,void 0,void 0,function(){return S(this,function(t){return[2,this.metadata.promise]})})},e.prototype.Lo=function(){return C(this,void 0,void 0,function(){return S(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},e.prototype.Ho=function(){return C(this,void 0,void 0,function(){var t,n,r,i;return S(this,function(s){switch(s.label){case 0:return[4,this.Jo()];case 1:return(t=s.sent())===null?[2,null]:(n=this.zo.decode(t),r=Number(n),isNaN(r)&&this.Yo("length string ("+n+") is not valid number"),[4,this.Xo(r)]);case 2:return i=s.sent(),[2,new XG(JSON.parse(i),t.length+r)]}})})},e.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},e.prototype.Jo=function(){return C(this,void 0,void 0,function(){var t,n;return S(this,function(r){switch(r.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(r.sent())return[3,3];r.label=2;case 2:return[3,0];case 3:return this.buffer.length===0?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),n)])}})})},e.prototype.Xo=function(t){return C(this,void 0,void 0,function(){var n;return S(this,function(r){switch(r.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:r.sent()&&this.Yo("Reached the end of bundle when more is expected."),r.label=2;case 2:return[3,0];case 3:return n=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),n)]}})})},e.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},e.prototype.tc=function(){return C(this,void 0,void 0,function(){var t,n;return S(this,function(r){switch(r.label){case 0:return[4,this.Go.read()];case 1:return(t=r.sent()).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),[2,t.done]}})})},e}(),E$=function(){function e(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return e.prototype.lookup=function(t){return C(this,void 0,void 0,function(){var n,r=this;return S(this,function(i){switch(i.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new B(O.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(s,u){return C(this,void 0,void 0,function(){var c,l,h,p,g,m;return S(this,function(_){switch(_.label){case 0:return c=J(s),l=kl(c.R)+"/documents",h={documents:u.map(function(b){return Al(c.R,b)})},[4,c.$i("BatchGetDocuments",l,h)];case 1:return p=_.sent(),g=new Map,p.forEach(function(b){var E=function(I,N){return"found"in N?function(x,P){ve(!!P.found),P.found.name,P.found.updateTime;var z=ui(x,P.found.name),W=qt(P.found.updateTime),V=new Jn({mapValue:{fields:P.found.fields}});return tn.newFoundDocument(z,W,V)}(I,N):"missing"in N?function(x,P){ve(!!P.missing),ve(!!P.readTime);var z=ui(x,P.missing),W=qt(P.readTime);return tn.newNoDocument(z,W)}(I,N):se()}(c.R,b);g.set(E.key.toString(),E)}),m=[],[2,(u.forEach(function(b){var E=g.get(b.toString());ve(!!E),m.push(E)}),m)]}})})}(this.datastore,t)];case 1:return[2,((n=i.sent()).forEach(function(s){return r.recordVersion(s)}),n)]}})})},e.prototype.set=function(t,n){this.write(n.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},e.prototype.update=function(t,n){try{this.write(n.toMutation(t,this.preconditionForUpdate(t)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(t.toString())},e.prototype.delete=function(t){this.write(new cf(t,this.precondition(t))),this.writtenDocs.add(t.toString())},e.prototype.commit=function(){return C(this,void 0,void 0,function(){var t,n=this;return S(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(i){t.delete(i.key.toString())}),t.forEach(function(i,s){var u=ae.fromPath(s);n.mutations.push(new Qb(u,n.precondition(u)))}),[4,function(i,s){return C(this,void 0,void 0,function(){var u,c,l;return S(this,function(h){switch(h.label){case 0:return u=J(i),c=kl(u.R)+"/documents",l={writes:s.map(function(p){return Ld(u.R,p)})},[4,u.Ni("Commit",c,l)];case 1:return h.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return r.sent(),this.committed=!0,[2]}})})},e.prototype.recordVersion=function(t){var n;if(t.isFoundDocument())n=t.version;else{if(!t.isNoDocument())throw se();n=ke.min()}var r=this.readVersions.get(t.key.toString());if(r){if(!n.isEqual(r))throw new B(O.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),n)},e.prototype.precondition=function(t){var n=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&n?un.updateTime(n):un.none()},e.prototype.preconditionForUpdate=function(t){var n=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&n){if(n.isEqual(ke.min()))throw new B(O.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return un.updateTime(n)}return un.exists(!0)},e.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},e.prototype.ensureCommitNotCalled=function(){},e}(),T$=function(){function e(t,n,r,i){this.asyncQueue=t,this.datastore=n,this.updateFunction=r,this.deferred=i,this.ec=5,this.Zi=new s0(this.asyncQueue,"transaction_retry")}return e.prototype.run=function(){this.ec-=1,this.nc()},e.prototype.nc=function(){var t=this;this.Zi.ji(function(){return C(t,void 0,void 0,function(){var n,r,i=this;return S(this,function(s){return n=new E$(this.datastore),(r=this.sc(n))&&r.then(function(u){i.asyncQueue.enqueueAndForget(function(){return n.commit().then(function(){i.deferred.resolve(u)}).catch(function(c){i.ic(c)})})}).catch(function(u){i.ic(u)}),[2]})})})},e.prototype.sc=function(t){try{var n=this.updateFunction(t);return!ea(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}},e.prototype.ic=function(t){var n=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return n.nc(),Promise.resolve()})):this.deferred.reject(t)},e.prototype.rc=function(t){if(t.name==="FirebaseError"){var n=t.code;return n==="aborted"||n==="failed-precondition"||!mP(n)}return!1},e}(),I$=function(){function e(t,n,r){var i=this;this.credentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=zt.UNAUTHENTICATED,this.clientId=XO.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(n,function(s){return C(i,void 0,void 0,function(){return S(this,function(u){switch(u.label){case 0:return Q("FirestoreClient","Received user=",s.uid),[4,this.credentialListener(s)];case 1:return u.sent(),this.user=s,[2]}})})})}return e.prototype.getConfiguration=function(){return C(this,void 0,void 0,function(){return S(this,function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},e.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},e.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new B(O.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var n=new pn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return C(t,void 0,void 0,function(){var r,i;return S(this,function(s){switch(s.label){case 0:return s.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:s.sent(),s.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:s.sent(),s.label=4;case 4:return this.credentials.removeChangeListener(),n.resolve(),[3,6];case 5:return r=s.sent(),i=ju(r,"Failed to shutdown persistence"),n.reject(i),[3,6];case 6:return[2]}})})}),n.promise},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pD(e,t){return C(this,void 0,void 0,function(){var n,r,i=this;return S(this,function(s){switch(s.label){case 0:return e.asyncQueue.verifyOperationInProgress(),Q("FirestoreClient","Initializing OfflineComponentProvider"),[4,e.getConfiguration()];case 1:return n=s.sent(),[4,t.initialize(n)];case 2:return s.sent(),r=n.initialUser,e.setCredentialChangeListener(function(u){return C(i,void 0,void 0,function(){return S(this,function(c){switch(c.label){case 0:return r.isEqual(u)?[3,2]:[4,WP(t.localStore,u)];case 1:c.sent(),r=u,c.label=2;case 2:return[2]}})})}),t.persistence.setDatabaseDeletedListener(function(){return e.terminate()}),e.offlineComponents=t,[2]}})})}function vD(e,t){return C(this,void 0,void 0,function(){var n,r;return S(this,function(i){switch(i.label){case 0:return e.asyncQueue.verifyOperationInProgress(),[4,w0(e)];case 1:return n=i.sent(),Q("FirestoreClient","Initializing OnlineComponentProvider"),[4,e.getConfiguration()];case 2:return r=i.sent(),[4,t.initialize(n,r)];case 3:return i.sent(),e.setCredentialChangeListener(function(s){return function(u,c){return C(this,void 0,void 0,function(){var l,h;return S(this,function(p){switch(p.label){case 0:return(l=J(u)).asyncQueue.verifyOperationInProgress(),Q("RemoteStore","RemoteStore received new credentials"),h=Uo(l),l.Or.add(3),[4,Mu(l)];case 1:return p.sent(),h&&l.Br.set("Unknown"),[4,l.remoteSyncer.handleCredentialChange(c)];case 2:return p.sent(),l.Or.delete(3),[4,ff(l)];case 3:return p.sent(),[2]}})})}(t.remoteStore,s)}),e.onlineComponents=t,[2]}})})}function w0(e){return C(this,void 0,void 0,function(){return S(this,function(t){switch(t.label){case 0:return e.offlineComponents?[3,2]:(Q("FirestoreClient","Using default OfflineComponentProvider"),[4,pD(e,new hD)]);case 1:t.sent(),t.label=2;case 2:return[2,e.offlineComponents]}})})}function ev(e){return C(this,void 0,void 0,function(){return S(this,function(t){switch(t.label){case 0:return e.onlineComponents?[3,2]:(Q("FirestoreClient","Using default OnlineComponentProvider"),[4,vD(e,new z_)]);case 1:t.sent(),t.label=2;case 2:return[2,e.onlineComponents]}})})}function ak(e){return w0(e).then(function(t){return t.persistence})}function b0(e){return w0(e).then(function(t){return t.localStore})}function uk(e){return ev(e).then(function(t){return t.remoteStore})}function E0(e){return ev(e).then(function(t){return t.syncEngine})}function _u(e){return C(this,void 0,void 0,function(){var t,n;return S(this,function(r){switch(r.label){case 0:return[4,ev(e)];case 1:return t=r.sent(),[2,((n=t.eventManager).onListen=n$.bind(null,t.syncEngine),n.onUnlisten=r$.bind(null,t.syncEngine),n)]}})})}function ck(e,t,n){var r=this;n===void 0&&(n={});var i=new pn;return e.asyncQueue.enqueueAndForget(function(){return C(r,void 0,void 0,function(){var s;return S(this,function(u){switch(u.label){case 0:return s=function(c,l,h,p,g){var m=new Zp({next:function(b){l.enqueueAndForget(function(){return f0(c,_)});var E=b.docs.has(h);!E&&b.fromCache?g.reject(new B(O.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&b.fromCache&&p&&p.source==="server"?g.reject(new B(O.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(b)},error:function(b){return g.reject(b)}}),_=new d0(xu(h.path),m,{includeMetadataChanges:!0,so:!0});return l0(c,_)},[4,_u(e)];case 1:return[2,s.apply(void 0,[u.sent(),e.asyncQueue,t,n,i])]}})})}),i.promise}function lk(e,t,n){var r=this;n===void 0&&(n={});var i=new pn;return e.asyncQueue.enqueueAndForget(function(){return C(r,void 0,void 0,function(){var s;return S(this,function(u){switch(u.label){case 0:return s=function(c,l,h,p,g){var m=new Zp({next:function(b){l.enqueueAndForget(function(){return f0(c,_)}),b.fromCache&&p.source==="server"?g.reject(new B(O.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(b)},error:function(b){return g.reject(b)}}),_=new d0(h,m,{includeMetadataChanges:!0,so:!0});return l0(c,_)},[4,_u(e)];case 1:return[2,s.apply(void 0,[u.sent(),e.asyncQueue,t,n,i])]}})})}),i.promise}var S$=function(e,t,n,r,i,s,u,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=u,this.useFetchStreams=c},Bd=function(){function e(t,n){this.projectId=t,this.database=n||"(default)"}return Object.defineProperty(e.prototype,"isDefaultDatabase",{get:function(){return this.database==="(default)"},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database},e}(),fk=new Map,gD=function(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+e},hk=function(){function e(){this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(null)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(t,n){this.changeListener=n,t.enqueueRetryable(function(){return n(zt.UNAUTHENTICATED)})},e.prototype.removeChangeListener=function(){this.changeListener=null},e}(),C$=function(){function e(t){this.token=t,this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(this.token)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(t,n){var r=this;this.changeListener=n,t.enqueueRetryable(function(){return n(r.token.user)})},e.prototype.removeChangeListener=function(){this.changeListener=null},e}(),A$=function(){function e(t){var n=this;this.currentUser=zt.UNAUTHENTICATED,this.oc=new pn,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){n.cc++,n.currentUser=n.ac(),n.oc.resolve(),n.changeListener&&n.asyncQueue.enqueueRetryable(function(){return n.changeListener(n.currentUser)})};var r=function(i){Q("FirebaseCredentialsProvider","Auth detected"),n.auth=i,n.auth.addAuthTokenListener(n.uc)};t.onInit(function(i){return r(i)}),setTimeout(function(){if(!n.auth){var i=t.getImmediate({optional:!0});i?r(i):(Q("FirebaseCredentialsProvider","Auth not yet detected"),n.oc.resolve())}},0)}return e.prototype.getToken=function(){var t=this,n=this.cc,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(function(i){return t.cc!==n?(Q("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):i?(ve(typeof i.accessToken=="string"),new gD(i.accessToken,t.currentUser)):null}):Promise.resolve(null)},e.prototype.invalidateToken=function(){this.forceRefresh=!0},e.prototype.setChangeListener=function(t,n){var r=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable(function(){return C(r,void 0,void 0,function(){return S(this,function(i){switch(i.label){case 0:return[4,this.oc.promise];case 1:return i.sent(),[4,n(this.currentUser)];case 2:return i.sent(),this.changeListener=n,[2]}})})})},e.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},e.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return ve(t===null||typeof t=="string"),new zt(t)},e}(),k$=function(){function e(t,n,r){this.hc=t,this.lc=n,this.fc=r,this.type="FirstParty",this.user=zt.FIRST_PARTY}return Object.defineProperty(e.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},n=this.hc.auth.getAuthHeaderValueForFirstParty([]);return n&&(t.Authorization=n),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),e}(),N$=function(){function e(t,n,r){this.hc=t,this.lc=n,this.fc=r}return e.prototype.getToken=function(){return Promise.resolve(new k$(this.hc,this.lc,this.fc))},e.prototype.setChangeListener=function(t,n){t.enqueueRetryable(function(){return n(zt.FIRST_PARTY)})},e.prototype.removeChangeListener=function(){},e.prototype.invalidateToken=function(){},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T0(e,t,n){if(!n)throw new B(O.INVALID_ARGUMENT,"Function "+e+"() cannot be called with an empty "+t+".")}function I0(e,t){if(t===void 0)return{merge:!1};if(t.mergeFields!==void 0&&t.merge!==void 0)throw new B(O.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');return t}function mD(e,t,n,r){if(t===!0&&r===!0)throw new B(O.INVALID_ARGUMENT,e+" and "+n+" cannot be used together.")}function dk(e){if(!ae.isDocumentKey(e))throw new B(O.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e+" has "+e.length+".")}function pk(e){if(ae.isDocumentKey(e))throw new B(O.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e+" has "+e.length+".")}function tv(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";var t=function(n){if(n.constructor){var r=/function\s+([^\s(]+)\s*\(/.exec(n.constructor.toString());if(r&&r.length>1)return r[1]}return null}(e);return t?"a custom "+t+" object":"an object"}return typeof e=="function"?"a function":se()}function Ve(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new B(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=tv(e);throw new B(O.INVALID_ARGUMENT,"Expected type '"+t.name+"', but it was: "+n)}return e}function vk(e,t){if(t<=0)throw new B(O.INVALID_ARGUMENT,"Function "+e+"() requires a positive number, but it was: "+t+".")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gk=function(){function e(t){var n;if(t.host===void 0){if(t.ssl!==void 0)throw new B(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new B(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,mD("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return e.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},e}(),Rl=function(){function e(t,n){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gk({}),this._settingsFrozen=!1,t instanceof Bd?(this._databaseId=t,this._credentials=new hk):(this._app=t,this._databaseId=function(r){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new B(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bd(r.options.projectId)}(t),this._credentials=new A$(n))}return Object.defineProperty(e.prototype,"app",{get:function(){if(!this._app)throw new B(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_terminated",{get:function(){return this._terminateTask!==void 0},enumerable:!1,configurable:!0}),e.prototype._setSettings=function(t){if(this._settingsFrozen)throw new B(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gk(t),t.credentials!==void 0&&(this._credentials=function(n){if(!n)return new hk;switch(n.type){case"gapi":var r=n.client;return ve(!(typeof r!="object"||r===null||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new N$(r,n.sessionIndex||"0",n.iamToken||null);case"provider":return n.client;default:throw new B(O.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},e.prototype._getSettings=function(){return this._settings},e.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},e.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},e.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},e.prototype._terminate=function(){return t=this,(n=fk.get(t))&&(Q("ComponentProvider","Removing Datastore"),fk.delete(t),n.terminate()),Promise.resolve();var t,n},e}(),ct=function(){function e(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}return Object.defineProperty(e.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Io(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._key)},e}(),Vn=function(){function e(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}return e.prototype.withConverter=function(t){return new e(this.firestore,t,this._query)},e}(),Io=function(e){function t(n,r,i){var s=this;return(s=e.call(this,n,r,xu(i))||this)._path=i,s.type="collection",s}return Z(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var n=this._path.popLast();return n.isEmpty()?null:new ct(this.firestore,null,new ae(n))},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(n){return new t(this.firestore,n,this._path)},t}(Vn);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yD(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(e=Ee(e),T0("collection","path",t),e instanceof Rl)return pk(n=qe.fromString.apply(qe,Ie([t],r))),new Io(e,null,n);if(!(e instanceof ct||e instanceof Io))throw new B(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return pk(n=qe.fromString.apply(qe,Ie([e.path],r)).child(qe.fromString(t))),new Io(e.firestore,null,n)}function Jh(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(e=Ee(e),arguments.length===1&&(t=XO.u()),T0("doc","path",t),e instanceof Rl)return dk(n=qe.fromString.apply(qe,Ie([t],r))),new ct(e,null,new ae(n));if(!(e instanceof ct||e instanceof Io))throw new B(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return dk(n=e._path.child(qe.fromString.apply(qe,Ie([t],r)))),new ct(e.firestore,e instanceof Io?e.converter:null,new ae(n))}function _D(e,t){return e=Ee(e),t=Ee(t),(e instanceof ct||e instanceof Io)&&(t instanceof ct||t instanceof Io)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function wD(e,t){return e=Ee(e),t=Ee(t),e instanceof Vn&&t instanceof Vn&&e.firestore===t.firestore&&of(e._query,t._query)&&e.converter===t.converter}var R$=function(){function e(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new s0(this,"async_queue_retry"),this.Ic=function(){var r=Xh();r&&Q("AsyncQueue","Visibility state changed to "+r.visibilityState),t.Zi.Gi()};var n=Xh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(e.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),e.prototype.enqueueAndForget=function(t){this.enqueue(t)},e.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},e.prototype.enterRestrictedMode=function(t){if(!this._c){this._c=!0,this.Ec=t||!1;var n=Xh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Ic)}},e.prototype.enqueue=function(t){var n=this;if(this.Ac(),this._c)return new Promise(function(){});var r=new pn;return this.Rc(function(){return n._c&&n.Ec?Promise.resolve():(t().then(r.resolve,r.reject),r.promise)}).then(function(){return r.promise})},e.prototype.enqueueRetryable=function(t){var n=this;this.enqueueAndForget(function(){return n.wc.push(t),n.bc()})},e.prototype.bc=function(){return C(this,void 0,void 0,function(){var t,n=this;return S(this,function(r){switch(r.label){case 0:if(this.wc.length===0)return[3,5];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return r.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!ta(t=r.sent()))throw t;return Q("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji(function(){return n.bc()}),r.label=5;case 5:return[2]}})})},e.prototype.Rc=function(t){var n=this,r=this.dc.then(function(){return n.gc=!0,t().catch(function(i){throw n.yc=i,n.gc=!1,It("INTERNAL UNHANDLED ERROR: ",function(s){var u=s.message||"";return s.stack&&(u=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),u}(i)),i}).then(function(i){return n.gc=!1,i})});return this.dc=r,r},e.prototype.enqueueAfterDelay=function(t,n,r){var i=this;this.Ac(),this.Tc.indexOf(t)>-1&&(n=0);var s=GG.createAndSchedule(this,t,n,r,function(u){return i.vc(u)});return this.mc.push(s),s},e.prototype.Ac=function(){this.yc&&se()},e.prototype.verifyOperationInProgress=function(){},e.prototype.Pc=function(){return C(this,void 0,void 0,function(){var t;return S(this,function(n){switch(n.label){case 0:return[4,t=this.dc];case 1:n.sent(),n.label=2;case 2:if(t!==this.dc)return[3,0];n.label=3;case 3:return[2]}})})},e.prototype.Vc=function(t){for(var n=0,r=this.mc;n<r.length;n++)if(r[n].timerId===t)return!0;return!1},e.prototype.Sc=function(t){var n=this;return this.Pc().then(function(){n.mc.sort(function(u,c){return u.targetTimeMs-c.targetTimeMs});for(var r=0,i=n.mc;r<i.length;r++){var s=i[r];if(s.skipDelay(),t!=="all"&&s.timerId===t)break}return n.Pc()})},e.prototype.Dc=function(t){this.Tc.push(t)},e.prototype.vc=function(t){var n=this.mc.indexOf(t);this.mc.splice(n,1)},e}();function wu(e){return function(t,n){if(typeof t!="object"||t===null)return!1;for(var r=t,i=0,s=["next","error","complete"];i<s.length;i++){var u=s[i];if(u in r&&typeof r[u]=="function")return!0}return!1}(e)}var O$=function(){function e(){this._progressObserver={},this._taskCompletionResolver=new pn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return e.prototype.onProgress=function(t,n,r){this._progressObserver={next:t,error:n,complete:r}},e.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},e.prototype.then=function(t,n){return this._taskCompletionResolver.promise.then(t,n)},e.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},e.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},e.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)},e}(),P$=-1,wt=function(e){function t(n,r){var i=this;return(i=e.call(this,n,r)||this).type="firestore",i._queue=new R$,i._persistenceKey="name"in n?n.name:"[DEFAULT]",i}return Z(t,e),t.prototype._terminate=function(){return this._firestoreClient||bD(this),this._firestoreClient.terminate()},t}(Rl);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(e){return e._firestoreClient||bD(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function bD(e){var t,n=e._freezeSettings(),r=function(i,s,u,c){return new S$(i,s,u,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new I$(e._credentials,e._queue,r)}function mk(e,t,n){var r=this,i=new pn;return e.asyncQueue.enqueue(function(){return C(r,void 0,void 0,function(){var s;return S(this,function(u){switch(u.label){case 0:return u.trys.push([0,3,,4]),[4,pD(e,n)];case 1:return u.sent(),[4,vD(e,t)];case 2:return u.sent(),i.resolve(),[3,4];case 3:if(!function(c){return c.name==="FirebaseError"?c.code===O.FAILED_PRECONDITION||c.code===O.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||c.code===22||c.code===20||c.code===11}(s=u.sent()))throw s;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+s),i.reject(s),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function yk(e){if(e._initialized||e._terminated)throw new B(O.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ci=function(){function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=0;r<t.length;++r)if(t[r].length===0)throw new B(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wr(t)}return e.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},e}(),Hs=function(){function e(t){this._byteString=t}return e.fromBase64String=function(t){try{return new e(kn.fromBase64String(t))}catch(n){throw new B(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}},e.fromUint8Array=function(t){return new e(kn.fromUint8Array(t))},e.prototype.toBase64=function(){return this._byteString.toBase64()},e.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},e.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},e.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},e}(),ra=function(e){this._methodName=e},nv=function(){function e(t,n){if(!isFinite(t)||t<-90||t>90)throw new B(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new B(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return Object.defineProperty(e.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},e.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},e.prototype._compareTo=function(t){return De(this._lat,t._lat)||De(this._long,t._long)},e}(),D$=/^__.*__$/,x$=function(){function e(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}return e.prototype.toMutation=function(t,n){return this.fieldMask!==null?new Fo(t,this.data,this.fieldMask,n,this.fieldTransforms):new uf(t,this.data,n,this.fieldTransforms)},e}(),ED=function(){function e(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}return e.prototype.toMutation=function(t,n){return new Fo(t,this.data,this.fieldMask,n,this.fieldTransforms)},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TD(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw se()}}var ID=function(){function e(t,n,r,i,s,u){this.settings=t,this.databaseId=n,this.R=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Cc(),this.fieldTransforms=s||[],this.fieldMask=u||[]}return Object.defineProperty(e.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),e.prototype.xc=function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},e.prototype.kc=function(t){var n,r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.xc({path:r,Fc:!1});return i.$c(t),i},e.prototype.Oc=function(t){var n,r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.xc({path:r,Fc:!1});return i.Cc(),i},e.prototype.Mc=function(t){return this.xc({path:void 0,Fc:!0})},e.prototype.Lc=function(t){return qd(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},e.prototype.contains=function(t){return this.fieldMask.find(function(n){return t.isPrefixOf(n)})!==void 0||this.fieldTransforms.find(function(n){return t.isPrefixOf(n.field)})!==void 0},e.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},e.prototype.$c=function(t){if(t.length===0)throw this.Lc("Document fields must not be empty");if(TD(this.Nc)&&D$.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},e}(),L$=function(){function e(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.R=r||lf(t)}return e.prototype.Uc=function(t,n,r,i){return i===void 0&&(i=!1),new ID({Nc:t,methodName:n,qc:r,path:Wr.emptyPath(),Fc:!1,Bc:i},this.databaseId,this.R,this.ignoreUndefinedProperties)},e}();function ia(e){var t=e._freezeSettings(),n=lf(e._databaseId);return new L$(e._databaseId,!!t.ignoreUndefinedProperties,n)}function rv(e,t,n,r,i,s){s===void 0&&(s={});var u=e.Uc(s.merge||s.mergeFields?2:0,t,n,i);k0("Data must be an object, but it was:",u,r);var c,l,h=AD(r,u);if(s.merge)c=new ou(u.fieldMask),l=u.fieldTransforms;else if(s.mergeFields){for(var p=[],g=0,m=s.mergeFields;g<m.length;g++){var _=Q_(t,m[g],n);if(!u.contains(_))throw new B(O.INVALID_ARGUMENT,"Field '"+_+"' is specified in your field mask but missing from your input data.");ND(p,_)||p.push(_)}c=new ou(p),l=u.fieldTransforms.filter(function(b){return c.covers(b.field)})}else c=null,l=u.fieldTransforms;return new x$(new Jn(h),c,l)}var S0=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Z(t,e),t.prototype._toFieldTransform=function(n){if(n.Nc!==2)throw n.Nc===1?n.Lc(this._methodName+"() can only appear at the top level of your update data"):n.Lc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return n.fieldMask.push(n.path),null},t.prototype.isEqual=function(n){return n instanceof t},t}(ra);function SD(e,t,n){return new ID({Nc:3,qc:t.settings.qc,methodName:e._methodName,Fc:n},t.databaseId,t.R,t.ignoreUndefinedProperties)}var M$=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Z(t,e),t.prototype._toFieldTransform=function(n){return new af(n.path,new cu)},t.prototype.isEqual=function(n){return n instanceof t},t}(ra),F$=function(e){function t(n,r){var i=this;return(i=e.call(this,n)||this).Kc=r,i}return Z(t,e),t.prototype._toFieldTransform=function(n){var r=SD(this,n,!0),i=this.Kc.map(function(u){return oa(u,r)}),s=new qs(i);return new af(n.path,s)},t.prototype.isEqual=function(n){return this===n},t}(ra),U$=function(e){function t(n,r){var i=this;return(i=e.call(this,n)||this).Kc=r,i}return Z(t,e),t.prototype._toFieldTransform=function(n){var r=SD(this,n,!0),i=this.Kc.map(function(u){return oa(u,r)}),s=new Ks(i);return new af(n.path,s)},t.prototype.isEqual=function(n){return this===n},t}(ra),j$=function(e){function t(n,r){var i=this;return(i=e.call(this,n)||this).Qc=r,i}return Z(t,e),t.prototype._toFieldTransform=function(n){var r=new lu(n.R,fP(n.R,this.Qc));return new af(n.path,r)},t.prototype.isEqual=function(n){return this===n},t}(ra);function C0(e,t,n,r){var i=e.Uc(1,t,n);k0("Data must be an object, but it was:",i,r);var s=[],u=Jn.empty();Zs(r,function(l,h){var p=N0(t,l,n);h=Ee(h);var g=i.Oc(p);if(h instanceof S0)s.push(p);else{var m=oa(h,g);m!=null&&(s.push(p),u.set(p,m))}});var c=new ou(s);return new ED(u,c,i.fieldTransforms)}function A0(e,t,n,r,i,s){var u=e.Uc(1,t,n),c=[Q_(t,r,n)],l=[i];if(s.length%2!=0)throw new B(O.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var h=0;h<s.length;h+=2)c.push(Q_(t,s[h])),l.push(s[h+1]);for(var p=[],g=Jn.empty(),m=c.length-1;m>=0;--m)if(!ND(p,c[m])){var _=c[m],b=l[m];b=Ee(b);var E=u.Oc(_);if(b instanceof S0)p.push(_);else{var I=oa(b,E);I!=null&&(p.push(_),g.set(_,I))}}var N=new ou(p);return new ED(g,N,u.fieldTransforms)}function CD(e,t,n,r){return r===void 0&&(r=!1),oa(n,e.Uc(r?4:3,t))}function oa(e,t){if(kD(e=Ee(e)))return k0("Unsupported field value:",t,e),AD(e,t);if(e instanceof ra)return function(n,r){if(!TD(r.Nc))throw r.Lc(n._methodName+"() can only be used with update() and set()");if(!r.path)throw r.Lc(n._methodName+"() is not currently supported inside arrays");var i=n._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Fc&&t.Nc!==4)throw t.Lc("Nested arrays are not supported");return function(n,r){for(var i=[],s=0,u=0,c=n;u<c.length;u++){var l=oa(c[u],r.Mc(s));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),s++}return{arrayValue:{values:i}}}(e,t)}return function(n,r){if((n=Ee(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return fP(r.R,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){var i=jn.fromDate(n);return{timestampValue:Cl(r.R,i)}}if(n instanceof jn)return i=new jn(n.seconds,1e3*Math.floor(n.nanoseconds/1e3)),{timestampValue:Cl(r.R,i)};if(n instanceof nv)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Hs)return{bytesValue:EP(r.R,n._byteString)};if(n instanceof ct){i=r.databaseId;var s=n.firestore._databaseId;if(!s.isEqual(i))throw r.Lc("Document reference is for database "+s.projectId+"/"+s.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:Jb(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.Lc("Unsupported field value: "+tv(n))}(e,t)}function AD(e,t){var n={};return ZO(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Zs(e,function(r,i){var s=oa(i,t.kc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function kD(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof jn||e instanceof nv||e instanceof Hs||e instanceof ct||e instanceof ra)}function k0(e,t,n){if(!kD(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){var r=tv(n);throw r==="an object"?t.Lc(e+" a custom object"):t.Lc(e+" "+r)}}function Q_(e,t,n){if((t=Ee(t))instanceof ci)return t._internalPath;if(typeof t=="string")return N0(e,t);throw qd("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}var V$=new RegExp("[~\\*/\\[\\]]");function N0(e,t,n){if(t.search(V$)>=0)throw qd("Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'",e,!1,void 0,n);try{return new(ci.bind.apply(ci,Ie([void 0],t.split("."))))()._internalPath}catch{throw qd("Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",e,!1,void 0,n)}}function qd(e,t,n,r,i){var s=r&&!r.isEmpty(),u=i!==void 0,c="Function "+t+"() called with invalid data";n&&(c+=" (via `toFirestore()`)");var l="";return(s||u)&&(l+=" (found",s&&(l+=" in field "+r),u&&(l+=" in document "+i),l+=")"),new B(O.INVALID_ARGUMENT,(c+=". ")+e+l)}function ND(e,t){return e.some(function(n){return n.isEqual(t)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ol=function(){function e(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}return Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new ct(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),e.prototype.exists=function(){return this._document!==null},e.prototype.data=function(){if(this._document){if(this._converter){var t=new B$(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},e.prototype.get=function(t){if(this._document){var n=this._document.data.field(Kd("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}},e}(),B$=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Z(t,e),t.prototype.data=function(){return e.prototype.data.call(this)},t}(Ol);function Kd(e,t){return typeof t=="string"?N0(e,t):t instanceof ci?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Is=function(){function e(t,n){this.hasPendingWrites=t,this.fromCache=n}return e.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},e}(),Fi=function(e){function t(n,r,i,s,u,c){var l=this;return(l=e.call(this,n,r,i,s,c)||this)._firestore=n,l._firestoreImpl=n,l.metadata=u,l}return Z(t,e),t.prototype.exists=function(){return e.prototype.exists.call(this)},t.prototype.data=function(n){if(n===void 0&&(n={}),this._document){if(this._converter){var r=new el(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,n)}return this._userDataWriter.convertValue(this._document.data.value,n.serverTimestamps)}},t.prototype.get=function(n,r){if(r===void 0&&(r={}),this._document){var i=this._document.data.field(Kd("DocumentSnapshot.get",n));if(i!==null)return this._userDataWriter.convertValue(i,r.serverTimestamps)}},t}(Ol),el=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Z(t,e),t.prototype.data=function(n){return n===void 0&&(n={}),e.prototype.data.call(this,n)},t}(Fi),go=function(){function e(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new Is(i.hasPendingWrites,i.fromCache),this.query=r}return Object.defineProperty(e.prototype,"docs",{get:function(){var t=[];return this.forEach(function(n){return t.push(n)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this.size===0},enumerable:!1,configurable:!0}),e.prototype.forEach=function(t,n){var r=this;this._snapshot.docs.forEach(function(i){t.call(n,new el(r._firestore,r._userDataWriter,i.key,i,new Is(r._snapshot.mutatedKeys.has(i.key),r._snapshot.fromCache),r.query.converter))})},e.prototype.docChanges=function(t){t===void 0&&(t={});var n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new B(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){var s=0;return r._snapshot.docChanges.map(function(c){return{type:"added",doc:new el(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Is(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}})}var u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(function(c){return i||c.type!==3}).map(function(c){var l=new el(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Is(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),h=-1,p=-1;return c.type!==0&&(h=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),c.type!==1&&(p=(u=u.add(c.doc)).indexOf(c.doc.key)),{type:q$(c.type),doc:l,oldIndex:h,newIndex:p}})}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges},e}();function q$(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return se()}}function RD(e,t){return e instanceof Fi&&t instanceof Fi?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(e._document===null?t._document===null:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof go&&t instanceof go&&e._firestore===t._firestore&&wD(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OD(e){if(xd(e)&&e.explicitOrderBy.length===0)throw new B(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var hf=function(){};function uo(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++){var s=i[r];e=s._apply(e)}return e}var K$=function(e){function t(n,r,i){var s=this;return(s=e.call(this)||this).jc=n,s.Wc=r,s.Gc=i,s.type="where",s}return Z(t,e),t.prototype._apply=function(n){var r=ia(n.firestore),i=function(s,u,c,l,h,p,g){var m;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new B(O.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+p+"' queries on FieldPath.documentId().");if(p==="in"||p==="not-in"){Tk(g,p);for(var _=[],b=0,E=g;b<E.length;b++){var I=E[b];_.push(Ek(l,s,I))}m={arrayValue:{values:_}}}else m=Ek(l,s,g)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||Tk(g,p),m=CD(c,"where",g,p==="in"||p==="not-in");var N=nr.create(h,p,m);return function(x,P){if(P.g()){var z=$b(x);if(z!==null&&!z.isEqual(P.field))throw new B(O.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+z.toString()+"' and '"+P.field.toString()+"'");var W=Gb(x);W!==null&&DD(x,P.field,W)}var V=function(ne,M){for(var de=0,k=ne.filters;de<k.length;de++){var Je=k[de];if(M.indexOf(Je.op)>=0)return Je.op}return null}(x,function(ne){switch(ne){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(P.op));if(V!==null)throw V===P.op?new B(O.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+P.op.toString()+"' filter."):new B(O.INVALID_ARGUMENT,"Invalid query. You cannot use '"+P.op.toString()+"' filters with '"+V.toString()+"' filters.")}(s,N),N}(n._query,0,r,n.firestore._databaseId,this.jc,this.Wc,this.Gc);return new Vn(n.firestore,n.converter,function(s,u){var c=s.filters.concat([u]);return new Wi(s.path,s.collectionGroup,s.explicitOrderBy.slice(),c,s.limit,s.limitType,s.startAt,s.endAt)}(n._query,i))},t}(hf),H$=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).jc=n,i.zc=r,i.type="orderBy",i}return Z(t,e),t.prototype._apply=function(n){var r=function(i,s,u){if(i.startAt!==null)throw new B(O.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new B(O.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var c=new Ha(s,u);return function(l,h){if(Gb(l)===null){var p=$b(l);p!==null&&DD(l,p,h.field)}}(i,c),c}(n._query,this.jc,this.zc);return new Vn(n.firestore,n.converter,function(i,s){var u=i.explicitOrderBy.concat([s]);return new Wi(i.path,i.collectionGroup,u,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(n._query,r))},t}(hf),_k=function(e){function t(n,r,i){var s=this;return(s=e.call(this)||this).type=n,s.Hc=r,s.Jc=i,s}return Z(t,e),t.prototype._apply=function(n){return new Vn(n.firestore,n.converter,sP(n._query,this.Hc,this.Jc))},t}(hf),wk=function(e){function t(n,r,i){var s=this;return(s=e.call(this)||this).type=n,s.Yc=r,s.Xc=i,s}return Z(t,e),t.prototype._apply=function(n){var r=PD(n,this.type,this.Yc,this.Xc);return new Vn(n.firestore,n.converter,function(i,s){return new Wi(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(n._query,r))},t}(hf),bk=function(e){function t(n,r,i){var s=this;return(s=e.call(this)||this).type=n,s.Yc=r,s.Xc=i,s}return Z(t,e),t.prototype._apply=function(n){var r=PD(n,this.type,this.Yc,this.Xc);return new Vn(n.firestore,n.converter,function(i,s){return new Wi(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(n._query,r))},t}(hf);function PD(e,t,n,r){if(n[0]=Ee(n[0]),n[0]instanceof Ol)return function(s,u,c,l,h){if(!l)throw new B(O.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+c+"().");for(var p=[],g=0,m=uu(s);g<m.length;g++){var _=m[g];if(_.field.isKeyField())p.push(Od(u,l.key));else{var b=l.data.field(_.field);if(Kb(b))throw new B(O.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+_.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(b===null){var E=_.field.canonicalString();throw new B(O.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+E+"' (used as the orderBy) does not exist.")}p.push(b)}}return new Sl(p,h)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=ia(e.firestore);return function(s,u,c,l,h,p){var g=s.explicitOrderBy;if(h.length>g.length)throw new B(O.INVALID_ARGUMENT,"Too many arguments provided to "+l+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var m=[],_=0;_<h.length;_++){var b=h[_];if(g[_].field.isKeyField()){if(typeof b!="string")throw new B(O.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+l+"(), but got a "+typeof b);if(!zb(s)&&b.indexOf("/")!==-1)throw new B(O.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+l+"() must be a plain document ID, but '"+b+"' contains a slash.");var E=s.path.child(qe.fromString(b));if(!ae.isDocumentKey(E))throw new B(O.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+l+"() must result in a valid document path, but '"+E+"' is not because it contains an odd number of segments.");var I=new ae(E);m.push(Od(u,I))}else{var N=CD(c,l,b);m.push(N)}}return new Sl(m,p)}(e._query,e.firestore._databaseId,i,t,n,r)}function Ek(e,t,n){if(typeof(n=Ee(n))=="string"){if(n==="")throw new B(O.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!zb(t)&&n.indexOf("/")!==-1)throw new B(O.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=t.path.child(qe.fromString(n));if(!ae.isDocumentKey(r))throw new B(O.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Od(e,new ae(r))}if(n instanceof ct)return Od(e,n._key);throw new B(O.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+tv(n)+".")}function Tk(e,t){if(!Array.isArray(e)||e.length===0)throw new B(O.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(e.length>10)throw new B(O.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.")}function DD(e,t,n){if(!n.isEqual(t))throw new B(O.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var R0=function(){function e(){}return e.prototype.convertValue=function(t,n){switch(n===void 0&&(n="none"),Bs(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Tt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(su(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw se()}},e.prototype.convertObject=function(t,n){var r=this,i={};return Zs(t.fields,function(s,u){i[s]=r.convertValue(u,n)}),i},e.prototype.convertGeoPoint=function(t){return new nv(Tt(t.latitude),Tt(t.longitude))},e.prototype.convertArray=function(t,n){var r=this;return(t.values||[]).map(function(i){return r.convertValue(i,n)})},e.prototype.convertServerTimestamp=function(t,n){switch(n){case"previous":var r=tP(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Tl(t));default:return null}},e.prototype.convertTimestamp=function(t){var n=Po(t);return new jn(n.seconds,n.nanos)},e.prototype.convertDocumentKey=function(t,n){var r=qe.fromString(t);ve(OP(r));var i=new Bd(r.get(1),r.get(3)),s=new ae(r.popFirst(5));return i.isEqual(n)||It("Document "+s+" contains a document reference within a different database ("+i.projectId+"/"+i.database+") which is not supported. It will be treated as a reference in the current database ("+n.projectId+"/"+n.database+") instead."),s},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iv(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var W$=function(e){function t(n){var r=this;return(r=e.call(this)||this).firestore=n,r}return Z(t,e),t.prototype.convertBytes=function(n){return new Hs(n)},t.prototype.convertReference=function(n){var r=this.convertDocumentKey(n,this.firestore._databaseId);return new ct(this.firestore,null,r)},t}(R0),G$=function(){function e(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ia(t)}return e.prototype.set=function(t,n,r){this._verifyNotCommitted();var i=mo(t,this._firestore),s=iv(i.converter,n,r),u=rv(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(u.toMutation(i._key,un.none())),this},e.prototype.update=function(t,n,r){for(var i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];this._verifyNotCommitted();var u,c=mo(t,this._firestore);return u=typeof(n=Ee(n))=="string"||n instanceof ci?A0(this._dataReader,"WriteBatch.update",c._key,n,r,i):C0(this._dataReader,"WriteBatch.update",c._key,n),this._mutations.push(u.toMutation(c._key,un.exists(!0))),this},e.prototype.delete=function(t){this._verifyNotCommitted();var n=mo(t,this._firestore);return this._mutations=this._mutations.concat(new cf(n._key,un.none())),this},e.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},e.prototype._verifyNotCommitted=function(){if(this._committed)throw new B(O.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mo(e,t){if((e=Ee(e)).firestore!==t)throw new B(O.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ps=function(e){function t(n){var r=this;return(r=e.call(this)||this).firestore=n,r}return Z(t,e),t.prototype.convertBytes=function(n){return new Hs(n)},t.prototype.convertReference=function(n){var r=this.convertDocumentKey(n,this.firestore._databaseId);return new ct(this.firestore,null,r)},t}(R0);function Ik(e,t,n){e=Ve(e,ct);var r=Ve(e.firestore,wt),i=iv(e.converter,t,n);return df(r,[rv(ia(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,un.none())])}function Sk(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];e=Ve(e,ct);var s=Ve(e.firestore,wt),u=ia(s);return df(s,[(typeof(t=Ee(t))=="string"||t instanceof ci?A0(u,"updateDoc",e._key,t,n,r):C0(u,"updateDoc",e._key,t)).toMutation(e._key,un.exists(!0))])}function xD(e){for(var t,n,r,i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];e=Ee(e);var u={includeMetadataChanges:!1},c=0;typeof i[c]!="object"||wu(i[c])||(u=i[c],c++);var l,h,p,g={includeMetadataChanges:u.includeMetadataChanges};if(wu(i[c])){var m=i[c];i[c]=(t=m.next)===null||t===void 0?void 0:t.bind(m),i[c+1]=(n=m.error)===null||n===void 0?void 0:n.bind(m),i[c+2]=(r=m.complete)===null||r===void 0?void 0:r.bind(m)}if(e instanceof ct)h=Ve(e.firestore,wt),p=xu(e._key.path),l={next:function(E){i[c]&&i[c](Y_(h,e,E))},error:i[c+1],complete:i[c+2]};else{var _=Ve(e,Vn);h=Ve(_.firestore,wt),p=_._query;var b=new Ps(h);l={next:function(E){i[c]&&i[c](new go(h,b,_,E))},error:i[c+1],complete:i[c+2]},OD(e._query)}return function(E,I,N,x){var P=this,z=new Zp(x),W=new d0(I,z,N);return E.asyncQueue.enqueueAndForget(function(){return C(P,void 0,void 0,function(){var V;return S(this,function(ne){switch(ne.label){case 0:return V=l0,[4,_u(E)];case 1:return[2,V.apply(void 0,[ne.sent(),W])]}})})}),function(){z.Wo(),E.asyncQueue.enqueueAndForget(function(){return C(P,void 0,void 0,function(){var V;return S(this,function(ne){switch(ne.label){case 0:return V=f0,[4,_u(E)];case 1:return[2,V.apply(void 0,[ne.sent(),W])]}})})})}}(jt(h),p,g,l)}function df(e,t){return function(n,r){var i=this,s=new pn;return n.asyncQueue.enqueueAndForget(function(){return C(i,void 0,void 0,function(){var u;return S(this,function(c){switch(c.label){case 0:return u=i$,[4,E0(n)];case 1:return[2,u.apply(void 0,[c.sent(),r,s])]}})})}),s.promise}(jt(e),t)}function Y_(e,t,n){var r=n.docs.get(t._key),i=new Ps(e);return new Fi(e,i,t._key,r,new Is(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $$=function(e){function t(n,r){var i=this;return(i=e.call(this,n,r)||this)._firestore=n,i}return Z(t,e),t.prototype.get=function(n){var r=this,i=mo(n,this._firestore),s=new Ps(this._firestore);return e.prototype.get.call(this,n).then(function(u){return new Fi(r._firestore,s,i._key,u._document,new Is(!1,!1),i.converter)})},t}(function(){function e(t,n){this._firestore=t,this._transaction=n,this._dataReader=ia(t)}return e.prototype.get=function(t){var n=this,r=mo(t,this._firestore),i=new W$(this._firestore);return this._transaction.lookup([r._key]).then(function(s){if(!s||s.length!==1)return se();var u=s[0];if(u.isFoundDocument())return new Ol(n._firestore,i,u.key,u,r.converter);if(u.isNoDocument())return new Ol(n._firestore,i,r._key,null,r.converter);throw se()})},e.prototype.set=function(t,n,r){var i=mo(t,this._firestore),s=iv(i.converter,n,r),u=rv(this._dataReader,"Transaction.set",i._key,s,i.converter!==null,r);return this._transaction.set(i._key,u),this},e.prototype.update=function(t,n,r){for(var i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];var u,c=mo(t,this._firestore);return u=typeof(n=Ee(n))=="string"||n instanceof ci?A0(this._dataReader,"Transaction.update",c._key,n,r,i):C0(this._dataReader,"Transaction.update",c._key,n),this._transaction.update(c._key,u),this},e.prototype.delete=function(t){var n=mo(t,this._firestore);return this._transaction.delete(n._key),this},e}());/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ck(){if(typeof Uint8Array>"u")throw new B(O.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Ak(){if(typeof atob>"u")throw new B(O.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var LD=function(){function e(t){this._delegate=t}return e.fromBase64String=function(t){return Ak(),new e(Hs.fromBase64String(t))},e.fromUint8Array=function(t){return Ck(),new e(Hs.fromUint8Array(t))},e.prototype.toBase64=function(){return Ak(),this._delegate.toBase64()},e.prototype.toUint8Array=function(){return Ck(),this._delegate.toUint8Array()},e.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(),z$=function(){function e(){}return e.prototype.enableIndexedDbPersistence=function(t,n){return function(r,i){yk(r=Ve(r,wt));var s=jt(r),u=r._freezeSettings(),c=new z_;return mk(s,c,new dD(c,u.cacheSizeBytes,i==null?void 0:i.forceOwnership))}(t._delegate,{forceOwnership:n})},e.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(n){yk(n=Ve(n,wt));var r=jt(n),i=n._freezeSettings(),s=new z_;return mk(r,s,new w$(s,i.cacheSizeBytes))}(t._delegate)},e.prototype.clearIndexedDbPersistence=function(t){return function(n){var r=this;if(n._initialized&&!n._terminated)throw new B(O.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var i=new pn;return n._queue.enqueueAndForgetEvenWhileRestricted(function(){return C(r,void 0,void 0,function(){var s;return S(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,function(c){return C(this,void 0,void 0,function(){var l;return S(this,function(h){switch(h.label){case 0:return du.yt()?(l=c+"main",[4,du.delete(l)]):[2,Promise.resolve()];case 1:return h.sent(),[2]}})})}(i0(n._databaseId,n._persistenceKey))];case 1:return u.sent(),i.resolve(),[3,3];case 2:return s=u.sent(),i.reject(s),[3,3];case 3:return[2]}})})}),i.promise}(t._delegate)},e}(),O0=function(){function e(t,n,r){var i=this;this._delegate=n,this.Zc=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof Bd||(this.tu=t)}return Object.defineProperty(e.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){var n=this._delegate._getSettings();t.merge||n.host===t.host||El("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},n),t)).merge,this._delegate._setSettings(t)},e.prototype.useEmulator=function(t,n,r){r===void 0&&(r={}),function(i,s,u,c){var l;c===void 0&&(c={});var h=(i=Ve(i,Rl))._getSettings();if(h.host!=="firestore.googleapis.com"&&h.host!==s&&El("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},h),{host:s+":"+u,ssl:!1})),c.mockUserToken){var p,g;if(typeof c.mockUserToken=="string")p=c.mockUserToken,g=zt.MOCK_USER;else{p=Rw(c.mockUserToken,(l=i._app)===null||l===void 0?void 0:l.options.projectId);var m=c.mockUserToken.sub||c.mockUserToken.user_id;if(!m)throw new B(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new zt(m)}i._credentials=new C$(new gD(p,g))}}(this._delegate,t,n,r)},e.prototype.enableNetwork=function(){return function(t){var n=this;return t.asyncQueue.enqueue(function(){return C(n,void 0,void 0,function(){var r,i;return S(this,function(s){switch(s.label){case 0:return[4,ak(t)];case 1:return r=s.sent(),[4,uk(t)];case 2:return i=s.sent(),[2,(r.setNetworkEnabled(!0),function(u){var c=J(u);return c.Or.delete(0),ff(c)}(i))]}})})})}(jt(Ve(this._delegate,wt)))},e.prototype.disableNetwork=function(){return function(t){var n=this;return t.asyncQueue.enqueue(function(){return C(n,void 0,void 0,function(){var r,i;return S(this,function(s){switch(s.label){case 0:return[4,ak(t)];case 1:return r=s.sent(),[4,uk(t)];case 2:return i=s.sent(),[2,(r.setNetworkEnabled(!1),function(u){return C(this,void 0,void 0,function(){var c;return S(this,function(l){switch(l.label){case 0:return(c=J(u)).Or.add(0),[4,Mu(c)];case 1:return l.sent(),c.Br.set("Offline"),[2]}})})}(i))]}})})})}(jt(Ve(this._delegate,wt)))},e.prototype.enablePersistence=function(t){var n=!1,r=!1;return t&&mD("synchronizeTabs",n=!!t.synchronizeTabs,"experimentalForceOwningTab",r=!!t.experimentalForceOwningTab),n?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,r)},e.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var n=this,r=new pn;return t.asyncQueue.enqueueAndForget(function(){return C(n,void 0,void 0,function(){var i;return S(this,function(s){switch(s.label){case 0:return i=u$,[4,E0(t)];case 1:return[2,i.apply(void 0,[s.sent(),r])]}})})}),r.promise}(jt(Ve(this._delegate,wt)))},e.prototype.onSnapshotsInSync=function(t){return function(n,r){return function(i,s){var u=this,c=new Zp(s);return i.asyncQueue.enqueueAndForget(function(){return C(u,void 0,void 0,function(){var l;return S(this,function(h){switch(h.label){case 0:return l=function(p,g){J(p).Gr.add(g),g.next()},[4,_u(i)];case 1:return[2,l.apply(void 0,[h.sent(),c])]}})})}),function(){c.Wo(),i.asyncQueue.enqueueAndForget(function(){return C(u,void 0,void 0,function(){var l;return S(this,function(h){switch(h.label){case 0:return l=function(p,g){J(p).Gr.delete(g)},[4,_u(i)];case 1:return[2,l.apply(void 0,[h.sent(),c])]}})})})}}(jt(n=Ve(n,wt)),wu(r)?r:{next:r})}(this._delegate,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.tu)throw new B(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new Hd(this,yD(this._delegate,t))}catch(n){throw En(n,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new Ds(this,Jh(this._delegate,t))}catch(n){throw En(n,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new pf(this,function(n,r){if(n=Ve(n,Rl),T0("collectionGroup","collection id",r),r.indexOf("/")>=0)throw new B(O.INVALID_ARGUMENT,"Invalid collection ID '"+r+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Vn(n,null,function(i){return new Wi(qe.emptyPath(),i)}(r))}(this._delegate,t))}catch(n){throw En(n,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var n=this;return function(r,i){return function(s,u){var c=this,l=new pn;return s.asyncQueue.enqueueAndForget(function(){return C(c,void 0,void 0,function(){var h;return S(this,function(p){switch(p.label){case 0:return[4,function(g){return ev(g).then(function(m){return m.datastore})}(s)];case 1:return h=p.sent(),new T$(s.asyncQueue,h,u,l).run(),[2]}})})}),l.promise}(jt(r),function(s){return i(new $$(r,s))})}(this._delegate,function(r){return t(new MD(n,r))})},e.prototype.batch=function(){var t=this;return jt(this._delegate),new FD(new G$(this._delegate,function(n){return df(t._delegate,n)}))},e.prototype.loadBundle=function(t){throw new B(O.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new B(O.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(),ov=function(e){function t(n){var r=this;return(r=e.call(this)||this).firestore=n,r}return Z(t,e),t.prototype.convertBytes=function(n){return new LD(new Hs(n))},t.prototype.convertReference=function(n){var r=this.convertDocumentKey(n,this.firestore._databaseId);return Ds.eu(r,this.firestore,null)},t}(R0);function Q$(e){var t;t=e,Kr.setLogLevel(t)}var MD=function(){function e(t,n){this._firestore=t,this._delegate=n,this._userDataWriter=new ov(t)}return e.prototype.get=function(t){var n=this,r=Ss(t);return this._delegate.get(r).then(function(i){return new Pl(n._firestore,new Fi(n._firestore._delegate,n._userDataWriter,i._key,i._document,i.metadata,r.converter))})},e.prototype.set=function(t,n,r){var i=Ss(t);return r?(I0("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this},e.prototype.update=function(t,n,r){for(var i,s=[],u=3;u<arguments.length;u++)s[u-3]=arguments[u];var c=Ss(t);return arguments.length===2?this._delegate.update(c,n):(i=this._delegate).update.apply(i,Ie([c,n,r],s)),this},e.prototype.delete=function(t){var n=Ss(t);return this._delegate.delete(n),this},e}(),FD=function(){function e(t){this._delegate=t}return e.prototype.set=function(t,n,r){var i=Ss(t);return r?(I0("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this},e.prototype.update=function(t,n,r){for(var i,s=[],u=3;u<arguments.length;u++)s[u-3]=arguments[u];var c=Ss(t);return arguments.length===2?this._delegate.update(c,n):(i=this._delegate).update.apply(i,Ie([c,n,r],s)),this},e.prototype.delete=function(t){var n=Ss(t);return this._delegate.delete(n),this},e.prototype.commit=function(){return this._delegate.commit()},e}(),sv=function(){function e(t,n,r){this._firestore=t,this._userDataWriter=n,this._delegate=r}return e.prototype.fromFirestore=function(t,n){var r=new el(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Dl(this._firestore,r),n??{})},e.prototype.toFirestore=function(t,n){return n?this._delegate.toFirestore(t,n):this._delegate.toFirestore(t)},e.nu=function(t,n){var r=e.su,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var s=i.get(n);return s||(s=new e(t,new ov(t),n),i.set(n,s)),s},e}();sv.su=new WeakMap;var Ds=function(){function e(t,n){this.firestore=t,this._delegate=n,this._userDataWriter=new ov(t)}return e.iu=function(t,n,r){if(t.length%2!=0)throw new B(O.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new e(n,new ct(n._delegate,r,new ae(t)))},e.eu=function(t,n,r){return new e(n,new ct(n._delegate,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Hd(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new Hd(this.firestore,yD(this._delegate,t))}catch(n){throw En(n,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return(t=Ee(t))instanceof ct&&_D(this._delegate,t)},e.prototype.set=function(t,n){n=I0("DocumentReference.set",n);try{return n?Ik(this._delegate,t,n):Ik(this._delegate,t)}catch(r){throw En(r,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];try{return arguments.length===1?Sk(this._delegate,t):Sk.apply(void 0,Ie([this._delegate,t,n],r))}catch(s){throw En(s,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return df(Ve((t=this._delegate).firestore,wt),[new cf(t._key,un.none())]);var t},e.prototype.onSnapshot=function(){for(var t=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=UD(n),s=jD(n,function(u){return new Pl(t.firestore,new Fi(t.firestore._delegate,t._userDataWriter,u._key,u._document,u.metadata,t._delegate.converter))});return xD(this._delegate,i,s)},e.prototype.get=function(t){var n=this;return((t==null?void 0:t.source)==="cache"?function(r){r=Ve(r,ct);var i=Ve(r.firestore,wt),s=jt(i),u=new Ps(i);return function(c,l){var h=this,p=new pn;return c.asyncQueue.enqueueAndForget(function(){return C(h,void 0,void 0,function(){var g;return S(this,function(m){switch(m.label){case 0:return g=function(_,b,E){return C(this,void 0,void 0,function(){var I,N;return S(this,function(x){switch(x.label){case 0:return x.trys.push([0,2,,3]),[4,function(P,z){var W=J(P);return W.persistence.runTransaction("read document","readonly",function(V){return W.Mn.mn(V,z)})}(_,b)];case 1:return(N=x.sent()).isFoundDocument()?E.resolve(N):N.isNoDocument()?E.resolve(null):E.reject(new B(O.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return I=x.sent(),N=ju(I,"Failed to get document '"+b+" from cache"),E.reject(N),[3,3];case 3:return[2]}})})},[4,b0(c)];case 1:return[2,g.apply(void 0,[m.sent(),l,p])]}})})}),p.promise}(s,r._key).then(function(c){return new Fi(i,u,r._key,c,new Is(c!==null&&c.hasLocalMutations,!0),r.converter)})}(this._delegate):(t==null?void 0:t.source)==="server"?function(r){r=Ve(r,ct);var i=Ve(r.firestore,wt);return ck(jt(i),r._key,{source:"server"}).then(function(s){return Y_(i,r,s)})}(this._delegate):function(r){r=Ve(r,ct);var i=Ve(r.firestore,wt);return ck(jt(i),r._key).then(function(s){return Y_(i,r,s)})}(this._delegate)).then(function(r){return new Pl(n.firestore,new Fi(n.firestore._delegate,n._userDataWriter,r._key,r._document,r.metadata,n._delegate.converter))})},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(sv.nu(this.firestore,t)):this._delegate.withConverter(null))},e}();function En(e,t,n){return e.message=e.message.replace(t,n),e}function UD(e){for(var t=0,n=e;t<n.length;t++){var r=n[t];if(typeof r=="object"&&!wu(r))return r}return{}}function jD(e,t){var n,r,i;return{next:function(s){i.next&&i.next(t(s))},error:(n=(i=wu(e[0])?e[0]:wu(e[1])?e[1]:typeof e[0]=="function"?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var Pl=function(){function e(t,n){this._firestore=t,this._delegate=n}return Object.defineProperty(e.prototype,"ref",{get:function(){return new Ds(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this._delegate.data(t)},e.prototype.get=function(t,n){return this._delegate.get(t,n)},e.prototype.isEqual=function(t){return RD(this._delegate,t._delegate)},e}(),Dl=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Z(t,e),t.prototype.data=function(n){return this._delegate.data(n)},t}(Pl),pf=function(){function e(t,n){this.firestore=t,this._delegate=n,this._userDataWriter=new ov(t)}return e.prototype.where=function(t,n,r){try{return new e(this.firestore,uo(this._delegate,function(i,s,u){var c=s,l=Kd("where",i);return new K$(l,c,u)}(t,n,r)))}catch(i){throw En(i,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,uo(this._delegate,function(r,i){i===void 0&&(i="asc");var s=i,u=Kd("orderBy",r);return new H$(u,s)}(t,n)))}catch(r){throw En(r,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,uo(this._delegate,function(n){return vk("limit",n),new _k("limit",n,"F")}(t)))}catch(n){throw En(n,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,uo(this._delegate,function(n){return vk("limitToLast",n),new _k("limitToLast",n,"L")}(t)))}catch(n){throw En(n,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,uo(this._delegate,function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new wk("startAt",r,!0)}.apply(void 0,t)))}catch(r){throw En(r,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,uo(this._delegate,function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new wk("startAfter",r,!1)}.apply(void 0,t)))}catch(r){throw En(r,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,uo(this._delegate,function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new bk("endBefore",r,!0)}.apply(void 0,t)))}catch(r){throw En(r,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,uo(this._delegate,function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new bk("endAt",r,!1)}.apply(void 0,t)))}catch(r){throw En(r,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return wD(this._delegate,t._delegate)},e.prototype.get=function(t){var n=this;return((t==null?void 0:t.source)==="cache"?function(r){r=Ve(r,Vn);var i=Ve(r.firestore,wt),s=jt(i),u=new Ps(i);return function(c,l){var h=this,p=new pn;return c.asyncQueue.enqueueAndForget(function(){return C(h,void 0,void 0,function(){var g;return S(this,function(m){switch(m.label){case 0:return g=function(_,b,E){return C(this,void 0,void 0,function(){var I,N,x,P,z;return S(this,function(W){switch(W.label){case 0:return W.trys.push([0,2,,3]),[4,Ud(_,b,!0)];case 1:return z=W.sent(),I=new uD(b,z.Bn),N=I._o(z.documents),x=I.applyChanges(N,!1),E.resolve(x.snapshot),[3,3];case 2:return P=W.sent(),z=ju(P,"Failed to execute query '"+b+" against cache"),E.reject(z),[3,3];case 3:return[2]}})})},[4,b0(c)];case 1:return[2,g.apply(void 0,[m.sent(),l,p])]}})})}),p.promise}(s,r._query).then(function(c){return new go(i,u,r,c)})}(this._delegate):(t==null?void 0:t.source)==="server"?function(r){r=Ve(r,Vn);var i=Ve(r.firestore,wt),s=jt(i),u=new Ps(i);return lk(s,r._query,{source:"server"}).then(function(c){return new go(i,u,r,c)})}(this._delegate):function(r){r=Ve(r,Vn);var i=Ve(r.firestore,wt),s=jt(i),u=new Ps(i);return OD(r._query),lk(s,r._query).then(function(c){return new go(i,u,r,c)})}(this._delegate)).then(function(r){return new X_(n.firestore,new go(n.firestore._delegate,n._userDataWriter,n._delegate,r._snapshot))})},e.prototype.onSnapshot=function(){for(var t=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=UD(n),s=jD(n,function(u){return new X_(t.firestore,new go(t.firestore._delegate,t._userDataWriter,t._delegate,u._snapshot))});return xD(this._delegate,i,s)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(sv.nu(this.firestore,t)):this._delegate.withConverter(null))},e}(),Y$=function(){function e(t,n){this._firestore=t,this._delegate=n}return Object.defineProperty(e.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new Dl(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),e}(),X_=function(){function e(t,n){this._firestore=t,this._delegate=n}return Object.defineProperty(e.prototype,"query",{get:function(){return new pf(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(n){return new Dl(t._firestore,n)})},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var n=this;return this._delegate.docChanges(t).map(function(r){return new Y$(n._firestore,r)})},e.prototype.forEach=function(t,n){var r=this;this._delegate.forEach(function(i){t.call(n,new Dl(r._firestore,i))})},e.prototype.isEqual=function(t){return RD(this._delegate,t._delegate)},e}(),Hd=function(e){function t(n,r){var i=this;return(i=e.call(this,n,r)||this).firestore=n,i._delegate=r,i}return Z(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var n=this._delegate.parent;return n?new Ds(this.firestore,n):null},enumerable:!1,configurable:!0}),t.prototype.doc=function(n){try{return new Ds(this.firestore,n===void 0?Jh(this._delegate):Jh(this._delegate,n))}catch(r){throw En(r,"doc()","CollectionReference.doc()")}},t.prototype.add=function(n){var r=this;return function(i,s){var u=Ve(i.firestore,wt),c=Jh(i),l=iv(i.converter,s);return df(u,[rv(ia(i.firestore),"addDoc",c._key,l,i.converter!==null,{}).toMutation(c._key,un.exists(!1))]).then(function(){return c})}(this._delegate,n).then(function(i){return new Ds(r.firestore,i)})},t.prototype.isEqual=function(n){return _D(this._delegate,n._delegate)},t.prototype.withConverter=function(n){return new t(this.firestore,n?this._delegate.withConverter(sv.nu(this.firestore,n)):this._delegate.withConverter(null))},t}(pf);function Ss(e){return Ve(e,ct)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var X$=function(){function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._delegate=new(ci.bind.apply(ci,Ie([void 0],t)))}return e.documentId=function(){return new e(Wr.keyField().canonicalString())},e.prototype.isEqual=function(t){return(t=Ee(t))instanceof ci&&this._delegate._internalPath.isEqual(t._internalPath)},e}(),J$=function(){function e(t){this._delegate=t}return e.serverTimestamp=function(){var t=new M$("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new S0("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return new F$("arrayUnion",i)}.apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return new U$("arrayRemove",i)}.apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(r){return new j$("increment",r)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z$(e){return function(t,n){var r=jt(t=Ve(t,wt)),i=new O$;return function(s,u,c,l){var h=this,p=function(g,m){return function(_,b){return new b$(_,b)}(function(_,b){if(_ instanceof Uint8Array)return sk(_,b);if(_ instanceof ArrayBuffer)return sk(new Uint8Array(_),b);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(typeof g=="string"?new TextEncoder().encode(g):g),m)}(c,lf(u));s.asyncQueue.enqueueAndForget(function(){return C(h,void 0,void 0,function(){var g;return S(this,function(m){switch(m.label){case 0:return g=_$,[4,E0(s)];case 1:return g.apply(void 0,[m.sent(),p,l]),[2]}})})})}(r,t._databaseId,n,i),i}(this._delegate,e)}function e6(e){var t,n,r=this;return(t=this._delegate,n=e,function(i,s){var u=this;return i.asyncQueue.enqueue(function(){return C(u,void 0,void 0,function(){var c;return S(this,function(l){switch(l.label){case 0:return c=function(h,p){var g=J(h);return g.persistence.runTransaction("Get named query","readonly",function(m){return g.Ke.getNamedQuery(m,p)})},[4,b0(i)];case 1:return[2,c.apply(void 0,[l.sent(),s])]}})})})}(jt(t=Ve(t,wt)),n).then(function(i){return i?new Vn(t,null,i.query):null})).then(function(i){return i?new pf(r,i):null})}var t6={Firestore:O0,GeoPoint:nv,Timestamp:jn,Blob:LD,Transaction:MD,WriteBatch:FD,DocumentReference:Ds,DocumentSnapshot:Pl,Query:pf,QueryDocumentSnapshot:Dl,QuerySnapshot:X_,CollectionReference:Hd,FieldPath:X$,FieldValue:J$,setLogLevel:Q$,CACHE_SIZE_UNLIMITED:P$};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n6(e){(function(t,n){t.INTERNAL.registerComponent(new dn("firestore",function(r){var i=r.getProvider("app").getImmediate();return n(i,r.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},t6)))})(e,function(t,n){return new O0(t,new wt(t,n),new z$)}),e.registerVersion("@firebase/firestore","2.4.1")}n6(oe);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r6(e){e.prototype.loadBundle=Z$,e.prototype.namedQuery=e6}r6(O0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kk={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Wa=function(e){Z(t,e);function t(n,r,i){var s=e.call(this,r)||this;return Object.setPrototypeOf(s,t.prototype),s.code=n,s.details=i,s}return t}(Error);function i6(e){if(e>=200&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function o6(e,t,n){var r=i6(e),i=r,s=void 0;try{var u=t&&t.error;if(u){var c=u.status;if(typeof c=="string"){if(!kk[c])return new Wa("internal","internal");r=kk[c],i=c}var l=u.message;typeof l=="string"&&(i=l),s=u.details,s!==void 0&&(s=n.decode(s))}}catch{}return r==="ok"?null:new Wa(r,i,s)}var s6=function(){function e(t,n){var r=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||t.get().then(function(i){return r.auth=i},function(){}),this.messaging||n.get().then(function(i){return r.messaging=i},function(){})}return e.prototype.getAuthToken=function(){return C(this,void 0,void 0,function(){var t;return S(this,function(n){switch(n.label){case 0:if(!this.auth)return[2,void 0];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return t=n.sent(),t?[2,t.accessToken]:[2,void 0];case 3:return n.sent(),[2,void 0];case 4:return[2]}})})},e.prototype.getInstanceIdToken=function(){return C(this,void 0,void 0,function(){return S(this,function(t){switch(t.label){case 0:if(!this.messaging||!("Notification"in self)||Notification.permission!=="granted")return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.messaging.getToken()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,void 0];case 4:return[2]}})})},e.prototype.getContext=function(){return C(this,void 0,void 0,function(){var t,n;return S(this,function(r){switch(r.label){case 0:return[4,this.getAuthToken()];case 1:return t=r.sent(),[4,this.getInstanceIdToken()];case 2:return n=r.sent(),[2,{authToken:t,instanceIdToken:n}]}})})},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var a6="type.googleapis.com/google.protobuf.Int64Value",u6="type.googleapis.com/google.protobuf.UInt64Value";function Nk(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r]));return n}var c6=function(){function e(){}return e.prototype.encode=function(t){var n=this;if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(function(r){return n.encode(r)});if(typeof t=="function"||typeof t=="object")return Nk(t,function(r){return n.encode(r)});throw new Error("Data cannot be encoded in JSON: "+t)},e.prototype.decode=function(t){var n=this;if(t==null)return t;if(t["@type"])switch(t["@type"]){case a6:case u6:{var r=Number(t.value);if(isNaN(r))throw new Error("Data cannot be decoded from JSON: "+t);return r}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(function(i){return n.decode(i)}):typeof t=="function"||typeof t=="object"?Nk(t,function(i){return n.decode(i)}):t},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l6(e){var t,n=new Promise(function(r,i){t=setTimeout(function(){i(new Wa("deadline-exceeded","deadline-exceeded"))},e)});return{timer:t,promise:n}}var Rk=function(){function e(t,n,r,i,s,u){var c=this;s===void 0&&(s="us-central1"),this.app_=t,this.appCheckProvider=i,this.fetchImpl=u,this.serializer=new c6,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(c.deleteService())}},this.contextProvider=new s6(n,r),this.cancelAllRequests=new Promise(function(h){c.deleteService=function(){return h()}});try{var l=new URL(s);this.customDomain=l.origin,this.region="us-central1"}catch{this.customDomain=null,this.region=s}}return Object.defineProperty(e.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),e.prototype._url=function(t){var n=this.app_.options.projectId;if(this.emulatorOrigin!==null){var r=this.emulatorOrigin;return r+"/"+n+"/"+this.region+"/"+t}return this.customDomain!==null?this.customDomain+"/"+t:"https://"+this.region+"-"+n+".cloudfunctions.net/"+t},e.prototype.useEmulator=function(t,n){this.emulatorOrigin="http://"+t+":"+n},e.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},e.prototype.httpsCallable=function(t,n){var r=this;return function(i){return r.call(t,i,n||{})}},e.prototype.postJSON=function(t,n,r){return C(this,void 0,void 0,function(){var i,s,u;return S(this,function(c){switch(c.label){case 0:return r["Content-Type"]="application/json",[4,this.getAppCheckToken()];case 1:i=c.sent(),i!==null&&(r["X-Firebase-AppCheck"]=i),c.label=2;case 2:return c.trys.push([2,4,,5]),[4,this.fetchImpl(t,{method:"POST",body:JSON.stringify(n),headers:r})];case 3:return s=c.sent(),[3,5];case 4:return c.sent(),[2,{status:0,json:null}];case 5:u=null,c.label=6;case 6:return c.trys.push([6,8,,9]),[4,s.json()];case 7:return u=c.sent(),[3,9];case 8:return c.sent(),[3,9];case 9:return[2,{status:s.status,json:u}]}})})},e.prototype.getAppCheckToken=function(){return C(this,void 0,void 0,function(){var t,n;return S(this,function(r){switch(r.label){case 0:return t=this.appCheckProvider.getImmediate({optional:!0}),t?[4,t.getToken()]:[3,2];case 1:return n=r.sent(),[2,n.token];case 2:return[2,null]}})})},e.prototype.call=function(t,n,r){return C(this,void 0,void 0,function(){var i,s,u,c,l,h,p,g,m,_,b,E;return S(this,function(I){switch(I.label){case 0:return i=this._url(t),n=this.serializer.encode(n),s={data:n},u={},[4,this.contextProvider.getContext()];case 1:return c=I.sent(),c.authToken&&(u.Authorization="Bearer "+c.authToken),c.instanceIdToken&&(u["Firebase-Instance-ID-Token"]=c.instanceIdToken),l=r.timeout||7e4,h=l6(l),p=h.timer,g=h.promise,[4,Promise.race([Ok(p,this.postJSON(i,s,u)),g,Ok(p,this.cancelAllRequests)])];case 2:if(m=I.sent(),!m)throw new Wa("cancelled","Firebase Functions instance was deleted.");if(_=o6(m.status,m.json,this.serializer),_)throw _;if(!m.json)throw new Wa("internal","Response is not valid JSON object.");if(b=m.json.data,typeof b>"u"&&(b=m.json.result),typeof b>"u")throw new Wa("internal","Response is missing data field.");return E=this.serializer.decode(b),[2,{data:E}]}})})},e}();function Ok(e,t){return C(this,void 0,void 0,function(){var n;return S(this,function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),clearTimeout(e),[2,n]}})})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var f6="functions";function h6(e,t){var n={Functions:Rk};function r(i,s){var u=s.instanceIdentifier,c=i.getProvider("app").getImmediate(),l=i.getProvider("auth-internal"),h=i.getProvider("app-check-internal"),p=i.getProvider("messaging");return new Rk(c,l,p,h,u,t)}e.INTERNAL.registerComponent(new dn(f6,r,"PUBLIC").setServiceProps(n).setMultipleInstances(!0))}var d6="@firebase/functions",p6="0.6.16";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */h6(oe,fetch.bind(self));oe.registerVersion(d6,p6);function v6(e){return Array.prototype.slice.call(e)}function VD(e){return new Promise(function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function av(e,t,n){var r,i=new Promise(function(s,u){r=e[t].apply(e,n),VD(r).then(s,u)});return i.request=r,i}function g6(e,t,n){var r=av(e,t,n);return r.then(function(i){if(i)return new xl(i,r.request)})}function Vu(e,t,n){n.forEach(function(r){Object.defineProperty(e.prototype,r,{get:function(){return this[t][r]},set:function(i){this[t][r]=i}})})}function P0(e,t,n,r){r.forEach(function(i){i in n.prototype&&(e.prototype[i]=function(){return av(this[t],i,arguments)})})}function uv(e,t,n,r){r.forEach(function(i){i in n.prototype&&(e.prototype[i]=function(){return this[t][i].apply(this[t],arguments)})})}function BD(e,t,n,r){r.forEach(function(i){i in n.prototype&&(e.prototype[i]=function(){return g6(this[t],i,arguments)})})}function sa(e){this._index=e}Vu(sa,"_index",["name","keyPath","multiEntry","unique"]);P0(sa,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]);BD(sa,"_index",IDBIndex,["openCursor","openKeyCursor"]);function xl(e,t){this._cursor=e,this._request=t}Vu(xl,"_cursor",["direction","key","primaryKey","value"]);P0(xl,"_cursor",IDBCursor,["update","delete"]);["advance","continue","continuePrimaryKey"].forEach(function(e){e in IDBCursor.prototype&&(xl.prototype[e]=function(){var t=this,n=arguments;return Promise.resolve().then(function(){return t._cursor[e].apply(t._cursor,n),VD(t._request).then(function(r){if(r)return new xl(r,t._request)})})})});function yi(e){this._store=e}yi.prototype.createIndex=function(){return new sa(this._store.createIndex.apply(this._store,arguments))};yi.prototype.index=function(){return new sa(this._store.index.apply(this._store,arguments))};Vu(yi,"_store",["name","keyPath","indexNames","autoIncrement"]);P0(yi,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]);BD(yi,"_store",IDBObjectStore,["openCursor","openKeyCursor"]);uv(yi,"_store",IDBObjectStore,["deleteIndex"]);function vf(e){this._tx=e,this.complete=new Promise(function(t,n){e.oncomplete=function(){t()},e.onerror=function(){n(e.error)},e.onabort=function(){n(e.error)}})}vf.prototype.objectStore=function(){return new yi(this._tx.objectStore.apply(this._tx,arguments))};Vu(vf,"_tx",["objectStoreNames","mode"]);uv(vf,"_tx",IDBTransaction,["abort"]);function cv(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new vf(n)}cv.prototype.createObjectStore=function(){return new yi(this._db.createObjectStore.apply(this._db,arguments))};Vu(cv,"_db",["name","version","objectStoreNames"]);uv(cv,"_db",IDBDatabase,["deleteObjectStore","close"]);function lv(e){this._db=e}lv.prototype.transaction=function(){return new vf(this._db.transaction.apply(this._db,arguments))};Vu(lv,"_db",["name","version","objectStoreNames"]);uv(lv,"_db",IDBDatabase,["close"]);["openCursor","openKeyCursor"].forEach(function(e){[yi,sa].forEach(function(t){e in t.prototype&&(t.prototype[e.replace("open","iterate")]=function(){var n=v6(arguments),r=n[n.length-1],i=this._store||this._index,s=i[e].apply(i,n.slice(0,-1));s.onsuccess=function(){r(s.result)}})})});[sa,yi].forEach(function(e){e.prototype.getAll||(e.prototype.getAll=function(t,n){var r=this,i=[];return new Promise(function(s){r.iterateCursor(t,function(u){if(!u){s(i);return}if(i.push(u.value),n!==void 0&&i.length==n){s(i);return}u.continue()})})})});function D0(e,t,n){var r=av(indexedDB,"open",[e,t]),i=r.request;return i&&(i.onupgradeneeded=function(s){n&&n(new cv(i.result,s.oldVersion,i.transaction))}),r.then(function(s){return new lv(s)})}function Ey(e){return av(indexedDB,"deleteDatabase",[e])}var m6="@firebase/installations",qD="0.4.32";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var KD=1e4,HD="w:"+qD,WD="FIS_v2",y6="https://firebaseinstallations.googleapis.com/v1",_6=60*60*1e3,w6="installations",b6="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var co,E6=(co={},co["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',co["not-registered"]="Firebase Installation is not registered.",co["installation-not-found"]="Firebase Installation not found.",co["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',co["app-offline"]="Could not process request. Application offline.",co["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",co),Bi=new Hi(w6,b6,E6);function GD(e){return e instanceof Cu&&e.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x0(e){var t=e.projectId;return y6+"/projects/"+t+"/installations"}function $D(e){return{token:e.token,requestStatus:2,expiresIn:T6(e.expiresIn),creationTime:Date.now()}}function L0(e,t){return C(this,void 0,void 0,function(){var n,r;return S(this,function(i){switch(i.label){case 0:return[4,t.json()];case 1:return n=i.sent(),r=n.error,[2,Bi.create("request-failed",{requestName:e,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}})})}function zD(e){var t=e.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function QD(e,t){var n=t.refreshToken,r=zD(e);return r.append("Authorization",I6(n)),r}function M0(e){return C(this,void 0,void 0,function(){var t;return S(this,function(n){switch(n.label){case 0:return[4,e()];case 1:return t=n.sent(),t.status>=500&&t.status<600?[2,e()]:[2,t]}})})}function T6(e){return Number(e.replace("s","000"))}function I6(e){return WD+" "+e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S6(e,t){var n=t.fid;return C(this,void 0,void 0,function(){var r,i,s,u,c,l,h;return S(this,function(p){switch(p.label){case 0:return r=x0(e),i=zD(e),s={fid:n,authVersion:WD,appId:e.appId,sdkVersion:HD},u={method:"POST",headers:i,body:JSON.stringify(s)},[4,M0(function(){return fetch(r,u)})];case 1:return c=p.sent(),c.ok?[4,c.json()]:[3,3];case 2:return l=p.sent(),h={fid:l.fid||n,registrationStatus:2,refreshToken:l.refreshToken,authToken:$D(l.authToken)},[2,h];case 3:return[4,L0("Create Installation",c)];case 4:throw p.sent()}})})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YD(e){return new Promise(function(t){setTimeout(t,e)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C6(e){var t=btoa(String.fromCharCode.apply(String,Ie([],Yt(e))));return t.replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var A6=/^[cdef][\w-]{21}$/,J_="";function k6(){try{var e=new Uint8Array(17),t=self.crypto||self.msCrypto;t.getRandomValues(e),e[0]=112+e[0]%16;var n=N6(e);return A6.test(n)?n:J_}catch{return J_}}function N6(e){var t=C6(e);return t.substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bu(e){return e.appName+"!"+e.appId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bu=new Map;function XD(e,t){var n=Bu(e);JD(n,t),P6(n,t)}function R6(e,t){ZD();var n=Bu(e),r=bu.get(n);r||(r=new Set,bu.set(n,r)),r.add(t)}function O6(e,t){var n=Bu(e),r=bu.get(n);r&&(r.delete(t),r.size===0&&bu.delete(n),ex())}function JD(e,t){var n,r,i=bu.get(e);if(i)try{for(var s=Kt(i),u=s.next();!u.done;u=s.next()){var c=u.value;c(t)}}catch(l){n={error:l}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}function P6(e,t){var n=ZD();n&&n.postMessage({key:e,fid:t}),ex()}var Cs=null;function ZD(){return!Cs&&"BroadcastChannel"in self&&(Cs=new BroadcastChannel("[Firebase] FID Change"),Cs.onmessage=function(e){JD(e.data.key,e.data.fid)}),Cs}function ex(){bu.size===0&&Cs&&(Cs.close(),Cs=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var D6="firebase-installations-database",x6=1,Ws="firebase-installations-store",Ty=null;function F0(){return Ty||(Ty=D0(D6,x6,function(e){switch(e.oldVersion){case 0:e.createObjectStore(Ws)}})),Ty}function Wd(e,t){return C(this,void 0,void 0,function(){var n,r,i,s,u;return S(this,function(c){switch(c.label){case 0:return n=Bu(e),[4,F0()];case 1:return r=c.sent(),i=r.transaction(Ws,"readwrite"),s=i.objectStore(Ws),[4,s.get(n)];case 2:return u=c.sent(),[4,s.put(t,n)];case 3:return c.sent(),[4,i.complete];case 4:return c.sent(),(!u||u.fid!==t.fid)&&XD(e,t.fid),[2,t]}})})}function U0(e){return C(this,void 0,void 0,function(){var t,n,r;return S(this,function(i){switch(i.label){case 0:return t=Bu(e),[4,F0()];case 1:return n=i.sent(),r=n.transaction(Ws,"readwrite"),[4,r.objectStore(Ws).delete(t)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}})})}function gf(e,t){return C(this,void 0,void 0,function(){var n,r,i,s,u,c;return S(this,function(l){switch(l.label){case 0:return n=Bu(e),[4,F0()];case 1:return r=l.sent(),i=r.transaction(Ws,"readwrite"),s=i.objectStore(Ws),[4,s.get(n)];case 2:return u=l.sent(),c=t(u),c!==void 0?[3,4]:[4,s.delete(n)];case 3:return l.sent(),[3,6];case 4:return[4,s.put(c,n)];case 5:l.sent(),l.label=6;case 6:return[4,i.complete];case 7:return l.sent(),c&&(!u||u.fid!==c.fid)&&XD(e,c.fid),[2,c]}})})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j0(e){return C(this,void 0,void 0,function(){var t,n,r;return S(this,function(i){switch(i.label){case 0:return[4,gf(e,function(s){var u=L6(s),c=M6(e,u);return t=c.registrationPromise,c.installationEntry})];case 1:return n=i.sent(),n.fid!==J_?[3,3]:(r={},[4,t]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:t}]}})})}function L6(e){var t=e||{fid:k6(),registrationStatus:0};return tx(t)}function M6(e,t){if(t.registrationStatus===0){if(!navigator.onLine){var n=Promise.reject(Bi.create("app-offline"));return{installationEntry:t,registrationPromise:n}}var r={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=F6(e,r);return{installationEntry:r,registrationPromise:i}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:U6(e)}:{installationEntry:t}}function F6(e,t){return C(this,void 0,void 0,function(){var n,r;return S(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,S6(e,t)];case 1:return n=i.sent(),[2,Wd(e,n)];case 2:return r=i.sent(),GD(r)&&r.customData.serverCode===409?[4,U0(e)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,Wd(e,{fid:t.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}})})}function U6(e){return C(this,void 0,void 0,function(){var t,n,r,i;return S(this,function(s){switch(s.label){case 0:return[4,Pk(e)];case 1:t=s.sent(),s.label=2;case 2:return t.registrationStatus!==1?[3,5]:[4,YD(100)];case 3:return s.sent(),[4,Pk(e)];case 4:return t=s.sent(),[3,2];case 5:return t.registrationStatus!==0?[3,7]:[4,j0(e)];case 6:return n=s.sent(),r=n.installationEntry,i=n.registrationPromise,i?[2,i]:[2,r];case 7:return[2,t]}})})}function Pk(e){return gf(e,function(t){if(!t)throw Bi.create("installation-not-found");return tx(t)})}function tx(e){return j6(e)?{fid:e.fid,registrationStatus:0}:e}function j6(e){return e.registrationStatus===1&&e.registrationTime+KD<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V6(e,t){var n=e.appConfig,r=e.platformLoggerProvider;return C(this,void 0,void 0,function(){var i,s,u,c,l,h,p,g;return S(this,function(m){switch(m.label){case 0:return i=B6(n,t),s=QD(n,t),u=r.getImmediate({optional:!0}),u&&s.append("x-firebase-client",u.getPlatformInfoString()),c={installation:{sdkVersion:HD}},l={method:"POST",headers:s,body:JSON.stringify(c)},[4,M0(function(){return fetch(i,l)})];case 1:return h=m.sent(),h.ok?[4,h.json()]:[3,3];case 2:return p=m.sent(),g=$D(p),[2,g];case 3:return[4,L0("Generate Auth Token",h)];case 4:throw m.sent()}})})}function B6(e,t){var n=t.fid;return x0(e)+"/"+n+"/authTokens:generate"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V0(e,t){return t===void 0&&(t=!1),C(this,void 0,void 0,function(){var n,r,i,s;return S(this,function(u){switch(u.label){case 0:return[4,gf(e.appConfig,function(c){if(!nx(c))throw Bi.create("not-registered");var l=c.authToken;if(!t&&H6(l))return c;if(l.requestStatus===1)return n=q6(e,t),c;if(!navigator.onLine)throw Bi.create("app-offline");var h=G6(c);return n=K6(e,h),h})];case 1:return r=u.sent(),n?[4,n]:[3,3];case 2:return s=u.sent(),[3,4];case 3:s=r.authToken,u.label=4;case 4:return i=s,[2,i]}})})}function q6(e,t){return C(this,void 0,void 0,function(){var n,r;return S(this,function(i){switch(i.label){case 0:return[4,Dk(e.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return n.authToken.requestStatus!==1?[3,5]:[4,YD(100)];case 3:return i.sent(),[4,Dk(e.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return r=n.authToken,r.requestStatus===0?[2,V0(e,t)]:[2,r]}})})}function Dk(e){return gf(e,function(t){if(!nx(t))throw Bi.create("not-registered");var n=t.authToken;return $6(n)?he(he({},t),{authToken:{requestStatus:0}}):t})}function K6(e,t){return C(this,void 0,void 0,function(){var n,i,r,i;return S(this,function(s){switch(s.label){case 0:return s.trys.push([0,3,,8]),[4,V6(e,t)];case 1:return n=s.sent(),i=he(he({},t),{authToken:n}),[4,Wd(e.appConfig,i)];case 2:return s.sent(),[2,n];case 3:return r=s.sent(),GD(r)&&(r.customData.serverCode===401||r.customData.serverCode===404)?[4,U0(e.appConfig)]:[3,5];case 4:return s.sent(),[3,7];case 5:return i=he(he({},t),{authToken:{requestStatus:0}}),[4,Wd(e.appConfig,i)];case 6:s.sent(),s.label=7;case 7:throw r;case 8:return[2]}})})}function nx(e){return e!==void 0&&e.registrationStatus===2}function H6(e){return e.requestStatus===2&&!W6(e)}function W6(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+_6}function G6(e){var t={requestStatus:1,requestTime:Date.now()};return he(he({},e),{authToken:t})}function $6(e){return e.requestStatus===1&&e.requestTime+KD<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z6(e){return C(this,void 0,void 0,function(){var t,n,r;return S(this,function(i){switch(i.label){case 0:return[4,j0(e.appConfig)];case 1:return t=i.sent(),n=t.installationEntry,r=t.registrationPromise,r?r.catch(console.error):V0(e).catch(console.error),[2,n.fid]}})})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q6(e,t){return t===void 0&&(t=!1),C(this,void 0,void 0,function(){var n;return S(this,function(r){switch(r.label){case 0:return[4,Y6(e.appConfig)];case 1:return r.sent(),[4,V0(e,t)];case 2:return n=r.sent(),[2,n.token]}})})}function Y6(e){return C(this,void 0,void 0,function(){var t;return S(this,function(n){switch(n.label){case 0:return[4,j0(e)];case 1:return t=n.sent().registrationPromise,t?[4,t]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}})})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X6(e,t){return C(this,void 0,void 0,function(){var n,r,i,s;return S(this,function(u){switch(u.label){case 0:return n=J6(e,t),r=QD(e,t),i={method:"DELETE",headers:r},[4,M0(function(){return fetch(n,i)})];case 1:return s=u.sent(),s.ok?[3,3]:[4,L0("Delete Installation",s)];case 2:throw u.sent();case 3:return[2]}})})}function J6(e,t){var n=t.fid;return x0(e)+"/"+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z6(e){return C(this,void 0,void 0,function(){var t,n;return S(this,function(r){switch(r.label){case 0:return t=e.appConfig,[4,gf(t,function(i){if(!(i&&i.registrationStatus===0))return i})];case 1:if(n=r.sent(),!n)return[3,6];if(n.registrationStatus!==1)return[3,2];throw Bi.create("delete-pending-registration");case 2:if(n.registrationStatus!==2)return[3,6];if(navigator.onLine)return[3,3];throw Bi.create("app-offline");case 3:return[4,X6(t,n)];case 4:return r.sent(),[4,U0(t)];case 5:r.sent(),r.label=6;case 6:return[2]}})})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ez(e,t){var n=e.appConfig;return R6(n,t),function(){O6(n,t)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tz(e){var t,n;if(!e||!e.options)throw Iy("App Configuration");if(!e.name)throw Iy("App Name");var r=["projectId","apiKey","appId"];try{for(var i=Kt(r),s=i.next();!s.done;s=i.next()){var u=s.value;if(!e.options[u])throw Iy(u)}}catch(c){t={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function Iy(e){return Bi.create("missing-app-config-values",{valueName:e})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nz(e){var t="installations";e.INTERNAL.registerComponent(new dn(t,function(n){var r=n.getProvider("app").getImmediate(),i=tz(r),s=n.getProvider("platform-logger"),u={appConfig:i,platformLoggerProvider:s},c={app:r,getId:function(){return z6(u)},getToken:function(l){return Q6(u,l)},delete:function(){return Z6(u)},onIdChange:function(l){return ez(u,l)}};return c},"PUBLIC")),e.registerVersion(m6,qD)}nz(oe);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kt,rz=(kt={},kt["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',kt["only-available-in-window"]="This method is available in a Window context.",kt["only-available-in-sw"]="This method is available in a service worker context.",kt["permission-default"]="The notification permission was not granted and dismissed instead.",kt["permission-blocked"]="The notification permission was not granted and blocked instead.",kt["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",kt["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",kt["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",kt["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",kt["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",kt["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",kt["token-update-no-token"]="FCM returned no token when updating the user to push.",kt["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",kt["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",kt["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",kt["invalid-vapid-key"]="The public VAPID key must be a string.",kt["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",kt),We=new Hi("messaging","Messaging",rz);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var iz="/firebase-messaging-sw.js",oz="/firebase-cloud-messaging-push-scope",Gd="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",sz="https://fcmregistrations.googleapis.com/v1",rx="FCM_MSG",az="FirebaseMessaging: ",uz="google.c.a.e",ix="google.c.a.c_id",cz="google.c.a.ts",lz="google.c.a.c_l",fz=1e3,hz=3e3;/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var Gs;(function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"})(Gs||(Gs={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ni(e){var t=new Uint8Array(e),n=btoa(String.fromCharCode.apply(String,Ie([],Yt(t))));return n.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function dz(e){for(var t="=".repeat((4-e.length%4)%4),n=(e+t).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length),s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Sy="fcm_token_details_db",pz=5,xk="fcm_token_object_Store";function vz(e){return C(this,void 0,void 0,function(){var t,n,r,i,s=this;return S(this,function(u){switch(u.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(t=u.sent(),n=t.map(function(c){return c.name}),!n.includes(Sy))return[2,null];u.label=2;case 2:return r=null,[4,D0(Sy,pz,function(c){return C(s,void 0,void 0,function(){var l,h,p,p,p,g;return S(this,function(m){switch(m.label){case 0:return c.oldVersion<2?[2]:c.objectStoreNames.contains(xk)?(l=c.transaction.objectStore(xk),[4,l.index("fcmSenderId").get(e)]):[2];case 1:return h=m.sent(),[4,l.clear()];case 2:if(m.sent(),!h)return[2];if(c.oldVersion===2){if(p=h,!p.auth||!p.p256dh||!p.endpoint)return[2];r={token:p.fcmToken,createTime:(g=p.createTime)!==null&&g!==void 0?g:Date.now(),subscriptionOptions:{auth:p.auth,p256dh:p.p256dh,endpoint:p.endpoint,swScope:p.swScope,vapidKey:typeof p.vapidKey=="string"?p.vapidKey:Ni(p.vapidKey)}}}else c.oldVersion===3?(p=h,r={token:p.fcmToken,createTime:p.createTime,subscriptionOptions:{auth:Ni(p.auth),p256dh:Ni(p.p256dh),endpoint:p.endpoint,swScope:p.swScope,vapidKey:Ni(p.vapidKey)}}):c.oldVersion===4&&(p=h,r={token:p.fcmToken,createTime:p.createTime,subscriptionOptions:{auth:Ni(p.auth),p256dh:Ni(p.p256dh),endpoint:p.endpoint,swScope:p.swScope,vapidKey:Ni(p.vapidKey)}});return[2]}})})})];case 3:return i=u.sent(),i.close(),[4,Ey(Sy)];case 4:return u.sent(),[4,Ey("fcm_vapid_details_db")];case 5:return u.sent(),[4,Ey("undefined")];case 6:return u.sent(),[2,gz(r)?r:null]}})})}function gz(e){if(!e||!e.subscriptionOptions)return!1;var t=e.subscriptionOptions;return typeof e.createTime=="number"&&e.createTime>0&&typeof e.token=="string"&&e.token.length>0&&typeof t.auth=="string"&&t.auth.length>0&&typeof t.p256dh=="string"&&t.p256dh.length>0&&typeof t.endpoint=="string"&&t.endpoint.length>0&&typeof t.swScope=="string"&&t.swScope.length>0&&typeof t.vapidKey=="string"&&t.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mz="firebase-messaging-database",yz=1,$s="firebase-messaging-store",Cy=null;function B0(){return Cy||(Cy=D0(mz,yz,function(e){switch(e.oldVersion){case 0:e.createObjectStore($s)}})),Cy}function $d(e){return C(this,void 0,void 0,function(){var t,n,r,i;return S(this,function(s){switch(s.label){case 0:return t=K0(e),[4,B0()];case 1:return n=s.sent(),[4,n.transaction($s).objectStore($s).get(t)];case 2:return r=s.sent(),r?[2,r]:[3,3];case 3:return[4,vz(e.appConfig.senderId)];case 4:return i=s.sent(),i?[4,q0(e,i)]:[3,6];case 5:return s.sent(),[2,i];case 6:return[2]}})})}function q0(e,t){return C(this,void 0,void 0,function(){var n,r,i;return S(this,function(s){switch(s.label){case 0:return n=K0(e),[4,B0()];case 1:return r=s.sent(),i=r.transaction($s,"readwrite"),[4,i.objectStore($s).put(t,n)];case 2:return s.sent(),[4,i.complete];case 3:return s.sent(),[2,t]}})})}function _z(e){return C(this,void 0,void 0,function(){var t,n,r;return S(this,function(i){switch(i.label){case 0:return t=K0(e),[4,B0()];case 1:return n=i.sent(),r=n.transaction($s,"readwrite"),[4,r.objectStore($s).delete(t)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}})})}function K0(e){var t=e.appConfig;return t.appId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wz(e,t){return C(this,void 0,void 0,function(){var n,r,i,s,u,c,l;return S(this,function(h){switch(h.label){case 0:return[4,W0(e)];case 1:n=h.sent(),r=sx(t),i={method:"POST",headers:n,body:JSON.stringify(r)},h.label=2;case 2:return h.trys.push([2,5,,6]),[4,fetch(H0(e.appConfig),i)];case 3:return u=h.sent(),[4,u.json()];case 4:return s=h.sent(),[3,6];case 5:throw c=h.sent(),We.create("token-subscribe-failed",{errorInfo:c});case 6:if(s.error)throw l=s.error.message,We.create("token-subscribe-failed",{errorInfo:l});if(!s.token)throw We.create("token-subscribe-no-token");return[2,s.token]}})})}function bz(e,t){return C(this,void 0,void 0,function(){var n,r,i,s,u,c,l;return S(this,function(h){switch(h.label){case 0:return[4,W0(e)];case 1:n=h.sent(),r=sx(t.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},h.label=2;case 2:return h.trys.push([2,5,,6]),[4,fetch(H0(e.appConfig)+"/"+t.token,i)];case 3:return u=h.sent(),[4,u.json()];case 4:return s=h.sent(),[3,6];case 5:throw c=h.sent(),We.create("token-update-failed",{errorInfo:c});case 6:if(s.error)throw l=s.error.message,We.create("token-update-failed",{errorInfo:l});if(!s.token)throw We.create("token-update-no-token");return[2,s.token]}})})}function ox(e,t){return C(this,void 0,void 0,function(){var n,r,i,s,u,c;return S(this,function(l){switch(l.label){case 0:return[4,W0(e)];case 1:n=l.sent(),r={method:"DELETE",headers:n},l.label=2;case 2:return l.trys.push([2,5,,6]),[4,fetch(H0(e.appConfig)+"/"+t,r)];case 3:return i=l.sent(),[4,i.json()];case 4:if(s=l.sent(),s.error)throw u=s.error.message,We.create("token-unsubscribe-failed",{errorInfo:u});return[3,6];case 5:throw c=l.sent(),We.create("token-unsubscribe-failed",{errorInfo:c});case 6:return[2]}})})}function H0(e){var t=e.projectId;return sz+"/projects/"+t+"/registrations"}function W0(e){var t=e.appConfig,n=e.installations;return C(this,void 0,void 0,function(){var r;return S(this,function(i){switch(i.label){case 0:return[4,n.getToken()];case 1:return r=i.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":"FIS "+r})]}})})}function sx(e){var t=e.p256dh,n=e.auth,r=e.endpoint,i=e.vapidKey,s={web:{endpoint:r,auth:n,p256dh:t}};return i!==Gd&&(s.web.applicationPubKey=i),s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ez=7*24*60*60*1e3;function Z_(e,t,n){return C(this,void 0,void 0,function(){var r,i,s,u;return S(this,function(c){switch(c.label){case 0:if(Notification.permission!=="granted")throw We.create("permission-blocked");return[4,Iz(t,n)];case 1:return r=c.sent(),[4,$d(e)];case 2:return i=c.sent(),s={vapidKey:n,swScope:t.scope,endpoint:r.endpoint,auth:Ni(r.getKey("auth")),p256dh:Ni(r.getKey("p256dh"))},i?[3,3]:[2,Lk(e,s)];case 3:if(Sz(i.subscriptionOptions,s))return[3,8];c.label=4;case 4:return c.trys.push([4,6,,7]),[4,ox(e,i.token)];case 5:return c.sent(),[3,7];case 6:return u=c.sent(),console.warn(u),[3,7];case 7:return[2,Lk(e,s)];case 8:return Date.now()>=i.createTime+Ez?[2,Tz({token:i.token,createTime:Date.now(),subscriptionOptions:s},e,t)]:[2,i.token];case 9:return[2]}})})}function tl(e,t){return C(this,void 0,void 0,function(){var n,r;return S(this,function(i){switch(i.label){case 0:return[4,$d(e)];case 1:return n=i.sent(),n?[4,ox(e,n.token)]:[3,4];case 2:return i.sent(),[4,_z(e)];case 3:i.sent(),i.label=4;case 4:return[4,t.pushManager.getSubscription()];case 5:return r=i.sent(),r?[2,r.unsubscribe()]:[2,!0]}})})}function Tz(e,t,n){return C(this,void 0,void 0,function(){var r,i,s;return S(this,function(u){switch(u.label){case 0:return u.trys.push([0,3,,5]),[4,bz(t,e)];case 1:return r=u.sent(),i=he(he({},e),{token:r,createTime:Date.now()}),[4,q0(t,i)];case 2:return u.sent(),[2,r];case 3:return s=u.sent(),[4,tl(t,n)];case 4:throw u.sent(),s;case 5:return[2]}})})}function Lk(e,t){return C(this,void 0,void 0,function(){var n,r;return S(this,function(i){switch(i.label){case 0:return[4,wz(e,t)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:t},[4,q0(e,r)];case 2:return i.sent(),[2,r.token]}})})}function Iz(e,t){return C(this,void 0,void 0,function(){var n;return S(this,function(r){switch(r.label){case 0:return[4,e.pushManager.getSubscription()];case 1:return n=r.sent(),n?[2,n]:[2,e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:dz(t)})]}})})}function Sz(e,t){var n=t.vapidKey===e.vapidKey,r=t.endpoint===e.endpoint,i=t.auth===e.auth,s=t.p256dh===e.p256dh;return n&&r&&i&&s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cz(e){var t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcm_message_id};return Az(t,e),kz(t,e),Nz(t,e),t}function Az(e,t){if(t.notification){e.notification={};var n=t.notification.title;n&&(e.notification.title=n);var r=t.notification.body;r&&(e.notification.body=r);var i=t.notification.image;i&&(e.notification.image=i)}}function kz(e,t){t.data&&(e.data=t.data)}function Nz(e,t){if(t.fcmOptions){e.fcmOptions={};var n=t.fcmOptions.link;n&&(e.fcmOptions.link=n);var r=t.fcmOptions.analytics_label;r&&(e.fcmOptions.analyticsLabel=r)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ax(e){return typeof e=="object"&&!!e&&ix in e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mk(e){return new Promise(function(t){setTimeout(t,e)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rz=function(){function e(t){var n=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",function(r){r.waitUntil(n.onPush(r))}),self.addEventListener("pushsubscriptionchange",function(r){r.waitUntil(n.onSubChange(r))}),self.addEventListener("notificationclick",function(r){r.waitUntil(n.onNotificationClick(r))})}return Object.defineProperty(e.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),e.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||typeof t!="function")throw We.create("invalid-bg-handler");this.bgMessageHandler=t},e.prototype.onBackgroundMessage=function(t){var n=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){n.bgMessageHandler=null}},e.prototype.getToken=function(){var t,n;return C(this,void 0,void 0,function(){var r;return S(this,function(i){switch(i.label){case 0:return this.vapidKey?[3,2]:[4,$d(this.firebaseDependencies)];case 1:r=i.sent(),this.vapidKey=(n=(t=r==null?void 0:r.subscriptionOptions)===null||t===void 0?void 0:t.vapidKey)!==null&&n!==void 0?n:Gd,i.label=2;case 2:return[2,Z_(this.firebaseDependencies,self.registration,this.vapidKey)]}})})},e.prototype.deleteToken=function(){return tl(this.firebaseDependencies,self.registration)},e.prototype.requestPermission=function(){throw We.create("only-available-in-window")},e.prototype.usePublicVapidKey=function(t){if(this.vapidKey!==null)throw We.create("use-vapid-key-after-get-token");if(typeof t!="string"||t.length===0)throw We.create("invalid-vapid-key");this.vapidKey=t},e.prototype.useServiceWorker=function(){throw We.create("only-available-in-window")},e.prototype.onMessage=function(){throw We.create("only-available-in-window")},e.prototype.onTokenRefresh=function(){throw We.create("only-available-in-window")},e.prototype.onPush=function(t){return C(this,void 0,void 0,function(){var n,r,i,s;return S(this,function(u){switch(u.label){case 0:return n=Pz(t),n?[4,ux()]:(console.debug(az+"failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return r=u.sent(),xz(r)?[2,Lz(r,n)]:(i=!1,n.notification?[4,Mz(Oz(n))]:[3,3]);case 2:u.sent(),i=!0,u.label=3;case 3:return i===!0&&this.isOnBackgroundMessageUsed===!1?[2]:(this.bgMessageHandler&&(s=Cz(n),typeof this.bgMessageHandler=="function"?this.bgMessageHandler(s):this.bgMessageHandler.next(s)),[4,Mk(fz)]);case 4:return u.sent(),[2]}})})},e.prototype.onSubChange=function(t){var n,r;return C(this,void 0,void 0,function(){var i,s;return S(this,function(u){switch(u.label){case 0:return i=t.newSubscription,i?[3,2]:[4,tl(this.firebaseDependencies,self.registration)];case 1:return u.sent(),[2];case 2:return[4,$d(this.firebaseDependencies)];case 3:return s=u.sent(),[4,tl(this.firebaseDependencies,self.registration)];case 4:return u.sent(),[4,Z_(this.firebaseDependencies,self.registration,(r=(n=s==null?void 0:s.subscriptionOptions)===null||n===void 0?void 0:n.vapidKey)!==null&&r!==void 0?r:Gd)];case 5:return u.sent(),[2]}})})},e.prototype.onNotificationClick=function(t){var n,r;return C(this,void 0,void 0,function(){var i,s,u,c,l;return S(this,function(h){switch(h.label){case 0:if(i=(r=(n=t.notification)===null||n===void 0?void 0:n.data)===null||r===void 0?void 0:r[rx],i){if(t.action)return[2]}else return[2];return t.stopImmediatePropagation(),t.notification.close(),s=Fz(i),s?(u=new URL(s,self.location.href),c=new URL(self.location.origin),u.host!==c.host?[2]:[4,Dz(u)]):[2];case 1:return l=h.sent(),l?[3,4]:[4,self.clients.openWindow(s)];case 2:return l=h.sent(),[4,Mk(hz)];case 3:return h.sent(),[3,6];case 4:return[4,l.focus()];case 5:l=h.sent(),h.label=6;case 6:return l?(i.messageType=Gs.NOTIFICATION_CLICKED,i.isFirebaseMessaging=!0,[2,l.postMessage(i)]):[2]}})})},e}();function Oz(e){var t,n=he({},e.notification);return n.data=(t={},t[rx]=e,t),n}function Pz(e){var t=e.data;if(!t)return null;try{return t.json()}catch{return null}}function Dz(e){return C(this,void 0,void 0,function(){var t,n,r,i,s,u,c;return S(this,function(l){switch(l.label){case 0:return[4,ux()];case 1:t=l.sent();try{for(n=Kt(t),r=n.next();!r.done;r=n.next())if(i=r.value,s=new URL(i.url,self.location.href),e.host===s.host)return[2,i]}catch(h){u={error:h}}finally{try{r&&!r.done&&(c=n.return)&&c.call(n)}finally{if(u)throw u.error}}return[2,null]}})})}function xz(e){return e.some(function(t){return t.visibilityState==="visible"&&!t.url.startsWith("chrome-extension://")})}function Lz(e,t){var n,r;t.isFirebaseMessaging=!0,t.messageType=Gs.PUSH_RECEIVED;try{for(var i=Kt(e),s=i.next();!s.done;s=i.next()){var u=s.value;u.postMessage(t)}}catch(c){n={error:c}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function ux(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function Mz(e){var t,n=e.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification((t=e.title)!==null&&t!==void 0?t:"",e)}function Fz(e){var t,n,r,i=(n=(t=e.fcmOptions)===null||t===void 0?void 0:t.link)!==null&&n!==void 0?n:(r=e.notification)===null||r===void 0?void 0:r.click_action;return i||(ax(e.data)?self.location.origin:null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Uz=function(){function e(t){var n=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",function(r){return n.messageEventListener(r)})}return Object.defineProperty(e.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),e.prototype.messageEventListener=function(t){return C(this,void 0,void 0,function(){var n,r;return S(this,function(i){switch(i.label){case 0:return n=t.data,n.isFirebaseMessaging?(this.onMessageCallback&&n.messageType===Gs.PUSH_RECEIVED&&(typeof this.onMessageCallback=="function"?this.onMessageCallback(Vz(Object.assign({},n))):this.onMessageCallback.next(Object.assign({},n))),r=n.data,ax(r)&&r[uz]==="1"?[4,this.logEvent(n.messageType,r)]:[3,2]):[2];case 1:i.sent(),i.label=2;case 2:return[2]}})})},e.prototype.getVapidKey=function(){return this.vapidKey},e.prototype.getSwReg=function(){return this.swRegistration},e.prototype.getToken=function(t){return C(this,void 0,void 0,function(){return S(this,function(n){switch(n.label){case 0:return Notification.permission!=="default"?[3,2]:[4,Notification.requestPermission()];case 1:n.sent(),n.label=2;case 2:if(Notification.permission!=="granted")throw We.create("permission-blocked");return[4,this.updateVapidKey(t==null?void 0:t.vapidKey)];case 3:return n.sent(),[4,this.updateSwReg(t==null?void 0:t.serviceWorkerRegistration)];case 4:return n.sent(),[2,Z_(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}})})},e.prototype.updateVapidKey=function(t){return C(this,void 0,void 0,function(){return S(this,function(n){return t?this.vapidKey=t:this.vapidKey||(this.vapidKey=Gd),[2]})})},e.prototype.updateSwReg=function(t){return C(this,void 0,void 0,function(){return S(this,function(n){switch(n.label){case 0:return!t&&!this.swRegistration?[4,this.registerDefaultSw()]:[3,2];case 1:n.sent(),n.label=2;case 2:if(!t&&this.swRegistration)return[2];if(!(t instanceof ServiceWorkerRegistration))throw We.create("invalid-sw-registration");return this.swRegistration=t,[2]}})})},e.prototype.registerDefaultSw=function(){return C(this,void 0,void 0,function(){var t,n;return S(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),t=this,[4,navigator.serviceWorker.register(iz,{scope:oz})];case 1:return t.swRegistration=r.sent(),this.swRegistration.update().catch(function(){}),[3,3];case 2:throw n=r.sent(),We.create("failed-service-worker-registration",{browserErrorMessage:n.message});case 3:return[2]}})})},e.prototype.deleteToken=function(){return C(this,void 0,void 0,function(){return S(this,function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,tl(this.firebaseDependencies,this.swRegistration)]}})})},e.prototype.requestPermission=function(){return C(this,void 0,void 0,function(){var t;return S(this,function(n){switch(n.label){case 0:return Notification.permission==="granted"?[2]:[4,Notification.requestPermission()];case 1:if(t=n.sent(),t==="granted")return[2];throw t==="denied"?We.create("permission-blocked"):We.create("permission-default")}})})},e.prototype.usePublicVapidKey=function(t){if(this.vapidKey!==null)throw We.create("use-vapid-key-after-get-token");if(typeof t!="string"||t.length===0)throw We.create("invalid-vapid-key");this.vapidKey=t},e.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw We.create("invalid-sw-registration");if(this.swRegistration)throw We.create("use-sw-after-get-token");this.swRegistration=t},e.prototype.onMessage=function(t){var n=this;return this.onMessageCallback=t,function(){n.onMessageCallback=null}},e.prototype.setBackgroundMessageHandler=function(){throw We.create("only-available-in-sw")},e.prototype.onBackgroundMessage=function(){throw We.create("only-available-in-sw")},e.prototype.onTokenRefresh=function(){return function(){}},e.prototype.logEvent=function(t,n){return C(this,void 0,void 0,function(){var r,i;return S(this,function(s){switch(s.label){case 0:return r=jz(t),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return i=s.sent(),i.logEvent(r,{message_id:n[ix],message_name:n[lz],message_time:n[cz],message_device_time:Math.floor(Date.now()/1e3)}),[2]}})})},e}();function jz(e){switch(e){case Gs.NOTIFICATION_CLICKED:return"notification_open";case Gs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Vz(e){return delete e.messageType,delete e.isFirebaseMessaging,e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bz(e){var t,n;if(!e||!e.options)throw Ay("App Configuration Object");if(!e.name)throw Ay("App Name");var r=["projectId","apiKey","appId","messagingSenderId"],i=e.options;try{for(var s=Kt(r),u=s.next();!u.done;u=s.next()){var c=u.value;if(!i[c])throw Ay(c)}}catch(l){t={error:l}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return{appName:e.name,projectId:i.projectId,apiKey:i.apiKey,appId:i.appId,senderId:i.messagingSenderId}}function Ay(e){return We.create("missing-app-config-values",{valueName:e})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qz="messaging";function Kz(e){var t=e.getProvider("app").getImmediate(),n=Bz(t),r=e.getProvider("installations").getImmediate(),i=e.getProvider("analytics-internal"),s={app:t,appConfig:n,installations:r,analyticsProvider:i};if(!cx())throw We.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new Rz(s):new Uz(s)}var Hz={isSupported:cx};oe.INTERNAL.registerComponent(new dn(qz,Kz,"PUBLIC").setServiceProps(Hz));function cx(){return self&&"ServiceWorkerGlobalScope"in self?Gz():Wz()}function Wz(){return"indexedDB"in window&&indexedDB!==null&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function Gz(){return"indexedDB"in self&&indexedDB!==null&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lx="firebasestorage.googleapis.com",fx="storageBucket",$z=2*60*1e3,zz=10*60*1e3,Ct=function(e){Z(t,e);function t(n,r){var i=e.call(this,ky(n),"Firebase Storage: "+r+" ("+ky(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,t.prototype),i}return t.prototype._codeEquals=function(n){return ky(n)===this.code},Object.defineProperty(t.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(n){this.customData.serverResponse=n,this.customData.serverResponse?this.message=this._baseMessage+`
`+this.customData.serverResponse:this.message=this._baseMessage},enumerable:!1,configurable:!0}),t}(Cu);function ky(e){return"storage/"+e}function G0(){var e="An unknown error occurred, please check the error payload for server response.";return new Ct("unknown",e)}function Qz(e){return new Ct("object-not-found","Object '"+e+"' does not exist.")}function Yz(e){return new Ct("quota-exceeded","Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Xz(){var e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ct("unauthenticated",e)}function Jz(){return new Ct("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}function Zz(e){return new Ct("unauthorized","User does not have permission to access '"+e+"'.")}function eQ(){return new Ct("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function hx(){return new Ct("canceled","User canceled the upload/download.")}function tQ(e){return new Ct("invalid-url","Invalid URL '"+e+"'.")}function nQ(e){return new Ct("invalid-default-bucket","Invalid default bucket '"+e+"'.")}function rQ(){return new Ct("no-default-bucket","No default bucket found. Did you set the '"+fx+"' property when initializing the app?")}function dx(){return new Ct("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function iQ(){return new Ct("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}function oQ(){return new Ct("no-download-url","The given file does not have any download URLs.")}function Ga(e){return new Ct("invalid-argument",e)}function px(){return new Ct("app-deleted","The Firebase app was deleted.")}function vx(e){return new Ct("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function nl(e,t){return new Ct("invalid-format","String does not match format '"+e+"': "+t)}function Mh(e){throw new Ct("internal-error","Internal error: "+e)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sQ(e){return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Ny=function(){function e(t,n){this.data=t,this.contentType=n||null}return e}();function gx(e,t){switch(e){case vr.RAW:return new Ny(mx(t));case vr.BASE64:case vr.BASE64URL:return new Ny(yx(e,t));case vr.DATA_URL:return new Ny(uQ(t),cQ(t))}throw G0()}function mx(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296){var i=n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320;if(!i)t.push(239,191,189);else{var s=r,u=e.charCodeAt(++n);r=65536|(s&1023)<<10|u&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function aQ(e){var t;try{t=decodeURIComponent(e)}catch{throw nl(vr.DATA_URL,"Malformed data URL.")}return mx(t)}function yx(e,t){switch(e){case vr.BASE64:{var n=t.indexOf("-")!==-1,r=t.indexOf("_")!==-1;if(n||r){var i=n?"-":"_";throw nl(e,"Invalid character '"+i+"' found: is it base64url encoded?")}break}case vr.BASE64URL:{var s=t.indexOf("+")!==-1,u=t.indexOf("/")!==-1;if(s||u){var i=s?"+":"/";throw nl(e,"Invalid character '"+i+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}var c;try{c=sQ(t)}catch{throw nl(e,"Invalid character found")}for(var l=new Uint8Array(c.length),h=0;h<c.length;h++)l[h]=c.charCodeAt(h);return l}var _x=function(){function e(t){this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(n===null)throw nl(vr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;r!=null&&(this.base64=lQ(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}return e}();function uQ(e){var t=new _x(e);return t.base64?yx(vr.BASE64,t.rest):aQ(t.rest)}function cQ(e){var t=new _x(e);return t.contentType}function lQ(e,t){var n=e.length>=t.length;return n?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fQ={STATE_CHANGED:"state_changed"},Tn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Ry(e){switch(e){case"running":case"pausing":case"canceling":return Tn.RUNNING;case"paused":return Tn.PAUSED;case"success":return Tn.SUCCESS;case"canceled":return Tn.CANCELED;case"error":return Tn.ERROR;default:return Tn.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xs;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(xs||(xs={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hQ=function(){function e(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=xs.NO_ERROR,this.sendPromise_=new Promise(function(n){t.xhr_.addEventListener("abort",function(){t.errorCode_=xs.ABORT,n()}),t.xhr_.addEventListener("error",function(){t.errorCode_=xs.NETWORK_ERROR,n()}),t.xhr_.addEventListener("load",function(){n()})})}return e.prototype.send=function(t,n,r,i){if(this.sent_)throw Mh("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(var s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_},e.prototype.getErrorCode=function(){if(!this.sent_)throw Mh("cannot .getErrorCode() before sending");return this.errorCode_},e.prototype.getStatus=function(){if(!this.sent_)throw Mh("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}},e.prototype.getResponseText=function(){if(!this.sent_)throw Mh("cannot .getResponseText() before sending");return this.xhr_.responseText},e.prototype.abort=function(){this.xhr_.abort()},e.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},e.prototype.addUploadProgressListener=function(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)},e.prototype.removeUploadProgressListener=function(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)},e}();function dQ(){return new hQ}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pQ=function(){function e(){}return e.prototype.createConnection=function(){return dQ()},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gr=function(){function e(t,n){this.bucket=t,this.path_=n}return Object.defineProperty(e.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isRoot",{get:function(){return this.path.length===0},enumerable:!1,configurable:!0}),e.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},e.prototype.bucketOnlyServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o"},e.makeFromBucketSpec=function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch{return new e(t,"")}if(r.path==="")return r;throw nQ(t)},e.makeFromUrl=function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";function s(de){de.path.charAt(de.path.length-1)==="/"&&(de.path_=de.path_.slice(0,-1))}var u="(/(.*))?$",c=new RegExp("^gs://"+i+u,"i"),l={bucket:1,path:3};function h(de){de.path_=decodeURIComponent(de.path)}for(var p="v[A-Za-z0-9_]+",g=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",_=new RegExp("^https?://"+g+"/"+p+"/b/"+i+"/o"+m,"i"),b={bucket:1,path:3},E=n===lx?"(?:storage.googleapis.com|storage.cloud.google.com)":n,I="([^?#]*)",N=new RegExp("^https?://"+E+"/"+i+"/"+I,"i"),x={bucket:1,path:2},P=[{regex:c,indices:l,postModify:s},{regex:_,indices:b,postModify:h},{regex:N,indices:x,postModify:h}],z=0;z<P.length;z++){var W=P[z],V=W.regex.exec(t);if(V){var ne=V[W.indices.bucket],M=V[W.indices.path];M||(M=""),r=new e(ne,M),W.postModify(r);break}}if(r==null)throw tQ(t);return r},e}(),vQ=function(){function e(t){this.promise_=Promise.reject(t)}return e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(t){},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gQ(e,t,n){var r=1,i=null,s=!1,u=0;function c(){return u===2}var l=!1;function h(){for(var b=[],E=0;E<arguments.length;E++)b[E]=arguments[E];l||(l=!0,t.apply(null,b))}function p(b){i=setTimeout(function(){i=null,e(g,c())},b)}function g(b){for(var E=[],I=1;I<arguments.length;I++)E[I-1]=arguments[I];if(!l){if(b){h.call.apply(h,Ie([null,b],E));return}var N=c()||s;if(N){h.call.apply(h,Ie([null,b],E));return}r<64&&(r*=2);var x;u===1?(u=2,x=0):x=(r+Math.random())*1e3,p(x)}}var m=!1;function _(b){m||(m=!0,!l&&(i!==null?(b||(u=2),clearTimeout(i),p(0)):b||(u=1)))}return p(0),setTimeout(function(){s=!0,_(!0)},n),_}function mQ(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yQ(e){return e!==void 0}function _Q(e){return typeof e=="function"}function wQ(e){return typeof e=="object"&&!Array.isArray(e)}function fv(e){return typeof e=="string"||e instanceof String}function Fk(e){return $0()&&e instanceof Blob}function $0(){return typeof Blob<"u"}function ew(e,t,n,r){if(r<t)throw Ga("Invalid value for '"+e+"'. Expected "+t+" or greater.");if(r>n)throw Ga("Invalid value for '"+e+"'. Expected "+n+" or less.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jo(e,t){var n=t.match(/^(\w+):\/\/.+/),r=n==null?void 0:n[1],i=t;return r==null&&(i="https://"+t),i+"/v0"+e}function wx(e){var t=encodeURIComponent,n="?";for(var r in e)if(e.hasOwnProperty(r)){var i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bQ=function(){function e(t,n,r,i,s,u,c,l,h,p,g){var m=this;this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s.slice(),this.additionalRetryCodes_=u.slice(),this.callback_=c,this.errorCallback_=l,this.progressCallback_=p,this.timeout_=h,this.pool_=g,this.promise_=new Promise(function(_,b){m.resolve_=_,m.reject_=b,m.start_()})}return e.prototype.start_=function(){var t=this;function n(i,s){if(s){i(!1,new Fh(!1,null,!0));return}var u=t.pool_.createConnection();t.pendingConnection_=u;function c(l){var h=l.loaded,p=l.lengthComputable?l.total:-1;t.progressCallback_!==null&&t.progressCallback_(h,p)}t.progressCallback_!==null&&u.addUploadProgressListener(c),u.send(t.url_,t.method_,t.body_,t.headers_).then(function(){t.progressCallback_!==null&&u.removeUploadProgressListener(c),t.pendingConnection_=null;var l=u.getErrorCode()===xs.NO_ERROR,h=u.getStatus();if(!l||t.isRetryStatusCode_(h)){var p=u.getErrorCode()===xs.ABORT;i(!1,new Fh(!1,null,p));return}var g=t.successCodes_.indexOf(h)!==-1;i(!0,new Fh(g,u))})}function r(i,s){var u=t.resolve_,c=t.reject_,l=s.connection;if(s.wasSuccessCode)try{var h=t.callback_(l,l.getResponseText());yQ(h)?u(h):u()}catch(g){c(g)}else if(l!==null){var p=G0();p.serverResponse=l.getResponseText(),t.errorCallback_?c(t.errorCallback_(l,p)):c(p)}else if(s.canceled){var p=t.appDelete_?px():hx();c(p)}else{var p=eQ();c(p)}}this.canceled_?r(!1,new Fh(!1,null,!0)):this.backoffId_=gQ(n,r,this.timeout_)},e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&mQ(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()},e.prototype.isRetryStatusCode_=function(t){var n=t>=500&&t<600,r=[408,429],i=r.indexOf(t)!==-1,s=this.additionalRetryCodes_.indexOf(t)!==-1;return n||i||s},e}(),Fh=function(){function e(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}return e}();function EQ(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function TQ(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function IQ(e,t){t&&(e["X-Firebase-GMPID"]=t)}function SQ(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function CQ(e,t,n,r,i,s){var u=wx(e.urlParams),c=e.url+u,l=Object.assign({},e.headers);return IQ(l,t),EQ(l,n),TQ(l,s),SQ(l,r),new bQ(c,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AQ(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function kQ(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=AQ();if(n!==void 0){for(var r=new n,i=0;i<e.length;i++)r.append(e[i]);return r.getBlob()}else{if($0())return new Blob(e);throw new Ct("unsupported-environment","This browser doesn't seem to support creating Blobs")}}function NQ(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var z0=function(){function e(t,n){var r=0,i="";Fk(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return e.prototype.size=function(){return this.size_},e.prototype.type=function(){return this.type_},e.prototype.slice=function(t,n){if(Fk(this.data_)){var r=this.data_,i=NQ(r,t,n);return i===null?null:new e(i)}else{var s=new Uint8Array(this.data_.buffer,t,n-t);return new e(s,!0)}},e.getBlob=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if($0()){var r=t.map(function(l){return l instanceof e?l.data_:l});return new e(kQ.apply(null,r))}else{var i=t.map(function(l){return fv(l)?gx(vr.RAW,l).data:l.data_}),s=0;i.forEach(function(l){s+=l.byteLength});var u=new Uint8Array(s),c=0;return i.forEach(function(l){for(var h=0;h<l.length;h++)u[c++]=l[h]}),new e(u,!0)}},e.prototype.uploadData=function(){return this.data_},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q0(e){var t;try{t=JSON.parse(e)}catch{return null}return wQ(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RQ(e){if(e.length===0)return null;var t=e.lastIndexOf("/");if(t===-1)return"";var n=e.slice(0,t);return n}function OQ(e,t){var n=t.split("/").filter(function(r){return r.length>0}).join("/");return e.length===0?n:e+"/"+n}function bx(e){var t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PQ(e,t){return t}var _n=function(){function e(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||PQ}return e}(),Uh=null;function DQ(e){return!fv(e)||e.length<2?e:bx(e)}function hv(){if(Uh)return Uh;var e=[];e.push(new _n("bucket")),e.push(new _n("generation")),e.push(new _n("metageneration")),e.push(new _n("name","fullPath",!0));function t(s,u){return DQ(u)}var n=new _n("name");n.xform=t,e.push(n);function r(s,u){return u!==void 0?Number(u):u}var i=new _n("size");return i.xform=r,e.push(i),e.push(new _n("timeCreated")),e.push(new _n("updated")),e.push(new _n("md5Hash",null,!0)),e.push(new _n("cacheControl",null,!0)),e.push(new _n("contentDisposition",null,!0)),e.push(new _n("contentEncoding",null,!0)),e.push(new _n("contentLanguage",null,!0)),e.push(new _n("contentType",null,!0)),e.push(new _n("metadata","customMetadata",!0)),Uh=e,Uh}function xQ(e,t){function n(){var r=e.bucket,i=e.fullPath,s=new gr(r,i);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function LQ(e,t,n){var r={};r.type="file";for(var i=n.length,s=0;s<i;s++){var u=n[s];r[u.local]=u.xform(r,t[u.server])}return xQ(r,e),r}function Ex(e,t,n){var r=Q0(t);if(r===null)return null;var i=r;return LQ(e,i,n)}function MQ(e,t,n){var r=Q0(t);if(r===null||!fv(r.downloadTokens))return null;var i=r.downloadTokens;if(i.length===0)return null;var s=encodeURIComponent,u=i.split(","),c=u.map(function(l){var h=e.bucket,p=e.fullPath,g="/b/"+s(h)+"/o/"+s(p),m=jo(g,n),_=wx({alt:"media",token:l});return m+_});return c[0]}function Y0(e,t){for(var n={},r=t.length,i=0;i<r;i++){var s=t[i];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Uk="prefixes",jk="items";function FQ(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[Uk])for(var i=0,s=n[Uk];i<s.length;i++){var u=s[i],c=u.replace(/\/$/,""),l=e._makeStorageReference(new gr(t,c));r.prefixes.push(l)}if(n[jk])for(var h=0,p=n[jk];h<p.length;h++){var g=p[h],l=e._makeStorageReference(new gr(t,g.name));r.items.push(l)}return r}function UQ(e,t,n){var r=Q0(n);if(r===null)return null;var i=r;return FQ(e,t,i)}var $i=function(){function e(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}return e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function li(e){if(!e)throw G0()}function dv(e,t){function n(r,i){var s=Ex(e,i,t);return li(s!==null),s}return n}function jQ(e,t){function n(r,i){var s=UQ(e,t,i);return li(s!==null),s}return n}function VQ(e,t){function n(r,i){var s=Ex(e,i,t);return li(s!==null),MQ(s,i,e.host)}return n}function qu(e){function t(n,r){var i;return n.getStatus()===401?n.getResponseText().includes("Firebase App Check token is invalid")?i=Jz():i=Xz():n.getStatus()===402?i=Yz(e.bucket):n.getStatus()===403?i=Zz(e.path):i=r,i.serverResponse=r.serverResponse,i}return t}function pv(e){var t=qu(e);function n(r,i){var s=t(r,i);return r.getStatus()===404&&(s=Qz(e.path)),s.serverResponse=i.serverResponse,s}return n}function Tx(e,t,n){var r=t.fullServerUrl(),i=jo(r,e.host),s="GET",u=e.maxOperationRetryTime,c=new $i(i,s,dv(e,n),u);return c.errorHandler=pv(t),c}function BQ(e,t,n,r,i){var s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n&&n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);var u=t.bucketOnlyServerUrl(),c=jo(u,e.host),l="GET",h=e.maxOperationRetryTime,p=new $i(c,l,jQ(e,t.bucket),h);return p.urlParams=s,p.errorHandler=qu(t),p}function qQ(e,t,n){var r=t.fullServerUrl(),i=jo(r,e.host),s="GET",u=e.maxOperationRetryTime,c=new $i(i,s,VQ(e,n),u);return c.errorHandler=pv(t),c}function KQ(e,t,n,r){var i=t.fullServerUrl(),s=jo(i,e.host),u="PATCH",c=Y0(n,r),l={"Content-Type":"application/json; charset=utf-8"},h=e.maxOperationRetryTime,p=new $i(s,u,dv(e,r),h);return p.headers=l,p.body=c,p.errorHandler=pv(t),p}function HQ(e,t){var n=t.fullServerUrl(),r=jo(n,e.host),i="DELETE",s=e.maxOperationRetryTime;function u(l,h){}var c=new $i(r,i,u,s);return c.successCodes=[200,204],c.errorHandler=pv(t),c}function WQ(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function Ix(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=WQ(null,t)),r}function GQ(e,t,n,r,i){var s=t.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"};function c(){for(var P="",z=0;z<2;z++)P=P+Math.random().toString().slice(2);return P}var l=c();u["Content-Type"]="multipart/related; boundary="+l;var h=Ix(t,r,i),p=Y0(h,n),g="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+p+`\r
--`+l+`\r
Content-Type: `+h.contentType+`\r
\r
`,m=`\r
--`+l+"--",_=z0.getBlob(g,r,m);if(_===null)throw dx();var b={name:h.fullPath},E=jo(s,e.host),I="POST",N=e.maxUploadRetryTime,x=new $i(E,I,dv(e,n),N);return x.urlParams=b,x.headers=u,x.body=_.uploadData(),x.errorHandler=qu(t),x}var zd=function(){function e(t,n,r,i){this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null}return e}();function X0(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch{li(!1)}var r=t||["active"];return li(!!n&&r.indexOf(n)!==-1),n}function $Q(e,t,n,r,i){var s=t.bucketOnlyServerUrl(),u=Ix(t,r,i),c={name:u.fullPath},l=jo(s,e.host),h="POST",p={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":""+r.size(),"X-Goog-Upload-Header-Content-Type":u.contentType,"Content-Type":"application/json; charset=utf-8"},g=Y0(u,n),m=e.maxUploadRetryTime;function _(E){X0(E);var I;try{I=E.getResponseHeader("X-Goog-Upload-URL")}catch{li(!1)}return li(fv(I)),I}var b=new $i(l,h,_,m);return b.urlParams=c,b.headers=p,b.body=g,b.errorHandler=qu(t),b}function zQ(e,t,n,r){var i={"X-Goog-Upload-Command":"query"};function s(h){var p=X0(h,["active","final"]),g=null;try{g=h.getResponseHeader("X-Goog-Upload-Size-Received")}catch{li(!1)}g||li(!1);var m=Number(g);return li(!isNaN(m)),new zd(m,r.size(),p==="final")}var u="POST",c=e.maxUploadRetryTime,l=new $i(n,u,s,c);return l.headers=i,l.errorHandler=qu(t),l}var Vk=256*1024;function QQ(e,t,n,r,i,s,u,c){var l=new zd(0,0);if(u?(l.current=u.current,l.total=u.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw iQ();var h=l.total-l.current,p=h;i>0&&(p=Math.min(p,i));var g=l.current,m=g+p,_=p===h?"upload, finalize":"upload",b={"X-Goog-Upload-Command":_,"X-Goog-Upload-Offset":""+l.current},E=r.slice(g,m);if(E===null)throw dx();function I(z,W){var V=X0(z,["active","final"]),ne=l.current+p,M=r.size(),de;return V==="final"?de=dv(t,s)(z,W):de=null,new zd(ne,M,V==="final",de)}var N="POST",x=t.maxUploadRetryTime,P=new $i(n,N,I,x);return P.headers=b,P.body=E.uploadData(),P.progressCallback=c||null,P.errorHandler=qu(e),P}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var YQ=function(){function e(t,n,r){var i=_Q(t)||n!=null||r!=null;if(i)this.next=t,this.error=n,this.complete=r;else{var s=t;this.next=s.next,this.error=s.error,this.complete=s.complete}}return e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xa(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];Promise.resolve().then(function(){return e.apply(void 0,t)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Sx=function(){function e(t,n,r){var i=this;r===void 0&&(r=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=r,this._mappings=hv(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(s){i._request=void 0,i._chunkMultiplier=1,s._codeEquals("canceled")?(i._needToFetchStatus=!0,i.completeTransitions_()):(i._error=s,i._transition("error"))},this._metadataErrorHandler=function(s){i._request=void 0,s._codeEquals("canceled")?i.completeTransitions_():(i._error=s,i._transition("error"))},this._promise=new Promise(function(s,u){i._resolve=s,i._reject=u,i._start()}),this._promise.then(null,function(){})}return e.prototype._makeProgressCallback=function(){var t=this,n=this._transferred;return function(r){return t._updateProgress(n+r)}},e.prototype._shouldDoResumable=function(t){return t.size()>256*1024},e.prototype._start=function(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},e.prototype._resolveToken=function(t){var n=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(function(r){var i=r[0],s=r[1];switch(n._state){case"running":t(i,s);break;case"canceling":n._transition("canceled");break;case"pausing":n._transition("paused");break}})},e.prototype._createResumable=function(){var t=this;this._resolveToken(function(n,r){var i=$Q(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),s=t._ref.storage._makeRequest(i,n,r);t._request=s,s.getPromise().then(function(u){t._request=void 0,t._uploadUrl=u,t._needToFetchStatus=!1,t.completeTransitions_()},t._errorHandler)})},e.prototype._fetchStatus=function(){var t=this,n=this._uploadUrl;this._resolveToken(function(r,i){var s=zQ(t._ref.storage,t._ref._location,n,t._blob),u=t._ref.storage._makeRequest(s,r,i);t._request=u,u.getPromise().then(function(c){c=c,t._request=void 0,t._updateProgress(c.current),t._needToFetchStatus=!1,c.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()},t._errorHandler)})},e.prototype._continueUpload=function(){var t=this,n=Vk*this._chunkMultiplier,r=new zd(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken(function(s,u){var c;try{c=QQ(t._ref._location,t._ref.storage,i,t._blob,n,t._mappings,r,t._makeProgressCallback())}catch(h){t._error=h,t._transition("error");return}var l=t._ref.storage._makeRequest(c,s,u);t._request=l,l.getPromise().then(function(h){t._increaseMultiplier(),t._request=void 0,t._updateProgress(h.current),h.finalized?(t._metadata=h.metadata,t._transition("success")):t.completeTransitions_()},t._errorHandler)})},e.prototype._increaseMultiplier=function(){var t=Vk*this._chunkMultiplier;t<32*1024*1024&&(this._chunkMultiplier*=2)},e.prototype._fetchMetadata=function(){var t=this;this._resolveToken(function(n,r){var i=Tx(t._ref.storage,t._ref._location,t._mappings),s=t._ref.storage._makeRequest(i,n,r);t._request=s,s.getPromise().then(function(u){t._request=void 0,t._metadata=u,t._transition("success")},t._metadataErrorHandler)})},e.prototype._oneShotUpload=function(){var t=this;this._resolveToken(function(n,r){var i=GQ(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),s=t._ref.storage._makeRequest(i,n,r);t._request=s,s.getPromise().then(function(u){t._request=void 0,t._metadata=u,t._updateProgress(t._blob.size()),t._transition("success")},t._errorHandler)})},e.prototype._updateProgress=function(t){var n=this._transferred;this._transferred=t,this._transferred!==n&&this._notifyObservers()},e.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":this._state=t,this._request!==void 0&&this._request.cancel();break;case"pausing":this._state=t,this._request!==void 0&&this._request.cancel();break;case"running":var n=this._state==="paused";this._state=t,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=hx(),this._state=t,this._notifyObservers();break;case"error":this._state=t,this._notifyObservers();break;case"success":this._state=t,this._notifyObservers();break}},e.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}},Object.defineProperty(e.prototype,"snapshot",{get:function(){var t=Ry(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),e.prototype.on=function(t,n,r,i){var s=this,u=new YQ(n,r,i);return this._addObserver(u),function(){s._removeObserver(u)}},e.prototype.then=function(t,n){return this._promise.then(t,n)},e.prototype.catch=function(t){return this.then(null,t)},e.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},e.prototype._removeObserver=function(t){var n=this._observers.indexOf(t);n!==-1&&this._observers.splice(n,1)},e.prototype._notifyObservers=function(){var t=this;this._finishPromise();var n=this._observers.slice();n.forEach(function(r){t._notifyObserver(r)})},e.prototype._finishPromise=function(){if(this._resolve!==void 0){var t=!0;switch(Ry(this._state)){case Tn.SUCCESS:xa(this._resolve.bind(null,this.snapshot))();break;case Tn.CANCELED:case Tn.ERROR:var n=this._reject;xa(n.bind(null,this._error))();break;default:t=!1;break}t&&(this._resolve=void 0,this._reject=void 0)}},e.prototype._notifyObserver=function(t){var n=Ry(this._state);switch(n){case Tn.RUNNING:case Tn.PAUSED:t.next&&xa(t.next.bind(t,this.snapshot))();break;case Tn.SUCCESS:t.complete&&xa(t.complete.bind(t))();break;case Tn.CANCELED:case Tn.ERROR:t.error&&xa(t.error.bind(t,this._error))();break;default:t.error&&xa(t.error.bind(t,this._error))()}},e.prototype.resume=function(){var t=this._state==="paused"||this._state==="pausing";return t&&this._transition("running"),t},e.prototype.pause=function(){var t=this._state==="running";return t&&this._transition("pausing"),t},e.prototype.cancel=function(){var t=this._state==="running"||this._state==="pausing";return t&&this._transition("canceling"),t},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vv=function(){function e(t,n){this._service=t,n instanceof gr?this._location=n:this._location=gr.makeFromUrl(n,t.host)}return e.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},e.prototype._newRef=function(t,n){return new e(t,n)},Object.defineProperty(e.prototype,"root",{get:function(){var t=new gr(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return bx(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=RQ(this._location.path);if(t===null)return null;var n=new gr(this._location.bucket,t);return new e(this._service,n)},enumerable:!1,configurable:!0}),e.prototype._throwIfRoot=function(t){if(this._location.path==="")throw vx(t)},e}();function XQ(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new Sx(e,new z0(t),n)}function JQ(e){var t={prefixes:[],items:[]};return Cx(e,t).then(function(){return t})}function Cx(e,t,n){return C(this,void 0,void 0,function(){var r,i,s,u;return S(this,function(c){switch(c.label){case 0:return r={pageToken:n},[4,Ax(e,r)];case 1:return i=c.sent(),(s=t.prefixes).push.apply(s,i.prefixes),(u=t.items).push.apply(u,i.items),i.nextPageToken==null?[3,3]:[4,Cx(e,t,i.nextPageToken)];case 2:c.sent(),c.label=3;case 3:return[2]}})})}function Ax(e,t){return C(this,void 0,void 0,function(){var n,r;return S(this,function(i){switch(i.label){case 0:return t!=null&&typeof t.maxResults=="number"&&ew("options.maxResults",1,1e3,t.maxResults),n=t||{},r=BQ(e.storage,e._location,"/",n.pageToken,n.maxResults),[4,e.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}})})}function ZQ(e){return C(this,void 0,void 0,function(){var t;return S(this,function(n){switch(n.label){case 0:return e._throwIfRoot("getMetadata"),t=Tx(e.storage,e._location,hv()),[4,e.storage.makeRequestWithTokens(t)];case 1:return[2,n.sent().getPromise()]}})})}function e5(e,t){return C(this,void 0,void 0,function(){var n;return S(this,function(r){switch(r.label){case 0:return e._throwIfRoot("updateMetadata"),n=KQ(e.storage,e._location,t,hv()),[4,e.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}})})}function t5(e){return C(this,void 0,void 0,function(){var t;return S(this,function(n){switch(n.label){case 0:return e._throwIfRoot("getDownloadURL"),t=qQ(e.storage,e._location,hv()),[4,e.storage.makeRequestWithTokens(t)];case 1:return[2,n.sent().getPromise().then(function(r){if(r===null)throw oQ();return r})]}})})}function n5(e){return C(this,void 0,void 0,function(){var t;return S(this,function(n){switch(n.label){case 0:return e._throwIfRoot("deleteObject"),t=HQ(e.storage,e._location),[4,e.storage.makeRequestWithTokens(t)];case 1:return[2,n.sent().getPromise()]}})})}function kx(e,t){var n=OQ(e._location.path,t),r=new gr(e._location.bucket,n);return new vv(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tw(e){return/^[A-Za-z]+:\/\//.test(e)}function r5(e,t){return new vv(e,t)}function Nx(e,t){if(e instanceof gv){var n=e;if(n._bucket==null)throw rQ();var r=new vv(n,n._bucket);return t!=null?Nx(r,t):r}else return t!==void 0?kx(e,t):e}function i5(e,t){if(t&&tw(t)){if(e instanceof gv)return r5(e,t);throw Ga("To use ref(service, url), the first argument must be a Storage instance.")}else return Nx(e,t)}function Bk(e,t){var n=t==null?void 0:t[fx];return n==null?null:gr.makeFromBucketSpec(n,e)}function o5(e,t,n,r){r===void 0&&(r={}),e.host="http://"+t+":"+n;var i=r.mockUserToken;i&&(e._overrideAuthToken=typeof i=="string"?i:Rw(i,e.app.options.projectId))}var gv=function(){function e(t,n,r,i,s,u){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._pool=i,this._url=s,this._firebaseVersion=u,this._bucket=null,this._host=lx,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=$z,this._maxUploadRetryTime=zz,this._requests=new Set,s!=null?this._bucket=gr.makeFromBucketSpec(s,this._host):this._bucket=Bk(this._host,this.app.options)}return Object.defineProperty(e.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,this._url!=null?this._bucket=gr.makeFromBucketSpec(this._url,t):this._bucket=Bk(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){ew("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){ew("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),e.prototype._getAuthToken=function(){return C(this,void 0,void 0,function(){var t,n;return S(this,function(r){switch(r.label){case 0:return this._overrideAuthToken?[2,this._overrideAuthToken]:(t=this._authProvider.getImmediate({optional:!0}),t?[4,t.getToken()]:[3,2]);case 1:if(n=r.sent(),n!==null)return[2,n.accessToken];r.label=2;case 2:return[2,null]}})})},e.prototype._getAppCheckToken=function(){return C(this,void 0,void 0,function(){var t,n;return S(this,function(r){switch(r.label){case 0:return t=this._appCheckProvider.getImmediate({optional:!0}),t?[4,t.getToken()]:[3,2];case 1:return n=r.sent(),[2,n.token];case 2:return[2,null]}})})},e.prototype._delete=function(){return this._deleted||(this._deleted=!0,this._requests.forEach(function(t){return t.cancel()}),this._requests.clear()),Promise.resolve()},e.prototype._makeStorageReference=function(t){return new vv(this,t)},e.prototype._makeRequest=function(t,n,r){var i=this;if(this._deleted)return new vQ(px());var s=CQ(t,this._appId,n,r,this._pool,this._firebaseVersion);return this._requests.add(s),s.getPromise().then(function(){return i._requests.delete(s)},function(){return i._requests.delete(s)}),s},e.prototype.makeRequestWithTokens=function(t){return C(this,void 0,void 0,function(){var n,r,i;return S(this,function(s){switch(s.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return n=s.sent(),r=n[0],i=n[1],[2,this._makeRequest(t,r,i)]}})})},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s5(e,t,n){return e=Ee(e),XQ(e,t,n)}function a5(e){return e=Ee(e),ZQ(e)}function u5(e,t){return e=Ee(e),e5(e,t)}function c5(e,t){return e=Ee(e),Ax(e,t)}function l5(e){return e=Ee(e),JQ(e)}function f5(e){return e=Ee(e),t5(e)}function h5(e){return e=Ee(e),n5(e)}function qk(e,t){return e=Ee(e),i5(e,t)}function d5(e,t){return kx(e,t)}function p5(e,t,n,r){r===void 0&&(r={}),o5(e,t,n,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jh=function(){function e(t,n,r){this._delegate=t,this.task=n,this.ref=r}return Object.defineProperty(e.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kk=function(){function e(t,n){this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(e.prototype,"snapshot",{get:function(){return new jh(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),e.prototype.then=function(t,n){var r=this;return this._delegate.then(function(i){if(t)return t(new jh(i,r,r._ref))},n)},e.prototype.on=function(t,n,r,i){var s=this,u=void 0;return n&&(typeof n=="function"?u=function(c){return n(new jh(c,s,s._ref))}:u={next:n.next?function(c){return n.next(new jh(c,s,s._ref))}:void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(t,u,r||void 0,i||void 0)},e}(),Hk=function(){function e(t,n){this._delegate=t,this._service=n}return Object.defineProperty(e.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map(function(n){return new Ll(n,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){var t=this;return this._delegate.items.map(function(n){return new Ll(n,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ll=function(){function e(t,n){this._delegate=t,this.storage=n}return Object.defineProperty(e.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return this._delegate.toString()},e.prototype.child=function(t){var n=d5(this._delegate,t);return new e(n,this.storage)},Object.defineProperty(e.prototype,"root",{get:function(){return new e(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t==null?null:new e(t,this.storage)},enumerable:!1,configurable:!0}),e.prototype.put=function(t,n){return this._throwIfRoot("put"),new Kk(s5(this._delegate,t,n),this)},e.prototype.putString=function(t,n,r){n===void 0&&(n=vr.RAW),this._throwIfRoot("putString");var i=gx(n,t),s=he({},r);return s.contentType==null&&i.contentType!=null&&(s.contentType=i.contentType),new Kk(new Sx(this._delegate,new z0(i.data,!0),s),this)},e.prototype.listAll=function(){var t=this;return l5(this._delegate).then(function(n){return new Hk(n,t.storage)})},e.prototype.list=function(t){var n=this;return c5(this._delegate,t||void 0).then(function(r){return new Hk(r,n.storage)})},e.prototype.getMetadata=function(){return a5(this._delegate)},e.prototype.updateMetadata=function(t){return u5(this._delegate,t)},e.prototype.getDownloadURL=function(){return f5(this._delegate)},e.prototype.delete=function(){return this._throwIfRoot("delete"),h5(this._delegate)},e.prototype._throwIfRoot=function(t){if(this._delegate._location.path==="")throw vx(t)},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var v5=function(){function e(t,n){this.app=t,this._delegate=n}return Object.defineProperty(e.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),e.prototype.ref=function(t){if(tw(t))throw Ga("ref() expected a child path but got a URL, use refFromURL instead.");return new Ll(qk(this._delegate,t),this)},e.prototype.refFromURL=function(t){if(!tw(t))throw Ga("refFromURL() expected a full URL but got a child path, use ref() instead.");try{gr.makeFromUrl(t,this._delegate.host)}catch{throw Ga("refFromUrl() expected a valid full URL but got an invalid one.")}return new Ll(qk(this._delegate,t),this)},e.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},e.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},e.prototype.useEmulator=function(t,n,r){r===void 0&&(r={}),p5(this._delegate,t,n,r)},e}(),g5="@firebase/storage",m5="0.7.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var y5="storage";function _5(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal"),u=new v5(r,new gv(r,i,s,new pQ,n,oe.SDK_VERSION));return u}function w5(e){var t={TaskState:Tn,TaskEvent:fQ,StringFormat:vr,Storage:gv,Reference:Ll};e.INTERNAL.registerComponent(new dn(y5,_5,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion(g5,m5)}w5(oe);var b5="@firebase/performance",Rx="0.4.18";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ox=Rx,E5="FB-PERF-TRACE-START",T5="FB-PERF-TRACE-STOP",nw="FB-PERF-TRACE-MEASURE",Px="_wt_",Dx="_fp",xx="_fcp",Lx="_fid",Mx="@firebase/performance/config",Fx="@firebase/performance/configexpire",I5="performance",Ux="Performance";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $t,S5=($t={},$t["trace started"]="Trace {$traceName} was started before.",$t["trace stopped"]="Trace {$traceName} is not running.",$t["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",$t["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",$t["no window"]="Window is not available.",$t["no app id"]="App id is not available.",$t["no project id"]="Project id is not available.",$t["no api key"]="Api key is not available.",$t["invalid cc log"]="Attempted to queue invalid cc event",$t["FB not default"]="Performance can only start when Firebase app instance is the default one.",$t["RC response not ok"]="RC response is not ok",$t["invalid attribute name"]="Attribute name {$attributeName} is invalid.",$t["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",$t["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",$t["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",$t),on=new Hi(I5,Ux,S5);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qi=new zs(Ux);qi.logLevel=Re.INFO;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oy,jx,ln=function(){function e(t){if(this.window=t,!t)throw on.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}return e.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},e.prototype.mark=function(t){!this.performance||!this.performance.mark||this.performance.mark(t)},e.prototype.measure=function(t,n,r){!this.performance||!this.performance.measure||this.performance.measure(t,n,r)},e.prototype.getEntriesByType=function(t){return!this.performance||!this.performance.getEntriesByType?[]:this.performance.getEntriesByType(t)},e.prototype.getEntriesByName=function(t){return!this.performance||!this.performance.getEntriesByName?[]:this.performance.getEntriesByName(t)},e.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},e.prototype.requiredApisAvailable=function(){return!fetch||!Promise||!this.navigator||!this.navigator.cookieEnabled?(qi.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1):Ul()?!0:(qi.info("IndexedDB is not supported by current browswer"),!1)},e.prototype.setupObserver=function(t,n){if(this.PerformanceObserver){var r=new this.PerformanceObserver(function(i){for(var s=0,u=i.getEntries();s<u.length;s++){var c=u[s];n(c)}});r.observe({entryTypes:[t]})}},e.getInstance=function(){return Oy===void 0&&(Oy=new e(jx)),Oy},e}();function C5(e){jx=e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wk(e,t){var n=e.length-t.length;if(n<0||n>1)throw on.create("invalid String merger input");for(var r=[],i=0;i<e.length;i++)r.push(e.charAt(i)),t.length>i&&r.push(t.charAt(i));return r.join("")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Py,Rt=function(){function e(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=Wk("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=Wk("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return e.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw on.create("no app id");return t},e.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw on.create("no project id");return t},e.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw on.create("no api key");return t},e.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},e.getInstance=function(){return Py===void 0&&(Py=new e),Py},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vx;function A5(){var e=Rt.getInstance().installationsService.getId();return e.then(function(t){Vx=t}),e}function J0(){return Vx}function k5(){var e=Rt.getInstance().installationsService.getToken();return e.then(function(t){}),e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $a;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.VISIBLE=1]="VISIBLE",e[e.HIDDEN=2]="HIDDEN"})($a||($a={}));var N5=["firebase_","google_","ga_"],R5=new RegExp("^[a-zA-Z]\\w*$"),O5=40,P5=100;function D5(){var e=ln.getInstance().navigator;return"serviceWorker"in e?e.serviceWorker.controller?2:3:1}function Bx(){var e=ln.getInstance().document,t=e.visibilityState;switch(t){case"visible":return $a.VISIBLE;case"hidden":return $a.HIDDEN;default:return $a.UNKNOWN}}function x5(){var e=ln.getInstance().navigator,t=e.connection,n=t&&t.effectiveType;switch(n){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function L5(e){if(e.length===0||e.length>O5)return!1;var t=N5.some(function(n){return e.startsWith(n)});return!t&&!!e.match(R5)}function M5(e){return e.length!==0&&e.length<=P5}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var F5="0.0.1",U5={loggingEnabled:!0},j5="FIREBASE_INSTALLATIONS_AUTH";function V5(e){var t=B5();return t?(Gk(t),Promise.resolve()):H5(e).then(Gk).then(function(n){return q5(n)},function(){})}function B5(){var e=ln.getInstance().localStorage;if(e){var t=e.getItem(Fx);if(!(!t||!W5(t))){var n=e.getItem(Mx);if(n)try{var r=JSON.parse(n);return r}catch{return}}}}function q5(e){var t=ln.getInstance().localStorage;!e||!t||(t.setItem(Mx,JSON.stringify(e)),t.setItem(Fx,String(Date.now()+Rt.getInstance().configTimeToLive*60*60*1e3)))}var K5="Could not fetch config, will use default configs";function H5(e){return k5().then(function(t){var n=Rt.getInstance().getProjectId(),r="https://firebaseremoteconfig.googleapis.com/v1/projects/"+n+"/namespaces/fireperf:fetch?key="+Rt.getInstance().getApiKey(),i=new Request(r,{method:"POST",headers:{Authorization:j5+" "+t},body:JSON.stringify({app_instance_id:e,app_instance_id_token:t,app_id:Rt.getInstance().getAppId(),app_version:Ox,sdk_version:F5})});return fetch(i).then(function(s){if(s.ok)return s.json();throw on.create("RC response not ok")})}).catch(function(){qi.info(K5)})}function Gk(e){if(!e)return e;var t=Rt.getInstance(),n=e.entries||{};return n.fpr_enabled!==void 0?t.loggingEnabled=String(n.fpr_enabled)==="true":t.loggingEnabled=U5.loggingEnabled,n.fpr_log_source&&(t.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(t.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(t.transportKey=n.fpr_log_transport_key),n.fpr_vc_network_request_sampling_rate!==void 0&&(t.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),n.fpr_vc_trace_sampling_rate!==void 0&&(t.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),t.logTraceAfterSampling=$k(t.tracesSamplingRate),t.logNetworkAfterSampling=$k(t.networkRequestsSamplingRate),e}function W5(e){return Number(e)>Date.now()}function $k(e){return Math.random()<=e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Z0=1,Dy;function qx(){return Z0=2,Dy=Dy||$5(),Dy}function G5(){return Z0===3}function $5(){return z5().then(function(){return A5()}).then(function(e){return V5(e)}).then(function(){return zk()},function(){return zk()})}function z5(){var e=ln.getInstance().document;return new Promise(function(t){if(e&&e.readyState!=="complete"){var n=function(){e.readyState==="complete"&&(e.removeEventListener("readystatechange",n),t())};e.addEventListener("readystatechange",n)}else t()})}function zk(){Z0=3}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var eE=10*1e3,Q5=5.5*1e3,Kx=3,Y5=1e3,Qd=Kx,So=[],Qk=!1;function X5(){Qk||(mv(Q5),Qk=!0)}function mv(e){setTimeout(function(){if(Qd!==0){if(!So.length)return mv(eE);J5()}},e)}function J5(){var e=So.splice(0,Y5),t=e.map(function(r){return{source_extension_json_proto3:r.message,event_time_ms:String(r.eventTime)}}),n={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:Rt.getInstance().logSource,log_event:t};Z5(n,e).catch(function(){So=Ie(Ie([],e),So),Qd--,qi.info("Tries left: "+Qd+"."),mv(eE)})}function Z5(e,t){return eY(e).then(function(n){return n.ok||qi.info("Call to Firebase backend failed."),n.json()}).then(function(n){var r=Number(n.nextRequestWaitMillis),i=eE;isNaN(r)||(i=Math.max(r,i));var s=n.logResponseDetails;Array.isArray(s)&&s.length>0&&s[0].responseAction==="RETRY_REQUEST_LATER"&&(So=Ie(Ie([],t),So),qi.info("Retry transport request later.")),Qd=Kx,mv(i)})}function eY(e){var t=Rt.getInstance().getFlTransportFullUrl();return fetch(t,{method:"POST",body:JSON.stringify(e)})}function tY(e){if(!e.eventTime||!e.message)throw on.create("invalid cc log");So=Ie(Ie([],So),[e])}function nY(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=e.apply(void 0,t);tY({message:r,eventTime:Date.now()})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xy;function Hx(e,t){xy||(xy=nY(iY)),xy(e,t)}function Vh(e){var t=Rt.getInstance();!t.instrumentationEnabled&&e.isAuto||!t.dataCollectionEnabled&&!e.isAuto||ln.getInstance().requiredApisAvailable()&&(e.isAuto&&Bx()!==$a.VISIBLE||(G5()?Ly(e):qx().then(function(){return Ly(e)},function(){return Ly(e)})))}function Ly(e){if(J0()){var t=Rt.getInstance();!t.loggingEnabled||!t.logTraceAfterSampling||setTimeout(function(){return Hx(e,1)},0)}}function rY(e){var t=Rt.getInstance();if(t.instrumentationEnabled){var n=e.url,r=t.logEndPointUrl.split("?")[0],i=t.flTransportEndpointUrl.split("?")[0];n===r||n===i||!t.loggingEnabled||!t.logNetworkAfterSampling||setTimeout(function(){return Hx(e,0)},0)}}function iY(e,t){return t===0?oY(e):sY(e)}function oY(e){var t={url:e.url,http_method:e.httpMethod||0,http_response_code:200,response_payload_bytes:e.responsePayloadBytes,client_start_time_us:e.startTimeUs,time_to_response_initiated_us:e.timeToResponseInitiatedUs,time_to_response_completed_us:e.timeToResponseCompletedUs},n={application_info:Wx(),network_request_metric:t};return JSON.stringify(n)}function sY(e){var t={name:e.name,is_auto:e.isAuto,client_start_time_us:e.startTimeUs,duration_us:e.durationUs};Object.keys(e.counters).length!==0&&(t.counters=e.counters);var n=e.getAttributes();Object.keys(n).length!==0&&(t.custom_attributes=n);var r={application_info:Wx(),trace_metric:t};return JSON.stringify(r)}function Wx(){return{google_app_id:Rt.getInstance().getAppId(),app_instance_id:J0(),web_app_info:{sdk_version:Ox,page_url:ln.getInstance().getUrl(),service_worker_status:D5(),visibility_state:Bx(),effective_connection_type:x5()},application_process_state:0}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var aY=100,uY="_",cY=[Dx,xx,Lx];function lY(e,t){return e.length===0||e.length>aY?!1:t&&t.startsWith(Px)&&cY.indexOf(e)>-1||!e.startsWith(uY)}function fY(e){var t=Math.floor(e);return t<e&&qi.info("Metric value should be an Integer, setting the value as : "+t+"."),t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rl=function(){function e(t,n,r){n===void 0&&(n=!1),this.name=t,this.isAuto=n,this.state=1,this.customAttributes={},this.counters={},this.api=ln.getInstance(),this.randomId=Math.floor(Math.random()*1e6),this.isAuto||(this.traceStartMark=E5+"-"+this.randomId+"-"+this.name,this.traceStopMark=T5+"-"+this.randomId+"-"+this.name,this.traceMeasure=r||nw+"-"+this.randomId+"-"+this.name,r&&this.calculateTraceMetrics())}return e.prototype.start=function(){if(this.state!==1)throw on.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},e.prototype.stop=function(){if(this.state!==2)throw on.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),Vh(this)},e.prototype.record=function(t,n,r){if(t<=0)throw on.create("nonpositive trace startTime",{traceName:this.name});if(n<=0)throw on.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(n*1e3),this.startTimeUs=Math.floor(t*1e3),r&&r.attributes&&(this.customAttributes=he({},r.attributes)),r&&r.metrics)for(var i=0,s=Object.keys(r.metrics);i<s.length;i++){var u=s[i];isNaN(Number(r.metrics[u]))||(this.counters[u]=Number(Math.floor(r.metrics[u])))}Vh(this)},e.prototype.incrementMetric=function(t,n){n===void 0&&(n=1),this.counters[t]===void 0?this.putMetric(t,n):this.putMetric(t,this.counters[t]+n)},e.prototype.putMetric=function(t,n){if(lY(t,this.name))this.counters[t]=fY(n);else throw on.create("invalid custom metric name",{customMetricName:t})},e.prototype.getMetric=function(t){return this.counters[t]||0},e.prototype.putAttribute=function(t,n){var r=L5(t),i=M5(n);if(r&&i){this.customAttributes[t]=n;return}if(!r)throw on.create("invalid attribute name",{attributeName:t});if(!i)throw on.create("invalid attribute value",{attributeValue:n})},e.prototype.getAttribute=function(t){return this.customAttributes[t]},e.prototype.removeAttribute=function(t){this.customAttributes[t]!==void 0&&delete this.customAttributes[t]},e.prototype.getAttributes=function(){return he({},this.customAttributes)},e.prototype.setStartTime=function(t){this.startTimeUs=t},e.prototype.setDuration=function(t){this.durationUs=t},e.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),n=t&&t[0];n&&(this.durationUs=Math.floor(n.duration*1e3),this.startTimeUs=Math.floor((n.startTime+this.api.getTimeOrigin())*1e3))},e.createOobTrace=function(t,n,r){var i=ln.getInstance().getUrl();if(i){var s=new e(Px+i,!0),u=Math.floor(ln.getInstance().getTimeOrigin()*1e3);s.setStartTime(u),t&&t[0]&&(s.setDuration(Math.floor(t[0].duration*1e3)),s.putMetric("domInteractive",Math.floor(t[0].domInteractive*1e3)),s.putMetric("domContentLoadedEventEnd",Math.floor(t[0].domContentLoadedEventEnd*1e3)),s.putMetric("loadEventEnd",Math.floor(t[0].loadEventEnd*1e3)));var c="first-paint",l="first-contentful-paint";if(n){var h=n.find(function(g){return g.name===c});h&&h.startTime&&s.putMetric(Dx,Math.floor(h.startTime*1e3));var p=n.find(function(g){return g.name===l});p&&p.startTime&&s.putMetric(xx,Math.floor(p.startTime*1e3)),r&&s.putMetric(Lx,Math.floor(r*1e3))}Vh(s)}},e.createUserTimingTrace=function(t){var n=new e(t,!1,t);Vh(n)},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yk(e){var t=e;if(!(!t||t.responseStart===void 0)){var n=ln.getInstance().getTimeOrigin(),r=Math.floor((t.startTime+n)*1e3),i=t.responseStart?Math.floor((t.responseStart-t.startTime)*1e3):void 0,s=Math.floor((t.responseEnd-t.startTime)*1e3),u=t.name&&t.name.split("?")[0],c={url:u,responsePayloadBytes:t.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:s};rY(c)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hY=5e3;function Xk(){J0()&&(setTimeout(function(){return pY()},0),setTimeout(function(){return dY()},0),setTimeout(function(){return vY()},0))}function dY(){for(var e=ln.getInstance(),t=e.getEntriesByType("resource"),n=0,r=t;n<r.length;n++){var i=r[n];Yk(i)}e.setupObserver("resource",Yk)}function pY(){var e=ln.getInstance(),t=e.getEntriesByType("navigation"),n=e.getEntriesByType("paint");if(e.onFirstInputDelay){var r=setTimeout(function(){rl.createOobTrace(t,n),r=void 0},hY);e.onFirstInputDelay(function(i){r&&(clearTimeout(r),rl.createOobTrace(t,n,i))})}else rl.createOobTrace(t,n)}function vY(){for(var e=ln.getInstance(),t=e.getEntriesByType("measure"),n=0,r=t;n<r.length;n++){var i=r[n];Jk(i)}e.setupObserver("measure",Jk)}function Jk(e){var t=e.name;t.substring(0,nw.length)!==nw&&rl.createUserTimingTrace(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gY=function(){function e(t){this.app=t,ln.getInstance().requiredApisAvailable()&&Dw().then(function(n){n&&(X5(),qx().then(Xk,Xk))}).catch(function(n){qi.info("Environment doesn't support IndexedDB: "+n)})}return e.prototype.trace=function(t){return new rl(t)},Object.defineProperty(e.prototype,"instrumentationEnabled",{get:function(){return Rt.getInstance().instrumentationEnabled},set:function(t){Rt.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataCollectionEnabled",{get:function(){return Rt.getInstance().dataCollectionEnabled},set:function(t){Rt.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mY="[DEFAULT]";function yY(e){var t=function(n,r){if(n.name!==mY)throw on.create("FB not default");if(typeof window>"u")throw on.create("no window");return C5(window),Rt.getInstance().firebaseAppInstance=n,Rt.getInstance().installationsService=r,new gY(n)};e.INTERNAL.registerComponent(new dn("performance",function(n){var r=n.getProvider("app").getImmediate(),i=n.getProvider("installations").getImmediate();return t(r,i)},"PUBLIC")),e.registerVersion(b5,Rx)}yY(oe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _Y="firebase_id",wY="origin",bY=60*1e3,EY="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Gx="https://www.googletagmanager.com/gtag/js",fn;(function(e){e.EVENT="event",e.SET="set",e.CONFIG="config"})(fn||(fn={}));var rw;(function(e){e.ADD_SHIPPING_INFO="add_shipping_info",e.ADD_PAYMENT_INFO="add_payment_info",e.ADD_TO_CART="add_to_cart",e.ADD_TO_WISHLIST="add_to_wishlist",e.BEGIN_CHECKOUT="begin_checkout",e.CHECKOUT_PROGRESS="checkout_progress",e.EXCEPTION="exception",e.GENERATE_LEAD="generate_lead",e.LOGIN="login",e.PAGE_VIEW="page_view",e.PURCHASE="purchase",e.REFUND="refund",e.REMOVE_FROM_CART="remove_from_cart",e.SCREEN_VIEW="screen_view",e.SEARCH="search",e.SELECT_CONTENT="select_content",e.SELECT_ITEM="select_item",e.SELECT_PROMOTION="select_promotion",e.SET_CHECKOUT_OPTION="set_checkout_option",e.SHARE="share",e.SIGN_UP="sign_up",e.TIMING_COMPLETE="timing_complete",e.VIEW_CART="view_cart",e.VIEW_ITEM="view_item",e.VIEW_ITEM_LIST="view_item_list",e.VIEW_PROMOTION="view_promotion",e.VIEW_SEARCH_RESULTS="view_search_results"})(rw||(rw={}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TY(e,t,n,r,i){return C(this,void 0,void 0,function(){var s,u;return S(this,function(c){switch(c.label){case 0:return i&&i.global?(e(fn.EVENT,n,r),[2]):[3,1];case 1:return[4,t];case 2:s=c.sent(),u=he(he({},r),{send_to:s}),e(fn.EVENT,n,u),c.label=3;case 3:return[2]}})})}function IY(e,t,n,r){return C(this,void 0,void 0,function(){var i;return S(this,function(s){switch(s.label){case 0:return r&&r.global?(e(fn.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,t];case 2:i=s.sent(),e(fn.CONFIG,i,{update:!0,screen_name:n}),s.label=3;case 3:return[2]}})})}function SY(e,t,n,r){return C(this,void 0,void 0,function(){var i;return S(this,function(s){switch(s.label){case 0:return r&&r.global?(e(fn.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,t];case 2:i=s.sent(),e(fn.CONFIG,i,{update:!0,user_id:n}),s.label=3;case 3:return[2]}})})}function CY(e,t,n,r){return C(this,void 0,void 0,function(){var i,s,u,c,l;return S(this,function(h){switch(h.label){case 0:if(!(r&&r.global))return[3,1];for(i={},s=0,u=Object.keys(n);s<u.length;s++)c=u[s],i["user_properties."+c]=n[c];return e(fn.SET,i),[2,Promise.resolve()];case 1:return[4,t];case 2:l=h.sent(),e(fn.CONFIG,l,{update:!0,user_properties:n}),h.label=3;case 3:return[2]}})})}function AY(e,t){return C(this,void 0,void 0,function(){var n;return S(this,function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),window["ga-disable-"+n]=!t,[2]}})})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qt=new zs("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kY(e,t){var n=document.createElement("script");n.src=Gx+"?l="+e+"&id="+t,n.async=!0,document.head.appendChild(n)}function NY(e){var t=[];return Array.isArray(window[e])?t=window[e]:window[e]=t,t}function RY(e,t,n,r,i,s){return C(this,void 0,void 0,function(){var u,c,l,h;return S(this,function(p){switch(p.label){case 0:u=r[i],p.label=1;case 1:return p.trys.push([1,7,,8]),u?[4,t[u]]:[3,3];case 2:return p.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return c=p.sent(),l=c.find(function(g){return g.measurementId===i}),l?[4,t[l.appId]]:[3,6];case 5:p.sent(),p.label=6;case 6:return[3,8];case 7:return h=p.sent(),Qt.error(h),[3,8];case 8:return e(fn.CONFIG,i,s),[2]}})})}function OY(e,t,n,r,i){return C(this,void 0,void 0,function(){var s,u,c,l,h,p,g,m,_;return S(this,function(b){switch(b.label){case 0:return b.trys.push([0,4,,5]),s=[],i&&i.send_to?(u=i.send_to,Array.isArray(u)||(u=[u]),[4,Promise.all(n)]):[3,2];case 1:for(c=b.sent(),l=function(E){var I=c.find(function(x){return x.measurementId===E}),N=I&&t[I.appId];if(N)s.push(N);else return s=[],"break"},h=0,p=u;h<p.length&&(g=p[h],m=l(g),m!=="break");h++);b.label=2;case 2:return s.length===0&&(s=Object.values(t)),[4,Promise.all(s)];case 3:return b.sent(),e(fn.EVENT,r,i||{}),[3,5];case 4:return _=b.sent(),Qt.error(_),[3,5];case 5:return[2]}})})}function PY(e,t,n,r){function i(s,u,c){return C(this,void 0,void 0,function(){var l;return S(this,function(h){switch(h.label){case 0:return h.trys.push([0,6,,7]),s!==fn.EVENT?[3,2]:[4,OY(e,t,n,u,c)];case 1:return h.sent(),[3,5];case 2:return s!==fn.CONFIG?[3,4]:[4,RY(e,t,n,r,u,c)];case 3:return h.sent(),[3,5];case 4:e(fn.SET,u),h.label=5;case 5:return[3,7];case 6:return l=h.sent(),Qt.error(l),[3,7];case 7:return[2]}})})}return i}function DY(e,t,n,r,i){var s=function(){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=PY(s,e,t,n),{gtagCore:s,wrappedGtag:window[i]}}function xY(){for(var e=window.document.getElementsByTagName("script"),t=0,n=Object.values(e);t<n.length;t++){var r=n[t];if(r.src&&r.src.includes(Gx))return r}return null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xr,LY=(xr={},xr["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",xr["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",xr["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",xr["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",xr["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",xr["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",xr["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",xr["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',xr["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',xr),wr=new Hi("analytics","Analytics",LY);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var MY=30,FY=1e3,UY=function(){function e(t,n){t===void 0&&(t={}),n===void 0&&(n=FY),this.throttleMetadata=t,this.intervalMillis=n}return e.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},e.prototype.setThrottleMetadata=function(t,n){this.throttleMetadata[t]=n},e.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},e}(),$x=new UY;function jY(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function VY(e){var t;return C(this,void 0,void 0,function(){var n,r,i,s,u,c,l;return S(this,function(h){switch(h.label){case 0:return n=e.appId,r=e.apiKey,i={method:"GET",headers:jY(r)},s=EY.replace("{app-id}",n),[4,fetch(s,i)];case 1:if(u=h.sent(),!(u.status!==200&&u.status!==304))return[3,6];c="",h.label=2;case 2:return h.trys.push([2,4,,5]),[4,u.json()];case 3:return l=h.sent(),!((t=l.error)===null||t===void 0)&&t.message&&(c=l.error.message),[3,5];case 4:return h.sent(),[3,5];case 5:throw wr.create("config-fetch-failed",{httpStatus:u.status,responseMessage:c});case 6:return[2,u.json()]}})})}function BY(e,t,n){return t===void 0&&(t=$x),C(this,void 0,void 0,function(){var r,i,s,u,c,l,h=this;return S(this,function(p){if(r=e.options,i=r.appId,s=r.apiKey,u=r.measurementId,!i)throw wr.create("no-app-id");if(!s){if(u)return[2,{measurementId:u,appId:i}];throw wr.create("no-api-key")}return c=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new HY,setTimeout(function(){return C(h,void 0,void 0,function(){return S(this,function(g){return l.abort(),[2]})})},n!==void 0?n:bY),[2,zx({appId:i,apiKey:s,measurementId:u},c,l,t)]})})}function zx(e,t,n,r){var i=t.throttleEndTimeMillis,s=t.backoffCount;return r===void 0&&(r=$x),C(this,void 0,void 0,function(){var u,c,l,h,p,g,m;return S(this,function(_){switch(_.label){case 0:u=e.appId,c=e.measurementId,_.label=1;case 1:return _.trys.push([1,3,,4]),[4,qY(n,i)];case 2:return _.sent(),[3,4];case 3:if(l=_.sent(),c)return Qt.warn("Timed out fetching this Firebase app's measurement ID from the server."+(" Falling back to the measurement ID "+c)+(' provided in the "measurementId" field in the local Firebase config. ['+l.message+"]")),[2,{appId:u,measurementId:c}];throw l;case 4:return _.trys.push([4,6,,7]),[4,VY(e)];case 5:return h=_.sent(),r.deleteThrottleMetadata(u),[2,h];case 6:if(p=_.sent(),!KY(p)){if(r.deleteThrottleMetadata(u),c)return Qt.warn("Failed to fetch this Firebase app's measurement ID from the server."+(" Falling back to the measurement ID "+c)+(' provided in the "measurementId" field in the local Firebase config. ['+p.message+"]")),[2,{appId:u,measurementId:c}];throw p}return g=Number(p.customData.httpStatus)===503?r_(s,r.intervalMillis,MY):r_(s,r.intervalMillis),m={throttleEndTimeMillis:Date.now()+g,backoffCount:s+1},r.setThrottleMetadata(u,m),Qt.debug("Calling attemptFetch again in "+g+" millis"),[2,zx(e,m,n,r)];case 7:return[2]}})})}function qY(e,t){return new Promise(function(n,r){var i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener(function(){clearTimeout(s),r(wr.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function KY(e){if(!(e instanceof Cu)||!e.customData)return!1;var t=Number(e.customData.httpStatus);return t===429||t===500||t===503||t===504}var HY=function(){function e(){this.listeners=[]}return e.prototype.addEventListener=function(t){this.listeners.push(t)},e.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WY(){return C(this,void 0,void 0,function(){var e;return S(this,function(t){switch(t.label){case 0:return Ul()?[3,1]:(Qt.warn(wr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return t.trys.push([1,3,,4]),[4,Dw()];case 2:return t.sent(),[3,4];case 3:return e=t.sent(),Qt.warn(wr.create("indexeddb-unavailable",{errorInfo:e}).message),[2,!1];case 4:return[2,!0]}})})}function GY(e,t,n,r,i,s){return C(this,void 0,void 0,function(){var u,c,l,h,p,g,m;return S(this,function(_){switch(_.label){case 0:return u=BY(e),u.then(function(b){n[b.measurementId]=b.appId,e.options.measurementId&&b.measurementId!==e.options.measurementId&&Qt.warn("The measurement ID in the local Firebase config ("+e.options.measurementId+")"+(" does not match the measurement ID fetched from the server ("+b.measurementId+").")+" To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")}).catch(function(b){return Qt.error(b)}),t.push(u),c=WY().then(function(b){if(b)return r.getId()}),[4,Promise.all([u,c])];case 1:return l=_.sent(),h=l[0],p=l[1],xY()||kY(s,h.measurementId),i("js",new Date),g=(m={},m[wY]="firebase",m.update=!0,m),p!=null&&(g[_Y]=p),i(fn.CONFIG,h.measurementId,g),[2,h.measurementId]}})})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Si={},Zk=[],eN={},Zh="dataLayer",Qx="gtag",tN,xc,iw=!1;function $Y(e){if(iw)throw wr.create("already-initialized");e.dataLayerName&&(Zh=e.dataLayerName),e.gtagName&&(Qx=e.gtagName)}function zY(){var e=[];if(Pw()&&e.push("This is a browser extension environment."),mR()||e.push("Cookies are not available."),e.length>0){var t=e.map(function(r,i){return"("+(i+1)+") "+r}).join(" "),n=wr.create("invalid-analytics-context",{errorInfo:t});Qt.warn(n.message)}}function QY(e,t){zY();var n=e.options.appId;if(!n)throw wr.create("no-app-id");if(!e.options.apiKey)if(e.options.measurementId)Qt.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest'+(" measurement ID for this Firebase app. Falling back to the measurement ID "+e.options.measurementId)+' provided in the "measurementId" field in the local Firebase config.');else throw wr.create("no-api-key");if(Si[n]!=null)throw wr.create("already-exists",{id:n});if(!iw){NY(Zh);var r=DY(Si,Zk,eN,Zh,Qx),i=r.wrappedGtag,s=r.gtagCore;xc=i,tN=s,iw=!0}Si[n]=GY(e,Zk,eN,t,tN,Zh);var u={app:e,logEvent:function(c,l,h){TY(xc,Si[n],c,l,h).catch(function(p){return Qt.error(p)})},setCurrentScreen:function(c,l){IY(xc,Si[n],c,l).catch(function(h){return Qt.error(h)})},setUserId:function(c,l){SY(xc,Si[n],c,l).catch(function(h){return Qt.error(h)})},setUserProperties:function(c,l){CY(xc,Si[n],c,l).catch(function(h){return Qt.error(h)})},setAnalyticsCollectionEnabled:function(c){AY(Si[n],c).catch(function(l){return Qt.error(l)})},INTERNAL:{delete:function(){return delete Si[n],Promise.resolve()}}};return u}var YY="@firebase/analytics",XY="0.6.18",nN="analytics";function JY(e){e.INTERNAL.registerComponent(new dn(nN,function(n){var r=n.getProvider("app").getImmediate(),i=n.getProvider("installations").getImmediate();return QY(r,i)},"PUBLIC").setServiceProps({settings:$Y,EventName:rw,isSupported:ZY})),e.INTERNAL.registerComponent(new dn("analytics-internal",t,"PRIVATE")),e.registerVersion(YY,XY);function t(n){try{var r=n.getProvider(nN).getImmediate();return{logEvent:r.logEvent}}catch(i){throw wr.create("interop-component-reg-failed",{reason:i})}}}JY(oe);function ZY(){return C(this,void 0,void 0,function(){var e;return S(this,function(t){switch(t.label){case 0:if(Pw())return[2,!1];if(!mR())return[2,!1];if(!Ul())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,Dw()];case 2:return e=t.sent(),[2,e];case 3:return t.sent(),[2,!1];case 4:return[2]}})})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var eX=function(){function e(t,n,r,i){this.client=t,this.storage=n,this.storageCache=r,this.logger=i}return e.prototype.isCachedDataFresh=function(t,n){if(!n)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var r=Date.now()-n,i=r<=t;return this.logger.debug("Config fetch cache check."+(" Cache age millis: "+r+".")+(" Cache max age millis (minimumFetchIntervalMillis setting): "+t+".")+(" Is cache hit: "+i+".")),i},e.prototype.fetch=function(t){return C(this,void 0,void 0,function(){var n,r,i,s,u;return S(this,function(c){switch(c.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return n=c.sent(),r=n[0],i=n[1],i&&this.isCachedDataFresh(t.cacheMaxAgeMillis,r)?[2,i]:(t.eTag=i&&i.eTag,[4,this.client.fetch(t)]);case 2:return s=c.sent(),u=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],s.status===200&&u.push(this.storage.setLastSuccessfulFetchResponse(s)),[4,Promise.all(u)];case 3:return c.sent(),[2,s]}})})},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wn,tX=(wn={},wn["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",wn["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",wn["registration-api-key"]="Undefined API key. Check Firebase app initialization.",wn["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",wn["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",wn["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",wn["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",wn["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",wn["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",wn["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',wn["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',wn["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",wn["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",wn),mr=new Hi("remoteconfig","Remote Config",tX);function nX(e,t){return e instanceof Cu&&e.code.indexOf(t)!==-1}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rX(e){return e===void 0&&(e=navigator),e.languages&&e.languages[0]||e.language}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var iX=function(){function e(t,n,r,i,s,u){this.firebaseInstallations=t,this.sdkVersion=n,this.namespace=r,this.projectId=i,this.apiKey=s,this.appId=u}return e.prototype.fetch=function(t){return C(this,void 0,void 0,function(){var n,r,i,s,u,c,l,h,p,g,m,_,b,E,I,N,x,P,z;return S(this,function(W){switch(W.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:n=W.sent(),r=n[0],i=n[1],s=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",u=s+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,c={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},l={sdk_version:this.sdkVersion,app_instance_id:r,app_instance_id_token:i,app_id:this.appId,language_code:rX()},h={method:"POST",headers:c,body:JSON.stringify(l)},p=fetch(u,h),g=new Promise(function(V,ne){t.signal.addEventListener(function(){var M=new Error("The operation was aborted.");M.name="AbortError",ne(M)})}),W.label=2;case 2:return W.trys.push([2,5,,6]),[4,Promise.race([p,g])];case 3:return W.sent(),[4,p];case 4:return m=W.sent(),[3,6];case 5:throw _=W.sent(),b="fetch-client-network",_.name==="AbortError"&&(b="fetch-timeout"),mr.create(b,{originalErrorMessage:_.message});case 6:if(E=m.status,I=m.headers.get("ETag")||void 0,m.status!==200)return[3,11];P=void 0,W.label=7;case 7:return W.trys.push([7,9,,10]),[4,m.json()];case 8:return P=W.sent(),[3,10];case 9:throw z=W.sent(),mr.create("fetch-client-parse",{originalErrorMessage:z.message});case 10:N=P.entries,x=P.state,W.label=11;case 11:if(x==="INSTANCE_STATE_UNSPECIFIED"?E=500:x==="NO_CHANGE"?E=304:(x==="NO_TEMPLATE"||x==="EMPTY_CONFIG")&&(N={}),E!==304&&E!==200)throw mr.create("fetch-status",{httpStatus:E});return[2,{status:E,eTag:I,config:N}]}})})},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oX=function(){function e(){this.listeners=[]}return e.prototype.addEventListener=function(t){this.listeners.push(t)},e.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sX=!1,aX="",rN=0,uX=["1","true","t","yes","y","on"],My=function(){function e(t,n){n===void 0&&(n=aX),this._source=t,this._value=n}return e.prototype.asString=function(){return this._value},e.prototype.asBoolean=function(){return this._source==="static"?sX:uX.indexOf(this._value.toLowerCase())>=0},e.prototype.asNumber=function(){if(this._source==="static")return rN;var t=Number(this._value);return isNaN(t)&&(t=rN),t},e.prototype.getSource=function(){return this._source},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cX=60*1e3,lX=12*60*60*1e3,fX=function(){function e(t,n,r,i,s){this.app=t,this._client=n,this._storageCache=r,this._storage=i,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:cX,minimumFetchIntervalMillis:lX},this.defaultConfig={}}return e.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=Re.DEBUG;break;case"silent":this._logger.logLevel=Re.SILENT;break;default:this._logger.logLevel=Re.ERROR}},Object.defineProperty(e.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),e.prototype.activate=function(){return C(this,void 0,void 0,function(){var t,n,r;return S(this,function(i){switch(i.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return t=i.sent(),n=t[0],r=t[1],!n||!n.config||!n.eTag||n.eTag===r?[2,!1]:[4,Promise.all([this._storageCache.setActiveConfig(n.config),this._storage.setActiveConfigEtag(n.eTag)])];case 2:return i.sent(),[2,!0]}})})},e.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then(function(){t._isInitializationComplete=!0})),this._initializePromise},e.prototype.fetch=function(){return C(this,void 0,void 0,function(){var t,n,r,i=this;return S(this,function(s){switch(s.label){case 0:t=new oX,setTimeout(function(){return C(i,void 0,void 0,function(){return S(this,function(u){return t.abort(),[2]})})},this.settings.fetchTimeoutMillis),s.label=1;case 1:return s.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:t})];case 2:return s.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return s.sent(),[3,6];case 4:return n=s.sent(),r=nX(n,"fetch-throttle")?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(r)];case 5:throw s.sent(),n;case 6:return[2]}})})},e.prototype.fetchAndActivate=function(){return C(this,void 0,void 0,function(){return S(this,function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}})})},e.prototype.getAll=function(){var t=this;return hX(this._storageCache.getActiveConfig(),this.defaultConfig).reduce(function(n,r){return n[r]=t.getValue(r),n},{})},e.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},e.prototype.getNumber=function(t){return this.getValue(t).asNumber()},e.prototype.getString=function(t){return this.getValue(t).asString()},e.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var n=this._storageCache.getActiveConfig();return n&&n[t]!==void 0?new My("remote",n[t]):this.defaultConfig&&this.defaultConfig[t]!==void 0?new My("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new My("static"))},e}();function hX(e,t){return e===void 0&&(e={}),t===void 0&&(t={}),Object.keys(he(he({},e),t))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ed(e,t){var n=e.target.error||void 0;return mr.create(t,{originalErrorMessage:n&&n.message})}var ds="app_namespace_store",dX="firebase_remote_config",pX=1;function vX(){return new Promise(function(e,t){var n=indexedDB.open(dX,pX);n.onerror=function(r){t(ed(r,"storage-open"))},n.onsuccess=function(r){e(r.target.result)},n.onupgradeneeded=function(r){var i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(ds,{keyPath:"compositeKey"})}}})}var gX=function(){function e(t,n,r,i){i===void 0&&(i=vX()),this.appId=t,this.appName=n,this.namespace=r,this.openDbPromise=i}return e.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},e.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},e.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},e.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},e.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},e.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},e.prototype.getActiveConfig=function(){return this.get("active_config")},e.prototype.setActiveConfig=function(t){return this.set("active_config",t)},e.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},e.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},e.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},e.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},e.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},e.prototype.get=function(t){return C(this,void 0,void 0,function(){var n,r=this;return S(this,function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise(function(s,u){var c=n.transaction([ds],"readonly"),l=c.objectStore(ds),h=r.createCompositeKey(t);try{var p=l.get(h);p.onerror=function(g){u(ed(g,"storage-get"))},p.onsuccess=function(g){var m=g.target.result;s(m?m.value:void 0)}}catch(g){u(mr.create("storage-get",{originalErrorMessage:g&&g.message}))}})]}})})},e.prototype.set=function(t,n){return C(this,void 0,void 0,function(){var r,i=this;return S(this,function(s){switch(s.label){case 0:return[4,this.openDbPromise];case 1:return r=s.sent(),[2,new Promise(function(u,c){var l=r.transaction([ds],"readwrite"),h=l.objectStore(ds),p=i.createCompositeKey(t);try{var g=h.put({compositeKey:p,value:n});g.onerror=function(m){c(ed(m,"storage-set"))},g.onsuccess=function(){u()}}catch(m){c(mr.create("storage-set",{originalErrorMessage:m&&m.message}))}})]}})})},e.prototype.delete=function(t){return C(this,void 0,void 0,function(){var n,r=this;return S(this,function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise(function(s,u){var c=n.transaction([ds],"readwrite"),l=c.objectStore(ds),h=r.createCompositeKey(t);try{var p=l.delete(h);p.onerror=function(g){u(ed(g,"storage-delete"))},p.onsuccess=function(){s()}}catch(g){u(mr.create("storage-delete",{originalErrorMessage:g&&g.message}))}})]}})})},e.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mX=function(){function e(t){this.storage=t}return e.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},e.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},e.prototype.getActiveConfig=function(){return this.activeConfig},e.prototype.loadFromStorage=function(){return C(this,void 0,void 0,function(){var t,n,r,i,s,u;return S(this,function(c){switch(c.label){case 0:return t=this.storage.getLastFetchStatus(),n=this.storage.getLastSuccessfulFetchTimestampMillis(),r=this.storage.getActiveConfig(),[4,t];case 1:return i=c.sent(),i&&(this.lastFetchStatus=i),[4,n];case 2:return s=c.sent(),s&&(this.lastSuccessfulFetchTimestampMillis=s),[4,r];case 3:return u=c.sent(),u&&(this.activeConfig=u),[2]}})})},e.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},e.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},e.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yX(e,t){return new Promise(function(n,r){var i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener(function(){clearTimeout(s),r(mr.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function _X(e){if(!(e instanceof Cu)||!e.customData)return!1;var t=Number(e.customData.httpStatus);return t===429||t===500||t===503||t===504}var wX=function(){function e(t,n){this.client=t,this.storage=n}return e.prototype.fetch=function(t){return C(this,void 0,void 0,function(){var n;return S(this,function(r){switch(r.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return n=r.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(t,n)]}})})},e.prototype.attemptFetch=function(t,n){var r=n.throttleEndTimeMillis,i=n.backoffCount;return C(this,void 0,void 0,function(){var s,u,c;return S(this,function(l){switch(l.label){case 0:return[4,yX(t.signal,r)];case 1:l.sent(),l.label=2;case 2:return l.trys.push([2,5,,7]),[4,this.client.fetch(t)];case 3:return s=l.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return l.sent(),[2,s];case 5:if(u=l.sent(),!_X(u))throw u;return c={throttleEndTimeMillis:Date.now()+r_(i),backoffCount:i+1},[4,this.storage.setThrottleMetadata(c)];case 6:return l.sent(),[2,this.attemptFetch(t,c)];case 7:return[2]}})})},e}(),iN="@firebase/remote-config",bX="0.1.43";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EX(e){e.INTERNAL.registerComponent(new dn("remoteConfig",t,"PUBLIC").setMultipleInstances(!0)),e.registerVersion(iN,bX);function t(n,r){var i=r.instanceIdentifier,s=n.getProvider("app").getImmediate(),u=n.getProvider("installations").getImmediate();if(typeof window>"u")throw mr.create("registration-window");var c=s.options,l=c.projectId,h=c.apiKey,p=c.appId;if(!l)throw mr.create("registration-project-id");if(!h)throw mr.create("registration-api-key");if(!p)throw mr.create("registration-app-id");i=i||"firebase";var g=new gX(p,s.name,i),m=new mX(g),_=new zs(iN);_.logLevel=Re.ERROR;var b=new iX(u,e.SDK_VERSION,i,l,h,p),E=new wX(b,g),I=new eX(E,g,m,_),N=new fX(s,I,m,g,_);return N.ensureInitialized(),N}}EX(oe);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lr,TX=(Lr={},Lr["already-activated"]="You are trying to activate AppCheck for FirebaseApp {$appName}, while it is already activated. AppCheck can only be activated once.",Lr["use-before-activation"]="AppCheck is being used before activate() is called for FirebaseApp {$appName}. Please make sure you call activate() before instantiating other Firebase services.",Lr["fetch-network-error"]="Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",Lr["fetch-parse-error"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",Lr["fetch-status-error"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",Lr["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",Lr["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",Lr["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",Lr["recaptcha-error"]="ReCAPTCHA error.",Lr),rr=new Hi("appCheck","AppCheck",TX);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yx=new Map,IX={activated:!1,tokenObservers:[]},SX={enabled:!1};function Nn(e){return Yx.get(e)||IX}function fi(e,t){Yx.set(e,t)}function tE(){return SX}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xx="https://content-firebaseappcheck.googleapis.com/v1beta",CX="exchangeRecaptchaToken",AX="exchangeDebugToken",oN={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kX=function(){function e(t,n,r,i,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}return e.prototype.start=function(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(function(){})},e.prototype.stop=function(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)},e.prototype.isRunning=function(){return!!this.pending},e.prototype.process=function(t){return C(this,void 0,void 0,function(){var n;return S(this,function(r){switch(r.label){case 0:this.stop(),r.label=1;case 1:return r.trys.push([1,6,,7]),this.pending=new Bt,[4,NX(this.getNextRun(t))];case 2:return r.sent(),this.pending.resolve(),[4,this.pending.promise];case 3:return r.sent(),this.pending=new Bt,[4,this.operation()];case 4:return r.sent(),this.pending.resolve(),[4,this.pending.promise];case 5:return r.sent(),this.process(!0).catch(function(){}),[3,7];case 6:return n=r.sent(),this.retryPolicy(n)?this.process(!1).catch(function(){}):this.stop(),[3,7];case 7:return[2]}})})},e.prototype.getNextRun=function(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();var n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n},e}();function NX(e){return new Promise(function(t){setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sN(){return self.grecaptcha}function Jx(e){if(!Nn(e).activated)throw rr.create("use-before-activation",{appName:e.name})}function RX(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,n=e==="x"?t:t&3|8;return n.toString(16)})}function OX(e){return dp.encodeString(JSON.stringify(e),!1)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zx(e,t){var n=e.url,r=e.body;return C(this,void 0,void 0,function(){var i,s,u,c,l,h,p,g,m,_;return S(this,function(b){switch(b.label){case 0:i={"Content-Type":"application/json"},s=t.getImmediate({optional:!0}),s&&(i["X-Firebase-Client"]=s.getPlatformInfoString()),u={method:"POST",body:JSON.stringify(r),headers:i},b.label=1;case 1:return b.trys.push([1,3,,4]),[4,fetch(n,u)];case 2:return c=b.sent(),[3,4];case 3:throw l=b.sent(),rr.create("fetch-network-error",{originalErrorMessage:l.message});case 4:if(c.status!==200)throw rr.create("fetch-status-error",{httpStatus:c.status});b.label=5;case 5:return b.trys.push([5,7,,8]),[4,c.json()];case 6:return h=b.sent(),[3,8];case 7:throw p=b.sent(),rr.create("fetch-parse-error",{originalErrorMessage:p.message});case 8:if(g=h.ttl.match(/^([\d.]+)(s)$/),!g||!g[2]||isNaN(Number(g[1])))throw rr.create("fetch-parse-error",{originalErrorMessage:"ttl field (timeToLive) is not in standard Protobuf Duration "+("format: "+h.ttl)});return m=Number(g[1])*1e3,_=Date.now(),[2,{token:h.attestationToken,expireTimeMillis:_+m,issuedAtTimeMillis:_}]}})})}function PX(e,t){var n=e.options,r=n.projectId,i=n.appId,s=n.apiKey;return{url:Xx+"/projects/"+r+"/apps/"+i+":"+CX+"?key="+s,body:{recaptcha_token:t}}}function DX(e,t){var n=e.options,r=n.projectId,i=n.appId,s=n.apiKey;return{url:Xx+"/projects/"+r+"/apps/"+i+":"+AX+"?key="+s,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xX="firebase-app-check-database",LX=1,Ml="firebase-app-check-store",eL="debug-token",Bh=null;function tL(){return Bh||(Bh=new Promise(function(e,t){try{var n=indexedDB.open(xX,LX);n.onsuccess=function(r){e(r.target.result)},n.onerror=function(r){var i;t(rr.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=function(r){var i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Ml,{keyPath:"compositeKey"})}}}catch(r){t(rr.create("storage-open",{originalErrorMessage:r.message}))}}),Bh)}function MX(e){return rL(iL(e))}function FX(e,t){return nL(iL(e),t)}function UX(e){return nL(eL,e)}function jX(){return rL(eL)}function nL(e,t){return C(this,void 0,void 0,function(){var n,r,i,s;return S(this,function(u){switch(u.label){case 0:return[4,tL()];case 1:return n=u.sent(),r=n.transaction(Ml,"readwrite"),i=r.objectStore(Ml),s=i.put({compositeKey:e,value:t}),[2,new Promise(function(c,l){s.onsuccess=function(h){c()},r.onerror=function(h){var p;l(rr.create("storage-set",{originalErrorMessage:(p=h.target.error)===null||p===void 0?void 0:p.message}))}})]}})})}function rL(e){return C(this,void 0,void 0,function(){var t,n,r,i;return S(this,function(s){switch(s.label){case 0:return[4,tL()];case 1:return t=s.sent(),n=t.transaction(Ml,"readonly"),r=n.objectStore(Ml),i=r.get(e),[2,new Promise(function(u,c){i.onsuccess=function(l){var h=l.target.result;u(h?h.value:void 0)},n.onerror=function(l){var h;c(rr.create("storage-get",{originalErrorMessage:(h=l.target.error)===null||h===void 0?void 0:h.message}))}})]}})})}function iL(e){return e.options.appId+"-"+e.name}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yv=new zs("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VX(e){return C(this,void 0,void 0,function(){var t,n;return S(this,function(r){switch(r.label){case 0:if(!Ul())return[3,5];t=void 0,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,MX(e)];case 2:return t=r.sent(),[3,4];case 3:return n=r.sent(),yv.warn("Failed to read token from indexeddb. Error: "+n),[3,4];case 4:return[2,t];case 5:return[2,void 0]}})})}function aN(e,t){return Ul()?FX(e,t).catch(function(n){yv.warn("Failed to write token to indexeddb. Error: "+n)}):Promise.resolve()}function BX(){return C(this,void 0,void 0,function(){var e,t;return S(this,function(n){switch(n.label){case 0:e=void 0,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,jX()];case 2:return e=n.sent(),[3,4];case 3:return n.sent(),[3,4];case 4:return e?[2,e]:(t=RX(),UX(t).catch(function(r){return yv.warn("Failed to persist debug token to indexeddb. Error: "+r)}),console.log("AppCheck debug token: "+t+". You will need to whitelist it in the Firebase console for it to work"),[2,t])}})})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qX(){var e=tE();return e.enabled}function KX(){return C(this,void 0,void 0,function(){var e;return S(this,function(t){if(e=tE(),e.enabled&&e.token)return[2,e.token.promise];throw Error(`
            Can't get debug token in production mode.
        `)})})}function HX(){var e=Y4();if(!(typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)){var t=tE();t.enabled=!0;var n=new Bt;t.token=n,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(BX())}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var WX={error:"UNKNOWN_ERROR"};function Yd(e,t,n){return n===void 0&&(n=!1),C(this,void 0,void 0,function(){var r,i,s,u,c,l,h,p,g,m;return S(this,function(_){switch(_.label){case 0:return Jx(e),r=Nn(e),i=r.token,s=void 0,i?[3,2]:[4,r.cachedTokenPromise];case 1:u=_.sent(),u&&Fl(u)&&(i=u,fi(e,he(he({},r),{token:i})),uN(e,{token:i.token})),_.label=2;case 2:return!n&&i&&Fl(i)?[2,{token:i.token}]:qX()?(l=Zx,h=DX,p=[e],[4,KX()]):[3,6];case 3:return[4,l.apply(void 0,[h.apply(void 0,p.concat([_.sent()])),t])];case 4:return c=_.sent(),[4,aN(e,c)];case 5:return _.sent(),fi(e,he(he({},r),{token:c})),[2,{token:c.token}];case 6:return _.trys.push([6,8,,9]),[4,r.provider.getToken()];case 7:return i=_.sent(),[3,9];case 8:return g=_.sent(),yv.error(g),s=g,[3,9];case 9:return i?[3,10]:(m=$X(s),[3,12]);case 10:return m={token:i.token},fi(e,he(he({},r),{token:i})),[4,aN(e,i)];case 11:_.sent(),_.label=12;case 12:return uN(e,m),[2,m]}})})}function oL(e,t,n,r,i){var s=Nn(e),u={next:r,error:i,type:n},c=he(he({},s),{tokenObservers:Ie(Ie([],s.tokenObservers),[u])});if(!c.tokenRefresher){var l=GX(e,t);c.tokenRefresher=l}if(!c.tokenRefresher.isRunning()&&s.isTokenAutoRefreshEnabled&&c.tokenRefresher.start(),s.token&&Fl(s.token)){var h=s.token;Promise.resolve().then(function(){return r({token:h.token})}).catch(function(){})}else s.token==null&&s.cachedTokenPromise.then(function(p){p&&Fl(p)&&r({token:p.token})}).catch(function(){});fi(e,c)}function nE(e,t){var n=Nn(e),r=n.tokenObservers.filter(function(i){return i.next!==t});r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),fi(e,he(he({},n),{tokenObservers:r}))}function GX(e,t){var n=this;return new kX(function(){return C(n,void 0,void 0,function(){var r,i;return S(this,function(s){switch(s.label){case 0:return r=Nn(e),r.token?[3,2]:[4,Yd(e,t)];case 1:return i=s.sent(),[3,4];case 2:return[4,Yd(e,t,!0)];case 3:i=s.sent(),s.label=4;case 4:if(i.error)throw i.error;return[2]}})})},function(){return!0},function(){var r=Nn(e);if(r.token){var i=r.token.issuedAtTimeMillis+(r.token.expireTimeMillis-r.token.issuedAtTimeMillis)*.5+3e5,s=r.token.expireTimeMillis-5*60*1e3;return i=Math.min(i,s),Math.max(0,i-Date.now())}else return 0},oN.RETRIAL_MIN_WAIT,oN.RETRIAL_MAX_WAIT)}function uN(e,t){for(var n=Nn(e).tokenObservers,r=0,i=n;r<i.length;r++){var s=i[r];try{s.type==="EXTERNAL"&&t.error!=null?s.error(t.error):s.next(t)}catch{}}}function Fl(e){return e.expireTimeMillis-Date.now()>0}function $X(e){return{token:OX(WX),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zX="https://www.google.com/recaptcha/api.js";function QX(e,t){var n=Nn(e),r=new Bt;fi(e,he(he({},n),{reCAPTCHAState:{initialized:r}}));var i="fire_app_check_"+e.name,s=document.createElement("div");s.id=i,s.style.display="none",document.body.appendChild(s);var u=sN();return u?u.ready(function(){cN(e,t,u,i),r.resolve(u)}):XX(function(){var c=sN();if(!c)throw new Error("no recaptcha");c.ready(function(){cN(e,t,c,i),r.resolve(c)})}),r.promise}function YX(e){return C(this,void 0,void 0,function(){var t,n;return S(this,function(r){switch(r.label){case 0:return Jx(e),t=Nn(e).reCAPTCHAState,[4,t.initialized.promise];case 1:return n=r.sent(),[2,new Promise(function(i,s){var u=Nn(e).reCAPTCHAState;n.ready(function(){i(n.execute(u.widgetId,{action:"fire_app_check"}))})})]}})})}function cN(e,t,n,r){var i=n.render(r,{sitekey:t,size:"invisible"}),s=Nn(e);fi(e,he(he({},s),{reCAPTCHAState:he(he({},s.reCAPTCHAState),{widgetId:i})}))}function XX(e){var t=document.createElement("script");t.src=""+zX,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ow=function(){function e(t){this._siteKey=t}return e.prototype.getToken=function(){return C(this,void 0,void 0,function(){var t;return S(this,function(n){switch(n.label){case 0:if(!this._app||!this._platformLoggerProvider)throw rr.create("use-before-activation",{appName:""});n.label=1;case 1:return n.trys.push([1,3,,4]),[4,YX(this._app)];case 2:return t=n.sent(),[3,4];case 3:throw n.sent(),rr.create("recaptcha-error");case 4:return[2,Zx(PX(this._app,t),this._platformLoggerProvider)]}})})},e.prototype.initialize=function(t,n){this._app=t,this._platformLoggerProvider=n,QX(t,this._siteKey).catch(function(){})},e}(),sw=function(){function e(t){this._customProviderOptions=t}return e.prototype.getToken=function(){return C(this,void 0,void 0,function(){var t,n,r;return S(this,function(i){switch(i.label){case 0:if(!this._app)throw rr.create("use-before-activation",{appName:""});return[4,this._customProviderOptions.getToken()];case 1:return t=i.sent(),n=eV(t.token),r=n!==null&&n<Date.now()&&n>0?n*1e3:Date.now(),[2,he(he({},t),{issuedAtTimeMillis:r})]}})})},e.prototype.initialize=function(t){this._app=t},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JX(e,t,n,r){var i=Nn(e);if(i.activated)throw rr.create("already-activated",{appName:e.name});var s=he(he({},i),{activated:!0});s.cachedTokenPromise=VX(e).then(function(u){return u&&Fl(u)&&fi(e,he(he({},Nn(e)),{token:u})),u}),typeof t=="string"?s.provider=new ow(t):t instanceof ow||t instanceof sw?s.provider=t:s.provider=new sw({getToken:t.getToken}),s.isTokenAutoRefreshEnabled=r===void 0?e.automaticDataCollectionEnabled:r,fi(e,s),s.provider.initialize(e,n)}function ZX(e,t){var n=Nn(e);n.tokenRefresher&&(t===!0?n.tokenRefresher.start():n.tokenRefresher.stop()),fi(e,he(he({},n),{isTokenAutoRefreshEnabled:t}))}function e8(e,t,n){return C(this,void 0,void 0,function(){var r;return S(this,function(i){switch(i.label){case 0:return[4,Yd(e,t,n)];case 1:if(r=i.sent(),r.error)throw r.error;return[2,{token:r.token}]}})})}function t8(e,t,n,r,i){var s=function(){},u=function(){};return n.next!=null?s=n.next.bind(n):s=n,n.error!=null?u=n.error.bind(n):r&&(u=r),oL(e,t,"EXTERNAL",s,u),function(){return nE(e,s)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n8(e,t){return{app:e,activate:function(n,r){return JX(e,n,t,r)},setTokenAutoRefreshEnabled:function(n){return ZX(e,n)},getToken:function(n){return e8(e,t,n)},onTokenChanged:function(n,r,i){return t8(e,t,n,r)},INTERNAL:{delete:function(){for(var n=Nn(e).tokenObservers,r=0,i=n;r<i.length;r++){var s=i[r];nE(e,s.next)}return Promise.resolve()}}}}function r8(e,t){return{getToken:function(n){return Yd(e,t,n)},addTokenListener:function(n){return oL(e,t,"INTERNAL",n)},removeTokenListener:function(n){return nE(e,n)}}}var i8="@firebase/app-check",o8="0.3.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var s8="appCheck",lN="app-check-internal";function a8(e){e.INTERNAL.registerComponent(new dn(s8,function(t){var n=t.getProvider("app").getImmediate(),r=t.getProvider("platform-logger");return n8(n,r)},"PUBLIC").setServiceProps({ReCaptchaV3Provider:ow,CustomProvider:sw}).setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(function(t,n,r){var i=t.getProvider(lN);i.initialize()})),e.INTERNAL.registerComponent(new dn(lN,function(t){var n=t.getProvider("app").getImmediate(),r=t.getProvider("platform-logger");return r8(n,r)},"PUBLIC").setInstantiationMode("EXPLICIT")),e.registerVersion(i8,o8)}a8(oe);HX();var u8="firebase",sL="8.10.1";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */oe.registerVersion(u8,sL,"app");oe.SDK_VERSION=sL;var c8="firebase",l8="8.10.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */console.warn(`
It looks like you're using the development build of the Firebase JS SDK.
When deploying Firebase apps to production, it is advisable to only import
the individual SDK components you intend to use.

For the module builds, these are available in the following manner
(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):

CommonJS Modules:
const firebase = require('firebase/app');
require('firebase/<PACKAGE>');

ES Modules:
import firebase from 'firebase/app';
import 'firebase/<PACKAGE>';

Typescript:
import firebase from 'firebase/app';
import 'firebase/<PACKAGE>';
`);oe.registerVersion(c8,l8);function f8(e){for(let t=e.length-1;t>0;t--){let n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e}function h8(e){return new Promise(t=>setTimeout(t,e))}const d8=B4("questionsStore",{state:()=>({isLoading:!1,questions:[],randomizedQuestions:[],userAnswers:[],timeStart:null,timeEnd:null}),getters:{correctAnswers(e){return e.userAnswers.filter(t=>t.correct)},questionsLeft(e){return e.randomizedQuestions.length-e.userAnswers.length},currentQuestionNumber(e){return e.userAnswers.length},getTimeTotal(e){const t=e.timeEnd-e.timeStart;return new Date(t).toISOString().slice(11,19)}},actions:{randomizeQuestions(){this.randomizedQuestions=f8(this.questions),this.timeStart=performance.now()},async getQuestions(){this.isLoading=!0;const t=(await oe.database().ref("questions").once("value")).val(),n=Object.entries(t).map(r=>({...r[1]}));this.questions=n,console.log(n),await h8(1e3),this.isLoading=!1},addUserQuestion(e){this.userAnswers.push(e)},restartQuiz(){this.userAnswers=[],this.randomizeQuestions()}}});const p8=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n},rE=e=>(tj("data-v-0780694c"),e=e(),nj(),e),v8=rE(()=>jr("h1",{class:"text text_mod"},"lorem1",-1)),g8={key:0},m8={key:1},y8=["onClick"],_8={key:2},w8=rE(()=>jr("br",null,null,-1)),b8=rE(()=>jr("br",null,null,-1)),E8={__name:"Quiz",setup(e){k4(_=>({"23aeed48":t.value}));const t=bw("red"),n=()=>{t.value==="red"?t.value="blue":t.value="red"},r=d8(),{randomizedQuestions:i,timeEnd:s,questionsLeft:u,getTimeTotal:c,isLoading:l}=q4(r),h=od(()=>r.currentQuestionNumber),p=_=>{r.addUserQuestion(_)},g=od(()=>r.correctAnswers.length),m=()=>{r.restartQuiz()};return up(async()=>{await r.getQuestions(),r.randomizeQuestions()}),Vc(u,()=>{u.value==0&&(s.value=performance.now())}),(_,b)=>(Ci(),Ai("div",null,[v8,jr("button",{onClick:n},"color"),cs(l)?(Ci(),Ai("div",g8,"loading...")):cs(u)>0?(Ci(),Ai("div",m8,[(Ci(!0),Ai(Mn,null,XS(cs(i),(E,I)=>Cj((Ci(),Ai("div",{key:E.questionId,class:"question"},[jr("p",null,_h(`#${I+1} ${E.questionText}`),1),jr("ol",null,[(Ci(!0),Ai(Mn,null,XS(E.answers,N=>(Ci(),Ai("li",{key:N.answerId},[Mc(_h(N.answerText)+" ",1),jr("button",{onClick:x=>p(N)},"add",8,y8)]))),128))])])),[[R4,I===cs(h)]])),128))])):(Ci(),Ai("div",_8,[Mc(" quiz is over! "),w8,Mc(" Your time: "+_h(cs(c))+" ",1),b8,Mc(" you got "+_h(cs(g))+" correct answers ",1),jr("button",{onClick:m},"restart")]))]))}},T8=p8(E8,[["__scopeId","data-v-0780694c"]]),I8=jr("div",{id:"nav"},null,-1),S8={__name:"App",setup(e){return(t,n)=>{const r=Aj("Lorem");return Ci(),Ai(Mn,null,[I8,er(T8),er(r)],64)}}};var C8="firebase",aL="8.10.1";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */oe.registerVersion(C8,aL,"app");oe.SDK_VERSION=aL;D4({created(){const e=JSON.parse('{"apiKey":"AIzaSyBSYLIizVuPZITxXVFeEoFKwfoj-oiyE9s","authDomain":"quiz-519c8.firebaseapp.com","projectId":"quiz-519c8","storageBucket":"quiz-519c8.appspot.com","messagingSenderId":"296664563034","appId":"1:296664563034:web:60573df9dd8c04aa92c763","measurementId":"G-ML6NPSKK6F","databaseURL":"https://quiz-519c8-default-rtdb.europe-west1.firebasedatabase.app/"}');console.log(!0),oe.initializeApp(e)},render:()=>a4(S8)}).use(M4()).mount("#app");
