(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Mw(e,t){const n=Object.create(null),r=e.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return t?i=>!!n[i.toLowerCase()]:i=>!!n[i]}function Fw(e){if(Te(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],i=Kt(r)?gj(r):Fw(r);if(i)for(const s in i)t[s]=i[s]}return t}else{if(Kt(e))return e;if(gt(e))return e}}const dj=/;(?![^(]*\))/g,pj=/:([^]+)/,vj=/\/\*.*?\*\//gs;function gj(e){const t={};return e.replace(vj,"").split(dj).forEach(n=>{if(n){const r=n.split(pj);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function Il(e){let t="";if(Kt(e))t=e;else if(Te(e))for(let n=0;n<e.length;n++){const r=Il(e[n]);r&&(t+=r+" ")}else if(gt(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const mj="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",yj=Mw(mj);function sN(e){return!!e||e===""}const Uo=e=>Kt(e)?e:e==null?"":Te(e)||gt(e)&&(e.toString===lN||!ke(e.toString))?JSON.stringify(e,aN,2):String(e),aN=(e,t)=>t&&t.__v_isRef?aN(e,t.value):su(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,i])=>(n[`${r} =>`]=i,n),{})}:uN(t)?{[`Set(${t.size})`]:[...t.values()]}:gt(t)&&!Te(t)&&!fN(t)?String(t):t,ct={},ou=[],Zr=()=>{},_j=()=>!1,wj=/^on[^a-z]/,bp=e=>wj.test(e),Uw=e=>e.startsWith("onUpdate:"),An=Object.assign,jw=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},bj=Object.prototype.hasOwnProperty,qe=(e,t)=>bj.call(e,t),Te=Array.isArray,su=e=>Ep(e)==="[object Map]",uN=e=>Ep(e)==="[object Set]",ke=e=>typeof e=="function",Kt=e=>typeof e=="string",Vw=e=>typeof e=="symbol",gt=e=>e!==null&&typeof e=="object",cN=e=>gt(e)&&ke(e.then)&&ke(e.catch),lN=Object.prototype.toString,Ep=e=>lN.call(e),Ej=e=>Ep(e).slice(8,-1),fN=e=>Ep(e)==="[object Object]",Bw=e=>Kt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,cd=Mw(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Tp=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Tj=/-(\w)/g,Si=Tp(e=>e.replace(Tj,(t,n)=>n?n.toUpperCase():"")),Ij=/\B([A-Z])/g,Ku=Tp(e=>e.replace(Ij,"-$1").toLowerCase()),Ip=Tp(e=>e.charAt(0).toUpperCase()+e.slice(1)),yy=Tp(e=>e?`on${Ip(e)}`:""),Sl=(e,t)=>!Object.is(e,t),ld=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},Id=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},Sd=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let gC;const Sj=()=>gC||(gC=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let cr;class hN{constructor(t=!1){this.detached=t,this.active=!0,this.effects=[],this.cleanups=[],this.parent=cr,!t&&cr&&(this.index=(cr.scopes||(cr.scopes=[])).push(this)-1)}run(t){if(this.active){const n=cr;try{return cr=this,t()}finally{cr=n}}}on(){cr=this}off(){cr=this.parent}stop(t){if(this.active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this.active=!1}}}function dN(e){return new hN(e)}function Cj(e,t=cr){t&&t.active&&t.effects.push(e)}function Aj(){return cr}function kj(e){cr&&cr.cleanups.push(e)}const qw=e=>{const t=new Set(e);return t.w=0,t.n=0,t},pN=e=>(e.w&jo)>0,vN=e=>(e.n&jo)>0,Rj=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=jo},Nj=e=>{const{deps:t}=e;if(t.length){let n=0;for(let r=0;r<t.length;r++){const i=t[r];pN(i)&&!vN(i)?i.delete(e):t[n++]=i,i.w&=~jo,i.n&=~jo}t.length=n}},l_=new WeakMap;let nl=0,jo=1;const f_=30;let Yr;const js=Symbol(""),h_=Symbol("");class Hw{constructor(t,n=null,r){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,Cj(this,r)}run(){if(!this.active)return this.fn();let t=Yr,n=Po;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=Yr,Yr=this,Po=!0,jo=1<<++nl,nl<=f_?Rj(this):mC(this),this.fn()}finally{nl<=f_&&Nj(this),jo=1<<--nl,Yr=this.parent,Po=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Yr===this?this.deferStop=!0:this.active&&(mC(this),this.onStop&&this.onStop(),this.active=!1)}}function mC(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let Po=!0;const gN=[];function zu(){gN.push(Po),Po=!1}function Wu(){const e=gN.pop();Po=e===void 0?!0:e}function yr(e,t,n){if(Po&&Yr){let r=l_.get(e);r||l_.set(e,r=new Map);let i=r.get(n);i||r.set(n,i=qw()),mN(i)}}function mN(e,t){let n=!1;nl<=f_?vN(e)||(e.n|=jo,n=!pN(e)):n=!e.has(Yr),n&&(e.add(Yr),Yr.deps.push(e))}function Yi(e,t,n,r,i,s){const a=l_.get(e);if(!a)return;let c=[];if(t==="clear")c=[...a.values()];else if(n==="length"&&Te(e)){const l=Sd(r);a.forEach((h,d)=>{(d==="length"||d>=l)&&c.push(h)})}else switch(n!==void 0&&c.push(a.get(n)),t){case"add":Te(e)?Bw(n)&&c.push(a.get("length")):(c.push(a.get(js)),su(e)&&c.push(a.get(h_)));break;case"delete":Te(e)||(c.push(a.get(js)),su(e)&&c.push(a.get(h_)));break;case"set":su(e)&&c.push(a.get(js));break}if(c.length===1)c[0]&&d_(c[0]);else{const l=[];for(const h of c)h&&l.push(...h);d_(qw(l))}}function d_(e,t){const n=Te(e)?e:[...e];for(const r of n)r.computed&&yC(r);for(const r of n)r.computed||yC(r)}function yC(e,t){(e!==Yr||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const Pj=Mw("__proto__,__v_isRef,__isVue"),yN=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Vw)),Oj=Kw(),xj=Kw(!1,!0),Dj=Kw(!0),_C=Lj();function Lj(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const r=He(this);for(let s=0,a=this.length;s<a;s++)yr(r,"get",s+"");const i=r[t](...n);return i===-1||i===!1?r[t](...n.map(He)):i}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){zu();const r=He(this)[t].apply(this,n);return Wu(),r}}),e}function Kw(e=!1,t=!1){return function(r,i,s){if(i==="__v_isReactive")return!e;if(i==="__v_isReadonly")return e;if(i==="__v_isShallow")return t;if(i==="__v_raw"&&s===(e?t?Xj:TN:t?EN:bN).get(r))return r;const a=Te(r);if(!e&&a&&qe(_C,i))return Reflect.get(_C,i,s);const c=Reflect.get(r,i,s);return(Vw(i)?yN.has(i):Pj(i))||(e||yr(r,"get",i),t)?c:St(c)?a&&Bw(i)?c:c.value:gt(c)?e?IN(c):ca(c):c}}const Mj=_N(),Fj=_N(!0);function _N(e=!1){return function(n,r,i,s){let a=n[r];if(pu(a)&&St(a)&&!St(i))return!1;if(!e&&(!Cd(i)&&!pu(i)&&(a=He(a),i=He(i)),!Te(n)&&St(a)&&!St(i)))return a.value=i,!0;const c=Te(n)&&Bw(r)?Number(r)<n.length:qe(n,r),l=Reflect.set(n,r,i,s);return n===He(s)&&(c?Sl(i,a)&&Yi(n,"set",r,i):Yi(n,"add",r,i)),l}}function Uj(e,t){const n=qe(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&n&&Yi(e,"delete",t,void 0),r}function jj(e,t){const n=Reflect.has(e,t);return(!Vw(t)||!yN.has(t))&&yr(e,"has",t),n}function Vj(e){return yr(e,"iterate",Te(e)?"length":js),Reflect.ownKeys(e)}const wN={get:Oj,set:Mj,deleteProperty:Uj,has:jj,ownKeys:Vj},Bj={get:Dj,set(e,t){return!0},deleteProperty(e,t){return!0}},qj=An({},wN,{get:xj,set:Fj}),zw=e=>e,Sp=e=>Reflect.getPrototypeOf(e);function Bh(e,t,n=!1,r=!1){e=e.__v_raw;const i=He(e),s=He(t);n||(t!==s&&yr(i,"get",t),yr(i,"get",s));const{has:a}=Sp(i),c=r?zw:n?Gw:Cl;if(a.call(i,t))return c(e.get(t));if(a.call(i,s))return c(e.get(s));e!==i&&e.get(t)}function qh(e,t=!1){const n=this.__v_raw,r=He(n),i=He(e);return t||(e!==i&&yr(r,"has",e),yr(r,"has",i)),e===i?n.has(e):n.has(e)||n.has(i)}function Hh(e,t=!1){return e=e.__v_raw,!t&&yr(He(e),"iterate",js),Reflect.get(e,"size",e)}function wC(e){e=He(e);const t=He(this);return Sp(t).has.call(t,e)||(t.add(e),Yi(t,"add",e,e)),this}function bC(e,t){t=He(t);const n=He(this),{has:r,get:i}=Sp(n);let s=r.call(n,e);s||(e=He(e),s=r.call(n,e));const a=i.call(n,e);return n.set(e,t),s?Sl(t,a)&&Yi(n,"set",e,t):Yi(n,"add",e,t),this}function EC(e){const t=He(this),{has:n,get:r}=Sp(t);let i=n.call(t,e);i||(e=He(e),i=n.call(t,e)),r&&r.call(t,e);const s=t.delete(e);return i&&Yi(t,"delete",e,void 0),s}function TC(){const e=He(this),t=e.size!==0,n=e.clear();return t&&Yi(e,"clear",void 0,void 0),n}function Kh(e,t){return function(r,i){const s=this,a=s.__v_raw,c=He(a),l=t?zw:e?Gw:Cl;return!e&&yr(c,"iterate",js),a.forEach((h,d)=>r.call(i,l(h),l(d),s))}}function zh(e,t,n){return function(...r){const i=this.__v_raw,s=He(i),a=su(s),c=e==="entries"||e===Symbol.iterator&&a,l=e==="keys"&&a,h=i[e](...r),d=n?zw:t?Gw:Cl;return!t&&yr(s,"iterate",l?h_:js),{next(){const{value:v,done:m}=h.next();return m?{value:v,done:m}:{value:c?[d(v[0]),d(v[1])]:d(v),done:m}},[Symbol.iterator](){return this}}}}function go(e){return function(...t){return e==="delete"?!1:this}}function Hj(){const e={get(s){return Bh(this,s)},get size(){return Hh(this)},has:qh,add:wC,set:bC,delete:EC,clear:TC,forEach:Kh(!1,!1)},t={get(s){return Bh(this,s,!1,!0)},get size(){return Hh(this)},has:qh,add:wC,set:bC,delete:EC,clear:TC,forEach:Kh(!1,!0)},n={get(s){return Bh(this,s,!0)},get size(){return Hh(this,!0)},has(s){return qh.call(this,s,!0)},add:go("add"),set:go("set"),delete:go("delete"),clear:go("clear"),forEach:Kh(!0,!1)},r={get(s){return Bh(this,s,!0,!0)},get size(){return Hh(this,!0)},has(s){return qh.call(this,s,!0)},add:go("add"),set:go("set"),delete:go("delete"),clear:go("clear"),forEach:Kh(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{e[s]=zh(s,!1,!1),n[s]=zh(s,!0,!1),t[s]=zh(s,!1,!0),r[s]=zh(s,!0,!0)}),[e,n,t,r]}const[Kj,zj,Wj,$j]=Hj();function Ww(e,t){const n=t?e?$j:Wj:e?zj:Kj;return(r,i,s)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?r:Reflect.get(qe(n,i)&&i in r?n:r,i,s)}const Gj={get:Ww(!1,!1)},Qj={get:Ww(!1,!0)},Yj={get:Ww(!0,!1)},bN=new WeakMap,EN=new WeakMap,TN=new WeakMap,Xj=new WeakMap;function Jj(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Zj(e){return e.__v_skip||!Object.isExtensible(e)?0:Jj(Ej(e))}function ca(e){return pu(e)?e:$w(e,!1,wN,Gj,bN)}function e4(e){return $w(e,!1,qj,Qj,EN)}function IN(e){return $w(e,!0,Bj,Yj,TN)}function $w(e,t,n,r,i){if(!gt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=i.get(e);if(s)return s;const a=Zj(e);if(a===0)return e;const c=new Proxy(e,a===2?r:n);return i.set(e,c),c}function Wi(e){return pu(e)?Wi(e.__v_raw):!!(e&&e.__v_isReactive)}function pu(e){return!!(e&&e.__v_isReadonly)}function Cd(e){return!!(e&&e.__v_isShallow)}function SN(e){return Wi(e)||pu(e)}function He(e){const t=e&&e.__v_raw;return t?He(t):e}function vu(e){return Id(e,"__v_skip",!0),e}const Cl=e=>gt(e)?ca(e):e,Gw=e=>gt(e)?IN(e):e;function CN(e){Po&&Yr&&(e=He(e),mN(e.dep||(e.dep=qw())))}function AN(e,t){e=He(e),e.dep&&d_(e.dep)}function St(e){return!!(e&&e.__v_isRef===!0)}function Cp(e){return kN(e,!1)}function t4(e){return kN(e,!0)}function kN(e,t){return St(e)?e:new n4(e,t)}class n4{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:He(t),this._value=n?t:Cl(t)}get value(){return CN(this),this._value}set value(t){const n=this.__v_isShallow||Cd(t)||pu(t);t=n?t:He(t),Sl(t,this._rawValue)&&(this._rawValue=t,this._value=n?t:Cl(t),AN(this))}}function Dt(e){return St(e)?e.value:e}const r4={get:(e,t,n)=>Dt(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const i=e[t];return St(i)&&!St(n)?(i.value=n,!0):Reflect.set(e,t,n,r)}};function RN(e){return Wi(e)?e:new Proxy(e,r4)}function i4(e){const t=Te(e)?new Array(e.length):{};for(const n in e)t[n]=NN(e,n);return t}class o4{constructor(t,n,r){this._object=t,this._key=n,this._defaultValue=r,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}}function NN(e,t,n){const r=e[t];return St(r)?r:new o4(e,t,n)}var PN;class s4{constructor(t,n,r,i){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this[PN]=!1,this._dirty=!0,this.effect=new Hw(t,()=>{this._dirty||(this._dirty=!0,AN(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=r}get value(){const t=He(this);return CN(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}PN="__v_isReadonly";function a4(e,t,n=!1){let r,i;const s=ke(e);return s?(r=e,i=Zr):(r=e.get,i=e.set),new s4(r,i,s||!i,n)}function Oo(e,t,n,r){let i;try{i=r?e(...r):e()}catch(s){Ap(s,t,n)}return i}function Or(e,t,n,r){if(ke(e)){const s=Oo(e,t,n,r);return s&&cN(s)&&s.catch(a=>{Ap(a,t,n)}),s}const i=[];for(let s=0;s<e.length;s++)i.push(Or(e[s],t,n,r));return i}function Ap(e,t,n,r=!0){const i=t?t.vnode:null;if(t){let s=t.parent;const a=t.proxy,c=n;for(;s;){const h=s.ec;if(h){for(let d=0;d<h.length;d++)if(h[d](e,a,c)===!1)return}s=s.parent}const l=t.appContext.config.errorHandler;if(l){Oo(l,null,10,[e,a,c]);return}}u4(e,n,i,r)}function u4(e,t,n,r=!0){console.error(e)}let Al=!1,p_=!1;const En=[];let yi=0;const au=[];let Bi=null,Cs=0;const ON=Promise.resolve();let Qw=null;function Yw(e){const t=Qw||ON;return e?t.then(this?e.bind(this):e):t}function c4(e){let t=yi+1,n=En.length;for(;t<n;){const r=t+n>>>1;kl(En[r])<e?t=r+1:n=r}return t}function Xw(e){(!En.length||!En.includes(e,Al&&e.allowRecurse?yi+1:yi))&&(e.id==null?En.push(e):En.splice(c4(e.id),0,e),xN())}function xN(){!Al&&!p_&&(p_=!0,Qw=ON.then(LN))}function l4(e){const t=En.indexOf(e);t>yi&&En.splice(t,1)}function f4(e){Te(e)?au.push(...e):(!Bi||!Bi.includes(e,e.allowRecurse?Cs+1:Cs))&&au.push(e),xN()}function IC(e,t=Al?yi+1:0){for(;t<En.length;t++){const n=En[t];n&&n.pre&&(En.splice(t,1),t--,n())}}function DN(e){if(au.length){const t=[...new Set(au)];if(au.length=0,Bi){Bi.push(...t);return}for(Bi=t,Bi.sort((n,r)=>kl(n)-kl(r)),Cs=0;Cs<Bi.length;Cs++)Bi[Cs]();Bi=null,Cs=0}}const kl=e=>e.id==null?1/0:e.id,h4=(e,t)=>{const n=kl(e)-kl(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function LN(e){p_=!1,Al=!0,En.sort(h4);const t=Zr;try{for(yi=0;yi<En.length;yi++){const n=En[yi];n&&n.active!==!1&&Oo(n,null,14)}}finally{yi=0,En.length=0,DN(),Al=!1,Qw=null,(En.length||au.length)&&LN()}}function d4(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||ct;let i=n;const s=t.startsWith("update:"),a=s&&t.slice(7);if(a&&a in r){const d=`${a==="modelValue"?"model":a}Modifiers`,{number:v,trim:m}=r[d]||ct;m&&(i=n.map(y=>Kt(y)?y.trim():y)),v&&(i=n.map(Sd))}let c,l=r[c=yy(t)]||r[c=yy(Si(t))];!l&&s&&(l=r[c=yy(Ku(t))]),l&&Or(l,e,6,i);const h=r[c+"Once"];if(h){if(!e.emitted)e.emitted={};else if(e.emitted[c])return;e.emitted[c]=!0,Or(h,e,6,i)}}function MN(e,t,n=!1){const r=t.emitsCache,i=r.get(e);if(i!==void 0)return i;const s=e.emits;let a={},c=!1;if(!ke(e)){const l=h=>{const d=MN(h,t,!0);d&&(c=!0,An(a,d))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!s&&!c?(gt(e)&&r.set(e,null),null):(Te(s)?s.forEach(l=>a[l]=null):An(a,s),gt(e)&&r.set(e,a),a)}function kp(e,t){return!e||!bp(t)?!1:(t=t.slice(2).replace(/Once$/,""),qe(e,t[0].toLowerCase()+t.slice(1))||qe(e,Ku(t))||qe(e,t))}let pr=null,FN=null;function Ad(e){const t=pr;return pr=e,FN=e&&e.type.__scopeId||null,t}function p4(e,t=pr,n){if(!t||e._n)return e;const r=(...i)=>{r._d&&DC(-1);const s=Ad(t);let a;try{a=e(...i)}finally{Ad(s),r._d&&DC(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function _y(e){const{type:t,vnode:n,proxy:r,withProxy:i,props:s,propsOptions:[a],slots:c,attrs:l,emit:h,render:d,renderCache:v,data:m,setupState:y,ctx:w,inheritAttrs:E}=e;let T,k;const P=Ad(e);try{if(n.shapeFlag&4){const H=i||r;T=mi(d.call(H,H,v,s,y,m,w)),k=l}else{const H=t;T=mi(H.length>1?H(s,{attrs:l,slots:c,emit:h}):H(s,null)),k=t.props?l:v4(l)}}catch(H){sl.length=0,Ap(H,e,1),T=Zt(ei)}let O=T;if(k&&E!==!1){const H=Object.keys(k),{shapeFlag:K}=O;H.length&&K&7&&(a&&H.some(Uw)&&(k=g4(k,a)),O=Vo(O,k))}return n.dirs&&(O=Vo(O),O.dirs=O.dirs?O.dirs.concat(n.dirs):n.dirs),n.transition&&(O.transition=n.transition),T=O,Ad(P),T}const v4=e=>{let t;for(const n in e)(n==="class"||n==="style"||bp(n))&&((t||(t={}))[n]=e[n]);return t},g4=(e,t)=>{const n={};for(const r in e)(!Uw(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function m4(e,t,n){const{props:r,children:i,component:s}=e,{props:a,children:c,patchFlag:l}=t,h=s.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?SC(r,a,h):!!a;if(l&8){const d=t.dynamicProps;for(let v=0;v<d.length;v++){const m=d[v];if(a[m]!==r[m]&&!kp(h,m))return!0}}}else return(i||c)&&(!c||!c.$stable)?!0:r===a?!1:r?a?SC(r,a,h):!0:!!a;return!1}function SC(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(t[s]!==e[s]&&!kp(n,s))return!0}return!1}function y4({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}const _4=e=>e.__isSuspense;function w4(e,t){t&&t.pendingBranch?Te(e)?t.effects.push(...e):t.effects.push(e):f4(e)}function fd(e,t){if(Xt){let n=Xt.provides;const r=Xt.parent&&Xt.parent.provides;r===n&&(n=Xt.provides=Object.create(r)),n[e]=t}}function xr(e,t,n=!1){const r=Xt||pr;if(r){const i=r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(i&&e in i)return i[e];if(arguments.length>1)return n&&ke(t)?t.call(r.proxy):t}}const Wh={};function Vs(e,t,n){return UN(e,t,n)}function UN(e,t,{immediate:n,deep:r,flush:i,onTrack:s,onTrigger:a}=ct){const c=Xt;let l,h=!1,d=!1;if(St(e)?(l=()=>e.value,h=Cd(e)):Wi(e)?(l=()=>e,r=!0):Te(e)?(d=!0,h=e.some(O=>Wi(O)||Cd(O)),l=()=>e.map(O=>{if(St(O))return O.value;if(Wi(O))return Ps(O);if(ke(O))return Oo(O,c,2)})):ke(e)?t?l=()=>Oo(e,c,2):l=()=>{if(!(c&&c.isUnmounted))return v&&v(),Or(e,c,3,[m])}:l=Zr,t&&r){const O=l;l=()=>Ps(O())}let v,m=O=>{v=k.onStop=()=>{Oo(O,c,4)}},y;if(Nl)if(m=Zr,t?n&&Or(t,c,3,[l(),d?[]:void 0,m]):l(),i==="sync"){const O=pV();y=O.__watcherHandles||(O.__watcherHandles=[])}else return Zr;let w=d?new Array(e.length).fill(Wh):Wh;const E=()=>{if(k.active)if(t){const O=k.run();(r||h||(d?O.some((H,K)=>Sl(H,w[K])):Sl(O,w)))&&(v&&v(),Or(t,c,3,[O,w===Wh?void 0:d&&w[0]===Wh?[]:w,m]),w=O)}else k.run()};E.allowRecurse=!!t;let T;i==="sync"?T=E:i==="post"?T=()=>Zn(E,c&&c.suspense):(E.pre=!0,c&&(E.id=c.uid),T=()=>Xw(E));const k=new Hw(l,T);t?n?E():w=k.run():i==="post"?Zn(k.run.bind(k),c&&c.suspense):k.run();const P=()=>{k.stop(),c&&c.scope&&jw(c.scope.effects,k)};return y&&y.push(P),P}function b4(e,t,n){const r=this.proxy,i=Kt(e)?e.includes(".")?jN(r,e):()=>r[e]:e.bind(r,r);let s;ke(t)?s=t:(s=t.handler,n=t);const a=Xt;gu(this);const c=UN(i,s.bind(r),n);return a?gu(a):qs(),c}function jN(e,t){const n=t.split(".");return()=>{let r=e;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function Ps(e,t){if(!gt(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),St(e))Ps(e.value,t);else if(Te(e))for(let n=0;n<e.length;n++)Ps(e[n],t);else if(uN(e)||su(e))e.forEach(n=>{Ps(n,t)});else if(fN(e))for(const n in e)Ps(e[n],t);return e}function E4(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Jw(()=>{e.isMounted=!0}),Zw(()=>{e.isUnmounting=!0}),e}const Cr=[Function,Array],T4={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Cr,onEnter:Cr,onAfterEnter:Cr,onEnterCancelled:Cr,onBeforeLeave:Cr,onLeave:Cr,onAfterLeave:Cr,onLeaveCancelled:Cr,onBeforeAppear:Cr,onAppear:Cr,onAfterAppear:Cr,onAppearCancelled:Cr},setup(e,{slots:t}){const n=i1(),r=E4();let i;return()=>{const s=t.default&&BN(t.default(),!0);if(!s||!s.length)return;let a=s[0];if(s.length>1){for(const E of s)if(E.type!==ei){a=E;break}}const c=He(e),{mode:l}=c;if(r.isLeaving)return wy(a);const h=CC(a);if(!h)return wy(a);const d=v_(h,c,r,n);g_(h,d);const v=n.subTree,m=v&&CC(v);let y=!1;const{getTransitionKey:w}=h.type;if(w){const E=w();i===void 0?i=E:E!==i&&(i=E,y=!0)}if(m&&m.type!==ei&&(!As(h,m)||y)){const E=v_(m,c,r,n);if(g_(m,E),l==="out-in")return r.isLeaving=!0,E.afterLeave=()=>{r.isLeaving=!1,n.update.active!==!1&&n.update()},wy(a);l==="in-out"&&h.type!==ei&&(E.delayLeave=(T,k,P)=>{const O=VN(r,m);O[String(m.key)]=m,T._leaveCb=()=>{k(),T._leaveCb=void 0,delete d.delayedLeave},d.delayedLeave=P})}return a}}},I4=T4;function VN(e,t){const{leavingVNodes:n}=e;let r=n.get(t.type);return r||(r=Object.create(null),n.set(t.type,r)),r}function v_(e,t,n,r){const{appear:i,mode:s,persisted:a=!1,onBeforeEnter:c,onEnter:l,onAfterEnter:h,onEnterCancelled:d,onBeforeLeave:v,onLeave:m,onAfterLeave:y,onLeaveCancelled:w,onBeforeAppear:E,onAppear:T,onAfterAppear:k,onAppearCancelled:P}=t,O=String(e.key),H=VN(n,e),K=(F,ge)=>{F&&Or(F,r,9,ge)},U=(F,ge)=>{const R=ge[1];K(F,ge),Te(F)?F.every(tt=>tt.length<=1)&&R():F.length<=1&&R()},ie={mode:s,persisted:a,beforeEnter(F){let ge=c;if(!n.isMounted)if(i)ge=E||c;else return;F._leaveCb&&F._leaveCb(!0);const R=H[O];R&&As(e,R)&&R.el._leaveCb&&R.el._leaveCb(),K(ge,[F])},enter(F){let ge=l,R=h,tt=d;if(!n.isMounted)if(i)ge=T||l,R=k||h,tt=P||d;else return;let lt=!1;const Pn=F._enterCb=Ft=>{lt||(lt=!0,Ft?K(tt,[F]):K(R,[F]),ie.delayedLeave&&ie.delayedLeave(),F._enterCb=void 0)};ge?U(ge,[F,Pn]):Pn()},leave(F,ge){const R=String(e.key);if(F._enterCb&&F._enterCb(!0),n.isUnmounting)return ge();K(v,[F]);let tt=!1;const lt=F._leaveCb=Pn=>{tt||(tt=!0,ge(),Pn?K(w,[F]):K(y,[F]),F._leaveCb=void 0,H[R]===e&&delete H[R])};H[R]=e,m?U(m,[F,lt]):lt()},clone(F){return v_(F,t,n,r)}};return ie}function wy(e){if(Rp(e))return e=Vo(e),e.children=null,e}function CC(e){return Rp(e)?e.children?e.children[0]:void 0:e}function g_(e,t){e.shapeFlag&6&&e.component?g_(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function BN(e,t=!1,n){let r=[],i=0;for(let s=0;s<e.length;s++){let a=e[s];const c=n==null?a.key:String(n)+String(a.key!=null?a.key:s);a.type===fr?(a.patchFlag&128&&i++,r=r.concat(BN(a.children,t,c))):(t||a.type!==ei)&&r.push(c!=null?Vo(a,{key:c}):a)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}function qN(e){return ke(e)?{setup:e,name:e.name}:e}const hd=e=>!!e.type.__asyncLoader,Rp=e=>e.type.__isKeepAlive;function S4(e,t){HN(e,"a",t)}function C4(e,t){HN(e,"da",t)}function HN(e,t,n=Xt){const r=e.__wdc||(e.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(Np(t,r,n),n){let i=n.parent;for(;i&&i.parent;)Rp(i.parent.vnode)&&A4(r,t,n,i),i=i.parent}}function A4(e,t,n,r){const i=Np(t,e,r,!0);zN(()=>{jw(r[t],i)},n)}function Np(e,t,n=Xt,r=!1){if(n){const i=n[e]||(n[e]=[]),s=t.__weh||(t.__weh=(...a)=>{if(n.isUnmounted)return;zu(),gu(n);const c=Or(t,n,e,a);return qs(),Wu(),c});return r?i.unshift(s):i.push(s),s}}const to=e=>(t,n=Xt)=>(!Nl||e==="sp")&&Np(e,(...r)=>t(...r),n),KN=to("bm"),Jw=to("m"),k4=to("bu"),R4=to("u"),Zw=to("bum"),zN=to("um"),N4=to("sp"),P4=to("rtg"),O4=to("rtc");function x4(e,t=Xt){Np("ec",e,t)}function WN(e,t){const n=pr;if(n===null)return e;const r=xp(n)||n.proxy,i=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[a,c,l,h=ct]=t[s];a&&(ke(a)&&(a={mounted:a,updated:a}),a.deep&&Ps(c),i.push({dir:a,instance:r,value:c,oldValue:void 0,arg:l,modifiers:h}))}return e}function _s(e,t,n,r){const i=e.dirs,s=t&&t.dirs;for(let a=0;a<i.length;a++){const c=i[a];s&&(c.oldValue=s[a].value);let l=c.dir[r];l&&(zu(),Or(l,n,8,[e.el,c,e,t]),Wu())}}const $N="components";function D4(e,t){return M4($N,e,!0,t)||e}const L4=Symbol();function M4(e,t,n=!0,r=!1){const i=pr||Xt;if(i){const s=i.type;if(e===$N){const c=fV(s,!1);if(c&&(c===t||c===Si(t)||c===Ip(Si(t))))return s}const a=AC(i[e]||s[e],t)||AC(i.appContext[e],t);return!a&&r?s:a}}function AC(e,t){return e&&(e[t]||e[Si(t)]||e[Ip(Si(t))])}function m_(e,t,n,r){let i;const s=n&&n[r];if(Te(e)||Kt(e)){i=new Array(e.length);for(let a=0,c=e.length;a<c;a++)i[a]=t(e[a],a,void 0,s&&s[a])}else if(typeof e=="number"){i=new Array(e);for(let a=0;a<e;a++)i[a]=t(a+1,a,void 0,s&&s[a])}else if(gt(e))if(e[Symbol.iterator])i=Array.from(e,(a,c)=>t(a,c,void 0,s&&s[c]));else{const a=Object.keys(e);i=new Array(a.length);for(let c=0,l=a.length;c<l;c++){const h=a[c];i[c]=t(e[h],h,c,s&&s[c])}}else i=[];return n&&(n[r]=i),i}const y_=e=>e?o1(e)?xp(e)||e.proxy:y_(e.parent):null,ol=An(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>y_(e.parent),$root:e=>y_(e.root),$emit:e=>e.emit,$options:e=>eb(e),$forceUpdate:e=>e.f||(e.f=()=>Xw(e.update)),$nextTick:e=>e.n||(e.n=Yw.bind(e.proxy)),$watch:e=>b4.bind(e)}),by=(e,t)=>e!==ct&&!e.__isScriptSetup&&qe(e,t),F4={get({_:e},t){const{ctx:n,setupState:r,data:i,props:s,accessCache:a,type:c,appContext:l}=e;let h;if(t[0]!=="$"){const y=a[t];if(y!==void 0)switch(y){case 1:return r[t];case 2:return i[t];case 4:return n[t];case 3:return s[t]}else{if(by(r,t))return a[t]=1,r[t];if(i!==ct&&qe(i,t))return a[t]=2,i[t];if((h=e.propsOptions[0])&&qe(h,t))return a[t]=3,s[t];if(n!==ct&&qe(n,t))return a[t]=4,n[t];__&&(a[t]=0)}}const d=ol[t];let v,m;if(d)return t==="$attrs"&&yr(e,"get",t),d(e);if((v=c.__cssModules)&&(v=v[t]))return v;if(n!==ct&&qe(n,t))return a[t]=4,n[t];if(m=l.config.globalProperties,qe(m,t))return m[t]},set({_:e},t,n){const{data:r,setupState:i,ctx:s}=e;return by(i,t)?(i[t]=n,!0):r!==ct&&qe(r,t)?(r[t]=n,!0):qe(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:i,propsOptions:s}},a){let c;return!!n[a]||e!==ct&&qe(e,a)||by(t,a)||(c=s[0])&&qe(c,a)||qe(r,a)||qe(ol,a)||qe(i.config.globalProperties,a)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:qe(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};let __=!0;function U4(e){const t=eb(e),n=e.proxy,r=e.ctx;__=!1,t.beforeCreate&&kC(t.beforeCreate,e,"bc");const{data:i,computed:s,methods:a,watch:c,provide:l,inject:h,created:d,beforeMount:v,mounted:m,beforeUpdate:y,updated:w,activated:E,deactivated:T,beforeDestroy:k,beforeUnmount:P,destroyed:O,unmounted:H,render:K,renderTracked:U,renderTriggered:ie,errorCaptured:F,serverPrefetch:ge,expose:R,inheritAttrs:tt,components:lt,directives:Pn,filters:Ft}=t;if(h&&j4(h,r,null,e.appContext.config.unwrapInjectedRef),a)for(const Ye in a){const Ce=a[Ye];ke(Ce)&&(r[Ye]=Ce.bind(n))}if(i){const Ye=i.call(n,n);gt(Ye)&&(e.data=ca(Ye))}if(__=!0,s)for(const Ye in s){const Ce=s[Ye],On=ke(Ce)?Ce.bind(n,n):ke(Ce.get)?Ce.get.bind(n,n):Zr,$n=!ke(Ce)&&ke(Ce.set)?Ce.set.bind(n):Zr,xn=Vt({get:On,set:$n});Object.defineProperty(r,Ye,{enumerable:!0,configurable:!0,get:()=>xn.value,set:rn=>xn.value=rn})}if(c)for(const Ye in c)GN(c[Ye],r,n,Ye);if(l){const Ye=ke(l)?l.call(n):l;Reflect.ownKeys(Ye).forEach(Ce=>{fd(Ce,Ye[Ce])})}d&&kC(d,e,"c");function ot(Ye,Ce){Te(Ce)?Ce.forEach(On=>Ye(On.bind(n))):Ce&&Ye(Ce.bind(n))}if(ot(KN,v),ot(Jw,m),ot(k4,y),ot(R4,w),ot(S4,E),ot(C4,T),ot(x4,F),ot(O4,U),ot(P4,ie),ot(Zw,P),ot(zN,H),ot(N4,ge),Te(R))if(R.length){const Ye=e.exposed||(e.exposed={});R.forEach(Ce=>{Object.defineProperty(Ye,Ce,{get:()=>n[Ce],set:On=>n[Ce]=On})})}else e.exposed||(e.exposed={});K&&e.render===Zr&&(e.render=K),tt!=null&&(e.inheritAttrs=tt),lt&&(e.components=lt),Pn&&(e.directives=Pn)}function j4(e,t,n=Zr,r=!1){Te(e)&&(e=w_(e));for(const i in e){const s=e[i];let a;gt(s)?"default"in s?a=xr(s.from||i,s.default,!0):a=xr(s.from||i):a=xr(s),St(a)&&r?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>a.value,set:c=>a.value=c}):t[i]=a}}function kC(e,t,n){Or(Te(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function GN(e,t,n,r){const i=r.includes(".")?jN(n,r):()=>n[r];if(Kt(e)){const s=t[e];ke(s)&&Vs(i,s)}else if(ke(e))Vs(i,e.bind(n));else if(gt(e))if(Te(e))e.forEach(s=>GN(s,t,n,r));else{const s=ke(e.handler)?e.handler.bind(n):t[e.handler];ke(s)&&Vs(i,s,e)}}function eb(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:i,optionsCache:s,config:{optionMergeStrategies:a}}=e.appContext,c=s.get(t);let l;return c?l=c:!i.length&&!n&&!r?l=t:(l={},i.length&&i.forEach(h=>kd(l,h,a,!0)),kd(l,t,a)),gt(t)&&s.set(t,l),l}function kd(e,t,n,r=!1){const{mixins:i,extends:s}=t;s&&kd(e,s,n,!0),i&&i.forEach(a=>kd(e,a,n,!0));for(const a in t)if(!(r&&a==="expose")){const c=V4[a]||n&&n[a];e[a]=c?c(e[a],t[a]):t[a]}return e}const V4={data:RC,props:Es,emits:Es,methods:Es,computed:Es,beforeCreate:Un,created:Un,beforeMount:Un,mounted:Un,beforeUpdate:Un,updated:Un,beforeDestroy:Un,beforeUnmount:Un,destroyed:Un,unmounted:Un,activated:Un,deactivated:Un,errorCaptured:Un,serverPrefetch:Un,components:Es,directives:Es,watch:q4,provide:RC,inject:B4};function RC(e,t){return t?e?function(){return An(ke(e)?e.call(this,this):e,ke(t)?t.call(this,this):t)}:t:e}function B4(e,t){return Es(w_(e),w_(t))}function w_(e){if(Te(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Un(e,t){return e?[...new Set([].concat(e,t))]:t}function Es(e,t){return e?An(An(Object.create(null),e),t):t}function q4(e,t){if(!e)return t;if(!t)return e;const n=An(Object.create(null),e);for(const r in t)n[r]=Un(e[r],t[r]);return n}function H4(e,t,n,r=!1){const i={},s={};Id(s,Op,1),e.propsDefaults=Object.create(null),QN(e,t,i,s);for(const a in e.propsOptions[0])a in i||(i[a]=void 0);n?e.props=r?i:e4(i):e.type.props?e.props=i:e.props=s,e.attrs=s}function K4(e,t,n,r){const{props:i,attrs:s,vnode:{patchFlag:a}}=e,c=He(i),[l]=e.propsOptions;let h=!1;if((r||a>0)&&!(a&16)){if(a&8){const d=e.vnode.dynamicProps;for(let v=0;v<d.length;v++){let m=d[v];if(kp(e.emitsOptions,m))continue;const y=t[m];if(l)if(qe(s,m))y!==s[m]&&(s[m]=y,h=!0);else{const w=Si(m);i[w]=b_(l,c,w,y,e,!1)}else y!==s[m]&&(s[m]=y,h=!0)}}}else{QN(e,t,i,s)&&(h=!0);let d;for(const v in c)(!t||!qe(t,v)&&((d=Ku(v))===v||!qe(t,d)))&&(l?n&&(n[v]!==void 0||n[d]!==void 0)&&(i[v]=b_(l,c,v,void 0,e,!0)):delete i[v]);if(s!==c)for(const v in s)(!t||!qe(t,v))&&(delete s[v],h=!0)}h&&Yi(e,"set","$attrs")}function QN(e,t,n,r){const[i,s]=e.propsOptions;let a=!1,c;if(t)for(let l in t){if(cd(l))continue;const h=t[l];let d;i&&qe(i,d=Si(l))?!s||!s.includes(d)?n[d]=h:(c||(c={}))[d]=h:kp(e.emitsOptions,l)||(!(l in r)||h!==r[l])&&(r[l]=h,a=!0)}if(s){const l=He(n),h=c||ct;for(let d=0;d<s.length;d++){const v=s[d];n[v]=b_(i,l,v,h[v],e,!qe(h,v))}}return a}function b_(e,t,n,r,i,s){const a=e[n];if(a!=null){const c=qe(a,"default");if(c&&r===void 0){const l=a.default;if(a.type!==Function&&ke(l)){const{propsDefaults:h}=i;n in h?r=h[n]:(gu(i),r=h[n]=l.call(null,t),qs())}else r=l}a[0]&&(s&&!c?r=!1:a[1]&&(r===""||r===Ku(n))&&(r=!0))}return r}function YN(e,t,n=!1){const r=t.propsCache,i=r.get(e);if(i)return i;const s=e.props,a={},c=[];let l=!1;if(!ke(e)){const d=v=>{l=!0;const[m,y]=YN(v,t,!0);An(a,m),y&&c.push(...y)};!n&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!s&&!l)return gt(e)&&r.set(e,ou),ou;if(Te(s))for(let d=0;d<s.length;d++){const v=Si(s[d]);NC(v)&&(a[v]=ct)}else if(s)for(const d in s){const v=Si(d);if(NC(v)){const m=s[d],y=a[v]=Te(m)||ke(m)?{type:m}:Object.assign({},m);if(y){const w=xC(Boolean,y.type),E=xC(String,y.type);y[0]=w>-1,y[1]=E<0||w<E,(w>-1||qe(y,"default"))&&c.push(v)}}}const h=[a,c];return gt(e)&&r.set(e,h),h}function NC(e){return e[0]!=="$"}function PC(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function OC(e,t){return PC(e)===PC(t)}function xC(e,t){return Te(t)?t.findIndex(n=>OC(n,e)):ke(t)&&OC(t,e)?0:-1}const XN=e=>e[0]==="_"||e==="$stable",tb=e=>Te(e)?e.map(mi):[mi(e)],z4=(e,t,n)=>{if(t._n)return t;const r=p4((...i)=>tb(t(...i)),n);return r._c=!1,r},JN=(e,t,n)=>{const r=e._ctx;for(const i in e){if(XN(i))continue;const s=e[i];if(ke(s))t[i]=z4(i,s,r);else if(s!=null){const a=tb(s);t[i]=()=>a}}},ZN=(e,t)=>{const n=tb(t);e.slots.default=()=>n},W4=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=He(t),Id(t,"_",n)):JN(t,e.slots={})}else e.slots={},t&&ZN(e,t);Id(e.slots,Op,1)},$4=(e,t,n)=>{const{vnode:r,slots:i}=e;let s=!0,a=ct;if(r.shapeFlag&32){const c=t._;c?n&&c===1?s=!1:(An(i,t),!n&&c===1&&delete i._):(s=!t.$stable,JN(t,i)),a=t}else t&&(ZN(e,t),a={default:1});if(s)for(const c in i)!XN(c)&&!(c in a)&&delete i[c]};function e1(){return{app:null,config:{isNativeTag:_j,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let G4=0;function Q4(e,t){return function(r,i=null){ke(r)||(r=Object.assign({},r)),i!=null&&!gt(i)&&(i=null);const s=e1(),a=new Set;let c=!1;const l=s.app={_uid:G4++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:vV,get config(){return s.config},set config(h){},use(h,...d){return a.has(h)||(h&&ke(h.install)?(a.add(h),h.install(l,...d)):ke(h)&&(a.add(h),h(l,...d))),l},mixin(h){return s.mixins.includes(h)||s.mixins.push(h),l},component(h,d){return d?(s.components[h]=d,l):s.components[h]},directive(h,d){return d?(s.directives[h]=d,l):s.directives[h]},mount(h,d,v){if(!c){const m=Zt(r,i);return m.appContext=s,d&&t?t(m,h):e(m,h,v),c=!0,l._container=h,h.__vue_app__=l,xp(m.component)||m.component.proxy}},unmount(){c&&(e(null,l._container),delete l._container.__vue_app__)},provide(h,d){return s.provides[h]=d,l}};return l}}function E_(e,t,n,r,i=!1){if(Te(e)){e.forEach((m,y)=>E_(m,t&&(Te(t)?t[y]:t),n,r,i));return}if(hd(r)&&!i)return;const s=r.shapeFlag&4?xp(r.component)||r.component.proxy:r.el,a=i?null:s,{i:c,r:l}=e,h=t&&t.r,d=c.refs===ct?c.refs={}:c.refs,v=c.setupState;if(h!=null&&h!==l&&(Kt(h)?(d[h]=null,qe(v,h)&&(v[h]=null)):St(h)&&(h.value=null)),ke(l))Oo(l,c,12,[a,d]);else{const m=Kt(l),y=St(l);if(m||y){const w=()=>{if(e.f){const E=m?qe(v,l)?v[l]:d[l]:l.value;i?Te(E)&&jw(E,s):Te(E)?E.includes(s)||E.push(s):m?(d[l]=[s],qe(v,l)&&(v[l]=d[l])):(l.value=[s],e.k&&(d[e.k]=l.value))}else m?(d[l]=a,qe(v,l)&&(v[l]=a)):y&&(l.value=a,e.k&&(d[e.k]=a))};a?(w.id=-1,Zn(w,n)):w()}}}const Zn=w4;function Y4(e){return X4(e)}function X4(e,t){const n=Sj();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:a,createText:c,createComment:l,setText:h,setElementText:d,parentNode:v,nextSibling:m,setScopeId:y=Zr,insertStaticContent:w}=e,E=(I,N,D,M=null,j=null,Q=null,Z=!1,G=null,X=!!N.dynamicChildren)=>{if(I===N)return;I&&!As(I,N)&&(M=ne(I),rn(I,j,Q,!0),I=null),N.patchFlag===-2&&(X=!1,N.dynamicChildren=null);const{type:z,ref:he,shapeFlag:ce}=N;switch(z){case Pp:T(I,N,D,M);break;case ei:k(I,N,D,M);break;case Ey:I==null&&P(N,D,M,Z);break;case fr:lt(I,N,D,M,j,Q,Z,G,X);break;default:ce&1?K(I,N,D,M,j,Q,Z,G,X):ce&6?Pn(I,N,D,M,j,Q,Z,G,X):(ce&64||ce&128)&&z.process(I,N,D,M,j,Q,Z,G,X,Ve)}he!=null&&j&&E_(he,I&&I.ref,Q,N||I,!N)},T=(I,N,D,M)=>{if(I==null)r(N.el=c(N.children),D,M);else{const j=N.el=I.el;N.children!==I.children&&h(j,N.children)}},k=(I,N,D,M)=>{I==null?r(N.el=l(N.children||""),D,M):N.el=I.el},P=(I,N,D,M)=>{[I.el,I.anchor]=w(I.children,N,D,M,I.el,I.anchor)},O=({el:I,anchor:N},D,M)=>{let j;for(;I&&I!==N;)j=m(I),r(I,D,M),I=j;r(N,D,M)},H=({el:I,anchor:N})=>{let D;for(;I&&I!==N;)D=m(I),i(I),I=D;i(N)},K=(I,N,D,M,j,Q,Z,G,X)=>{Z=Z||N.type==="svg",I==null?U(N,D,M,j,Q,Z,G,X):ge(I,N,j,Q,Z,G,X)},U=(I,N,D,M,j,Q,Z,G)=>{let X,z;const{type:he,props:ce,shapeFlag:de,transition:we,dirs:De}=I;if(X=I.el=a(I.type,Q,ce&&ce.is,ce),de&8?d(X,I.children):de&16&&F(I.children,X,null,M,j,Q&&he!=="foreignObject",Z,G),De&&_s(I,null,M,"created"),ce){for(const Ke in ce)Ke!=="value"&&!cd(Ke)&&s(X,Ke,null,ce[Ke],Q,I.children,M,j,re);"value"in ce&&s(X,"value",null,ce.value),(z=ce.onVnodeBeforeMount)&&vi(z,M,I)}ie(X,I,I.scopeId,Z,M),De&&_s(I,null,M,"beforeMount");const ve=(!j||j&&!j.pendingBranch)&&we&&!we.persisted;ve&&we.beforeEnter(X),r(X,N,D),((z=ce&&ce.onVnodeMounted)||ve||De)&&Zn(()=>{z&&vi(z,M,I),ve&&we.enter(X),De&&_s(I,null,M,"mounted")},j)},ie=(I,N,D,M,j)=>{if(D&&y(I,D),M)for(let Q=0;Q<M.length;Q++)y(I,M[Q]);if(j){let Q=j.subTree;if(N===Q){const Z=j.vnode;ie(I,Z,Z.scopeId,Z.slotScopeIds,j.parent)}}},F=(I,N,D,M,j,Q,Z,G,X=0)=>{for(let z=X;z<I.length;z++){const he=I[z]=G?Eo(I[z]):mi(I[z]);E(null,he,N,D,M,j,Q,Z,G)}},ge=(I,N,D,M,j,Q,Z)=>{const G=N.el=I.el;let{patchFlag:X,dynamicChildren:z,dirs:he}=N;X|=I.patchFlag&16;const ce=I.props||ct,de=N.props||ct;let we;D&&ws(D,!1),(we=de.onVnodeBeforeUpdate)&&vi(we,D,N,I),he&&_s(N,I,D,"beforeUpdate"),D&&ws(D,!0);const De=j&&N.type!=="foreignObject";if(z?R(I.dynamicChildren,z,G,D,M,De,Q):Z||Ce(I,N,G,null,D,M,De,Q,!1),X>0){if(X&16)tt(G,N,ce,de,D,M,j);else if(X&2&&ce.class!==de.class&&s(G,"class",null,de.class,j),X&4&&s(G,"style",ce.style,de.style,j),X&8){const ve=N.dynamicProps;for(let Ke=0;Ke<ve.length;Ke++){const rt=ve[Ke],Gn=ce[rt],xi=de[rt];(xi!==Gn||rt==="value")&&s(G,rt,Gn,xi,j,I.children,D,M,re)}}X&1&&I.children!==N.children&&d(G,N.children)}else!Z&&z==null&&tt(G,N,ce,de,D,M,j);((we=de.onVnodeUpdated)||he)&&Zn(()=>{we&&vi(we,D,N,I),he&&_s(N,I,D,"updated")},M)},R=(I,N,D,M,j,Q,Z)=>{for(let G=0;G<N.length;G++){const X=I[G],z=N[G],he=X.el&&(X.type===fr||!As(X,z)||X.shapeFlag&70)?v(X.el):D;E(X,z,he,null,M,j,Q,Z,!0)}},tt=(I,N,D,M,j,Q,Z)=>{if(D!==M){if(D!==ct)for(const G in D)!cd(G)&&!(G in M)&&s(I,G,D[G],null,Z,N.children,j,Q,re);for(const G in M){if(cd(G))continue;const X=M[G],z=D[G];X!==z&&G!=="value"&&s(I,G,z,X,Z,N.children,j,Q,re)}"value"in M&&s(I,"value",D.value,M.value)}},lt=(I,N,D,M,j,Q,Z,G,X)=>{const z=N.el=I?I.el:c(""),he=N.anchor=I?I.anchor:c("");let{patchFlag:ce,dynamicChildren:de,slotScopeIds:we}=N;we&&(G=G?G.concat(we):we),I==null?(r(z,D,M),r(he,D,M),F(N.children,D,he,j,Q,Z,G,X)):ce>0&&ce&64&&de&&I.dynamicChildren?(R(I.dynamicChildren,de,D,j,Q,Z,G),(N.key!=null||j&&N===j.subTree)&&t1(I,N,!0)):Ce(I,N,D,he,j,Q,Z,G,X)},Pn=(I,N,D,M,j,Q,Z,G,X)=>{N.slotScopeIds=G,I==null?N.shapeFlag&512?j.ctx.activate(N,D,M,Z,X):Ft(N,D,M,j,Q,Z,X):ft(I,N,X)},Ft=(I,N,D,M,j,Q,Z)=>{const G=I.component=sV(I,M,j);if(Rp(I)&&(G.ctx.renderer=Ve),aV(G),G.asyncDep){if(j&&j.registerDep(G,ot),!I.el){const X=G.subTree=Zt(ei);k(null,X,N,D)}return}ot(G,I,N,D,j,Q,Z)},ft=(I,N,D)=>{const M=N.component=I.component;if(m4(I,N,D))if(M.asyncDep&&!M.asyncResolved){Ye(M,N,D);return}else M.next=N,l4(M.update),M.update();else N.el=I.el,M.vnode=N},ot=(I,N,D,M,j,Q,Z)=>{const G=()=>{if(I.isMounted){let{next:he,bu:ce,u:de,parent:we,vnode:De}=I,ve=he,Ke;ws(I,!1),he?(he.el=De.el,Ye(I,he,Z)):he=De,ce&&ld(ce),(Ke=he.props&&he.props.onVnodeBeforeUpdate)&&vi(Ke,we,he,De),ws(I,!0);const rt=_y(I),Gn=I.subTree;I.subTree=rt,E(Gn,rt,v(Gn.el),ne(Gn),I,j,Q),he.el=rt.el,ve===null&&y4(I,rt.el),de&&Zn(de,j),(Ke=he.props&&he.props.onVnodeUpdated)&&Zn(()=>vi(Ke,we,he,De),j)}else{let he;const{el:ce,props:de}=N,{bm:we,m:De,parent:ve}=I,Ke=hd(N);if(ws(I,!1),we&&ld(we),!Ke&&(he=de&&de.onVnodeBeforeMount)&&vi(he,ve,N),ws(I,!0),ce&&Ie){const rt=()=>{I.subTree=_y(I),Ie(ce,I.subTree,I,j,null)};Ke?N.type.__asyncLoader().then(()=>!I.isUnmounted&&rt()):rt()}else{const rt=I.subTree=_y(I);E(null,rt,D,M,I,j,Q),N.el=rt.el}if(De&&Zn(De,j),!Ke&&(he=de&&de.onVnodeMounted)){const rt=N;Zn(()=>vi(he,ve,rt),j)}(N.shapeFlag&256||ve&&hd(ve.vnode)&&ve.vnode.shapeFlag&256)&&I.a&&Zn(I.a,j),I.isMounted=!0,N=D=M=null}},X=I.effect=new Hw(G,()=>Xw(z),I.scope),z=I.update=()=>X.run();z.id=I.uid,ws(I,!0),z()},Ye=(I,N,D)=>{N.component=I;const M=I.vnode.props;I.vnode=N,I.next=null,K4(I,N.props,M,D),$4(I,N.children,D),zu(),IC(),Wu()},Ce=(I,N,D,M,j,Q,Z,G,X=!1)=>{const z=I&&I.children,he=I?I.shapeFlag:0,ce=N.children,{patchFlag:de,shapeFlag:we}=N;if(de>0){if(de&128){$n(z,ce,D,M,j,Q,Z,G,X);return}else if(de&256){On(z,ce,D,M,j,Q,Z,G,X);return}}we&8?(he&16&&re(z,j,Q),ce!==z&&d(D,ce)):he&16?we&16?$n(z,ce,D,M,j,Q,Z,G,X):re(z,j,Q,!0):(he&8&&d(D,""),we&16&&F(ce,D,M,j,Q,Z,G,X))},On=(I,N,D,M,j,Q,Z,G,X)=>{I=I||ou,N=N||ou;const z=I.length,he=N.length,ce=Math.min(z,he);let de;for(de=0;de<ce;de++){const we=N[de]=X?Eo(N[de]):mi(N[de]);E(I[de],we,D,null,j,Q,Z,G,X)}z>he?re(I,j,Q,!0,!1,ce):F(N,D,M,j,Q,Z,G,X,ce)},$n=(I,N,D,M,j,Q,Z,G,X)=>{let z=0;const he=N.length;let ce=I.length-1,de=he-1;for(;z<=ce&&z<=de;){const we=I[z],De=N[z]=X?Eo(N[z]):mi(N[z]);if(As(we,De))E(we,De,D,null,j,Q,Z,G,X);else break;z++}for(;z<=ce&&z<=de;){const we=I[ce],De=N[de]=X?Eo(N[de]):mi(N[de]);if(As(we,De))E(we,De,D,null,j,Q,Z,G,X);else break;ce--,de--}if(z>ce){if(z<=de){const we=de+1,De=we<he?N[we].el:M;for(;z<=de;)E(null,N[z]=X?Eo(N[z]):mi(N[z]),D,De,j,Q,Z,G,X),z++}}else if(z>de)for(;z<=ce;)rn(I[z],j,Q,!0),z++;else{const we=z,De=z,ve=new Map;for(z=De;z<=de;z++){const Et=N[z]=X?Eo(N[z]):mi(N[z]);Et.key!=null&&ve.set(Et.key,z)}let Ke,rt=0;const Gn=de-De+1;let xi=!1,bt=0;const so=new Array(Gn);for(z=0;z<Gn;z++)so[z]=0;for(z=we;z<=ce;z++){const Et=I[z];if(rt>=Gn){rn(Et,j,Q,!0);continue}let or;if(Et.key!=null)or=ve.get(Et.key);else for(Ke=De;Ke<=de;Ke++)if(so[Ke-De]===0&&As(Et,N[Ke])){or=Ke;break}or===void 0?rn(Et,j,Q,!0):(so[or-De]=z+1,or>=bt?bt=or:xi=!0,E(Et,N[or],D,null,j,Q,Z,G,X),rt++)}const si=xi?J4(so):ou;for(Ke=si.length-1,z=Gn-1;z>=0;z--){const Et=De+z,or=N[Et],on=Et+1<he?N[Et+1].el:M;so[z]===0?E(null,or,D,on,j,Q,Z,G,X):xi&&(Ke<0||z!==si[Ke]?xn(or,D,on,2):Ke--)}}},xn=(I,N,D,M,j=null)=>{const{el:Q,type:Z,transition:G,children:X,shapeFlag:z}=I;if(z&6){xn(I.component.subTree,N,D,M);return}if(z&128){I.suspense.move(N,D,M);return}if(z&64){Z.move(I,N,D,Ve);return}if(Z===fr){r(Q,N,D);for(let ce=0;ce<X.length;ce++)xn(X[ce],N,D,M);r(I.anchor,N,D);return}if(Z===Ey){O(I,N,D);return}if(M!==2&&z&1&&G)if(M===0)G.beforeEnter(Q),r(Q,N,D),Zn(()=>G.enter(Q),j);else{const{leave:ce,delayLeave:de,afterLeave:we}=G,De=()=>r(Q,N,D),ve=()=>{ce(Q,()=>{De(),we&&we()})};de?de(Q,De,ve):ve()}else r(Q,N,D)},rn=(I,N,D,M=!1,j=!1)=>{const{type:Q,props:Z,ref:G,children:X,dynamicChildren:z,shapeFlag:he,patchFlag:ce,dirs:de}=I;if(G!=null&&E_(G,null,D,I,!0),he&256){N.ctx.deactivate(I);return}const we=he&1&&de,De=!hd(I);let ve;if(De&&(ve=Z&&Z.onVnodeBeforeUnmount)&&vi(ve,N,I),he&6)V(I.component,D,M);else{if(he&128){I.suspense.unmount(D,M);return}we&&_s(I,null,N,"beforeUnmount"),he&64?I.type.remove(I,N,D,j,Ve,M):z&&(Q!==fr||ce>0&&ce&64)?re(z,N,D,!1,!0):(Q===fr&&ce&384||!j&&he&16)&&re(X,N,D),M&&Oi(I)}(De&&(ve=Z&&Z.onVnodeUnmounted)||we)&&Zn(()=>{ve&&vi(ve,N,I),we&&_s(I,null,N,"unmounted")},D)},Oi=I=>{const{type:N,el:D,anchor:M,transition:j}=I;if(N===fr){Zo(D,M);return}if(N===Ey){H(I);return}const Q=()=>{i(D),j&&!j.persisted&&j.afterLeave&&j.afterLeave()};if(I.shapeFlag&1&&j&&!j.persisted){const{leave:Z,delayLeave:G}=j,X=()=>Z(D,Q);G?G(I.el,Q,X):X()}else Q()},Zo=(I,N)=>{let D;for(;I!==N;)D=m(I),i(I),I=D;i(N)},V=(I,N,D)=>{const{bum:M,scope:j,update:Q,subTree:Z,um:G}=I;M&&ld(M),j.stop(),Q&&(Q.active=!1,rn(Z,I,N,D)),G&&Zn(G,N),Zn(()=>{I.isUnmounted=!0},N),N&&N.pendingBranch&&!N.isUnmounted&&I.asyncDep&&!I.asyncResolved&&I.suspenseId===N.pendingId&&(N.deps--,N.deps===0&&N.resolve())},re=(I,N,D,M=!1,j=!1,Q=0)=>{for(let Z=Q;Z<I.length;Z++)rn(I[Z],N,D,M,j)},ne=I=>I.shapeFlag&6?ne(I.component.subTree):I.shapeFlag&128?I.suspense.next():m(I.anchor||I.el),J=(I,N,D)=>{I==null?N._vnode&&rn(N._vnode,null,null,!0):E(N._vnode||null,I,N,null,null,null,D),IC(),DN(),N._vnode=I},Ve={p:E,um:rn,m:xn,r:Oi,mt:Ft,mc:F,pc:Ce,pbc:R,n:ne,o:e};let at,Ie;return t&&([at,Ie]=t(Ve)),{render:J,hydrate:at,createApp:Q4(J,at)}}function ws({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function t1(e,t,n=!1){const r=e.children,i=t.children;if(Te(r)&&Te(i))for(let s=0;s<r.length;s++){const a=r[s];let c=i[s];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=i[s]=Eo(i[s]),c.el=a.el),n||t1(a,c)),c.type===Pp&&(c.el=a.el)}}function J4(e){const t=e.slice(),n=[0];let r,i,s,a,c;const l=e.length;for(r=0;r<l;r++){const h=e[r];if(h!==0){if(i=n[n.length-1],e[i]<h){t[r]=i,n.push(r);continue}for(s=0,a=n.length-1;s<a;)c=s+a>>1,e[n[c]]<h?s=c+1:a=c;h<e[n[s]]&&(s>0&&(t[r]=n[s-1]),n[s]=r)}}for(s=n.length,a=n[s-1];s-- >0;)n[s]=a,a=t[a];return n}const Z4=e=>e.__isTeleport,fr=Symbol(void 0),Pp=Symbol(void 0),ei=Symbol(void 0),Ey=Symbol(void 0),sl=[];let Xr=null;function wt(e=!1){sl.push(Xr=e?null:[])}function eV(){sl.pop(),Xr=sl[sl.length-1]||null}let Rl=1;function DC(e){Rl+=e}function n1(e){return e.dynamicChildren=Rl>0?Xr||ou:null,eV(),Rl>0&&Xr&&Xr.push(e),e}function ln(e,t,n,r,i,s){return n1(dn(e,t,n,r,i,s,!0))}function uu(e,t,n,r,i){return n1(Zt(e,t,n,r,i,!0))}function T_(e){return e?e.__v_isVNode===!0:!1}function As(e,t){return e.type===t.type&&e.key===t.key}const Op="__vInternal",r1=({key:e})=>e??null,dd=({ref:e,ref_key:t,ref_for:n})=>e!=null?Kt(e)||St(e)||ke(e)?{i:pr,r:e,k:t,f:!!n}:e:null;function dn(e,t=null,n=null,r=0,i=null,s=e===fr?0:1,a=!1,c=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&r1(t),ref:t&&dd(t),scopeId:FN,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:pr};return c?(nb(l,n),s&128&&e.normalize(l)):n&&(l.shapeFlag|=Kt(n)?8:16),Rl>0&&!a&&Xr&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&Xr.push(l),l}const Zt=tV;function tV(e,t=null,n=null,r=0,i=null,s=!1){if((!e||e===L4)&&(e=ei),T_(e)){const c=Vo(e,t,!0);return n&&nb(c,n),Rl>0&&!s&&Xr&&(c.shapeFlag&6?Xr[Xr.indexOf(e)]=c:Xr.push(c)),c.patchFlag|=-2,c}if(hV(e)&&(e=e.__vccOpts),t){t=nV(t);let{class:c,style:l}=t;c&&!Kt(c)&&(t.class=Il(c)),gt(l)&&(SN(l)&&!Te(l)&&(l=An({},l)),t.style=Fw(l))}const a=Kt(e)?1:_4(e)?128:Z4(e)?64:gt(e)?4:ke(e)?2:0;return dn(e,t,n,r,i,a,s,!0)}function nV(e){return e?SN(e)||Op in e?An({},e):e:null}function Vo(e,t,n=!1){const{props:r,ref:i,patchFlag:s,children:a}=e,c=t?rV(r||{},t):r;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&r1(c),ref:t&&t.ref?n&&i?Te(i)?i.concat(dd(t)):[i,dd(t)]:dd(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==fr?s===-1?16:s|16:s,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Vo(e.ssContent),ssFallback:e.ssFallback&&Vo(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx}}function Bs(e=" ",t=0){return Zt(Pp,null,e,t)}function pd(e="",t=!1){return t?(wt(),uu(ei,null,e)):Zt(ei,null,e)}function mi(e){return e==null||typeof e=="boolean"?Zt(ei):Te(e)?Zt(fr,null,e.slice()):typeof e=="object"?Eo(e):Zt(Pp,null,String(e))}function Eo(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Vo(e)}function nb(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(Te(t))n=16;else if(typeof t=="object")if(r&65){const i=t.default;i&&(i._c&&(i._d=!1),nb(e,i()),i._c&&(i._d=!0));return}else{n=32;const i=t._;!i&&!(Op in t)?t._ctx=pr:i===3&&pr&&(pr.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ke(t)?(t={default:t,_ctx:pr},n=32):(t=String(t),r&64?(n=16,t=[Bs(t)]):n=8);e.children=t,e.shapeFlag|=n}function rV(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const i in r)if(i==="class")t.class!==r.class&&(t.class=Il([t.class,r.class]));else if(i==="style")t.style=Fw([t.style,r.style]);else if(bp(i)){const s=t[i],a=r[i];a&&s!==a&&!(Te(s)&&s.includes(a))&&(t[i]=s?[].concat(s,a):a)}else i!==""&&(t[i]=r[i])}return t}function vi(e,t,n,r=null){Or(e,t,7,[n,r])}const iV=e1();let oV=0;function sV(e,t,n){const r=e.type,i=(t?t.appContext:e.appContext)||iV,s={uid:oV++,vnode:e,type:r,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new hN(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:YN(r,i),emitsOptions:MN(r,i),emit:null,emitted:null,propsDefaults:ct,inheritAttrs:r.inheritAttrs,ctx:ct,data:ct,props:ct,attrs:ct,slots:ct,refs:ct,setupState:ct,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=d4.bind(null,s),e.ce&&e.ce(s),s}let Xt=null;const i1=()=>Xt||pr,gu=e=>{Xt=e,e.scope.on()},qs=()=>{Xt&&Xt.scope.off(),Xt=null};function o1(e){return e.vnode.shapeFlag&4}let Nl=!1;function aV(e,t=!1){Nl=t;const{props:n,children:r}=e.vnode,i=o1(e);H4(e,n,i,t),W4(e,r);const s=i?uV(e,t):void 0;return Nl=!1,s}function uV(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=vu(new Proxy(e.ctx,F4));const{setup:r}=n;if(r){const i=e.setupContext=r.length>1?lV(e):null;gu(e),zu();const s=Oo(r,e,0,[e.props,i]);if(Wu(),qs(),cN(s)){if(s.then(qs,qs),t)return s.then(a=>{LC(e,a,t)}).catch(a=>{Ap(a,e,0)});e.asyncDep=s}else LC(e,s,t)}else s1(e,t)}function LC(e,t,n){ke(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:gt(t)&&(e.setupState=RN(t)),s1(e,n)}let MC;function s1(e,t,n){const r=e.type;if(!e.render){if(!t&&MC&&!r.render){const i=r.template||eb(e).template;if(i){const{isCustomElement:s,compilerOptions:a}=e.appContext.config,{delimiters:c,compilerOptions:l}=r,h=An(An({isCustomElement:s,delimiters:c},a),l);r.render=MC(i,h)}}e.render=r.render||Zr}gu(e),zu(),U4(e),Wu(),qs()}function cV(e){return new Proxy(e.attrs,{get(t,n){return yr(e,"get","$attrs"),t[n]}})}function lV(e){const t=r=>{e.exposed=r||{}};let n;return{get attrs(){return n||(n=cV(e))},slots:e.slots,emit:e.emit,expose:t}}function xp(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(RN(vu(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in ol)return ol[n](e)},has(t,n){return n in t||n in ol}}))}function fV(e,t=!0){return ke(e)?e.displayName||e.name:e.name||t&&e.__name}function hV(e){return ke(e)&&"__vccOpts"in e}const Vt=(e,t)=>a4(e,t,Nl);function rb(e,t,n){const r=arguments.length;return r===2?gt(t)&&!Te(t)?T_(t)?Zt(e,null,[t]):Zt(e,t):Zt(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&T_(n)&&(n=[n]),Zt(e,t,n))}const dV=Symbol(""),pV=()=>xr(dV),vV="3.2.45",gV="http://www.w3.org/2000/svg",ks=typeof document<"u"?document:null,FC=ks&&ks.createElement("template"),mV={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const i=t?ks.createElementNS(gV,e):ks.createElement(e,n?{is:n}:void 0);return e==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:e=>ks.createTextNode(e),createComment:e=>ks.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>ks.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,i,s){const a=n?n.previousSibling:t.lastChild;if(i&&(i===s||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{FC.innerHTML=r?`<svg>${e}</svg>`:e;const c=FC.content;if(r){const l=c.firstChild;for(;l.firstChild;)c.appendChild(l.firstChild);c.removeChild(l)}t.insertBefore(c,n)}return[a?a.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function yV(e,t,n){const r=e._vtc;r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function _V(e,t,n){const r=e.style,i=Kt(n);if(n&&!i){for(const s in n)I_(r,s,n[s]);if(t&&!Kt(t))for(const s in t)n[s]==null&&I_(r,s,"")}else{const s=r.display;i?t!==n&&(r.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(r.display=s)}}const UC=/\s*!important$/;function I_(e,t,n){if(Te(n))n.forEach(r=>I_(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=wV(e,t);UC.test(n)?e.setProperty(Ku(r),n.replace(UC,""),"important"):e[r]=n}}const jC=["Webkit","Moz","ms"],Ty={};function wV(e,t){const n=Ty[t];if(n)return n;let r=Si(t);if(r!=="filter"&&r in e)return Ty[t]=r;r=Ip(r);for(let i=0;i<jC.length;i++){const s=jC[i]+r;if(s in e)return Ty[t]=s}return t}const VC="http://www.w3.org/1999/xlink";function bV(e,t,n,r,i){if(r&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(VC,t.slice(6,t.length)):e.setAttributeNS(VC,t,n);else{const s=yj(t);n==null||s&&!sN(n)?e.removeAttribute(t):e.setAttribute(t,s?"":n)}}function EV(e,t,n,r,i,s,a){if(t==="innerHTML"||t==="textContent"){r&&a(r,i,s),e[t]=n??"";return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=n;const l=n??"";(e.value!==l||e.tagName==="OPTION")&&(e.value=l),n==null&&e.removeAttribute(t);return}let c=!1;if(n===""||n==null){const l=typeof e[t];l==="boolean"?n=sN(n):n==null&&l==="string"?(n="",c=!0):l==="number"&&(n=0,c=!0)}try{e[t]=n}catch{}c&&e.removeAttribute(t)}function Ja(e,t,n,r){e.addEventListener(t,n,r)}function TV(e,t,n,r){e.removeEventListener(t,n,r)}function IV(e,t,n,r,i=null){const s=e._vei||(e._vei={}),a=s[t];if(r&&a)a.value=r;else{const[c,l]=SV(t);if(r){const h=s[t]=kV(r,i);Ja(e,c,h,l)}else a&&(TV(e,c,a,l),s[t]=void 0)}}const BC=/(?:Once|Passive|Capture)$/;function SV(e){let t;if(BC.test(e)){t={};let r;for(;r=e.match(BC);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Ku(e.slice(2)),t]}let Iy=0;const CV=Promise.resolve(),AV=()=>Iy||(CV.then(()=>Iy=0),Iy=Date.now());function kV(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Or(RV(r,n.value),t,5,[r])};return n.value=e,n.attached=AV(),n}function RV(e,t){if(Te(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>i=>!i._stopped&&r&&r(i))}else return t}const qC=/^on[a-z]/,NV=(e,t,n,r,i=!1,s,a,c,l)=>{t==="class"?yV(e,r,i):t==="style"?_V(e,n,r):bp(t)?Uw(t)||IV(e,t,n,r,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):PV(e,t,r,i))?EV(e,t,r,s,a,c,l):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),bV(e,t,r,i))};function PV(e,t,n,r){return r?!!(t==="innerHTML"||t==="textContent"||t in e&&qC.test(t)&&ke(n)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||qC.test(t)&&Kt(n)?!1:t in e}const OV={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};I4.props;const HC=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Te(t)?n=>ld(t,n):t};function xV(e){e.target.composing=!0}function KC(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const DV={created(e,{modifiers:{lazy:t,trim:n,number:r}},i){e._assign=HC(i);const s=r||i.props&&i.props.type==="number";Ja(e,t?"change":"input",a=>{if(a.target.composing)return;let c=e.value;n&&(c=c.trim()),s&&(c=Sd(c)),e._assign(c)}),n&&Ja(e,"change",()=>{e.value=e.value.trim()}),t||(Ja(e,"compositionstart",xV),Ja(e,"compositionend",KC),Ja(e,"change",KC))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:r,number:i}},s){if(e._assign=HC(s),e.composing||document.activeElement===e&&e.type!=="range"&&(n||r&&e.value.trim()===t||(i||e.type==="number")&&Sd(e.value)===t))return;const a=t??"";e.value!==a&&(e.value=a)}},LV={beforeMount(e,{value:t},{transition:n}){e._vod=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):$c(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:r}){!t!=!n&&(r?t?(r.beforeEnter(e),$c(e,!0),r.enter(e)):r.leave(e,()=>{$c(e,!1)}):$c(e,t))},beforeUnmount(e,{value:t}){$c(e,t)}};function $c(e,t){e.style.display=t?e._vod:"none"}const MV=An({patchProp:NV},mV);let zC;function FV(){return zC||(zC=Y4(MV))}const UV=(...e)=>{const t=FV().createApp(...e),{mount:n}=t;return t.mount=r=>{const i=jV(r);if(!i)return;const s=t._component;!ke(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.innerHTML="";const a=n(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),a},t};function jV(e){return Kt(e)?document.querySelector(e):e}var VV=!1;/*!
  * pinia v2.0.29
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */let a1;const Dp=e=>a1=e,u1=Symbol();function S_(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var al;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(al||(al={}));function BV(){const e=dN(!0),t=e.run(()=>Cp({}));let n=[],r=[];const i=vu({install(s){Dp(i),i._a=s,s.provide(u1,i),s.config.globalProperties.$pinia=i,r.forEach(a=>n.push(a)),r=[]},use(s){return!this._a&&!VV?r.push(s):n.push(s),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return i}const c1=()=>{};function WC(e,t,n,r=c1){e.push(t);const i=()=>{const s=e.indexOf(t);s>-1&&(e.splice(s,1),r())};return!n&&Aj()&&kj(i),i}function Wa(e,...t){e.slice().forEach(n=>{n(...t)})}function C_(e,t){e instanceof Map&&t instanceof Map&&t.forEach((n,r)=>e.set(r,n)),e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const r=t[n],i=e[n];S_(i)&&S_(r)&&e.hasOwnProperty(n)&&!St(r)&&!Wi(r)?e[n]=C_(i,r):e[n]=r}return e}const qV=Symbol();function HV(e){return!S_(e)||!e.hasOwnProperty(qV)}const{assign:To}=Object;function KV(e){return!!(St(e)&&e.effect)}function zV(e,t,n,r){const{state:i,actions:s,getters:a}=t,c=n.state.value[e];let l;function h(){c||(n.state.value[e]=i?i():{});const d=i4(n.state.value[e]);return To(d,s,Object.keys(a||{}).reduce((v,m)=>(v[m]=vu(Vt(()=>{Dp(n);const y=n._s.get(e);return a[m].call(y,y)})),v),{}))}return l=l1(e,h,t,n,r,!0),l.$reset=function(){const v=i?i():{};this.$patch(m=>{To(m,v)})},l}function l1(e,t,n={},r,i,s){let a;const c=To({actions:{}},n),l={deep:!0};let h,d,v=vu([]),m=vu([]),y;const w=r.state.value[e];!s&&!w&&(r.state.value[e]={}),Cp({});let E;function T(ie){let F;h=d=!1,typeof ie=="function"?(ie(r.state.value[e]),F={type:al.patchFunction,storeId:e,events:y}):(C_(r.state.value[e],ie),F={type:al.patchObject,payload:ie,storeId:e,events:y});const ge=E=Symbol();Yw().then(()=>{E===ge&&(h=!0)}),d=!0,Wa(v,F,r.state.value[e])}const k=c1;function P(){a.stop(),v=[],m=[],r._s.delete(e)}function O(ie,F){return function(){Dp(r);const ge=Array.from(arguments),R=[],tt=[];function lt(ft){R.push(ft)}function Pn(ft){tt.push(ft)}Wa(m,{args:ge,name:ie,store:K,after:lt,onError:Pn});let Ft;try{Ft=F.apply(this&&this.$id===e?this:K,ge)}catch(ft){throw Wa(tt,ft),ft}return Ft instanceof Promise?Ft.then(ft=>(Wa(R,ft),ft)).catch(ft=>(Wa(tt,ft),Promise.reject(ft))):(Wa(R,Ft),Ft)}}const H={_p:r,$id:e,$onAction:WC.bind(null,m),$patch:T,$reset:k,$subscribe(ie,F={}){const ge=WC(v,ie,F.detached,()=>R()),R=a.run(()=>Vs(()=>r.state.value[e],tt=>{(F.flush==="sync"?d:h)&&ie({storeId:e,type:al.direct,events:y},tt)},To({},l,F)));return ge},$dispose:P},K=ca(H);r._s.set(e,K);const U=r._e.run(()=>(a=dN(),a.run(()=>t())));for(const ie in U){const F=U[ie];if(St(F)&&!KV(F)||Wi(F))s||(w&&HV(F)&&(St(F)?F.value=w[ie]:C_(F,w[ie])),r.state.value[e][ie]=F);else if(typeof F=="function"){const ge=O(ie,F);U[ie]=ge,c.actions[ie]=F}}return To(K,U),To(He(K),U),Object.defineProperty(K,"$state",{get:()=>r.state.value[e],set:ie=>{T(F=>{To(F,ie)})}}),r._p.forEach(ie=>{To(K,a.run(()=>ie({store:K,app:r._a,pinia:r,options:c})))}),w&&s&&n.hydrate&&n.hydrate(K.$state,w),h=!0,d=!0,K}function f1(e,t,n){let r,i;const s=typeof t=="function";typeof e=="string"?(r=e,i=s?n:t):(i=e,r=e.id);function a(c,l){const h=i1();return c=c||h&&xr(u1,null),c&&Dp(c),c=a1,c._s.has(r)||(s?l1(r,t,i,c):zV(r,i,c)),c._s.get(r)}return a.$id=r,a}function Qs(e){{e=He(e);const t={};for(const n in e){const r=e[n];(St(r)||Wi(r))&&(t[n]=NN(e,n))}return t}}var A_=function(e,t){return A_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},A_(e,t)};function te(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");A_(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var me=function(){return me=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},me.apply(this,arguments)};function A(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function c(d){try{h(r.next(d))}catch(v){a(v)}}function l(d){try{h(r.throw(d))}catch(v){a(v)}}function h(d){d.done?s(d.value):i(d.value).then(c,l)}h((r=r.apply(e,t||[])).next())})}function C(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(h){return function(d){return l([h,d])}}function l(h){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,h[0]&&(n=0)),n;)try{if(r=1,i&&(s=h[0]&2?i.return:h[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,h[1])).done)return s;switch(i=0,s&&(h=[h[0]&2,s.value]),h[0]){case 0:case 1:s=h;break;case 4:return n.label++,{value:h[1],done:!1};case 5:n.label++,i=h[1],h=[0];continue;case 7:h=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(h[0]===6||h[0]===2)){n=0;continue}if(h[0]===3&&(!s||h[1]>s[0]&&h[1]<s[3])){n.label=h[1];break}if(h[0]===6&&n.label<s[1]){n.label=s[1],s=h;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(h);break}s[2]&&n.ops.pop(),n.trys.pop();continue}h=t.call(e,n)}catch(d){h=[6,d],i=0}finally{r=s=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function tn(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function fn(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,s=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return s}function Ne(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var h1={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $=function(e,t){if(!e)throw $u(t)},$u=function(e){return new Error("Firebase Database ("+h1.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var d1=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},WV=function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){var s=e[n++],a=e[n++],c=e[n++],l=((i&7)<<18|(s&63)<<12|(a&63)<<6|c&63)-65536;t[r++]=String.fromCharCode(55296+(l>>10)),t[r++]=String.fromCharCode(56320+(l&1023))}else{var s=e[n++],a=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return t.join("")},Lp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var s=e[i],a=i+1<e.length,c=a?e[i+1]:0,l=i+2<e.length,h=l?e[i+2]:0,d=s>>2,v=(s&3)<<4|c>>4,m=(c&15)<<2|h>>6,y=h&63;l||(y=64,a||(m=64)),r.push(n[d],n[v],n[m],n[y])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(d1(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):WV(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var s=n[e.charAt(i++)],a=i<e.length,c=a?n[e.charAt(i)]:0;++i;var l=i<e.length,h=l?n[e.charAt(i)]:64;++i;var d=i<e.length,v=d?n[e.charAt(i)]:64;if(++i,s==null||c==null||h==null||v==null)throw Error();var m=s<<2|c>>4;if(r.push(m),h!==64){var y=c<<4&240|h>>2;if(r.push(y),v!==64){var w=h<<6&192|v;r.push(w)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},p1=function(e){var t=d1(e);return Lp.encodeByteArray(t,!0)},$C=function(e){return p1(e).replace(/\./g,"")},GC=function(e){try{return Lp.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1(e){return Pl(void 0,e)}function Pl(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:var n=t;return new Date(n.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return t}for(var r in t)!t.hasOwnProperty(r)||!$V(r)||(e[r]=Pl(e[r],t[r]));return e}function $V(e){return e!=="__proto__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jt=function(){function e(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(n,r){t.resolve=n,t.reject=r})}return e.prototype.wrapCallback=function(t){var n=this;return function(r,i){r?n.reject(r):n.resolve(i),typeof t=="function"&&(n.promise.catch(function(){}),t.length===1?t(r):t(r,i))}},e}();/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ib(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=me({iss:"https://securetoken.google.com/"+r,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e),c="";return[$C(JSON.stringify(n)),$C(JSON.stringify(a)),c].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ys(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ob(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ys())}function g1(){try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function GV(){return typeof self=="object"&&self.self===self}function sb(){var e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function m1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function QV(){return Ys().indexOf("Electron/")>=0}function YV(){var e=Ys();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function XV(){return Ys().indexOf("MSAppHost/")>=0}function y1(){return h1.NODE_ADMIN===!0}function JV(){return!g1()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function af(){return"indexedDB"in self&&indexedDB!=null}function ab(){return new Promise(function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(s){t(s)}})}function _1(){return!(!navigator||!navigator.cookieEnabled)}function ZV(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var eB="FirebaseError",Gu=function(e){te(t,e);function t(n,r,i){var s=e.call(this,r)||this;return s.code=n,s.customData=i,s.name=eB,Object.setPrototypeOf(s,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(s,no.prototype.create),s}return t}(Error),no=function(){function e(t,n,r){this.service=t,this.serviceName=n,this.errors=r}return e.prototype.create=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=n[0]||{},s=this.service+"/"+t,a=this.errors[t],c=a?tB(a,i):"Error",l=this.serviceName+": "+c+" ("+s+").",h=new Gu(s,l,i);return h},e}();function tB(e,t){return e.replace(nB,function(n,r){var i=t[r];return i!=null?String(i):"<"+r+"?>"})}var nB=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ol(e){return JSON.parse(e)}function Bt(e){return JSON.stringify(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ub=function(e){var t={},n={},r={},i="";try{var s=e.split(".");t=Ol(GC(s[0])||""),n=Ol(GC(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:t,claims:n,data:r,signature:i}},rB=function(e){var t=ub(e).claims;return typeof t=="object"&&t.hasOwnProperty("iat")?t.iat:null},iB=function(e){var t=ub(e),n=t.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},oB=function(e){var t=ub(e).claims;return typeof t=="object"&&t.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Xs(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function k_(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Rd(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sB(e){for(var t=[],n=function(l,h){Array.isArray(h)?h.forEach(function(d){t.push(encodeURIComponent(l)+"="+encodeURIComponent(d))}):t.push(encodeURIComponent(l)+"="+encodeURIComponent(h))},r=0,i=Object.entries(e);r<i.length;r++){var s=i[r],a=s[0],c=s[1];n(a,c)}return t.length?"&"+t.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var aB=function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(t,n){n||(n=0);var r=this.W_;if(typeof t=="string")for(var i=0;i<16;i++)r[i]=t.charCodeAt(n)<<24|t.charCodeAt(n+1)<<16|t.charCodeAt(n+2)<<8|t.charCodeAt(n+3),n+=4;else for(var i=0;i<16;i++)r[i]=t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3],n+=4;for(var i=16;i<80;i++){var s=r[i-3]^r[i-8]^r[i-14]^r[i-16];r[i]=(s<<1|s>>>31)&4294967295}for(var a=this.chain_[0],c=this.chain_[1],l=this.chain_[2],h=this.chain_[3],d=this.chain_[4],v,m,i=0;i<80;i++){i<40?i<20?(v=h^c&(l^h),m=1518500249):(v=c^l^h,m=1859775393):i<60?(v=c&l|h&(c|l),m=2400959708):(v=c^l^h,m=3395469782);var s=(a<<5|a>>>27)+v+d+m+r[i]&4294967295;d=h,h=l,l=(c<<30|c>>>2)&4294967295,c=a,a=s}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+c&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295},e.prototype.update=function(t,n){if(t!=null){n===void 0&&(n=t.length);for(var r=n-this.blockSize,i=0,s=this.buf_,a=this.inbuf_;i<n;){if(a===0)for(;i<=r;)this.compress_(t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<n;)if(s[a]=t.charCodeAt(i),++a,++i,a===this.blockSize){this.compress_(s),a=0;break}}else for(;i<n;)if(s[a]=t[i],++a,++i,a===this.blockSize){this.compress_(s),a=0;break}}this.inbuf_=a,this.total_+=n}},e.prototype.digest=function(){var t=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);for(var i=0,r=0;r<5;r++)for(var s=24;s>=0;s-=8)t[i]=this.chain_[r]>>s&255,++i;return t},e}();function uB(e,t){var n=new cB(e,t);return n.subscribe.bind(n)}var cB=function(){function e(t,n){var r=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(function(){t(r)}).catch(function(i){r.error(i)})}return e.prototype.next=function(t){this.forEachObserver(function(n){n.next(t)})},e.prototype.error=function(t){this.forEachObserver(function(n){n.error(t)}),this.close(t)},e.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},e.prototype.subscribe=function(t,n,r){var i=this,s;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");lB(t,["next","error","complete"])?s=t:s={next:t,error:n,complete:r},s.next===void 0&&(s.next=Sy),s.error===void 0&&(s.error=Sy),s.complete===void 0&&(s.complete=Sy);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?s.error(i.finalError):s.complete()}catch{}}),this.observers.push(s),a},e.prototype.unsubscribeOne=function(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))},e.prototype.forEachObserver=function(t){if(!this.finalized)for(var n=0;n<this.observers.length;n++)this.sendOne(n,t)},e.prototype.sendOne=function(t,n){var r=this;this.task.then(function(){if(r.observers!==void 0&&r.observers[t]!==void 0)try{n(r.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})},e.prototype.close=function(t){var n=this;this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(function(){n.observers=void 0,n.onNoObservers=void 0}))},e}();function lB(e,t){if(typeof e!="object"||e===null)return!1;for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i in e&&typeof e[i]=="function")return!0}return!1}function Sy(){}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ye=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=n===0?"none":"no more than "+n),i){var s=e+" failed: Was called with "+r+(r===1?" argument.":" arguments.")+" Expects "+i+".";throw new Error(s)}};function tr(e,t){return e+" failed: "+t+" argument "}function Gt(e,t,n,r){if(!(r&&!n)&&typeof n!="function")throw new Error(tr(e,t)+"must be a valid function.")}function QC(e,t,n,r){if(!(r&&!n)&&(typeof n!="object"||n===null))throw new Error(tr(e,t)+"must be a valid context object.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fB=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var s=i-55296;r++,$(r<e.length,"Surrogate pair missing trail surrogate.");var a=e.charCodeAt(r)-56320;i=65536+(s<<10)+a}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},Mp=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hB=1e3,dB=2,pB=4*60*60*1e3,vB=.5;function R_(e,t,n){t===void 0&&(t=hB),n===void 0&&(n=dB);var r=t*Math.pow(n,e),i=Math.round(vB*r*(Math.random()-.5)*2);return Math.min(pB,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(e){return e&&e._delegate?e._delegate:e}var kn=function(){function e(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return e.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},e.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},e.prototype.setServiceProps=function(t){return this.serviceProps=t,this},e.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ts="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var w1=function(){function e(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return e.prototype.get=function(t){var n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){var r=new Jt;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{var i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise},e.prototype.getImmediate=function(t){var n,r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error("Service "+this.name+" is not available")}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(t){var n,r;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,!!this.shouldAutoInitialize()){if(mB(t))try{this.getOrInitializeService({instanceIdentifier:Ts})}catch{}try{for(var i=tn(this.instancesDeferred.entries()),s=i.next();!s.done;s=i.next()){var a=fn(s.value,2),c=a[0],l=a[1],h=this.normalizeInstanceIdentifier(c);try{var d=this.getOrInitializeService({instanceIdentifier:h});l.resolve(d)}catch{}}}catch(v){n={error:v}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}},e.prototype.clearInstance=function(t){t===void 0&&(t=Ts),this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)},e.prototype.delete=function(){return A(this,void 0,void 0,function(){var t;return C(this,function(n){switch(n.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Ne(Ne([],fn(t.filter(function(r){return"INTERNAL"in r}).map(function(r){return r.INTERNAL.delete()}))),fn(t.filter(function(r){return"_delete"in r}).map(function(r){return r._delete()}))))];case 1:return n.sent(),[2]}})})},e.prototype.isComponentSet=function(){return this.component!=null},e.prototype.isInitialized=function(t){return t===void 0&&(t=Ts),this.instances.has(t)},e.prototype.getOptions=function(t){return t===void 0&&(t=Ts),this.instancesOptions.get(t)||{}},e.prototype.initialize=function(t){var n,r;t===void 0&&(t={});var i=t.options,s=i===void 0?{}:i,a=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(a))throw Error(this.name+"("+a+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var c=this.getOrInitializeService({instanceIdentifier:a,options:s});try{for(var l=tn(this.instancesDeferred.entries()),h=l.next();!h.done;h=l.next()){var d=fn(h.value,2),v=d[0],m=d[1],y=this.normalizeInstanceIdentifier(v);a===y&&m.resolve(c)}}catch(w){n={error:w}}finally{try{h&&!h.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}return c},e.prototype.onInit=function(t,n){var r,i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);var a=this.instances.get(i);return a&&t(a,i),function(){s.delete(t)}},e.prototype.invokeOnInitCallbacks=function(t,n){var r,i,s=this.onInitCallbacks.get(n);if(s)try{for(var a=tn(s),c=a.next();!c.done;c=a.next()){var l=c.value;try{l(t,n)}catch{}}}catch(h){r={error:h}}finally{try{c&&!c.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}},e.prototype.getOrInitializeService=function(t){var n=t.instanceIdentifier,r=t.options,i=r===void 0?{}:r,s=this.instances.get(n);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:gB(n),options:i}),this.instances.set(n,s),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(s,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,s)}catch{}return s||null},e.prototype.normalizeInstanceIdentifier=function(t){return t===void 0&&(t=Ts),this.component?this.component.multipleInstances?t:Ts:t},e.prototype.shouldAutoInitialize=function(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"},e}();function gB(e){return e===Ts?void 0:e}function mB(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var b1=function(){function e(t){this.name=t,this.providers=new Map}return e.prototype.addComponent=function(t){var n=this.getProvider(t.name);if(n.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);n.setComponent(t)},e.prototype.addOrOverwriteComponent=function(t){var n=this.getProvider(t.name);n.isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},e.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var n=new w1(t,this);return this.providers.set(t,n),n},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function Gr(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var s=arguments[t],a=0,c=s.length;a<c;a++,i++)r[i]=s[a];return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bs,cb=[],Le;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Le||(Le={}));var E1={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},yB=Le.INFO,_B=(bs={},bs[Le.DEBUG]="log",bs[Le.VERBOSE]="log",bs[Le.INFO]="info",bs[Le.WARN]="warn",bs[Le.ERROR]="error",bs),wB=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(t<e.logLevel)){var i=new Date().toISOString(),s=_B[t];if(s)console[s].apply(console,Gr(["["+i+"]  "+e.name+":"],n));else throw new Error("Attempted to log a message with an invalid logType (value: "+t+")")}},la=function(){function e(t){this.name=t,this._logLevel=yB,this._logHandler=wB,this._userLogHandler=null,cb.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in Le))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),e.prototype.setLogLevel=function(t){this._logLevel=typeof t=="string"?E1[t]:t},Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),e.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,Gr([this,Le.DEBUG],t)),this._logHandler.apply(this,Gr([this,Le.DEBUG],t))},e.prototype.log=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,Gr([this,Le.VERBOSE],t)),this._logHandler.apply(this,Gr([this,Le.VERBOSE],t))},e.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,Gr([this,Le.INFO],t)),this._logHandler.apply(this,Gr([this,Le.INFO],t))},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,Gr([this,Le.WARN],t)),this._logHandler.apply(this,Gr([this,Le.WARN],t))},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,Gr([this,Le.ERROR],t)),this._logHandler.apply(this,Gr([this,Le.ERROR],t))},e}();function bB(e){cb.forEach(function(t){t.setLogLevel(e)})}function EB(e,t){for(var n=function(a){var c=null;t&&t.level&&(c=E1[t.level]),e===null?a.userLogHandler=null:a.userLogHandler=function(l,h){for(var d=[],v=2;v<arguments.length;v++)d[v-2]=arguments[v];var m=d.map(function(y){if(y==null)return null;if(typeof y=="string")return y;if(typeof y=="number"||typeof y=="boolean")return y.toString();if(y instanceof Error)return y.message;try{return JSON.stringify(y)}catch{return null}}).filter(function(y){return y}).join(" ");h>=(c??l.logLevel)&&e({level:Le[h].toLowerCase(),message:m,args:d,type:l.name})}},r=0,i=cb;r<i.length;r++){var s=i[r];n(s)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mo,TB=(mo={},mo["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",mo["bad-app-name"]="Illegal App name: '{$appName}",mo["duplicate-app"]="Firebase App named '{$appName}' already exists",mo["app-deleted"]="Firebase App named '{$appName}' already deleted",mo["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",mo["invalid-log-argument"]="First argument to `onLog` must be null or a function.",mo),Za=new no("app","Firebase",TB),T1="@firebase/app",IB="0.6.30",SB="@firebase/analytics",CB="@firebase/app-check",AB="@firebase/auth",kB="@firebase/database",RB="@firebase/functions",NB="@firebase/installations",PB="@firebase/messaging",OB="@firebase/performance",xB="@firebase/remote-config",DB="@firebase/storage",LB="@firebase/firestore",MB="firebase-wrapper";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _n,Nd="[DEFAULT]",FB=(_n={},_n[T1]="fire-core",_n[SB]="fire-analytics",_n[CB]="fire-app-check",_n[AB]="fire-auth",_n[kB]="fire-rtdb",_n[RB]="fire-fn",_n[NB]="fire-iid",_n[PB]="fire-fcm",_n[OB]="fire-perf",_n[xB]="fire-rc",_n[DB]="fire-gcs",_n[LB]="fire-fst",_n["fire-js"]="fire-js",_n[MB]="fire-js-all",_n);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mu=new la("@firebase/app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vd=function(){function e(t,n,r){var i=this;this.firebase_=r,this.isDeleted_=!1,this.name_=n.name,this.automaticDataCollectionEnabled_=n.automaticDataCollectionEnabled||!1,this.options_=v1(t),this.container=new b1(n.name),this._addComponent(new kn("app",function(){return i},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(s){return i._addComponent(s)})}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),e.prototype.delete=function(){var t=this;return new Promise(function(n){t.checkDestroyed_(),n()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(n){return n.delete()}))}).then(function(){t.isDeleted_=!0})},e.prototype._getService=function(t,n){var r;n===void 0&&(n=Nd),this.checkDestroyed_();var i=this.container.getProvider(t);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})},e.prototype._removeServiceInstance=function(t,n){n===void 0&&(n=Nd),this.container.getProvider(t).clearInstance(n)},e.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(n){mu.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,n)}},e.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},e.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw Za.create("app-deleted",{appName:this.name_})},e}();vd.prototype.name&&vd.prototype.options||vd.prototype.delete||console.log("dc");var UB="8.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jB(e){var t={},n=new Map,r={__esModule:!0,initializeApp:a,app:s,registerVersion:h,setLogLevel:bB,onLog:d,apps:null,SDK_VERSION:UB,INTERNAL:{registerComponent:l,removeApp:i,components:n,useAsService:v}};r.default=r,Object.defineProperty(r,"apps",{get:c});function i(m){delete t[m]}function s(m){if(m=m||Nd,!_r(t,m))throw Za.create("no-app",{appName:m});return t[m]}s.App=e;function a(m,y){if(y===void 0&&(y={}),typeof y!="object"||y===null){var w=y;y={name:w}}var E=y;E.name===void 0&&(E.name=Nd);var T=E.name;if(typeof T!="string"||!T)throw Za.create("bad-app-name",{appName:String(T)});if(_r(t,T))throw Za.create("duplicate-app",{appName:T});var k=new e(m,E,r);return t[T]=k,k}function c(){return Object.keys(t).map(function(m){return t[m]})}function l(m){var y=m.name;if(n.has(y))return mu.debug("There were multiple attempts to register component "+y+"."),m.type==="PUBLIC"?r[y]:null;if(n.set(y,m),m.type==="PUBLIC"){var w=function(P){if(P===void 0&&(P=s()),typeof P[y]!="function")throw Za.create("invalid-app-argument",{appName:y});return P[y]()};m.serviceProps!==void 0&&Pl(w,m.serviceProps),r[y]=w,e.prototype[y]=function(){for(var P=[],O=0;O<arguments.length;O++)P[O]=arguments[O];var H=this._getService.bind(this,y);return H.apply(this,m.multipleInstances?P:[])}}for(var E=0,T=Object.keys(t);E<T.length;E++){var k=T[E];t[k]._addComponent(m)}return m.type==="PUBLIC"?r[y]:null}function h(m,y,w){var E,T=(E=FB[m])!==null&&E!==void 0?E:m;w&&(T+="-"+w);var k=T.match(/\s|\//),P=y.match(/\s|\//);if(k||P){var O=['Unable to register library "'+T+'" with version "'+y+'":'];k&&O.push('library name "'+T+'" contains illegal characters (whitespace or "/")'),k&&P&&O.push("and"),P&&O.push('version name "'+y+'" contains illegal characters (whitespace or "/")'),mu.warn(O.join(" "));return}l(new kn(T+"-version",function(){return{library:T,version:y}},"VERSION"))}function d(m,y){if(m!==null&&typeof m!="function")throw Za.create("invalid-log-argument");EB(m,y)}function v(m,y){if(y==="serverAuth")return null;var w=y;return w}return r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I1(){var e=jB(vd);e.INTERNAL=me(me({},e.INTERNAL),{createFirebaseNamespace:I1,extendNamespace:t,createSubscribe:uB,ErrorFactory:no,deepExtend:Pl});function t(n){Pl(e,n)}return e}var lb=I1();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var VB=function(){function e(t){this.container=t}return e.prototype.getPlatformInfoString=function(){var t=this.container.getProviders();return t.map(function(n){if(BB(n)){var r=n.getImmediate();return r.library+"/"+r.version}else return null}).filter(function(n){return n}).join(" ")},e}();function BB(e){var t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qB(e,t){e.INTERNAL.registerComponent(new kn("platform-logger",function(n){return new VB(n)},"PRIVATE")),e.registerVersion(T1,IB,t),e.registerVersion("fire-js","")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(GV()&&self.firebase!==void 0){mu.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);var YC=self.firebase.SDK_VERSION;YC&&YC.indexOf("LITE")>=0&&mu.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}var HB=lb.initializeApp;lb.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return g1()&&mu.warn(`
      Warning: This is a browser-targeted Firebase bundle but it appears it is being
      run in a Node environment.  If running in a Node environment, make sure you
      are using the bundle specified by the "main" field in package.json.
      
      If you are using Webpack, you can specify "main" as the first item in
      "resolve.mainFields":
      https://webpack.js.org/configuration/resolve/#resolvemainfields
      
      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"
      as the first item in "mainFields", e.g. ['main', 'module'].
      https://github.com/rollup/@rollup/plugin-node-resolve
      `),HB.apply(void 0,e)};var ue=lb;qB(ue);(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,u,f){o!=Array.prototype&&o!=Object.prototype&&(o[u]=f.value)};function n(o){o=[typeof window=="object"&&window,typeof self=="object"&&self,typeof global=="object"&&global,o];for(var u=0;u<o.length;++u){var f=o[u];if(f&&f.Math==Math)return f}return globalThis}var r=n(this);function i(o,u){if(u){var f=r;o=o.split(".");for(var p=0;p<o.length-1;p++){var g=o[p];g in f||(f[g]={}),f=f[g]}o=o[o.length-1],p=f[o],u=u(p),u!=p&&u!=null&&t(f,o,{configurable:!0,writable:!0,value:u})}}function s(o){var u=0;return function(){return u<o.length?{done:!1,value:o[u++]}:{done:!0}}}function a(o){var u=typeof Symbol<"u"&&Symbol.iterator&&o[Symbol.iterator];return u?u.call(o):{next:s(o)}}i("Promise",function(o){function u(b){this.b=0,this.c=void 0,this.a=[];var S=this.f();try{b(S.resolve,S.reject)}catch(L){S.reject(L)}}function f(){this.a=null}function p(b){return b instanceof u?b:new u(function(S){S(b)})}if(o)return o;f.prototype.b=function(b){if(this.a==null){this.a=[];var S=this;this.c(function(){S.g()})}this.a.push(b)};var g=r.setTimeout;f.prototype.c=function(b){g(b,0)},f.prototype.g=function(){for(;this.a&&this.a.length;){var b=this.a;this.a=[];for(var S=0;S<b.length;++S){var L=b[S];b[S]=null;try{L()}catch(B){this.f(B)}}}this.a=null},f.prototype.f=function(b){this.c(function(){throw b})},u.prototype.f=function(){function b(B){return function(be){L||(L=!0,B.call(S,be))}}var S=this,L=!1;return{resolve:b(this.m),reject:b(this.g)}},u.prototype.m=function(b){if(b===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(b instanceof u)this.s(b);else{e:switch(typeof b){case"object":var S=b!=null;break e;case"function":S=!0;break e;default:S=!1}S?this.v(b):this.h(b)}},u.prototype.v=function(b){var S=void 0;try{S=b.then}catch(L){this.g(L);return}typeof S=="function"?this.u(S,b):this.h(b)},u.prototype.g=function(b){this.i(2,b)},u.prototype.h=function(b){this.i(1,b)},u.prototype.i=function(b,S){if(this.b!=0)throw Error("Cannot settle("+b+", "+S+"): Promise already settled in state"+this.b);this.b=b,this.c=S,this.l()},u.prototype.l=function(){if(this.a!=null){for(var b=0;b<this.a.length;++b)_.b(this.a[b]);this.a=null}};var _=new f;return u.prototype.s=function(b){var S=this.f();b.Ra(S.resolve,S.reject)},u.prototype.u=function(b,S){var L=this.f();try{b.call(S,L.resolve,L.reject)}catch(B){L.reject(B)}},u.prototype.then=function(b,S){function L(ze,Wt){return typeof ze=="function"?function(Ui){try{B(ze(Ui))}catch(my){be(my)}}:Wt}var B,be,Xe=new u(function(ze,Wt){B=ze,be=Wt});return this.Ra(L(b,B),L(S,be)),Xe},u.prototype.catch=function(b){return this.then(void 0,b)},u.prototype.Ra=function(b,S){function L(){switch(B.b){case 1:b(B.c);break;case 2:S(B.c);break;default:throw Error("Unexpected state: "+B.b)}}var B=this;this.a==null?_.b(L):this.a.push(L)},u.resolve=p,u.reject=function(b){return new u(function(S,L){L(b)})},u.race=function(b){return new u(function(S,L){for(var B=a(b),be=B.next();!be.done;be=B.next())p(be.value).Ra(S,L)})},u.all=function(b){var S=a(b),L=S.next();return L.done?p([]):new u(function(B,be){function Xe(Ui){return function(my){ze[Ui]=my,Wt--,Wt==0&&B(ze)}}var ze=[],Wt=0;do ze.push(void 0),Wt++,p(L.value).Ra(Xe(ze.length-1),be),L=S.next();while(!L.done)})},u});var c=c||{},l=this||self,h=/^[\w+/_-]+[=]{0,2}$/,d=null;function v(o){return(o=o.querySelector&&o.querySelector("script[nonce]"))&&(o=o.nonce||o.getAttribute("nonce"))&&h.test(o)?o:""}function m(){}function y(o){var u=typeof o;return u!="object"?u:o?Array.isArray(o)?"array":u:"null"}function w(o){var u=y(o);return u=="array"||u=="object"&&typeof o.length=="number"}function E(o){return y(o)=="function"}function T(o){var u=typeof o;return u=="object"&&o!=null||u=="function"}function k(o){return Object.prototype.hasOwnProperty.call(o,P)&&o[P]||(o[P]=++O)}var P="closure_uid_"+(1e9*Math.random()>>>0),O=0;function H(o,u,f){return o.call.apply(o.bind,arguments)}function K(o,u,f){if(!o)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var g=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(g,p),o.apply(u,g)}}return function(){return o.apply(u,arguments)}}function U(o,u,f){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?U=H:U=K,U.apply(null,arguments)}function ie(o,u){var f=Array.prototype.slice.call(arguments,1);return function(){var p=f.slice();return p.push.apply(p,arguments),o.apply(this,p)}}function F(o,u){function f(){}f.prototype=u.prototype,o.bb=u.prototype,o.prototype=new f,o.prototype.constructor=o}function ge(o){return o}function R(o,u,f){this.code=lt+o,this.message=u||Pn[o]||"",this.a=f||null}F(R,Error),R.prototype.w=function(){var o={code:this.code,message:this.message};return this.a&&(o.serverResponse=this.a),o},R.prototype.toJSON=function(){return this.w()};function tt(o){var u=o&&o.code;return u?new R(u.substring(lt.length),o.message,o.serverResponse):null}var lt="auth/",Pn={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},Ft={ld:{Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ua:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://securetoken.googleapis.com/v1/token",Xa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ua:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ua:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",$a:"https://test-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function ft(o){for(var u in Ft)if(Ft[u].id===o)return o=Ft[u],{firebaseEndpoint:o.Ua,secureTokenEndpoint:o.$a,identityPlatformEndpoint:o.Xa};return null}var ot;ot=ft("__EID__")?"__EID__":void 0;function Ye(o){if(!o)return!1;try{return!!o.$goog_Thenable}catch{return!1}}function Ce(o){if(Error.captureStackTrace)Error.captureStackTrace(this,Ce);else{var u=Error().stack;u&&(this.stack=u)}o&&(this.message=String(o))}F(Ce,Error),Ce.prototype.name="CustomError";function On(o,u){o=o.split("%s");for(var f="",p=o.length-1,g=0;g<p;g++)f+=o[g]+(g<u.length?u[g]:"%s");Ce.call(this,f+o[p])}F(On,Ce),On.prototype.name="AssertionError";function $n(o,u){throw new On("Failure"+(o?": "+o:""),Array.prototype.slice.call(arguments,1))}function xn(o,u){this.c=o,this.f=u,this.b=0,this.a=null}xn.prototype.get=function(){if(0<this.b){this.b--;var o=this.a;this.a=o.next,o.next=null}else o=this.c();return o};function rn(o,u){o.f(u),100>o.b&&(o.b++,u.next=o.a,o.a=u)}function Oi(){this.b=this.a=null}var Zo=new xn(function(){return new re},function(o){o.reset()});Oi.prototype.add=function(o,u){var f=Zo.get();f.set(o,u),this.b?this.b.next=f:this.a=f,this.b=f};function V(){var o=tT,u=null;return o.a&&(u=o.a,o.a=o.a.next,o.a||(o.b=null),u.next=null),u}function re(){this.next=this.b=this.a=null}re.prototype.set=function(o,u){this.a=o,this.b=u,this.next=null},re.prototype.reset=function(){this.next=this.b=this.a=null};var ne=Array.prototype.indexOf?function(o,u){return Array.prototype.indexOf.call(o,u,void 0)}:function(o,u){if(typeof o=="string")return typeof u!="string"||u.length!=1?-1:o.indexOf(u,0);for(var f=0;f<o.length;f++)if(f in o&&o[f]===u)return f;return-1},J=Array.prototype.forEach?function(o,u,f){Array.prototype.forEach.call(o,u,f)}:function(o,u,f){for(var p=o.length,g=typeof o=="string"?o.split(""):o,_=0;_<p;_++)_ in g&&u.call(f,g[_],_,o)};function Ve(o,u){for(var f=typeof o=="string"?o.split(""):o,p=o.length-1;0<=p;--p)p in f&&u.call(void 0,f[p],p,o)}var at=Array.prototype.filter?function(o,u){return Array.prototype.filter.call(o,u,void 0)}:function(o,u){for(var f=o.length,p=[],g=0,_=typeof o=="string"?o.split(""):o,b=0;b<f;b++)if(b in _){var S=_[b];u.call(void 0,S,b,o)&&(p[g++]=S)}return p},Ie=Array.prototype.map?function(o,u){return Array.prototype.map.call(o,u,void 0)}:function(o,u){for(var f=o.length,p=Array(f),g=typeof o=="string"?o.split(""):o,_=0;_<f;_++)_ in g&&(p[_]=u.call(void 0,g[_],_,o));return p},I=Array.prototype.some?function(o,u){return Array.prototype.some.call(o,u,void 0)}:function(o,u){for(var f=o.length,p=typeof o=="string"?o.split(""):o,g=0;g<f;g++)if(g in p&&u.call(void 0,p[g],g,o))return!0;return!1};function N(o){e:{for(var u=WF,f=o.length,p=typeof o=="string"?o.split(""):o,g=0;g<f;g++)if(g in p&&u.call(void 0,p[g],g,o)){u=g;break e}u=-1}return 0>u?null:typeof o=="string"?o.charAt(u):o[u]}function D(o,u){return 0<=ne(o,u)}function M(o,u){u=ne(o,u);var f;return(f=0<=u)&&Array.prototype.splice.call(o,u,1),f}function j(o,u){var f=0;Ve(o,function(p,g){u.call(void 0,p,g,o)&&Array.prototype.splice.call(o,g,1).length==1&&f++})}function Q(o){return Array.prototype.concat.apply([],arguments)}function Z(o){var u=o.length;if(0<u){for(var f=Array(u),p=0;p<u;p++)f[p]=o[p];return f}return[]}var G=String.prototype.trim?function(o){return o.trim()}:function(o){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(o)[1]},X=/&/g,z=/</g,he=/>/g,ce=/"/g,de=/'/g,we=/\x00/g,De=/[\x00&<>"']/;function ve(o,u){return o.indexOf(u)!=-1}function Ke(o,u){return o<u?-1:o>u?1:0}var rt;e:{var Gn=l.navigator;if(Gn){var xi=Gn.userAgent;if(xi){rt=xi;break e}}rt=""}function bt(o){return ve(rt,o)}function so(o,u){for(var f in o)u.call(void 0,o[f],f,o)}function si(o){for(var u in o)return!1;return!0}function Et(o){var u={},f;for(f in o)u[f]=o[f];return u}var or="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function on(o,u){for(var f,p,g=1;g<arguments.length;g++){p=arguments[g];for(f in p)o[f]=p[f];for(var _=0;_<or.length;_++)f=or[_],Object.prototype.hasOwnProperty.call(p,f)&&(o[f]=p[f])}}function LE(o,u){e:{try{var f=o&&o.ownerDocument,p=f&&(f.defaultView||f.parentWindow);if(p=p||l,p.Element&&p.Location){var g=p;break e}}catch{}g=null}if(g&&typeof g[u]<"u"&&(!o||!(o instanceof g[u])&&(o instanceof g.Location||o instanceof g.Element))){if(T(o))try{var _=o.constructor.displayName||o.constructor.name||Object.prototype.toString.call(o)}catch{_="<object could not be stringified>"}else _=o===void 0?"undefined":o===null?"null":typeof o;$n("Argument is not a %s (or a non-Element, non-Location mock); got: %s",u,_)}}function ai(o,u){this.a=o===Vf&&u||"",this.b=ME}ai.prototype.ta=!0,ai.prototype.sa=function(){return this.a},ai.prototype.toString=function(){return"Const{"+this.a+"}"};function Kv(o){return o instanceof ai&&o.constructor===ai&&o.b===ME?o.a:($n("expected object of type Const, got '"+o+"'"),"type_error:Const")}var ME={},Vf={},Bf;function FE(){if(Bf===void 0){var o=null,u=l.trustedTypes;if(u&&u.createPolicy){try{o=u.createPolicy("goog#html",{createHTML:ge,createScript:ge,createScriptURL:ge})}catch(f){l.console&&l.console.error(f.message)}Bf=o}else Bf=o}return Bf}function Ta(o,u){this.a=u===jE?o:""}Ta.prototype.ta=!0,Ta.prototype.sa=function(){return this.a.toString()},Ta.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};function UE(o){return o instanceof Ta&&o.constructor===Ta?o.a:($n("expected object of type TrustedResourceUrl, got '"+o+"' of type "+y(o)),"type_error:TrustedResourceUrl")}function zv(o,u){var f=Kv(o);if(!EM.test(f))throw Error("Invalid TrustedResourceUrl format: "+f);return o=f.replace(bM,function(p,g){if(!Object.prototype.hasOwnProperty.call(u,g))throw Error('Found marker, "'+g+'", in format string, "'+f+'", but no valid label mapping found in args: '+JSON.stringify(u));return p=u[g],p instanceof ai?Kv(p):encodeURIComponent(String(p))}),TM(o)}var bM=/%{(\w+)}/g,EM=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,jE={};function TM(o){var u=FE();return o=u?u.createScriptURL(o):o,new Ta(o,jE)}function Qn(o,u){this.a=u===fc?o:""}Qn.prototype.ta=!0,Qn.prototype.sa=function(){return this.a.toString()},Qn.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};function qf(o){return o instanceof Qn&&o.constructor===Qn?o.a:($n("expected object of type SafeUrl, got '"+o+"' of type "+y(o)),"type_error:SafeUrl")}var IM=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,SM=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,VE=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function BE(o){if(o instanceof Qn)return o;if(o=typeof o=="object"&&o.ta?o.sa():String(o),VE.test(o))o=new Qn(o,fc);else{o=String(o),o=o.replace(/(%0A|%0D)/g,"");var u=o.match(SM);o=u&&IM.test(u[1])?new Qn(o,fc):null}return o}function qE(o){return o instanceof Qn?o:(o=typeof o=="object"&&o.ta?o.sa():String(o),VE.test(o)||(o="about:invalid#zClosurez"),new Qn(o,fc))}var fc={},HE=new Qn("about:invalid#zClosurez",fc);function Ia(o,u,f){this.a=f===KE?o:""}Ia.prototype.ta=!0,Ia.prototype.sa=function(){return this.a.toString()},Ia.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};function CM(o){return o instanceof Ia&&o.constructor===Ia?o.a:($n("expected object of type SafeHtml, got '"+o+"' of type "+y(o)),"type_error:SafeHtml")}var KE={};function AM(o,u){LE(o,"HTMLScriptElement"),o.src=UE(u),(u=o.ownerDocument&&o.ownerDocument.defaultView)&&u!=l?u=v(u.document):(d===null&&(d=v(l.document)),u=d),u&&o.setAttribute("nonce",u)}function zE(o,u,f,p){return o=o instanceof Qn?o:qE(o),u=u||l,f=f instanceof ai?Kv(f):f||"",u.open(qf(o),f,p,void 0)}function WE(o,u){for(var f=o.split("%s"),p="",g=Array.prototype.slice.call(arguments,1);g.length&&1<f.length;)p+=f.shift()+g.shift();return p+f.join("%s")}function Wv(o){return De.test(o)&&(o.indexOf("&")!=-1&&(o=o.replace(X,"&amp;")),o.indexOf("<")!=-1&&(o=o.replace(z,"&lt;")),o.indexOf(">")!=-1&&(o=o.replace(he,"&gt;")),o.indexOf('"')!=-1&&(o=o.replace(ce,"&quot;")),o.indexOf("'")!=-1&&(o=o.replace(de,"&#39;")),o.indexOf("\0")!=-1&&(o=o.replace(we,"&#0;"))),o}function $v(o){return $v[" "](o),o}$v[" "]=m;function kM(o,u){var f=OM;return Object.prototype.hasOwnProperty.call(f,o)?f[o]:f[o]=u(o)}var RM=bt("Opera"),jr=bt("Trident")||bt("MSIE"),$E=bt("Edge"),NM=$E||jr,GE=bt("Gecko")&&!(ve(rt.toLowerCase(),"webkit")&&!bt("Edge"))&&!(bt("Trident")||bt("MSIE"))&&!bt("Edge"),PM=ve(rt.toLowerCase(),"webkit")&&!bt("Edge");function QE(){var o=l.document;return o?o.documentMode:void 0}var Hf;e:{var Gv="",Qv=function(){var o=rt;if(GE)return/rv:([^\);]+)(\)|;)/.exec(o);if($E)return/Edge\/([\d\.]+)/.exec(o);if(jr)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(o);if(PM)return/WebKit\/(\S+)/.exec(o);if(RM)return/(?:Version)[ \/]?(\S+)/.exec(o)}();if(Qv&&(Gv=Qv?Qv[1]:""),jr){var Yv=QE();if(Yv!=null&&Yv>parseFloat(Gv)){Hf=String(Yv);break e}}Hf=Gv}var OM={};function YE(o){return kM(o,function(){for(var u=0,f=G(String(Hf)).split("."),p=G(String(o)).split("."),g=Math.max(f.length,p.length),_=0;u==0&&_<g;_++){var b=f[_]||"",S=p[_]||"";do{if(b=/(\d*)(\D*)(.*)/.exec(b)||["","","",""],S=/(\d*)(\D*)(.*)/.exec(S)||["","","",""],b[0].length==0&&S[0].length==0)break;u=Ke(b[1].length==0?0:parseInt(b[1],10),S[1].length==0?0:parseInt(S[1],10))||Ke(b[2].length==0,S[2].length==0)||Ke(b[2],S[2]),b=b[3],S=S[3]}while(u==0)}return 0<=u})}var Xv;if(l.document&&jr){var XE=QE();Xv=XE||parseInt(Hf,10)||void 0}else Xv=void 0;var ao=Xv;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch{}var xM=!jr||9<=Number(ao);function hc(o){var u=document;return typeof o=="string"?u.getElementById(o):o}function JE(o,u){so(u,function(f,p){f&&typeof f=="object"&&f.ta&&(f=f.sa()),p=="style"?o.style.cssText=f:p=="class"?o.className=f:p=="for"?o.htmlFor=f:ZE.hasOwnProperty(p)?o.setAttribute(ZE[p],f):p.lastIndexOf("aria-",0)==0||p.lastIndexOf("data-",0)==0?o.setAttribute(p,f):o[p]=f})}var ZE={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function DM(o,u,f){var p=arguments,g=document,_=String(p[0]),b=p[1];if(!xM&&b&&(b.name||b.type)){if(_=["<",_],b.name&&_.push(' name="',Wv(b.name),'"'),b.type){_.push(' type="',Wv(b.type),'"');var S={};on(S,b),delete S.type,b=S}_.push(">"),_=_.join("")}return _=Kf(g,_),b&&(typeof b=="string"?_.className=b:Array.isArray(b)?_.className=b.join(" "):JE(_,b)),2<p.length&&LM(g,_,p),_}function LM(o,u,f){function p(S){S&&u.appendChild(typeof S=="string"?o.createTextNode(S):S)}for(var g=2;g<f.length;g++){var _=f[g];if(!w(_)||T(_)&&0<_.nodeType)p(_);else{e:{if(_&&typeof _.length=="number"){if(T(_)){var b=typeof _.item=="function"||typeof _.item=="string";break e}if(E(_)){b=typeof _.item=="function";break e}}b=!1}J(b?Z(_):_,p)}}}function Kf(o,u){return u=String(u),o.contentType==="application/xhtml+xml"&&(u=u.toLowerCase()),o.createElement(u)}function eT(o){l.setTimeout(function(){throw o},0)}var Jv;function MM(){var o=l.MessageChannel;if(typeof o>"u"&&typeof window<"u"&&window.postMessage&&window.addEventListener&&!bt("Presto")&&(o=function(){var g=Kf(document,"IFRAME");g.style.display="none",document.documentElement.appendChild(g);var _=g.contentWindow;g=_.document,g.open(),g.close();var b="callImmediate"+Math.random(),S=_.location.protocol=="file:"?"*":_.location.protocol+"//"+_.location.host;g=U(function(L){(S=="*"||L.origin==S)&&L.data==b&&this.port1.onmessage()},this),_.addEventListener("message",g,!1),this.port1={},this.port2={postMessage:function(){_.postMessage(b,S)}}}),typeof o<"u"&&!bt("Trident")&&!bt("MSIE")){var u=new o,f={},p=f;return u.port1.onmessage=function(){if(f.next!==void 0){f=f.next;var g=f.Hb;f.Hb=null,g()}},function(g){p.next={Hb:g},p=p.next,u.port2.postMessage(0)}}return function(g){l.setTimeout(g,0)}}function zf(o,u){Wf||FM(),Zv||(Wf(),Zv=!0),tT.add(o,u)}var Wf;function FM(){if(l.Promise&&l.Promise.resolve){var o=l.Promise.resolve(void 0);Wf=function(){o.then(nT)}}else Wf=function(){var u=nT;!E(l.setImmediate)||l.Window&&l.Window.prototype&&!bt("Edge")&&l.Window.prototype.setImmediate==l.setImmediate?(Jv||(Jv=MM()),Jv(u)):l.setImmediate(u)}}var Zv=!1,tT=new Oi;function nT(){for(var o;o=V();){try{o.a.call(o.b)}catch(u){eT(u)}rn(Zo,o)}Zv=!1}function Me(o,u){if(this.a=es,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,o!=m)try{var f=this;o.call(u,function(p){ts(f,dc,p)},function(p){if(!(p instanceof Sa))try{throw p instanceof Error?p:Error("Promise rejected.")}catch{}ts(f,Di,p)})}catch(p){ts(this,Di,p)}}var es=0,dc=2,Di=3;function rT(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}rT.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var iT=new xn(function(){return new rT},function(o){o.reset()});function eg(o,u,f){var p=iT.get();return p.g=o,p.b=u,p.f=f,p}function pe(o){if(o instanceof Me)return o;var u=new Me(m);return ts(u,dc,o),u}function ht(o){return new Me(function(u,f){f(o)})}function oT(o,u,f){cT(o,u,f,null)||zf(ie(u,o))}function UM(o){return new Me(function(u,f){var p=o.length,g=[];if(p)for(var _=function(B,be){p--,g[B]=be,p==0&&u(g)},b=function(B){f(B)},S=0,L;S<o.length;S++)L=o[S],oT(L,ie(_,S),b);else u(g)})}function sT(o){return new Me(function(u){var f=o.length,p=[];if(f)for(var g=function(S,L,B){f--,p[S]=L?{Qb:!0,value:B}:{Qb:!1,reason:B},f==0&&u(p)},_=0,b;_<o.length;_++)b=o[_],oT(b,ie(g,_,!0),ie(g,_,!1));else u(p)})}Me.prototype.then=function(o,u,f){return uT(this,E(o)?o:null,E(u)?u:null,f)},Me.prototype.$goog_Thenable=!0,e=Me.prototype,e.oa=function(o,u){return o=eg(o,o,u),o.c=!0,tg(this,o),this},e.o=function(o,u){return uT(this,null,o,u)},e.cancel=function(o){if(this.a==es){var u=new Sa(o);zf(function(){aT(this,u)},this)}};function aT(o,u){if(o.a==es)if(o.c){var f=o.c;if(f.b){for(var p=0,g=null,_=null,b=f.b;b&&(b.c||(p++,b.a==o&&(g=b),!(g&&1<p)));b=b.next)g||(_=b);g&&(f.a==es&&p==1?aT(f,u):(_?(p=_,p.next==f.f&&(f.f=p),p.next=p.next.next):fT(f),hT(f,g,Di,u)))}o.c=null}else ts(o,Di,u)}function tg(o,u){o.b||o.a!=dc&&o.a!=Di||lT(o),o.f?o.f.next=u:o.b=u,o.f=u}function uT(o,u,f,p){var g=eg(null,null,null);return g.a=new Me(function(_,b){g.g=u?function(S){try{var L=u.call(p,S);_(L)}catch(B){b(B)}}:_,g.b=f?function(S){try{var L=f.call(p,S);L===void 0&&S instanceof Sa?b(S):_(L)}catch(B){b(B)}}:b}),g.a.c=o,tg(o,g),g.a}e.$c=function(o){this.a=es,ts(this,dc,o)},e.ad=function(o){this.a=es,ts(this,Di,o)};function ts(o,u,f){o.a==es&&(o===f&&(u=Di,f=new TypeError("Promise cannot resolve to itself")),o.a=1,cT(f,o.$c,o.ad,o)||(o.i=f,o.a=u,o.c=null,lT(o),u!=Di||f instanceof Sa||VM(o,f)))}function cT(o,u,f,p){if(o instanceof Me)return tg(o,eg(u||m,f||null,p)),!0;if(Ye(o))return o.then(u,f,p),!0;if(T(o))try{var g=o.then;if(E(g))return jM(o,g,u,f,p),!0}catch(_){return f.call(p,_),!0}return!1}function jM(o,u,f,p,g){function _(L){S||(S=!0,p.call(g,L))}function b(L){S||(S=!0,f.call(g,L))}var S=!1;try{u.call(o,b,_)}catch(L){_(L)}}function lT(o){o.h||(o.h=!0,zf(o.gc,o))}function fT(o){var u=null;return o.b&&(u=o.b,o.b=u.next,u.next=null),o.b||(o.f=null),u}e.gc=function(){for(var o;o=fT(this);)hT(this,o,this.a,this.i);this.h=!1};function hT(o,u,f,p){if(f==Di&&u.b&&!u.c)for(;o&&o.g;o=o.c)o.g=!1;if(u.a)u.a.c=null,dT(u,f,p);else try{u.c?u.g.call(u.f):dT(u,f,p)}catch(g){pT.call(null,g)}rn(iT,u)}function dT(o,u,f){u==dc?o.g.call(o.f,f):o.b&&o.b.call(o.f,f)}function VM(o,u){o.g=!0,zf(function(){o.g&&pT.call(null,u)})}var pT=eT;function Sa(o){Ce.call(this,o)}F(Sa,Ce),Sa.prototype.name="cancel";function $f(){this.ya=this.ya,this.pa=this.pa}var BM=0;$f.prototype.ya=!1;function vT(o){!o.ya&&(o.ya=!0,o.Da(),BM!=0)&&k(o)}$f.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var qM=Object.freeze||function(o){return o},gT=!jr||9<=Number(ao),HM=jr&&!YE("9"),KM=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,u=Object.defineProperty({},"passive",{get:function(){o=!0}});try{l.addEventListener("test",m,u),l.removeEventListener("test",m,u)}catch{}return o}();function Yn(o,u){this.type=o,this.b=this.target=u,this.defaultPrevented=!1}Yn.prototype.preventDefault=function(){this.defaultPrevented=!0};function ns(o,u){if(Yn.call(this,o?o.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,o){var f=this.type=o.type,p=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.b=u,u=o.relatedTarget){if(GE){e:{try{$v(u.nodeName);var g=!0;break e}catch{}g=!1}g||(u=null)}}else f=="mouseover"?u=o.fromElement:f=="mouseout"&&(u=o.toElement);this.relatedTarget=u,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:zM[o.pointerType]||"",this.a=o,o.defaultPrevented&&this.preventDefault()}}F(ns,Yn);var zM=qM({2:"touch",3:"pen",4:"mouse"});ns.prototype.preventDefault=function(){ns.bb.preventDefault.call(this);var o=this.a;if(o.preventDefault)o.preventDefault();else if(o.returnValue=!1,HM)try{(o.ctrlKey||112<=o.keyCode&&123>=o.keyCode)&&(o.keyCode=-1)}catch{}},ns.prototype.g=function(){return this.a};var pc="closure_listenable_"+(1e6*Math.random()|0),WM=0;function $M(o,u,f,p,g){this.listener=o,this.proxy=null,this.src=u,this.type=f,this.capture=!!p,this.Wa=g,this.key=++WM,this.wa=this.Qa=!1}function Gf(o){o.wa=!0,o.listener=null,o.proxy=null,o.src=null,o.Wa=null}function Qf(o){this.src=o,this.a={},this.b=0}Qf.prototype.add=function(o,u,f,p,g){var _=o.toString();o=this.a[_],o||(o=this.a[_]=[],this.b++);var b=rg(o,u,p,g);return-1<b?(u=o[b],f||(u.Qa=!1)):(u=new $M(u,this.src,_,!!p,g),u.Qa=f,o.push(u)),u};function ng(o,u){var f=u.type;f in o.a&&M(o.a[f],u)&&(Gf(u),o.a[f].length==0&&(delete o.a[f],o.b--))}function rg(o,u,f,p){for(var g=0;g<o.length;++g){var _=o[g];if(!_.wa&&_.listener==u&&_.capture==!!f&&_.Wa==p)return g}return-1}var ig="closure_lm_"+(1e6*Math.random()|0),og={};function Er(o,u,f,p,g){if(p&&p.once)sg(o,u,f,p,g);else if(Array.isArray(u))for(var _=0;_<u.length;_++)Er(o,u[_],f,p,g);else f=ug(f),o&&o[pc]?ET(o,u,f,T(p)?!!p.capture:!!p,g):mT(o,u,f,!1,p,g)}function mT(o,u,f,p,g,_){if(!u)throw Error("Invalid event type");var b=T(g)?!!g.capture:!!g,S=Yf(o);if(S||(o[ig]=S=new Qf(o)),f=S.add(u,f,p,b,_),!f.proxy)if(p=GM(),f.proxy=p,p.src=o,p.listener=f,o.addEventListener)KM||(g=b),g===void 0&&(g=!1),o.addEventListener(u.toString(),p,g);else if(o.attachEvent)o.attachEvent(_T(u.toString()),p);else if(o.addListener&&o.removeListener)o.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.")}function GM(){var o=QM,u=gT?function(f){return o.call(u.src,u.listener,f)}:function(f){if(f=o.call(u.src,u.listener,f),!f)return f};return u}function sg(o,u,f,p,g){if(Array.isArray(u))for(var _=0;_<u.length;_++)sg(o,u[_],f,p,g);else f=ug(f),o&&o[pc]?cg(o,u,f,T(p)?!!p.capture:!!p,g):mT(o,u,f,!0,p,g)}function sr(o,u,f,p,g){if(Array.isArray(u))for(var _=0;_<u.length;_++)sr(o,u[_],f,p,g);else p=T(p)?!!p.capture:!!p,f=ug(f),o&&o[pc]?(o=o.v,u=String(u).toString(),u in o.a&&(_=o.a[u],f=rg(_,f,p,g),-1<f&&(Gf(_[f]),Array.prototype.splice.call(_,f,1),_.length==0&&(delete o.a[u],o.b--)))):o&&(o=Yf(o))&&(u=o.a[u.toString()],o=-1,u&&(o=rg(u,f,p,g)),(f=-1<o?u[o]:null)&&yT(f))}function yT(o){if(typeof o!="number"&&o&&!o.wa){var u=o.src;if(u&&u[pc])ng(u.v,o);else{var f=o.type,p=o.proxy;u.removeEventListener?u.removeEventListener(f,p,o.capture):u.detachEvent?u.detachEvent(_T(f),p):u.addListener&&u.removeListener&&u.removeListener(p),(f=Yf(u))?(ng(f,o),f.b==0&&(f.src=null,u[ig]=null)):Gf(o)}}}function _T(o){return o in og?og[o]:og[o]="on"+o}function wT(o,u,f,p){var g=!0;if((o=Yf(o))&&(u=o.a[u.toString()]))for(u=u.concat(),o=0;o<u.length;o++){var _=u[o];_&&_.capture==f&&!_.wa&&(_=bT(_,p),g=g&&_!==!1)}return g}function bT(o,u){var f=o.listener,p=o.Wa||o.src;return o.Qa&&yT(o),f.call(p,u)}function QM(o,u){if(o.wa)return!0;if(!gT){if(!u)e:{u=["window","event"];for(var f=l,p=0;p<u.length;p++)if(f=f[u[p]],f==null){u=null;break e}u=f}if(p=u,u=new ns(p,this),f=!0,!(0>p.keyCode||p.returnValue!=null)){e:{var g=!1;if(p.keyCode==0)try{p.keyCode=-1;break e}catch{g=!0}(g||p.returnValue==null)&&(p.returnValue=!0)}for(p=[],g=u.b;g;g=g.parentNode)p.push(g);for(o=o.type,g=p.length-1;0<=g;g--){u.b=p[g];var _=wT(p[g],o,!0,u);f=f&&_}for(g=0;g<p.length;g++)u.b=p[g],_=wT(p[g],o,!1,u),f=f&&_}return f}return bT(o,new ns(u,this))}function Yf(o){return o=o[ig],o instanceof Qf?o:null}var ag="__closure_events_fn_"+(1e9*Math.random()>>>0);function ug(o){return E(o)?o:(o[ag]||(o[ag]=function(u){return o.handleEvent(u)}),o[ag])}function Dn(){$f.call(this),this.v=new Qf(this),this.bc=this,this.hb=null}F(Dn,$f),Dn.prototype[pc]=!0,Dn.prototype.addEventListener=function(o,u,f,p){Er(this,o,u,f,p)},Dn.prototype.removeEventListener=function(o,u,f,p){sr(this,o,u,f,p)},Dn.prototype.dispatchEvent=function(o){var u,f=this.hb;if(f)for(u=[];f;f=f.hb)u.push(f);f=this.bc;var p=o.type||o;if(typeof o=="string")o=new Yn(o,f);else if(o instanceof Yn)o.target=o.target||f;else{var g=o;o=new Yn(p,f),on(o,g)}if(g=!0,u)for(var _=u.length-1;0<=_;_--){var b=o.b=u[_];g=Xf(b,p,!0,o)&&g}if(b=o.b=f,g=Xf(b,p,!0,o)&&g,g=Xf(b,p,!1,o)&&g,u)for(_=0;_<u.length;_++)b=o.b=u[_],g=Xf(b,p,!1,o)&&g;return g},Dn.prototype.Da=function(){if(Dn.bb.Da.call(this),this.v){var o=this.v,u;for(u in o.a){for(var f=o.a[u],p=0;p<f.length;p++)Gf(f[p]);delete o.a[u],o.b--}}this.hb=null};function ET(o,u,f,p,g){o.v.add(String(u),f,!1,p,g)}function cg(o,u,f,p,g){o.v.add(String(u),f,!0,p,g)}function Xf(o,u,f,p){if(u=o.v.a[String(u)],!u)return!0;u=u.concat();for(var g=!0,_=0;_<u.length;++_){var b=u[_];if(b&&!b.wa&&b.capture==f){var S=b.listener,L=b.Wa||b.src;b.Qa&&ng(o.v,b),g=S.call(L,p)!==!1&&g}}return g&&!p.defaultPrevented}function lg(o,u,f){if(E(o))f&&(o=U(o,f));else if(o&&typeof o.handleEvent=="function")o=U(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:l.setTimeout(o,u||0)}function Ca(o){var u=null;return new Me(function(f,p){u=lg(function(){f(void 0)},o),u==-1&&p(Error("Failed to schedule timer."))}).o(function(f){throw l.clearTimeout(u),f})}function TT(o){if(o.X&&typeof o.X=="function")return o.X();if(typeof o=="string")return o.split("");if(w(o)){for(var u=[],f=o.length,p=0;p<f;p++)u.push(o[p]);return u}u=[],f=0;for(p in o)u[f++]=o[p];return u}function IT(o){if(o.Y&&typeof o.Y=="function")return o.Y();if(!o.X||typeof o.X!="function"){if(w(o)||typeof o=="string"){var u=[];o=o.length;for(var f=0;f<o;f++)u.push(f);return u}u=[],f=0;for(var p in o)u[f++]=p;return u}}function YM(o,u){if(o.forEach&&typeof o.forEach=="function")o.forEach(u,void 0);else if(w(o)||typeof o=="string")J(o,u,void 0);else for(var f=IT(o),p=TT(o),g=p.length,_=0;_<g;_++)u.call(void 0,p[_],f&&f[_],o)}function Aa(o,u){this.b={},this.a=[],this.c=0;var f=arguments.length;if(1<f){if(f%2)throw Error("Uneven number of arguments");for(var p=0;p<f;p+=2)this.set(arguments[p],arguments[p+1])}else if(o)if(o instanceof Aa)for(f=o.Y(),p=0;p<f.length;p++)this.set(f[p],o.get(f[p]));else for(p in o)this.set(p,o[p])}e=Aa.prototype,e.X=function(){fg(this);for(var o=[],u=0;u<this.a.length;u++)o.push(this.b[this.a[u]]);return o},e.Y=function(){return fg(this),this.a.concat()},e.clear=function(){this.b={},this.c=this.a.length=0};function fg(o){if(o.c!=o.a.length){for(var u=0,f=0;u<o.a.length;){var p=o.a[u];rs(o.b,p)&&(o.a[f++]=p),u++}o.a.length=f}if(o.c!=o.a.length){var g={};for(f=u=0;u<o.a.length;)p=o.a[u],rs(g,p)||(o.a[f++]=p,g[p]=1),u++;o.a.length=f}}e.get=function(o,u){return rs(this.b,o)?this.b[o]:u},e.set=function(o,u){rs(this.b,o)||(this.c++,this.a.push(o)),this.b[o]=u},e.forEach=function(o,u){for(var f=this.Y(),p=0;p<f.length;p++){var g=f[p],_=this.get(g);o.call(u,_,g,this)}};function rs(o,u){return Object.prototype.hasOwnProperty.call(o,u)}var ST=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function XM(o,u){if(o){o=o.split("&");for(var f=0;f<o.length;f++){var p=o[f].indexOf("="),g=null;if(0<=p){var _=o[f].substring(0,p);g=o[f].substring(p+1)}else _=o[f];u(_,g?decodeURIComponent(g.replace(/\+/g," ")):"")}}}function uo(o,u){this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1;var f;o instanceof uo?(this.i=u!==void 0?u:o.i,vc(this,o.c),this.l=o.l,this.a=o.a,gc(this,o.g),this.f=o.f,hg(this,RT(o.b)),this.h=o.h):o&&(f=String(o).match(ST))?(this.i=!!u,vc(this,f[1]||"",!0),this.l=mc(f[2]||""),this.a=mc(f[3]||"",!0),gc(this,f[4]),this.f=mc(f[5]||"",!0),hg(this,f[6]||"",!0),this.h=mc(f[7]||"")):(this.i=!!u,this.b=new is(null,this.i))}uo.prototype.toString=function(){var o=[],u=this.c;u&&o.push(yc(u,CT,!0),":");var f=this.a;return(f||u=="file")&&(o.push("//"),(u=this.l)&&o.push(yc(u,CT,!0),"@"),o.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.g,f!=null&&o.push(":",String(f))),(f=this.f)&&(this.a&&f.charAt(0)!="/"&&o.push("/"),o.push(yc(f,f.charAt(0)=="/"?eF:ZM,!0))),(f=this.b.toString())&&o.push("?",f),(f=this.h)&&o.push("#",yc(f,nF)),o.join("")},uo.prototype.resolve=function(o){var u=new uo(this),f=!!o.c;f?vc(u,o.c):f=!!o.l,f?u.l=o.l:f=!!o.a,f?u.a=o.a:f=o.g!=null;var p=o.f;if(f)gc(u,o.g);else if(f=!!o.f){if(p.charAt(0)!="/")if(this.a&&!this.f)p="/"+p;else{var g=u.f.lastIndexOf("/");g!=-1&&(p=u.f.substr(0,g+1)+p)}if(g=p,g==".."||g==".")p="";else if(ve(g,"./")||ve(g,"/.")){p=g.lastIndexOf("/",0)==0,g=g.split("/");for(var _=[],b=0;b<g.length;){var S=g[b++];S=="."?p&&b==g.length&&_.push(""):S==".."?((1<_.length||_.length==1&&_[0]!="")&&_.pop(),p&&b==g.length&&_.push("")):(_.push(S),p=!0)}p=_.join("/")}else p=g}return f?u.f=p:f=o.b.toString()!=="",f?hg(u,RT(o.b)):f=!!o.h,f&&(u.h=o.h),u};function vc(o,u,f){o.c=f?mc(u,!0):u,o.c&&(o.c=o.c.replace(/:$/,""))}function gc(o,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);o.g=u}else o.g=null}function hg(o,u,f){u instanceof is?(o.b=u,rF(o.b,o.i)):(f||(u=yc(u,tF)),o.b=new is(u,o.i))}function Ct(o,u,f){o.b.set(u,f)}function Tr(o,u){return o.b.get(u)}function Xn(o){return o instanceof uo?new uo(o):new uo(o,void 0)}function Jf(o,u,f,p){var g=new uo(null,void 0);return o&&vc(g,o),u&&(g.a=u),f&&gc(g,f),p&&(g.f=p),g}function mc(o,u){return o?u?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function yc(o,u,f){return typeof o=="string"?(o=encodeURI(o).replace(u,JM),f&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function JM(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var CT=/[#\/\?@]/g,ZM=/[#\?:]/g,eF=/[#\?]/g,tF=/[#\?@]/g,nF=/#/g;function is(o,u){this.b=this.a=null,this.c=o||null,this.f=!!u}function co(o){o.a||(o.a=new Aa,o.b=0,o.c&&XM(o.c,function(u,f){o.add(decodeURIComponent(u.replace(/\+/g," ")),f)}))}function AT(o){var u=IT(o);if(typeof u>"u")throw Error("Keys are undefined");var f=new is(null,void 0);o=TT(o);for(var p=0;p<u.length;p++){var g=u[p],_=o[p];Array.isArray(_)?kT(f,g,_):f.add(g,_)}return f}e=is.prototype,e.add=function(o,u){co(this),this.c=null,o=ka(this,o);var f=this.a.get(o);return f||this.a.set(o,f=[]),f.push(u),this.b+=1,this};function ui(o,u){co(o),u=ka(o,u),rs(o.a.b,u)&&(o.c=null,o.b-=o.a.get(u).length,o=o.a,rs(o.b,u)&&(delete o.b[u],o.c--,o.a.length>2*o.c&&fg(o)))}e.clear=function(){this.a=this.c=null,this.b=0};function dg(o,u){return co(o),u=ka(o,u),rs(o.a.b,u)}e.forEach=function(o,u){co(this),this.a.forEach(function(f,p){J(f,function(g){o.call(u,g,p,this)},this)},this)},e.Y=function(){co(this);for(var o=this.a.X(),u=this.a.Y(),f=[],p=0;p<u.length;p++)for(var g=o[p],_=0;_<g.length;_++)f.push(u[p]);return f},e.X=function(o){co(this);var u=[];if(typeof o=="string")dg(this,o)&&(u=Q(u,this.a.get(ka(this,o))));else{o=this.a.X();for(var f=0;f<o.length;f++)u=Q(u,o[f])}return u},e.set=function(o,u){return co(this),this.c=null,o=ka(this,o),dg(this,o)&&(this.b-=this.a.get(o).length),this.a.set(o,[u]),this.b+=1,this},e.get=function(o,u){return o?(o=this.X(o),0<o.length?String(o[0]):u):u};function kT(o,u,f){ui(o,u),0<f.length&&(o.c=null,o.a.set(ka(o,u),Z(f)),o.b+=f.length)}e.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var o=[],u=this.a.Y(),f=0;f<u.length;f++){var p=u[f],g=encodeURIComponent(String(p));p=this.X(p);for(var _=0;_<p.length;_++){var b=g;p[_]!==""&&(b+="="+encodeURIComponent(String(p[_]))),o.push(b)}}return this.c=o.join("&")};function RT(o){var u=new is;return u.c=o.c,o.a&&(u.a=new Aa(o.a),u.b=o.b),u}function ka(o,u){return u=String(u),o.f&&(u=u.toLowerCase()),u}function rF(o,u){u&&!o.f&&(co(o),o.c=null,o.a.forEach(function(f,p){var g=p.toLowerCase();p!=g&&(ui(this,p),kT(this,g,f))},o)),o.f=u}function NT(o){var u=[];return pg(new iF,o,u),u.join("")}function iF(){}function pg(o,u,f){if(u==null)f.push("null");else{if(typeof u=="object"){if(Array.isArray(u)){var p=u;u=p.length,f.push("[");for(var g="",_=0;_<u;_++)f.push(g),pg(o,p[_],f),g=",";f.push("]");return}if(u instanceof String||u instanceof Number||u instanceof Boolean)u=u.valueOf();else{f.push("{"),g="";for(p in u)Object.prototype.hasOwnProperty.call(u,p)&&(_=u[p],typeof _!="function"&&(f.push(g),OT(p,f),f.push(":"),pg(o,_,f),g=","));f.push("}");return}}switch(typeof u){case"string":OT(u,f);break;case"number":f.push(isFinite(u)&&!isNaN(u)?String(u):"null");break;case"boolean":f.push(String(u));break;case"function":f.push("null");break;default:throw Error("Unknown type: "+typeof u)}}}var PT={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\u000b"},oF=/\uffff/.test("")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function OT(o,u){u.push('"',o.replace(oF,function(f){var p=PT[f];return p||(p="\\u"+(f.charCodeAt(0)|65536).toString(16).substr(1),PT[f]=p),p}),'"')}function vg(){var o=sn();return jr&&!!ao&&ao==11||/Edge\/\d+/.test(o)}function _c(){return l.window&&l.window.location.href||self&&self.location&&self.location.href||""}function xT(o,u){u=u||l.window;var f="about:blank";o&&(f=qf(BE(o)||HE)),u.location.href=f}function DT(o,u){var f=[],p;for(p in o)p in u?typeof o[p]!=typeof u[p]?f.push(p):typeof o[p]=="object"&&o[p]!=null&&u[p]!=null?0<DT(o[p],u[p]).length&&f.push(p):o[p]!==u[p]&&f.push(p):f.push(p);for(p in u)p in o||f.push(p);return f}function sF(){var o=sn();return o=Ra(o)!=UT?null:(o=o.match(/\sChrome\/(\d+)/i))&&o.length==2?parseInt(o[1],10):null,o&&30>o?!1:!jr||!ao||9<ao}function LT(o){return o=(o||sn()).toLowerCase(),!!(o.match(/android/)||o.match(/webos/)||o.match(/iphone|ipad|ipod/)||o.match(/blackberry/)||o.match(/windows phone/)||o.match(/iemobile/))}function os(o){o=o||l.window;try{o.close()}catch{}}function MT(o,u,f){var p=Math.floor(1e9*Math.random()).toString();u=u||500,f=f||600;var g=(window.screen.availHeight-f)/2,_=(window.screen.availWidth-u)/2;u={width:u,height:f,top:0<g?g:0,left:0<_?_:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},f=sn().toLowerCase(),p&&(u.target=p,ve(f,"crios/")&&(u.target="_blank")),Ra(sn())==yg&&(o=o||"http://localhost",u.scrollbars=!0),f=o||"",(o=u)||(o={}),p=window,u=f instanceof Qn?f:BE(typeof f.href<"u"?f.href:String(f))||HE,f=o.target||f.target,g=[];for(b in o)switch(b){case"width":case"height":case"top":case"left":g.push(b+"="+o[b]);break;case"target":case"noopener":case"noreferrer":break;default:g.push(b+"="+(o[b]?1:0))}var b=g.join(",");if((bt("iPhone")&&!bt("iPod")&&!bt("iPad")||bt("iPad")||bt("iPod"))&&p.navigator&&p.navigator.standalone&&f&&f!="_self"?(b=Kf(document,"A"),LE(b,"HTMLAnchorElement"),u=u instanceof Qn?u:qE(u),b.href=qf(u),b.setAttribute("target",f),o.noreferrer&&b.setAttribute("rel","noreferrer"),o=document.createEvent("MouseEvent"),o.initMouseEvent("click",!0,!0,p,1),b.dispatchEvent(o),b={}):o.noreferrer?(b=zE("",p,f,b),o=qf(u),b&&(NM&&ve(o,";")&&(o="'"+o.replace(/'/g,"%27")+"'"),b.opener=null,o='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Wv(o)+'">',o=(p=FE())?p.createHTML(o):o,o=new Ia(o,null,KE),p=b.document)&&(p.write(CM(o)),p.close())):(b=zE(u,p,f,b))&&o.noopener&&(b.opener=null),b)try{b.focus()}catch{}return b}function aF(o){return new Me(function(u){function f(){Ca(2e3).then(function(){if(!o||o.closed)u();else return f()})}return f()})}var uF=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,cF=/^[^@]+@[^@]+$/;function Zf(){var o=null;return new Me(function(u){l.document.readyState=="complete"?u():(o=function(){u()},sg(window,"load",o))}).o(function(u){throw sr(window,"load",o),u})}function lF(){return gg(void 0)?Zf().then(function(){return new Me(function(o,u){var f=l.document,p=setTimeout(function(){u(Error("Cordova framework is not ready."))},1e3);f.addEventListener("deviceready",function(){clearTimeout(p),o()},!1)})}):ht(Error("Cordova must run in an Android or iOS file scheme."))}function gg(o){return o=o||sn(),!(Pa()!=="file:"&&Pa()!=="ionic:"||!o.toLowerCase().match(/iphone|ipad|ipod|android/))}function mg(){var o=l.window;try{return!(!o||o==o.top)}catch{return!1}}function Vr(){return typeof l.WorkerGlobalScope<"u"&&typeof l.importScripts=="function"}function ci(){return ue.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":ue.INTERNAL.hasOwnProperty("node")?"Node":Vr()?"Worker":"Browser"}function FT(){var o=ci();return o==="ReactNative"||o==="Node"}function fF(){for(var o=50,u=[];0<o;)u.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),o--;return u.join("")}var yg="Firefox",UT="Chrome";function Ra(o){var u=o.toLowerCase();if(ve(u,"opera/")||ve(u,"opr/")||ve(u,"opios/"))return"Opera";if(ve(u,"iemobile"))return"IEMobile";if(ve(u,"msie")||ve(u,"trident/"))return"IE";if(ve(u,"edge/"))return"Edge";if(ve(u,"firefox/"))return yg;if(ve(u,"silk/"))return"Silk";if(ve(u,"blackberry"))return"Blackberry";if(ve(u,"webos"))return"Webos";if(!ve(u,"safari/")||ve(u,"chrome/")||ve(u,"crios/")||ve(u,"android"))if(!ve(u,"chrome/")&&!ve(u,"crios/")||ve(u,"edge/")){if(ve(u,"android"))return"Android";if((o=o.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&o.length==2)return o[1]}else return UT;else return"Safari";return"Other"}var jT={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Na(o,u){u=u||[];var f=[],p={},g;for(g in jT)p[jT[g]]=!0;for(g=0;g<u.length;g++)typeof p[u[g]]<"u"&&(delete p[u[g]],f.push(u[g]));return f.sort(),u=f,u.length||(u=["FirebaseCore-web"]),f=ci(),f==="Browser"?(p=sn(),f=Ra(p)):f==="Worker"&&(p=sn(),f=Ra(p)+"-"+f),f+"/JsCore/"+o+"/"+u.join(",")}function sn(){return l.navigator&&l.navigator.userAgent||""}function dt(o,u){o=o.split("."),u=u||l;for(var f=0;f<o.length&&typeof u=="object"&&u!=null;f++)u=u[o[f]];return f!=o.length&&(u=void 0),u}function _g(){try{var o=l.localStorage,u=as();if(o)return o.setItem(u,"1"),o.removeItem(u),vg()?!!l.indexedDB:!0}catch{return Vr()&&!!l.indexedDB}return!1}function ss(){return(eh()||Pa()==="chrome-extension:"||gg())&&!FT()&&_g()&&!Vr()}function eh(){return Pa()==="http:"||Pa()==="https:"}function Pa(){return l.location&&l.location.protocol||null}function wc(o){return o=o||sn(),!(LT(o)||Ra(o)==yg)}function bc(o){return typeof o>"u"?null:NT(o)}function VT(o){var u={},f;for(f in o)o.hasOwnProperty(f)&&o[f]!==null&&o[f]!==void 0&&(u[f]=o[f]);return u}function Oa(o){if(o!==null)return JSON.parse(o)}function as(o){return o||Math.floor(1e9*Math.random()).toString()}function BT(o){return o=o||sn(),!(Ra(o)=="Safari"||o.toLowerCase().match(/iphone|ipad|ipod/))}function qT(){var o=l.___jsl;if(o&&o.H){for(var u in o.H)if(o.H[u].r=o.H[u].r||[],o.H[u].L=o.H[u].L||[],o.H[u].r=o.H[u].L.concat(),o.CP)for(var f=0;f<o.CP.length;f++)o.CP[f]=null}}function lo(o,u){if(o>u)throw Error("Short delay should be less than long delay!");this.a=o,this.c=u,o=sn(),u=ci(),this.b=LT(o)||u==="ReactNative"}lo.prototype.get=function(){var o=l.navigator;return!(o&&typeof o.onLine=="boolean"&&(eh()||Pa()==="chrome-extension:"||typeof o.connection<"u"))||o.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};function wg(){var o=l.document;return o&&typeof o.visibilityState<"u"?o.visibilityState=="visible":!0}function hF(){var o=l.document,u=null;return wg()||!o?pe():new Me(function(f){u=function(){wg()&&(o.removeEventListener("visibilitychange",u,!1),f())},o.addEventListener("visibilitychange",u,!1)}).o(function(f){throw o.removeEventListener("visibilitychange",u,!1),f})}function Ec(o){try{var u=new Date(parseInt(o,10));if(!isNaN(u.getTime())&&!/[^0-9]/.test(o))return u.toUTCString()}catch{}return null}function HT(){return!(!dt("fireauth.oauthhelper",l)&&!dt("fireauth.iframe",l))}function dF(){var o=l.navigator;return o&&o.serviceWorker&&o.serviceWorker.controller||null}function pF(){var o=l.navigator;return o&&o.serviceWorker?pe().then(function(){return o.serviceWorker.ready}).then(function(u){return u.active||null}).o(function(){return null}):pe(null)}var KT={};function bg(o){KT[o]||(KT[o]=!0,typeof console<"u"&&typeof console.warn=="function"&&console.warn(o))}var Eg;try{var Tg={};Object.defineProperty(Tg,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Tg,"abcd",{configurable:!0,enumerable:!0,value:2}),Eg=Tg.abcd==2}catch{Eg=!1}function ae(o,u,f){Eg?Object.defineProperty(o,u,{configurable:!0,enumerable:!0,value:f}):o[u]=f}function Ln(o,u){if(u)for(var f in u)u.hasOwnProperty(f)&&ae(o,f,u[f])}function li(o){var u={};return Ln(u,o),u}function vF(o){var u={},f;for(f in o)o.hasOwnProperty(f)&&(u[f]=o[f]);return u}function gF(o,u){if(!u||!u.length)return!0;if(!o)return!1;for(var f=0;f<u.length;f++){var p=o[u[f]];if(p==null||p==="")return!1}return!0}function Ig(o){var u=o;if(typeof o=="object"&&o!=null){u="length"in o?[]:{};for(var f in o)ae(u,f,Ig(o[f]))}return u}function Sg(o){var u=o&&(o[Rg]?"phone":null);if(u&&o&&o[kg]){ae(this,"uid",o[kg]),ae(this,"displayName",o[zT]||null);var f=null;o[Ag]&&(f=new Date(o[Ag]).toUTCString()),ae(this,"enrollmentTime",f),ae(this,"factorId",u)}else throw new R("internal-error","Internal assert: invalid MultiFactorInfo object")}Sg.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};function Cg(o){try{var u=new Tc(o)}catch{u=null}return u}var zT="displayName",Ag="enrolledAt",kg="mfaEnrollmentId",Rg="phoneInfo";function Tc(o){Sg.call(this,o),ae(this,"phoneNumber",o[Rg])}F(Tc,Sg),Tc.prototype.w=function(){var o=Tc.bb.w.call(this);return o.phoneNumber=this.phoneNumber,o};function mF(o){var u={},f=o[yF],p=o[wF],g=o[bF];if(o=Cg(o[_F]),!g||g!=th&&g!=Ic&&!f||g==Ic&&!p||g==Ng&&!o)throw Error("Invalid checkActionCode response!");g==Ic?(u[$T]=f||null,u[GT]=f||null,u[WT]=p):(u[$T]=p||null,u[GT]=p||null,u[WT]=f||null),u[EF]=o||null,ae(this,IF,g),ae(this,TF,Ig(u))}var Ng="REVERT_SECOND_FACTOR_ADDITION",th="EMAIL_SIGNIN",Ic="VERIFY_AND_CHANGE_EMAIL",yF="email",_F="mfaInfo",wF="newEmail",bF="requestType",WT="email",$T="fromEmail",EF="multiFactorInfo",GT="previousEmail",TF="data",IF="operation";function Pg(o){o=Xn(o);var u=Tr(o,QT)||null,f=Tr(o,YT)||null,p=Tr(o,XT)||null;if(p=p&&kF[p]||null,!u||!f||!p)throw new R("argument-error",QT+", "+YT+"and "+XT+" are required in a valid action code URL.");Ln(this,{apiKey:u,operation:p,code:f,continueUrl:Tr(o,SF)||null,languageCode:Tr(o,CF)||null,tenantId:Tr(o,AF)||null})}var QT="apiKey",YT="oobCode",SF="continueUrl",CF="languageCode",XT="mode",AF="tenantId",kF={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:Ng,signIn:th,verifyAndChangeEmail:Ic,verifyEmail:"VERIFY_EMAIL"};function JT(o){try{return new Pg(o)}catch{return null}}function nh(o){var u=o[RF];if(typeof u>"u")throw new R("missing-continue-uri");if(typeof u!="string"||typeof u=="string"&&!u.length)throw new R("invalid-continue-uri");this.h=u,this.b=this.a=null,this.g=!1;var f=o[ZT];if(f&&typeof f=="object"){u=f[iI];var p=f[nI];if(f=f[rI],typeof u=="string"&&u.length){if(this.a=u,typeof p<"u"&&typeof p!="boolean")throw new R("argument-error",nI+" property must be a boolean when specified.");if(this.g=!!p,typeof f<"u"&&(typeof f!="string"||typeof f=="string"&&!f.length))throw new R("argument-error",rI+" property must be a non empty string when specified.");this.b=f||null}else{if(typeof u<"u")throw new R("argument-error",iI+" property must be a non empty string when specified.");if(typeof p<"u"||typeof f<"u")throw new R("missing-android-pkg-name")}}else if(typeof f<"u")throw new R("argument-error",ZT+" property must be a non null object when specified.");if(this.f=null,(u=o[tI])&&typeof u=="object"){if(u=u[oI],typeof u=="string"&&u.length)this.f=u;else if(typeof u<"u")throw new R("argument-error",oI+" property must be a non empty string when specified.")}else if(typeof u<"u")throw new R("argument-error",tI+" property must be a non null object when specified.");if(u=o[Og],typeof u<"u"&&typeof u!="boolean")throw new R("argument-error",Og+" property must be a boolean when specified.");if(this.c=!!u,o=o[eI],typeof o<"u"&&(typeof o!="string"||typeof o=="string"&&!o.length))throw new R("argument-error",eI+" property must be a non empty string when specified.");this.i=o||null}var ZT="android",eI="dynamicLinkDomain",Og="handleCodeInApp",tI="iOS",RF="url",nI="installApp",rI="minimumVersion",iI="packageName",oI="bundleId";function rh(o){var u={};u.continueUrl=o.h,u.canHandleCodeInApp=o.c,(u.androidPackageName=o.a)&&(u.androidMinimumVersion=o.b,u.androidInstallApp=o.g),u.iOSBundleId=o.f,u.dynamicLinkDomain=o.i;for(var f in u)u[f]===null&&delete u[f];return u}function NF(o){return Ie(o,function(u){return u=u.toString(16),1<u.length?u:"0"+u}).join("")}var Sc=null;function PF(o){var u=[];return OF(o,function(f){u.push(f)}),u}function OF(o,u){function f(L){for(;p<o.length;){var B=o.charAt(p++),be=Sc[B];if(be!=null)return be;if(!/^[\s\xa0]*$/.test(B))throw Error("Unknown base64 encoding at char: "+B)}return L}xF();for(var p=0;;){var g=f(-1),_=f(0),b=f(64),S=f(64);if(S===64&&g===-1)break;u(g<<2|_>>4),b!=64&&(u(_<<4&240|b>>2),S!=64&&u(b<<6&192|S))}}function xF(){if(!Sc){Sc={};for(var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),u=["+/=","+/","-_=","-_.","-_"],f=0;5>f;f++)for(var p=o.concat(u[f].split("")),g=0;g<p.length;g++){var _=p[g];Sc[_]===void 0&&(Sc[_]=g)}}}function ih(o){var u=sI(o);if(!(u&&u.sub&&u.iss&&u.aud&&u.exp))throw Error("Invalid JWT");this.h=o,this.a=u.exp,this.i=u.sub,o=Date.now()/1e3,this.g=u.iat||(o>this.a?this.a:o),this.b=u.provider_id||u.firebase&&u.firebase.sign_in_provider||null,this.f=u.firebase&&u.firebase.tenant||null,this.c=!!u.is_anonymous||this.b=="anonymous"}ih.prototype.T=function(){return this.f},ih.prototype.l=function(){return this.c},ih.prototype.toString=function(){return this.h};function oh(o){try{return new ih(o)}catch{return null}}function sI(o){if(!o||(o=o.split("."),o.length!=3))return null;o=o[1];for(var u=(4-o.length%4)%4,f=0;f<u;f++)o+=".";try{var p=PF(o);for(o=[],f=u=0;u<p.length;){var g=p[u++];if(128>g)o[f++]=String.fromCharCode(g);else if(191<g&&224>g){var _=p[u++];o[f++]=String.fromCharCode((g&31)<<6|_&63)}else if(239<g&&365>g){_=p[u++];var b=p[u++],S=p[u++],L=((g&7)<<18|(_&63)<<12|(b&63)<<6|S&63)-65536;o[f++]=String.fromCharCode(55296+(L>>10)),o[f++]=String.fromCharCode(56320+(L&1023))}else _=p[u++],b=p[u++],o[f++]=String.fromCharCode((g&15)<<12|(_&63)<<6|b&63)}return JSON.parse(o.join(""))}catch{}return null}var aI="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),sh=["client_id","response_type","scope","redirect_uri","state"],xg={nd:{Ja:"locale",va:700,ua:600,fa:"facebook.com",Ya:sh},pd:{Ja:null,va:500,ua:750,fa:"github.com",Ya:sh},qd:{Ja:"hl",va:515,ua:680,fa:"google.com",Ya:sh},wd:{Ja:"lang",va:485,ua:705,fa:"twitter.com",Ya:aI},kd:{Ja:"locale",va:640,ua:600,fa:"apple.com",Ya:[]}};function Dg(o){for(var u in xg)if(xg[u].fa==o)return xg[u];return null}function uI(o){var u={};u["facebook.com"]=lI,u["google.com"]=hI,u["github.com"]=fI,u["twitter.com"]=dI;var f=o&&o[cI];try{if(f)return u[f]?new u[f](o):new fi(o);if(typeof o[Lg]<"u")return new Mg(o)}catch{}return null}var Lg="idToken",cI="providerId";function Mg(o){var u=o[cI];if(!u&&o[Lg]){var f=oh(o[Lg]);f&&f.b&&(u=f.b)}if(!u)throw Error("Invalid additional user info!");(u=="anonymous"||u=="custom")&&(u=null),f=!1,typeof o.isNewUser<"u"?f=!!o.isNewUser:o.kind==="identitytoolkit#SignupNewUserResponse"&&(f=!0),ae(this,"providerId",u),ae(this,"isNewUser",f)}function fi(o){Mg.call(this,o),o=Oa(o.rawUserInfo||"{}"),ae(this,"profile",Ig(o||{}))}F(fi,Mg);function lI(o){if(fi.call(this,o),this.providerId!="facebook.com")throw Error("Invalid provider ID!")}F(lI,fi);function fI(o){if(fi.call(this,o),this.providerId!="github.com")throw Error("Invalid provider ID!");ae(this,"username",this.profile&&this.profile.login||null)}F(fI,fi);function hI(o){if(fi.call(this,o),this.providerId!="google.com")throw Error("Invalid provider ID!")}F(hI,fi);function dI(o){if(fi.call(this,o),this.providerId!="twitter.com")throw Error("Invalid provider ID!");ae(this,"username",o.screenName||null)}F(dI,fi);function pI(o){var u=Xn(o),f=Tr(u,"link"),p=Tr(Xn(f),"link");return u=Tr(u,"deep_link_id"),Tr(Xn(u),"link")||u||p||f||o}function ah(o,u){if(!o&&!u)throw new R("internal-error","Internal assert: no raw session string available");if(o&&u)throw new R("internal-error","Internal assert: unable to determine the session type");this.a=o||null,this.b=u||null,this.type=this.a?Cc:uh}var Cc="enroll",uh="signin";ah.prototype.Ha=function(){return this.a?pe(this.a):pe(this.b)},ah.prototype.w=function(){return this.type==Cc?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}};function xa(){}xa.prototype.ka=function(){},xa.prototype.b=function(){},xa.prototype.c=function(){},xa.prototype.w=function(){};function Da(o,u){return o.then(function(f){if(f[Hr]){var p=oh(f[Hr]);if(!p||u!=p.i)throw new R("user-mismatch");return f}throw new R("user-mismatch")}).o(function(f){throw f&&f.code&&f.code==lt+"user-not-found"?new R("user-mismatch"):f})}function us(o,u){if(u)this.a=u;else throw new R("internal-error","failed to construct a credential");ae(this,"providerId",o),ae(this,"signInMethod",o)}us.prototype.ka=function(o){return sm(o,Fg(this))},us.prototype.b=function(o,u){var f=Fg(this);return f.idToken=u,am(o,f)},us.prototype.c=function(o,u){return Da(um(o,Fg(this)),u)};function Fg(o){return{pendingToken:o.a,requestUri:"http://localhost"}}us.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}};function DF(o){if(o&&o.providerId&&o.signInMethod&&o.providerId.indexOf("saml.")==0&&o.pendingToken)try{return new us(o.providerId,o.pendingToken)}catch{}return null}function Li(o,u,f){if(this.a=null,u.idToken||u.accessToken)u.idToken&&ae(this,"idToken",u.idToken),u.accessToken&&ae(this,"accessToken",u.accessToken),u.nonce&&!u.pendingToken&&ae(this,"nonce",u.nonce),u.pendingToken&&(this.a=u.pendingToken);else if(u.oauthToken&&u.oauthTokenSecret)ae(this,"accessToken",u.oauthToken),ae(this,"secret",u.oauthTokenSecret);else throw new R("internal-error","failed to construct a credential");ae(this,"providerId",o),ae(this,"signInMethod",f)}Li.prototype.ka=function(o){return sm(o,Ug(this))},Li.prototype.b=function(o,u){var f=Ug(this);return f.idToken=u,am(o,f)},Li.prototype.c=function(o,u){var f=Ug(this);return Da(um(o,f),u)};function Ug(o){var u={};return o.idToken&&(u.id_token=o.idToken),o.accessToken&&(u.access_token=o.accessToken),o.secret&&(u.oauth_token_secret=o.secret),u.providerId=o.providerId,o.nonce&&!o.a&&(u.nonce=o.nonce),u={postBody:AT(u).toString(),requestUri:"http://localhost"},o.a&&(delete u.postBody,u.pendingToken=o.a),u}Li.prototype.w=function(){var o={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(o.oauthIdToken=this.idToken),this.accessToken&&(o.oauthAccessToken=this.accessToken),this.secret&&(o.oauthTokenSecret=this.secret),this.nonce&&(o.nonce=this.nonce),this.a&&(o.pendingToken=this.a),o};function LF(o){if(o&&o.providerId&&o.signInMethod){var u={idToken:o.oauthIdToken,accessToken:o.oauthTokenSecret?null:o.oauthAccessToken,oauthTokenSecret:o.oauthTokenSecret,oauthToken:o.oauthTokenSecret&&o.oauthAccessToken,nonce:o.nonce,pendingToken:o.pendingToken};try{return new Li(o.providerId,u,o.signInMethod)}catch{}}return null}function cs(o,u){this.Qc=u||[],Ln(this,{providerId:o,isOAuthProvider:!0}),this.Jb={},this.qb=(Dg(o)||{}).Ja||null,this.pb=null}cs.prototype.Ka=function(o){return this.Jb=Et(o),this};function vI(o){if(typeof o!="string"||o.indexOf("saml.")!=0)throw new R("argument-error",'SAML provider IDs must be prefixed with "saml."');cs.call(this,o,[])}F(vI,cs);function ar(o){cs.call(this,o,sh),this.a=[]}F(ar,cs),ar.prototype.Ca=function(o){return D(this.a,o)||this.a.push(o),this},ar.prototype.Rb=function(){return Z(this.a)},ar.prototype.credential=function(o,u){var f;if(T(o)?f={idToken:o.idToken||null,accessToken:o.accessToken||null,nonce:o.rawNonce||null}:f={idToken:o||null,accessToken:u||null},!f.idToken&&!f.accessToken)throw new R("argument-error","credential failed: must provide the ID token and/or the access token.");return new Li(this.providerId,f,this.providerId)};function ls(){ar.call(this,"facebook.com")}F(ls,ar),ae(ls,"PROVIDER_ID","facebook.com"),ae(ls,"FACEBOOK_SIGN_IN_METHOD","facebook.com");function gI(o){if(!o)throw new R("argument-error","credential failed: expected 1 argument (the OAuth access token).");var u=o;return T(o)&&(u=o.accessToken),new ls().credential({accessToken:u})}function fs(){ar.call(this,"github.com")}F(fs,ar),ae(fs,"PROVIDER_ID","github.com"),ae(fs,"GITHUB_SIGN_IN_METHOD","github.com");function mI(o){if(!o)throw new R("argument-error","credential failed: expected 1 argument (the OAuth access token).");var u=o;return T(o)&&(u=o.accessToken),new fs().credential({accessToken:u})}function hs(){ar.call(this,"google.com"),this.Ca("profile")}F(hs,ar),ae(hs,"PROVIDER_ID","google.com"),ae(hs,"GOOGLE_SIGN_IN_METHOD","google.com");function yI(o,u){var f=o;return T(o)&&(f=o.idToken,u=o.accessToken),new hs().credential({idToken:f,accessToken:u})}function La(){cs.call(this,"twitter.com",aI)}F(La,cs),ae(La,"PROVIDER_ID","twitter.com"),ae(La,"TWITTER_SIGN_IN_METHOD","twitter.com");function _I(o,u){var f=o;if(T(f)||(f={oauthToken:o,oauthTokenSecret:u}),!f.oauthToken||!f.oauthTokenSecret)throw new R("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new Li("twitter.com",f,"twitter.com")}function fo(o,u,f){this.a=o,this.f=u,ae(this,"providerId","password"),ae(this,"signInMethod",f===Ir.EMAIL_LINK_SIGN_IN_METHOD?Ir.EMAIL_LINK_SIGN_IN_METHOD:Ir.EMAIL_PASSWORD_SIGN_IN_METHOD)}fo.prototype.ka=function(o){return this.signInMethod==Ir.EMAIL_LINK_SIGN_IN_METHOD?Fe(o,_2,{email:this.a,oobCode:this.f}):Fe(o,$I,{email:this.a,password:this.f})},fo.prototype.b=function(o,u){return this.signInMethod==Ir.EMAIL_LINK_SIGN_IN_METHOD?Fe(o,w2,{idToken:u,email:this.a,oobCode:this.f}):Fe(o,WI,{idToken:u,email:this.a,password:this.f})},fo.prototype.c=function(o,u){return Da(this.ka(o),u)},fo.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}};function MF(o){return o&&o.email&&o.password?new fo(o.email,o.password,o.signInMethod):null}function Ir(){Ln(this,{providerId:"password",isOAuthProvider:!1})}function wI(o,u){if(u=jg(u),!u)throw new R("argument-error","Invalid email link!");return new fo(o,u.code,Ir.EMAIL_LINK_SIGN_IN_METHOD)}function jg(o){return o=pI(o),(o=JT(o))&&o.operation===th?o:null}Ln(Ir,{PROVIDER_ID:"password"}),Ln(Ir,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Ln(Ir,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"});function ho(o){if(!(o.fb&&o.eb||o.La&&o.ea))throw new R("internal-error");this.a=o,ae(this,"providerId","phone"),this.fa="phone",ae(this,"signInMethod","phone")}ho.prototype.ka=function(o){return o.gb(Ac(this))},ho.prototype.b=function(o,u){var f=Ac(this);return f.idToken=u,Fe(o,V2,f)},ho.prototype.c=function(o,u){var f=Ac(this);return f.operation="REAUTH",o=Fe(o,B2,f),Da(o,u)},ho.prototype.w=function(){var o={providerId:"phone"};return this.a.fb&&(o.verificationId=this.a.fb),this.a.eb&&(o.verificationCode=this.a.eb),this.a.La&&(o.temporaryProof=this.a.La),this.a.ea&&(o.phoneNumber=this.a.ea),o};function FF(o){if(o&&o.providerId==="phone"&&(o.verificationId&&o.verificationCode||o.temporaryProof&&o.phoneNumber)){var u={};return J(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(f){o[f]&&(u[f]=o[f])}),new ho(u)}return null}function Ac(o){return o.a.La&&o.a.ea?{temporaryProof:o.a.La,phoneNumber:o.a.ea}:{sessionInfo:o.a.fb,code:o.a.eb}}function Mi(o){try{this.a=o||ue.auth()}catch{throw new R("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Ln(this,{providerId:"phone",isOAuthProvider:!1})}Mi.prototype.gb=function(o,u){var f=this.a.a;return pe(u.verify()).then(function(p){if(typeof p!="string")throw new R("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(u.type){case"recaptcha":var g=T(o)?o.session:null,_=T(o)?o.phoneNumber:o,b;return g&&g.type==Cc?b=g.Ha().then(function(S){return l2(f,{idToken:S,phoneEnrollmentInfo:{phoneNumber:_,recaptchaToken:p}})}):g&&g.type==uh?b=g.Ha().then(function(S){return f2(f,{mfaPendingCredential:S,mfaEnrollmentId:o.multiFactorHint&&o.multiFactorHint.uid||o.multiFactorUid,phoneSignInInfo:{recaptchaToken:p}})}):b=c2(f,{phoneNumber:_,recaptchaToken:p}),b.then(function(S){return typeof u.reset=="function"&&u.reset(),S},function(S){throw typeof u.reset=="function"&&u.reset(),S});default:throw new R("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})};function bI(o,u){if(!o)throw new R("missing-verification-id");if(!u)throw new R("missing-verification-code");return new ho({fb:o,eb:u})}Ln(Mi,{PROVIDER_ID:"phone"}),Ln(Mi,{PHONE_SIGN_IN_METHOD:"phone"});function Vg(o){if(o.temporaryProof&&o.phoneNumber)return new ho({La:o.temporaryProof,ea:o.phoneNumber});var u=o&&o.providerId;if(!u||u==="password")return null;var f=o&&o.oauthAccessToken,p=o&&o.oauthTokenSecret,g=o&&o.nonce,_=o&&o.oauthIdToken,b=o&&o.pendingToken;try{switch(u){case"google.com":return yI(_,f);case"facebook.com":return gI(f);case"github.com":return mI(f);case"twitter.com":return _I(f,p);default:return f||p||_||b?b?u.indexOf("saml.")==0?new us(u,b):new Li(u,{pendingToken:b,idToken:o.oauthIdToken,accessToken:o.oauthAccessToken},u):new ar(u).credential({idToken:_,accessToken:f,rawNonce:g}):null}}catch{return null}}function Bg(o){if(!o.isOAuthProvider)throw new R("invalid-oauth-provider")}function Br(o,u,f,p,g,_,b){if(this.c=o,this.b=u||null,this.g=f||null,this.f=p||null,this.i=_||null,this.h=b||null,this.a=g||null,this.g||this.a){if(this.g&&this.a)throw new R("invalid-auth-event");if(this.g&&!this.f)throw new R("invalid-auth-event")}else throw new R("invalid-auth-event")}Br.prototype.getUid=function(){var o=[];return o.push(this.c),this.b&&o.push(this.b),this.f&&o.push(this.f),this.h&&o.push(this.h),o.join("-")},Br.prototype.T=function(){return this.h},Br.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};function EI(o){return o=o||{},o.type?new Br(o.type,o.eventId,o.urlResponse,o.sessionId,o.error&&tt(o.error),o.postBody,o.tenantId):null}function UF(){this.b=null,this.a=[]}var qg=null;function jF(o){var u=qg;u.a.push(o),u.b||(u.b=function(f){for(var p=0;p<u.a.length;p++)u.a[p](f)},o=dt("universalLinks.subscribe",l),typeof o=="function"&&o(null,u.b))}function Hg(o){var u="unauthorized-domain",f=void 0,p=Xn(o);o=p.a,p=p.c,p=="chrome-extension"?f=WE("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",o):p=="http"||p=="https"?f=WE("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",o):u="operation-not-supported-in-this-environment",R.call(this,u,f)}F(Hg,R);function kc(o,u,f){R.call(this,o,f),o=u||{},o.Kb&&ae(this,"email",o.Kb),o.ea&&ae(this,"phoneNumber",o.ea),o.credential&&ae(this,"credential",o.credential),o.$b&&ae(this,"tenantId",o.$b)}F(kc,R),kc.prototype.w=function(){var o={code:this.code,message:this.message};this.email&&(o.email=this.email),this.phoneNumber&&(o.phoneNumber=this.phoneNumber),this.tenantId&&(o.tenantId=this.tenantId);var u=this.credential&&this.credential.w();return u&&on(o,u),o},kc.prototype.toJSON=function(){return this.w()};function ch(o){if(o.code){var u=o.code||"";u.indexOf(lt)==0&&(u=u.substring(lt.length));var f={credential:Vg(o),$b:o.tenantId};if(o.email)f.Kb=o.email;else if(o.phoneNumber)f.ea=o.phoneNumber;else if(!f.credential)return new R(u,o.message||void 0);return new kc(u,f,o.message)}return null}function Rc(){}Rc.prototype.c=null;function TI(o){return o.c||(o.c=o.b())}var Kg;function lh(){}F(lh,Rc),lh.prototype.a=function(){var o=II(this);return o?new ActiveXObject(o):new XMLHttpRequest},lh.prototype.b=function(){var o={};return II(this)&&(o[0]=!0,o[1]=!0),o};function II(o){if(!o.f&&typeof XMLHttpRequest>"u"&&typeof ActiveXObject<"u"){for(var u=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],f=0;f<u.length;f++){var p=u[f];try{return new ActiveXObject(p),o.f=p}catch{}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return o.f}Kg=new lh;function fh(){}F(fh,Rc),fh.prototype.a=function(){var o=new XMLHttpRequest;if("withCredentials"in o)return o;if(typeof XDomainRequest<"u")return new SI;throw Error("Unsupported browser")},fh.prototype.b=function(){return{}};function SI(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=U(this.qc,this),this.a.onerror=U(this.Tb,this),this.a.onprogress=U(this.rc,this),this.a.ontimeout=U(this.vc,this)}e=SI.prototype,e.open=function(o,u,f){if(f!=null&&!f)throw Error("Only async requests are supported.");this.a.open(o,u)},e.send=function(o){if(o)if(typeof o=="string")this.a.send(o);else throw Error("Only string data is supported");else this.a.send()},e.abort=function(){this.a.abort()},e.setRequestHeader=function(){},e.getResponseHeader=function(o){return o.toLowerCase()=="content-type"?this.a.contentType:""},e.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,zg(this,4)},e.Tb=function(){this.status=500,this.response=this.responseText="",zg(this,4)},e.vc=function(){this.Tb()},e.rc=function(){this.status=200,zg(this,1)};function zg(o,u){o.readyState=u,o.onreadystatechange&&o.onreadystatechange()}e.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType};function Wg(o,u,f){this.reset(o,u,f,void 0,void 0)}Wg.prototype.a=null,Wg.prototype.reset=function(o,u,f,p,g){delete this.a};function $g(o){this.f=o,this.b=this.c=this.a=null}function Nc(o,u){this.name=o,this.value=u}Nc.prototype.toString=function(){return this.name};var CI=new Nc("SEVERE",1e3),Gg=new Nc("WARNING",900),VF=new Nc("CONFIG",700),BF=new Nc("FINE",500);function AI(o){return o.c?o.c:o.a?AI(o.a):($n("Root logger has no level set."),null)}$g.prototype.log=function(o,u,f){if(o.value>=AI(this).value)for(E(u)&&(u=u()),o=new Wg(o,String(u),this.f),f&&(o.a=f),f=this;f;)f=f.a};var Qg={},hh=null;function Yg(o){hh||(hh=new $g(""),Qg[""]=hh,hh.c=VF);var u;if(!(u=Qg[o])){u=new $g(o);var f=o.lastIndexOf("."),p=o.substr(f+1);f=Yg(o.substr(0,f)),f.b||(f.b={}),f.b[p]=u,u.a=f,Qg[o]=u}return u}function Sr(o,u){o&&o.log(BF,u,void 0)}function dh(o){this.f=o}F(dh,Rc),dh.prototype.a=function(){return new ph(this.f)},dh.prototype.b=function(o){return function(){return o}}({});function ph(o){Dn.call(this),this.u=o,this.h=void 0,this.readyState=Xg,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=Yg("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}F(ph,Dn);var Xg=0;e=ph.prototype,e.open=function(o,u){if(this.readyState!=Xg)throw this.abort(),Error("Error reopening a connection");this.s=o,this.f=u,this.readyState=1,Oc(this)},e.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.a=!0;var u={headers:this.l,method:this.s,credentials:this.h,cache:void 0};o&&(u.body=o),this.u.fetch(new Request(this.f,u)).then(this.uc.bind(this),this.Va.bind(this))},e.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&this.readyState!=4&&(this.a=!1,Pc(this)),this.readyState=Xg},e.uc=function(o){this.a&&(this.g=o,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=o.headers,this.readyState=2,Oc(this)),this.a&&(this.readyState=3,Oc(this),this.a&&(this.responseType==="arraybuffer"?o.arrayBuffer().then(this.sc.bind(this),this.Va.bind(this)):typeof l.ReadableStream<"u"&&"body"in o?(this.response=this.responseText="",this.c=o.body.getReader(),this.m=new TextDecoder,kI(this)):o.text().then(this.tc.bind(this),this.Va.bind(this)))))};function kI(o){o.c.read().then(o.pc.bind(o)).catch(o.Va.bind(o))}e.pc=function(o){if(this.a){var u=this.m.decode(o.value?o.value:new Uint8Array(0),{stream:!o.done});u&&(this.response=this.responseText+=u),o.done?Pc(this):Oc(this),this.readyState==3&&kI(this)}},e.tc=function(o){this.a&&(this.response=this.responseText=o,Pc(this))},e.sc=function(o){this.a&&(this.response=o,Pc(this))},e.Va=function(o){var u=this.i;u&&u.log(Gg,"Failed to fetch url "+this.f,o instanceof Error?o:Error(o)),this.a&&Pc(this)};function Pc(o){o.readyState=4,o.g=null,o.c=null,o.m=null,Oc(o)}e.setRequestHeader=function(o,u){this.l.append(o,u)},e.getResponseHeader=function(o){return this.b?this.b.get(o.toLowerCase())||"":((o=this.i)&&o.log(Gg,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},e.getAllResponseHeaders=function(){if(!this.b){var o=this.i;return o&&o.log(Gg,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}o=[];for(var u=this.b.entries(),f=u.next();!f.done;)f=f.value,o.push(f[0]+": "+f[1]),f=u.next();return o.join(`\r
`)};function Oc(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(ph.prototype,"withCredentials",{get:function(){return this.h==="include"},set:function(o){this.h=o?"include":"same-origin"}});function xc(o){Dn.call(this),this.headers=new Aa,this.D=o||null,this.c=!1,this.C=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.J=!1,this.g=0,this.s=null,this.m=RI,this.u=this.S=!1}F(xc,Dn);var RI="";xc.prototype.b=Yg("goog.net.XhrIo");var qF=/^https?$/i,HF=["POST","PUT"];function KF(o,u,f,p,g){if(o.a)throw Error("[goog.net.XhrIo] Object is active with another request="+o.l+"; newUri="+u);f=f?f.toUpperCase():"GET",o.l=u,o.h="",o.P=f,o.J=!1,o.c=!0,o.a=o.D?o.D.a():Kg.a(),o.C=o.D?TI(o.D):TI(Kg),o.a.onreadystatechange=U(o.Wb,o);try{Sr(o.b,Fi(o,"Opening Xhr")),o.N=!0,o.a.open(f,String(u),!0),o.N=!1}catch(b){Sr(o.b,Fi(o,"Error opening Xhr: "+b.message)),NI(o,b);return}u=p||"";var _=new Aa(o.headers);g&&YM(g,function(b,S){_.set(S,b)}),g=N(_.Y()),p=l.FormData&&u instanceof l.FormData,!D(HF,f)||g||p||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),_.forEach(function(b,S){this.a.setRequestHeader(S,b)},o),o.m&&(o.a.responseType=o.m),"withCredentials"in o.a&&o.a.withCredentials!==o.S&&(o.a.withCredentials=o.S);try{xI(o),0<o.g&&(o.u=zF(o.a),Sr(o.b,Fi(o,"Will abort after "+o.g+"ms if incomplete, xhr2 "+o.u)),o.u?(o.a.timeout=o.g,o.a.ontimeout=U(o.Ma,o)):o.s=lg(o.Ma,o.g,o)),Sr(o.b,Fi(o,"Sending request")),o.i=!0,o.a.send(u),o.i=!1}catch(b){Sr(o.b,Fi(o,"Send error: "+b.message)),NI(o,b)}}function zF(o){return jr&&YE(9)&&typeof o.timeout=="number"&&o.ontimeout!==void 0}function WF(o){return o.toLowerCase()=="content-type"}e=xc.prototype,e.Ma=function(){typeof c<"u"&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",Sr(this.b,Fi(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))};function NI(o,u){o.c=!1,o.a&&(o.f=!0,o.a.abort(),o.f=!1),o.h=u,PI(o),vh(o)}function PI(o){o.J||(o.J=!0,o.dispatchEvent("complete"),o.dispatchEvent("error"))}e.abort=function(){this.a&&this.c&&(Sr(this.b,Fi(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),vh(this))},e.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),vh(this,!0)),xc.bb.Da.call(this)},e.Wb=function(){this.ya||(this.N||this.i||this.f?OI(this):this.Jc())},e.Jc=function(){OI(this)};function OI(o){if(o.c&&typeof c<"u"){if(o.C[1]&&Dc(o)==4&&gh(o)==2)Sr(o.b,Fi(o,"Local request error detected and ignored"));else if(o.i&&Dc(o)==4)lg(o.Wb,0,o);else if(o.dispatchEvent("readystatechange"),Dc(o)==4){Sr(o.b,Fi(o,"Request complete")),o.c=!1;try{var u=gh(o);e:switch(u){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var p;if(!(p=f)){var g;if(g=u===0){var _=String(o.l).match(ST)[1]||null;if(!_&&l.self&&l.self.location){var b=l.self.location.protocol;_=b.substr(0,b.length-1)}g=!qF.test(_?_.toLowerCase():"")}p=g}if(p)o.dispatchEvent("complete"),o.dispatchEvent("success");else{try{var S=2<Dc(o)?o.a.statusText:""}catch(L){Sr(o.b,"Can not get status: "+L.message),S=""}o.h=S+" ["+gh(o)+"]",PI(o)}}finally{vh(o)}}}}function vh(o,u){if(o.a){xI(o);var f=o.a,p=o.C[0]?m:null;o.a=null,o.C=null,u||o.dispatchEvent("ready");try{f.onreadystatechange=p}catch(g){(o=o.b)&&o.log(CI,"Problem encountered resetting onreadystatechange: "+g.message,void 0)}}}function xI(o){o.a&&o.u&&(o.a.ontimeout=null),o.s&&(l.clearTimeout(o.s),o.s=null)}function Dc(o){return o.a?o.a.readyState:0}function gh(o){try{return 2<Dc(o)?o.a.status:-1}catch{return-1}}function $F(o){try{return o.a?o.a.responseText:""}catch(u){return Sr(o.b,"Can not get responseText: "+u.message),""}}e.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case RI:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var o=this.b;return o&&o.log(CI,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(u){return Sr(this.b,"Can not get response: "+u.message),null}};function Fi(o,u){return u+" ["+o.P+" "+o.l+" "+gh(o)+"]"}function ds(o){var u=YF;this.g=[],this.u=u,this.s=o||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}ds.prototype.cancel=function(o){if(this.a)this.c instanceof ds&&this.c.cancel();else{if(this.b){var u=this.b;delete this.b,o?u.cancel(o):(u.l--,0>=u.l&&u.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(o=new Mc,mh(this),Lc(this,!1,o))}},ds.prototype.m=function(o,u){this.i=!1,Lc(this,o,u)};function Lc(o,u,f){o.a=!0,o.c=f,o.f=!u,LI(o)}function mh(o){if(o.a){if(!o.v)throw new yh;o.v=!1}}function GF(o,u){Jg(o,null,u,void 0)}function Jg(o,u,f,p){o.g.push([u,f,p]),o.a&&LI(o)}ds.prototype.then=function(o,u,f){var p,g,_=new Me(function(b,S){p=b,g=S});return Jg(this,p,function(b){b instanceof Mc?_.cancel():g(b)}),_.then(o,u,f)},ds.prototype.$goog_Thenable=!0;function DI(o){return I(o.g,function(u){return E(u[1])})}function LI(o){if(o.h&&o.a&&DI(o)){var u=o.h,f=_h[u];f&&(l.clearTimeout(f.a),delete _h[u]),o.h=0}o.b&&(o.b.l--,delete o.b),u=o.c;for(var p=f=!1;o.g.length&&!o.i;){var g=o.g.shift(),_=g[0],b=g[1];if(g=g[2],_=o.f?b:_)try{var S=_.call(g||o.s,u);S!==void 0&&(o.f=o.f&&(S==u||S instanceof Error),o.c=u=S),(Ye(u)||typeof l.Promise=="function"&&u instanceof l.Promise)&&(p=!0,o.i=!0)}catch(L){u=L,o.f=!0,DI(o)||(f=!0)}}o.c=u,p&&(S=U(o.m,o,!0),p=U(o.m,o,!1),u instanceof ds?(Jg(u,S,p),u.C=!0):u.then(S,p)),f&&(u=new MI(u),_h[u.a]=u,o.h=u.a)}function yh(){Ce.call(this)}F(yh,Ce),yh.prototype.message="Deferred has already fired",yh.prototype.name="AlreadyCalledError";function Mc(){Ce.call(this)}F(Mc,Ce),Mc.prototype.message="Deferred was canceled",Mc.prototype.name="CanceledError";function MI(o){this.a=l.setTimeout(U(this.c,this),0),this.b=o}MI.prototype.c=function(){throw delete _h[this.a],this.b};var _h={};function Zg(o){var u={},f=u.document||document,p=UE(o).toString(),g=Kf(document,"SCRIPT"),_={Xb:g,Ma:void 0},b=new ds(_),S=null,L=u.timeout!=null?u.timeout:5e3;return 0<L&&(S=window.setTimeout(function(){wh(g,!0);var B=new em(JF,"Timeout reached for loading script "+p);mh(b),Lc(b,!1,B)},L),_.Ma=S),g.onload=g.onreadystatechange=function(){g.readyState&&g.readyState!="loaded"&&g.readyState!="complete"||(wh(g,u.xd||!1,S),mh(b),Lc(b,!0,null))},g.onerror=function(){wh(g,!0,S);var B=new em(XF,"Error while loading script "+p);mh(b),Lc(b,!1,B)},_=u.attributes||{},on(_,{type:"text/javascript",charset:"UTF-8"}),JE(g,_),AM(g,o),QF(f).appendChild(g),b}function QF(o){var u;return(u=(o||document).getElementsByTagName("HEAD"))&&u.length!=0?u[0]:o.documentElement}function YF(){if(this&&this.Xb){var o=this.Xb;o&&o.tagName=="SCRIPT"&&wh(o,!0,this.Ma)}}function wh(o,u,f){f!=null&&l.clearTimeout(f),o.onload=m,o.onerror=m,o.onreadystatechange=m,u&&window.setTimeout(function(){o&&o.parentNode&&o.parentNode.removeChild(o)},0)}var XF=0,JF=1;function em(o,u){var f="Jsloader error (code #"+o+")";u&&(f+=": "+u),Ce.call(this,f),this.code=o}F(em,Ce);function bh(o){this.f=o}F(bh,Rc),bh.prototype.a=function(){return new this.f},bh.prototype.b=function(){return{}};function qr(o,u,f){if(this.c=o,o=u||{},this.l=o.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=o.secureTokenTimeout||ZF,this.g=Et(o.secureTokenHeaders||e2),this.h=o.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=o.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=o.firebaseTimeout||t2,this.a=Et(o.firebaseHeaders||n2),f&&(this.a["X-Client-Version"]=f,this.g["X-Client-Version"]=f),f=ci()=="Node",f=l.XMLHttpRequest||f&&ue.INTERNAL.node&&ue.INTERNAL.node.XMLHttpRequest,!f&&!Vr())throw new R("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,Vr()?this.f=new dh(self):FT()?this.f=new bh(f):this.f=new fh,this.b=null}var tm,Hr="idToken",ZF=new lo(3e4,6e4),e2={"Content-Type":"application/x-www-form-urlencoded"},t2=new lo(3e4,6e4),n2={"Content-Type":"application/json"};function FI(o,u){u?o.a["X-Firebase-Locale"]=u:delete o.a["X-Firebase-Locale"]}function Eh(o,u){u&&(o.l=nm("https://securetoken.googleapis.com/v1/token",u),o.h=nm("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",u),o.i=nm("https://identitytoolkit.googleapis.com/v2/",u))}function nm(o,u){return o=Xn(o),u=Xn(u.url),o.f=o.a+o.f,vc(o,u.c),o.a=u.a,gc(o,u.g),o.toString()}function UI(o,u){u?(o.a["X-Client-Version"]=u,o.g["X-Client-Version"]=u):(delete o.a["X-Client-Version"],delete o.g["X-Client-Version"])}qr.prototype.T=function(){return this.b};function jI(o,u,f,p,g,_,b){sF()||Vr()?o=U(o.u,o):(tm||(tm=new Me(function(S,L){i2(S,L)})),o=U(o.s,o)),o(u,f,p,g,_,b)}qr.prototype.u=function(o,u,f,p,g,_){if(Vr()&&(typeof l.fetch>"u"||typeof l.Headers>"u"||typeof l.Request>"u"))throw new R("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var b=new xc(this.f);if(_){b.g=Math.max(0,_);var S=setTimeout(function(){b.dispatchEvent("timeout")},_)}ET(b,"complete",function(){S&&clearTimeout(S);var L=null;try{L=JSON.parse($F(this))||null}catch{L=null}u&&u(L)}),cg(b,"ready",function(){S&&clearTimeout(S),vT(this)}),cg(b,"timeout",function(){S&&clearTimeout(S),vT(this),u&&u(null)}),KF(b,o,f,p,g)};var r2=new ai(Vf,"https://apis.google.com/js/client.js?onload=%{onload}"),VI="__fcb"+Math.floor(1e6*Math.random()).toString();function i2(o,u){if(((window.gapi||{}).client||{}).request)o();else{l[VI]=function(){((window.gapi||{}).client||{}).request?o():u(Error("CORS_UNSUPPORTED"))};var f=zv(r2,{onload:VI});GF(Zg(f),function(){u(Error("CORS_UNSUPPORTED"))})}}qr.prototype.s=function(o,u,f,p,g){var _=this;tm.then(function(){window.gapi.client.setApiKey(_.c);var b=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:o,method:f,body:p,headers:g,authType:"none",callback:function(S){window.gapi.auth.setToken(b),u&&u(S)}})}).o(function(b){u&&u({error:{message:b&&b.message||"CORS_UNSUPPORTED"}})})};function o2(o,u){return new Me(function(f,p){u.grant_type=="refresh_token"&&u.refresh_token||u.grant_type=="authorization_code"&&u.code?jI(o,o.l+"?key="+encodeURIComponent(o.c),function(g){g?g.error?p(lm(g)):g.access_token&&g.refresh_token?f(g):p(new R("internal-error")):p(new R("network-request-failed"))},"POST",AT(u).toString(),o.g,o.m.get()):p(new R("internal-error"))})}function BI(o,u,f,p,g,_,b){var S=Xn(u+f);Ct(S,"key",o.c),b&&Ct(S,"cb",Date.now().toString());var L=p=="GET";if(L)for(var B in g)g.hasOwnProperty(B)&&Ct(S,B,g[B]);return new Me(function(be,Xe){jI(o,S.toString(),function(ze){ze?ze.error?Xe(lm(ze,_||{})):be(ze):Xe(new R("network-request-failed"))},p,L?void 0:NT(VT(g)),o.a,o.v.get())})}function ps(o){if(o=o.email,typeof o!="string"||!cF.test(o))throw new R("invalid-email")}function qI(o){"email"in o&&ps(o)}function s2(o,u){return Fe(o,g2,{identifier:u,continueUri:eh()?_c():"http://localhost"}).then(function(f){return f.signinMethods||[]})}function a2(o){return Fe(o,k2,{}).then(function(u){return u.authorizedDomains||[]})}function Jn(o){if(!o[Hr])throw o.mfaPendingCredential?new R("multi-factor-auth-required",null,Et(o)):new R("internal-error")}function rm(o){if(o.phoneNumber||o.temporaryProof){if(!o.phoneNumber||!o.temporaryProof)throw new R("internal-error")}else{if(!o.sessionInfo)throw new R("missing-verification-id");if(!o.code)throw new R("missing-verification-code")}}qr.prototype.Ab=function(){return Fe(this,O2,{})},qr.prototype.Cb=function(o,u){return Fe(this,zI,{idToken:o,email:u})},qr.prototype.Db=function(o,u){return Fe(this,WI,{idToken:o,password:u})};var u2={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};e=qr.prototype,e.Eb=function(o,u){var f={idToken:o},p=[];return so(u2,function(g,_){var b=u[_];b===null?p.push(g):_ in u&&(f[_]=b)}),p.length&&(f.deleteAttribute=p),Fe(this,zI,f)},e.wb=function(o,u){return o={requestType:"PASSWORD_RESET",email:o},on(o,u),Fe(this,A2,o)},e.xb=function(o,u){return o={requestType:"EMAIL_SIGNIN",email:o},on(o,u),Fe(this,I2,o)},e.vb=function(o,u){return o={requestType:"VERIFY_EMAIL",idToken:o},on(o,u),Fe(this,S2,o)},e.Fb=function(o,u,f){return o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:o,newEmail:u},on(o,f),Fe(this,C2,o)};function c2(o,u){return Fe(o,P2,u)}e.gb=function(o){return Fe(this,j2,o)};function l2(o,u){return Fe(o,x2,u).then(function(f){return f.phoneSessionInfo.sessionInfo})}function HI(o){if(!o.phoneVerificationInfo)throw new R("internal-error");if(!o.phoneVerificationInfo.sessionInfo)throw new R("missing-verification-id");if(!o.phoneVerificationInfo.code)throw new R("missing-verification-code")}function f2(o,u){return Fe(o,D2,u).then(function(f){return f.phoneResponseInfo.sessionInfo})}function h2(o,u,f){return Fe(o,y2,{idToken:u,deleteProvider:f})}function im(o){if(!o.requestUri||!o.sessionId&&!o.postBody&&!o.pendingToken)throw new R("internal-error")}function om(o,u){return u.oauthIdToken&&u.providerId&&u.providerId.indexOf("oidc.")==0&&!u.pendingToken&&(o.sessionId?u.nonce=o.sessionId:o.postBody&&(o=new is(o.postBody),dg(o,"nonce")&&(u.nonce=o.get("nonce")))),u}function KI(o){var u=null;if(o.needConfirmation?(o.code="account-exists-with-different-credential",u=ch(o)):o.errorMessage=="FEDERATED_USER_ID_ALREADY_LINKED"?(o.code="credential-already-in-use",u=ch(o)):o.errorMessage=="EMAIL_EXISTS"?(o.code="email-already-in-use",u=ch(o)):o.errorMessage&&(u=GI(o.errorMessage)),u)throw u;Jn(o)}function sm(o,u){return u.returnIdpCredential=!0,Fe(o,L2,u)}function am(o,u){return u.returnIdpCredential=!0,Fe(o,F2,u)}function um(o,u){return u.returnIdpCredential=!0,u.autoCreate=!1,Fe(o,M2,u)}function cm(o){if(!o.oobCode)throw new R("invalid-action-code")}e.ob=function(o,u){return Fe(this,N2,{oobCode:o,newPassword:u})},e.Sa=function(o){return Fe(this,p2,{oobCode:o})},e.kb=function(o){return Fe(this,d2,{oobCode:o})};var d2={endpoint:"setAccountInfo",A:cm,Z:"email",B:!0},p2={endpoint:"resetPassword",A:cm,G:function(o){var u=o.requestType;if(!u||!o.email&&u!="EMAIL_SIGNIN"&&u!="VERIFY_AND_CHANGE_EMAIL")throw new R("internal-error")},B:!0},v2={endpoint:"signupNewUser",A:function(o){if(ps(o),!o.password)throw new R("weak-password")},G:Jn,V:!0,B:!0},g2={endpoint:"createAuthUri",B:!0},m2={endpoint:"deleteAccount",O:["idToken"]},y2={endpoint:"setAccountInfo",O:["idToken","deleteProvider"],A:function(o){if(!Array.isArray(o.deleteProvider))throw new R("internal-error")}},_2={endpoint:"emailLinkSignin",O:["email","oobCode"],A:ps,G:Jn,V:!0,B:!0},w2={endpoint:"emailLinkSignin",O:["idToken","email","oobCode"],A:ps,G:Jn,V:!0},b2={endpoint:"accounts/mfaEnrollment:finalize",O:["idToken","phoneVerificationInfo"],A:HI,G:Jn,B:!0,Na:!0},E2={endpoint:"accounts/mfaSignIn:finalize",O:["mfaPendingCredential","phoneVerificationInfo"],A:HI,G:Jn,B:!0,Na:!0},T2={endpoint:"getAccountInfo"},I2={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(o){if(o.requestType!="EMAIL_SIGNIN")throw new R("internal-error");ps(o)},Z:"email",B:!0},S2={endpoint:"getOobConfirmationCode",O:["idToken","requestType"],A:function(o){if(o.requestType!="VERIFY_EMAIL")throw new R("internal-error")},Z:"email",B:!0},C2={endpoint:"getOobConfirmationCode",O:["idToken","newEmail","requestType"],A:function(o){if(o.requestType!="VERIFY_AND_CHANGE_EMAIL")throw new R("internal-error")},Z:"email",B:!0},A2={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(o){if(o.requestType!="PASSWORD_RESET")throw new R("internal-error");ps(o)},Z:"email",B:!0},k2={mb:!0,endpoint:"getProjectConfig",Vb:"GET"},R2={mb:!0,endpoint:"getRecaptchaParam",Vb:"GET",G:function(o){if(!o.recaptchaSiteKey)throw new R("internal-error")}},N2={endpoint:"resetPassword",A:cm,Z:"email",B:!0},P2={endpoint:"sendVerificationCode",O:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},zI={endpoint:"setAccountInfo",O:["idToken"],A:qI,V:!0},WI={endpoint:"setAccountInfo",O:["idToken"],A:function(o){if(qI(o),!o.password)throw new R("weak-password")},G:Jn,V:!0},O2={endpoint:"signupNewUser",G:Jn,V:!0,B:!0},x2={endpoint:"accounts/mfaEnrollment:start",O:["idToken","phoneEnrollmentInfo"],A:function(o){if(!o.phoneEnrollmentInfo)throw new R("internal-error");if(!o.phoneEnrollmentInfo.phoneNumber)throw new R("missing-phone-number");if(!o.phoneEnrollmentInfo.recaptchaToken)throw new R("missing-app-credential")},G:function(o){if(!o.phoneSessionInfo||!o.phoneSessionInfo.sessionInfo)throw new R("internal-error")},B:!0,Na:!0},D2={endpoint:"accounts/mfaSignIn:start",O:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(o){if(!o.phoneSignInInfo||!o.phoneSignInInfo.recaptchaToken)throw new R("missing-app-credential")},G:function(o){if(!o.phoneResponseInfo||!o.phoneResponseInfo.sessionInfo)throw new R("internal-error")},B:!0,Na:!0},L2={endpoint:"verifyAssertion",A:im,Za:om,G:KI,V:!0,B:!0},M2={endpoint:"verifyAssertion",A:im,Za:om,G:function(o){if(o.errorMessage&&o.errorMessage=="USER_NOT_FOUND")throw new R("user-not-found");if(o.errorMessage)throw GI(o.errorMessage);Jn(o)},V:!0,B:!0},F2={endpoint:"verifyAssertion",A:function(o){if(im(o),!o.idToken)throw new R("internal-error")},Za:om,G:KI,V:!0},U2={endpoint:"verifyCustomToken",A:function(o){if(!o.token)throw new R("invalid-custom-token")},G:Jn,V:!0,B:!0},$I={endpoint:"verifyPassword",A:function(o){if(ps(o),!o.password)throw new R("wrong-password")},G:Jn,V:!0,B:!0},j2={endpoint:"verifyPhoneNumber",A:rm,G:Jn,B:!0},V2={endpoint:"verifyPhoneNumber",A:function(o){if(!o.idToken)throw new R("internal-error");rm(o)},G:function(o){if(o.temporaryProof)throw o.code="credential-already-in-use",ch(o);Jn(o)}},B2={Ib:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:rm,G:Jn,B:!0},q2={endpoint:"accounts/mfaEnrollment:withdraw",O:["idToken","mfaEnrollmentId"],G:function(o){if(!!o[Hr]^!!o.refreshToken)throw new R("internal-error")},B:!0,Na:!0};function Fe(o,u,f){if(!gF(f,u.O))return ht(new R("internal-error"));var p=!!u.Na,g=u.Vb||"POST",_;return pe(f).then(u.A).then(function(){return u.V&&(f.returnSecureToken=!0),u.B&&o.b&&typeof f.tenantId>"u"&&(f.tenantId=o.b),p?BI(o,o.i,u.endpoint,g,f,u.Ib,u.mb||!1):BI(o,o.h,u.endpoint,g,f,u.Ib,u.mb||!1)}).then(function(b){return _=b,u.Za?u.Za(f,_):_}).then(u.G).then(function(){if(!u.Z)return _;if(!(u.Z in _))throw new R("internal-error");return _[u.Z]})}function GI(o){return lm({error:{errors:[{message:o}],code:400,message:o}})}function lm(o,u){var f=(o.error&&o.error.errors&&o.error.errors[0]||{}).reason||"",p={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(f=p[f]?new R(p[f]):null)return f;f=o.error&&o.error.message||"",p={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},on(p,u||{}),u=(u=f.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<u.length?u[1]:void 0;for(var g in p)if(f.indexOf(g)===0)return new R(p[g],u);return!u&&o&&(u=bc(o)),new R("internal-error",u)}function H2(o){this.b=o,this.a=null,this.sb=K2(this)}function K2(o){return Y2().then(function(){return new Me(function(u,f){dt("gapi.iframes.getContext")().open({where:document.body,url:o.b,messageHandlersFilter:dt("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(p){function g(){clearTimeout(_),u()}o.a=p,o.a.restyle({setHideOnLeave:!1});var _=setTimeout(function(){f(Error("Network Error"))},Q2.get());p.ping(g).then(g,function(){f(Error("Network Error"))})})})})}function z2(o,u){return o.sb.then(function(){return new Me(function(f){o.a.send(u.type,u,f,dt("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}function W2(o,u){o.sb.then(function(){o.a.register("authEvent",u,dt("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}var $2=new ai(Vf,"https://apis.google.com/js/api.js?onload=%{onload}"),G2=new lo(3e4,6e4),Q2=new lo(5e3,15e3),Th=null;function Y2(){return Th||(Th=new Me(function(o,u){function f(){qT(),dt("gapi.load")("gapi.iframes",{callback:o,ontimeout:function(){qT(),u(Error("Network Error"))},timeout:G2.get()})}if(dt("gapi.iframes.Iframe"))o();else if(dt("gapi.load"))f();else{var p="__iframefcb"+Math.floor(1e6*Math.random()).toString();l[p]=function(){dt("gapi.load")?f():u(Error("Network Error"))},p=zv($2,{onload:p}),pe(Zg(p)).o(function(){u(Error("Network Error"))})}}).o(function(o){throw Th=null,o}))}function QI(o,u,f,p){this.l=o,this.h=u,this.i=f,this.g=p,this.f=null,this.g?(o=Xn(this.g.url),o=Jf(o.c,o.a,o.g,"/emulator/auth/iframe")):o=Jf("https",this.l,null,"/__/auth/iframe"),this.a=o,Ct(this.a,"apiKey",this.h),Ct(this.a,"appName",this.i),this.b=null,this.c=[]}QI.prototype.toString=function(){return this.f?Ct(this.a,"v",this.f):ui(this.a.b,"v"),this.b?Ct(this.a,"eid",this.b):ui(this.a.b,"eid"),this.c.length?Ct(this.a,"fw",this.c.join(",")):ui(this.a.b,"fw"),this.a.toString()};function fm(o,u,f,p,g,_){this.u=o,this.s=u,this.c=f,this.m=p,this.v=_,this.i=this.g=this.l=null,this.a=g,this.h=this.f=null}fm.prototype.zb=function(o){return this.h=o,this},fm.prototype.toString=function(){if(this.v){var o=Xn(this.v.url);o=Jf(o.c,o.a,o.g,"/emulator/auth/handler")}else o=Jf("https",this.u,null,"/__/auth/handler");if(Ct(o,"apiKey",this.s),Ct(o,"appName",this.c),Ct(o,"authType",this.m),this.a.isOAuthProvider){var u=this.a;try{var f=ue.app(this.c).auth().la()}catch{f=null}u.pb=f,Ct(o,"providerId",this.a.providerId),f=this.a,u=VT(f.Jb);for(var p in u)u[p]=u[p].toString();p=f.Qc,u=Et(u);for(var g=0;g<p.length;g++){var _=p[g];_ in u&&delete u[_]}f.qb&&f.pb&&!u[f.qb]&&(u[f.qb]=f.pb),si(u)||Ct(o,"customParameters",bc(u))}if(typeof this.a.Rb=="function"&&(f=this.a.Rb(),f.length&&Ct(o,"scopes",f.join(","))),this.l?Ct(o,"redirectUrl",this.l):ui(o.b,"redirectUrl"),this.g?Ct(o,"eventId",this.g):ui(o.b,"eventId"),this.i?Ct(o,"v",this.i):ui(o.b,"v"),this.b)for(var b in this.b)this.b.hasOwnProperty(b)&&!Tr(o,b)&&Ct(o,b,this.b[b]);return this.h?Ct(o,"tid",this.h):ui(o.b,"tid"),this.f?Ct(o,"eid",this.f):ui(o.b,"eid"),b=hm(this.c),b.length&&Ct(o,"fw",b.join(",")),o.toString()};function hm(o){try{return ue.app(o).auth().Ga()}catch{return[]}}function YI(o,u,f,p,g,_){this.s=o,this.g=u,this.b=f,this.f=_,this.c=p||null,this.i=g||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function XI(o){var u=_c();return a2(o).then(function(f){e:{var p=Xn(u),g=p.c;p=p.a;for(var _=0;_<f.length;_++){var b=f[_],S=p,L=g;if(b.indexOf("chrome-extension://")==0?S=Xn(b).a==S&&L=="chrome-extension":L!="http"&&L!="https"?S=!1:uF.test(b)?S=S==b:(b=b.split(".").join("\\."),S=new RegExp("^(.+\\."+b+"|"+b+")$","i").test(S)),S){f=!0;break e}}f=!1}if(!f)throw new Hg(_c())})}function JI(o){return o.m||(o.m=Zf().then(function(){if(!o.u){var u=o.c,f=o.i,p=hm(o.b),g=new QI(o.s,o.g,o.b,o.f);g.f=u,g.b=f,g.c=Z(p||[]),o.u=g.toString()}o.v=new H2(o.u),X2(o)})),o.m}e=YI.prototype,e.Pb=function(o,u,f){var p=new R("popup-closed-by-user"),g=new R("web-storage-unsupported"),_=this,b=!1;return this.ma().then(function(){J2(_).then(function(S){S||(o&&os(o),u(g),b=!0)})}).o(function(){}).then(function(){if(!b)return aF(o)}).then(function(){if(!b)return Ca(f).then(function(){u(p)})})},e.Yb=function(){var o=sn();return!wc(o)&&!BT(o)},e.Ub=function(){return!1},e.Nb=function(o,u,f,p,g,_,b,S){if(!o)return ht(new R("popup-blocked"));if(b&&!wc())return this.ma().o(function(B){os(o),g(B)}),p(),pe();this.a||(this.a=XI(ZI(this)));var L=this;return this.a.then(function(){var B=L.ma().o(function(be){throw os(o),g(be),be});return p(),B}).then(function(){if(Bg(f),!b){var B=Fc(L.s,L.g,L.b,u,f,null,_,L.c,void 0,L.i,S,L.f);xT(B,o)}}).o(function(B){throw B.code=="auth/network-request-failed"&&(L.a=null),B})};function ZI(o){return o.l||(o.C=o.c?Na(o.c,hm(o.b)):null,o.l=new qr(o.g,ft(o.i),o.C),o.f&&Eh(o.l,o.f)),o.l}e.Ob=function(o,u,f,p){this.a||(this.a=XI(ZI(this)));var g=this;return this.a.then(function(){Bg(u);var _=Fc(g.s,g.g,g.b,o,u,_c(),f,g.c,void 0,g.i,p,g.f);xT(_)}).o(function(_){throw _.code=="auth/network-request-failed"&&(g.a=null),_})},e.ma=function(){var o=this;return JI(this).then(function(){return o.v.sb}).o(function(){throw o.a=null,new R("network-request-failed")})},e.ac=function(){return!0};function Fc(o,u,f,p,g,_,b,S,L,B,be,Xe){return o=new fm(o,u,f,p,g,Xe),o.l=_,o.g=b,o.i=S,o.b=Et(L||null),o.f=B,o.zb(be).toString()}function X2(o){if(!o.v)throw Error("IfcHandler must be initialized!");W2(o.v,function(u){var f={};if(u&&u.authEvent){var p=!1;for(u=EI(u.authEvent),f=0;f<o.h.length;f++)p=o.h[f](u)||p;return f={},f.status=p?"ACK":"ERROR",pe(f)}return f.status="ERROR",pe(f)})}function J2(o){var u={type:"webStorageSupport"};return JI(o).then(function(){return z2(o.v,u)}).then(function(f){if(f&&f.length&&typeof f[0].webStorageSupport<"u")return f[0].webStorageSupport;throw Error()})}e.Ea=function(o){this.h.push(o)},e.Ta=function(o){j(this.h,function(u){return u==o})};function eS(o){if(this.a=o||ue.INTERNAL.reactNative&&ue.INTERNAL.reactNative.AsyncStorage,!this.a)throw new R("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}e=eS.prototype,e.get=function(o){return pe(this.a.getItem(o)).then(function(u){return u&&Oa(u)})},e.set=function(o,u){return pe(this.a.setItem(o,bc(u)))},e.U=function(o){return pe(this.a.removeItem(o))},e.ca=function(){},e.ia=function(){};function tS(o){this.b=o,this.a={},this.f=U(this.c,this)}var nS=[];function Z2(){var o=Vr()?self:null;if(J(nS,function(f){f.b==o&&(u=f)}),!u){var u=new tS(o);nS.push(u)}return u}tS.prototype.c=function(o){var u=o.data.eventType,f=o.data.eventId,p=this.a[u];if(p&&0<p.length){o.ports[0].postMessage({status:"ack",eventId:f,eventType:u,response:null});var g=[];J(p,function(_){g.push(pe().then(function(){return _(o.origin,o.data.data)}))}),sT(g).then(function(_){var b=[];J(_,function(S){b.push({fulfilled:S.Qb,value:S.value,reason:S.reason?S.reason.message:void 0})}),J(b,function(S){for(var L in S)typeof S[L]>"u"&&delete S[L]}),o.ports[0].postMessage({status:"done",eventId:f,eventType:u,response:b})})}};function rS(o,u,f){si(o.a)&&o.b.addEventListener("message",o.f),typeof o.a[u]>"u"&&(o.a[u]=[]),o.a[u].push(f)}function iS(o){this.a=o}iS.prototype.postMessage=function(o,u){this.a.postMessage(o,u)};function oS(o){this.c=o,this.b=!1,this.a=[]}function sS(o,u,f,p){var g,_=f||{},b,S,L,B=null;if(o.b)return ht(Error("connection_unavailable"));var be=p?800:50,Xe=typeof MessageChannel<"u"?new MessageChannel:null;return new Me(function(ze,Wt){Xe?(g=Math.floor(Math.random()*Math.pow(10,20)).toString(),Xe.port1.start(),S=setTimeout(function(){Wt(Error("unsupported_event"))},be),b=function(Ui){Ui.data.eventId===g&&(Ui.data.status==="ack"?(clearTimeout(S),L=setTimeout(function(){Wt(Error("timeout"))},3e3)):Ui.data.status==="done"?(clearTimeout(L),typeof Ui.data.response<"u"?ze(Ui.data.response):Wt(Error("unknown_error"))):(clearTimeout(S),clearTimeout(L),Wt(Error("invalid_response"))))},B={messageChannel:Xe,onMessage:b},o.a.push(B),Xe.port1.addEventListener("message",b),o.c.postMessage({eventType:u,eventId:g,data:_},[Xe.port2])):Wt(Error("connection_unavailable"))}).then(function(ze){return dm(o,B),ze}).o(function(ze){throw dm(o,B),ze})}function dm(o,u){if(u){var f=u.messageChannel,p=u.onMessage;f&&(f.port1.removeEventListener("message",p),f.port1.close()),j(o.a,function(g){return g==u})}}oS.prototype.close=function(){for(;0<this.a.length;)dm(this,this.a[0]);this.b=!0};function aS(){if(!gm())throw new R("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=l.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var o=this;Vr()&&self?(this.v=Z2(),rS(this.v,"keyChanged",function(u,f){return lS(o).then(function(p){return 0<p.length&&J(o.a,function(g){g(p)}),{keyProcessed:D(p,f.key)}})}),rS(this.v,"ping",function(){return pe(["keyChanged"])})):pF().then(function(u){(o.h=u)&&(o.g=new oS(new iS(u)),sS(o.g,"ping",null,!0).then(function(f){f[0].fulfilled&&D(f[0].value,"keyChanged")&&(o.s=!0)}).o(function(){}))})}var pm;function eU(o){return new Me(function(u,f){var p=o.m.deleteDatabase("firebaseLocalStorageDb");p.onsuccess=function(){u()},p.onerror=function(g){f(Error(g.target.error))}})}function uS(o){return new Me(function(u,f){var p=o.m.open("firebaseLocalStorageDb",1);p.onerror=function(g){try{g.preventDefault()}catch{}f(Error(g.target.error))},p.onupgradeneeded=function(g){g=g.target.result;try{g.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(_){f(_)}},p.onsuccess=function(g){g=g.target.result,g.objectStoreNames.contains("firebaseLocalStorage")?u(g):eU(o).then(function(){return uS(o)}).then(function(_){u(_)}).o(function(_){f(_)})}})}function vm(o){return o.i||(o.i=uS(o)),o.i}function Ih(o,u){function f(g,_){vm(o).then(u).then(g).o(function(b){if(3<++p)_(b);else return vm(o).then(function(S){return S.close(),o.i=void 0,f(g,_)}).o(function(S){_(S)})})}var p=0;return new Me(f)}function gm(){try{return!!l.indexedDB}catch{return!1}}function Uc(o){return o.objectStore("firebaseLocalStorage")}function jc(o,u){return o.transaction(["firebaseLocalStorage"],u?"readwrite":"readonly")}function Ma(o){return new Me(function(u,f){o.onsuccess=function(p){p&&p.target?u(p.target.result):u()},o.onerror=function(p){f(p.target.error)}})}e=aS.prototype,e.set=function(o,u){var f=this,p=!1;return Ih(this,function(g){return g=Uc(jc(g,!0)),Ma(g.get(o))}).then(function(g){return Ih(f,function(_){if(_=Uc(jc(_,!0)),g)return g.value=u,Ma(_.put(g));f.b++,p=!0;var b={};return b.fbase_key=o,b.value=u,Ma(_.add(b))})}).then(function(){return f.c[o]=u,cS(f,o)}).oa(function(){p&&f.b--})};function cS(o,u){return o.g&&o.h&&dF()===o.h?sS(o.g,"keyChanged",{key:u},o.s).then(function(){}).o(function(){}):pe()}e.get=function(o){return Ih(this,function(u){return Ma(Uc(jc(u,!1)).get(o))}).then(function(u){return u&&u.value})},e.U=function(o){var u=this,f=!1;return Ih(this,function(p){return f=!0,u.b++,Ma(Uc(jc(p,!0)).delete(o))}).then(function(){return delete u.c[o],cS(u,o)}).oa(function(){f&&u.b--})};function lS(o){return vm(o).then(function(u){var f=Uc(jc(u,!1));return f.getAll?Ma(f.getAll()):new Me(function(p,g){var _=[],b=f.openCursor();b.onsuccess=function(S){(S=S.target.result)?(_.push(S.value),S.continue()):p(_)},b.onerror=function(S){g(S.target.error)}})}).then(function(u){var f={},p=[];if(o.b==0){for(p=0;p<u.length;p++)f[u[p].fbase_key]=u[p].value;p=DT(o.c,f),o.c=f}return p})}e.ca=function(o){this.a.length==0&&tU(this),this.a.push(o)},e.ia=function(o){j(this.a,function(u){return u==o}),this.a.length==0&&fS(this)};function tU(o){function u(){o.f=setTimeout(function(){o.l=lS(o).then(function(f){0<f.length&&J(o.a,function(p){p(f)})}).then(function(){u()}).o(function(f){f.message!="STOP_EVENT"&&u()})},800)}fS(o),u()}function fS(o){o.l&&o.l.cancel("STOP_EVENT"),o.f&&(clearTimeout(o.f),o.f=null)}function hS(o){var u=this,f=null;this.a=[],this.type="indexedDB",this.c=o,this.b=pe().then(function(){if(gm()){var p=as(),g="__sak"+p;return pm||(pm=new aS),f=pm,f.set(g,p).then(function(){return f.get(g)}).then(function(_){if(_!==p)throw Error("indexedDB not supported!");return f.U(g)}).then(function(){return f}).o(function(){return u.c})}return u.c}).then(function(p){return u.type=p.type,p.ca(function(g){J(u.a,function(_){_(g)})}),p})}e=hS.prototype,e.get=function(o){return this.b.then(function(u){return u.get(o)})},e.set=function(o,u){return this.b.then(function(f){return f.set(o,u)})},e.U=function(o){return this.b.then(function(u){return u.U(o)})},e.ca=function(o){this.a.push(o)},e.ia=function(o){j(this.a,function(u){return u==o})};function Vc(){this.a={},this.type="inMemory"}e=Vc.prototype,e.get=function(o){return pe(this.a[o])},e.set=function(o,u){return this.a[o]=u,pe()},e.U=function(o){return delete this.a[o],pe()},e.ca=function(){},e.ia=function(){};function Sh(){if(!nU())throw ci()=="Node"?new R("internal-error","The LocalStorage compatibility library was not found."):new R("web-storage-unsupported");this.a=dS()||ue.INTERNAL.node.localStorage,this.type="localStorage"}function dS(){try{var o=l.localStorage,u=as();return o&&(o.setItem(u,"1"),o.removeItem(u)),o}catch{return null}}function nU(){var o=ci()=="Node";if(o=dS()||o&&ue.INTERNAL.node&&ue.INTERNAL.node.localStorage,!o)return!1;try{return o.setItem("__sak","1"),o.removeItem("__sak"),!0}catch{return!1}}e=Sh.prototype,e.get=function(o){var u=this;return pe().then(function(){var f=u.a.getItem(o);return Oa(f)})},e.set=function(o,u){var f=this;return pe().then(function(){var p=bc(u);p===null?f.U(o):f.a.setItem(o,p)})},e.U=function(o){var u=this;return pe().then(function(){u.a.removeItem(o)})},e.ca=function(o){l.window&&Er(l.window,"storage",o)},e.ia=function(o){l.window&&sr(l.window,"storage",o)};function mm(){this.type="nullStorage"}e=mm.prototype,e.get=function(){return pe(null)},e.set=function(){return pe()},e.U=function(){return pe()},e.ca=function(){},e.ia=function(){};function ym(){if(!rU())throw ci()=="Node"?new R("internal-error","The SessionStorage compatibility library was not found."):new R("web-storage-unsupported");this.a=pS()||ue.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function pS(){try{var o=l.sessionStorage,u=as();return o&&(o.setItem(u,"1"),o.removeItem(u)),o}catch{return null}}function rU(){var o=ci()=="Node";if(o=pS()||o&&ue.INTERNAL.node&&ue.INTERNAL.node.sessionStorage,!o)return!1;try{return o.setItem("__sak","1"),o.removeItem("__sak"),!0}catch{return!1}}e=ym.prototype,e.get=function(o){var u=this;return pe().then(function(){var f=u.a.getItem(o);return Oa(f)})},e.set=function(o,u){var f=this;return pe().then(function(){var p=bc(u);p===null?f.U(o):f.a.setItem(o,p)})},e.U=function(o){var u=this;return pe().then(function(){u.a.removeItem(o)})},e.ca=function(){},e.ia=function(){};function iU(){var o={};o.Browser=oU,o.Node=sU,o.ReactNative=aU,o.Worker=uU,this.a=o[ci()]}var _m,oU={F:Sh,cb:ym},sU={F:Sh,cb:ym},aU={F:eS,cb:mm},uU={F:Sh,cb:mm},Fa={rd:"local",NONE:"none",td:"session"};function cU(o){var u=new R("invalid-persistence-type"),f=new R("unsupported-persistence-type");e:{for(p in Fa)if(Fa[p]==o){var p=!0;break e}p=!1}if(!p||typeof o!="string")throw u;switch(ci()){case"ReactNative":if(o==="session")throw f;break;case"Node":if(o!=="none")throw f;break;case"Worker":if(o==="session"||!gm()&&o!=="none")throw f;break;default:if(!_g()&&o!=="none")throw f}}function vS(){var o=!!(!BT(sn())&&mg()),u=wc(),f=_g();this.m=o,this.h=u,this.l=f,this.a={},_m||(_m=new iU),o=_m;try{this.g=!vg()&&HT()||!l.indexedDB?new o.a.F:new hS(Vr()?new Vc:new o.a.F)}catch{this.g=new Vc,this.h=!0}try{this.i=new o.a.cb}catch{this.i=new Vc}this.v=new Vc,this.f=U(this.Zb,this),this.b={}}var wm;function Bc(){return wm||(wm=new vS),wm}function vs(o,u){switch(u){case"session":return o.i;case"none":return o.v;default:return o.g}}function Ua(o,u){return"firebase:"+o.name+(u?":"+u:"")}function lU(o,u,f){var p=Ua(u,f),g=vs(o,u.F);return o.get(u,f).then(function(_){var b=null;try{b=Oa(l.localStorage.getItem(p))}catch{}if(b&&!_)return l.localStorage.removeItem(p),o.set(u,b,f);b&&_&&g.type!="localStorage"&&l.localStorage.removeItem(p)})}e=vS.prototype,e.get=function(o,u){return vs(this,o.F).get(Ua(o,u))};function ja(o,u,f){return f=Ua(u,f),u.F=="local"&&(o.b[f]=null),vs(o,u.F).U(f)}e.set=function(o,u,f){var p=Ua(o,f),g=this,_=vs(this,o.F);return _.set(p,u).then(function(){return _.get(p)}).then(function(b){o.F=="local"&&(g.b[p]=b)})},e.addListener=function(o,u,f){o=Ua(o,u),this.l&&(this.b[o]=l.localStorage.getItem(o)),si(this.a)&&(vs(this,"local").ca(this.f),this.h||(vg()||!HT())&&l.indexedDB||!this.l||fU(this)),this.a[o]||(this.a[o]=[]),this.a[o].push(f)},e.removeListener=function(o,u,f){o=Ua(o,u),this.a[o]&&(j(this.a[o],function(p){return p==f}),this.a[o].length==0&&delete this.a[o]),si(this.a)&&(vs(this,"local").ia(this.f),bm(this))};function fU(o){bm(o),o.c=setInterval(function(){for(var u in o.a){var f=l.localStorage.getItem(u),p=o.b[u];f!=p&&(o.b[u]=f,f=new ns({type:"storage",key:u,target:window,oldValue:p,newValue:f,a:!0}),o.Zb(f))}},1e3)}function bm(o){o.c&&(clearInterval(o.c),o.c=null)}e.Zb=function(o){if(o&&o.g){var u=o.a.key;if(u==null)for(var f in this.a){var p=this.b[f];typeof p>"u"&&(p=null);var g=l.localStorage.getItem(f);g!==p&&(this.b[f]=g,this.nb(f))}else if(u.indexOf("firebase:")==0&&this.a[u]){if(typeof o.a.a<"u"?vs(this,"local").ia(this.f):bm(this),this.m){if(f=l.localStorage.getItem(u),p=o.a.newValue,p!==f)p!==null?l.localStorage.setItem(u,p):l.localStorage.removeItem(u);else if(this.b[u]===p&&typeof o.a.a>"u")return}var _=this;f=function(){(typeof o.a.a<"u"||_.b[u]!==l.localStorage.getItem(u))&&(_.b[u]=l.localStorage.getItem(u),_.nb(u))},jr&&ao&&ao==10&&l.localStorage.getItem(u)!==o.a.newValue&&o.a.newValue!==o.a.oldValue?setTimeout(f,10):f()}}else J(o,U(this.nb,this))},e.nb=function(o){this.a[o]&&J(this.a[o],function(u){u()})};function hU(o){this.a=o,this.b=Bc()}var Em={name:"authEvent",F:"local"};function dU(o){return o.b.get(Em,o.a).then(function(u){return EI(u)})}function pU(){this.a=Bc()}function vU(){this.b=-1}function Ch(o,u){this.b=gS,this.f=l.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=o,this.h=u,this.l=l.Int32Array?new Int32Array(64):Array(64),Ah===void 0&&(l.Int32Array?Ah=new Int32Array(_S):Ah=_S),this.reset()}var Ah;F(Ch,vU);for(var gS=64,gU=gS-1,mS=[],Tm=0;Tm<gU;Tm++)mS[Tm]=0;var yS=Q(128,mS);Ch.prototype.reset=function(){this.g=this.c=0,this.a=l.Int32Array?new Int32Array(this.h):Z(this.h)};function Im(o){for(var u=o.f,f=o.l,p=0,g=0;g<u.length;)f[p++]=u[g]<<24|u[g+1]<<16|u[g+2]<<8|u[g+3],g=4*p;for(u=16;64>u;u++){g=f[u-15]|0,p=f[u-2]|0;var _=(f[u-16]|0)+((g>>>7|g<<25)^(g>>>18|g<<14)^g>>>3)|0,b=(f[u-7]|0)+((p>>>17|p<<15)^(p>>>19|p<<13)^p>>>10)|0;f[u]=_+b|0}p=o.a[0]|0,g=o.a[1]|0;var S=o.a[2]|0,L=o.a[3]|0,B=o.a[4]|0,be=o.a[5]|0,Xe=o.a[6]|0;for(_=o.a[7]|0,u=0;64>u;u++){var ze=((p>>>2|p<<30)^(p>>>13|p<<19)^(p>>>22|p<<10))+(p&g^p&S^g&S)|0;b=B&be^~B&Xe,_=_+((B>>>6|B<<26)^(B>>>11|B<<21)^(B>>>25|B<<7))|0,b=b+(Ah[u]|0)|0,b=_+(b+(f[u]|0)|0)|0,_=Xe,Xe=be,be=B,B=L+b|0,L=S,S=g,g=p,p=b+ze|0}o.a[0]=o.a[0]+p|0,o.a[1]=o.a[1]+g|0,o.a[2]=o.a[2]+S|0,o.a[3]=o.a[3]+L|0,o.a[4]=o.a[4]+B|0,o.a[5]=o.a[5]+be|0,o.a[6]=o.a[6]+Xe|0,o.a[7]=o.a[7]+_|0}function Sm(o,u,f){f===void 0&&(f=u.length);var p=0,g=o.c;if(typeof u=="string")for(;p<f;)o.f[g++]=u.charCodeAt(p++),g==o.b&&(Im(o),g=0);else if(w(u))for(;p<f;){var _=u[p++];if(!(typeof _=="number"&&0<=_&&255>=_&&_==(_|0)))throw Error("message must be a byte array");o.f[g++]=_,g==o.b&&(Im(o),g=0)}else throw Error("message must be string or array");o.c=g,o.g+=f}var _S=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function wS(){Ch.call(this,8,mU)}F(wS,Ch);var mU=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function bS(o,u,f,p,g,_){this.v=o,this.i=u,this.l=f,this.m=p||null,this.u=g||null,this.s=_,this.h=u+":"+f,this.C=new pU,this.g=new hU(this.h),this.f=null,this.b=[],this.a=this.c=null}function kh(o){return new R("invalid-cordova-configuration",o)}e=bS.prototype,e.ma=function(){return this.Ia?this.Ia:this.Ia=lF().then(function(){if(typeof dt("universalLinks.subscribe",l)!="function")throw kh("cordova-universal-links-plugin-fix is not installed");if(typeof dt("BuildInfo.packageName",l)>"u")throw kh("cordova-plugin-buildinfo is not installed");if(typeof dt("cordova.plugins.browsertab.openUrl",l)!="function")throw kh("cordova-plugin-browsertab is not installed");if(typeof dt("cordova.InAppBrowser.open",l)!="function")throw kh("cordova-plugin-inappbrowser is not installed")},function(){throw new R("cordova-not-ready")})};function yU(){for(var o=20,u=[];0<o;)u.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),o--;return u.join("")}function _U(o){var u=new wS;Sm(u,o),o=[];var f=8*u.g;56>u.c?Sm(u,yS,56-u.c):Sm(u,yS,u.b-(u.c-56));for(var p=63;56<=p;p--)u.f[p]=f&255,f/=256;for(Im(u),p=f=0;p<u.i;p++)for(var g=24;0<=g;g-=8)o[f++]=u.a[p]>>g&255;return NF(o)}e.Pb=function(o,u){return u(new R("operation-not-supported-in-this-environment")),pe()},e.Nb=function(){return ht(new R("operation-not-supported-in-this-environment"))},e.ac=function(){return!1},e.Yb=function(){return!0},e.Ub=function(){return!0},e.Ob=function(o,u,f,p){if(this.c)return ht(new R("redirect-operation-pending"));var g=this,_=l.document,b=null,S=null,L=null,B=null;return this.c=pe().then(function(){return Bg(u),TS(g)}).then(function(){return wU(g,o,u,f,p)}).then(function(){return new Me(function(be,Xe){S=function(){var ze=dt("cordova.plugins.browsertab.close",l);return be(),typeof ze=="function"&&ze(),g.a&&typeof g.a.close=="function"&&(g.a.close(),g.a=null),!1},g.Ea(S),L=function(){b||(b=Ca(2e3).then(function(){Xe(new R("redirect-cancelled-by-user"))}))},B=function(){wg()&&L()},_.addEventListener("resume",L,!1),sn().toLowerCase().match(/android/)||_.addEventListener("visibilitychange",B,!1)}).o(function(be){return Cm(g).then(function(){throw be})})}).oa(function(){L&&_.removeEventListener("resume",L,!1),B&&_.removeEventListener("visibilitychange",B,!1),b&&b.cancel(),S&&g.Ta(S),g.c=null})};function wU(o,u,f,p,g){var _=yU(),b=new Br(u,p,null,_,new R("no-auth-event"),null,g),S=dt("BuildInfo.packageName",l);if(typeof S!="string")throw new R("invalid-cordova-configuration");var L=dt("BuildInfo.displayName",l),B={};if(sn().toLowerCase().match(/iphone|ipad|ipod/))B.ibi=S;else if(sn().toLowerCase().match(/android/))B.apn=S;else return ht(new R("operation-not-supported-in-this-environment"));L&&(B.appDisplayName=L),_=_U(_),B.sessionId=_;var be=Fc(o.v,o.i,o.l,u,f,null,p,o.m,B,o.u,g,o.s);return o.ma().then(function(){var Xe=o.h;return o.C.a.set(Em,b.w(),Xe)}).then(function(){var Xe=dt("cordova.plugins.browsertab.isAvailable",l);if(typeof Xe!="function")throw new R("invalid-cordova-configuration");var ze=null;Xe(function(Wt){if(Wt){if(ze=dt("cordova.plugins.browsertab.openUrl",l),typeof ze!="function")throw new R("invalid-cordova-configuration");ze(be)}else{if(ze=dt("cordova.InAppBrowser.open",l),typeof ze!="function")throw new R("invalid-cordova-configuration");Wt=sn(),o.a=ze(be,Wt.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||Wt.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}function ES(o,u){for(var f=0;f<o.b.length;f++)try{o.b[f](u)}catch{}}function TS(o){return o.f||(o.f=o.ma().then(function(){return new Me(function(u){function f(p){return u(p),o.Ta(f),!1}o.Ea(f),bU(o)})})),o.f}function Cm(o){var u=null;return dU(o.g).then(function(f){return u=f,f=o.g,ja(f.b,Em,f.a)}).then(function(){return u})}function bU(o){function u(b){p=!0,g&&g.cancel(),Cm(o).then(function(S){var L=f;if(S&&b&&b.url){var B=null;L=pI(b.url),L.indexOf("/__/auth/callback")!=-1&&(B=Xn(L),B=Oa(Tr(B,"firebaseError")||null),B=(B=typeof B=="object"?tt(B):null)?new Br(S.c,S.b,null,null,B,null,S.T()):new Br(S.c,S.b,L,S.f,null,null,S.T())),L=B||f}ES(o,L)})}var f=new Br("unknown",null,null,null,new R("no-auth-event")),p=!1,g=Ca(500).then(function(){return Cm(o).then(function(){p||ES(o,f)})}),_=l.handleOpenURL;l.handleOpenURL=function(b){if(b.toLowerCase().indexOf(dt("BuildInfo.packageName",l).toLowerCase()+"://")==0&&u({url:b}),typeof _=="function")try{_(b)}catch(S){console.error(S)}},qg||(qg=new UF),jF(u)}e.Ea=function(o){this.b.push(o),TS(this).o(function(u){u.code==="auth/invalid-cordova-configuration"&&(u=new Br("unknown",null,null,null,new R("no-auth-event")),o(u))})},e.Ta=function(o){j(this.b,function(u){return u==o})};function EU(o){this.a=o,this.b=Bc()}var Am={name:"pendingRedirect",F:"session"};function TU(o){return o.b.set(Am,"pending",o.a)}function km(o){return ja(o.b,Am,o.a)}function IU(o){return o.b.get(Am,o.a).then(function(u){return u=="pending"})}function Rh(o,u,f,p){this.i={},this.u=0,this.D=o,this.v=u,this.m=f,this.J=p,this.h=[],this.f=!1,this.l=U(this.s,this),this.b=new Ph,this.C=new xS,this.g=new EU(NS(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=IS(this.D,this.v,this.m,ot,this.J)}function IS(o,u,f,p,g){var _=ue.SDK_VERSION||null;return gg()?new bS(o,u,f,_,p,g):new YI(o,u,f,_,p,g)}Rh.prototype.reset=function(){this.f=!1,this.a.Ta(this.l),this.a=IS(this.D,this.v,this.m,null,this.J),this.i={}};function SS(o){o.f||(o.f=!0,o.a.Ea(o.l));var u=o.a;return o.a.ma().o(function(f){throw o.a==u&&o.reset(),f})}function CS(o){o.a.Yb()&&SS(o).o(function(u){var f=new Br("unknown",null,null,null,new R("operation-not-supported-in-this-environment"));Nm(u)&&o.s(f)}),o.a.Ub()||PS(o.b)}function Nh(o,u){D(o.h,u)||o.h.push(u),o.f||IU(o.g).then(function(f){f?km(o.g).then(function(){SS(o).o(function(p){var g=new Br("unknown",null,null,null,new R("operation-not-supported-in-this-environment"));Nm(p)&&o.s(g)})}):CS(o)}).o(function(){CS(o)})}function Rm(o,u){j(o.h,function(f){return f==u})}Rh.prototype.s=function(o){if(!o)throw new R("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),o&&o.getUid()&&this.i.hasOwnProperty(o.getUid()))return!1;for(var u=!1,f=0;f<this.h.length;f++){var p=this.h[f];if(p.Gb(o.c,o.b)){(u=this.c[o.c])&&(u.h(o,p),o&&(o.f||o.b)&&(this.i[o.getUid()]=!0,this.u=Date.now())),u=!0;break}}return PS(this.b),u};var SU=new lo(2e3,1e4),CU=new lo(3e4,6e4);Rh.prototype.ra=function(){return this.b.ra()};function AS(o,u,f,p,g,_,b){return o.a.Nb(u,f,p,function(){o.f||(o.f=!0,o.a.Ea(o.l))},function(){o.reset()},g,_,b)}function Nm(o){return!!(o&&o.code=="auth/cordova-not-ready")}function kS(o,u,f,p,g){var _;return TU(o.g).then(function(){return o.a.Ob(u,f,p,g).o(function(b){if(Nm(b))throw new R("operation-not-supported-in-this-environment");return _=b,km(o.g).then(function(){throw _})}).then(function(){return o.a.ac()?new Me(function(){}):km(o.g).then(function(){return o.ra()}).then(function(){}).o(function(){})})})}function RS(o,u,f,p,g){return o.a.Pb(p,function(_){u.na(f,null,_,g)},SU.get())}var Pm={};function NS(o,u,f){return o=o+":"+u,f&&(o=o+":"+f.url),o}function Om(o,u,f,p){var g=NS(u,f,p);return Pm[g]||(Pm[g]=new Rh(o,u,f,p)),Pm[g]}function Ph(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}Ph.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Ph.prototype.h=function(o,u){if(o){this.reset(),this.g=!0;var f=o.c,p=o.b,g=o.a&&o.a.code=="auth/web-storage-unsupported",_=o.a&&o.a.code=="auth/operation-not-supported-in-this-environment";this.i=!(!g&&!_),f!="unknown"||g||_?o.a?(gs(this,!0,null,o.a),pe()):u.Fa(f,p)?AU(this,o,u):ht(new R("invalid-auth-event")):(gs(this,!1,null,null),pe())}else ht(new R("invalid-auth-event"))};function PS(o){o.g||(o.g=!0,gs(o,!1,null,null))}function Oh(o){o.g&&!o.i&&gs(o,!1,null,null)}function AU(o,u,f){f=f.Fa(u.c,u.b);var p=u.g,g=u.f,_=u.i,b=u.T(),S=!!u.c.match(/Redirect$/);f(p,g,b,_).then(function(L){gs(o,S,L,null)}).o(function(L){gs(o,S,null,L)})}function kU(o,u){if(o.b=function(){return ht(u)},o.c.length)for(var f=0;f<o.c.length;f++)o.c[f](u)}function OS(o,u){if(o.b=function(){return pe(u)},o.f.length)for(var f=0;f<o.f.length;f++)o.f[f](u)}function gs(o,u,f,p){u?p?kU(o,p):OS(o,f):OS(o,{user:null}),o.f=[],o.c=[]}Ph.prototype.ra=function(){var o=this;return new Me(function(u,f){o.b?o.b().then(u,f):(o.f.push(u),o.c.push(f),RU(o))})};function RU(o){var u=new R("timeout");o.a&&o.a.cancel(),o.a=Ca(CU.get()).then(function(){o.b||(o.g=!0,gs(o,!0,null,u))})}function xS(){}xS.prototype.h=function(o,u){if(o){var f=o.c,p=o.b;o.a?(u.na(o.c,null,o.a,o.b),pe()):u.Fa(f,p)?NU(o,u):ht(new R("invalid-auth-event"))}else ht(new R("invalid-auth-event"))};function NU(o,u){var f=o.b,p=o.c;u.Fa(p,f)(o.g,o.f,o.T(),o.i).then(function(g){u.na(p,g,null,f)}).o(function(g){u.na(p,null,g,f)})}function DS(){this.jb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.jb},set:function(o){this.jb=o},enumerable:!1})}function xm(o,u){this.a=u,ae(this,"verificationId",o)}xm.prototype.confirm=function(o){return o=bI(this.verificationId,o),this.a(o)};function Dm(o,u,f,p){return new Mi(o).gb(u,f).then(function(g){return new xm(g,p)})}function PU(o){var u=sI(o);if(!(u&&u.exp&&u.auth_time&&u.iat))throw new R("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Ln(this,{token:o,expirationTime:Ec(1e3*u.exp),authTime:Ec(1e3*u.auth_time),issuedAtTime:Ec(1e3*u.iat),signInProvider:u.firebase&&u.firebase.sign_in_provider?u.firebase.sign_in_provider:null,signInSecondFactor:u.firebase&&u.firebase.sign_in_second_factor?u.firebase.sign_in_second_factor:null,claims:u})}function Lm(o,u,f){var p=u&&u[MS];if(!p)throw new R("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=o,this.f=Et(u),this.g=f,this.c=new ah(null,p),this.b=[];var g=this;J(u[LS]||[],function(_){(_=Cg(_))&&g.b.push(_)}),ae(this,"auth",this.a),ae(this,"session",this.c),ae(this,"hints",this.b)}var LS="mfaInfo",MS="mfaPendingCredential";Lm.prototype.Rc=function(o){var u=this;return o.tb(this.a.a,this.c).then(function(f){var p=Et(u.f);return delete p[LS],delete p[MS],on(p,f),u.g(p)})};function Mm(o,u,f,p){R.call(this,"multi-factor-auth-required",p,u),this.b=new Lm(o,u,f),ae(this,"resolver",this.b)}F(Mm,R);function FS(o,u,f){if(o&&T(o.serverResponse)&&o.code==="auth/multi-factor-auth-required")try{return new Mm(u,o.serverResponse,f,o.message)}catch{}return null}function US(){}US.prototype.tb=function(o,u,f){return u.type==Cc?OU(this,o,u,f):xU(this,o,u)};function OU(o,u,f,p){return f.Ha().then(function(g){return g={idToken:g},typeof p<"u"&&(g.displayName=p),on(g,{phoneVerificationInfo:Ac(o.a)}),Fe(u,b2,g)})}function xU(o,u,f){return f.Ha().then(function(p){return p={mfaPendingCredential:p},on(p,{phoneVerificationInfo:Ac(o.a)}),Fe(u,E2,p)})}function Fm(o){ae(this,"factorId",o.fa),this.a=o}F(Fm,US);function jS(o){if(Fm.call(this,o),this.a.fa!=Mi.PROVIDER_ID)throw new R("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}F(jS,Fm);function Va(o,u){Yn.call(this,o);for(var f in u)this[f]=u[f]}F(Va,Yn);function Um(o,u){this.a=o,this.b=[],this.c=U(this.yc,this),Er(this.a,"userReloaded",this.c);var f=[];u&&u.multiFactor&&u.multiFactor.enrolledFactors&&J(u.multiFactor.enrolledFactors,function(p){var g=null,_={};if(p){p.uid&&(_[kg]=p.uid),p.displayName&&(_[zT]=p.displayName),p.enrollmentTime&&(_[Ag]=new Date(p.enrollmentTime).toISOString()),p.phoneNumber&&(_[Rg]=p.phoneNumber);try{g=new Tc(_)}catch{}p=g}else p=null;p&&f.push(p)}),xh(this,f)}function DU(o){var u=[];return J(o.mfaInfo||[],function(f){(f=Cg(f))&&u.push(f)}),u}e=Um.prototype,e.yc=function(o){xh(this,DU(o.hd))};function xh(o,u){o.b=u,ae(o,"enrolledFactors",u)}e.Sb=function(){return this.a.I().then(function(o){return new ah(o,null)})},e.fc=function(o,u){var f=this,p=this.a.a;return this.Sb().then(function(g){return o.tb(p,g,u)}).then(function(g){return hi(f.a,g),f.a.reload()})},e.bd=function(o){var u=this,f=typeof o=="string"?o:o.uid,p=this.a.a;return this.a.I().then(function(g){return Fe(p,q2,{idToken:g,mfaEnrollmentId:f})}).then(function(g){var _=at(u.b,function(b){return b.uid!=f});return xh(u,_),hi(u.a,g),u.a.reload().o(function(b){if(b.code!="auth/user-token-expired")throw b})})},e.w=function(){return{multiFactor:{enrolledFactors:Ie(this.b,function(o){return o.w()})}}};function jm(o,u,f){if(this.h=o,this.i=u,this.g=f,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}jm.prototype.start=function(){this.a=this.c,Vm(this,!0)};function LU(o,u){return u?(o.a=o.c,o.g()):(u=o.a,o.a*=2,o.a>o.f&&(o.a=o.f),u)}function Vm(o,u){o.stop(),o.b=Ca(LU(o,u)).then(function(){return hF()}).then(function(){return o.h()}).then(function(){Vm(o,!0)}).o(function(f){o.i(f)&&Vm(o,!1)})}jm.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)};function Bm(o){this.f=o,this.b=this.a=null,this.c=Date.now()}Bm.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}};function VS(o,u){typeof u>"u"&&(o.b?(u=o.b,u=u.a-u.g):u=0),o.c=Date.now()+1e3*u}function BS(o,u){o.b=oh(u[Hr]||""),o.a=u.refreshToken,u=u.expiresIn,VS(o,typeof u<"u"?Number(u):void 0)}function MU(o,u){o.b=u.b,o.a=u.a,o.c=u.c}function FU(o,u){return o2(o.f,u).then(function(f){return o.b=oh(f.access_token),o.a=f.refresh_token,VS(o,f.expires_in),{accessToken:o.b.toString(),refreshToken:o.a}}).o(function(f){throw f.code=="auth/user-token-expired"&&(o.a=null),f})}Bm.prototype.getToken=function(o){return o=!!o,this.b&&!this.a?ht(new R("user-token-expired")):o||!this.b||Date.now()>this.c-3e4?this.a?FU(this,{grant_type:"refresh_token",refresh_token:this.a}):pe(null):pe({accessToken:this.b.toString(),refreshToken:this.a})};function Dh(o,u){this.a=o||null,this.b=u||null,Ln(this,{lastSignInTime:Ec(u||null),creationTime:Ec(o||null)})}function UU(o){return new Dh(o.a,o.b)}Dh.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}};function jU(o,u,f,p,g,_){Ln(this,{uid:o,displayName:p||null,photoURL:g||null,email:f||null,phoneNumber:_||null,providerId:u})}function ur(o,u,f){this.N=[],this.l=o.apiKey,this.m=o.appName,this.s=o.authDomain||null;var p=ue.SDK_VERSION?Na(ue.SDK_VERSION):null;this.a=new qr(this.l,ft(ot),p),(this.u=o.emulatorConfig||null)&&Eh(this.a,this.u),this.h=new Bm(this.a),Gm(this,u[Hr]),BS(this.h,u),ae(this,"refreshToken",this.h.a),HS(this,f||{}),Dn.call(this),this.P=!1,this.s&&ss()&&(this.b=Om(this.s,this.l,this.m,this.u)),this.W=[],this.i=null,this.D=VU(this),this.ba=U(this.ib,this);var g=this;this.za=null,this.Pa=function(_){g.xa(_.h)},this.qa=null,this.Ba=function(_){qm(g,_.c)},this.$=null,this.aa=[],this.Oa=function(_){qc(g,_.f)},this.ja=null,this.S=new Um(this,f),ae(this,"multiFactor",this.S)}F(ur,Dn),ur.prototype.xa=function(o){this.za=o,FI(this.a,o)};function qm(o,u){o.u=u,Eh(o.a,u),o.b&&(u=o.b,o.b=Om(o.s,o.l,o.m,o.u),o.P&&(Rm(u,o),Nh(o.b,o)))}ur.prototype.la=function(){return this.za};function Hm(o,u){o.qa&&sr(o.qa,"languageCodeChanged",o.Pa),(o.qa=u)&&Er(u,"languageCodeChanged",o.Pa)}function Km(o,u){o.$&&sr(o.$,"emulatorConfigChanged",o.Ba),(o.$=u)&&Er(u,"emulatorConfigChanged",o.Ba)}function qc(o,u){o.aa=u,UI(o.a,ue.SDK_VERSION?Na(ue.SDK_VERSION,o.aa):null)}ur.prototype.Ga=function(){return Z(this.aa)};function zm(o,u){o.ja&&sr(o.ja,"frameworkChanged",o.Oa),(o.ja=u)&&Er(u,"frameworkChanged",o.Oa)}ur.prototype.ib=function(){this.D.b&&(this.D.stop(),this.D.start())};function Wm(o){try{return ue.app(o.m).auth()}catch{throw new R("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+o.m+"'!")}}function VU(o){return new jm(function(){return o.I(!0)},function(u){return!!(u&&u.code=="auth/network-request-failed")},function(){var u=o.h.c-Date.now()-3e5;return 0<u?u:0})}function qS(o){o.J||o.D.b||(o.D.start(),sr(o,"tokenChanged",o.ba),Er(o,"tokenChanged",o.ba))}function $m(o){sr(o,"tokenChanged",o.ba),o.D.stop()}function Gm(o,u){o.Aa=u,ae(o,"_lat",u)}function BU(o,u){j(o.W,function(f){return f==u})}function ms(o){for(var u=[],f=0;f<o.W.length;f++)u.push(o.W[f](o));return sT(u).then(function(){return o})}function Hc(o){o.b&&!o.P&&(o.P=!0,Nh(o.b,o))}function HS(o,u){Ln(o,{uid:u.uid,displayName:u.displayName||null,photoURL:u.photoURL||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,isAnonymous:u.isAnonymous||!1,tenantId:u.tenantId||null,metadata:new Dh(u.createdAt,u.lastLoginAt),providerData:[]}),o.a.b=o.tenantId}ae(ur.prototype,"providerId","firebase");function KS(){}function Qm(o){return pe().then(function(){if(o.J)throw new R("app-deleted")})}function Ym(o){return Ie(o.providerData,function(u){return u.providerId})}function Xm(o,u){u&&(zS(o,u.providerId),o.providerData.push(u))}function zS(o,u){j(o.providerData,function(f){return f.providerId==u})}function po(o,u,f){(u!="uid"||f)&&o.hasOwnProperty(u)&&ae(o,u,f)}function Lh(o,u){o!=u&&(Ln(o,{uid:u.uid,displayName:u.displayName,photoURL:u.photoURL,email:u.email,emailVerified:u.emailVerified,phoneNumber:u.phoneNumber,isAnonymous:u.isAnonymous,tenantId:u.tenantId,providerData:[]}),u.metadata?ae(o,"metadata",UU(u.metadata)):ae(o,"metadata",new Dh),J(u.providerData,function(f){Xm(o,f)}),MU(o.h,u.h),ae(o,"refreshToken",o.h.a),xh(o.S,u.S.b))}e=ur.prototype,e.reload=function(){var o=this;return Ut(this,Qm(this).then(function(){return Jm(o).then(function(){return ms(o)}).then(KS)}))};function Jm(o){return o.I().then(function(u){var f=o.isAnonymous;return qU(o,u).then(function(){return f||po(o,"isAnonymous",!1),u})})}e.oc=function(o){return this.I(o).then(function(u){return new PU(u)})},e.I=function(o){var u=this;return Ut(this,Qm(this).then(function(){return u.h.getToken(o)}).then(function(f){if(!f)throw new R("internal-error");return f.accessToken!=u.Aa&&(Gm(u,f.accessToken),u.dispatchEvent(new Va("tokenChanged"))),po(u,"refreshToken",f.refreshToken),f.accessToken}))};function hi(o,u){u[Hr]&&o.Aa!=u[Hr]&&(BS(o.h,u),o.dispatchEvent(new Va("tokenChanged")),Gm(o,u[Hr]),po(o,"refreshToken",o.h.a))}function qU(o,u){return Fe(o.a,T2,{idToken:u}).then(U(o.Kc,o))}e.Kc=function(o){if(o=o.users,!o||!o.length)throw new R("internal-error");o=o[0],HS(this,{uid:o.localId,displayName:o.displayName,photoURL:o.photoUrl,email:o.email,emailVerified:!!o.emailVerified,phoneNumber:o.phoneNumber,lastLoginAt:o.lastLoginAt,createdAt:o.createdAt,tenantId:o.tenantId});for(var u=HU(o),f=0;f<u.length;f++)Xm(this,u[f]);po(this,"isAnonymous",!(this.email&&o.passwordHash)&&!(this.providerData&&this.providerData.length)),this.dispatchEvent(new Va("userReloaded",{hd:o}))};function HU(o){return(o=o.providerUserInfo)&&o.length?Ie(o,function(u){return new jU(u.rawId,u.providerId,u.email,u.displayName,u.photoUrl,u.phoneNumber)}):[]}e.Lc=function(o){return bg("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.ub(o)},e.ub=function(o){var u=this,f=null;return Ut(this,o.c(this.a,this.uid).then(function(p){return hi(u,p),f=Kc(u,p,"reauthenticate"),u.i=null,u.reload()}).then(function(){return f}),!0)};function Mh(o,u){return Jm(o).then(function(){if(D(Ym(o),u))return ms(o).then(function(){throw new R("provider-already-linked")})})}e.Cc=function(o){return bg("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.rb(o)},e.rb=function(o){var u=this,f=null;return Ut(this,Mh(this,o.providerId).then(function(){return u.I()}).then(function(p){return o.b(u.a,p)}).then(function(p){return f=Kc(u,p,"link"),WS(u,p)}).then(function(){return f}))},e.Dc=function(o,u){var f=this;return Ut(this,Mh(this,"phone").then(function(){return Dm(Wm(f),o,u,U(f.rb,f))}))},e.Mc=function(o,u){var f=this;return Ut(this,pe().then(function(){return Dm(Wm(f),o,u,U(f.ub,f))}),!0)};function Kc(o,u,f){var p=Vg(u);return u=uI(u),li({user:o,credential:p,additionalUserInfo:u,operationType:f})}function WS(o,u){return hi(o,u),o.reload().then(function(){return o})}e.Cb=function(o){var u=this;return Ut(this,this.I().then(function(f){return u.a.Cb(f,o)}).then(function(f){return hi(u,f),u.reload()}))},e.ed=function(o){var u=this;return Ut(this,this.I().then(function(f){return o.b(u.a,f)}).then(function(f){return hi(u,f),u.reload()}))},e.Db=function(o){var u=this;return Ut(this,this.I().then(function(f){return u.a.Db(f,o)}).then(function(f){return hi(u,f),u.reload()}))},e.Eb=function(o){if(o.displayName===void 0&&o.photoURL===void 0)return Qm(this);var u=this;return Ut(this,this.I().then(function(f){return u.a.Eb(f,{displayName:o.displayName,photoUrl:o.photoURL})}).then(function(f){return hi(u,f),po(u,"displayName",f.displayName||null),po(u,"photoURL",f.photoUrl||null),J(u.providerData,function(p){p.providerId==="password"&&(ae(p,"displayName",u.displayName),ae(p,"photoURL",u.photoURL))}),ms(u)}).then(KS))},e.cd=function(o){var u=this;return Ut(this,Jm(this).then(function(f){return D(Ym(u),o)?h2(u.a,f,[o]).then(function(p){var g={};return J(p.providerUserInfo||[],function(_){g[_.providerId]=!0}),J(Ym(u),function(_){g[_]||zS(u,_)}),g[Mi.PROVIDER_ID]||ae(u,"phoneNumber",null),ms(u)}):ms(u).then(function(){throw new R("no-such-provider")})}))},e.delete=function(){var o=this;return Ut(this,this.I().then(function(u){return Fe(o.a,m2,{idToken:u})}).then(function(){o.dispatchEvent(new Va("userDeleted"))})).then(function(){for(var u=0;u<o.N.length;u++)o.N[u].cancel("app-deleted");Hm(o,null),Km(o,null),zm(o,null),o.N=[],o.J=!0,$m(o),ae(o,"refreshToken",null),o.b&&Rm(o.b,o)})},e.Gb=function(o,u){return!!(o=="linkViaPopup"&&(this.g||null)==u&&this.f||o=="reauthViaPopup"&&(this.g||null)==u&&this.f||o=="linkViaRedirect"&&(this.ga||null)==u||o=="reauthViaRedirect"&&(this.ga||null)==u)},e.na=function(o,u,f,p){o!="linkViaPopup"&&o!="reauthViaPopup"||p!=(this.g||null)||(f&&this.C?this.C(f):u&&!f&&this.f&&this.f(u),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},e.Fa=function(o,u){return o=="linkViaPopup"&&u==(this.g||null)?U(this.Lb,this):o=="reauthViaPopup"&&u==(this.g||null)?U(this.Mb,this):o=="linkViaRedirect"&&(this.ga||null)==u?U(this.Lb,this):o=="reauthViaRedirect"&&(this.ga||null)==u?U(this.Mb,this):null},e.Ec=function(o){var u=this;return $S(this,"linkViaPopup",o,function(){return Mh(u,o.providerId).then(function(){return ms(u)})},!1)},e.Nc=function(o){return $S(this,"reauthViaPopup",o,function(){return pe()},!0)};function $S(o,u,f,p,g){if(!ss())return ht(new R("operation-not-supported-in-this-environment"));if(o.i&&!g)return ht(o.i);var _=Dg(f.providerId),b=as(o.uid+":::"),S=null;(!wc()||mg())&&o.s&&f.isOAuthProvider&&(S=Fc(o.s,o.l,o.m,u,f,null,b,ue.SDK_VERSION||null,null,null,o.tenantId,o.u));var L=MT(S,_&&_.va,_&&_.ua);return p=p().then(function(){if(QS(o),!g)return o.I().then(function(){})}).then(function(){return AS(o.b,L,u,f,b,!!S,o.tenantId)}).then(function(){return new Me(function(B,be){o.na(u,null,new R("cancelled-popup-request"),o.g||null),o.f=B,o.C=be,o.g=b,o.c=RS(o.b,o,u,L,b)})}).then(function(B){return L&&os(L),B?li(B):null}).o(function(B){throw L&&os(L),B}),Ut(o,p,g)}e.Fc=function(o){var u=this;return GS(this,"linkViaRedirect",o,function(){return Mh(u,o.providerId)},!1)},e.Oc=function(o){return GS(this,"reauthViaRedirect",o,function(){return pe()},!0)};function GS(o,u,f,p,g){if(!ss())return ht(new R("operation-not-supported-in-this-environment"));if(o.i&&!g)return ht(o.i);var _=null,b=as(o.uid+":::");return p=p().then(function(){if(QS(o),!g)return o.I().then(function(){})}).then(function(){return o.ga=b,ms(o)}).then(function(S){return o.ha&&(S=o.ha,S=S.b.set(Zm,o.w(),S.a)),S}).then(function(){return kS(o.b,u,f,b,o.tenantId)}).o(function(S){if(_=S,o.ha)return XS(o.ha);throw _}).then(function(){if(_)throw _}),Ut(o,p,g)}function QS(o){if(!o.b||!o.P)throw o.b&&!o.P?new R("internal-error"):new R("auth-domain-config-required")}e.Lb=function(o,u,f,p){var g=this;this.c&&(this.c.cancel(),this.c=null);var _=null;return f=this.I().then(function(b){return am(g.a,{requestUri:o,postBody:p,sessionId:u,idToken:b})}).then(function(b){return _=Kc(g,b,"link"),WS(g,b)}).then(function(){return _}),Ut(this,f)},e.Mb=function(o,u,f,p){var g=this;this.c&&(this.c.cancel(),this.c=null);var _=null,b=pe().then(function(){return Da(um(g.a,{requestUri:o,sessionId:u,postBody:p,tenantId:f}),g.uid)}).then(function(S){return _=Kc(g,S,"reauthenticate"),hi(g,S),g.i=null,g.reload()}).then(function(){return _});return Ut(this,b,!0)},e.vb=function(o){var u=this,f=null;return Ut(this,this.I().then(function(p){return f=p,typeof o>"u"||si(o)?{}:rh(new nh(o))}).then(function(p){return u.a.vb(f,p)}).then(function(p){if(u.email!=p)return u.reload()}).then(function(){}))},e.Fb=function(o,u){var f=this,p=null;return Ut(this,this.I().then(function(g){return p=g,typeof u>"u"||si(u)?{}:rh(new nh(u))}).then(function(g){return f.a.Fb(p,o,g)}).then(function(g){if(f.email!=g)return f.reload()}).then(function(){}))};function Ut(o,u,f){var p=KU(o,u,f);return o.N.push(p),p.oa(function(){M(o.N,p)}),p.o(function(g){var _=null;throw g&&g.code==="auth/multi-factor-auth-required"&&(_=FS(g.w(),Wm(o),U(o.jc,o))),_||g})}e.jc=function(o){var u=null,f=this;return o=Da(pe(o),f.uid).then(function(p){return u=Kc(f,p,"reauthenticate"),hi(f,p),f.i=null,f.reload()}).then(function(){return u}),Ut(this,o,!0)};function KU(o,u,f){return o.i&&!f?(u.cancel(),ht(o.i)):u.o(function(p){throw!p||p.code!="auth/user-disabled"&&p.code!="auth/user-token-expired"||(o.i||o.dispatchEvent(new Va("userInvalidated")),o.i=p),p})}e.toJSON=function(){return this.w()},e.w=function(){var o={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.h.w(),redirectEventId:this.ga||null};return this.metadata&&on(o,this.metadata.w()),J(this.providerData,function(u){o.providerData.push(vF(u))}),on(o,this.S.w()),o};function YS(o){if(!o.apiKey)return null;var u={apiKey:o.apiKey,authDomain:o.authDomain,appName:o.appName,emulatorConfig:o.emulatorConfig},f={};if(o.stsTokenManager&&o.stsTokenManager.accessToken){f[Hr]=o.stsTokenManager.accessToken,f.refreshToken=o.stsTokenManager.refreshToken||null;var p=o.stsTokenManager.expirationTime;p&&(f.expiresIn=(p-Date.now())/1e3)}else return null;var g=new ur(u,f,o);return o.providerData&&J(o.providerData,function(_){_&&Xm(g,li(_))}),o.redirectEventId&&(g.ga=o.redirectEventId),g}function zU(o,u,f,p){var g=new ur(o,u);return f&&(g.ha=f),p&&qc(g,p),g.reload().then(function(){return g})}function WU(o,u,f,p){var g=o.h,_={};return _[Hr]=g.b&&g.b.toString(),_.refreshToken=g.a,u=new ur(u||{apiKey:o.l,authDomain:o.s,appName:o.m},_),f&&(u.ha=f),p&&qc(u,p),Lh(u,o),u}function $U(o){this.a=o,this.b=Bc()}var Zm={name:"redirectUser",F:"session"};function XS(o){return ja(o.b,Zm,o.a)}function GU(o,u){return o.b.get(Zm,o.a).then(function(f){return f&&u&&(f.authDomain=u),YS(f||{})})}function ey(o){this.a=o,this.b=Bc(),this.c=null,this.f=QU(this),this.b.addListener(di("local"),this.a,U(this.g,this))}ey.prototype.g=function(){var o=this,u=di("local");Ba(this,function(){return pe().then(function(){return o.c&&o.c.F!="local"?o.b.get(u,o.a):null}).then(function(f){if(f)return ty(o,"local").then(function(){o.c=u})})})};function ty(o,u){var f=[],p;for(p in Fa)Fa[p]!==u&&f.push(ja(o.b,di(Fa[p]),o.a));return f.push(ja(o.b,ny,o.a)),UM(f)}function QU(o){var u=di("local"),f=di("session"),p=di("none");return lU(o.b,u,o.a).then(function(){return o.b.get(f,o.a)}).then(function(g){return g?f:o.b.get(p,o.a).then(function(_){return _?p:o.b.get(u,o.a).then(function(b){return b?u:o.b.get(ny,o.a).then(function(S){return S?di(S):u})})})}).then(function(g){return o.c=g,ty(o,g.F)}).o(function(){o.c||(o.c=u)})}var ny={name:"persistence",F:"session"};function di(o){return{name:"authUser",F:o}}ey.prototype.yb=function(o){var u=null,f=this;return cU(o),Ba(this,function(){return o!=f.c.F?f.b.get(f.c,f.a).then(function(p){return u=p,ty(f,o)}).then(function(){if(f.c=di(o),u)return f.b.set(f.c,u,f.a)}):pe()})};function YU(o){return Ba(o,function(){return o.b.set(ny,o.c.F,o.a)})}function JS(o,u){return Ba(o,function(){return o.b.set(o.c,u.w(),o.a)})}function ZS(o){return Ba(o,function(){return ja(o.b,o.c,o.a)})}function eC(o,u,f){return Ba(o,function(){return o.b.get(o.c,o.a).then(function(p){return p&&u&&(p.authDomain=u),p&&f&&(p.emulatorConfig=f),YS(p||{})})})}function Ba(o,u){return o.f=o.f.then(u,u),o.f}function Kr(o){if(this.l=!1,ae(this,"settings",new DS),ae(this,"app",o),nt(this).options&&nt(this).options.apiKey)o=ue.SDK_VERSION?Na(ue.SDK_VERSION):null,this.a=new qr(nt(this).options&&nt(this).options.apiKey,ft(ot),o);else throw new R("invalid-api-key");this.P=[],this.s=[],this.N=[],this.Pa=ue.INTERNAL.createSubscribe(U(this.zc,this)),this.W=void 0,this.ib=ue.INTERNAL.createSubscribe(U(this.Ac,this)),qa(this,null),this.i=new ey(nt(this).options.apiKey+":"+nt(this).name),this.D=new $U(nt(this).options.apiKey+":"+nt(this).name),this.$=Tt(this,nj(this)),this.h=Tt(this,rj(this)),this.ba=!1,this.ja=U(this.Zc,this),this.Ba=U(this.da,this),this.qa=U(this.mc,this),this.za=U(this.wc,this),this.Aa=U(this.xc,this),this.b=null,ZU(this),this.INTERNAL={},this.INTERNAL.delete=U(this.delete,this),this.INTERNAL.logFramework=U(this.Gc,this),this.u=0,Dn.call(this),JU(this),this.J=[],this.R=null}F(Kr,Dn);function tC(o){Yn.call(this,"languageCodeChanged"),this.h=o}F(tC,Yn);function nC(o){Yn.call(this,"emulatorConfigChanged"),this.c=o}F(nC,Yn);function rC(o){Yn.call(this,"frameworkChanged"),this.f=o}F(rC,Yn),e=Kr.prototype,e.yb=function(o){return o=this.i.yb(o),Tt(this,o)},e.xa=function(o){this.aa===o||this.l||(this.aa=o,FI(this.a,this.aa),this.dispatchEvent(new tC(this.la())))},e.la=function(){return this.aa},e.fd=function(){var o=l.navigator;this.xa(o&&(o.languages&&o.languages[0]||o.language||o.userLanguage)||null)},e.gd=function(o,u){if(!this.R){if(!/^https?:\/\//.test(o))throw new R("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");u=u?!!u.disableWarnings:!1,XU(u),this.R={url:o,ec:u},this.settings.jb=!0,Eh(this.a,this.R),this.dispatchEvent(new nC(this.R))}};function XU(o){typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),l.document&&!o&&Zf().then(function(){var u=l.document.createElement("div");u.innerText="Running in emulator mode. Do not use with production credentials.",u.style.position="fixed",u.style.width="100%",u.style.backgroundColor="#ffffff",u.style.border=".1em solid #000000",u.style.color="#b50000",u.style.bottom="0px",u.style.left="0px",u.style.margin="0px",u.style.zIndex=1e4,u.style.textAlign="center",u.classList.add("firebase-emulator-warning"),l.document.body.appendChild(u)})}e.Gc=function(o){this.J.push(o),UI(this.a,ue.SDK_VERSION?Na(ue.SDK_VERSION,this.J):null),this.dispatchEvent(new rC(this.J))},e.Ga=function(){return Z(this.J)},e.zb=function(o){this.S===o||this.l||(this.S=o,this.a.b=this.S)},e.T=function(){return this.S};function JU(o){Object.defineProperty(o,"lc",{get:function(){return this.la()},set:function(u){this.xa(u)},enumerable:!1}),o.aa=null,Object.defineProperty(o,"ti",{get:function(){return this.T()},set:function(u){this.zb(u)},enumerable:!1}),o.S=null,Object.defineProperty(o,"emulatorConfig",{get:function(){if(this.R){var u=Xn(this.R.url);u=li({protocol:u.c,host:u.a,port:u.g,options:li({disableWarnings:this.R.ec})})}else u=null;return u},enumerable:!1})}e.toJSON=function(){return{apiKey:nt(this).options.apiKey,authDomain:nt(this).options.authDomain,appName:nt(this).name,currentUser:Ae(this)&&Ae(this).w()}};function ry(o){return o.Oa||ht(new R("auth-domain-config-required"))}function ZU(o){var u=nt(o).options.authDomain,f=nt(o).options.apiKey;u&&ss()&&(o.Oa=o.$.then(function(){if(!o.l){if(o.b=Om(u,f,nt(o).name,o.R),Nh(o.b,o),Ae(o)&&Hc(Ae(o)),o.m){Hc(o.m);var p=o.m;p.xa(o.la()),Hm(p,o),p=o.m,qc(p,o.J),zm(p,o),p=o.m,qm(p,o.R),Km(p,o),o.m=null}return o.b}}))}e.Gb=function(o,u){switch(o){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==u&&!!this.f;default:return!1}},e.na=function(o,u,f,p){o=="signInViaPopup"&&this.g==p&&(f&&this.C?this.C(f):u&&!f&&this.f&&this.f(u),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},e.Fa=function(o,u){return o=="signInViaRedirect"||o=="signInViaPopup"&&this.g==u&&this.f?U(this.ic,this):null},e.ic=function(o,u,f,p){var g=this,_={requestUri:o,postBody:p,sessionId:u,tenantId:f};return this.c&&(this.c.cancel(),this.c=null),g.$.then(function(){return ys(g,sm(g.a,_))})},e.Xc=function(o){if(!ss())return ht(new R("operation-not-supported-in-this-environment"));var u=this,f=Dg(o.providerId),p=as(),g=null;(!wc()||mg())&&nt(this).options.authDomain&&o.isOAuthProvider&&(g=Fc(nt(this).options.authDomain,nt(this).options.apiKey,nt(this).name,"signInViaPopup",o,null,p,ue.SDK_VERSION||null,null,null,this.T(),this.R));var _=MT(g,f&&f.va,f&&f.ua);return f=ry(this).then(function(b){return AS(b,_,"signInViaPopup",o,p,!!g,u.T())}).then(function(){return new Me(function(b,S){u.na("signInViaPopup",null,new R("cancelled-popup-request"),u.g),u.f=b,u.C=S,u.g=p,u.c=RS(u.b,u,"signInViaPopup",_,p)})}).then(function(b){return _&&os(_),b?li(b):null}).o(function(b){throw _&&os(_),b}),Tt(this,f)},e.Yc=function(o){if(!ss())return ht(new R("operation-not-supported-in-this-environment"));var u=this,f=ry(this).then(function(){return YU(u.i)}).then(function(){return kS(u.b,"signInViaRedirect",o,void 0,u.T())});return Tt(this,f)};function iC(o){if(!ss())return ht(new R("operation-not-supported-in-this-environment"));var u=ry(o).then(function(){return o.b.ra()}).then(function(f){return f?li(f):null});return Tt(o,u)}e.ra=function(){var o=this;return iC(this).then(function(u){return o.b&&Oh(o.b.b),u}).o(function(u){throw o.b&&Oh(o.b.b),u})},e.dd=function(o){if(!o)return ht(new R("null-user"));if(this.S!=o.tenantId)return ht(new R("tenant-id-mismatch"));var u=this,f={};f.apiKey=nt(this).options.apiKey,f.authDomain=nt(this).options.authDomain,f.appName=nt(this).name;var p=WU(o,f,u.D,u.Ga());return Tt(this,this.h.then(function(){if(nt(u).options.apiKey!=o.l)return p.reload()}).then(function(){return Ae(u)&&o.uid==Ae(u).uid?(Lh(Ae(u),o),u.da(o)):(qa(u,p),Hc(p),u.da(p))}).then(function(){zc(u)}))};function ej(o,u){var f={};return f.apiKey=nt(o).options.apiKey,f.authDomain=nt(o).options.authDomain,f.appName=nt(o).name,o.R&&(f.emulatorConfig=o.R),o.$.then(function(){return zU(f,u,o.D,o.Ga())}).then(function(p){return Ae(o)&&p.uid==Ae(o).uid?(Lh(Ae(o),p),o.da(p)):(qa(o,p),Hc(p),o.da(p))}).then(function(){zc(o)})}function qa(o,u){Ae(o)&&(BU(Ae(o),o.Ba),sr(Ae(o),"tokenChanged",o.qa),sr(Ae(o),"userDeleted",o.za),sr(Ae(o),"userInvalidated",o.Aa),$m(Ae(o))),u&&(u.W.push(o.Ba),Er(u,"tokenChanged",o.qa),Er(u,"userDeleted",o.za),Er(u,"userInvalidated",o.Aa),0<o.u&&qS(u)),ae(o,"currentUser",u),u&&(u.xa(o.la()),Hm(u,o),qc(u,o.J),zm(u,o),qm(u,o.R),Km(u,o))}e.Bb=function(){var o=this,u=this.h.then(function(){return o.b&&Oh(o.b.b),Ae(o)?(qa(o,null),ZS(o.i).then(function(){zc(o)})):pe()});return Tt(this,u)};function tj(o){var u=GU(o.D,nt(o).options.authDomain).then(function(f){return(o.m=f)&&(f.ha=o.D),XS(o.D)});return Tt(o,u)}function nj(o){var u=nt(o).options.authDomain,f=tj(o).then(function(){return eC(o.i,u,o.R)}).then(function(p){return p?(p.ha=o.D,o.m&&(o.m.ga||null)==(p.ga||null)?p:p.reload().then(function(){return JS(o.i,p).then(function(){return p})}).o(function(g){return g.code=="auth/network-request-failed"?p:ZS(o.i)})):null}).then(function(p){qa(o,p||null)});return Tt(o,f)}function rj(o){return o.$.then(function(){return iC(o)}).o(function(){}).then(function(){if(!o.l)return o.ja()}).o(function(){}).then(function(){if(!o.l){o.ba=!0;var u=o.i;u.b.addListener(di("local"),u.a,o.ja)}})}e.Zc=function(){var o=this;return eC(this.i,nt(this).options.authDomain).then(function(u){if(!o.l){var f;if(f=Ae(o)&&u){f=Ae(o).uid;var p=u.uid;f=f==null||f===""||p===void 0||p===null||p===""?!1:f==p}if(f)return Lh(Ae(o),u),Ae(o).I();(Ae(o)||u)&&(qa(o,u),u&&(Hc(u),u.ha=o.D),o.b&&Nh(o.b,o),zc(o))}})},e.da=function(o){return JS(this.i,o)},e.mc=function(){zc(this),this.da(Ae(this))},e.wc=function(){this.Bb()},e.xc=function(){this.Bb()};function ys(o,u){var f=null,p=null;return Tt(o,u.then(function(g){return f=Vg(g),p=uI(g),ej(o,g)},function(g){var _=null;throw g&&g.code==="auth/multi-factor-auth-required"&&(_=FS(g.w(),o,U(o.kc,o))),_||g}).then(function(){return li({user:Ae(o),credential:f,additionalUserInfo:p,operationType:"signIn"})}))}e.kc=function(o){var u=this;return this.h.then(function(){return ys(u,pe(o))})},e.zc=function(o){var u=this;this.addAuthTokenListener(function(){o.next(Ae(u))})},e.Ac=function(o){var u=this;ij(this,function(){o.next(Ae(u))})},e.Ic=function(o,u,f){var p=this;return this.ba&&Promise.resolve().then(function(){typeof o=="function"?o(Ae(p)):typeof o.next=="function"&&o.next(Ae(p))}),this.Pa(o,u,f)},e.Hc=function(o,u,f){var p=this;return this.ba&&Promise.resolve().then(function(){p.W=p.getUid(),typeof o=="function"?o(Ae(p)):typeof o.next=="function"&&o.next(Ae(p))}),this.ib(o,u,f)},e.nc=function(o){var u=this,f=this.h.then(function(){return Ae(u)?Ae(u).I(o).then(function(p){return{accessToken:p}}):null});return Tt(this,f)},e.Tc=function(o){var u=this;return this.h.then(function(){return ys(u,Fe(u.a,U2,{token:o}))}).then(function(f){var p=f.user;return po(p,"isAnonymous",!1),u.da(p),f})},e.Uc=function(o,u){var f=this;return this.h.then(function(){return ys(f,Fe(f.a,$I,{email:o,password:u}))})},e.dc=function(o,u){var f=this;return this.h.then(function(){return ys(f,Fe(f.a,v2,{email:o,password:u}))})},e.ab=function(o){var u=this;return this.h.then(function(){return ys(u,o.ka(u.a))})},e.Sc=function(o){return bg("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.ab(o)},e.Ab=function(){var o=this;return this.h.then(function(){var u=Ae(o);if(u&&u.isAnonymous){var f=li({providerId:null,isNewUser:!1});return li({user:u,credential:null,additionalUserInfo:f,operationType:"signIn"})}return ys(o,o.a.Ab()).then(function(p){var g=p.user;return po(g,"isAnonymous",!0),o.da(g),p})})};function nt(o){return o.app}function Ae(o){return o.currentUser}e.getUid=function(){return Ae(this)&&Ae(this).uid||null};function Fh(o){return Ae(o)&&Ae(o)._lat||null}function zc(o){if(o.ba){for(var u=0;u<o.s.length;u++)o.s[u]&&o.s[u](Fh(o));if(o.W!==o.getUid()&&o.N.length)for(o.W=o.getUid(),u=0;u<o.N.length;u++)o.N[u]&&o.N[u](Fh(o))}}e.cc=function(o){this.addAuthTokenListener(o),this.u++,0<this.u&&Ae(this)&&qS(Ae(this))},e.Pc=function(o){var u=this;J(this.s,function(f){f==o&&u.u--}),0>this.u&&(this.u=0),this.u==0&&Ae(this)&&$m(Ae(this)),this.removeAuthTokenListener(o)},e.addAuthTokenListener=function(o){var u=this;this.s.push(o),Tt(this,this.h.then(function(){u.l||D(u.s,o)&&o(Fh(u))}))},e.removeAuthTokenListener=function(o){j(this.s,function(u){return u==o})};function ij(o,u){o.N.push(u),Tt(o,o.h.then(function(){!o.l&&D(o.N,u)&&o.W!==o.getUid()&&(o.W=o.getUid(),u(Fh(o)))}))}e.delete=function(){this.l=!0;for(var o=0;o<this.P.length;o++)this.P[o].cancel("app-deleted");return this.P=[],this.i&&(o=this.i,o.b.removeListener(di("local"),o.a,this.ja)),this.b&&(Rm(this.b,this),Oh(this.b.b)),Promise.resolve()};function Tt(o,u){return o.P.push(u),u.oa(function(){M(o.P,u)}),u}e.hc=function(o){return Tt(this,s2(this.a,o))},e.Bc=function(o){return!!jg(o)},e.xb=function(o,u){var f=this;return Tt(this,pe().then(function(){var p=new nh(u);if(!p.c)throw new R("argument-error",Og+" must be true when sending sign in link to email");return rh(p)}).then(function(p){return f.a.xb(o,p)}).then(function(){}))},e.jd=function(o){return this.Sa(o).then(function(u){return u.data.email})},e.ob=function(o,u){return Tt(this,this.a.ob(o,u).then(function(){}))},e.Sa=function(o){return Tt(this,this.a.Sa(o).then(function(u){return new mF(u)}))},e.kb=function(o){return Tt(this,this.a.kb(o).then(function(){}))},e.wb=function(o,u){var f=this;return Tt(this,pe().then(function(){return typeof u>"u"||si(u)?{}:rh(new nh(u))}).then(function(p){return f.a.wb(o,p)}).then(function(){}))},e.Wc=function(o,u){return Tt(this,Dm(this,o,u,U(this.ab,this)))},e.Vc=function(o,u){var f=this;return Tt(this,pe().then(function(){var p=u||_c(),g=wI(o,p);if(p=jg(p),!p)throw new R("argument-error","Invalid email link!");if(p.tenantId!==f.T())throw new R("tenant-id-mismatch");return f.ab(g)}))};function Wc(){}Wc.prototype.render=function(){},Wc.prototype.reset=function(){},Wc.prototype.getResponse=function(){},Wc.prototype.execute=function(){};function Ha(){this.a={},this.b=1e12}var iy=null;Ha.prototype.render=function(o,u){return this.a[this.b.toString()]=new Uh(o,u),this.b++},Ha.prototype.reset=function(o){var u=oy(this,o);o=oC(o),u&&o&&(u.delete(),delete this.a[o])},Ha.prototype.getResponse=function(o){return(o=oy(this,o))?o.getResponse():null},Ha.prototype.execute=function(o){(o=oy(this,o))&&o.execute()};function oy(o,u){return(u=oC(u))&&o.a[u]||null}function oC(o){return(o=typeof o>"u"?1e12:o)?o.toString():null}function Uh(o,u){this.g=!1,this.c=u,this.a=this.b=null,this.h=this.c.size!=="invisible",this.f=hc(o);var f=this;this.i=function(){f.execute()},this.h?this.execute():Er(this.f,"click",this.i)}Uh.prototype.getResponse=function(){return sy(this),this.b},Uh.prototype.execute=function(){sy(this);var o=this;this.a||(this.a=setTimeout(function(){o.b=fF();var u=o.c.callback,f=o.c["expired-callback"];if(u)try{u(o.b)}catch{}o.a=setTimeout(function(){if(o.a=null,o.b=null,f)try{f()}catch{}o.h&&o.execute()},6e4)},500))},Uh.prototype.delete=function(){sy(this),this.g=!0,clearTimeout(this.a),this.a=null,sr(this.f,"click",this.i)};function sy(o){if(o.g)throw Error("reCAPTCHA mock was already deleted!")}function ay(){}ae(ay,"FACTOR_ID","phone");function uy(){}uy.prototype.g=function(){return iy||(iy=new Ha),pe(iy)},uy.prototype.c=function(){};var cy=null;function ly(){this.b=l.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var oj=new ai(Vf,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),sj=new lo(3e4,6e4);ly.prototype.g=function(o){var u=this;return new Me(function(f,p){var g=setTimeout(function(){p(new R("network-request-failed"))},sj.get());if(!l.grecaptcha||o!==u.f&&!u.b){l[u.a]=function(){if(l.grecaptcha){u.f=o;var b=l.grecaptcha.render;l.grecaptcha.render=function(S,L){return S=b(S,L),u.b++,S},clearTimeout(g),f(l.grecaptcha)}else clearTimeout(g),p(new R("internal-error"));delete l[u.a]};var _=zv(oj,{onload:u.a,hl:o||""});pe(Zg(_)).o(function(){clearTimeout(g),p(new R("internal-error","Unable to load external reCAPTCHA dependencies!"))})}else clearTimeout(g),f(l.grecaptcha)})},ly.prototype.c=function(){this.b--};var fy=null;function hy(o,u,f,p,g,_,b){if(ae(this,"type","recaptcha"),this.c=this.f=null,this.J=!1,this.v=u,this.g=null,b?(cy||(cy=new uy),b=cy):(fy||(fy=new ly),b=fy),this.m=b,this.a=f||{theme:"light",type:"image"},this.h=[],this.a[uC])throw new R("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i=this.a[aj]==="invisible",!l.document)throw new R("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!hc(u)||!this.i&&hc(u).hasChildNodes())throw new R("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new qr(o,_||null,g||null),this.u=p||function(){return null};var S=this;this.l=[];var L=this.a[sC];this.a[sC]=function(be){if(cC(S,be),typeof L=="function")L(be);else if(typeof L=="string"){var Xe=dt(L,l);typeof Xe=="function"&&Xe(be)}};var B=this.a[aC];this.a[aC]=function(){if(cC(S,null),typeof B=="function")B();else if(typeof B=="string"){var be=dt(B,l);typeof be=="function"&&be()}}}var sC="callback",aC="expired-callback",uC="sitekey",aj="size";function cC(o,u){for(var f=0;f<o.l.length;f++)try{o.l[f](u)}catch{}}function uj(o,u){j(o.l,function(f){return f==u})}function dy(o,u){return o.h.push(u),u.oa(function(){M(o.h,u)}),u}e=hy.prototype,e.Ia=function(){var o=this;return this.f?this.f:this.f=dy(this,pe().then(function(){if(eh()&&!Vr())return Zf();throw new R("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return o.m.g(o.u())}).then(function(u){return o.g=u,Fe(o.s,R2,{})}).then(function(u){o.a[uC]=u.recaptchaSiteKey}).o(function(u){throw o.f=null,u}))},e.render=function(){jh(this);var o=this;return dy(this,this.Ia().then(function(){if(o.c===null){var u=o.v;if(!o.i){var f=hc(u);u=DM("DIV"),f.appendChild(u)}o.c=o.g.render(u,o.a)}return o.c}))},e.verify=function(){jh(this);var o=this;return dy(this,this.render().then(function(u){return new Me(function(f){var p=o.g.getResponse(u);if(p)f(p);else{var g=function(_){_&&(uj(o,g),f(_))};o.l.push(g),o.i&&o.g.execute(o.c)}})}))},e.reset=function(){jh(this),this.c!==null&&this.g.reset(this.c)};function jh(o){if(o.J)throw new R("internal-error","RecaptchaVerifier instance has been destroyed.")}e.clear=function(){jh(this),this.J=!0,this.m.c();for(var o=0;o<this.h.length;o++)this.h[o].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){o=hc(this.v);for(var u;u=o.firstChild;)o.removeChild(u)}};function py(o,u,f){var p=!1;try{this.b=f||ue.app()}catch{throw new R("argument-error","No firebase.app.App instance is currently initialized.")}if(this.b.options&&this.b.options.apiKey)f=this.b.options.apiKey;else throw new R("invalid-api-key");var g=this,_=null;try{_=this.b.auth().Ga()}catch{}try{p=this.b.auth().settings.appVerificationDisabledForTesting}catch{}_=ue.SDK_VERSION?Na(ue.SDK_VERSION,_):null,hy.call(this,f,o,u,function(){try{var b=g.b.auth().la()}catch{b=null}return b},_,ft(ot),p)}F(py,hy);function lC(o,u,f,p){e:{f=Array.prototype.slice.call(f);for(var g=0,_=!1,b=0;b<u.length;b++)if(u[b].optional)_=!0;else{if(_)throw new R("internal-error","Argument validator encountered a required argument after an optional argument.");g++}if(_=u.length,f.length<g||_<f.length)p="Expected "+(g==_?g==1?"1 argument":g+" arguments":g+"-"+_+" arguments")+" but got "+f.length+".";else{for(g=0;g<f.length;g++)if(_=u[g].optional&&f[g]===void 0,!u[g].M(f[g])&&!_){if(u=u[g],0>g||g>=fC.length)throw new R("internal-error","Argument validator received an unsupported number of arguments.");f=fC[g],p=(p?"":f+" argument ")+(u.name?'"'+u.name+'" ':"")+"must be "+u.K+".";break e}p=null}}if(p)throw new R("argument-error",o+" failed: "+p)}var fC="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function se(o,u){return{name:o||"",K:"a valid string",optional:!!u,M:function(f){return typeof f=="string"}}}function vy(o,u){return{name:o||"",K:"a boolean",optional:!!u,M:function(f){return typeof f=="boolean"}}}function Nt(o,u){return{name:o||"",K:"a valid object",optional:!!u,M:T}}function Ka(o,u){return{name:o||"",K:"a function",optional:!!u,M:function(f){return typeof f=="function"}}}function pi(o,u){return{name:o||"",K:"null",optional:!!u,M:function(f){return f===null}}}function cj(){return{name:"",K:"an HTML element",optional:!1,M:function(o){return!!(o&&o instanceof Element)}}}function lj(){return{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(o){return!!(o&&o instanceof Kr)}}}function fj(){return{name:"app",K:"an instance of Firebase App",optional:!0,M:function(o){return!!(o&&o instanceof ue.app.App)}}}function vo(o){return{name:o?o+"Credential":"credential",K:o?"a valid "+o+" credential":"a valid credential",optional:!1,M:function(u){if(!u)return!1;var f=!o||u.providerId===o;return!(!u.ka||!f)}}}function hC(){return{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(o){return o?!!o.tb:!1}}}function za(){return{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(o){return!!(o&&o.providerId&&o.hasOwnProperty&&o.hasOwnProperty("isOAuthProvider"))}}}function gy(o,u){return T(o)&&typeof o.type=="string"&&o.type===u&&typeof o.Ha=="function"}function dC(o){return T(o)&&typeof o.uid=="string"}function Vh(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(o){return!(!o||typeof o.type!="string"||typeof o.verify!="function")}}}function At(o,u,f,p){return{name:f||"",K:o.K+" or "+u.K,optional:!!p,M:function(g){return o.M(g)||u.M(g)}}}function mt(o,u){for(var f in u){var p=u[f].name;o[p]=vC(p,o[f],u[f].j)}}function pC(o,u){for(var f in u){var p=u[f].name;p!==f&&Object.defineProperty(o,p,{get:ie(function(g){return this[g]},f),set:ie(function(g,_,b,S){lC(g,[b],[S],!0),this[_]=S},p,f,u[f].lb),enumerable:!0})}}function kt(o,u,f,p){o[u]=vC(u,f,p)}function vC(o,u,f){function p(){var b=Array.prototype.slice.call(arguments);return lC(g,f,b),u.apply(this,b)}if(!f)return u;var g=hj(o),_;for(_ in u)p[_]=u[_];for(_ in u.prototype)p.prototype[_]=u.prototype[_];return p}function hj(o){return o=o.split("."),o[o.length-1]}mt(Kr.prototype,{kb:{name:"applyActionCode",j:[se("code")]},Sa:{name:"checkActionCode",j:[se("code")]},ob:{name:"confirmPasswordReset",j:[se("code"),se("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[se("email"),se("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[se("email")]},ra:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[se("emailLink")]},Hc:{name:"onAuthStateChanged",j:[At(Nt(),Ka(),"nextOrObserver"),Ka("opt_error",!0),Ka("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[At(Nt(),Ka(),"nextOrObserver"),Ka("opt_error",!0),Ka("opt_completed",!0)]},wb:{name:"sendPasswordResetEmail",j:[se("email"),At(Nt("opt_actionCodeSettings",!0),pi(null,!0),"opt_actionCodeSettings",!0)]},xb:{name:"sendSignInLinkToEmail",j:[se("email"),Nt("actionCodeSettings")]},yb:{name:"setPersistence",j:[se("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[vo()]},Ab:{name:"signInAnonymously",j:[]},ab:{name:"signInWithCredential",j:[vo()]},Tc:{name:"signInWithCustomToken",j:[se("token")]},Uc:{name:"signInWithEmailAndPassword",j:[se("email"),se("password")]},Vc:{name:"signInWithEmailLink",j:[se("email"),se("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[se("phoneNumber"),Vh()]},Xc:{name:"signInWithPopup",j:[za()]},Yc:{name:"signInWithRedirect",j:[za()]},dd:{name:"updateCurrentUser",j:[At(function(o){return{name:"user",K:"an instance of Firebase User",optional:!!o,M:function(u){return!!(u&&u instanceof ur)}}}(),pi(),"user")]},Bb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[se(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[se("url"),Nt("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[se("code")]}}),pC(Kr.prototype,{lc:{name:"languageCode",lb:At(se(),pi(),"languageCode")},ti:{name:"tenantId",lb:At(se(),pi(),"tenantId")}}),Kr.Persistence=Fa,Kr.Persistence.LOCAL="local",Kr.Persistence.SESSION="session",Kr.Persistence.NONE="none",mt(ur.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[vy("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[vy("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[vo()]},rb:{name:"linkWithCredential",j:[vo()]},Dc:{name:"linkWithPhoneNumber",j:[se("phoneNumber"),Vh()]},Ec:{name:"linkWithPopup",j:[za()]},Fc:{name:"linkWithRedirect",j:[za()]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[vo()]},ub:{name:"reauthenticateWithCredential",j:[vo()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[se("phoneNumber"),Vh()]},Nc:{name:"reauthenticateWithPopup",j:[za()]},Oc:{name:"reauthenticateWithRedirect",j:[za()]},reload:{name:"reload",j:[]},vb:{name:"sendEmailVerification",j:[At(Nt("opt_actionCodeSettings",!0),pi(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[se(null,!0)]},cd:{name:"unlink",j:[se("provider")]},Cb:{name:"updateEmail",j:[se("email")]},Db:{name:"updatePassword",j:[se("password")]},ed:{name:"updatePhoneNumber",j:[vo("phone")]},Eb:{name:"updateProfile",j:[Nt("profile")]},Fb:{name:"verifyBeforeUpdateEmail",j:[se("email"),At(Nt("opt_actionCodeSettings",!0),pi(null,!0),"opt_actionCodeSettings",!0)]}}),mt(Ha.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),mt(Wc.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),mt(Me.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),pC(DS.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",lb:vy("appVerificationDisabledForTesting")}}),mt(xm.prototype,{confirm:{name:"confirm",j:[se("verificationCode")]}}),kt(xa,"fromJSON",function(o){o=typeof o=="string"?JSON.parse(o):o;for(var u,f=[LF,MF,FF,DF],p=0;p<f.length;p++)if(u=f[p](o))return u;return null},[At(se(),Nt(),"json")]),kt(Ir,"credential",function(o,u){return new fo(o,u)},[se("email"),se("password")]),mt(fo.prototype,{w:{name:"toJSON",j:[se(null,!0)]}}),mt(ls.prototype,{Ca:{name:"addScope",j:[se("scope")]},Ka:{name:"setCustomParameters",j:[Nt("customOAuthParameters")]}}),kt(ls,"credential",gI,[At(se(),Nt(),"token")]),kt(Ir,"credentialWithLink",wI,[se("email"),se("emailLink")]),mt(fs.prototype,{Ca:{name:"addScope",j:[se("scope")]},Ka:{name:"setCustomParameters",j:[Nt("customOAuthParameters")]}}),kt(fs,"credential",mI,[At(se(),Nt(),"token")]),mt(hs.prototype,{Ca:{name:"addScope",j:[se("scope")]},Ka:{name:"setCustomParameters",j:[Nt("customOAuthParameters")]}}),kt(hs,"credential",yI,[At(se(),At(Nt(),pi()),"idToken"),At(se(),pi(),"accessToken",!0)]),mt(La.prototype,{Ka:{name:"setCustomParameters",j:[Nt("customOAuthParameters")]}}),kt(La,"credential",_I,[At(se(),Nt(),"token"),se("secret",!0)]),mt(ar.prototype,{Ca:{name:"addScope",j:[se("scope")]},credential:{name:"credential",j:[At(se(),At(Nt(),pi()),"optionsOrIdToken"),At(se(),pi(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Nt("customOAuthParameters")]}}),mt(Li.prototype,{w:{name:"toJSON",j:[se(null,!0)]}}),mt(us.prototype,{w:{name:"toJSON",j:[se(null,!0)]}}),kt(Mi,"credential",bI,[se("verificationId"),se("verificationCode")]),mt(Mi.prototype,{gb:{name:"verifyPhoneNumber",j:[At(se(),function(o,u){return{name:o||"phoneInfoOptions",K:"valid phone info options",optional:!!u,M:function(f){return f?f.session&&f.phoneNumber?gy(f.session,Cc)&&typeof f.phoneNumber=="string":f.session&&f.multiFactorHint?gy(f.session,uh)&&dC(f.multiFactorHint):f.session&&f.multiFactorUid?gy(f.session,uh)&&typeof f.multiFactorUid=="string":f.phoneNumber?typeof f.phoneNumber=="string":!1:!1}}}(),"phoneInfoOptions"),Vh()]}}),mt(ho.prototype,{w:{name:"toJSON",j:[se(null,!0)]}}),mt(R.prototype,{toJSON:{name:"toJSON",j:[se(null,!0)]}}),mt(kc.prototype,{toJSON:{name:"toJSON",j:[se(null,!0)]}}),mt(Hg.prototype,{toJSON:{name:"toJSON",j:[se(null,!0)]}}),mt(Mm.prototype,{toJSON:{name:"toJSON",j:[se(null,!0)]}}),mt(Lm.prototype,{Rc:{name:"resolveSignIn",j:[hC()]}}),mt(Um.prototype,{Sb:{name:"getSession",j:[]},fc:{name:"enroll",j:[hC(),se("displayName",!0)]},bd:{name:"unenroll",j:[At({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:dC},se(),"multiFactorInfoIdentifier")]}}),mt(py.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),kt(Pg,"parseLink",JT,[se("link")]),kt(ay,"assertion",function(o){return new jS(o)},[vo("phone")]),function(){if(typeof ue<"u"&&ue.INTERNAL&&ue.INTERNAL.registerComponent){var o={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:th,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:Ng,VERIFY_AND_CHANGE_EMAIL:Ic,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:Kr,AuthCredential:xa,Error:R};kt(o,"EmailAuthProvider",Ir,[]),kt(o,"FacebookAuthProvider",ls,[]),kt(o,"GithubAuthProvider",fs,[]),kt(o,"GoogleAuthProvider",hs,[]),kt(o,"TwitterAuthProvider",La,[]),kt(o,"OAuthProvider",ar,[se("providerId")]),kt(o,"SAMLAuthProvider",vI,[se("providerId")]),kt(o,"PhoneAuthProvider",Mi,[lj()]),kt(o,"RecaptchaVerifier",py,[At(se(),cj(),"recaptchaContainer"),Nt("recaptchaParameters",!0),fj()]),kt(o,"ActionCodeURL",Pg,[]),kt(o,"PhoneMultiFactorGenerator",ay,[]),ue.INTERNAL.registerComponent({name:"auth",instanceFactory:function(u){return u=u.getProvider("app").getImmediate(),new Kr(u)},multipleInstances:!1,serviceProps:o,instantiationMode:"LAZY",type:"PUBLIC",onInstanceCreated:function(u){u.getProvider("auth-internal").initialize()}}),ue.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(u){return u=u.getProvider("auth").getImmediate(),{getUid:U(u.getUid,u),getToken:U(u.nc,u),addAuthTokenListener:U(u.cc,u),removeAuthTokenListener:U(u.Pc,u)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),ue.registerVersion("@firebase/auth","0.16.8"),ue.INTERNAL.extendNamespace({User:ur})}else throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.")}()}).apply(typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{});var KB="@firebase/database",zB="0.11.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var S1="";function C1(e){S1=e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var WB=function(){function e(t){this.domStorage_=t,this.prefix_="firebase:"}return e.prototype.set=function(t,n){n==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Bt(n))},e.prototype.get=function(t){var n=this.domStorage_.getItem(this.prefixedName_(t));return n==null?null:Ol(n)},e.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},e.prototype.prefixedName_=function(t){return this.prefix_+t},e.prototype.toString=function(){return this.domStorage_.toString()},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $B=function(){function e(){this.cache_={},this.isInMemoryStorage=!0}return e.prototype.set=function(t,n){n==null?delete this.cache_[t]:this.cache_[t]=n},e.prototype.get=function(t){return _r(this.cache_,t)?this.cache_[t]:null},e.prototype.remove=function(t){delete this.cache_[t]},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var A1=function(e){try{if(typeof window<"u"&&typeof window[e]<"u"){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new WB(t)}}catch{}return new $B},Os=A1("localStorage"),N_=A1("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cu=new la("@firebase/database"),k1=function(){var e=1;return function(){return e++}}(),R1=function(e){var t=fB(e),n=new aB;n.update(t);var r=n.digest();return Lp.encodeByteArray(r)},uf=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n="",r=0;r<e.length;r++){var i=e[r];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?n+=uf.apply(null,i):typeof i=="object"?n+=Bt(i):n+=i,n+=" "}return n},Hs=null,XC=!0,N1=function(e,t){$(!t||e===!0||e===!1,"Can't turn on custom loggers persistently."),e===!0?(cu.logLevel=Le.VERBOSE,Hs=cu.log.bind(cu),t&&N_.set("logging_enabled",!0)):typeof e=="function"?Hs=e:(Hs=null,N_.remove("logging_enabled"))},Qt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(XC===!0&&(XC=!1,Hs===null&&N_.get("logging_enabled")===!0&&N1(!0)),Hs){var n=uf.apply(null,e);Hs(n)}},cf=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];Qt.apply(void 0,Ne([e],fn(t)))}},P_=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE INTERNAL ERROR: "+uf.apply(void 0,Ne([],fn(e)));cu.error(n)},Ci=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE FATAL ERROR: "+uf.apply(void 0,Ne([],fn(e)));throw cu.error(n),new Error(n)},pn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE WARNING: "+uf.apply(void 0,Ne([],fn(e)));cu.warn(n)},GB=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&pn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Fp=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},QB=function(e){if(document.readyState==="complete")e();else{var t=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Xi="[MIN_NAME]",Ai="[MAX_NAME]",fa=function(e,t){if(e===t)return 0;if(e===Xi||t===Ai)return-1;if(t===Xi||e===Ai)return 1;var n=Pd(e),r=Pd(t);return n!==null?r!==null?n-r===0?e.length-t.length:n-r:-1:r!==null?1:e<t?-1:1},YB=function(e,t){return e===t?0:e<t?-1:1},Gc=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Bt(t))},fb=function(e){if(typeof e!="object"||e===null)return Bt(e);var t=[];for(var n in e)t.push(n);t.sort();for(var r="{",i=0;i<t.length;i++)i!==0&&(r+=","),r+=Bt(t[i]),r+=":",r+=fb(e[t[i]]);return r+="}",r},P1=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function zt(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var O1=function(e){$(!Fp(e),"Invalid JSON number");var t=11,n=52,r=(1<<t-1)-1,i,s,a,c,l;e===0?(s=0,a=0,i=1/e===-1/0?1:0):(i=e<0,e=Math.abs(e),e>=Math.pow(2,1-r)?(c=Math.min(Math.floor(Math.log(e)/Math.LN2),r),s=c+r,a=Math.round(e*Math.pow(2,n-c)-Math.pow(2,n))):(s=0,a=Math.round(e/Math.pow(2,1-r-n))));var h=[];for(l=n;l;l-=1)h.push(a%2?1:0),a=Math.floor(a/2);for(l=t;l;l-=1)h.push(s%2?1:0),s=Math.floor(s/2);h.push(i?1:0),h.reverse();var d=h.join(""),v="";for(l=0;l<64;l+=8){var m=parseInt(d.substr(l,8),2).toString(16);m.length===1&&(m="0"+m),v=v+m}return v.toLowerCase()},XB=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},JB=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function ZB(e,t){var n="Unknown Error";e==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":e==="permission_denied"?n="Client doesn't have permission to access the desired data.":e==="unavailable"&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}var eq=new RegExp("^-?(0*)\\d{1,10}$"),x1=-2147483648,hb=2147483647,Pd=function(e){if(eq.test(e)){var t=Number(e);if(t>=x1&&t<=hb)return t}return null},Qu=function(e){try{e()}catch(t){setTimeout(function(){var n=t.stack||"";throw pn("Exception was thrown by user callback.",n),t},Math.floor(0))}},tq=function(){var e=typeof window=="object"&&window.navigator&&window.navigator.userAgent||"";return e.search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},ul=function(e,t){var n=setTimeout(e,t);return typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nq=function(){function e(t,n){var r=this;this.appName_=t,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(function(i){return r.appCheck=i})}return e.prototype.getToken=function(t){var n=this;return this.appCheck?this.appCheck.getToken(t):new Promise(function(r,i){setTimeout(function(){n.appCheck?n.getToken(t).then(r,i):r(null)},0)})},e.prototype.addTokenChangeListener=function(t){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(function(r){return r.addTokenListener(t)})},e.prototype.notifyForInvalidToken=function(){pn('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rq=function(){function e(t,n,r){var i=this;this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(function(s){return i.auth_=s})}return e.prototype.getToken=function(t){var n=this;return this.auth_?this.auth_.getToken(t).catch(function(r){return r&&r.code==="auth/token-not-initialized"?(Qt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(r)}):new Promise(function(r,i){setTimeout(function(){n.auth_?n.getToken(t).then(r,i):r(null)},0)})},e.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(function(n){return n.addAuthTokenListener(t)})},e.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then(function(n){return n.removeAuthTokenListener(t)})},e.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',pn(t)},e}(),cl=function(){function e(t){this.accessToken=t}return e.prototype.getToken=function(t){return Promise.resolve({accessToken:this.accessToken})},e.prototype.addTokenChangeListener=function(t){t(this.accessToken)},e.prototype.removeTokenChangeListener=function(t){},e.prototype.notifyForInvalidToken=function(){},e.OWNER="owner",e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var db="5",D1="v",L1="s",M1="r",F1="f",U1=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,j1="ls",iq="p",O_="ac",V1="websocket",B1="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pb=function(){function e(t,n,r,i,s,a,c){s===void 0&&(s=!1),a===void 0&&(a=""),c===void 0&&(c=!1),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=a,this.includeNamespaceInQueryParams=c,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Os.get("host:"+t)||this._host}return e.prototype.isCacheableHost=function(){return this.internalHost.substr(0,2)==="s-"},e.prototype.isCustomHost=function(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"},Object.defineProperty(e.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Os.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),e.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},e.prototype.toURLString=function(){var t=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?"?ns="+this.namespace:"";return""+t+this.host+"/"+n},e}();function oq(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function q1(e,t,n){$(typeof t=="string","typeof type must == string"),$(typeof n=="object","typeof params must == object");var r;if(t===V1)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(t===B1)r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);oq(e)&&(n.ns=e.namespace);var i=[];return zt(n,function(s,a){i.push(s+"="+a)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sq=function(){function e(){this.counters_={}}return e.prototype.incrementCounter=function(t,n){n===void 0&&(n=1),_r(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=n},e.prototype.get=function(){return v1(this.counters_)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cy={},Ay={};function vb(e){var t=e.toString();return Cy[t]||(Cy[t]=new sq),Cy[t]}function aq(e,t){var n=e.toString();return Ay[n]||(Ay[n]=t()),Ay[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var uq=function(){function e(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return e.prototype.closeAfter=function(t,n){this.closeAfterResponse=t,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},e.prototype.handleResponse=function(t,n){var r=this;this.pendingResponses[t]=n;for(var i=function(){var c=s.pendingResponses[s.currentResponseNum];delete s.pendingResponses[s.currentResponseNum];for(var l=function(d){c[d]&&Qu(function(){r.onMessage_(c[d])})},h=0;h<c.length;++h)l(h);if(s.currentResponseNum===s.closeAfterResponse)return s.onClose&&(s.onClose(),s.onClose=null),"break";s.currentResponseNum++},s=this;this.pendingResponses[this.currentResponseNum];){var a=i();if(a==="break")break}},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var JC="start",cq="close",lq="pLPCommand",fq="pRTLPCB",H1="id",K1="pw",z1="ser",hq="cb",dq="seg",pq="ts",vq="d",gq="dframe",W1=1870,$1=30,mq=W1-$1,yq=25e3,_q=3e4,gb=function(){function e(t,n,r,i,s,a,c){var l=this;this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=a,this.lastSessionId=c,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=cf(t),this.stats_=vb(n),this.urlFn=function(h){return l.appCheckToken&&(h[O_]=l.appCheckToken),q1(n,B1,h)}}return e.prototype.open=function(t,n){var r=this;this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new uq(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){r.log_("Timed out trying to connect."),r.onClosed_(),r.connectTimeoutTimer_=null},Math.floor(_q)),QB(function(){if(!r.isClosed_){r.scriptTagHolder=new wq(function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];var l=fn(a,5),h=l[0],d=l[1],v=l[2];if(l[3],l[4],r.incrementIncomingBytes_(a),!!r.scriptTagHolder)if(r.connectTimeoutTimer_&&(clearTimeout(r.connectTimeoutTimer_),r.connectTimeoutTimer_=null),r.everConnected_=!0,h===JC)r.id=d,r.password=v;else if(h===cq)d?(r.scriptTagHolder.sendNewPolls=!1,r.myPacketOrderer.closeAfter(d,function(){r.onClosed_()})):r.onClosed_();else throw new Error("Unrecognized command received: "+h)},function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];var l=fn(a,2),h=l[0],d=l[1];r.incrementIncomingBytes_(a),r.myPacketOrderer.handleResponse(h,d)},function(){r.onClosed_()},r.urlFn);var i={};i[JC]="t",i[z1]=Math.floor(Math.random()*1e8),r.scriptTagHolder.uniqueCallbackIdentifier&&(i[hq]=r.scriptTagHolder.uniqueCallbackIdentifier),i[D1]=db,r.transportSessionId&&(i[L1]=r.transportSessionId),r.lastSessionId&&(i[j1]=r.lastSessionId),r.applicationId&&(i[iq]=r.applicationId),r.appCheckToken&&(i[O_]=r.appCheckToken),typeof location<"u"&&location.hostname&&U1.test(location.hostname)&&(i[M1]=F1);var s=r.urlFn(i);r.log_("Connecting via long-poll to "+s),r.scriptTagHolder.addTag(s,function(){})}})},e.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},e.forceAllow=function(){e.forceAllow_=!0},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){return e.forceAllow_?!0:!e.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!XB()&&!JB()},e.prototype.markConnectionHealthy=function(){},e.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},e.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},e.prototype.send=function(t){var n=Bt(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);for(var r=p1(n),i=P1(r,mq),s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++},e.prototype.addDisconnectPingFrame=function(t,n){this.myDisconnFrame=document.createElement("iframe");var r={};r[gq]="t",r[H1]=t,r[K1]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)},e.prototype.incrementIncomingBytes_=function(t){var n=Bt(t).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)},e}(),wq=function(){function e(t,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=k1(),window[lq+this.uniqueCallbackIdentifier]=t,window[fq+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var s="";if(this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"){var a=document.domain;s='<script>document.domain="'+a+'";<\/script>'}var c="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(l){Qt("frame writing exception"),l.stack&&Qt(l.stack),Qt(l)}}}return e.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{var n=t.contentWindow.document;n||Qt("No IE domain setting required")}catch{var r=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},e.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){t.myIFrame!==null&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var n=this.onDisconnect;n&&(this.onDisconnect=null,n())},e.prototype.startLongPoll=function(t,n){for(this.myID=t,this.myPW=n,this.alive=!0;this.newRequest_(););},e.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t[H1]=this.myID,t[K1]=this.myPW,t[z1]=this.currentSerial;for(var n=this.urlFn(t),r="",i=0;this.pendingSegs.length>0;){var s=this.pendingSegs[0];if(s.d.length+$1+r.length<=W1){var a=this.pendingSegs.shift();r=r+"&"+dq+i+"="+a.seg+"&"+pq+i+"="+a.ts+"&"+vq+i+"="+a.d,i++}else break}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1},e.prototype.enqueueSegment=function(t,n,r){this.pendingSegs.push({seg:t,ts:n,d:r}),this.alive&&this.newRequest_()},e.prototype.addLongPollTag_=function(t,n){var r=this;this.outstandingRequests.add(n);var i=function(){r.outstandingRequests.delete(n),r.newRequest_()},s=setTimeout(i,Math.floor(yq)),a=function(){clearTimeout(s),i()};this.addTag(t,a)},e.prototype.addTag=function(t,n){var r=this;setTimeout(function(){try{if(!r.sendNewPolls)return;var i=r.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){var s=i.readyState;(!s||s==="loaded"||s==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=function(){Qt("Long-poll script failed to load: "+t),r.sendNewPolls=!1,r.close()},r.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bq=16384,Eq=45e3,Od=null;typeof MozWebSocket<"u"?Od=MozWebSocket:typeof WebSocket<"u"&&(Od=WebSocket);var Rs=function(){function e(t,n,r,i,s,a,c){this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=cf(this.connId),this.stats_=vb(n),this.connURL=e.connectionURL_(n,a,c,i),this.nodeAdmin=n.nodeAdmin}return e.connectionURL_=function(t,n,r,i){var s={};return s[D1]=db,typeof location<"u"&&location.hostname&&U1.test(location.hostname)&&(s[M1]=F1),n&&(s[L1]=n),r&&(s[j1]=r),i&&(s[O_]=i),q1(t,V1,s)},e.prototype.open=function(t,n){var r=this;this.onDisconnect=n,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Os.set("previous_websocket_failure",!0);try{var i,s,a,c;if(!y1()){var s={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}};this.mySock=new Od(this.connURL,[],s)}}catch(h){this.log_("Error instantiating WebSocket.");var l=h.message||h.data;l&&this.log_(l),this.onClosed_();return}this.mySock.onopen=function(){r.log_("Websocket connected."),r.everConnected_=!0},this.mySock.onclose=function(){r.log_("Websocket connection was disconnected."),r.mySock=null,r.onClosed_()},this.mySock.onmessage=function(h){r.handleIncomingFrame(h)},this.mySock.onerror=function(h){r.log_("WebSocket error.  Closing connection.");var d=h.message||h.data;d&&r.log_(d),r.onClosed_()}},e.prototype.start=function(){},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){var t=!1;if(typeof navigator<"u"&&navigator.userAgent){var n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&Od!==null&&!e.forceDisallow_},e.previouslyFailed=function(){return Os.isInMemoryStorage||Os.get("previous_websocket_failure")===!0},e.prototype.markConnectionHealthy=function(){Os.remove("previous_websocket_failure")},e.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var n=this.frames.join("");this.frames=null;var r=Ol(n);this.onMessage(r)}},e.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},e.prototype.extractFrameCount_=function(t){if($(this.frames===null,"We already have a frame buffer"),t.length<=6){var n=Number(t);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),t},e.prototype.handleIncomingFrame=function(t){if(this.mySock!==null){var n=t.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{var r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}},e.prototype.send=function(t){this.resetKeepAlive();var n=Bt(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);var r=P1(n,bq);r.length>1&&this.sendString_(String(r.length));for(var i=0;i<r.length;i++)this.sendString_(r[i])},e.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},e.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},e.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(Eq))},e.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4,e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tq=function(){function e(t){this.initTransports_(t)}return Object.defineProperty(e,"ALL_TRANSPORTS",{get:function(){return[gb,Rs]},enumerable:!1,configurable:!0}),e.prototype.initTransports_=function(t){var n,r,i=Rs&&Rs.isAvailable(),s=i&&!Rs.previouslyFailed();if(t.webSocketOnly&&(i||pn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[Rs];else{var a=this.transports_=[];try{for(var c=tn(e.ALL_TRANSPORTS),l=c.next();!l.done;l=c.next()){var h=l.value;h&&h.isAvailable()&&a.push(h)}}catch(d){n={error:d}}finally{try{l&&!l.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}}},e.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},e.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Iq=6e4,Sq=5e3,Cq=10*1024,Aq=100*1024,ky="t",ZC="d",kq="s",eA="r",Rq="e",tA="o",nA="a",rA="n",iA="p",Nq="h",G1=function(){function e(t,n,r,i,s,a,c,l,h,d){this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=a,this.onReady_=c,this.onDisconnect_=l,this.onKill_=h,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=cf("c:"+this.id+":"),this.transportManager_=new Tq(n),this.log_("Connection created"),this.start_()}return e.prototype.start_=function(){var t=this,n=this.transportManager_.initialTransport();this.conn_=new n(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=n.responsesRequiredToBeHealthy||0;var r=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(r,i)},Math.floor(0));var s=n.healthyTimeout||0;s>0&&(this.healthyTimeout_=ul(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>Aq?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>Cq?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(s)))},e.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},e.prototype.disconnReceiver_=function(t){var n=this;return function(r){t===n.conn_?n.onConnectionLost_(r):t===n.secondaryConn_?(n.log_("Secondary connection lost."),n.onSecondaryConnectionLost_()):n.log_("closing an old connection")}},e.prototype.connReceiver_=function(t){var n=this;return function(r){n.state_!==2&&(t===n.rx_?n.onPrimaryMessageReceived_(r):t===n.secondaryConn_?n.onSecondaryMessageReceived_(r):n.log_("message on old connection"))}},e.prototype.sendRequest=function(t){var n={t:"d",d:t};this.sendData_(n)},e.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},e.prototype.onSecondaryControl_=function(t){if(ky in t){var n=t[ky];n===nA?this.upgradeIfSecondaryHealthy_():n===eA?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===tA&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},e.prototype.onSecondaryMessageReceived_=function(t){var n=Gc("t",t),r=Gc("d",t);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)},e.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:iA,d:{}}}))},e.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:nA,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:rA,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},e.prototype.onPrimaryMessageReceived_=function(t){var n=Gc("t",t),r=Gc("d",t);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)},e.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},e.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},e.prototype.onControl_=function(t){var n=Gc(ky,t);if(ZC in t){var r=t[ZC];if(n===Nq)this.onHandshake_(r);else if(n===rA){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===kq?this.onConnectionShutdown_(r):n===eA?this.onReset_(r):n===Rq?P_("Server Error: "+r):n===tA?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):P_("Unknown control packet command: "+n)}},e.prototype.onHandshake_=function(t){var n=t.ts,r=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),db!==r&&pn("Protocol version mismatch detected"),this.tryStartUpgrade_())},e.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},e.prototype.startUpgrade_=function(t){var n=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var r=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(r,i),ul(function(){n.secondaryConn_&&(n.log_("Timed out trying to upgrade."),n.secondaryConn_.close())},Math.floor(Iq))},e.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())},e.prototype.onConnectionEstablished_=function(t,n){var r=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ul(function(){r.sendPingOnPrimaryIfNecessary_()},Math.floor(Sq))},e.prototype.sendPingOnPrimaryIfNecessary_=function(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:iA,d:{}}}))},e.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()},e.prototype.onConnectionLost_=function(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Os.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()},e.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},e.prototype.sendData_=function(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)},e.prototype.close=function(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},e.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Q1=function(){function e(){}return e.prototype.put=function(t,n,r,i){},e.prototype.merge=function(t,n,r,i){},e.prototype.refreshAuthToken=function(t){},e.prototype.refreshAppCheckToken=function(t){},e.prototype.onDisconnectPut=function(t,n,r){},e.prototype.onDisconnectMerge=function(t,n,r){},e.prototype.onDisconnectCancel=function(t,n){},e.prototype.reportStats=function(t){},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Y1=function(){function e(t){this.allowedEvents_=t,this.listeners_={},$(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return e.prototype.trigger=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(Array.isArray(this.listeners_[t]))for(var i=Ne([],fn(this.listeners_[t])),s=0;s<i.length;s++)i[s].callback.apply(i[s].context,n)},e.prototype.on=function(t,n,r){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:n,context:r});var i=this.getInitialEvent(t);i&&n.apply(r,i)},e.prototype.off=function(t,n,r){this.validateEventType_(t);for(var i=this.listeners_[t]||[],s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}},e.prototype.validateEventType_=function(t){$(this.allowedEvents_.find(function(n){return n===t}),"Unknown event: "+t)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oA=function(e){te(t,e);function t(){var n=e.call(this,["online"])||this;return n.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!ob()&&(window.addEventListener("online",function(){n.online_||(n.online_=!0,n.trigger("online",!0))},!1),window.addEventListener("offline",function(){n.online_&&(n.online_=!1,n.trigger("online",!1))},!1)),n}return t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(n){return $(n==="online","Unknown event type: "+n),[this.online_]},t.prototype.currentlyOnline=function(){return this.online_},t}(Y1);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sA=32,aA=768,Qe=function(){function e(t,n){if(n===void 0){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return e.prototype.toString=function(){for(var t="",n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(t+="/"+this.pieces_[n]);return t||"/"},e}();function $e(){return new Qe("")}function Pe(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Bo(e){return e.pieces_.length-e.pieceNum_}function it(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new Qe(e.pieces_,t)}function mb(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Pq(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)e.pieces_[n]!==""&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}function xl(e,t){return t===void 0&&(t=0),e.pieces_.slice(e.pieceNum_+t)}function X1(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new Qe(t,0)}function vt(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof Qe)for(var r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else for(var i=t.split("/"),r=0;r<i.length;r++)i[r].length>0&&n.push(i[r]);return new Qe(n,0)}function Oe(e){return e.pieceNum_>=e.pieces_.length}function Hn(e,t){var n=Pe(e),r=Pe(t);if(n===null)return t;if(n===r)return Hn(it(e),it(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Oq(e,t){for(var n=xl(e,0),r=xl(t,0),i=0;i<n.length&&i<r.length;i++){var s=fa(n[i],r[i]);if(s!==0)return s}return n.length===r.length?0:n.length<r.length?-1:1}function yb(e,t){if(Bo(e)!==Bo(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Ar(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(Bo(e)>Bo(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var xq=function(){function e(t,n){this.errorPrefix_=n,this.parts_=xl(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=Mp(this.parts_[r]);J1(this)}return e}();function Dq(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=Mp(t),J1(e)}function Lq(e){var t=e.parts_.pop();e.byteLength_-=Mp(t),e.parts_.length>0&&(e.byteLength_-=1)}function J1(e){if(e.byteLength_>aA)throw new Error(e.errorPrefix_+"has a key path longer than "+aA+" bytes ("+e.byteLength_+").");if(e.parts_.length>sA)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+sA+") or object contains a cycle "+Is(e))}function Is(e){return e.parts_.length===0?"":"in property '"+e.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mq=function(e){te(t,e);function t(){var n=e.call(this,["visible"])||this,r,i;return typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(i="visibilitychange",r="hidden"):typeof document.mozHidden<"u"?(i="mozvisibilitychange",r="mozHidden"):typeof document.msHidden<"u"?(i="msvisibilitychange",r="msHidden"):typeof document.webkitHidden<"u"&&(i="webkitvisibilitychange",r="webkitHidden")),n.visible_=!0,i&&document.addEventListener(i,function(){var s=!document[r];s!==n.visible_&&(n.visible_=s,n.trigger("visible",s))},!1),n}return t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(n){return $(n==="visible","Unknown event type: "+n),[this.visible_]},t}(Y1);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qc=1e3,Fq=60*5*1e3,Uq=3*1e3,uA=30*1e3,jq=1.3,Vq=3e4,Bq="server_kill",cA=3,Ks=function(e){te(t,e);function t(n,r,i,s,a,c,l,h){var d=e.call(this)||this;if(d.repoInfo_=n,d.applicationId_=r,d.onDataUpdate_=i,d.onConnectStatus_=s,d.onServerInfoUpdate_=a,d.authTokenProvider_=c,d.appCheckTokenProvider_=l,d.authOverride_=h,d.id=t.nextPersistentConnectionId_++,d.log_=cf("p:"+d.id+":"),d.interruptReasons_={},d.listens=new Map,d.outstandingPuts_=[],d.outstandingGets_=[],d.outstandingPutCount_=0,d.outstandingGetCount_=0,d.onDisconnectRequestQueue_=[],d.connected_=!1,d.reconnectDelay_=Qc,d.maxReconnectDelay_=Fq,d.securityDebugCallback_=null,d.lastSessionId=null,d.establishConnectionTimer_=null,d.visible_=!1,d.requestCBHash_={},d.requestNumber_=0,d.realtime_=null,d.authToken_=null,d.appCheckToken_=null,d.forceTokenRefresh_=!1,d.invalidAuthTokenCount_=0,d.invalidAppCheckTokenCount_=0,d.firstConnection_=!0,d.lastConnectionAttemptTime_=null,d.lastConnectionEstablishedTime_=null,h&&!y1())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return Mq.getInstance().on("visible",d.onVisible_,d),n.host.indexOf("fblocal")===-1&&oA.getInstance().on("online",d.onOnline_,d),d}return t.prototype.sendRequest=function(n,r,i){var s=++this.requestNumber_,a={r:s,a:n,b:r};this.log_(Bt(a)),$(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(a),i&&(this.requestCBHash_[s]=i)},t.prototype.get=function(n){var r=this;this.initConnection_();var i=new Jt,s={p:n._path.toString(),q:n._queryObject},a={action:"g",request:s,onComplete:function(l){var h=l.d;l.s==="ok"?(r.onDataUpdate_(s.p,h,!1,null),i.resolve(h)):i.reject(h)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;var c=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var l=r.outstandingGets_[c];l===void 0||a!==l||(delete r.outstandingGets_[c],r.outstandingGetCount_--,r.outstandingGetCount_===0&&(r.outstandingGets_=[]),r.log_("get "+c+" timed out on connection"),i.reject(new Error("Client is offline.")))},Uq),this.connected_&&this.sendGet_(c),i.promise},t.prototype.listen=function(n,r,i,s){this.initConnection_();var a=n._queryIdentifier,c=n._path.toString();this.log_("Listen called for "+c+" "+a),this.listens.has(c)||this.listens.set(c,new Map),$(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),$(!this.listens.get(c).has(a),"listen() called twice for same path/queryId.");var l={onComplete:s,hashFn:r,query:n,tag:i};this.listens.get(c).set(a,l),this.connected_&&this.sendListen_(l)},t.prototype.sendGet_=function(n){var r=this,i=this.outstandingGets_[n];this.sendRequest("g",i.request,function(s){delete r.outstandingGets_[n],r.outstandingGetCount_--,r.outstandingGetCount_===0&&(r.outstandingGets_=[]),i.onComplete&&i.onComplete(s)})},t.prototype.sendListen_=function(n){var r=this,i=n.query,s=i._path.toString(),a=i._queryIdentifier;this.log_("Listen on "+s+" for "+a);var c={p:s},l="q";n.tag&&(c.q=i._queryObject,c.t=n.tag),c.h=n.hashFn(),this.sendRequest(l,c,function(h){var d=h.d,v=h.s;t.warnOnListenWarnings_(d,i);var m=r.listens.get(s)&&r.listens.get(s).get(a);m===n&&(r.log_("listen response",h),v!=="ok"&&r.removeListen_(s,a),n.onComplete&&n.onComplete(v,d))})},t.warnOnListenWarnings_=function(n,r){if(n&&typeof n=="object"&&_r(n,"w")){var i=Xs(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){var s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',a=r._path.toString();pn("Using an unspecified index. Your data will be downloaded and "+("filtered on the client. Consider adding "+s+" at ")+(a+" to your security rules for better performance."))}}},t.prototype.refreshAuthToken=function(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(n)},t.prototype.reduceReconnectDelayIfAdminCredential_=function(n){var r=n&&n.length===40;(r||oB(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=uA)},t.prototype.refreshAppCheckToken=function(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},function(){})},t.prototype.tryAuth=function(){var n=this;if(this.connected_&&this.authToken_){var r=this.authToken_,i=iB(r)?"auth":"gauth",s={cred:r};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(i,s,function(a){var c=a.s,l=a.d||"error";n.authToken_===r&&(c==="ok"?n.invalidAuthTokenCount_=0:n.onAuthRevoked_(c,l))})}},t.prototype.tryAppCheck=function(){var n=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},function(r){var i=r.s,s=r.d||"error";i==="ok"?n.invalidAppCheckTokenCount_=0:n.onAppCheckRevoked_(i,s)})},t.prototype.unlisten=function(n,r){var i=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),$(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");var a=this.removeListen_(i,s);a&&this.connected_&&this.sendUnlisten_(i,s,n._queryObject,r)},t.prototype.sendUnlisten_=function(n,r,i,s){this.log_("Unlisten on "+n+" for "+r);var a={p:n},c="n";s&&(a.q=i,a.t=s),this.sendRequest(c,a)},t.prototype.onDisconnectPut=function(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})},t.prototype.onDisconnectMerge=function(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})},t.prototype.onDisconnectCancel=function(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})},t.prototype.sendOnDisconnect_=function(n,r,i,s){var a={p:r,d:i};this.log_("onDisconnect "+n,a),this.sendRequest(n,a,function(c){s&&setTimeout(function(){s(c.s,c.d)},Math.floor(0))})},t.prototype.put=function(n,r,i,s){this.putInternal("p",n,r,i,s)},t.prototype.merge=function(n,r,i,s){this.putInternal("m",n,r,i,s)},t.prototype.putInternal=function(n,r,i,s,a){this.initConnection_();var c={p:r,d:i};a!==void 0&&(c.h=a),this.outstandingPuts_.push({action:n,request:c,onComplete:s}),this.outstandingPutCount_++;var l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+r)},t.prototype.sendPut_=function(n){var r=this,i=this.outstandingPuts_[n].action,s=this.outstandingPuts_[n].request,a=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(i,s,function(c){r.log_(i+" response",c),delete r.outstandingPuts_[n],r.outstandingPutCount_--,r.outstandingPutCount_===0&&(r.outstandingPuts_=[]),a&&a(c.s,c.d)})},t.prototype.reportStats=function(n){var r=this;if(this.connected_){var i={c:n};this.log_("reportStats",i),this.sendRequest("s",i,function(s){var a=s.s;if(a!=="ok"){var c=s.d;r.log_("reportStats","Error sending stats: "+c)}})}},t.prototype.onDataMessage_=function(n){if("r"in n){this.log_("from server: "+Bt(n));var r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}},t.prototype.onDataPush_=function(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):P_("Unrecognized action received from server: "+Bt(n)+`
Are you using the latest client?`)},t.prototype.onReady_=function(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},t.prototype.scheduleConnect_=function(n){var r=this;$(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){r.establishConnectionTimer_=null,r.establishConnection_()},Math.floor(n))},t.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},t.prototype.onVisible_=function(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Qc,this.realtime_||this.scheduleConnect_(0)),this.visible_=n},t.prototype.onOnline_=function(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Qc,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},t.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(!this.visible_)this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime();else if(this.lastConnectionEstablishedTime_){var n=new Date().getTime()-this.lastConnectionEstablishedTime_;n>Vq&&(this.reconnectDelay_=Qc),this.lastConnectionEstablishedTime_=null}var r=new Date().getTime()-this.lastConnectionAttemptTime_,i=Math.max(0,this.reconnectDelay_-r);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*jq)}this.onConnectStatus_(!1)},t.prototype.establishConnection_=function(){return A(this,void 0,void 0,function(){var n,r,i,s,a,c,l,h,d,v,m,y,w,E,T=this;return C(this,function(k){switch(k.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null,n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+t.nextConnectionId_++,a=this.lastSessionId,c=!1,l=null,h=function(){l?l.close():(c=!0,i())},d=function(P){$(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(P)},this.realtime_={close:h,sendRequest:d},v=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,k.label=1;case 1:return k.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(v),this.appCheckTokenProvider_.getToken(v)])];case 2:return m=fn.apply(void 0,[k.sent(),2]),y=m[0],w=m[1],c?Qt("getToken() completed but was canceled"):(Qt("getToken() completed. Creating connection."),this.authToken_=y&&y.accessToken,this.appCheckToken_=w&&w.token,l=new G1(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,function(P){pn(P+" ("+T.repoInfo_.toString()+")"),T.interrupt(Bq)},a)),[3,4];case 3:return E=k.sent(),this.log_("Failed to get token: "+E),c||(this.repoInfo_.nodeAdmin&&pn(E),h()),[3,4];case 4:return[2]}})})},t.prototype.interrupt=function(n){Qt("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},t.prototype.resume=function(n){Qt("Resuming connection for reason: "+n),delete this.interruptReasons_[n],k_(this.interruptReasons_)&&(this.reconnectDelay_=Qc,this.realtime_||this.scheduleConnect_(0))},t.prototype.handleTimestamp_=function(n){var r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})},t.prototype.cancelSentTransactions_=function(){for(var n=0;n<this.outstandingPuts_.length;n++){var r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])},t.prototype.onListenRevoked_=function(n,r){var i;r?i=r.map(function(a){return fb(a)}).join("$"):i="default";var s=this.removeListen_(n,i);s&&s.onComplete&&s.onComplete("permission_denied")},t.prototype.removeListen_=function(n,r){var i=new Qe(n).toString(),s;if(this.listens.has(i)){var a=this.listens.get(i);s=a.get(r),a.delete(r),a.size===0&&this.listens.delete(i)}else s=void 0;return s},t.prototype.onAuthRevoked_=function(n,r){Qt("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=cA&&(this.reconnectDelay_=uA,this.authTokenProvider_.notifyForInvalidToken()))},t.prototype.onAppCheckRevoked_=function(n,r){Qt("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=cA&&this.appCheckTokenProvider_.notifyForInvalidToken())},t.prototype.onSecurityDebugPacket_=function(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))},t.prototype.restoreState_=function(){var n,r,i,s;this.tryAuth(),this.tryAppCheck();try{for(var a=tn(this.listens.values()),c=a.next();!c.done;c=a.next()){var l=c.value;try{for(var h=(i=void 0,tn(l.values())),d=h.next();!d.done;d=h.next()){var v=d.value;this.sendListen_(v)}}catch(w){i={error:w}}finally{try{d&&!d.done&&(s=h.return)&&s.call(h)}finally{if(i)throw i.error}}}}catch(w){n={error:w}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}for(var m=0;m<this.outstandingPuts_.length;m++)this.outstandingPuts_[m]&&this.sendPut_(m);for(;this.onDisconnectRequestQueue_.length;){var y=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(y.action,y.pathString,y.data,y.onComplete)}for(var m=0;m<this.outstandingGets_.length;m++)this.outstandingGets_[m]&&this.sendGet_(m)},t.prototype.sendConnectStats_=function(){var n={},r="js";n["sdk."+r+"."+S1.replace(/\./g,"-")]=1,ob()?n["framework.cordova"]=1:m1()&&(n["framework.reactnative"]=1),this.reportStats(n)},t.prototype.shouldReconnect_=function(){var n=oA.getInstance().currentlyOnline();return k_(this.interruptReasons_)&&n},t.nextPersistentConnectionId_=0,t.nextConnectionId_=0,t}(Q1);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je=function(){function e(t,n){this.name=t,this.node=n}return e.Wrap=function(t,n){return new e(t,n)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Up=function(){function e(){}return e.prototype.getCompare=function(){return this.compare.bind(this)},e.prototype.indexedValueChanged=function(t,n){var r=new je(Xi,t),i=new je(Xi,n);return this.compare(r,i)!==0},e.prototype.minPost=function(){return je.MIN},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $h,Z1=function(e){te(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t,"__EMPTY_NODE",{get:function(){return $h},set:function(n){$h=n},enumerable:!1,configurable:!0}),t.prototype.compare=function(n,r){return fa(n.name,r.name)},t.prototype.isDefinedOn=function(n){throw $u("KeyIndex.isDefinedOn not expected to be called.")},t.prototype.indexedValueChanged=function(n,r){return!1},t.prototype.minPost=function(){return je.MIN},t.prototype.maxPost=function(){return new je(Ai,$h)},t.prototype.makePost=function(n,r){return $(typeof n=="string","KeyIndex indexValue must always be a string."),new je(n,$h)},t.prototype.toString=function(){return".key"},t}(Up),wi=new Z1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gh=function(){function e(t,n,r,i,s){s===void 0&&(s=null),this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];for(var a=1;!t.isEmpty();)if(t=t,a=n?r(t.key,n):1,i&&(a*=-1),a<0)this.isReverse_?t=t.left:t=t.right;else if(a===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}return e.prototype.getNext=function(){if(this.nodeStack_.length===0)return null;var t=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(t.key,t.value):n={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return n},e.prototype.hasNext=function(){return this.nodeStack_.length>0},e.prototype.peek=function(){if(this.nodeStack_.length===0)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},e}(),Qr=function(){function e(t,n,r,i,s){this.key=t,this.value=n,this.color=r??e.RED,this.left=i??Hi.EMPTY_NODE,this.right=s??Hi.EMPTY_NODE}return e.prototype.copy=function(t,n,r,i,s){return new e(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)},e.prototype.count=function(){return this.left.count()+1+this.right.count()},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},e.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},e.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},e.prototype.minKey=function(){return this.min_().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(t,n,r){var i=this,s=r(t,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp_()},e.prototype.removeMin_=function(){if(this.left.isEmpty())return Hi.EMPTY_NODE;var t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()},e.prototype.remove=function(t,n){var r,i;if(r=this,n(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(t,r.key)===0){if(r.right.isEmpty())return Hi.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,n))}return r.fixUp_()},e.prototype.isRed_=function(){return this.color},e.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},e.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t},e.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t},e.prototype.rotateLeft_=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight_=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)},e.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},e.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},e.RED=!0,e.BLACK=!1,e}(),qq=function(){function e(){}return e.prototype.copy=function(t,n,r,i,s){return this},e.prototype.insert=function(t,n,r){return new Qr(t,n,null)},e.prototype.remove=function(t,n){return this},e.prototype.count=function(){return 0},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(t){return!1},e.prototype.reverseTraversal=function(t){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.check_=function(){return 0},e.prototype.isRed_=function(){return!1},e}(),Hi=function(){function e(t,n){n===void 0&&(n=e.EMPTY_NODE),this.comparator_=t,this.root_=n}return e.prototype.insert=function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Qr.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Qr.BLACK,null,null))},e.prototype.get=function(t){for(var n,r=this.root_;!r.isEmpty();){if(n=this.comparator_(t,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null},e.prototype.getPredecessorKey=function(t){for(var n,r=this.root_,i=null;!r.isEmpty();)if(n=this.comparator_(t,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},e.prototype.isEmpty=function(){return this.root_.isEmpty()},e.prototype.count=function(){return this.root_.count()},e.prototype.minKey=function(){return this.root_.minKey()},e.prototype.maxKey=function(){return this.root_.maxKey()},e.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},e.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},e.prototype.getIterator=function(t){return new Gh(this.root_,null,this.comparator_,!1,t)},e.prototype.getIteratorFrom=function(t,n){return new Gh(this.root_,t,this.comparator_,!1,n)},e.prototype.getReverseIteratorFrom=function(t,n){return new Gh(this.root_,t,this.comparator_,!0,n)},e.prototype.getReverseIterator=function(t){return new Gh(this.root_,null,this.comparator_,!0,t)},e.EMPTY_NODE=new qq,e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hq(e,t){return fa(e.name,t.name)}function _b(e,t){return fa(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var x_;function Kq(e){x_=e}var eP=function(e){return typeof e=="number"?"number:"+O1(e):"string:"+e},tP=function(e){if(e.isLeafNode()){var t=e.val();$(typeof t=="string"||typeof t=="number"||typeof t=="object"&&_r(t,".sv"),"Priority must be a string or number.")}else $(e===x_||e.isEmpty(),"priority of unexpected type.");$(e===x_||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lA,yu=function(){function e(t,n){n===void 0&&(n=e.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,$(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),tP(this.priorityNode_)}return Object.defineProperty(e,"__childrenNodeConstructor",{get:function(){return lA},set:function(t){lA=t},enumerable:!1,configurable:!0}),e.prototype.isLeafNode=function(){return!0},e.prototype.getPriority=function(){return this.priorityNode_},e.prototype.updatePriority=function(t){return new e(this.value_,t)},e.prototype.getImmediateChild=function(t){return t===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.getChild=function(t){return Oe(t)?this:Pe(t)===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.hasChild=function(){return!1},e.prototype.getPredecessorChildName=function(t,n){return null},e.prototype.updateImmediateChild=function(t,n){return t===".priority"?this.updatePriority(n):n.isEmpty()&&t!==".priority"?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)},e.prototype.updateChild=function(t,n){var r=Pe(t);return r===null?n:n.isEmpty()&&r!==".priority"?this:($(r!==".priority"||Bo(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(it(t),n)))},e.prototype.isEmpty=function(){return!1},e.prototype.numChildren=function(){return 0},e.prototype.forEachChild=function(t,n){return!1},e.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},e.prototype.hash=function(){if(this.lazyHash_===null){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+eP(this.priorityNode_.val())+":");var n=typeof this.value_;t+=n+":",n==="number"?t+=O1(this.value_):t+=this.value_,this.lazyHash_=R1(t)}return this.lazyHash_},e.prototype.getValue=function(){return this.value_},e.prototype.compareTo=function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:($(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},e.prototype.compareToLeafNode_=function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),s=e.VALUE_TYPE_ORDER.indexOf(r);return $(i>=0,"Unknown leaf type: "+n),$(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:s-i},e.prototype.withIndex=function(){return this},e.prototype.isIndexed=function(){return!0},e.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode()){var n=t;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1},e.VALUE_TYPE_ORDER=["object","boolean","number","string"],e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nP,rP;function zq(e){nP=e}function Wq(e){rP=e}var $q=function(e){te(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.compare=function(n,r){var i=n.node.getPriority(),s=r.node.getPriority(),a=i.compareTo(s);return a===0?fa(n.name,r.name):a},t.prototype.isDefinedOn=function(n){return!n.getPriority().isEmpty()},t.prototype.indexedValueChanged=function(n,r){return!n.getPriority().equals(r.getPriority())},t.prototype.minPost=function(){return je.MIN},t.prototype.maxPost=function(){return new je(Ai,new yu("[PRIORITY-POST]",rP))},t.prototype.makePost=function(n,r){var i=nP(n);return new je(r,new yu("[PRIORITY-POST]",i))},t.prototype.toString=function(){return".priority"},t}(Up),st=new $q;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gq=Math.log(2),Qq=function(){function e(t){var n=function(s){return parseInt(Math.log(s)/Gq,10)},r=function(s){return parseInt(Array(s+1).join("1"),2)};this.count=n(t+1),this.current_=this.count-1;var i=r(this.count);this.bits_=t+1&i}return e.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},e}(),xd=function(e,t,n,r){e.sort(t);var i=function(l,h){var d=h-l,v,m;if(d===0)return null;if(d===1)return v=e[l],m=n?n(v):v,new Qr(m,v.node,Qr.BLACK,null,null);var y=parseInt(d/2,10)+l,w=i(l,y),E=i(y+1,h);return v=e[y],m=n?n(v):v,new Qr(m,v.node,Qr.BLACK,w,E)},s=function(l){for(var h=null,d=null,v=e.length,m=function(k,P){var O=v-k,H=v;v-=k;var K=i(O+1,H),U=e[O],ie=n?n(U):U;y(new Qr(ie,U.node,P,null,K))},y=function(k){h?(h.left=k,h=k):(d=k,h=k)},w=0;w<l.count;++w){var E=l.nextBitIsOne(),T=Math.pow(2,l.count-(w+1));E?m(T,Qr.BLACK):(m(T,Qr.BLACK),m(T,Qr.RED))}return d},a=new Qq(e.length),c=s(a);return new Hi(r||t,c)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ry,$a={},Dd=function(){function e(t,n){this.indexes_=t,this.indexSet_=n}return Object.defineProperty(e,"Default",{get:function(){return $($a&&st,"ChildrenNode.ts has not been loaded"),Ry=Ry||new e({".priority":$a},{".priority":st}),Ry},enumerable:!1,configurable:!0}),e.prototype.get=function(t){var n=Xs(this.indexes_,t);if(!n)throw new Error("No index defined for "+t);return n instanceof Hi?n:null},e.prototype.hasIndex=function(t){return _r(this.indexSet_,t.toString())},e.prototype.addIndex=function(t,n){$(t!==wi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r=[],i=!1,s=n.getIterator(je.Wrap),a=s.getNext();a;)i=i||t.isDefinedOn(a.node),r.push(a),a=s.getNext();var c;i?c=xd(r,t.getCompare()):c=$a;var l=t.toString(),h=me({},this.indexSet_);h[l]=t;var d=me({},this.indexes_);return d[l]=c,new e(d,h)},e.prototype.addToIndexes=function(t,n){var r=this,i=Rd(this.indexes_,function(s,a){var c=Xs(r.indexSet_,a);if($(c,"Missing index implementation for "+a),s===$a)if(c.isDefinedOn(t.node)){for(var l=[],h=n.getIterator(je.Wrap),d=h.getNext();d;)d.name!==t.name&&l.push(d),d=h.getNext();return l.push(t),xd(l,c.getCompare())}else return $a;else{var v=n.get(t.name),m=s;return v&&(m=m.remove(new je(t.name,v))),m.insert(t,t.node)}});return new e(i,this.indexSet_)},e.prototype.removeFromIndexes=function(t,n){var r=Rd(this.indexes_,function(i){if(i===$a)return i;var s=n.get(t.name);return s?i.remove(new je(t.name,s)):i});return new e(r,this.indexSet_)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yc,Se=function(){function e(t,n,r){this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&tP(this.priorityNode_),this.children_.isEmpty()&&$(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(e,"EMPTY_NODE",{get:function(){return Yc||(Yc=new e(new Hi(_b),null,Dd.Default))},enumerable:!1,configurable:!0}),e.prototype.isLeafNode=function(){return!1},e.prototype.getPriority=function(){return this.priorityNode_||Yc},e.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)},e.prototype.getImmediateChild=function(t){if(t===".priority")return this.getPriority();var n=this.children_.get(t);return n===null?Yc:n},e.prototype.getChild=function(t){var n=Pe(t);return n===null?this:this.getImmediateChild(n).getChild(it(t))},e.prototype.hasChild=function(t){return this.children_.get(t)!==null},e.prototype.updateImmediateChild=function(t,n){if($(n,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(n);var r=new je(t,n),i=void 0,s=void 0;n.isEmpty()?(i=this.children_.remove(t),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(t,n),s=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?Yc:this.priorityNode_;return new e(i,a,s)},e.prototype.updateChild=function(t,n){var r=Pe(t);if(r===null)return n;$(Pe(t)!==".priority"||Bo(t)===1,".priority must be the last token in a path");var i=this.getImmediateChild(r).updateChild(it(t),n);return this.updateImmediateChild(r,i)},e.prototype.isEmpty=function(){return this.children_.isEmpty()},e.prototype.numChildren=function(){return this.children_.count()},e.prototype.val=function(t){if(this.isEmpty())return null;var n={},r=0,i=0,s=!0;if(this.forEachChild(st,function(l,h){n[l]=h.val(t),r++,s&&e.INTEGER_REGEXP_.test(l)?i=Math.max(i,Number(l)):s=!1}),!t&&s&&i<2*r){var a=[];for(var c in n)a[c]=n[c];return a}else return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},e.prototype.hash=function(){if(this.lazyHash_===null){var t="";this.getPriority().isEmpty()||(t+="priority:"+eP(this.getPriority().val())+":"),this.forEachChild(st,function(n,r){var i=r.hash();i!==""&&(t+=":"+n+":"+i)}),this.lazyHash_=t===""?"":R1(t)}return this.lazyHash_},e.prototype.getPredecessorChildName=function(t,n,r){var i=this.resolveIndex_(r);if(i){var s=i.getPredecessorKey(new je(t,n));return s?s.name:null}else return this.children_.getPredecessorKey(t)},e.prototype.getFirstChildName=function(t){var n=this.resolveIndex_(t);if(n){var r=n.minKey();return r&&r.name}else return this.children_.minKey()},e.prototype.getFirstChild=function(t){var n=this.getFirstChildName(t);return n?new je(n,this.children_.get(n)):null},e.prototype.getLastChildName=function(t){var n=this.resolveIndex_(t);if(n){var r=n.maxKey();return r&&r.name}else return this.children_.maxKey()},e.prototype.getLastChild=function(t){var n=this.getLastChildName(t);return n?new je(n,this.children_.get(n)):null},e.prototype.forEachChild=function(t,n){var r=this.resolveIndex_(t);return r?r.inorderTraversal(function(i){return n(i.name,i.node)}):this.children_.inorderTraversal(n)},e.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},e.prototype.getIteratorFrom=function(t,n){var r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(t,function(a){return a});for(var i=this.children_.getIteratorFrom(t.name,je.Wrap),s=i.peek();s!=null&&n.compare(s,t)<0;)i.getNext(),s=i.peek();return i},e.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},e.prototype.getReverseIteratorFrom=function(t,n){var r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(t,function(a){return a});for(var i=this.children_.getReverseIteratorFrom(t.name,je.Wrap),s=i.peek();s!=null&&n.compare(s,t)>0;)i.getNext(),s=i.peek();return i},e.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===lf?-1:0},e.prototype.withIndex=function(t){if(t===wi||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)},e.prototype.isIndexed=function(t){return t===wi||this.indexMap_.hasIndex(t)},e.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var n=t;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){for(var r=this.getIterator(st),i=n.getIterator(st),s=r.getNext(),a=i.getNext();s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=r.getNext(),a=i.getNext()}return s===null&&a===null}else return!1;else return!1},e.prototype.resolveIndex_=function(t){return t===wi?null:this.indexMap_.get(t.toString())},e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e}(),Yq=function(e){te(t,e);function t(){return e.call(this,new Hi(_b),Se.EMPTY_NODE,Dd.Default)||this}return t.prototype.compareTo=function(n){return n===this?0:1},t.prototype.equals=function(n){return n===this},t.prototype.getPriority=function(){return this},t.prototype.getImmediateChild=function(n){return Se.EMPTY_NODE},t.prototype.isEmpty=function(){return!1},t}(Se),lf=new Yq;Object.defineProperties(je,{MIN:{value:new je(Xi,Se.EMPTY_NODE)},MAX:{value:new je(Ai,lf)}});Z1.__EMPTY_NODE=Se.EMPTY_NODE;yu.__childrenNodeConstructor=Se;Kq(lf);Wq(lf);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xq=!0;function yt(e,t){if(t===void 0&&(t=null),e===null)return Se.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(t=e[".priority"]),$(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){var n=e;return new yu(n,yt(t))}if(!(e instanceof Array)&&Xq){var r=[],i=!1,s=e;if(zt(s,function(h,d){if(h.substring(0,1)!=="."){var v=yt(d);v.isEmpty()||(i=i||!v.getPriority().isEmpty(),r.push(new je(h,v)))}}),r.length===0)return Se.EMPTY_NODE;var a=xd(r,Hq,function(h){return h.name},_b);if(i){var c=xd(r,st.getCompare());return new Se(a,yt(t),new Dd({".priority":c},{".priority":st}))}else return new Se(a,yt(t),Dd.Default)}else{var l=Se.EMPTY_NODE;return zt(e,function(h,d){if(_r(e,h)&&h.substring(0,1)!=="."){var v=yt(d);(v.isLeafNode()||!v.isEmpty())&&(l=l.updateImmediateChild(h,v))}}),l.updatePriority(yt(t))}}zq(yt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wb=function(e){te(t,e);function t(n){var r=e.call(this)||this;return r.indexPath_=n,$(!Oe(n)&&Pe(n)!==".priority","Can't create PathIndex with empty path or .priority key"),r}return t.prototype.extractChild=function(n){return n.getChild(this.indexPath_)},t.prototype.isDefinedOn=function(n){return!n.getChild(this.indexPath_).isEmpty()},t.prototype.compare=function(n,r){var i=this.extractChild(n.node),s=this.extractChild(r.node),a=i.compareTo(s);return a===0?fa(n.name,r.name):a},t.prototype.makePost=function(n,r){var i=yt(n),s=Se.EMPTY_NODE.updateChild(this.indexPath_,i);return new je(r,s)},t.prototype.maxPost=function(){var n=Se.EMPTY_NODE.updateChild(this.indexPath_,lf);return new je(Ai,n)},t.prototype.toString=function(){return xl(this.indexPath_,0).join("/")},t}(Up);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jq=function(e){te(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.compare=function(n,r){var i=n.node.compareTo(r.node);return i===0?fa(n.name,r.name):i},t.prototype.isDefinedOn=function(n){return!0},t.prototype.indexedValueChanged=function(n,r){return!n.equals(r)},t.prototype.minPost=function(){return je.MIN},t.prototype.maxPost=function(){return je.MAX},t.prototype.makePost=function(n,r){var i=yt(n);return new je(r,i)},t.prototype.toString=function(){return".value"},t}(Up),bb=new Jq;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _u="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",D_="-",iP="z",oP=786,Zq=function(){var e=0,t=[];return function(n){var r=n===e;e=n;var i,s=new Array(8);for(i=7;i>=0;i--)s[i]=_u.charAt(n%64),n=Math.floor(n/64);$(n===0,"Cannot push at time == 0");var a=s.join("");if(r){for(i=11;i>=0&&t[i]===63;i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)a+=_u.charAt(t[i]);return $(a.length===20,"nextPushId: Length should be 20."),a}}(),fA=function(e){if(e===""+hb)return D_;var t=Pd(e);if(t!=null)return""+(t+1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);if(n.length<oP)return n.push(D_),n.join("");for(var i=n.length-1;i>=0&&n[i]===iP;)i--;if(i===-1)return Ai;var s=n[i],a=_u.charAt(_u.indexOf(s)+1);return n[i]=a,n.slice(0,i+1).join("")},hA=function(e){if(e===""+x1)return Xi;var t=Pd(e);if(t!=null)return""+(t-1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);return n[n.length-1]===D_?n.length===1?""+hb:(delete n[n.length-1],n.join("")):(n[n.length-1]=_u.charAt(_u.indexOf(n[n.length-1])-1),n.join("")+iP.repeat(oP-n.length))};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sP(e){return{type:"value",snapshotNode:e}}function wu(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Dl(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Ll(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}function e3(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Eb=function(){function e(t){this.index_=t}return e.prototype.updateChild=function(t,n,r,i,s,a){$(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var c=t.getImmediateChild(n);return c.getChild(i).equals(r.getChild(i))&&c.isEmpty()===r.isEmpty()||(a!=null&&(r.isEmpty()?t.hasChild(n)?a.trackChildChange(Dl(n,c)):$(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):c.isEmpty()?a.trackChildChange(wu(n,r)):a.trackChildChange(Ll(n,r,c))),t.isLeafNode()&&r.isEmpty())?t:t.updateImmediateChild(n,r).withIndex(this.index_)},e.prototype.updateFullNode=function(t,n,r){return r!=null&&(t.isLeafNode()||t.forEachChild(st,function(i,s){n.hasChild(i)||r.trackChildChange(Dl(i,s))}),n.isLeafNode()||n.forEachChild(st,function(i,s){if(t.hasChild(i)){var a=t.getImmediateChild(i);a.equals(s)||r.trackChildChange(Ll(i,s,a))}else r.trackChildChange(wu(i,s))})),n.withIndex(this.index_)},e.prototype.updatePriority=function(t,n){return t.isEmpty()?Se.EMPTY_NODE:t.updatePriority(n)},e.prototype.filtersNodes=function(){return!1},e.prototype.getIndexedFilter=function(){return this},e.prototype.getIndex=function(){return this.index_},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var aP=function(){function e(t){this.indexedFilter_=new Eb(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return e.prototype.getStartPost=function(){return this.startPost_},e.prototype.getEndPost=function(){return this.endPost_},e.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},e.prototype.updateChild=function(t,n,r,i,s,a){return this.matches(new je(n,r))||(r=Se.EMPTY_NODE),this.indexedFilter_.updateChild(t,n,r,i,s,a)},e.prototype.updateFullNode=function(t,n,r){n.isLeafNode()&&(n=Se.EMPTY_NODE);var i=n.withIndex(this.index_);i=i.updatePriority(Se.EMPTY_NODE);var s=this;return n.forEachChild(st,function(a,c){s.matches(new je(a,c))||(i=i.updateImmediateChild(a,Se.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,i,r)},e.prototype.updatePriority=function(t,n){return t},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.indexedFilter_},e.prototype.getIndex=function(){return this.index_},e.getStartPost_=function(t){if(t.hasStart()){var n=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),n)}else return t.getIndex().minPost()},e.getEndPost_=function(t){if(t.hasEnd()){var n=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),n)}else return t.getIndex().maxPost()},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var t3=function(){function e(t){this.rangedFilter_=new aP(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return e.prototype.updateChild=function(t,n,r,i,s,a){return this.rangedFilter_.matches(new je(n,r))||(r=Se.EMPTY_NODE),t.getImmediateChild(n).equals(r)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,n,r,i,s,a):this.fullLimitUpdateChild_(t,n,r,s,a)},e.prototype.updateFullNode=function(t,n,r){var i;if(n.isLeafNode()||n.isEmpty())i=Se.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=Se.EMPTY_NODE.withIndex(this.index_);var s=void 0;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var a=0;s.hasNext()&&a<this.limit_;){var c=s.getNext(),l=void 0;if(this.reverse_?l=this.index_.compare(this.rangedFilter_.getStartPost(),c)<=0:l=this.index_.compare(c,this.rangedFilter_.getEndPost())<=0,l)i=i.updateImmediateChild(c.name,c.node),a++;else break}}else{i=n.withIndex(this.index_),i=i.updatePriority(Se.EMPTY_NODE);var h=void 0,d=void 0,v=void 0,s=void 0;if(this.reverse_){s=i.getReverseIterator(this.index_),h=this.rangedFilter_.getEndPost(),d=this.rangedFilter_.getStartPost();var m=this.index_.getCompare();v=function(T,k){return m(k,T)}}else s=i.getIterator(this.index_),h=this.rangedFilter_.getStartPost(),d=this.rangedFilter_.getEndPost(),v=this.index_.getCompare();for(var a=0,y=!1;s.hasNext();){var c=s.getNext();!y&&v(h,c)<=0&&(y=!0);var l=y&&a<this.limit_&&v(c,d)<=0;l?a++:i=i.updateImmediateChild(c.name,Se.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,i,r)},e.prototype.updatePriority=function(t,n){return t},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},e.prototype.getIndex=function(){return this.index_},e.prototype.fullLimitUpdateChild_=function(t,n,r,i,s){var a;if(this.reverse_){var c=this.index_.getCompare();a=function(P,O){return c(O,P)}}else a=this.index_.getCompare();var l=t;$(l.numChildren()===this.limit_,"");var h=new je(n,r),d=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),v=this.rangedFilter_.matches(h);if(l.hasChild(n)){for(var m=l.getImmediateChild(n),y=i.getChildAfterChild(this.index_,d,this.reverse_);y!=null&&(y.name===n||l.hasChild(y.name));)y=i.getChildAfterChild(this.index_,y,this.reverse_);var w=y==null?1:a(y,h),E=v&&!r.isEmpty()&&w>=0;if(E)return s!=null&&s.trackChildChange(Ll(n,r,m)),l.updateImmediateChild(n,r);s!=null&&s.trackChildChange(Dl(n,m));var T=l.updateImmediateChild(n,Se.EMPTY_NODE),k=y!=null&&this.rangedFilter_.matches(y);return k?(s!=null&&s.trackChildChange(wu(y.name,y.node)),T.updateImmediateChild(y.name,y.node)):T}else return r.isEmpty()?t:v&&a(d,h)>=0?(s!=null&&(s.trackChildChange(Dl(d.name,d.node)),s.trackChildChange(wu(n,r))),l.updateImmediateChild(n,r).updateImmediateChild(d.name,Se.EMPTY_NODE)):t},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var uP=function(){function e(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=st}return e.prototype.hasStart=function(){return this.startSet_},e.prototype.hasStartAfter=function(){return this.startAfterSet_},e.prototype.hasEndBefore=function(){return this.endBeforeSet_},e.prototype.isViewFromLeft=function(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"},e.prototype.getIndexStartValue=function(){return $(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},e.prototype.getIndexStartName=function(){return $(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Xi},e.prototype.hasEnd=function(){return this.endSet_},e.prototype.getIndexEndValue=function(){return $(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},e.prototype.getIndexEndName=function(){return $(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ai},e.prototype.hasLimit=function(){return this.limitSet_},e.prototype.hasAnchoredLimit=function(){return this.limitSet_&&this.viewFrom_!==""},e.prototype.getLimit=function(){return $(this.limitSet_,"Only valid if limit has been set"),this.limit_},e.prototype.getIndex=function(){return this.index_},e.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},e.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===st},e.prototype.copy=function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},e}();function n3(e){return e.loadsAllData()?new Eb(e.getIndex()):e.hasLimit()?new t3(e):new aP(e)}function r3(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}function i3(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}function L_(e,t,n){var r=e.copy();return r.startSet_=!0,t===void 0&&(t=null),r.indexStartValue_=t,n!=null?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function o3(e,t,n){var r;if(e.index_===wi)typeof t=="string"&&(t=fA(t)),r=L_(e,t,n);else{var i=void 0;n==null?i=Ai:i=fA(n),r=L_(e,t,i)}return r.startAfterSet_=!0,r}function M_(e,t,n){var r=e.copy();return r.endSet_=!0,t===void 0&&(t=null),r.indexEndValue_=t,n!==void 0?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function s3(e,t,n){var r,i;return e.index_===wi?(typeof t=="string"&&(t=hA(t)),i=M_(e,t,n)):(n==null?r=Xi:r=hA(n),i=M_(e,t,r)),i.endBeforeSet_=!0,i}function jp(e,t){var n=e.copy();return n.index_=t,n}function dA(e){var t={};if(e.isDefault())return t;var n;return e.index_===st?n="$priority":e.index_===bb?n="$value":e.index_===wi?n="$key":($(e.index_ instanceof wb,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=Bt(n),e.startSet_&&(t.startAt=Bt(e.indexStartValue_),e.startNameSet_&&(t.startAt+=","+Bt(e.indexStartName_))),e.endSet_&&(t.endAt=Bt(e.indexEndValue_),e.endNameSet_&&(t.endAt+=","+Bt(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function pA(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;n===""&&(e.isViewFromLeft()?n="l":n="r"),t.vf=n}return e.index_!==st&&(t.i=e.index_.toString()),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var a3=function(e){te(t,e);function t(n,r,i,s){var a=e.call(this)||this;return a.repoInfo_=n,a.onDataUpdate_=r,a.authTokenProvider_=i,a.appCheckTokenProvider_=s,a.log_=cf("p:rest:"),a.listens_={},a}return t.prototype.reportStats=function(n){throw new Error("Method not implemented.")},t.getListenId_=function(n,r){return r!==void 0?"tag$"+r:($(n._queryParams.isDefault(),"should have a tag if it's not a default query."),n._path.toString())},t.prototype.listen=function(n,r,i,s){var a=this,c=n._path.toString();this.log_("Listen called for "+c+" "+n._queryIdentifier);var l=t.getListenId_(n,i),h={};this.listens_[l]=h;var d=dA(n._queryParams);this.restRequest_(c+".json",d,function(v,m){var y=m;if(v===404&&(y=null,v=null),v===null&&a.onDataUpdate_(c,y,!1,i),Xs(a.listens_,l)===h){var w;v?v===401?w="permission_denied":w="rest_error:"+v:w="ok",s(w,null)}})},t.prototype.unlisten=function(n,r){var i=t.getListenId_(n,r);delete this.listens_[i]},t.prototype.get=function(n){var r=this,i=dA(n._queryParams),s=n._path.toString(),a=new Jt;return this.restRequest_(s+".json",i,function(c,l){var h=l;c===404&&(h=null,c=null),c===null?(r.onDataUpdate_(s,h,!1,null),a.resolve(h)):a.reject(new Error(h))}),a.promise},t.prototype.refreshAuthToken=function(n){},t.prototype.restRequest_=function(n,r,i){var s=this;return r===void 0&&(r={}),r.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(function(a){var c=fn(a,2),l=c[0],h=c[1];l&&l.accessToken&&(r.auth=l.accessToken),h&&h.token&&(r.ac=h.token);var d=(s.repoInfo_.secure?"https://":"http://")+s.repoInfo_.host+n+"?ns="+s.repoInfo_.namespace+sB(r);s.log_("Sending REST request for "+d);var v=new XMLHttpRequest;v.onreadystatechange=function(){if(i&&v.readyState===4){s.log_("REST Response for "+d+" received. status:",v.status,"response:",v.responseText);var m=null;if(v.status>=200&&v.status<300){try{m=Ol(v.responseText)}catch{pn("Failed to parse JSON response for "+d+": "+v.responseText)}i(null,m)}else v.status!==401&&v.status!==404&&pn("Got unsuccessful REST response for "+d+" Status: "+v.status),i(v.status);i=null}},v.open("GET",d,!0),v.send()})},t}(Q1);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var u3=function(){function e(){this.rootNode_=Se.EMPTY_NODE}return e.prototype.getNode=function(t){return this.rootNode_.getChild(t)},e.prototype.updateSnapshot=function(t,n){this.rootNode_=this.rootNode_.updateChild(t,n)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ld(){return{value:null,children:new Map}}function Yu(e,t,n){if(Oe(t))e.value=n,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(t,n);else{var r=Pe(t);e.children.has(r)||e.children.set(r,Ld());var i=e.children.get(r);t=it(t),Yu(i,t,n)}}function F_(e,t){if(Oe(t))return e.value=null,e.children.clear(),!0;if(e.value!==null){if(e.value.isLeafNode())return!1;var n=e.value;return e.value=null,n.forEachChild(st,function(s,a){Yu(e,new Qe(s),a)}),F_(e,t)}else if(e.children.size>0){var r=Pe(t);if(t=it(t),e.children.has(r)){var i=F_(e.children.get(r),t);i&&e.children.delete(r)}return e.children.size===0}else return!0}function U_(e,t,n){e.value!==null?n(t,e.value):c3(e,function(r,i){var s=new Qe(t.toString()+"/"+r);U_(i,s,n)})}function c3(e,t){e.children.forEach(function(n,r){t(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cP=function(){function e(t){this.collection_=t,this.last_=null}return e.prototype.get=function(){var t=this.collection_.get(),n=me({},t);return this.last_&&zt(this.last_,function(r,i){n[r]=n[r]-i}),this.last_=t,n},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vA=10*1e3,l3=30*1e3,f3=5*60*1e3,h3=function(){function e(t,n){this.server_=n,this.statsToReport_={},this.statsListener_=new cP(t);var r=vA+(l3-vA)*Math.random();ul(this.reportStats_.bind(this),Math.floor(r))}return e.prototype.reportStats_=function(){var t=this,n=this.statsListener_.get(),r={},i=!1;zt(n,function(s,a){a>0&&_r(t.statsToReport_,s)&&(r[s]=a,i=!0)}),i&&this.server_.reportStats(r),ul(this.reportStats_.bind(this),Math.floor(Math.random()*2*f3))},e}();function d3(e,t){e.statsToReport_[t]=!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jr;(function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Jr||(Jr={}));function Tb(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Ib(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Sb(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var p3=function(){function e(t,n,r){this.path=t,this.affectedTree=n,this.revert=r,this.type=Jr.ACK_USER_WRITE,this.source=Tb()}return e.prototype.operationForChild=function(t){if(Oe(this.path)){if(this.affectedTree.value!=null)return $(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new Qe(t));return new e($e(),n,this.revert)}else return $(Pe(this.path)===t,"operationForChild called for unrelated child."),new e(it(this.path),this.affectedTree,this.revert)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lP=function(){function e(t,n){this.source=t,this.path=n,this.type=Jr.LISTEN_COMPLETE}return e.prototype.operationForChild=function(t){return Oe(this.path)?new e(this.source,$e()):new e(this.source,it(this.path))},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vp=function(){function e(t,n,r){this.source=t,this.path=n,this.snap=r,this.type=Jr.OVERWRITE}return e.prototype.operationForChild=function(t){return Oe(this.path)?new e(this.source,$e(),this.snap.getImmediateChild(t)):new e(this.source,it(this.path),this.snap)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cb=function(){function e(t,n,r){this.source=t,this.path=n,this.children=r,this.type=Jr.MERGE}return e.prototype.operationForChild=function(t){if(Oe(this.path)){var n=this.children.subtree(new Qe(t));return n.isEmpty()?null:n.value?new Vp(this.source,$e(),n.value):new e(this.source,$e(),n)}else return $(Pe(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,it(this.path),this.children)},e.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qo=function(){function e(t,n,r){this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return e.prototype.isFullyInitialized=function(){return this.fullyInitialized_},e.prototype.isFiltered=function(){return this.filtered_},e.prototype.isCompleteForPath=function(t){if(Oe(t))return this.isFullyInitialized()&&!this.filtered_;var n=Pe(t);return this.isCompleteForChild(n)},e.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},e.prototype.getNode=function(){return this.node_},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var v3=function(){function e(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}return e}();function g3(e,t,n,r){var i=[],s=[];return t.forEach(function(a){a.type==="child_changed"&&e.index_.indexedValueChanged(a.oldSnap,a.snapshotNode)&&s.push(e3(a.childName,a.snapshotNode))}),Xc(e,i,"child_removed",t,r,n),Xc(e,i,"child_added",t,r,n),Xc(e,i,"child_moved",s,r,n),Xc(e,i,"child_changed",t,r,n),Xc(e,i,"value",t,r,n),i}function Xc(e,t,n,r,i,s){var a=r.filter(function(c){return c.type===n});a.sort(function(c,l){return y3(e,c,l)}),a.forEach(function(c){var l=m3(e,c,s);i.forEach(function(h){h.respondsTo(c.type)&&t.push(h.createEvent(l,e.query_))})})}function m3(e,t,n){return t.type==="value"||t.type==="child_removed"||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function y3(e,t,n){if(t.childName==null||n.childName==null)throw $u("Should only compare child_ events.");var r=new je(t.childName,t.snapshotNode),i=new je(n.childName,n.snapshotNode);return e.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bp(e,t){return{eventCache:e,serverCache:t}}function ll(e,t,n,r){return Bp(new qo(t,n,r),e.serverCache)}function fP(e,t,n,r){return Bp(e.eventCache,new qo(t,n,r))}function Md(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Js(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ny,_3=function(){return Ny||(Ny=new Hi(YB)),Ny},wr=function(){function e(t,n){n===void 0&&(n=_3()),this.value=t,this.children=n}return e.fromObject=function(t){var n=new e(null);return zt(t,function(r,i){n=n.set(new Qe(r),i)}),n},e.prototype.isEmpty=function(){return this.value===null&&this.children.isEmpty()},e.prototype.findRootMostMatchingPathAndValue=function(t,n){if(this.value!=null&&n(this.value))return{path:$e(),value:this.value};if(Oe(t))return null;var r=Pe(t),i=this.children.get(r);if(i!==null){var s=i.findRootMostMatchingPathAndValue(it(t),n);if(s!=null){var a=vt(new Qe(r),s.path);return{path:a,value:s.value}}else return null}else return null},e.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},e.prototype.subtree=function(t){if(Oe(t))return this;var n=Pe(t),r=this.children.get(n);return r!==null?r.subtree(it(t)):new e(null)},e.prototype.set=function(t,n){if(Oe(t))return new e(n,this.children);var r=Pe(t),i=this.children.get(r)||new e(null),s=i.set(it(t),n),a=this.children.insert(r,s);return new e(this.value,a)},e.prototype.remove=function(t){if(Oe(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=Pe(t),r=this.children.get(n);if(r){var i=r.remove(it(t)),s=void 0;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new e(null):new e(this.value,s)}else return this},e.prototype.get=function(t){if(Oe(t))return this.value;var n=Pe(t),r=this.children.get(n);return r?r.get(it(t)):null},e.prototype.setTree=function(t,n){if(Oe(t))return n;var r=Pe(t),i=this.children.get(r)||new e(null),s=i.setTree(it(t),n),a=void 0;return s.isEmpty()?a=this.children.remove(r):a=this.children.insert(r,s),new e(this.value,a)},e.prototype.fold=function(t){return this.fold_($e(),t)},e.prototype.fold_=function(t,n){var r={};return this.children.inorderTraversal(function(i,s){r[i]=s.fold_(vt(t,i),n)}),n(t,this.value,r)},e.prototype.findOnPath=function(t,n){return this.findOnPath_(t,$e(),n)},e.prototype.findOnPath_=function(t,n,r){var i=this.value?r(n,this.value):!1;if(i)return i;if(Oe(t))return null;var s=Pe(t),a=this.children.get(s);return a?a.findOnPath_(it(t),vt(n,s),r):null},e.prototype.foreachOnPath=function(t,n){return this.foreachOnPath_(t,$e(),n)},e.prototype.foreachOnPath_=function(t,n,r){if(Oe(t))return this;this.value&&r(n,this.value);var i=Pe(t),s=this.children.get(i);return s?s.foreachOnPath_(it(t),vt(n,i),r):new e(null)},e.prototype.foreach=function(t){this.foreach_($e(),t)},e.prototype.foreach_=function(t,n){this.children.inorderTraversal(function(r,i){i.foreach_(vt(t,r),n)}),this.value&&n(t,this.value)},e.prototype.foreachChild=function(t){this.children.inorderTraversal(function(n,r){r.value&&t(n,r.value)})},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $i=function(){function e(t){this.writeTree_=t}return e.empty=function(){return new e(new wr(null))},e}();function fl(e,t,n){if(Oe(t))return new $i(new wr(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(r!=null){var i=r.path,s=r.value,a=Hn(i,t);return s=s.updateChild(a,n),new $i(e.writeTree_.set(i,s))}else{var c=new wr(n),l=e.writeTree_.setTree(t,c);return new $i(l)}}function j_(e,t,n){var r=e;return zt(n,function(i,s){r=fl(r,vt(t,i),s)}),r}function gA(e,t){if(Oe(t))return $i.empty();var n=e.writeTree_.setTree(t,new wr(null));return new $i(n)}function V_(e,t){return ha(e,t)!=null}function ha(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return n!=null?e.writeTree_.get(n.path).getChild(Hn(n.path,t)):null}function mA(e){var t=[],n=e.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(st,function(r,i){t.push(new je(r,i))}):e.writeTree_.children.inorderTraversal(function(r,i){i.value!=null&&t.push(new je(r,i.value))}),t}function xo(e,t){if(Oe(t))return e;var n=ha(e,t);return n!=null?new $i(new wr(n)):new $i(e.writeTree_.subtree(t))}function B_(e){return e.writeTree_.isEmpty()}function bu(e,t){return hP($e(),e.writeTree_,t)}function hP(e,t,n){if(t.value!=null)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal(function(i,s){i===".priority"?($(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=hP(vt(e,i),s,n)}),!n.getChild(e).isEmpty()&&r!==null&&(n=n.updateChild(vt(e,".priority"),r)),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qp(e,t){return gP(t,e)}function w3(e,t,n,r,i){$(r>e.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=fl(e.visibleWrites,t,n)),e.lastWriteId=r}function b3(e,t,n,r){$(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=j_(e.visibleWrites,t,n),e.lastWriteId=r}function E3(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}function T3(e,t){var n=e.allWrites.findIndex(function(h){return h.writeId===t});$(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,s=!1,a=e.allWrites.length-1;i&&a>=0;){var c=e.allWrites[a];c.visible&&(a>=n&&I3(c,r.path)?i=!1:Ar(r.path,c.path)&&(s=!0)),a--}if(i){if(s)return S3(e),!0;if(r.snap)e.visibleWrites=gA(e.visibleWrites,r.path);else{var l=r.children;zt(l,function(h){e.visibleWrites=gA(e.visibleWrites,vt(r.path,h))})}return!0}else return!1}function I3(e,t){if(e.snap)return Ar(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&Ar(vt(e.path,n),t))return!0;return!1}function S3(e){e.visibleWrites=dP(e.allWrites,C3,$e()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function C3(e){return e.visible}function dP(e,t,n){for(var r=$i.empty(),i=0;i<e.length;++i){var s=e[i];if(t(s)){var a=s.path,c=void 0;if(s.snap)Ar(n,a)?(c=Hn(n,a),r=fl(r,c,s.snap)):Ar(a,n)&&(c=Hn(a,n),r=fl(r,$e(),s.snap.getChild(c)));else if(s.children){if(Ar(n,a))c=Hn(n,a),r=j_(r,c,s.children);else if(Ar(a,n))if(c=Hn(a,n),Oe(c))r=j_(r,$e(),s.children);else{var l=Xs(s.children,Pe(c));if(l){var h=l.getChild(it(c));r=fl(r,$e(),h)}}}else throw $u("WriteRecord should have .snap or .children")}}return r}function pP(e,t,n,r,i){if(!r&&!i){var s=ha(e.visibleWrites,t);if(s!=null)return s;var a=xo(e.visibleWrites,t);if(B_(a))return n;if(n==null&&!V_(a,$e()))return null;var c=n||Se.EMPTY_NODE;return bu(a,c)}else{var l=xo(e.visibleWrites,t);if(!i&&B_(l))return n;if(!i&&n==null&&!V_(l,$e()))return null;var h=function(m){return(m.visible||i)&&(!r||!~r.indexOf(m.writeId))&&(Ar(m.path,t)||Ar(t,m.path))},d=dP(e.allWrites,h,t),c=n||Se.EMPTY_NODE;return bu(d,c)}}function A3(e,t,n){var r=Se.EMPTY_NODE,i=ha(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(st,function(c,l){r=r.updateImmediateChild(c,l)}),r;if(n){var s=xo(e.visibleWrites,t);return n.forEachChild(st,function(c,l){var h=bu(xo(s,new Qe(c)),l);r=r.updateImmediateChild(c,h)}),mA(s).forEach(function(c){r=r.updateImmediateChild(c.name,c.node)}),r}else{var a=xo(e.visibleWrites,t);return mA(a).forEach(function(c){r=r.updateImmediateChild(c.name,c.node)}),r}}function k3(e,t,n,r,i){$(r||i,"Either existingEventSnap or existingServerSnap must exist");var s=vt(t,n);if(V_(e.visibleWrites,s))return null;var a=xo(e.visibleWrites,s);return B_(a)?i.getChild(n):bu(a,i.getChild(n))}function R3(e,t,n,r){var i=vt(t,n),s=ha(e.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){var a=xo(e.visibleWrites,i);return bu(a,r.getNode().getImmediateChild(n))}else return null}function N3(e,t){return ha(e.visibleWrites,t)}function P3(e,t,n,r,i,s,a){var c,l=xo(e.visibleWrites,t),h=ha(l,$e());if(h!=null)c=h;else if(n!=null)c=bu(l,n);else return[];if(c=c.withIndex(a),!c.isEmpty()&&!c.isLeafNode()){for(var d=[],v=a.getCompare(),m=s?c.getReverseIteratorFrom(r,a):c.getIteratorFrom(r,a),y=m.getNext();y&&d.length<i;)v(y,r)!==0&&d.push(y),y=m.getNext();return d}else return[]}function O3(){return{visibleWrites:$i.empty(),allWrites:[],lastWriteId:-1}}function Fd(e,t,n,r){return pP(e.writeTree,e.treePath,t,n,r)}function Ab(e,t){return A3(e.writeTree,e.treePath,t)}function yA(e,t,n,r){return k3(e.writeTree,e.treePath,t,n,r)}function Ud(e,t){return N3(e.writeTree,vt(e.treePath,t))}function x3(e,t,n,r,i,s){return P3(e.writeTree,e.treePath,t,n,r,i,s)}function kb(e,t,n){return R3(e.writeTree,e.treePath,t,n)}function vP(e,t){return gP(vt(e.treePath,t),e.writeTree)}function gP(e,t){return{treePath:e,writeTree:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var D3=function(){function e(){this.changeMap=new Map}return e.prototype.trackChildChange=function(t){var n=t.type,r=t.childName;$(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),$(r!==".priority","Only non-priority child changes can be tracked.");var i=this.changeMap.get(r);if(i){var s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,Ll(r,t.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,Dl(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,wu(r,t.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,Ll(r,t.snapshotNode,i.oldSnap));else throw $u("Illegal combination of changes: "+t+" occurred after "+i)}else this.changeMap.set(r,t)},e.prototype.getChanges=function(){return Array.from(this.changeMap.values())},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var L3=function(){function e(){}return e.prototype.getCompleteChild=function(t){return null},e.prototype.getChildAfterChild=function(t,n,r){return null},e}(),mP=new L3,Rb=function(){function e(t,n,r){r===void 0&&(r=null),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return e.prototype.getCompleteChild=function(t){var n=this.viewCache_.eventCache;if(n.isCompleteForChild(t))return n.getNode().getImmediateChild(t);var r=this.optCompleteServerCache_!=null?new qo(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return kb(this.writes_,t,r)},e.prototype.getChildAfterChild=function(t,n,r){var i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Js(this.viewCache_),s=x3(this.writes_,i,n,1,r,t);return s.length===0?null:s[0]},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M3(e){return{filter:e}}function F3(e,t){$(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),$(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function U3(e,t,n,r,i){var s=new D3,a,c;if(n.type===Jr.OVERWRITE){var l=n;l.source.fromUser?a=q_(e,t,l.path,l.snap,r,i,s):($(l.source.fromServer,"Unknown source."),c=l.source.tagged||t.serverCache.isFiltered()&&!Oe(l.path),a=jd(e,t,l.path,l.snap,r,i,c,s))}else if(n.type===Jr.MERGE){var h=n;h.source.fromUser?a=V3(e,t,h.path,h.children,r,i,s):($(h.source.fromServer,"Unknown source."),c=h.source.tagged||t.serverCache.isFiltered(),a=H_(e,t,h.path,h.children,r,i,c,s))}else if(n.type===Jr.ACK_USER_WRITE){var d=n;d.revert?a=H3(e,t,d.path,r,i,s):a=B3(e,t,d.path,d.affectedTree,r,i,s)}else if(n.type===Jr.LISTEN_COMPLETE)a=q3(e,t,n.path,r,s);else throw $u("Unknown operation type: "+n.type);var v=s.getChanges();return j3(t,a,v),{viewCache:a,changes:v}}function j3(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Md(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(sP(Md(t)))}}function yP(e,t,n,r,i,s){var a=t.eventCache;if(Ud(r,n)!=null)return t;var c=void 0,l=void 0;if(Oe(n))if($(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var h=Js(t),d=h instanceof Se?h:Se.EMPTY_NODE,v=Ab(r,d);c=e.filter.updateFullNode(t.eventCache.getNode(),v,s)}else{var m=Fd(r,Js(t));c=e.filter.updateFullNode(t.eventCache.getNode(),m,s)}else{var y=Pe(n);if(y===".priority"){$(Bo(n)===1,"Can't have a priority with additional path components");var w=a.getNode();l=t.serverCache.getNode();var E=yA(r,n,w,l);E!=null?c=e.filter.updatePriority(w,E):c=a.getNode()}else{var T=it(n),k=void 0;if(a.isCompleteForChild(y)){l=t.serverCache.getNode();var P=yA(r,n,a.getNode(),l);P!=null?k=a.getNode().getImmediateChild(y).updateChild(T,P):k=a.getNode().getImmediateChild(y)}else k=kb(r,y,t.serverCache);k!=null?c=e.filter.updateChild(a.getNode(),y,k,T,i,s):c=a.getNode()}}return ll(t,c,a.isFullyInitialized()||Oe(n),e.filter.filtersNodes())}function jd(e,t,n,r,i,s,a,c){var l=t.serverCache,h,d=a?e.filter:e.filter.getIndexedFilter();if(Oe(n))h=d.updateFullNode(l.getNode(),r,null);else if(d.filtersNodes()&&!l.isFiltered()){var v=l.getNode().updateChild(n,r);h=d.updateFullNode(l.getNode(),v,null)}else{var m=Pe(n);if(!l.isCompleteForPath(n)&&Bo(n)>1)return t;var y=it(n),w=l.getNode().getImmediateChild(m),E=w.updateChild(y,r);m===".priority"?h=d.updatePriority(l.getNode(),E):h=d.updateChild(l.getNode(),m,E,y,mP,null)}var T=fP(t,h,l.isFullyInitialized()||Oe(n),d.filtersNodes()),k=new Rb(i,T,s);return yP(e,T,n,i,k,c)}function q_(e,t,n,r,i,s,a){var c=t.eventCache,l,h,d=new Rb(i,t,s);if(Oe(n))h=e.filter.updateFullNode(t.eventCache.getNode(),r,a),l=ll(t,h,!0,e.filter.filtersNodes());else{var v=Pe(n);if(v===".priority")h=e.filter.updatePriority(t.eventCache.getNode(),r),l=ll(t,h,c.isFullyInitialized(),c.isFiltered());else{var m=it(n),y=c.getNode().getImmediateChild(v),w=void 0;if(Oe(m))w=r;else{var E=d.getCompleteChild(v);E!=null?mb(m)===".priority"&&E.getChild(X1(m)).isEmpty()?w=E:w=E.updateChild(m,r):w=Se.EMPTY_NODE}if(y.equals(w))l=t;else{var T=e.filter.updateChild(c.getNode(),v,w,m,d,a);l=ll(t,T,c.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function _A(e,t){return e.eventCache.isCompleteForChild(t)}function V3(e,t,n,r,i,s,a){var c=t;return r.foreach(function(l,h){var d=vt(n,l);_A(t,Pe(d))&&(c=q_(e,c,d,h,i,s,a))}),r.foreach(function(l,h){var d=vt(n,l);_A(t,Pe(d))||(c=q_(e,c,d,h,i,s,a))}),c}function wA(e,t,n){return n.foreach(function(r,i){t=t.updateChild(r,i)}),t}function H_(e,t,n,r,i,s,a,c){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var l=t,h;Oe(n)?h=r:h=new wr(null).setTree(n,r);var d=t.serverCache.getNode();return h.children.inorderTraversal(function(v,m){if(d.hasChild(v)){var y=t.serverCache.getNode().getImmediateChild(v),w=wA(e,y,m);l=jd(e,l,new Qe(v),w,i,s,a,c)}}),h.children.inorderTraversal(function(v,m){var y=!t.serverCache.isCompleteForChild(v)&&m.value===void 0;if(!d.hasChild(v)&&!y){var w=t.serverCache.getNode().getImmediateChild(v),E=wA(e,w,m);l=jd(e,l,new Qe(v),E,i,s,a,c)}}),l}function B3(e,t,n,r,i,s,a){if(Ud(i,n)!=null)return t;var c=t.serverCache.isFiltered(),l=t.serverCache;if(r.value!=null){if(Oe(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return jd(e,t,n,l.getNode().getChild(n),i,s,c,a);if(Oe(n)){var h=new wr(null);return l.getNode().forEachChild(wi,function(v,m){h=h.set(new Qe(v),m)}),H_(e,t,n,h,i,s,c,a)}else return t}else{var d=new wr(null);return r.foreach(function(v,m){var y=vt(n,v);l.isCompleteForPath(y)&&(d=d.set(v,l.getNode().getChild(y)))}),H_(e,t,n,d,i,s,c,a)}}function q3(e,t,n,r,i){var s=t.serverCache,a=fP(t,s.getNode(),s.isFullyInitialized()||Oe(n),s.isFiltered());return yP(e,a,n,r,mP,i)}function H3(e,t,n,r,i,s){var a;if(Ud(r,n)!=null)return t;var c=new Rb(r,t,i),l=t.eventCache.getNode(),h=void 0;if(Oe(n)||Pe(n)===".priority"){var d=void 0;if(t.serverCache.isFullyInitialized())d=Fd(r,Js(t));else{var v=t.serverCache.getNode();$(v instanceof Se,"serverChildren would be complete if leaf node"),d=Ab(r,v)}d=d,h=e.filter.updateFullNode(l,d,s)}else{var m=Pe(n),y=kb(r,m,t.serverCache);y==null&&t.serverCache.isCompleteForChild(m)&&(y=l.getImmediateChild(m)),y!=null?h=e.filter.updateChild(l,m,y,it(n),c,s):t.eventCache.getNode().hasChild(m)?h=e.filter.updateChild(l,m,Se.EMPTY_NODE,it(n),c,s):h=l,h.isEmpty()&&t.serverCache.isFullyInitialized()&&(a=Fd(r,Js(t)),a.isLeafNode()&&(h=e.filter.updateFullNode(h,a,s)))}return a=t.serverCache.isFullyInitialized()||Ud(r,$e())!=null,ll(t,h,a,e.filter.filtersNodes())}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var K3=function(){function e(t,n){this.query_=t,this.eventRegistrations_=[];var r=this.query_._queryParams,i=new Eb(r.getIndex()),s=n3(r);this.processor_=M3(s);var a=n.serverCache,c=n.eventCache,l=i.updateFullNode(Se.EMPTY_NODE,a.getNode(),null),h=s.updateFullNode(Se.EMPTY_NODE,c.getNode(),null),d=new qo(l,a.isFullyInitialized(),i.filtersNodes()),v=new qo(h,c.isFullyInitialized(),s.filtersNodes());this.viewCache_=Bp(v,d),this.eventGenerator_=new v3(this.query_)}return Object.defineProperty(e.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),e}();function z3(e){return e.viewCache_.serverCache.getNode()}function W3(e){return Md(e.viewCache_)}function $3(e,t){var n=Js(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!Oe(t)&&!n.getImmediateChild(Pe(t)).isEmpty())?n.getChild(t):null}function bA(e){return e.eventRegistrations_.length===0}function G3(e,t){e.eventRegistrations_.push(t)}function EA(e,t,n){var r=[];if(n){$(t==null,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach(function(l){var h=l.createCancelEvent(n,i);h&&r.push(h)})}if(t){for(var s=[],a=0;a<e.eventRegistrations_.length;++a){var c=e.eventRegistrations_[a];if(!c.matches(t))s.push(c);else if(t.hasAnyCallback()){s=s.concat(e.eventRegistrations_.slice(a+1));break}}e.eventRegistrations_=s}else e.eventRegistrations_=[];return r}function TA(e,t,n,r){t.type===Jr.MERGE&&t.source.queryId!==null&&($(Js(e.viewCache_),"We should always have a full cache before handling merges"),$(Md(e.viewCache_),"Missing event cache, even though we have a server cache"));var i=e.viewCache_,s=U3(e.processor_,i,t,n,r);return F3(e.processor_,s.viewCache),$(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,_P(e,s.changes,s.viewCache.eventCache.getNode(),null)}function Q3(e,t){var n=e.viewCache_.eventCache,r=[];if(!n.getNode().isLeafNode()){var i=n.getNode();i.forEachChild(st,function(s,a){r.push(wu(s,a))})}return n.isFullyInitialized()&&r.push(sP(n.getNode())),_P(e,r,n.getNode(),t)}function _P(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return g3(e.eventGenerator_,t,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vd,wP=function(){function e(){this.views=new Map}return e}();function Y3(e){$(!Vd,"__referenceConstructor has already been defined"),Vd=e}function X3(){return $(Vd,"Reference.ts has not been loaded"),Vd}function J3(e){return e.views.size===0}function Nb(e,t,n,r){var i,s,a=t.source.queryId;if(a!==null){var c=e.views.get(a);return $(c!=null,"SyncTree gave us an op for an invalid query."),TA(c,t,n,r)}else{var l=[];try{for(var h=tn(e.views.values()),d=h.next();!d.done;d=h.next()){var c=d.value;l=l.concat(TA(c,t,n,r))}}catch(v){i={error:v}}finally{try{d&&!d.done&&(s=h.return)&&s.call(h)}finally{if(i)throw i.error}}return l}}function bP(e,t,n,r,i){var s=t._queryIdentifier,a=e.views.get(s);if(!a){var c=Fd(n,i?r:null),l=!1;c?l=!0:r instanceof Se?(c=Ab(n,r),l=!1):(c=Se.EMPTY_NODE,l=!1);var h=Bp(new qo(c,l,!1),new qo(r,i,!1));return new K3(t,h)}return a}function Z3(e,t,n,r,i,s){var a=bP(e,t,r,i,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,a),G3(a,n),Q3(a,n)}function eH(e,t,n,r){var i,s,a=t._queryIdentifier,c=[],l=[],h=Ho(e);if(a==="default")try{for(var d=tn(e.views.entries()),v=d.next();!v.done;v=d.next()){var m=fn(v.value,2),y=m[0],w=m[1];l=l.concat(EA(w,n,r)),bA(w)&&(e.views.delete(y),w.query._queryParams.loadsAllData()||c.push(w.query))}}catch(E){i={error:E}}finally{try{v&&!v.done&&(s=d.return)&&s.call(d)}finally{if(i)throw i.error}}else{var w=e.views.get(a);w&&(l=l.concat(EA(w,n,r)),bA(w)&&(e.views.delete(a),w.query._queryParams.loadsAllData()||c.push(w.query)))}return h&&!Ho(e)&&c.push(new(X3())(t._repo,t._path)),{removed:c,events:l}}function EP(e){var t,n,r=[];try{for(var i=tn(e.views.values()),s=i.next();!s.done;s=i.next()){var a=s.value;a.query._queryParams.loadsAllData()||r.push(a)}}catch(c){t={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}function Do(e,t){var n,r,i=null;try{for(var s=tn(e.views.values()),a=s.next();!a.done;a=s.next()){var c=a.value;i=i||$3(c,t)}}catch(l){n={error:l}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return i}function TP(e,t){var n=t._queryParams;if(n.loadsAllData())return Hp(e);var r=t._queryIdentifier;return e.views.get(r)}function IP(e,t){return TP(e,t)!=null}function Ho(e){return Hp(e)!=null}function Hp(e){var t,n;try{for(var r=tn(e.views.values()),i=r.next();!i.done;i=r.next()){var s=i.value;if(s.query._queryParams.loadsAllData())return s}}catch(a){t={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bd;function tH(e){$(!Bd,"__referenceConstructor has already been defined"),Bd=e}function nH(){return $(Bd,"Reference.ts has not been loaded"),Bd}var rH=1,IA=function(){function e(t){this.listenProvider_=t,this.syncPointTree_=new wr(null),this.pendingWriteTree_=O3(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return e}();function Pb(e,t,n,r,i){return w3(e.pendingWriteTree_,t,n,r,i),i?Xu(e,new Vp(Tb(),t,n)):[]}function iH(e,t,n,r){b3(e.pendingWriteTree_,t,n,r);var i=wr.fromObject(n);return Xu(e,new Cb(Tb(),t,i))}function No(e,t,n){n===void 0&&(n=!1);var r=E3(e.pendingWriteTree_,t),i=T3(e.pendingWriteTree_,t);if(i){var s=new wr(null);return r.snap!=null?s=s.set($e(),!0):zt(r.children,function(a){s=s.set(new Qe(a),!0)}),Xu(e,new p3(r.path,s,n))}else return[]}function ff(e,t,n){return Xu(e,new Vp(Ib(),t,n))}function oH(e,t,n){var r=wr.fromObject(n);return Xu(e,new Cb(Ib(),t,r))}function sH(e,t){return Xu(e,new lP(Ib(),t))}function aH(e,t,n){var r=Ob(e,n);if(r){var i=xb(r),s=i.path,a=i.queryId,c=Hn(s,t),l=new lP(Sb(a),c);return Db(e,s,l)}else return[]}function K_(e,t,n,r){var i=t._path,s=e.syncPointTree_.get(i),a=[];if(s&&(t._queryIdentifier==="default"||IP(s,t))){var c=eH(s,t,n,r);J3(s)&&(e.syncPointTree_=e.syncPointTree_.remove(i));var l=c.removed;a=c.events;var h=l.findIndex(function(P){return P._queryParams.loadsAllData()})!==-1,d=e.syncPointTree_.findOnPath(i,function(P,O){return Ho(O)});if(h&&!d){var v=e.syncPointTree_.subtree(i);if(!v.isEmpty())for(var m=fH(v),y=0;y<m.length;++y){var w=m[y],E=w.query,T=AP(e,w);e.listenProvider_.startListening(hl(E),qd(e,E),T.hashFn,T.onComplete)}}if(!d&&l.length>0&&!r)if(h){var k=null;e.listenProvider_.stopListening(hl(t),k)}else l.forEach(function(P){var O=e.queryToTagMap.get(zp(P));e.listenProvider_.stopListening(hl(P),O)});hH(e,l)}return a}function uH(e,t,n,r){var i=Ob(e,r);if(i!=null){var s=xb(i),a=s.path,c=s.queryId,l=Hn(a,t),h=new Vp(Sb(c),l,n);return Db(e,a,h)}else return[]}function cH(e,t,n,r){var i=Ob(e,r);if(i){var s=xb(i),a=s.path,c=s.queryId,l=Hn(a,t),h=wr.fromObject(n),d=new Cb(Sb(c),l,h);return Db(e,a,d)}else return[]}function SA(e,t,n){var r=t._path,i=null,s=!1;e.syncPointTree_.foreachOnPath(r,function(E,T){var k=Hn(E,r);i=i||Do(T,k),s=s||Ho(T)});var a=e.syncPointTree_.get(r);a?(s=s||Ho(a),i=i||Do(a,$e())):(a=new wP,e.syncPointTree_=e.syncPointTree_.set(r,a));var c;if(i!=null)c=!0;else{c=!1,i=Se.EMPTY_NODE;var l=e.syncPointTree_.subtree(r);l.foreachChild(function(E,T){var k=Do(T,$e());k&&(i=i.updateImmediateChild(E,k))})}var h=IP(a,t);if(!h&&!t._queryParams.loadsAllData()){var d=zp(t);$(!e.queryToTagMap.has(d),"View does not exist, but we have a tag");var v=dH();e.queryToTagMap.set(d,v),e.tagToQueryMap.set(v,d)}var m=qp(e.pendingWriteTree_,r),y=Z3(a,t,n,m,i,c);if(!h&&!s){var w=TP(a,t);y=y.concat(pH(e,t,w))}return y}function Kp(e,t,n){var r=!0,i=e.pendingWriteTree_,s=e.syncPointTree_.findOnPath(t,function(a,c){var l=Hn(a,t),h=Do(c,l);if(h)return h});return pP(i,t,s,n,r)}function lH(e,t){var n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,function(h,d){var v=Hn(h,n);r=r||Do(d,v)});var i=e.syncPointTree_.get(n);i?r=r||Do(i,$e()):(i=new wP,e.syncPointTree_=e.syncPointTree_.set(n,i));var s=r!=null,a=s?new qo(r,!0,!1):null,c=qp(e.pendingWriteTree_,t._path),l=bP(i,t,c,s?a.getNode():Se.EMPTY_NODE,s);return W3(l)}function Xu(e,t){return SP(t,e.syncPointTree_,null,qp(e.pendingWriteTree_,$e()))}function SP(e,t,n,r){if(Oe(e.path))return CP(e,t,n,r);var i=t.get($e());n==null&&i!=null&&(n=Do(i,$e()));var s=[],a=Pe(e.path),c=e.operationForChild(a),l=t.children.get(a);if(l&&c){var h=n?n.getImmediateChild(a):null,d=vP(r,a);s=s.concat(SP(c,l,h,d))}return i&&(s=s.concat(Nb(i,e,r,n))),s}function CP(e,t,n,r){var i=t.get($e());n==null&&i!=null&&(n=Do(i,$e()));var s=[];return t.children.inorderTraversal(function(a,c){var l=n?n.getImmediateChild(a):null,h=vP(r,a),d=e.operationForChild(a);d&&(s=s.concat(CP(d,c,l,h)))}),i&&(s=s.concat(Nb(i,e,r,n))),s}function AP(e,t){var n=t.query,r=qd(e,n);return{hashFn:function(){var i=z3(t)||Se.EMPTY_NODE;return i.hash()},onComplete:function(i){if(i==="ok")return r?aH(e,n._path,r):sH(e,n._path);var s=ZB(i,n);return K_(e,n,null,s)}}}function qd(e,t){var n=zp(t);return e.queryToTagMap.get(n)}function zp(e){return e._path.toString()+"$"+e._queryIdentifier}function Ob(e,t){return e.tagToQueryMap.get(t)}function xb(e){var t=e.indexOf("$");return $(t!==-1&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Qe(e.substr(0,t))}}function Db(e,t,n){var r=e.syncPointTree_.get(t);$(r,"Missing sync point for query tag that we're tracking");var i=qp(e.pendingWriteTree_,t);return Nb(r,n,i,null)}function fH(e){return e.fold(function(t,n,r){if(n&&Ho(n)){var i=Hp(n);return[i]}else{var s=[];return n&&(s=EP(n)),zt(r,function(a,c){s=s.concat(c)}),s}})}function hl(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(nH())(e._repo,e._path):e}function hH(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=zp(r),s=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(s)}}}function dH(){return rH++}function pH(e,t,n){var r=t._path,i=qd(e,t),s=AP(e,n),a=e.listenProvider_.startListening(hl(t),i,s.hashFn,s.onComplete),c=e.syncPointTree_.subtree(r);if(i)$(!Ho(c.value),"If we're adding a query, it shouldn't be shadowed");else for(var l=c.fold(function(v,m,y){if(!Oe(v)&&m&&Ho(m))return[Hp(m).query];var w=[];return m&&(w=w.concat(EP(m).map(function(E){return E.query}))),zt(y,function(E,T){w=w.concat(T)}),w}),h=0;h<l.length;++h){var d=l[h];e.listenProvider_.stopListening(hl(d),qd(e,d))}return a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vH=function(){function e(t){this.node_=t}return e.prototype.getImmediateChild=function(t){var n=this.node_.getImmediateChild(t);return new e(n)},e.prototype.node=function(){return this.node_},e}(),gH=function(){function e(t,n){this.syncTree_=t,this.path_=n}return e.prototype.getImmediateChild=function(t){var n=vt(this.path_,t);return new e(this.syncTree_,n)},e.prototype.node=function(){return Kp(this.syncTree_,this.path_)},e}(),mH=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},CA=function(e,t,n){if(!e||typeof e!="object")return e;if($(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return yH(e[".sv"],t,n);if(typeof e[".sv"]=="object")return _H(e[".sv"],t);$(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},yH=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:$(!1,"Unexpected server value: "+e)}},_H=function(e,t,n){e.hasOwnProperty("increment")||$(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;typeof r!="number"&&$(!1,"Unexpected increment value: "+r);var i=t.node();if($(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var s=i,a=s.getValue();return typeof a!="number"?r:a+r},kP=function(e,t,n,r){return Mb(t,new gH(n,e),r)},Lb=function(e,t,n){return Mb(e,new vH(t),n)};function Mb(e,t,n){var r=e.getPriority().val(),i=CA(r,t.getImmediateChild(".priority"),n),s;if(e.isLeafNode()){var a=e,c=CA(a.getValue(),t,n);return c!==a.getValue()||i!==a.getPriority().val()?new yu(c,yt(i)):e}else{var l=e;return s=l,i!==l.getPriority().val()&&(s=s.updatePriority(new yu(i))),l.forEachChild(st,function(h,d){var v=Mb(d,t.getImmediateChild(h),n);v!==d&&(s=s.updateImmediateChild(h,v))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fb=function(){function e(t,n,r){t===void 0&&(t=""),n===void 0&&(n=null),r===void 0&&(r={children:{},childCount:0}),this.name=t,this.parent=n,this.node=r}return e}();function Wp(e,t){for(var n=t instanceof Qe?t:new Qe(t),r=e,i=Pe(n);i!==null;){var s=Xs(r.node.children,i)||{children:{},childCount:0};r=new Fb(i,r,s),n=it(n),i=Pe(n)}return r}function da(e){return e.node.value}function Ub(e,t){e.node.value=t,z_(e)}function RP(e){return e.node.childCount>0}function wH(e){return da(e)===void 0&&!RP(e)}function $p(e,t){zt(e.node.children,function(n,r){t(new Fb(n,e,r))})}function NP(e,t,n,r){n&&!r&&t(e),$p(e,function(i){NP(i,t,!0,r)}),n&&r&&t(e)}function bH(e,t,n){for(var r=n?e:e.parent;r!==null;){if(t(r))return!0;r=r.parent}return!1}function hf(e){return new Qe(e.parent===null?e.name:hf(e.parent)+"/"+e.name)}function z_(e){e.parent!==null&&EH(e.parent,e.name,e)}function EH(e,t,n){var r=wH(n),i=_r(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,z_(e)):!r&&!i&&(e.node.children[t]=n.node,e.node.childCount++,z_(e))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var TH=/[\[\].#$\/\u0000-\u001F\u007F]/,IH=/[\[\].#$\u0000-\u001F\u007F]/,Py=10*1024*1024,Gp=function(e){return typeof e=="string"&&e.length!==0&&!TH.test(e)},PP=function(e){return typeof e=="string"&&e.length!==0&&!IH.test(e)},SH=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),PP(e)},Ml=function(e){return e===null||typeof e=="string"||typeof e=="number"&&!Fp(e)||e&&typeof e=="object"&&_r(e,".sv")},ki=function(e,t,n,r){r&&t===void 0||df(tr(e,"value"),t,n)},df=function(e,t,n){var r=n instanceof Qe?new xq(n,e):n;if(t===void 0)throw new Error(e+"contains undefined "+Is(r));if(typeof t=="function")throw new Error(e+"contains a function "+Is(r)+" with contents = "+t.toString());if(Fp(t))throw new Error(e+"contains "+t.toString()+" "+Is(r));if(typeof t=="string"&&t.length>Py/3&&Mp(t)>Py)throw new Error(e+"contains a string greater than "+Py+" utf8 bytes "+Is(r)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){var i=!1,s=!1;if(zt(t,function(a,c){if(a===".value")i=!0;else if(a!==".priority"&&a!==".sv"&&(s=!0,!Gp(a)))throw new Error(e+" contains an invalid key ("+a+") "+Is(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Dq(r,a),df(e,c,r),Lq(r)}),i&&s)throw new Error(e+' contains ".value" child '+Is(r)+" in addition to actual children.")}},CH=function(e,t){var n,r;for(n=0;n<t.length;n++){r=t[n];for(var i=xl(r),s=0;s<i.length;s++)if(!(i[s]===".priority"&&s===i.length-1)){if(!Gp(i[s]))throw new Error(e+"contains an invalid key ("+i[s]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}t.sort(Oq);var a=null;for(n=0;n<t.length;n++){if(r=t[n],a!==null&&Ar(a,r))throw new Error(e+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}},OP=function(e,t,n,r){if(!(r&&t===void 0)){var i=tr(e,"values");if(!(t&&typeof t=="object")||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");var s=[];zt(t,function(a,c){var l=new Qe(a);if(df(i,c,vt(n,l)),mb(l)===".priority"&&!Ml(c))throw new Error(i+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(l)}),CH(i,s)}},jb=function(e,t,n){if(!(n&&t===void 0)){if(Fp(t))throw new Error(tr(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Ml(t))throw new Error(tr(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},AH=function(e,t,n){if(!(n&&t===void 0))switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(tr(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},pf=function(e,t,n,r){if(!(r&&n===void 0)&&!Gp(n))throw new Error(tr(e,t)+'was an invalid key = "'+n+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},Fl=function(e,t,n,r){if(!(r&&n===void 0)&&!PP(n))throw new Error(tr(e,t)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},kH=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Fl(e,t,n,r)},kr=function(e,t){if(Pe(t)===".info")throw new Error(e+" failed = Can't modify data under /.info/")},xP=function(e,t){var n=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!Gp(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!SH(n))throw new Error(tr(e,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)},RH=function(e,t,n,r){if(!(r&&n===void 0)&&typeof n!="boolean")throw new Error(tr(e,t)+"must be a boolean.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var NH=function(){function e(){this.eventLists_=[],this.recursionDepth_=0}return e}();function Qp(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],s=i.getPath();n!==null&&!yb(s,n.path)&&(e.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&e.eventLists_.push(n)}function Vb(e,t,n){Qp(e,n),DP(e,function(r){return yb(r,t)})}function Mr(e,t,n){Qp(e,n),DP(e,function(r){return Ar(r,t)||Ar(t,r)})}function DP(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i){var s=i.path;t(s)?(PH(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function PH(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(n!==null){e.events[t]=null;var r=n.getEventRunner();Hs&&Qt("event: "+n.toString()),Qu(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var LP="repo_interrupt",OH=25,xH=function(){function e(t,n,r,i){this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new NH,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ld(),this.transactionQueueTree_=new Fb,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return e.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},e}();function DH(e,t,n){if(e.stats_=vb(e.repoInfo_),e.forceRestClient_||tq())e.server_=new a3(e.repoInfo_,function(r,i,s,a){AA(e,r,i,s,a)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(function(){return kA(e,!0)},0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Bt(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new Ks(e.repoInfo_,t,function(r,i,s,a){AA(e,r,i,s,a)},function(r){kA(e,r)},function(r){MH(e,r)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(function(r){e.server_.refreshAuthToken(r)}),e.appCheckProvider_.addTokenChangeListener(function(r){e.server_.refreshAppCheckToken(r.token)}),e.statsReporter_=aq(e.repoInfo_,function(){return new h3(e.stats_,e.server_)}),e.infoData_=new u3,e.infoSyncTree_=new IA({startListening:function(r,i,s,a){var c=[],l=e.infoData_.getNode(r._path);return l.isEmpty()||(c=ff(e.infoSyncTree_,r._path,l),setTimeout(function(){a("ok")},0)),c},stopListening:function(){}}),Bb(e,"connected",!1),e.serverSyncTree_=new IA({startListening:function(r,i,s,a){return e.server_.listen(r,s,i,function(c,l){var h=a(c,l);Mr(e.eventQueue_,r._path,h)}),[]},stopListening:function(r,i){e.server_.unlisten(r,i)}})}function MP(e){var t=e.infoData_.getNode(new Qe(".info/serverTimeOffset")),n=t.val()||0;return new Date().getTime()+n}function vf(e){return mH({timestamp:MP(e)})}function AA(e,t,n,r,i){e.dataUpdateCount++;var s=new Qe(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var a=[];if(i)if(r){var c=Rd(n,function(m){return yt(m)});a=cH(e.serverSyncTree_,s,c,i)}else{var l=yt(n);a=uH(e.serverSyncTree_,s,l,i)}else if(r){var h=Rd(n,function(m){return yt(m)});a=oH(e.serverSyncTree_,s,h)}else{var d=yt(n);a=ff(e.serverSyncTree_,s,d)}var v=s;a.length>0&&(v=Eu(e,s)),Mr(e.eventQueue_,v,a)}function LH(e,t){e.interceptServerDataCallback_=t}function kA(e,t){Bb(e,"connected",t),t===!1&&jH(e)}function MH(e,t){zt(t,function(n,r){Bb(e,n,r)})}function Bb(e,t,n){var r=new Qe("/.info/"+t),i=yt(n);e.infoData_.updateSnapshot(r,i);var s=ff(e.infoSyncTree_,r,i);Mr(e.eventQueue_,r,s)}function Yp(e){return e.nextWriteId_++}function FH(e,t){var n=lH(e.serverSyncTree_,t);return n!=null?Promise.resolve(n):e.server_.get(t).then(function(r){var i=yt(r).withIndex(t._queryParams.getIndex()),s=ff(e.serverSyncTree_,t._path,i);return Vb(e.eventQueue_,t._path,s),Promise.resolve(i)},function(r){return Ju(e,"get for query "+Bt(t)+" failed: "+r),Promise.reject(new Error(r))})}function qb(e,t,n,r,i){Ju(e,"set",{path:t.toString(),value:n,priority:r});var s=vf(e),a=yt(n,r),c=Kp(e.serverSyncTree_,t),l=Lb(a,c,s),h=Yp(e),d=Pb(e.serverSyncTree_,t,l,h,!0);Qp(e.eventQueue_,d),e.server_.put(t.toString(),a.val(!0),function(m,y){var w=m==="ok";w||pn("set at "+t+" failed: "+m);var E=No(e.serverSyncTree_,h,!w);Mr(e.eventQueue_,t,E),Ko(e,i,m,y)});var v=Kb(e,t);Eu(e,v),Mr(e.eventQueue_,v,[])}function UH(e,t,n,r){Ju(e,"update",{path:t.toString(),value:n});var i=!0,s=vf(e),a={};if(zt(n,function(h,d){i=!1,a[h]=kP(vt(t,h),yt(d),e.serverSyncTree_,s)}),i)Qt("update() called with empty data.  Don't do anything."),Ko(e,r,"ok",void 0);else{var c=Yp(e),l=iH(e.serverSyncTree_,t,a,c);Qp(e.eventQueue_,l),e.server_.merge(t.toString(),n,function(h,d){var v=h==="ok";v||pn("update at "+t+" failed: "+h);var m=No(e.serverSyncTree_,c,!v),y=m.length>0?Eu(e,t):t;Mr(e.eventQueue_,y,m),Ko(e,r,h,d)}),zt(n,function(h){var d=Kb(e,vt(t,h));Eu(e,d)}),Mr(e.eventQueue_,t,[])}}function jH(e){Ju(e,"onDisconnectEvents");var t=vf(e),n=Ld();U_(e.onDisconnect_,$e(),function(i,s){var a=kP(i,s,e.serverSyncTree_,t);Yu(n,i,a)});var r=[];U_(n,$e(),function(i,s){r=r.concat(ff(e.serverSyncTree_,i,s));var a=Kb(e,i);Eu(e,a)}),e.onDisconnect_=Ld(),Mr(e.eventQueue_,$e(),r)}function VH(e,t,n){e.server_.onDisconnectCancel(t.toString(),function(r,i){r==="ok"&&F_(e.onDisconnect_,t),Ko(e,n,r,i)})}function RA(e,t,n,r){var i=yt(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),function(s,a){s==="ok"&&Yu(e.onDisconnect_,t,i),Ko(e,r,s,a)})}function BH(e,t,n,r,i){var s=yt(n,r);e.server_.onDisconnectPut(t.toString(),s.val(!0),function(a,c){a==="ok"&&Yu(e.onDisconnect_,t,s),Ko(e,i,a,c)})}function qH(e,t,n,r){if(k_(n)){Qt("onDisconnect().update() called with empty data.  Don't do anything."),Ko(e,r,"ok",void 0);return}e.server_.onDisconnectMerge(t.toString(),n,function(i,s){i==="ok"&&zt(n,function(a,c){var l=yt(c);Yu(e.onDisconnect_,vt(t,a),l)}),Ko(e,r,i,s)})}function HH(e,t,n){var r;Pe(t._path)===".info"?r=SA(e.infoSyncTree_,t,n):r=SA(e.serverSyncTree_,t,n),Vb(e.eventQueue_,t._path,r)}function W_(e,t,n){var r;Pe(t._path)===".info"?r=K_(e.infoSyncTree_,t,n):r=K_(e.serverSyncTree_,t,n),Vb(e.eventQueue_,t._path,r)}function FP(e){e.persistentConnection_&&e.persistentConnection_.interrupt(LP)}function KH(e){e.persistentConnection_&&e.persistentConnection_.resume(LP)}function zH(e,t){if(t===void 0&&(t=!1),!(typeof console>"u")){var n;t?(e.statsListener_||(e.statsListener_=new cP(e.stats_)),n=e.statsListener_.get()):n=e.stats_.get();var r=Object.keys(n).reduce(function(i,s){return Math.max(s.length,i)},0);zt(n,function(i,s){for(var a=i,c=i.length;c<r+2;c++)a+=" ";console.log(a+s)})}}function WH(e,t){e.stats_.incrementCounter(t),d3(e.statsReporter_,t)}function Ju(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r="";e.persistentConnection_&&(r=e.persistentConnection_.id+":"),Qt.apply(void 0,Ne([r],fn(t)))}function Ko(e,t,n,r){t&&Qu(function(){if(n==="ok")t(null);else{var i=(n||"error").toUpperCase(),s=i;r&&(s+=": "+r);var a=new Error(s);a.code=i,t(a)}})}function $H(e,t,n,r,i,s){Ju(e,"transaction on "+t);var a={path:t,update:n,onComplete:r,status:null,order:k1(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},c=Hb(e,t,void 0);a.currentInputSnapshot=c;var l=a.update(c.val());if(l===void 0)a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete&&a.onComplete(null,!1,a.currentInputSnapshot);else{df("transaction failed: Data returned ",l,a.path),a.status=0;var h=Wp(e.transactionQueueTree_,t),d=da(h)||[];d.push(a),Ub(h,d);var v=void 0;if(typeof l=="object"&&l!==null&&_r(l,".priority"))v=Xs(l,".priority"),$(Ml(v),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else{var m=Kp(e.serverSyncTree_,t)||Se.EMPTY_NODE;v=m.getPriority().val()}var y=vf(e),w=yt(l,v),E=Lb(w,c,y);a.currentOutputSnapshotRaw=w,a.currentOutputSnapshotResolved=E,a.currentWriteId=Yp(e);var T=Pb(e.serverSyncTree_,t,E,a.currentWriteId,a.applyLocally);Mr(e.eventQueue_,t,T),Xp(e,e.transactionQueueTree_)}}function Hb(e,t,n){return Kp(e.serverSyncTree_,t,n)||Se.EMPTY_NODE}function Xp(e,t){if(t===void 0&&(t=e.transactionQueueTree_),t||Jp(e,t),da(t)){var n=jP(e,t);$(n.length>0,"Sending zero length transaction queue");var r=n.every(function(i){return i.status===0});r&&GH(e,hf(t),n)}else RP(t)&&$p(t,function(i){Xp(e,i)})}function GH(e,t,n){for(var r=n.map(function(m){return m.currentWriteId}),i=Hb(e,t,r),s=i,a=i.hash(),c=0;c<n.length;c++){var l=n[c];$(l.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),l.status=1,l.retryCount++;var h=Hn(t,l.path);s=s.updateChild(h,l.currentOutputSnapshotRaw)}var d=s.val(!0),v=t;e.server_.put(v.toString(),d,function(m){Ju(e,"transaction put response",{path:v.toString(),status:m});var y=[];if(m==="ok"){for(var w=[],E=function(k){n[k].status=2,y=y.concat(No(e.serverSyncTree_,n[k].currentWriteId)),n[k].onComplete&&w.push(function(){return n[k].onComplete(null,!0,n[k].currentOutputSnapshotResolved)}),n[k].unwatcher()},T=0;T<n.length;T++)E(T);Jp(e,Wp(e.transactionQueueTree_,t)),Xp(e,e.transactionQueueTree_),Mr(e.eventQueue_,t,y);for(var T=0;T<w.length;T++)Qu(w[T])}else{if(m==="datastale")for(var T=0;T<n.length;T++)n[T].status===3?n[T].status=4:n[T].status=0;else{pn("transaction at "+v.toString()+" failed: "+m);for(var T=0;T<n.length;T++)n[T].status=4,n[T].abortReason=m}Eu(e,t)}},a)}function Eu(e,t){var n=UP(e,t),r=hf(n),i=jP(e,n);return QH(e,i,r),r}function QH(e,t,n){if(t.length!==0){for(var r=[],i=[],s=t.filter(function(h){return h.status===0}),a=s.map(function(h){return h.currentWriteId}),c=function(h){var d=t[h],v=Hn(n,d.path),m=!1,y;if($(v!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),d.status===4)m=!0,y=d.abortReason,i=i.concat(No(e.serverSyncTree_,d.currentWriteId,!0));else if(d.status===0)if(d.retryCount>=OH)m=!0,y="maxretry",i=i.concat(No(e.serverSyncTree_,d.currentWriteId,!0));else{var w=Hb(e,d.path,a);d.currentInputSnapshot=w;var E=t[h].update(w.val());if(E!==void 0){df("transaction failed: Data returned ",E,d.path);var T=yt(E),k=typeof E=="object"&&E!=null&&_r(E,".priority");k||(T=T.updatePriority(w.getPriority()));var P=d.currentWriteId,O=vf(e),H=Lb(T,w,O);d.currentOutputSnapshotRaw=T,d.currentOutputSnapshotResolved=H,d.currentWriteId=Yp(e),a.splice(a.indexOf(P),1),i=i.concat(Pb(e.serverSyncTree_,d.path,H,d.currentWriteId,d.applyLocally)),i=i.concat(No(e.serverSyncTree_,P,!0))}else m=!0,y="nodata",i=i.concat(No(e.serverSyncTree_,d.currentWriteId,!0))}Mr(e.eventQueue_,n,i),i=[],m&&(t[h].status=2,function(K){setTimeout(K,Math.floor(0))}(t[h].unwatcher),t[h].onComplete&&(y==="nodata"?r.push(function(){return t[h].onComplete(null,!1,t[h].currentInputSnapshot)}):r.push(function(){return t[h].onComplete(new Error(y),!1,null)})))},l=0;l<t.length;l++)c(l);Jp(e,e.transactionQueueTree_);for(var l=0;l<r.length;l++)Qu(r[l]);Xp(e,e.transactionQueueTree_)}}function UP(e,t){var n,r=e.transactionQueueTree_;for(n=Pe(t);n!==null&&da(r)===void 0;)r=Wp(r,n),t=it(t),n=Pe(t);return r}function jP(e,t){var n=[];return VP(e,t,n),n.sort(function(r,i){return r.order-i.order}),n}function VP(e,t,n){var r=da(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);$p(t,function(s){VP(e,s,n)})}function Jp(e,t){var n=da(t);if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,Ub(t,n.length>0?n:void 0)}$p(t,function(s){Jp(e,s)})}function Kb(e,t){var n=hf(UP(e,t)),r=Wp(e.transactionQueueTree_,t);return bH(r,function(i){Oy(e,i)}),Oy(e,r),NP(r,function(i){Oy(e,i)}),n}function Oy(e,t){var n=da(t);if(n){for(var r=[],i=[],s=-1,a=0;a<n.length;a++)n[a].status===3||(n[a].status===1?($(s===a-1,"All SENT items should be at beginning of queue."),s=a,n[a].status=3,n[a].abortReason="set"):($(n[a].status===0,"Unexpected transaction status in abort"),n[a].unwatcher(),i=i.concat(No(e.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));s===-1?Ub(t,void 0):n.length=s+1,Mr(e.eventQueue_,hf(t),i);for(var a=0;a<r.length;a++)Qu(r[a])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YH(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}t+="/"+i}return t}function XH(e){var t,n,r={};e.charAt(0)==="?"&&(e=e.substring(1));try{for(var i=tn(e.split("&")),s=i.next();!s.done;s=i.next()){var a=s.value;if(a.length!==0){var c=a.split("=");c.length===2?r[decodeURIComponent(c[0])]=decodeURIComponent(c[1]):pn("Invalid query segment '"+a+"' in query '"+e+"'")}}}catch(l){t={error:l}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}var $_=function(e,t){var n=JH(e),r=n.namespace;n.domain==="firebase.com"&&Ci(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Ci("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||GB();var i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new pb(n.host,n.secure,r,t,i,"",r!==n.subdomain),path:new Qe(n.pathString)}},JH=function(e){var t="",n="",r="",i="",s="",a=!0,c="https",l=443;if(typeof e=="string"){var h=e.indexOf("//");h>=0&&(c=e.substring(0,h-1),e=e.substring(h+2));var d=e.indexOf("/");d===-1&&(d=e.length);var v=e.indexOf("?");v===-1&&(v=e.length),t=e.substring(0,Math.min(d,v)),d<v&&(i=YH(e.substring(d,v)));var m=XH(e.substring(Math.min(e.length,v)));h=t.indexOf(":"),h>=0?(a=c==="https"||c==="wss",l=parseInt(t.substring(h+1),10)):h=t.length;var y=t.slice(0,h);if(y.toLowerCase()==="localhost")n="localhost";else if(y.split(".").length<=2)n=y;else{var w=t.indexOf(".");r=t.substring(0,w).toLowerCase(),n=t.substring(w+1),s=r}"ns"in m&&(s=m.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:a,scheme:c,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var BP=function(){function e(t,n,r,i){this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}return e.prototype.getPath=function(){var t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path},e.prototype.getEventType=function(){return this.eventType},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Bt(this.snapshot.exportVal())},e}(),qP=function(){function e(t,n,r){this.eventRegistration=t,this.error=n,this.path=r}return e.prototype.getPath=function(){return this.path},e.prototype.getEventType=function(){return"cancel"},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.path.toString()+":cancel"},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var HP=function(){function e(t,n){this.snapshotCallback=t,this.cancelCallback=n}return e.prototype.onValue=function(t,n){this.snapshotCallback.call(null,t,n)},e.prototype.onCancel=function(t){return $(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)},Object.defineProperty(e.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),e.prototype.matches=function(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context},e}();/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ZH=function(){function e(t,n){this._repo=t,this._path=n}return e.prototype.cancel=function(){var t=new Jt;return VH(this._repo,this._path,t.wrapCallback(function(){})),t.promise},e.prototype.remove=function(){kr("OnDisconnect.remove",this._path);var t=new Jt;return RA(this._repo,this._path,null,t.wrapCallback(function(){})),t.promise},e.prototype.set=function(t){kr("OnDisconnect.set",this._path),ki("OnDisconnect.set",t,this._path,!1);var n=new Jt;return RA(this._repo,this._path,t,n.wrapCallback(function(){})),n.promise},e.prototype.setWithPriority=function(t,n){kr("OnDisconnect.setWithPriority",this._path),ki("OnDisconnect.setWithPriority",t,this._path,!1),jb("OnDisconnect.setWithPriority",n,!1);var r=new Jt;return BH(this._repo,this._path,t,n,r.wrapCallback(function(){})),r.promise},e.prototype.update=function(t){kr("OnDisconnect.update",this._path),OP("OnDisconnect.update",t,this._path,!1);var n=new Jt;return qH(this._repo,this._path,t,n.wrapCallback(function(){})),n.promise},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ur=function(){function e(t,n,r,i){this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return Object.defineProperty(e.prototype,"key",{get:function(){return Oe(this._path)?null:mb(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new Ni(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_queryIdentifier",{get:function(){var t=pA(this._queryParams),n=fb(t);return n==="{}"?"default":n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_queryObject",{get:function(){return pA(this._queryParams)},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){if(t=Re(t),!(t instanceof e))return!1;var n=this._repo===t._repo,r=yb(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i},e.prototype.toJSON=function(){return this.toString()},e.prototype.toString=function(){return this._repo.toString()+Pq(this._path)},e}();function Zp(e,t){if(e._orderByCalled===!0)throw new Error(t+": You can't combine multiple orderBy calls.")}function $o(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===wi){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){var s=e.getIndexStartName();if(s!==Xi)throw new Error(r);if(typeof t!="string")throw new Error(i)}if(e.hasEnd()){var a=e.getIndexEndName();if(a!==Ai)throw new Error(r);if(typeof n!="string")throw new Error(i)}}else if(e.getIndex()===st){if(t!=null&&!Ml(t)||n!=null&&!Ml(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if($(e.getIndex()instanceof wb||e.getIndex()===bb,"unknown index type."),t!=null&&typeof t=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function ev(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Ni=function(e){te(t,e);function t(n,r){return e.call(this,n,r,new uP,!1)||this}return Object.defineProperty(t.prototype,"parent",{get:function(){var n=X1(this._path);return n===null?null:new t(this._repo,n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){for(var n=this;n.parent!==null;)n=n.parent;return n},enumerable:!1,configurable:!0}),t}(Ur),tv=function(){function e(t,n,r){this._node=t,this.ref=n,this._index=r}return Object.defineProperty(e.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),e.prototype.child=function(t){var n=new Qe(t),r=Zs(this.ref,t);return new e(this._node.getChild(n),r,st)},e.prototype.exists=function(){return!this._node.isEmpty()},e.prototype.exportVal=function(){return this._node.val(!0)},e.prototype.forEach=function(t){var n=this;if(this._node.isLeafNode())return!1;var r=this._node;return!!r.forEachChild(this._index,function(i,s){return t(new e(s,Zs(n.ref,i),st))})},e.prototype.hasChild=function(t){var n=new Qe(t);return!this._node.getChild(n).isEmpty()},e.prototype.hasChildren=function(){return this._node.isLeafNode()?!1:!this._node.isEmpty()},e.prototype.toJSON=function(){return this.exportVal()},e.prototype.val=function(){return this._node.val()},e}();function KP(e,t){return e=Re(e),e._checkNotDeleted("ref"),t!==void 0?Zs(e._root,t):e._root}function NA(e,t){e=Re(e),e._checkNotDeleted("refFromURL");var n=$_(t,e._repo.repoInfo_.nodeAdmin);xP("refFromURL",n);var r=n.repoInfo;return!e._repo.repoInfo_.isCustomHost()&&r.host!==e._repo.repoInfo_.host&&Ci("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),KP(e,n.path.toString())}function Zs(e,t){return e=Re(e),Pe(e._path)===null?kH("child","path",t,!1):Fl("child","path",t,!1),new Ni(e._repo,vt(e._path,t))}function eK(e,t){e=Re(e),kr("push",e._path),ki("push",t,e._path,!0);var n=MP(e._repo),r=Zq(n),i=Zs(e,r),s=Zs(e,r),a;return t!=null?a=zb(s,t).then(function(){return s}):a=Promise.resolve(s),i.then=a.then.bind(a),i.catch=a.then.bind(a,void 0),i}function tK(e){return kr("remove",e._path),zb(e,null)}function zb(e,t){e=Re(e),kr("set",e._path),ki("set",t,e._path,!1);var n=new Jt;return qb(e._repo,e._path,t,null,n.wrapCallback(function(){})),n.promise}function nK(e,t){e=Re(e),kr("setPriority",e._path),jb("setPriority",t,!1);var n=new Jt;return qb(e._repo,vt(e._path,".priority"),t,null,n.wrapCallback(function(){})),n.promise}function rK(e,t,n){if(kr("setWithPriority",e._path),ki("setWithPriority",t,e._path,!1),jb("setWithPriority",n,!1),e.key===".length"||e.key===".keys")throw"setWithPriority failed: "+e.key+" is a read-only object.";var r=new Jt;return qb(e._repo,e._path,t,n,r.wrapCallback(function(){})),r.promise}function iK(e,t){OP("update",t,e._path,!1);var n=new Jt;return UH(e._repo,e._path,t,n.wrapCallback(function(){})),n.promise}function oK(e){return e=Re(e),FH(e._repo,e).then(function(t){return new tv(t,new Ni(e._repo,e._path),e._queryParams.getIndex())})}var zP=function(){function e(t){this.callbackContext=t}return e.prototype.respondsTo=function(t){return t==="value"},e.prototype.createEvent=function(t,n){var r=n._queryParams.getIndex();return new BP("value",this,new tv(t.snapshotNode,new Ni(n._repo,n._path),r))},e.prototype.getEventRunner=function(t){var n=this;return t.getEventType()==="cancel"?function(){return n.callbackContext.onCancel(t.error)}:function(){return n.callbackContext.onValue(t.snapshot,null)}},e.prototype.createCancelEvent=function(t,n){return this.callbackContext.hasCancelCallback?new qP(this,t,n):null},e.prototype.matches=function(t){return t instanceof e?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1},e.prototype.hasAnyCallback=function(){return this.callbackContext!==null},e}(),WP=function(){function e(t,n){this.eventType=t,this.callbackContext=n}return e.prototype.respondsTo=function(t){var n=t==="children_added"?"child_added":t;return n=n==="children_removed"?"child_removed":n,this.eventType===n},e.prototype.createCancelEvent=function(t,n){return this.callbackContext.hasCancelCallback?new qP(this,t,n):null},e.prototype.createEvent=function(t,n){$(t.childName!=null,"Child events should have a childName.");var r=Zs(new Ni(n._repo,n._path),t.childName),i=n._queryParams.getIndex();return new BP(t.type,this,new tv(t.snapshotNode,r,i),t.prevName)},e.prototype.getEventRunner=function(t){var n=this;return t.getEventType()==="cancel"?function(){return n.callbackContext.onCancel(t.error)}:function(){return n.callbackContext.onValue(t.snapshot,t.prevName)}},e.prototype.matches=function(t){return t instanceof e?this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)):!1},e.prototype.hasAnyCallback=function(){return!!this.callbackContext},e}();function gf(e,t,n,r,i){var s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){var a=n,c=function(d,v){W_(e._repo,e,h),a(d,v)};c.userCallback=n.userCallback,c.context=n.context,n=c}var l=new HP(n,s||void 0),h=t==="value"?new zP(l):new WP(t,l);return HH(e._repo,e,h),function(){return W_(e._repo,e,h)}}function G_(e,t,n,r){return gf(e,"value",t,n,r)}function PA(e,t,n,r){return gf(e,"child_added",t,n,r)}function OA(e,t,n,r){return gf(e,"child_changed",t,n,r)}function xA(e,t,n,r){return gf(e,"child_moved",t,n,r)}function DA(e,t,n,r){return gf(e,"child_removed",t,n,r)}function LA(e,t,n){var r=null,i=n?new HP(n):null;t==="value"?r=new zP(i):t&&(r=new WP(t,i)),W_(e._repo,e,r)}var oi=function(){function e(){}return e}(),$P=function(e){te(t,e);function t(n,r){var i=e.call(this)||this;return i._value=n,i._key=r,i}return t.prototype._apply=function(n){ki("endAt",this._value,n._path,!0);var r=M_(n._queryParams,this._value,this._key);if(ev(r),$o(r),n._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ur(n._repo,n._path,r,n._orderByCalled)},t}(oi);function sK(e,t){return pf("endAt","key",t,!0),new $P(e,t)}var aK=function(e){te(t,e);function t(n,r){var i=e.call(this)||this;return i._value=n,i._key=r,i}return t.prototype._apply=function(n){ki("endBefore",this._value,n._path,!1);var r=s3(n._queryParams,this._value,this._key);if(ev(r),$o(r),n._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ur(n._repo,n._path,r,n._orderByCalled)},t}(oi);function uK(e,t){return pf("endBefore","key",t,!0),new aK(e,t)}var GP=function(e){te(t,e);function t(n,r){var i=e.call(this)||this;return i._value=n,i._key=r,i}return t.prototype._apply=function(n){ki("startAt",this._value,n._path,!0);var r=L_(n._queryParams,this._value,this._key);if(ev(r),$o(r),n._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ur(n._repo,n._path,r,n._orderByCalled)},t}(oi);function cK(e,t){return e===void 0&&(e=null),pf("startAt","key",t,!0),new GP(e,t)}var lK=function(e){te(t,e);function t(n,r){var i=e.call(this)||this;return i._value=n,i._key=r,i}return t.prototype._apply=function(n){ki("startAfter",this._value,n._path,!1);var r=o3(n._queryParams,this._value,this._key);if(ev(r),$o(r),n._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ur(n._repo,n._path,r,n._orderByCalled)},t}(oi);function fK(e,t){return pf("startAfter","key",t,!0),new lK(e,t)}var hK=function(e){te(t,e);function t(n){var r=e.call(this)||this;return r._limit=n,r}return t.prototype._apply=function(n){if(n._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ur(n._repo,n._path,r3(n._queryParams,this._limit),n._orderByCalled)},t}(oi);function dK(e){if(typeof e!="number"||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new hK(e)}var pK=function(e){te(t,e);function t(n){var r=e.call(this)||this;return r._limit=n,r}return t.prototype._apply=function(n){if(n._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ur(n._repo,n._path,i3(n._queryParams,this._limit),n._orderByCalled)},t}(oi);function vK(e){if(typeof e!="number"||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new pK(e)}var gK=function(e){te(t,e);function t(n){var r=e.call(this)||this;return r._path=n,r}return t.prototype._apply=function(n){Zp(n,"orderByChild");var r=new Qe(this._path);if(Oe(r))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var i=new wb(r),s=jp(n._queryParams,i);return $o(s),new Ur(n._repo,n._path,s,!0)},t}(oi);function mK(e){if(e==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(e==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(e==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Fl("orderByChild","path",e,!1),new gK(e)}var yK=function(e){te(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype._apply=function(n){Zp(n,"orderByKey");var r=jp(n._queryParams,wi);return $o(r),new Ur(n._repo,n._path,r,!0)},t}(oi);function _K(){return new yK}var wK=function(e){te(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype._apply=function(n){Zp(n,"orderByPriority");var r=jp(n._queryParams,st);return $o(r),new Ur(n._repo,n._path,r,!0)},t}(oi);function bK(){return new wK}var EK=function(e){te(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype._apply=function(n){Zp(n,"orderByValue");var r=jp(n._queryParams,bb);return $o(r),new Ur(n._repo,n._path,r,!0)},t}(oi);function TK(){return new EK}var IK=function(e){te(t,e);function t(n,r){var i=e.call(this)||this;return i._value=n,i._key=r,i}return t.prototype._apply=function(n){if(ki("equalTo",this._value,n._path,!1),n._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(n._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new $P(this._value,this._key)._apply(new GP(this._value,this._key)._apply(n))},t}(oi);function SK(e,t){return pf("equalTo","key",t,!0),new IK(e,t)}function zr(e){for(var t,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var s=Re(e);try{for(var a=tn(r),c=a.next();!c.done;c=a.next()){var l=c.value;s=l._apply(s)}}catch(h){t={error:h}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return s}Y3(Ni);tH(Ni);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var CK="FIREBASE_DATABASE_EMULATOR_HOST",Q_={},QP=!1;function AK(e,t,n,r){e.repoInfo_=new pb(t+":"+n,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams),r&&(e.authTokenProvider_=r)}function YP(e,t,n,r,i){var s=r||e.options.databaseURL;s===void 0&&(e.options.projectId||Ci("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Qt("Using default host for project ",e.options.projectId),s=e.options.projectId+"-default-rtdb.firebaseio.com");var a=$_(s,i),c=a.repoInfo,l,h=void 0;typeof process<"u"&&(h=process.env[CK]),h?(l=!0,s="http://"+h+"?ns="+c.namespace,a=$_(s,i),c=a.repoInfo):l=!a.repoInfo.secure;var d=i&&l?new cl(cl.OWNER):new rq(e.name,e.options,t);xP("Invalid Firebase Database URL",a),Oe(a.path)||Ci("Database URL must point to the root of a Firebase Database (not including a child path).");var v=RK(c,e,d,new nq(e.name,n));return new PK(v,e)}function kK(e,t){var n=Q_[t];(!n||n[e.key]!==e)&&Ci("Database "+t+"("+e.repoInfo_+") has already been deleted."),FP(e),delete n[e.key]}function RK(e,t,n,r){var i=Q_[t.name];i||(i={},Q_[t.name]=i);var s=i[e.toURLString()];return s&&Ci("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new xH(e,QP,n,r),i[e.toURLString()]=s,s}function NK(e){QP=e}var PK=function(){function e(t,n){this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return Object.defineProperty(e.prototype,"_repo",{get:function(){return this._instanceStarted||(DH(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new Ni(this._repo,$e())),this._rootInternal},enumerable:!1,configurable:!0}),e.prototype._delete=function(){return this._rootInternal!==null&&(kK(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()},e.prototype._checkNotDeleted=function(t){this._rootInternal===null&&Ci("Cannot call "+t+" on a deleted database.")},e}();function OK(e,t,n,r){r===void 0&&(r={}),e=Re(e),e._checkNotDeleted("useEmulator"),e._instanceStarted&&Ci("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal,s=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Ci('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new cl(cl.OWNER);else if(r.mockUserToken){var a=typeof r.mockUserToken=="string"?r.mockUserToken:ib(r.mockUserToken,e.app.options.projectId);s=new cl(a)}AK(i,t,n,s)}function xK(e){e=Re(e),e._checkNotDeleted("goOffline"),FP(e._repo)}function DK(e){e=Re(e),e._checkNotDeleted("goOnline"),KH(e._repo)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var LK={".sv":"timestamp"};function MK(){return LK}function FK(e){return{".sv":{increment:e}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var UK=function(){function e(t,n){this.committed=t,this.snapshot=n}return e.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},e}();function jK(e,t,n){var r;if(e=Re(e),kr("Reference.transaction",e._path),e.key===".length"||e.key===".keys")throw"Reference.transaction failed: "+e.key+" is a read-only object.";var i=(r=n==null?void 0:n.applyLocally)!==null&&r!==void 0?r:!0,s=new Jt,a=function(l,h,d){var v=null;l?s.reject(l):(v=new tv(d,new Ni(e._repo,e._path),st),s.resolve(new UK(h,v)))},c=G_(e,function(){});return $H(e._repo,e._path,t,a,c,i),s.promise}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var VK=function(){function e(t){this._delegate=t}return e.prototype.cancel=function(t){ye("OnDisconnect.cancel",0,1,arguments.length),Gt("OnDisconnect.cancel","onComplete",t,!0);var n=this._delegate.cancel();return t&&n.then(function(){return t(null)},function(r){return t(r)}),n},e.prototype.remove=function(t){ye("OnDisconnect.remove",0,1,arguments.length),Gt("OnDisconnect.remove","onComplete",t,!0);var n=this._delegate.remove();return t&&n.then(function(){return t(null)},function(r){return t(r)}),n},e.prototype.set=function(t,n){ye("OnDisconnect.set",1,2,arguments.length),Gt("OnDisconnect.set","onComplete",n,!0);var r=this._delegate.set(t);return n&&r.then(function(){return n(null)},function(i){return n(i)}),r},e.prototype.setWithPriority=function(t,n,r){ye("OnDisconnect.setWithPriority",2,3,arguments.length),Gt("OnDisconnect.setWithPriority","onComplete",r,!0);var i=this._delegate.setWithPriority(t,n);return r&&i.then(function(){return r(null)},function(s){return r(s)}),i},e.prototype.update=function(t,n){if(ye("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){for(var r={},i=0;i<t.length;++i)r[""+i]=t[i];t=r,pn("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Gt("OnDisconnect.update","onComplete",n,!0);var s=this._delegate.update(t);return n&&s.then(function(){return n(null)},function(a){return n(a)}),s},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var BK=function(){function e(t,n){this.committed=t,this.snapshot=n}return e.prototype.toJSON=function(){return ye("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dl=function(){function e(t,n){this._database=t,this._delegate=n}return e.prototype.val=function(){return ye("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},e.prototype.exportVal=function(){return ye("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},e.prototype.toJSON=function(){return ye("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},e.prototype.exists=function(){return ye("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},e.prototype.child=function(t){return ye("DataSnapshot.child",0,1,arguments.length),t=String(t),Fl("DataSnapshot.child","path",t,!1),new e(this._database,this._delegate.child(t))},e.prototype.hasChild=function(t){return ye("DataSnapshot.hasChild",1,1,arguments.length),Fl("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)},e.prototype.getPriority=function(){return ye("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},e.prototype.forEach=function(t){var n=this;return ye("DataSnapshot.forEach",1,1,arguments.length),Gt("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(function(r){return t(new e(n._database,r))})},e.prototype.hasChildren=function(){return ye("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(e.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),e.prototype.numChildren=function(){return ye("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},e.prototype.getRef=function(){return ye("DataSnapshot.ref",0,0,arguments.length),new xs(this._database,this._delegate.ref)},Object.defineProperty(e.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),e}(),XP=function(){function e(t,n){this.database=t,this._delegate=n}return e.prototype.on=function(t,n,r,i){var s=this,a;ye("Query.on",2,4,arguments.length),Gt("Query.on","callback",n,!1);var c=e.getCancelAndContextArgs_("Query.on",r,i),l=function(d,v){n.call(c.context,new dl(s.database,d),v)};l.userCallback=n,l.context=c.context;var h=(a=c.cancel)===null||a===void 0?void 0:a.bind(c.context);switch(t){case"value":return G_(this._delegate,l,h),n;case"child_added":return PA(this._delegate,l,h),n;case"child_removed":return DA(this._delegate,l,h),n;case"child_changed":return OA(this._delegate,l,h),n;case"child_moved":return xA(this._delegate,l,h),n;default:throw new Error(tr("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},e.prototype.off=function(t,n,r){if(ye("Query.off",0,3,arguments.length),AH("Query.off",t,!0),Gt("Query.off","callback",n,!0),QC("Query.off","context",r,!0),n){var i=function(){};i.userCallback=n,i.context=r,LA(this._delegate,t,i)}else LA(this._delegate,t)},e.prototype.get=function(){var t=this;return oK(this._delegate).then(function(n){return new dl(t.database,n)})},e.prototype.once=function(t,n,r,i){var s=this;ye("Query.once",1,4,arguments.length),Gt("Query.once","callback",n,!0);var a=e.getCancelAndContextArgs_("Query.once",r,i),c=new Jt,l=function(d,v){var m=new dl(s.database,d);n&&n.call(a.context,m,v),c.resolve(m)};l.userCallback=n,l.context=a.context;var h=function(d){a.cancel&&a.cancel.call(a.context,d),c.reject(d)};switch(t){case"value":G_(this._delegate,l,h,{onlyOnce:!0});break;case"child_added":PA(this._delegate,l,h,{onlyOnce:!0});break;case"child_removed":DA(this._delegate,l,h,{onlyOnce:!0});break;case"child_changed":OA(this._delegate,l,h,{onlyOnce:!0});break;case"child_moved":xA(this._delegate,l,h,{onlyOnce:!0});break;default:throw new Error(tr("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise},e.prototype.limitToFirst=function(t){return ye("Query.limitToFirst",1,1,arguments.length),new e(this.database,zr(this._delegate,dK(t)))},e.prototype.limitToLast=function(t){return ye("Query.limitToLast",1,1,arguments.length),new e(this.database,zr(this._delegate,vK(t)))},e.prototype.orderByChild=function(t){return ye("Query.orderByChild",1,1,arguments.length),new e(this.database,zr(this._delegate,mK(t)))},e.prototype.orderByKey=function(){return ye("Query.orderByKey",0,0,arguments.length),new e(this.database,zr(this._delegate,_K()))},e.prototype.orderByPriority=function(){return ye("Query.orderByPriority",0,0,arguments.length),new e(this.database,zr(this._delegate,bK()))},e.prototype.orderByValue=function(){return ye("Query.orderByValue",0,0,arguments.length),new e(this.database,zr(this._delegate,TK()))},e.prototype.startAt=function(t,n){return t===void 0&&(t=null),ye("Query.startAt",0,2,arguments.length),new e(this.database,zr(this._delegate,cK(t,n)))},e.prototype.startAfter=function(t,n){return t===void 0&&(t=null),ye("Query.startAfter",0,2,arguments.length),new e(this.database,zr(this._delegate,fK(t,n)))},e.prototype.endAt=function(t,n){return t===void 0&&(t=null),ye("Query.endAt",0,2,arguments.length),new e(this.database,zr(this._delegate,sK(t,n)))},e.prototype.endBefore=function(t,n){return t===void 0&&(t=null),ye("Query.endBefore",0,2,arguments.length),new e(this.database,zr(this._delegate,uK(t,n)))},e.prototype.equalTo=function(t,n){return ye("Query.equalTo",1,2,arguments.length),new e(this.database,zr(this._delegate,SK(t,n)))},e.prototype.toString=function(){return ye("Query.toString",0,0,arguments.length),this._delegate.toString()},e.prototype.toJSON=function(){return ye("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},e.prototype.isEqual=function(t){if(ye("Query.isEqual",1,1,arguments.length),!(t instanceof e)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(t._delegate)},e.getCancelAndContextArgs_=function(t,n,r){var i={cancel:void 0,context:void 0};if(n&&r)i.cancel=n,Gt(t,"cancel",i.cancel,!0),i.context=r,QC(t,"context",i.context,!0);else if(n)if(typeof n=="object"&&n!==null)i.context=n;else if(typeof n=="function")i.cancel=n;else throw new Error(tr(t,"cancelOrContext")+" must either be a cancel callback or a context object.");return i},Object.defineProperty(e.prototype,"ref",{get:function(){return new xs(this.database,new Ni(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),e}(),xs=function(e){te(t,e);function t(n,r){var i=e.call(this,n,new Ur(r._repo,r._path,new uP,!1))||this;return i.database=n,i._delegate=r,i}return t.prototype.getKey=function(){return ye("Reference.key",0,0,arguments.length),this._delegate.key},t.prototype.child=function(n){return ye("Reference.child",1,1,arguments.length),typeof n=="number"&&(n=String(n)),new t(this.database,Zs(this._delegate,n))},t.prototype.getParent=function(){ye("Reference.parent",0,0,arguments.length);var n=this._delegate.parent;return n?new t(this.database,n):null},t.prototype.getRoot=function(){return ye("Reference.root",0,0,arguments.length),new t(this.database,this._delegate.root)},t.prototype.set=function(n,r){ye("Reference.set",1,2,arguments.length),Gt("Reference.set","onComplete",r,!0);var i=zb(this._delegate,n);return r&&i.then(function(){return r(null)},function(s){return r(s)}),i},t.prototype.update=function(n,r){if(ye("Reference.update",1,2,arguments.length),Array.isArray(n)){for(var i={},s=0;s<n.length;++s)i[""+s]=n[s];n=i,pn("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}kr("Reference.update",this._delegate._path),Gt("Reference.update","onComplete",r,!0);var a=iK(this._delegate,n);return r&&a.then(function(){return r(null)},function(c){return r(c)}),a},t.prototype.setWithPriority=function(n,r,i){ye("Reference.setWithPriority",2,3,arguments.length),Gt("Reference.setWithPriority","onComplete",i,!0);var s=rK(this._delegate,n,r);return i&&s.then(function(){return i(null)},function(a){return i(a)}),s},t.prototype.remove=function(n){ye("Reference.remove",0,1,arguments.length),Gt("Reference.remove","onComplete",n,!0);var r=tK(this._delegate);return n&&r.then(function(){return n(null)},function(i){return n(i)}),r},t.prototype.transaction=function(n,r,i){var s=this;ye("Reference.transaction",1,3,arguments.length),Gt("Reference.transaction","transactionUpdate",n,!1),Gt("Reference.transaction","onComplete",r,!0),RH("Reference.transaction","applyLocally",i,!0);var a=jK(this._delegate,n,{applyLocally:i}).then(function(c){return new BK(c.committed,new dl(s.database,c.snapshot))});return r&&a.then(function(c){return r(null,c.committed,c.snapshot)},function(c){return r(c,!1,null)}),a},t.prototype.setPriority=function(n,r){ye("Reference.setPriority",1,2,arguments.length),Gt("Reference.setPriority","onComplete",r,!0);var i=nK(this._delegate,n);return r&&i.then(function(){return r(null)},function(s){return r(s)}),i},t.prototype.push=function(n,r){var i=this;ye("Reference.push",0,2,arguments.length),Gt("Reference.push","onComplete",r,!0);var s=eK(this._delegate,n),a=s.then(function(l){return new t(i.database,l)});r&&a.then(function(){return r(null)},function(l){return r(l)});var c=new t(this.database,s);return c.then=a.then.bind(a),c.catch=a.catch.bind(a,void 0),c},t.prototype.onDisconnect=function(){return kr("Reference.onDisconnect",this._delegate._path),new VK(new ZH(this._delegate._repo,this._delegate._path))},Object.defineProperty(t.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),t}(XP);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hd=function(){function e(t,n){var r=this;this._delegate=t,this.app=n,this.INTERNAL={delete:function(){return r._delegate._delete()}}}return e.prototype.useEmulator=function(t,n,r){r===void 0&&(r={}),OK(this._delegate,t,n,r)},e.prototype.ref=function(t){if(ye("database.ref",0,1,arguments.length),t instanceof xs){var n=NA(this._delegate,t.toString());return new xs(this,n)}else{var n=KP(this._delegate,t);return new xs(this,n)}},e.prototype.refFromURL=function(t){var n="database.refFromURL";ye(n,1,1,arguments.length);var r=NA(this._delegate,t);return new xs(this,r)},e.prototype.goOffline=function(){return ye("database.goOffline",0,0,arguments.length),xK(this._delegate)},e.prototype.goOnline=function(){return ye("database.goOnline",0,0,arguments.length),DK(this._delegate)},e.ServerValue={TIMESTAMP:MK(),increment:function(t){return FK(t)}},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qK=function(){Rs.forceDisallow(),gb.forceAllow()},HK=function(){gb.forceDisallow()},KK=function(){return Rs.isAvailable()},zK=function(e,t){var n=e._delegate._repo.persistentConnection_;n.securityDebugCallback_=t},WK=function(e,t){zH(e._delegate._repo,t)},$K=function(e,t){WH(e._delegate._repo,t)},GK=function(e){return e._delegate._repo.dataUpdateCount},QK=function(e,t){return LH(e._delegate._repo,t)};function YK(e){var t=e.app,n=e.url,r=e.version,i=e.customAuthImpl,s=e.namespace,a=e.nodeAdmin,c=a===void 0?!1:a;C1(r);var l=new w1("auth-internal",new b1("database-standalone"));return l.setComponent(new kn("auth-internal",function(){return i},"PRIVATE")),{instance:new Hd(YP(t,l,void 0,n,c),t),namespace:s}}var XK=Object.freeze({__proto__:null,forceLongPolling:qK,forceWebSockets:HK,isWebSocketsAvailable:KK,setSecurityDebugCallback:zK,stats:WK,statsIncrementCounter:$K,dataUpdateCount:GK,interceptServerData:QK,initStandalone:YK});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var JK=Ks;Ks.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)};Ks.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};var ZK=G1,ez=function(e){var t=Ks.prototype.put;return Ks.prototype.put=function(n,r,i,s){s!==void 0&&(s=e()),t.call(this,n,r,i,s)},function(){Ks.prototype.put=t}},tz=pb,nz=function(e){return e._delegate._queryIdentifier},rz=function(e){NK(e)},iz=Object.freeze({__proto__:null,DataConnection:JK,RealTimeConnection:ZK,hijackHash:ez,ConnectionTarget:tz,queryIdentifier:nz,forceRestClient:rz});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oz=Hd.ServerValue;function sz(e){C1(e.SDK_VERSION),e.INTERNAL.registerComponent(new kn("database",function(t,n){var r=n.instanceIdentifier,i=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),a=t.getProvider("app-check-internal");return new Hd(YP(i,s,a,r),i)},"PUBLIC").setServiceProps({Reference:xs,Query:XP,Database:Hd,DataSnapshot:dl,enableLogging:N1,INTERNAL:XK,ServerValue:oz,TEST_ACCESS:iz}).setMultipleInstances(!0)),e.registerVersion(KB,zB)}sz(ue);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Y_=function(e,t){return Y_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Y_(e,t)};function az(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Y_(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function JP(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var uz=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},oe,Wb=Wb||{},Ee=uz||self;function Kd(){}function X_(e){var t=typeof e;return t=t!="object"?t:e?Array.isArray(e)?"array":t:"null",t=="array"||t=="object"&&typeof e.length=="number"}function mf(e){var t=typeof e;return t=="object"&&e!=null||t=="function"}function cz(e){return Object.prototype.hasOwnProperty.call(e,xy)&&e[xy]||(e[xy]=++lz)}var xy="closure_uid_"+(1e9*Math.random()>>>0),lz=0;function fz(e,t,n){return e.call.apply(e.bind,arguments)}function hz(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),e.apply(t,i)}}return function(){return e.apply(t,arguments)}}function vn(e,t,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?vn=fz:vn=hz,vn.apply(null,arguments)}function Qh(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),e.apply(this,r)}}function yn(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(r,i,s){for(var a=Array(arguments.length-2),c=2;c<arguments.length;c++)a[c-2]=arguments[c];return t.prototype[i].apply(r,a)}}function Go(){this.s=this.s,this.o=this.o}var dz=0;Go.prototype.s=!1;Go.prototype.na=function(){!this.s&&(this.s=!0,this.M(),dz!=0)&&cz(this)};Go.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var ZP=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(typeof e=="string")return typeof t!="string"||t.length!=1?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},eO=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=typeof e=="string"?e.split(""):e,s=0;s<r;s++)s in i&&t.call(n,i[s],s,e)};function pz(e){e:{for(var t=oW,n=e.length,r=typeof e=="string"?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:typeof e=="string"?e.charAt(t):e[t]}function MA(e){return Array.prototype.concat.apply([],arguments)}function $b(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function zd(e){return/^[\s\xa0]*$/.test(e)}var FA=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Bn(e,t){return e.indexOf(t)!=-1}function Dy(e,t){return e<t?-1:e>t?1:0}var qn;e:{var UA=Ee.navigator;if(UA){var jA=UA.userAgent;if(jA){qn=jA;break e}}qn=""}function Gb(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function tO(e){var t={};for(var n in e)t[n]=e[n];return t}var VA="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function nO(e,t){for(var n,r,i=1;i<arguments.length;i++){r=arguments[i];for(n in r)e[n]=r[n];for(var s=0;s<VA.length;s++)n=VA[s],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Qb(e){return Qb[" "](e),e}Qb[" "]=Kd;function vz(e){var t=yz;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}var gz=Bn(qn,"Opera"),Tu=Bn(qn,"Trident")||Bn(qn,"MSIE"),rO=Bn(qn,"Edge"),J_=rO||Tu,iO=Bn(qn,"Gecko")&&!(Bn(qn.toLowerCase(),"webkit")&&!Bn(qn,"Edge"))&&!(Bn(qn,"Trident")||Bn(qn,"MSIE"))&&!Bn(qn,"Edge"),mz=Bn(qn.toLowerCase(),"webkit")&&!Bn(qn,"Edge");function oO(){var e=Ee.document;return e?e.documentMode:void 0}var Wd;e:{var Ly="",My=function(){var e=qn;if(iO)return/rv:([^\);]+)(\)|;)/.exec(e);if(rO)return/Edge\/([\d\.]+)/.exec(e);if(Tu)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e);if(mz)return/WebKit\/(\S+)/.exec(e);if(gz)return/(?:Version)[ \/]?(\S+)/.exec(e)}();if(My&&(Ly=My?My[1]:""),Tu){var Fy=oO();if(Fy!=null&&Fy>parseFloat(Ly)){Wd=String(Fy);break e}}Wd=Ly}var yz={};function _z(){return vz(function(){for(var e=0,t=FA(String(Wd)).split("."),n=FA("9").split("."),r=Math.max(t.length,n.length),i=0;e==0&&i<r;i++){var s=t[i]||"",a=n[i]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s[0].length==0&&a[0].length==0)break;e=Dy(s[1].length==0?0:parseInt(s[1],10),a[1].length==0?0:parseInt(a[1],10))||Dy(s[2].length==0,a[2].length==0)||Dy(s[2],a[2]),s=s[3],a=a[3]}while(e==0)}return 0<=e})}var Z_;if(Ee.document&&Tu){var BA=oO();Z_=BA||parseInt(Wd,10)||void 0}else Z_=void 0;var wz=Z_,bz=function(){if(!Ee.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Ee.addEventListener("test",Kd,t),Ee.removeEventListener("test",Kd,t)}catch{}return e}();function In(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}In.prototype.h=function(){this.defaultPrevented=!0};function Ul(e,t){if(In.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(iO){e:{try{Qb(t.nodeName);var i=!0;break e}catch{}i=!1}i||(t=null)}}else n=="mouseover"?t=e.fromElement:n=="mouseout"&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=e.clientX!==void 0?e.clientX:e.pageX,this.clientY=e.clientY!==void 0?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=typeof e.pointerType=="string"?e.pointerType:Ez[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Ul.Z.h.call(this)}}yn(Ul,In);var Ez={2:"touch",3:"pen",4:"mouse"};Ul.prototype.h=function(){Ul.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var yf="closure_listenable_"+(1e6*Math.random()|0),Tz=0;function Iz(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++Tz,this.ca=this.fa=!1}function nv(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function rv(e){this.src=e,this.g={},this.h=0}rv.prototype.add=function(e,t,n,r,i){var s=e.toString();e=this.g[s],e||(e=this.g[s]=[],this.h++);var a=tw(e,t,r,i);return-1<a?(t=e[a],n||(t.fa=!1)):(t=new Iz(t,this.src,s,!!r,i),t.fa=n,e.push(t)),t};function ew(e,t){var n=t.type;if(n in e.g){var r=e.g[n],i=ZP(r,t),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(nv(t),e.g[n].length==0&&(delete e.g[n],e.h--))}}function tw(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.ca&&s.listener==t&&s.capture==!!n&&s.ia==r)return i}return-1}var Yb="closure_lm_"+(1e6*Math.random()|0),Uy={};function sO(e,t,n,r,i){if(r&&r.once)return uO(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)sO(e,t[s],n,r,i);return null}return n=Zb(n),e&&e[yf]?e.N(t,n,mf(r)?!!r.capture:!!r,i):aO(e,t,n,!1,r,i)}function aO(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var a=mf(i)?!!i.capture:!!i,c=Jb(e);if(c||(e[Yb]=c=new rv(e)),n=c.add(t,n,r,a,s),n.proxy)return n;if(r=Sz(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)bz||(i=a),i===void 0&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(lO(t.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function Sz(){function e(n){return t.call(e.src,e.listener,n)}var t=Cz;return e}function uO(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)uO(e,t[s],n,r,i);return null}return n=Zb(n),e&&e[yf]?e.O(t,n,mf(r)?!!r.capture:!!r,i):aO(e,t,n,!0,r,i)}function cO(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)cO(e,t[s],n,r,i);else r=mf(r)?!!r.capture:!!r,n=Zb(n),e&&e[yf]?(e=e.i,t=String(t).toString(),t in e.g&&(s=e.g[t],n=tw(s,n,r,i),-1<n&&(nv(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete e.g[t],e.h--)))):e&&(e=Jb(e))&&(t=e.g[t.toString()],e=-1,t&&(e=tw(t,n,r,i)),(n=-1<e?t[e]:null)&&Xb(n))}function Xb(e){if(typeof e!="number"&&e&&!e.ca){var t=e.src;if(t&&t[yf])ew(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(lO(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Jb(t))?(ew(n,e),n.h==0&&(n.src=null,t[Yb]=null)):nv(e)}}}function lO(e){return e in Uy?Uy[e]:Uy[e]="on"+e}function Cz(e,t){if(e.ca)e=!0;else{t=new Ul(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&Xb(e),e=n.call(r,t)}return e}function Jb(e){return e=e[Yb],e instanceof rv?e:null}var jy="__closure_events_fn_"+(1e9*Math.random()>>>0);function Zb(e){return typeof e=="function"?e:(e[jy]||(e[jy]=function(t){return e.handleEvent(t)}),e[jy])}function nn(){Go.call(this),this.i=new rv(this),this.P=this,this.I=null}yn(nn,Go);nn.prototype[yf]=!0;nn.prototype.removeEventListener=function(e,t,n,r){cO(this,e,t,n,r)};function gn(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,typeof t=="string")t=new In(t,e);else if(t instanceof In)t.target=t.target||e;else{var i=t;t=new In(r,e),nO(t,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var a=t.g=n[s];i=Yh(a,r,!0,t)&&i}if(a=t.g=e,i=Yh(a,r,!0,t)&&i,i=Yh(a,r,!1,t)&&i,n)for(s=0;s<n.length;s++)a=t.g=n[s],i=Yh(a,r,!1,t)&&i}nn.prototype.M=function(){if(nn.Z.M.call(this),this.i){var e=this.i,t;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)nv(n[r]);delete e.g[t],e.h--}}this.I=null};nn.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)};nn.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};function Yh(e,t,n,r){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var a=t[s];if(a&&!a.ca&&a.capture==n){var c=a.listener,l=a.ia||a.src;a.fa&&ew(e.i,a),i=c.call(l,r)!==!1&&i}}return i&&!r.defaultPrevented}var e0=Ee.JSON.stringify;function Az(){var e=hO,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var kz=function(){function e(){this.h=this.g=null}return e.prototype.add=function(t,n){var r=fO.get();r.set(t,n),this.h?this.h.next=r:this.g=r,this.h=r},e}(),fO=new(function(){function e(t,n){this.i=t,this.j=n,this.h=0,this.g=null}return e.prototype.get=function(){var t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t},e}())(function(){return new Rz},function(e){return e.reset()}),Rz=function(){function e(){this.next=this.g=this.h=null}return e.prototype.set=function(t,n){this.h=t,this.g=n,this.next=null},e.prototype.reset=function(){this.next=this.g=this.h=null},e}();function Nz(e){Ee.setTimeout(function(){throw e},0)}function t0(e,t){nw||Pz(),rw||(nw(),rw=!0),hO.add(e,t)}var nw;function Pz(){var e=Ee.Promise.resolve(void 0);nw=function(){e.then(Oz)}}var rw=!1,hO=new kz;function Oz(){for(var e;e=Az();){try{e.h.call(e.g)}catch(n){Nz(n)}var t=fO;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}rw=!1}function iv(e,t){nn.call(this),this.h=e||1,this.g=t||Ee,this.j=vn(this.kb,this),this.l=Date.now()}yn(iv,nn);oe=iv.prototype;oe.da=!1;oe.S=null;oe.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),gn(this,"tick"),this.da&&(n0(this),this.start()))}};oe.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function n0(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}oe.M=function(){iv.Z.M.call(this),n0(this),delete this.g};function r0(e,t,n){if(typeof e=="function")n&&(e=vn(e,n));else if(e&&typeof e.handleEvent=="function")e=vn(e.handleEvent,e);else throw Error("Invalid listener argument");return 2147483647<Number(t)?-1:Ee.setTimeout(e,t||0)}function dO(e){e.g=r0(function(){e.g=null,e.i&&(e.i=!1,dO(e))},e.j);var t=e.h;e.h=null,e.m.apply(null,t)}var xz=function(e){az(t,e);function t(n,r){var i=e.call(this)||this;return i.m=n,i.j=r,i.h=null,i.i=!1,i.g=null,i}return t.prototype.l=function(n){this.h=arguments,this.g?this.i=!0:dO(this)},t.prototype.M=function(){e.prototype.M.call(this),this.g&&(Ee.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},t}(Go);function jl(e){Go.call(this),this.h=e,this.g={}}yn(jl,Go);var qA=[];function pO(e,t,n,r){Array.isArray(n)||(n&&(qA[0]=n.toString()),n=qA);for(var i=0;i<n.length;i++){var s=sO(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function vO(e){Gb(e.g,function(t,n){this.g.hasOwnProperty(n)&&Xb(t)},e),e.g={}}jl.prototype.M=function(){jl.Z.M.call(this),vO(this)};jl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function ov(){this.g=!0}ov.prototype.Aa=function(){this.g=!1};function Dz(e,t,n,r,i,s){e.info(function(){if(e.g)if(s)for(var a="",c=s.split("&"),l=0;l<c.length;l++){var h=c[l].split("=");if(1<h.length){var d=h[0];h=h[1];var v=d.split("_");a=2<=v.length&&v[1]=="type"?a+(d+"="+h+"&"):a+(d+"=redacted&")}}else a=null;else a=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+`
`+n+`
`+a})}function Lz(e,t,n,r,i,s,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+`
`+n+`
`+s+" "+a})}function ru(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+Fz(e,n)+(r?" "+r:"")})}function Mz(e,t){e.info(function(){return"TIMEOUT: "+t})}ov.prototype.info=function(){};function Fz(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n){for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var a=1;a<i.length;a++)i[a]=""}}}}return e0(n)}catch{return t}}var pa={},HA=null;function sv(){return HA=HA||new nn}pa.Ma="serverreachability";function gO(e){In.call(this,pa.Ma,e)}yn(gO,In);function Vl(e){var t=sv();gn(t,new gO(t))}pa.STAT_EVENT="statevent";function mO(e,t){In.call(this,pa.STAT_EVENT,e),this.stat=t}yn(mO,In);function Kn(e){var t=sv();gn(t,new mO(t,e))}pa.Na="timingevent";function yO(e,t){In.call(this,pa.Na,e),this.size=t}yn(yO,In);function _f(e,t){if(typeof e!="function")throw Error("Fn must not be null and must be a function");return Ee.setTimeout(function(){e()},t)}var av={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},_O={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function i0(){}i0.prototype.h=null;function KA(e){return e.h||(e.h=e.i())}function wO(){}var wf={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function o0(){In.call(this,"d")}yn(o0,In);function s0(){In.call(this,"c")}yn(s0,In);var iw;function uv(){}yn(uv,i0);uv.prototype.g=function(){return new XMLHttpRequest};uv.prototype.i=function(){return{}};iw=new uv;function bf(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new jl(this),this.P=Uz,e=J_?125:void 0,this.W=new iv(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new bO}function bO(){this.i=null,this.g="",this.h=!1}var Uz=45e3,ow={},$d={};oe=bf.prototype;oe.setTimeout=function(e){this.P=e};function sw(e,t,n){e.K=1,e.v=lv(Ji(t)),e.s=n,e.U=!0,EO(e,null)}function EO(e,t){e.F=Date.now(),Ef(e),e.A=Ji(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),RO(n.h,"t",r),e.C=0,n=e.l.H,e.h=new bO,e.g=QO(e.l,n?t:null,!e.s),0<e.O&&(e.L=new xz(vn(e.Ia,e,e.g),e.O)),pO(e.V,e.g,"readystatechange",e.gb),t=e.H?tO(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Vl(),Dz(e.j,e.u,e.A,e.m,e.X,e.s)}oe.gb=function(e){e=e.target;var t=this.L;t&&Ki(e)==3?t.l():this.Ia(e)};oe.Ia=function(e){try{if(e==this.g)e:{var t=Ki(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(t!=3||J_||this.g&&(this.h.h||this.g.ga()||GA(this.g)))){this.I||t!=4||n==7||(n==8||0>=r?Vl(3):Vl(2)),cv(this);var i=this.g.ba();this.N=i;t:if(TO(this)){var s=GA(this.g);e="";var a=s.length,c=Ki(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ds(this),pl(this);var l="";break t}this.h.i=new Ee.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(s[n],{stream:c&&n==a-1});s.splice(0,a),this.h.g+=e,this.C=0,l=this.h.g}else l=this.g.ga();if(this.i=i==200,Lz(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var h,d=this.g;if((h=d.g?d.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!zd(h)){var v=h;break t}}v=null}if(i=v)ru(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,aw(this,i);else{this.i=!1,this.o=3,Kn(12),Ds(this),pl(this);break e}}this.U?(IO(this,t,l),J_&&this.i&&t==3&&(pO(this.V,this.W,"tick",this.fb),this.W.start())):(ru(this.j,this.m,l,null),aw(this,l)),t==4&&Ds(this),this.i&&!this.I&&(t==4?zO(this.l,this):(this.i=!1,Ef(this)))}else i==400&&0<l.indexOf("Unknown SID")?(this.o=3,Kn(12)):(this.o=0,Kn(13)),Ds(this),pl(this)}}}catch{}finally{}};function TO(e){return e.g?e.u=="GET"&&e.K!=2&&e.l.Ba:!1}function IO(e,t,n){for(var r=!0,i;!e.I&&e.C<n.length;)if(i=jz(e,n),i==$d){t==4&&(e.o=4,Kn(14),r=!1),ru(e.j,e.m,null,"[Incomplete Response]");break}else if(i==ow){e.o=4,Kn(15),ru(e.j,e.m,n,"[Invalid Chunk]"),r=!1;break}else ru(e.j,e.m,i,null),aw(e,i);TO(e)&&i!=$d&&i!=ow&&(e.h.g="",e.C=0),t!=4||n.length!=0||e.h.h||(e.o=1,Kn(16),r=!1),e.i=e.i&&r,r?0<n.length&&!e.aa&&(e.aa=!0,t=e.l,t.g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),v0(t),t.L=!0,Kn(11))):(ru(e.j,e.m,n,"[Invalid Chunked Response]"),Ds(e),pl(e))}oe.fb=function(){if(this.g){var e=Ki(this.g),t=this.g.ga();this.C<t.length&&(cv(this),IO(this,e,t),this.i&&e!=4&&Ef(this))}};function jz(e,t){var n=e.C,r=t.indexOf(`
`,n);return r==-1?$d:(n=Number(t.substring(n,r)),isNaN(n)?ow:(r+=1,r+n>t.length?$d:(t=t.substr(r,n),e.C=r+n,t)))}oe.cancel=function(){this.I=!0,Ds(this)};function Ef(e){e.Y=Date.now()+e.P,SO(e,e.P)}function SO(e,t){if(e.B!=null)throw Error("WatchDog timer not null");e.B=_f(vn(e.eb,e),t)}function cv(e){e.B&&(Ee.clearTimeout(e.B),e.B=null)}oe.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(Mz(this.j,this.A),this.K!=2&&(Vl(),Kn(17)),Ds(this),this.o=2,pl(this)):SO(this,this.Y-e)};function pl(e){e.l.G==0||e.I||zO(e.l,e)}function Ds(e){cv(e);var t=e.L;t&&typeof t.na=="function"&&t.na(),e.L=null,n0(e.W),vO(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function aw(e,t){try{var n=e.l;if(n.G!=0&&(n.g==e||uw(n.i,e))){if(n.I=e.N,!e.J&&uw(n.i,e)&&n.G==3){try{var r=n.Ca.g.parse(t)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.F+3e3<e.F)Xd(n),dv(n);else break e;p0(n),Kn(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&n.A==0&&!n.v&&(n.v=_f(vn(n.ab,n),6e3));if(1>=OO(n.i)&&n.ka){try{n.ka()}catch{}n.ka=void 0}}else Ls(n,11)}else if((e.J||n.g==e)&&Xd(n),!zd(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var s=i[t];if(n.U=s[0],s=s[1],n.G==2)if(s[0]=="c"){n.J=s[1],n.la=s[2];var a=s[3];a!=null&&(n.ma=a,n.h.info("VER="+n.ma));var c=s[4];c!=null&&(n.za=c,n.h.info("SVER="+n.za));var l=s[5];l!=null&&typeof l=="number"&&0<l&&(r=1.5*l,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var h=e.g;if(h){var d=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(d){var v=r.i;!v.g&&(Bn(d,"spdy")||Bn(d,"quic")||Bn(d,"h2"))&&(v.j=v.l,v.g=new Set,v.h&&(c0(v,v.h),v.h=null))}if(r.D){var m=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;m&&(r.sa=m,pt(r.F,r.D,m))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms")),r=n;var y=e;if(r.oa=GO(r,r.H?r.la:null,r.W),y.J){xO(r.i,y);var w=y,E=r.K;E&&w.setTimeout(E),w.B&&(cv(w),Ef(w)),r.g=y}else HO(r);0<n.l.length&&pv(n)}else s[0]!="stop"&&s[0]!="close"||Ls(n,7);else n.G==3&&(s[0]=="stop"||s[0]=="close"?s[0]=="stop"?Ls(n,7):d0(n):s[0]!="noop"&&n.j&&n.j.wa(s),n.A=0)}}Vl(4)}catch{}}function Vz(e){if(e.R&&typeof e.R=="function")return e.R();if(typeof e=="string")return e.split("");if(X_(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}t=[],n=0;for(r in e)t[n++]=e[r];return t}function a0(e,t){if(e.forEach&&typeof e.forEach=="function")e.forEach(t,void 0);else if(X_(e)||typeof e=="string")eO(e,t,void 0);else{if(e.T&&typeof e.T=="function")var n=e.T();else if(e.R&&typeof e.R=="function")n=void 0;else if(X_(e)||typeof e=="string"){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=Vz(e),i=r.length;for(var s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}}function Zu(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Zu)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}oe=Zu.prototype;oe.R=function(){u0(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e};oe.T=function(){return u0(this),this.g.concat()};function u0(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];ea(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)r=e.g[t],ea(i,r)||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}oe.get=function(e,t){return ea(this.h,e)?this.h[e]:t};oe.set=function(e,t){ea(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t};oe.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);e.call(t,s,i,this)}};function ea(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var CO=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Bz(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function ta(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof ta){this.g=t!==void 0?t:e.g,Gd(this,e.j),this.s=e.s,Qd(this,e.i),Yd(this,e.m),this.l=e.l,t=e.h;var n=new Bl;n.i=t.i,t.g&&(n.g=new Zu(t.g),n.h=t.h),zA(this,n),this.o=e.o}else e&&(n=String(e).match(CO))?(this.g=!!t,Gd(this,n[1]||"",!0),this.s=vl(n[2]||""),Qd(this,n[3]||"",!0),Yd(this,n[4]),this.l=vl(n[5]||"",!0),zA(this,n[6]||"",!0),this.o=vl(n[7]||"")):(this.g=!!t,this.h=new Bl(null,this.g))}ta.prototype.toString=function(){var e=[],t=this.j;t&&e.push(rl(t,WA,!0),":");var n=this.i;return(n||t=="file")&&(e.push("//"),(t=this.s)&&e.push(rl(t,WA,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&e.push(":",String(n))),(n=this.l)&&(this.i&&n.charAt(0)!="/"&&e.push("/"),e.push(rl(n,n.charAt(0)=="/"?Wz:zz,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",rl(n,Gz)),e.join("")};function Ji(e){return new ta(e)}function Gd(e,t,n){e.j=n?vl(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Qd(e,t,n){e.i=n?vl(t,!0):t}function Yd(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function zA(e,t,n){t instanceof Bl?(e.h=t,Qz(e.h,e.g)):(n||(t=rl(t,$z)),e.h=new Bl(t,e.g))}function pt(e,t,n){e.h.set(t,n)}function lv(e){return pt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function qz(e){return e instanceof ta?Ji(e):new ta(e,void 0)}function Hz(e,t,n,r){var i=new ta(null,void 0);return e&&Gd(i,e),t&&Qd(i,t),n&&Yd(i,n),r&&(i.l=r),i}function vl(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function rl(e,t,n){return typeof e=="string"?(e=encodeURI(e).replace(t,Kz),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Kz(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var WA=/[#\/\?@]/g,zz=/[#\?:]/g,Wz=/[#\?]/g,$z=/[#\?@]/g,Gz=/#/g;function Bl(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Qo(e){e.g||(e.g=new Zu,e.h=0,e.i&&Bz(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}oe=Bl.prototype;oe.add=function(e,t){Qo(this),this.i=null,e=ec(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this};function AO(e,t){Qo(e),t=ec(e,t),ea(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,e=e.g,ea(e.h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&u0(e)))}function kO(e,t){return Qo(e),t=ec(e,t),ea(e.g.h,t)}oe.forEach=function(e,t){Qo(this),this.g.forEach(function(n,r){eO(n,function(i){e.call(t,i,r,this)},this)},this)};oe.T=function(){Qo(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],s=0;s<i.length;s++)n.push(t[r]);return n};oe.R=function(e){Qo(this);var t=[];if(typeof e=="string")kO(this,e)&&(t=MA(t,this.g.get(ec(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=MA(t,e[n])}return t};oe.set=function(e,t){return Qo(this),this.i=null,e=ec(this,e),kO(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this};oe.get=function(e,t){return e?(e=this.R(e),0<e.length?String(e[0]):t):t};function RO(e,t,n){AO(e,t),0<n.length&&(e.i=null,e.g.set(ec(e,t),$b(n)),e.h+=n.length)}oe.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var a=i;r[s]!==""&&(a+="="+encodeURIComponent(String(r[s]))),e.push(a)}}return this.i=e.join("&")};function ec(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Qz(e,t){t&&!e.j&&(Qo(e),e.i=null,e.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(AO(this,r),RO(this,i,n))},e)),e.j=t}var Yz=function(){function e(t,n){this.h=t,this.g=n}return e}();function NO(e){this.l=e||Xz,Ee.PerformanceNavigationTiming?(e=Ee.performance.getEntriesByType("navigation"),e=0<e.length&&(e[0].nextHopProtocol=="hq"||e[0].nextHopProtocol=="h2")):e=!!(Ee.g&&Ee.g.Ea&&Ee.g.Ea()&&Ee.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Xz=10;function PO(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function OO(e){return e.h?1:e.g?e.g.size:0}function uw(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function c0(e,t){e.g?e.g.add(t):e.h=t}function xO(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}NO.prototype.cancel=function(){var e,t;if(this.i=DO(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){try{for(var n=JP(this.g.values()),r=n.next();!r.done;r=n.next()){var i=r.value;i.cancel()}}catch(s){e={error:s}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.g.clear()}};function DO(e){var t,n;if(e.h!=null)return e.i.concat(e.h.D);if(e.g!=null&&e.g.size!==0){var r=e.i;try{for(var i=JP(e.g.values()),s=i.next();!s.done;s=i.next()){var a=s.value;r=r.concat(a.D)}}catch(c){t={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}return $b(e.i)}function l0(){}l0.prototype.stringify=function(e){return Ee.JSON.stringify(e,void 0)};l0.prototype.parse=function(e){return Ee.JSON.parse(e,void 0)};function Jz(){this.g=new l0}function Zz(e,t,n){var r=n||"";try{a0(e,function(i,s){var a=i;mf(i)&&(a=e0(i)),t.push(r+s+"="+encodeURIComponent(a))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function eW(e,t){var n=new ov;if(Ee.Image){var r=new Image;r.onload=Qh(Xh,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Qh(Xh,n,r,"TestLoadImage: error",!1,t),r.onabort=Qh(Xh,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Qh(Xh,n,r,"TestLoadImage: timeout",!1,t),Ee.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}function Xh(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch{}}function Tf(e){this.l=e.$b||null,this.j=e.ib||!1}yn(Tf,i0);Tf.prototype.g=function(){return new fv(this.l,this.j)};Tf.prototype.i=function(e){return function(){return e}}({});function fv(e,t){nn.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=f0,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}yn(fv,nn);var f0=0;oe=fv.prototype;oe.open=function(e,t){if(this.readyState!=f0)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,ql(this)};oe.send=function(e){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Ee).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))};oe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,If(this)),this.readyState=f0};oe.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,ql(this)),this.g&&(this.readyState=3,ql(this),this.g)))if(this.responseType==="arraybuffer")e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof Ee.ReadableStream<"u"&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;LO(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))};function LO(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}oe.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?If(this):ql(this),this.readyState==3&&LO(this)}};oe.Ua=function(e){this.g&&(this.response=this.responseText=e,If(this))};oe.Ta=function(e){this.g&&(this.response=e,If(this))};oe.ha=function(){this.g&&If(this)};function If(e){e.readyState=4,e.l=null,e.j=null,e.A=null,ql(e)}oe.setRequestHeader=function(e,t){this.v.append(e,t)};oe.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""};oe.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join(`\r
`)};function ql(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty(fv.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(e){this.m=e?"include":"same-origin"}});var tW=Ee.JSON.parse;function Lt(e){nn.call(this),this.headers=new Zu,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=MO,this.K=this.L=!1}yn(Lt,nn);var MO="",nW=/^https?$/i,rW=["POST","PUT"];oe=Lt.prototype;oe.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():iw.g(),this.C=this.u?KA(this.u):KA(iw),this.g.onreadystatechange=vn(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(s){$A(this,s);return}e=n||"";var i=new Zu(this.headers);r&&a0(r,function(s,a){i.set(a,s)}),r=pz(i.T()),n=Ee.FormData&&e instanceof Ee.FormData,!(0<=ZP(rW,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(s,a){this.g.setRequestHeader(a,s)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{jO(this),0<this.B&&((this.K=iW(this.g))?(this.g.timeout=this.B,this.g.ontimeout=vn(this.pa,this)):this.A=r0(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){$A(this,s)}};function iW(e){return Tu&&_z()&&typeof e.timeout=="number"&&e.ontimeout!==void 0}function oW(e){return e.toLowerCase()=="content-type"}oe.pa=function(){typeof Wb<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,gn(this,"timeout"),this.abort(8))};function $A(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,FO(e),hv(e)}function FO(e){e.D||(e.D=!0,gn(e,"complete"),gn(e,"error"))}oe.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,gn(this,"complete"),gn(this,"abort"),hv(this))};oe.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),hv(this,!0)),Lt.Z.M.call(this)};oe.Fa=function(){this.s||(this.F||this.v||this.l?UO(this):this.cb())};oe.cb=function(){UO(this)};function UO(e){if(e.h&&typeof Wb<"u"&&(!e.C[1]||Ki(e)!=4||e.ba()!=2)){if(e.v&&Ki(e)==4)r0(e.Fa,0,e);else if(gn(e,"readystatechange"),Ki(e)==4){e.h=!1;try{var t=e.ba();e:switch(t){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var n=!0;break e;default:n=!1}var r;if(!(r=n)){var i;if(i=t===0){var s=String(e.H).match(CO)[1]||null;if(!s&&Ee.self&&Ee.self.location){var a=Ee.self.location.protocol;s=a.substr(0,a.length-1)}i=!nW.test(s?s.toLowerCase():"")}r=i}if(r)gn(e,"complete"),gn(e,"success");else{e.m=6;try{var c=2<Ki(e)?e.g.statusText:""}catch{c=""}e.j=c+" ["+e.ba()+"]",FO(e)}}finally{hv(e)}}}}function hv(e,t){if(e.g){jO(e);var n=e.g,r=e.C[0]?Kd:null;e.g=null,e.C=null,t||gn(e,"ready");try{n.onreadystatechange=r}catch{}}}function jO(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Ee.clearTimeout(e.A),e.A=null)}function Ki(e){return e.g?e.g.readyState:0}oe.ba=function(){try{return 2<Ki(this)?this.g.status:-1}catch{return-1}};oe.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}};oe.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),tW(t)}};function GA(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case MO:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}oe.Da=function(){return this.m};oe.La=function(){return typeof this.j=="string"?this.j:String(this.j)};function sW(e){var t="";return Gb(e,function(n,r){t+=r,t+=":",t+=n,t+=`\r
`}),t}function h0(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=sW(n),typeof e=="string"?n!=null&&encodeURIComponent(String(n)):pt(e,t,n))}function Jc(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function VO(e){this.za=0,this.l=[],this.h=new ov,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Jc("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Jc("baseRetryDelayMs",5e3,e),this.$a=Jc("retryDelaySeedMs",1e4,e),this.Ya=Jc("forwardChannelMaxRetries",2,e),this.ra=Jc("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new NO(e&&e.concurrentRequestLimit),this.Ca=new Jz,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||e.Xb!==!1}oe=VO.prototype;oe.ma=8;oe.G=1;function d0(e){if(BO(e),e.G==3){var t=e.V++,n=Ji(e.F);pt(n,"SID",e.J),pt(n,"RID",t),pt(n,"TYPE","terminate"),Sf(e,n),t=new bf(e,e.h,t,void 0),t.K=2,t.v=lv(Ji(n)),n=!1,Ee.navigator&&Ee.navigator.sendBeacon&&(n=Ee.navigator.sendBeacon(t.v.toString(),"")),!n&&Ee.Image&&(new Image().src=t.v,n=!0),n||(t.g=QO(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Ef(t)}$O(e)}oe.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch{}};function dv(e){e.g&&(v0(e),e.g.cancel(),e.g=null)}function BO(e){dv(e),e.u&&(Ee.clearTimeout(e.u),e.u=null),Xd(e),e.i.cancel(),e.m&&(typeof e.m=="number"&&Ee.clearTimeout(e.m),e.m=null)}function Vy(e,t){e.l.push(new Yz(e.Za++,t)),e.G==3&&pv(e)}function pv(e){PO(e.i)||e.m||(e.m=!0,t0(e.Ha,e),e.C=0)}function aW(e,t){return OO(e.i)>=e.i.j-(e.m?1:0)?!1:e.m?(e.l=t.D.concat(e.l),!0):e.G==1||e.G==2||e.C>=(e.Xa?0:e.Ya)?!1:(e.m=_f(vn(e.Ha,e,t),WO(e,e.C)),e.C++,!0)}oe.Ha=function(e){if(this.m)if(this.m=null,this.G==1){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new bf(this,this.h,e,void 0),n=this.s;if(this.P&&(n?(n=tO(n),nO(n,this.P)):n=this.P),this.o===null&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){t:{var s=this.l[i];if("__data__"in s.g&&(s=s.g.__data__,typeof s=="string")){s=s.length;break t}s=void 0}if(s===void 0)break;if(r+=s,4096<r){r=i;break e}if(r===4096||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=qO(this,t,r),i=Ji(this.F),pt(i,"RID",e),pt(i,"CVER",22),this.D&&pt(i,"X-HTTP-Session-Id",this.D),Sf(this,i),this.o&&n&&h0(i,this.o,n),c0(this.i,t),this.Ra&&pt(i,"TYPE","init"),this.ja?(pt(i,"$req",r),pt(i,"SID","null"),t.$=!0,sw(t,i,null)):sw(t,i,r),this.G=2}}else this.G==3&&(e?QA(this,e):this.l.length==0||PO(this.i)||QA(this))};function QA(e,t){var n;t?n=t.m:n=e.V++;var r=Ji(e.F);pt(r,"SID",e.J),pt(r,"RID",n),pt(r,"AID",e.U),Sf(e,r),e.o&&e.s&&h0(r,e.o,e.s),n=new bf(e,e.h,n,e.C+1),e.o===null&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=qO(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),c0(e.i,n),sw(n,r,t)}function Sf(e,t){e.j&&a0({},function(n,r){pt(t,r,n)})}function qO(e,t,n){n=Math.min(e.l.length,n);var r=e.j?vn(e.j.Oa,e.j,e):null;e:for(var i=e.l,s=-1;;){var a=["count="+n];s==-1?0<n?(s=i[0].h,a.push("ofs="+s)):s=0:a.push("ofs="+s);for(var c=!0,l=0;l<n;l++){var h=i[l].h,d=i[l].g;if(h-=s,0>h)s=Math.max(0,i[l].h-100),c=!1;else try{Zz(d,a,"req"+h+"_")}catch{r&&r(d)}}if(c){r=a.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function HO(e){e.g||e.u||(e.Y=1,t0(e.Ga,e),e.A=0)}function p0(e){return e.g||e.u||3<=e.A?!1:(e.Y++,e.u=_f(vn(e.Ga,e),WO(e,e.A)),e.A++,!0)}oe.Ga=function(){if(this.u=null,KO(this),this.$&&!(this.L||this.g==null||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=_f(vn(this.bb,this),e)}};oe.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Kn(10),dv(this),KO(this))};function v0(e){e.B!=null&&(Ee.clearTimeout(e.B),e.B=null)}function KO(e){e.g=new bf(e,e.h,"rpc",e.Y),e.o===null&&(e.g.H=e.s),e.g.O=0;var t=Ji(e.oa);pt(t,"RID","rpc"),pt(t,"SID",e.J),pt(t,"CI",e.N?"0":"1"),pt(t,"AID",e.U),Sf(e,t),pt(t,"TYPE","xmlhttp"),e.o&&e.s&&h0(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=lv(Ji(t)),n.s=null,n.U=!0,EO(n,e)}oe.ab=function(){this.v!=null&&(this.v=null,dv(this),p0(this),Kn(19))};function Xd(e){e.v!=null&&(Ee.clearTimeout(e.v),e.v=null)}function zO(e,t){var n=null;if(e.g==t){Xd(e),v0(e),e.g=null;var r=2}else if(uw(e.i,t))n=t.D,xO(e.i,t),r=1;else return;if(e.I=t.N,e.G!=0){if(t.i)if(r==1){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;r=sv(),gn(r,new yO(r,n)),pv(e)}else HO(e);else if(i=t.o,i==3||i==0&&0<e.I||!(r==1&&aW(e,t)||r==2&&p0(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Ls(e,5);break;case 4:Ls(e,10);break;case 3:Ls(e,6);break;default:Ls(e,2)}}}function WO(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Ls(e,t){if(e.h.info("Error code "+t),t==2){var n=null;e.j&&(n=null);var r=vn(e.jb,e);n||(n=new ta("//www.google.com/images/cleardot.gif"),Ee.location&&Ee.location.protocol=="http"||Gd(n,"https"),lv(n)),eW(n.toString(),r)}else Kn(2);e.G=0,e.j&&e.j.va(t),$O(e),BO(e)}oe.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Kn(2)):(this.h.info("Failed to ping google.com"),Kn(1))};function $O(e){e.G=0,e.I=-1,e.j&&((DO(e.i).length!=0||e.l.length!=0)&&(e.i.i.length=0,$b(e.l),e.l.length=0),e.j.ua())}function GO(e,t,n){var r=qz(n);if(r.i!="")t&&Qd(r,t+"."+r.i),Yd(r,r.m);else{var i=Ee.location;r=Hz(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&Gb(e.aa,function(s,a){pt(r,a,s)}),t=e.D,n=e.sa,t&&n&&pt(r,t,n),pt(r,"VER",e.ma),Sf(e,r),r}function QO(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return t=n&&e.Ba&&!e.qa?new Lt(new Tf({ib:!0})):new Lt(e.qa),t.L=e.H,t}function YO(){}oe=YO.prototype;oe.xa=function(){};oe.wa=function(){};oe.va=function(){};oe.ua=function(){};oe.Oa=function(){};function Jd(){if(Tu&&!(10<=Number(wz)))throw Error("Environmental error: no available transport.")}Jd.prototype.g=function(e,t){return new br(e,t)};function br(e,t){nn.call(this),this.g=new VO(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!zd(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!zd(t)&&(this.g.D=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new tc(this)}yn(br,nn);br.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),t0(vn(e.hb,e,t))),Kn(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=GO(e,null,e.W),pv(e)};br.prototype.close=function(){d0(this.g)};br.prototype.u=function(e){if(typeof e=="string"){var t={};t.__data__=e,Vy(this.g,t)}else this.v?(t={},t.__data__=e0(e),Vy(this.g,t)):Vy(this.g,e)};br.prototype.M=function(){this.g.j=null,delete this.j,d0(this.g),delete this.g,br.Z.M.call(this)};function XO(e){o0.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}yn(XO,o0);function JO(){s0.call(this),this.status=1}yn(JO,s0);function tc(e){this.g=e}yn(tc,YO);tc.prototype.xa=function(){gn(this.g,"a")};tc.prototype.wa=function(e){gn(this.g,new XO(e))};tc.prototype.va=function(e){gn(this.g,new JO)};tc.prototype.ua=function(){gn(this.g,"b")};Jd.prototype.createWebChannel=Jd.prototype.g;br.prototype.send=br.prototype.u;br.prototype.open=br.prototype.m;br.prototype.close=br.prototype.close;av.NO_ERROR=0;av.TIMEOUT=8;av.HTTP_ERROR=6;_O.COMPLETE="complete";wO.EventType=wf;wf.OPEN="a";wf.CLOSE="b";wf.ERROR="c";wf.MESSAGE="d";nn.prototype.listen=nn.prototype.N;Lt.prototype.listenOnce=Lt.prototype.O;Lt.prototype.getLastError=Lt.prototype.La;Lt.prototype.getLastErrorCode=Lt.prototype.Da;Lt.prototype.getStatus=Lt.prototype.ba;Lt.prototype.getResponseJson=Lt.prototype.Qa;Lt.prototype.getResponseText=Lt.prototype.ga;Lt.prototype.send=Lt.prototype.ea;var uW=function(){return new Jd},cW=function(){return sv()},By=av,lW=_O,fW=pa,YA={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},hW=Tf,Jh=wO,dW=Lt;/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vr=function(){function e(t,n){var r=this;this.previousValue=t,n&&(n.sequenceNumberHandler=function(i){return r.t(i)},this.i=function(i){return n.writeSequenceNumber(i)})}return e.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},e.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},e}();vr.o=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},q=function(e){function t(n,r){var i=this;return(i=e.call(this,r)||this).code=n,i.message=r,i.name="FirebaseError",i.toString=function(){return i.name+": [code="+i.code+"]: "+i.message},i}return te(t,e),t}(Error),ti=new la("@firebase/firestore");function cw(){return ti.logLevel}function Y(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(ti.logLevel<=Le.DEBUG){var r=t.map(g0);ti.debug.apply(ti,Ne(["Firestore (8.10.1): "+e],r))}}function xt(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(ti.logLevel<=Le.ERROR){var r=t.map(g0);ti.error.apply(ti,Ne(["Firestore (8.10.1): "+e],r))}}function Hl(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(ti.logLevel<=Le.WARN){var r=t.map(g0);ti.warn.apply(ti,Ne(["Firestore (8.10.1): "+e],r))}}function g0(e){if(typeof e=="string")return e;try{return t=e,JSON.stringify(t)}catch{return e}var t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function le(e){e===void 0&&(e="Unexpected state");var t="FIRESTORE (8.10.1) INTERNAL ASSERTION FAILED: "+e;throw xt(t),new Error(t)}function _e(e,t){e||le()}function ee(e,t){return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pW(e){var t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ZO=function(){function e(){}return e.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length,r="";r.length<20;)for(var i=pW(40),s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length));return r},e}();function Ue(e,t){return e<t?-1:e>t?1:0}function Iu(e,t,n){return e.length===t.length&&e.every(function(r,i){return n(r,t[i])})}function ex(e){return e+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nr=function(){function e(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new q(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new q(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new q(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new q(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return e.now=function(){return e.fromMillis(Date.now())},e.fromDate=function(t){return e.fromMillis(t.getTime())},e.fromMillis=function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))},e.prototype.toDate=function(){return new Date(this.toMillis())},e.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},e.prototype._compareTo=function(t){return this.seconds===t.seconds?Ue(this.nanoseconds,t.nanoseconds):Ue(this.seconds,t.seconds)},e.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},e.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},e.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},e.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},e}(),xe=function(){function e(t){this.timestamp=t}return e.fromTimestamp=function(t){return new e(t)},e.min=function(){return new e(new nr(0,0))},e.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},e.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},e.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},e.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},e.prototype.toTimestamp=function(){return this.timestamp},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XA(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function va(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function tx(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nx=function(){function e(t,n,r){n===void 0?n=0:n>t.length&&le(),r===void 0?r=t.length-n:r>t.length-n&&le(),this.segments=t,this.offset=n,this.len=r}return Object.defineProperty(e.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return e.comparator(this,t)===0},e.prototype.child=function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach(function(r){n.push(r)}):n.push(t),this.construct(n)},e.prototype.limit=function(){return this.offset+this.length},e.prototype.popFirst=function(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)},e.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},e.prototype.firstSegment=function(){return this.segments[this.offset]},e.prototype.lastSegment=function(){return this.get(this.length-1)},e.prototype.get=function(t){return this.segments[this.offset+t]},e.prototype.isEmpty=function(){return this.length===0},e.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0},e.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0},e.prototype.forEach=function(t){for(var n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])},e.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},e.comparator=function(t,n){for(var r=Math.min(t.length,n.length),i=0;i<r;i++){var s=t.get(i),a=n.get(i);if(s<a)return-1;if(s>a)return 1}return t.length<n.length?-1:t.length>n.length?1:0},e}(),Ge=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return te(t,e),t.prototype.construct=function(n,r,i){return new t(n,r,i)},t.prototype.canonicalString=function(){return this.toArray().join("/")},t.prototype.toString=function(){return this.canonicalString()},t.fromString=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];for(var i=[],s=0,a=n;s<a.length;s++){var c=a[s];if(c.indexOf("//")>=0)throw new q(x.INVALID_ARGUMENT,"Invalid segment ("+c+"). Paths must not contain // in them.");i.push.apply(i,c.split("/").filter(function(l){return l.length>0}))}return new t(i)},t.emptyPath=function(){return new t([])},t}(nx),vW=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ri=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return te(t,e),t.prototype.construct=function(n,r,i){return new t(n,r,i)},t.isValidIdentifier=function(n){return vW.test(n)},t.prototype.canonicalString=function(){return this.toArray().map(function(n){return n=n.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(n)||(n="`"+n+"`"),n}).join(".")},t.prototype.toString=function(){return this.canonicalString()},t.prototype.isKeyField=function(){return this.length===1&&this.get(0)==="__name__"},t.keyField=function(){return new t(["__name__"])},t.fromServerFormat=function(n){for(var r=[],i="",s=0,a=function(){if(i.length===0)throw new q(x.INVALID_ARGUMENT,"Invalid field path ("+n+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");r.push(i),i=""},c=!1;s<n.length;){var l=n[s];if(l==="\\"){if(s+1===n.length)throw new q(x.INVALID_ARGUMENT,"Path has trailing escape character: "+n);var h=n[s+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new q(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+n);i+=h,s+=2}else l==="`"?(c=!c,s++):l!=="."||c?(i+=l,s++):(a(),s++)}if(a(),c)throw new q(x.INVALID_ARGUMENT,"Unterminated ` in path: "+n);return new t(r)},t.emptyPath=function(){return new t([])},t}(nx),Su=function(){function e(t){this.fields=t,t.sort(ri.comparator)}return e.prototype.covers=function(t){for(var n=0,r=this.fields;n<r.length;n++)if(r[n].isPrefixOf(t))return!0;return!1},e.prototype.isEqual=function(t){return Iu(this.fields,t.fields,function(n,r){return n.isEqual(r)})},e}(),zn=function(){function e(t){this.binaryString=t}return e.fromBase64String=function(t){return new e(atob(t))},e.fromUint8Array=function(t){return new e(function(n){for(var r="",i=0;i<n.length;++i)r+=String.fromCharCode(n[i]);return r}(t))},e.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},e.prototype.toUint8Array=function(){return function(t){for(var n=new Uint8Array(t.length),r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}(this.binaryString)},e.prototype.approximateByteSize=function(){return 2*this.binaryString.length},e.prototype.compareTo=function(t){return Ue(this.binaryString,t.binaryString)},e.prototype.isEqual=function(t){return this.binaryString===t.binaryString},e}();zn.EMPTY_BYTE_STRING=new zn("");var gW=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zo(e){if(_e(!!e),typeof e=="string"){var t=0,n=gW.exec(e);if(_e(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Ot(e.seconds),nanos:Ot(e.nanos)}}function Ot(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Cu(e){return typeof e=="string"?zn.fromBase64String(e):zn.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m0(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function rx(e){var t=e.mapValue.fields.__previous_value__;return m0(t)?rx(t):t}function Kl(e){var t=zo(e.mapValue.fields.__local_write_time__.timestampValue);return new nr(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ga(e){return e==null}function Zd(e){return e===0&&1/e==-1/0}function ix(e){return typeof e=="number"&&Number.isInteger(e)&&!Zd(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fe=function(){function e(t){this.path=t}return e.fromPath=function(t){return new e(Ge.fromString(t))},e.fromName=function(t){return new e(Ge.fromString(t).popFirst(5))},e.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},e.prototype.isEqual=function(t){return t!==null&&Ge.comparator(this.path,t.path)===0},e.prototype.toString=function(){return this.path.toString()},e.comparator=function(t,n){return Ge.comparator(t.path,n.path)},e.isDocumentKey=function(t){return t.length%2==0},e.fromSegments=function(t){return new e(new Ge(t.slice()))},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function na(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?m0(e)?4:10:le()}function Ri(e,t){var n=na(e);if(n!==na(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Kl(e).isEqual(Kl(t));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;var s=zo(r.timestampValue),a=zo(i.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(r,i){return Cu(r.bytesValue).isEqual(Cu(i.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(r,i){return Ot(r.geoPointValue.latitude)===Ot(i.geoPointValue.latitude)&&Ot(r.geoPointValue.longitude)===Ot(i.geoPointValue.longitude)}(e,t);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Ot(r.integerValue)===Ot(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){var s=Ot(r.doubleValue),a=Ot(i.doubleValue);return s===a?Zd(s)===Zd(a):isNaN(s)&&isNaN(a)}return!1}(e,t);case 9:return Iu(e.arrayValue.values||[],t.arrayValue.values||[],Ri);case 10:return function(r,i){var s=r.mapValue.fields||{},a=i.mapValue.fields||{};if(XA(s)!==XA(a))return!1;for(var c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!Ri(s[c],a[c])))return!1;return!0}(e,t);default:return le()}}function zl(e,t){return(e.values||[]).find(function(n){return Ri(n,t)})!==void 0}function Au(e,t){var n=na(e),r=na(t);if(n!==r)return Ue(n,r);switch(n){case 0:return 0;case 1:return Ue(e.booleanValue,t.booleanValue);case 2:return function(i,s){var a=Ot(i.integerValue||i.doubleValue),c=Ot(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(e,t);case 3:return JA(e.timestampValue,t.timestampValue);case 4:return JA(Kl(e),Kl(t));case 5:return Ue(e.stringValue,t.stringValue);case 6:return function(i,s){var a=Cu(i),c=Cu(s);return a.compareTo(c)}(e.bytesValue,t.bytesValue);case 7:return function(i,s){for(var a=i.split("/"),c=s.split("/"),l=0;l<a.length&&l<c.length;l++){var h=Ue(a[l],c[l]);if(h!==0)return h}return Ue(a.length,c.length)}(e.referenceValue,t.referenceValue);case 8:return function(i,s){var a=Ue(Ot(i.latitude),Ot(s.latitude));return a!==0?a:Ue(Ot(i.longitude),Ot(s.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(i,s){for(var a=i.values||[],c=s.values||[],l=0;l<a.length&&l<c.length;++l){var h=Au(a[l],c[l]);if(h)return h}return Ue(a.length,c.length)}(e.arrayValue,t.arrayValue);case 10:return function(i,s){var a=i.fields||{},c=Object.keys(a),l=s.fields||{},h=Object.keys(l);c.sort(),h.sort();for(var d=0;d<c.length&&d<h.length;++d){var v=Ue(c[d],h[d]);if(v!==0)return v;var m=Au(a[c[d]],l[h[d]]);if(m!==0)return m}return Ue(c.length,h.length)}(e.mapValue,t.mapValue);default:throw le()}}function JA(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Ue(e,t);var n=zo(e),r=zo(t),i=Ue(n.seconds,r.seconds);return i!==0?i:Ue(n.nanos,r.nanos)}function y0(e){return lw(e)}function lw(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(r){var i=zo(r);return"time("+i.seconds+","+i.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Cu(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,fe.fromName(n).toString()):"geoPointValue"in e?"geo("+(t=e.geoPointValue).latitude+","+t.longitude+")":"arrayValue"in e?function(r){for(var i="[",s=!0,a=0,c=r.values||[];a<c.length;a++)s?s=!1:i+=",",i+=lw(c[a]);return i+"]"}(e.arrayValue):"mapValue"in e?function(r){for(var i="{",s=!0,a=0,c=Object.keys(r.fields||{}).sort();a<c.length;a++){var l=c[a];s?s=!1:i+=",",i+=l+":"+lw(r.fields[l])}return i+"}"}(e.mapValue):le();var t,n}function ep(e,t){return{referenceValue:"projects/"+e.projectId+"/databases/"+e.database+"/documents/"+t.path.canonicalString()}}function fw(e){return!!e&&"integerValue"in e}function _0(e){return!!e&&"arrayValue"in e}function ZA(e){return!!e&&"nullValue"in e}function ek(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function gd(e){return!!e&&"mapValue"in e}function gl(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return va(e.mapValue.fields,function(i,s){return t.mapValue.fields[i]=gl(s)}),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=gl(e.arrayValue.values[r]);return n}return Object.assign({},e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dr=function(){function e(t){this.value=t}return e.empty=function(){return new e({mapValue:{}})},e.prototype.field=function(t){if(t.isEmpty())return this.value;for(var n=this.value,r=0;r<t.length-1;++r)if(!gd(n=(n.mapValue.fields||{})[t.get(r)]))return null;return(n=(n.mapValue.fields||{})[t.lastSegment()])||null},e.prototype.set=function(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=gl(n)},e.prototype.setAll=function(t){var n=this,r=ri.emptyPath(),i={},s=[];t.forEach(function(c,l){if(!r.isImmediateParentOf(l)){var h=n.getFieldsMap(r);n.applyChanges(h,i,s),i={},s=[],r=l.popLast()}c?i[l.lastSegment()]=gl(c):s.push(l.lastSegment())});var a=this.getFieldsMap(r);this.applyChanges(a,i,s)},e.prototype.delete=function(t){var n=this.field(t.popLast());gd(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]},e.prototype.isEqual=function(t){return Ri(this.value,t.value)},e.prototype.getFieldsMap=function(t){var n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(var r=0;r<t.length;++r){var i=n.mapValue.fields[t.get(r)];gd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields},e.prototype.applyChanges=function(t,n,r){va(n,function(c,l){return t[c]=l});for(var i=0,s=r;i<s.length;i++){var a=s[i];delete t[a]}},e.prototype.clone=function(){return new e(gl(this.value))},e}();function ox(e){var t=[];return va(e.fields,function(n,r){var i=new ri([n]);if(gd(r)){var s=ox(r.mapValue).fields;if(s.length===0)t.push(i);else for(var a=0,c=s;a<c.length;a++){var l=c[a];t.push(i.child(l))}}else t.push(i)}),new Su(t)}var mn=function(){function e(t,n,r,i,s){this.key=t,this.documentType=n,this.version=r,this.data=i,this.documentState=s}return e.newInvalidDocument=function(t){return new e(t,0,xe.min(),dr.empty(),0)},e.newFoundDocument=function(t,n,r){return new e(t,1,n,r,0)},e.newNoDocument=function(t,n){return new e(t,2,n,dr.empty(),0)},e.newUnknownDocument=function(t,n){return new e(t,3,n,dr.empty(),2)},e.prototype.convertToFoundDocument=function(t,n){return this.version=t,this.documentType=1,this.data=n,this.documentState=0,this},e.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=dr.empty(),this.documentState=0,this},e.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=dr.empty(),this.documentState=2,this},e.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},e.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(e.prototype,"hasLocalMutations",{get:function(){return this.documentState===1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasCommittedMutations",{get:function(){return this.documentState===2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isValidDocument=function(){return this.documentType!==0},e.prototype.isFoundDocument=function(){return this.documentType===1},e.prototype.isNoDocument=function(){return this.documentType===2},e.prototype.isUnknownDocument=function(){return this.documentType===3},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)},e.prototype.clone=function(){return new e(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},e}(),mW=function(e,t,n,r,i,s,a){t===void 0&&(t=null),n===void 0&&(n=[]),r===void 0&&(r=[]),i===void 0&&(i=null),s===void 0&&(s=null),a===void 0&&(a=null),this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=a,this.h=null};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tk(e,t,n,r,i,s,a){return t===void 0&&(t=null),n===void 0&&(n=[]),r===void 0&&(r=[]),i===void 0&&(i=null),s===void 0&&(s=null),a===void 0&&(a=null),new mW(e,t,n,r,i,s,a)}function Cf(e){var t=ee(e);if(t.h===null){var n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(function(r){return function(i){return i.field.canonicalString()+i.op.toString()+y0(i.value)}(r)}).join(","),n+="|ob:",n+=t.orderBy.map(function(r){return function(i){return i.field.canonicalString()+i.dir}(r)}).join(","),ga(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=np(t.startAt)),t.endAt&&(n+="|ub:",n+=np(t.endAt)),t.h=n}return t.h}function vv(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!SW(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],s=t.filters[r],i.op!==s.op||!i.field.isEqual(s.field)||!Ri(i.value,s.value))return!1;var i,s;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!rk(e.startAt,t.startAt)&&rk(e.endAt,t.endAt)}function tp(e){return fe.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}var gr=function(e){function t(n,r,i){var s=this;return(s=e.call(this)||this).field=n,s.op=r,s.value=i,s}return te(t,e),t.create=function(n,r,i){return n.isKeyField()?r==="in"||r==="not-in"?this.l(n,r,i):new yW(n,r,i):r==="array-contains"?new bW(n,i):r==="in"?new EW(n,i):r==="not-in"?new TW(n,i):r==="array-contains-any"?new IW(n,i):new t(n,r,i)},t.l=function(n,r,i){return r==="in"?new _W(n,i):new wW(n,i)},t.prototype.matches=function(n){var r=n.data.field(this.field);return this.op==="!="?r!==null&&this.m(Au(r,this.value)):r!==null&&na(this.value)===na(r)&&this.m(Au(r,this.value))},t.prototype.m=function(n){switch(this.op){case"<":return n<0;case"<=":return n<=0;case"==":return n===0;case"!=":return n!==0;case">":return n>0;case">=":return n>=0;default:return le()}},t.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},t}(function(){}),yW=function(e){function t(n,r,i){var s=this;return(s=e.call(this,n,r,i)||this).key=fe.fromName(i.referenceValue),s}return te(t,e),t.prototype.matches=function(n){var r=fe.comparator(n.key,this.key);return this.m(r)},t}(gr),_W=function(e){function t(n,r){var i=this;return(i=e.call(this,n,"in",r)||this).keys=sx("in",r),i}return te(t,e),t.prototype.matches=function(n){return this.keys.some(function(r){return r.isEqual(n.key)})},t}(gr),wW=function(e){function t(n,r){var i=this;return(i=e.call(this,n,"not-in",r)||this).keys=sx("not-in",r),i}return te(t,e),t.prototype.matches=function(n){return!this.keys.some(function(r){return r.isEqual(n.key)})},t}(gr);function sx(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(function(r){return fe.fromName(r.referenceValue)})}var bW=function(e){function t(n,r){return e.call(this,n,"array-contains",r)||this}return te(t,e),t.prototype.matches=function(n){var r=n.data.field(this.field);return _0(r)&&zl(r.arrayValue,this.value)},t}(gr),EW=function(e){function t(n,r){return e.call(this,n,"in",r)||this}return te(t,e),t.prototype.matches=function(n){var r=n.data.field(this.field);return r!==null&&zl(this.value.arrayValue,r)},t}(gr),TW=function(e){function t(n,r){return e.call(this,n,"not-in",r)||this}return te(t,e),t.prototype.matches=function(n){if(zl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var r=n.data.field(this.field);return r!==null&&!zl(this.value.arrayValue,r)},t}(gr),IW=function(e){function t(n,r){return e.call(this,n,"array-contains-any",r)||this}return te(t,e),t.prototype.matches=function(n){var r=this,i=n.data.field(this.field);return!(!_0(i)||!i.arrayValue.values)&&i.arrayValue.values.some(function(s){return zl(r.value.arrayValue,s)})},t}(gr),Wl=function(e,t){this.position=e,this.before=t};function np(e){return(e.before?"b":"a")+":"+e.position.map(function(t){return y0(t)}).join(",")}var lu=function(e,t){t===void 0&&(t="asc"),this.field=e,this.dir=t};function SW(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function nk(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var s=t[i],a=e.position[i];if(r=s.field.isKeyField()?fe.comparator(fe.fromName(a.referenceValue),n.key):Au(a,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return e.before?r<=0:r<0}function rk(e,t){if(e===null)return t===null;if(t===null||e.before!==t.before||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Ri(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ro=function(e,t,n,r,i,s,a,c){t===void 0&&(t=null),n===void 0&&(n=[]),r===void 0&&(r=[]),i===void 0&&(i=null),s===void 0&&(s="F"),a===void 0&&(a=null),c===void 0&&(c=null),this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=a,this.endAt=c,this.p=null,this.T=null,this.startAt,this.endAt};function ax(e,t,n,r,i,s,a,c){return new ro(e,t,n,r,i,s,a,c)}function nc(e){return new ro(e)}function md(e){return!ga(e.limit)&&e.limitType==="F"}function rp(e){return!ga(e.limit)&&e.limitType==="L"}function w0(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function b0(e){for(var t=0,n=e.filters;t<n.length;t++){var r=n[t];if(r.g())return r.field}return null}function E0(e){return e.collectionGroup!==null}function ku(e){var t=ee(e);if(t.p===null){t.p=[];var n=b0(t),r=w0(t);if(n!==null&&r===null)n.isKeyField()||t.p.push(new lu(n)),t.p.push(new lu(ri.keyField(),"asc"));else{for(var i=!1,s=0,a=t.explicitOrderBy;s<a.length;s++){var c=a[s];t.p.push(c),c.field.isKeyField()&&(i=!0)}if(!i){var l=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.p.push(new lu(ri.keyField(),l))}}}return t.p}function Fr(e){var t=ee(e);if(!t.T)if(t.limitType==="F")t.T=tk(t.path,t.collectionGroup,ku(t),t.filters,t.limit,t.startAt,t.endAt);else{for(var n=[],r=0,i=ku(t);r<i.length;r++){var s=i[r],a=s.dir==="desc"?"asc":"desc";n.push(new lu(s.field,a))}var c=t.endAt?new Wl(t.endAt.position,!t.endAt.before):null,l=t.startAt?new Wl(t.startAt.position,!t.startAt.before):null;t.T=tk(t.path,t.collectionGroup,n,t.filters,t.limit,c,l)}return t.T}function ux(e,t,n){return new ro(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Af(e,t){return vv(Fr(e),Fr(t))&&e.limitType===t.limitType}function cx(e){return Cf(Fr(e))+"|lt:"+e.limitType}function hw(e){return"Query(target="+function(t){var n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=", filters: ["+t.filters.map(function(r){return(i=r).field.canonicalString()+" "+i.op+" "+y0(i.value);var i}).join(", ")+"]"),ga(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=", orderBy: ["+t.orderBy.map(function(r){return function(i){return i.field.canonicalString()+" ("+i.dir+")"}(r)}).join(", ")+"]"),t.startAt&&(n+=", startAt: "+np(t.startAt)),t.endAt&&(n+=", endAt: "+np(t.endAt)),"Target("+n+")"}(Fr(e))+"; limitType="+e.limitType+")"}function kf(e,t){return t.isFoundDocument()&&function(n,r){var i=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):fe.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(e,t)&&function(n,r){for(var i=0,s=n.explicitOrderBy;i<s.length;i++){var a=s[i];if(!a.field.isKeyField()&&r.data.field(a.field)===null)return!1}return!0}(e,t)&&function(n,r){for(var i=0,s=n.filters;i<s.length;i++)if(!s[i].matches(r))return!1;return!0}(e,t)&&function(n,r){return!(n.startAt&&!nk(n.startAt,ku(n),r))&&(!n.endAt||!nk(n.endAt,ku(n),r))}(e,t)}function lx(e){return function(t,n){for(var r=!1,i=0,s=ku(e);i<s.length;i++){var a=s[i],c=CW(a,t,n);if(c!==0)return c;r=r||a.field.isKeyField()}return 0}}function CW(e,t,n){var r=e.field.isKeyField()?fe.comparator(t.key,n.key):function(i,s,a){var c=s.data.field(i),l=a.data.field(i);return c!==null&&l!==null?Au(c,l):le()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return le()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fx(e,t){if(e.I){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zd(t)?"-0":t}}function hx(e){return{integerValue:""+e}}function dx(e,t){return ix(t)?hx(t):fx(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gv=function(){this._=void 0};function AW(e,t,n){return e instanceof Ru?function(r,i){var s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(n,t):e instanceof ra?vx(e,t):e instanceof ia?gx(e,t):function(r,i){var s=px(r,i),a=ik(s)+ik(r.A);return fw(s)&&fw(r.A)?hx(a):fx(r.R,a)}(e,t)}function kW(e,t,n){return e instanceof ra?vx(e,t):e instanceof ia?gx(e,t):n}function px(e,t){return e instanceof Nu?fw(n=t)||function(r){return!!r&&"doubleValue"in r}(n)?t:{integerValue:0}:null;var n}var Ru=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return te(t,e),t}(gv),ra=function(e){function t(n){var r=this;return(r=e.call(this)||this).elements=n,r}return te(t,e),t}(gv);function vx(e,t){for(var n=mx(t),r=function(a){n.some(function(c){return Ri(c,a)})||n.push(a)},i=0,s=e.elements;i<s.length;i++)r(s[i]);return{arrayValue:{values:n}}}var ia=function(e){function t(n){var r=this;return(r=e.call(this)||this).elements=n,r}return te(t,e),t}(gv);function gx(e,t){for(var n=mx(t),r=function(a){n=n.filter(function(c){return!Ri(c,a)})},i=0,s=e.elements;i<s.length;i++)r(s[i]);return{arrayValue:{values:n}}}var Nu=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).R=n,i.A=r,i}return te(t,e),t}(gv);function ik(e){return Ot(e.integerValue||e.doubleValue)}function mx(e){return _0(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rf=function(e,t){this.field=e,this.transform=t},RW=function(e,t){this.version=e,this.transformResults=t},Tn=function(){function e(t,n){this.updateTime=t,this.exists=n}return e.none=function(){return new e},e.exists=function(t){return new e(void 0,t)},e.updateTime=function(t){return new e(t)},Object.defineProperty(e.prototype,"isNone",{get:function(){return this.updateTime===void 0&&this.exists===void 0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},e}();function yd(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}var mv=function(){};function NW(e,t,n){e instanceof Nf?function(r,i,s){var a=r.value.clone(),c=ak(r.fieldTransforms,i,s.transformResults);a.setAll(c),i.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(e,t,n):e instanceof Yo?function(r,i,s){if(yd(r.precondition,i)){var a=ak(r.fieldTransforms,i,s.transformResults),c=i.data;c.setAll(yx(r)),c.setAll(a),i.convertToFoundDocument(s.version,c).setHasCommittedMutations()}else i.convertToUnknownDocument(s.version)}(e,t,n):function(r,i,s){i.convertToNoDocument(s.version).setHasCommittedMutations()}(0,t,n)}function dw(e,t,n){e instanceof Nf?function(r,i,s){if(yd(r.precondition,i)){var a=r.value.clone(),c=uk(r.fieldTransforms,s,i);a.setAll(c),i.convertToFoundDocument(sk(i),a).setHasLocalMutations()}}(e,t,n):e instanceof Yo?function(r,i,s){if(yd(r.precondition,i)){var a=uk(r.fieldTransforms,s,i),c=i.data;c.setAll(yx(r)),c.setAll(a),i.convertToFoundDocument(sk(i),c).setHasLocalMutations()}}(e,t,n):function(r,i){yd(r.precondition,i)&&i.convertToNoDocument(xe.min())}(e,t)}function PW(e,t){for(var n=null,r=0,i=e.fieldTransforms;r<i.length;r++){var s=i[r],a=t.data.field(s.field),c=px(s.transform,a||null);c!=null&&(n==null&&(n=dr.empty()),n.set(s.field,c))}return n||null}function ok(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&Iu(n,r,function(i,s){return function(a,c){return a.field.isEqual(c.field)&&function(l,h){return l instanceof ra&&h instanceof ra||l instanceof ia&&h instanceof ia?Iu(l.elements,h.elements,Ri):l instanceof Nu&&h instanceof Nu?Ri(l.A,h.A):l instanceof Ru&&h instanceof Ru}(a.transform,c.transform)}(i,s)})}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function sk(e){return e.isFoundDocument()?e.version:xe.min()}var Nf=function(e){function t(n,r,i,s){s===void 0&&(s=[]);var a=this;return(a=e.call(this)||this).key=n,a.value=r,a.precondition=i,a.fieldTransforms=s,a.type=0,a}return te(t,e),t}(mv),Yo=function(e){function t(n,r,i,s,a){a===void 0&&(a=[]);var c=this;return(c=e.call(this)||this).key=n,c.data=r,c.fieldMask=i,c.precondition=s,c.fieldTransforms=a,c.type=1,c}return te(t,e),t}(mv);function yx(e){var t=new Map;return e.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}}),t}function ak(e,t,n){var r=new Map;_e(e.length===n.length);for(var i=0;i<n.length;i++){var s=e[i],a=s.transform,c=t.data.field(s.field);r.set(s.field,kW(a,c,n[i]))}return r}function uk(e,t,n){for(var r=new Map,i=0,s=e;i<s.length;i++){var a=s[i],c=a.transform,l=n.data.field(a.field);r.set(a.field,AW(c,l,t))}return r}var Pt,Be,Pf=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).key=n,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return te(t,e),t}(mv),T0=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).key=n,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return te(t,e),t}(mv),OW=function(e){this.count=e};function _x(e){switch(e){case x.OK:return le();case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0;default:return le()}}function wx(e){if(e===void 0)return xt("GRPC error has no .code"),x.UNKNOWN;switch(e){case Pt.OK:return x.OK;case Pt.CANCELLED:return x.CANCELLED;case Pt.UNKNOWN:return x.UNKNOWN;case Pt.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case Pt.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case Pt.INTERNAL:return x.INTERNAL;case Pt.UNAVAILABLE:return x.UNAVAILABLE;case Pt.UNAUTHENTICATED:return x.UNAUTHENTICATED;case Pt.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case Pt.NOT_FOUND:return x.NOT_FOUND;case Pt.ALREADY_EXISTS:return x.ALREADY_EXISTS;case Pt.PERMISSION_DENIED:return x.PERMISSION_DENIED;case Pt.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case Pt.ABORTED:return x.ABORTED;case Pt.OUT_OF_RANGE:return x.OUT_OF_RANGE;case Pt.UNIMPLEMENTED:return x.UNIMPLEMENTED;case Pt.DATA_LOSS:return x.DATA_LOSS;default:return le()}}(Be=Pt||(Pt={}))[Be.OK=0]="OK",Be[Be.CANCELLED=1]="CANCELLED",Be[Be.UNKNOWN=2]="UNKNOWN",Be[Be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Be[Be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Be[Be.NOT_FOUND=5]="NOT_FOUND",Be[Be.ALREADY_EXISTS=6]="ALREADY_EXISTS",Be[Be.PERMISSION_DENIED=7]="PERMISSION_DENIED",Be[Be.UNAUTHENTICATED=16]="UNAUTHENTICATED",Be[Be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Be[Be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Be[Be.ABORTED=10]="ABORTED",Be[Be.OUT_OF_RANGE=11]="OUT_OF_RANGE",Be[Be.UNIMPLEMENTED=12]="UNIMPLEMENTED",Be[Be.INTERNAL=13]="INTERNAL",Be[Be.UNAVAILABLE=14]="UNAVAILABLE",Be[Be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nn=function(){function e(t,n){this.comparator=t,this.root=n||Co.EMPTY}return e.prototype.insert=function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Co.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Co.BLACK,null,null))},e.prototype.get=function(t){for(var n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null},e.prototype.indexOf=function(t){for(var n=0,r=this.root;!r.isEmpty();){var i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1},e.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(e.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),e.prototype.minKey=function(){return this.root.minKey()},e.prototype.maxKey=function(){return this.root.maxKey()},e.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},e.prototype.forEach=function(t){this.inorderTraversal(function(n,r){return t(n,r),!1})},e.prototype.toString=function(){var t=[];return this.inorderTraversal(function(n,r){return t.push(n+":"+r),!1}),"{"+t.join(", ")+"}"},e.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},e.prototype.getIterator=function(){return new Zh(this.root,null,this.comparator,!1)},e.prototype.getIteratorFrom=function(t){return new Zh(this.root,t,this.comparator,!1)},e.prototype.getReverseIterator=function(){return new Zh(this.root,null,this.comparator,!0)},e.prototype.getReverseIteratorFrom=function(t){return new Zh(this.root,t,this.comparator,!0)},e}(),Zh=function(){function e(t,n,r,i){this.isReverse=i,this.nodeStack=[];for(var s=1;!t.isEmpty();)if(s=n?r(t.key,n):1,i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return e.prototype.getNext=function(){var t=this.nodeStack.pop(),n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n},e.prototype.hasNext=function(){return this.nodeStack.length>0},e.prototype.peek=function(){if(this.nodeStack.length===0)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},e}(),Co=function(){function e(t,n,r,i,s){this.key=t,this.value=n,this.color=r??e.RED,this.left=i??e.EMPTY,this.right=s??e.EMPTY,this.size=this.left.size+1+this.right.size}return e.prototype.copy=function(t,n,r,i,s){return new e(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},e.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},e.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},e.prototype.minKey=function(){return this.min().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(t,n,r){var i=this,s=r(t,i.key);return(i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r))).fixUp()},e.prototype.removeMin=function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()},e.prototype.remove=function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()},e.prototype.isRed=function(){return this.color},e.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},e.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},e.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},e.prototype.rotateLeft=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)},e.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},e.prototype.check=function(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw le();var t=this.left.check();if(t!==this.right.check())throw le();return t+(this.isRed()?0:1)},e}();Co.EMPTY=null,Co.RED=!0,Co.BLACK=!1,Co.EMPTY=new(function(){function e(){this.size=0}return Object.defineProperty(e.prototype,"key",{get:function(){throw le()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){throw le()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){throw le()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){throw le()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){throw le()},enumerable:!1,configurable:!0}),e.prototype.copy=function(t,n,r,i,s){return this},e.prototype.insert=function(t,n,r){return new Co(t,n)},e.prototype.remove=function(t,n){return this},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(t){return!1},e.prototype.reverseTraversal=function(t){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.isRed=function(){return!1},e.prototype.checkMaxDepth=function(){return!0},e.prototype.check=function(){return 0},e}());/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ht=function(){function e(t){this.comparator=t,this.data=new Nn(this.comparator)}return e.prototype.has=function(t){return this.data.get(t)!==null},e.prototype.first=function(){return this.data.minKey()},e.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(e.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),e.prototype.indexOf=function(t){return this.data.indexOf(t)},e.prototype.forEach=function(t){this.data.inorderTraversal(function(n,r){return t(n),!1})},e.prototype.forEachInRange=function(t,n){for(var r=this.data.getIteratorFrom(t[0]);r.hasNext();){var i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}},e.prototype.forEachWhile=function(t,n){var r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return},e.prototype.firstAfterOrEqual=function(t){var n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null},e.prototype.getIterator=function(){return new ck(this.data.getIterator())},e.prototype.getIteratorFrom=function(t){return new ck(this.data.getIteratorFrom(t))},e.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},e.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},e.prototype.isEmpty=function(){return this.data.isEmpty()},e.prototype.unionWith=function(t){var n=this;return n.size<t.size&&(n=t,t=this),t.forEach(function(r){n=n.add(r)}),n},e.prototype.isEqual=function(t){if(!(t instanceof e)||this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0},e.prototype.toArray=function(){var t=[];return this.forEach(function(n){t.push(n)}),t},e.prototype.toString=function(){var t=[];return this.forEach(function(n){return t.push(n)}),"SortedSet("+t.toString()+")"},e.prototype.copy=function(t){var n=new e(this.comparator);return n.data=t,n},e}(),ck=function(){function e(t){this.iter=t}return e.prototype.getNext=function(){return this.iter.getNext().key},e.prototype.hasNext=function(){return this.iter.hasNext()},e}(),xW=new Nn(fe.comparator);function Dr(){return xW}var DW=new Nn(fe.comparator);function pw(){return DW}var LW=new Nn(fe.comparator);function bx(){return LW}var MW=new Ht(fe.comparator);function et(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=MW,r=0,i=e;r<i.length;r++){var s=i[r];n=n.add(s)}return n}var FW=new Ht(Ue);function yv(){return FW}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var I0=function(){function e(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}return e.createSynthesizedRemoteEventForCurrentChange=function(t,n){var r=new Map;return r.set(t,S0.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(xe.min(),r,yv(),Dr(),et())},e}(),S0=function(){function e(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}return e.createSynthesizedTargetChangeForCurrentChange=function(t,n){return new e(zn.EMPTY_BYTE_STRING,n,et(),et(),et())},e}(),_d=function(e,t,n,r){this.v=e,this.removedTargetIds=t,this.key=n,this.P=r},Ex=function(e,t){this.targetId=e,this.V=t},Tx=function(e,t,n,r){n===void 0&&(n=zn.EMPTY_BYTE_STRING),r===void 0&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r},lk=function(){function e(){this.S=0,this.D=hk(),this.C=zn.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}return Object.defineProperty(e.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"F",{get:function(){return this.S!==0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"$",{get:function(){return this.k},enumerable:!1,configurable:!0}),e.prototype.O=function(t){t.approximateByteSize()>0&&(this.k=!0,this.C=t)},e.prototype.M=function(){var t=et(),n=et(),r=et();return this.D.forEach(function(i,s){switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:le()}}),new S0(this.C,this.N,t,n,r)},e.prototype.L=function(){this.k=!1,this.D=hk()},e.prototype.B=function(t,n){this.k=!0,this.D=this.D.insert(t,n)},e.prototype.q=function(t){this.k=!0,this.D=this.D.remove(t)},e.prototype.U=function(){this.S+=1},e.prototype.K=function(){this.S-=1},e.prototype.j=function(){this.k=!0,this.N=!0},e}(),UW=function(){function e(t){this.W=t,this.G=new Map,this.H=Dr(),this.J=fk(),this.Y=new Ht(Ue)}return e.prototype.X=function(t){for(var n=0,r=t.v;n<r.length;n++){var i=r[n];t.P&&t.P.isFoundDocument()?this.Z(i,t.P):this.tt(i,t.key,t.P)}for(var s=0,a=t.removedTargetIds;s<a.length;s++)i=a[s],this.tt(i,t.key,t.P)},e.prototype.et=function(t){var n=this;this.forEachTarget(t,function(r){var i=n.nt(r);switch(t.state){case 0:n.st(r)&&i.O(t.resumeToken);break;case 1:i.K(),i.F||i.L(),i.O(t.resumeToken);break;case 2:i.K(),i.F||n.removeTarget(r);break;case 3:n.st(r)&&(i.j(),i.O(t.resumeToken));break;case 4:n.st(r)&&(n.it(r),i.O(t.resumeToken));break;default:le()}})},e.prototype.forEachTarget=function(t,n){var r=this;t.targetIds.length>0?t.targetIds.forEach(n):this.G.forEach(function(i,s){r.st(s)&&n(s)})},e.prototype.rt=function(t){var n=t.targetId,r=t.V.count,i=this.ot(n);if(i){var s=i.target;if(tp(s))if(r===0){var a=new fe(s.path);this.tt(n,a,mn.newNoDocument(a,xe.min()))}else _e(r===1);else this.ct(n)!==r&&(this.it(n),this.Y=this.Y.add(n))}},e.prototype.ut=function(t){var n=this,r=new Map;this.G.forEach(function(a,c){var l=n.ot(c);if(l){if(a.current&&tp(l.target)){var h=new fe(l.target.path);n.H.get(h)!==null||n.at(c,h)||n.tt(c,h,mn.newNoDocument(h,t))}a.$&&(r.set(c,a.M()),a.L())}});var i=et();this.J.forEach(function(a,c){var l=!0;c.forEachWhile(function(h){var d=n.ot(h);return!d||d.purpose===2||(l=!1,!1)}),l&&(i=i.add(a))});var s=new I0(t,r,this.Y,this.H,i);return this.H=Dr(),this.J=fk(),this.Y=new Ht(Ue),s},e.prototype.Z=function(t,n){if(this.st(t)){var r=this.at(t,n.key)?2:0;this.nt(t).B(n.key,r),this.H=this.H.insert(n.key,n),this.J=this.J.insert(n.key,this.ht(n.key).add(t))}},e.prototype.tt=function(t,n,r){if(this.st(t)){var i=this.nt(t);this.at(t,n)?i.B(n,1):i.q(n),this.J=this.J.insert(n,this.ht(n).delete(t)),r&&(this.H=this.H.insert(n,r))}},e.prototype.removeTarget=function(t){this.G.delete(t)},e.prototype.ct=function(t){var n=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size},e.prototype.U=function(t){this.nt(t).U()},e.prototype.nt=function(t){var n=this.G.get(t);return n||(n=new lk,this.G.set(t,n)),n},e.prototype.ht=function(t){var n=this.J.get(t);return n||(n=new Ht(Ue),this.J=this.J.insert(t,n)),n},e.prototype.st=function(t){var n=this.ot(t)!==null;return n||Y("WatchChangeAggregator","Detected inactive target",t),n},e.prototype.ot=function(t){var n=this.G.get(t);return n&&n.F?null:this.W.lt(t)},e.prototype.it=function(t){var n=this;this.G.set(t,new lk),this.W.getRemoteKeysForTarget(t).forEach(function(r){n.tt(t,r,null)})},e.prototype.at=function(t,n){return this.W.getRemoteKeysForTarget(t).has(n)},e}();function fk(){return new Nn(fe.comparator)}function hk(){return new Nn(fe.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jW={asc:"ASCENDING",desc:"DESCENDING"},VW={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},BW=function(e,t){this.databaseId=e,this.I=t};function $l(e,t){return e.I?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}}function Ix(e,t){return e.I?t.toBase64():t.toUint8Array()}function qW(e,t){return $l(e,t.toTimestamp())}function en(e){return _e(!!e),xe.fromTimestamp(function(t){var n=zo(t);return new nr(n.seconds,n.nanos)}(e))}function C0(e,t){return function(n){return new Ge(["projects",n.projectId,"databases",n.database])}(e).child("documents").child(t).canonicalString()}function Sx(e){var t=Ge.fromString(e);return _e(xx(t)),t}function Gl(e,t){return C0(e.databaseId,t.path)}function bi(e,t){var n=Sx(t);if(n.get(1)!==e.databaseId.projectId)throw new q(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new q(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new fe(Ax(n))}function vw(e,t){return C0(e.databaseId,t)}function Cx(e){var t=Sx(e);return t.length===4?Ge.emptyPath():Ax(t)}function Ql(e){return new Ge(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Ax(e){return _e(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function dk(e,t,n){return{name:Gl(e,t),fields:n.value.mapValue.fields}}function kx(e,t,n){var r=bi(e,t.name),i=en(t.updateTime),s=new dr({mapValue:{fields:t.fields}}),a=mn.newFoundDocument(r,i,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function ip(e,t){var n;if(t instanceof Nf)n={update:dk(e,t.key,t.value)};else if(t instanceof Pf)n={delete:Gl(e,t.key)};else if(t instanceof Yo)n={update:dk(e,t.key,t.data),updateMask:$W(t.fieldMask)};else{if(!(t instanceof T0))return le();n={verify:Gl(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(function(r){return function(i,s){var a=s.transform;if(a instanceof Ru)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ra)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ia)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Nu)return{fieldPath:s.field.canonicalString(),increment:a.A};throw le()}(0,r)})),t.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:qW(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:le()}(e,t.precondition)),n}function pk(e,t){var n=t.currentDocument?function(h){return h.updateTime!==void 0?Tn.updateTime(en(h.updateTime)):h.exists!==void 0?Tn.exists(h.exists):Tn.none()}(t.currentDocument):Tn.none(),r=t.updateTransforms?t.updateTransforms.map(function(h){return function(d,v){var m=null;if("setToServerValue"in v)_e(v.setToServerValue==="REQUEST_TIME"),m=new Ru;else if("appendMissingElements"in v){var y=v.appendMissingElements.values||[];m=new ra(y)}else if("removeAllFromArray"in v){var w=v.removeAllFromArray.values||[];m=new ia(w)}else"increment"in v?m=new Nu(d,v.increment):le();var E=ri.fromServerFormat(v.fieldPath);return new Rf(E,m)}(e,h)}):[];if(t.update){t.update.name;var i=bi(e,t.update.name),s=new dr({mapValue:{fields:t.update.fields}});if(t.updateMask){var a=function(h){var d=h.fieldPaths||[];return new Su(d.map(function(v){return ri.fromServerFormat(v)}))}(t.updateMask);return new Yo(i,s,a,n,r)}return new Nf(i,s,n,r)}if(t.delete){var c=bi(e,t.delete);return new Pf(c,n)}if(t.verify){var l=bi(e,t.verify);return new T0(l,n)}return le()}function Rx(e,t){return{documents:[vw(e,t.path)]}}function Nx(e,t){var n={structuredQuery:{}},r=t.path;t.collectionGroup!==null?(n.parent=vw(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=vw(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(c){if(c.length!==0){var l=c.map(function(h){return function(d){if(d.op==="=="){if(ek(d.value))return{unaryFilter:{field:Ga(d.field),op:"IS_NAN"}};if(ZA(d.value))return{unaryFilter:{field:Ga(d.field),op:"IS_NULL"}}}else if(d.op==="!="){if(ek(d.value))return{unaryFilter:{field:Ga(d.field),op:"IS_NOT_NAN"}};if(ZA(d.value))return{unaryFilter:{field:Ga(d.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ga(d.field),op:KW(d.op),value:d.value}}}(h)});return l.length===1?l[0]:{compositeFilter:{op:"AND",filters:l}}}}(t.filters);i&&(n.structuredQuery.where=i);var s=function(c){if(c.length!==0)return c.map(function(l){return function(h){return{field:Ga(h.field),direction:HW(h.dir)}}(l)})}(t.orderBy);s&&(n.structuredQuery.orderBy=s);var a=function(c,l){return c.I||ga(l)?l:{value:l}}(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=vk(t.startAt)),t.endAt&&(n.structuredQuery.endAt=vk(t.endAt)),n}function Px(e){var t=Cx(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){_e(r===1);var s=n.from[0];s.allDescendants?i=s.collectionId:t=t.child(s.collectionId)}var a=[];n.where&&(a=Ox(n.where));var c=[];n.orderBy&&(c=n.orderBy.map(function(v){return function(m){return new lu(iu(m.field),function(y){switch(y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(v)}));var l=null;n.limit&&(l=function(v){var m;return ga(m=typeof v=="object"?v.value:v)?null:m}(n.limit));var h=null;n.startAt&&(h=gk(n.startAt));var d=null;return n.endAt&&(d=gk(n.endAt)),ax(t,i,c,a,l,"F",h,d)}function Ox(e){return e?e.unaryFilter!==void 0?[WW(e)]:e.fieldFilter!==void 0?[zW(e)]:e.compositeFilter!==void 0?e.compositeFilter.filters.map(function(t){return Ox(t)}).reduce(function(t,n){return t.concat(n)}):le():[]}function vk(e){return{before:e.before,values:e.position}}function gk(e){var t=!!e.before,n=e.values||[];return new Wl(n,t)}function HW(e){return jW[e]}function KW(e){return VW[e]}function Ga(e){return{fieldPath:e.canonicalString()}}function iu(e){return ri.fromServerFormat(e.fieldPath)}function zW(e){return gr.create(iu(e.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return le()}}(e.fieldFilter.op),e.fieldFilter.value)}function WW(e){switch(e.unaryFilter.op){case"IS_NAN":var t=iu(e.unaryFilter.field);return gr.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=iu(e.unaryFilter.field);return gr.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=iu(e.unaryFilter.field);return gr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=iu(e.unaryFilter.field);return gr.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return le()}}function $W(e){var t=[];return e.fields.forEach(function(n){return t.push(n.canonicalString())}),{fieldPaths:t}}function xx(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ni(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=mk(t)),t=GW(e.get(n),t);return mk(t)}function GW(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var s=e.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function mk(e){return e+""}function zi(e){var t=e.length;if(_e(t>=2),t===2)return _e(e.charAt(0)===""&&e.charAt(1)===""),Ge.emptyPath();for(var n=t-2,r=[],i="",s=0;s<t;){var a=e.indexOf("",s);switch((a<0||a>n)&&le(),e.charAt(a+1)){case"":var c=e.substring(s,a),l=void 0;i.length===0?l=c:(l=i+=c,i=""),r.push(l);break;case"":i+=e.substring(s,a),i+="\0";break;case"":i+=e.substring(s,a+1);break;default:le()}s=a+2}return new Ge(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var QW=function(e,t){this.seconds=e,this.nanoseconds=t},lr=function(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n};lr.store="owner",lr.key="owner";var Lo=function(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n};Lo.store="mutationQueues",Lo.keyPath="userId";var ut=function(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};ut.store="mutations",ut.keyPath="batchId",ut.userMutationsIndex="userMutationsIndex",ut.userMutationsKeyPath=["userId","batchId"];var bn=function(){function e(){}return e.prefixForUser=function(t){return[t]},e.prefixForPath=function(t,n){return[t,ni(n)]},e.key=function(t,n,r){return[t,ni(n),r]},e}();bn.store="documentMutations",bn.PLACEHOLDER=new bn;var YW=function(e,t){this.path=e,this.readTime=t},XW=function(e,t){this.path=e,this.version=t},It=function(e,t,n,r,i,s){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=s};It.store="remoteDocuments",It.readTimeIndex="readTimeIndex",It.readTimeIndexPath="readTime",It.collectionReadTimeIndex="collectionReadTimeIndex",It.collectionReadTimeIndexPath=["parentPath","readTime"];var _i=function(e){this.byteSize=e};_i.store="remoteDocumentGlobal",_i.key="remoteDocumentGlobalKey";var er=function(e,t,n,r,i,s,a){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=s,this.query=a};er.store="targets",er.keyPath="targetId",er.queryTargetsIndexName="queryTargetsIndex",er.queryTargetsKeyPath=["canonicalId","targetId"];var hn=function(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n};hn.store="targetDocuments",hn.keyPath=["targetId","path"],hn.documentTargetsIndex="documentTargetsIndex",hn.documentTargetsKeyPath=["path","targetId"];var hr=function(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r};hr.key="targetGlobalKey",hr.store="targetGlobal";var zs=function(e,t){this.collectionId=e,this.parent=t};zs.store="collectionParents",zs.keyPath=["collectionId","parent"];var Gi=function(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r};Gi.store="clientMetadata",Gi.keyPath="clientId";var Pu=function(e,t,n){this.bundleId=e,this.createTime=t,this.version=n};Pu.store="bundles",Pu.keyPath="bundleId";var Ou=function(e,t,n){this.name=e,this.readTime=t,this.bundledQuery=n};Ou.store="namedQueries",Ou.keyPath="name";var JW=Ne(Ne([],Ne(Ne([],Ne(Ne([],Ne(Ne([],[Lo.store,ut.store,bn.store,It.store,er.store,lr.store,hr.store,hn.store]),[Gi.store])),[_i.store])),[zs.store])),[Pu.store,Ou.store]),Dx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Lx=function(){function e(){this.onCommittedListeners=[]}return e.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},e.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},e}(),Rn=function(){var e=this;this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})},W=function(){function e(t){var n=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(r){n.isDone=!0,n.result=r,n.nextCallback&&n.nextCallback(r)},function(r){n.isDone=!0,n.error=r,n.catchCallback&&n.catchCallback(r)})}return e.prototype.catch=function(t){return this.next(void 0,t)},e.prototype.next=function(t,n){var r=this;return this.callbackAttached&&le(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e(function(i,s){r.nextCallback=function(a){r.wrapSuccess(t,a).next(i,s)},r.catchCallback=function(a){r.wrapFailure(n,a).next(i,s)}})},e.prototype.toPromise=function(){var t=this;return new Promise(function(n,r){t.next(n,r)})},e.prototype.wrapUserFunction=function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(r){return e.reject(r)}},e.prototype.wrapSuccess=function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.resolve(n)},e.prototype.wrapFailure=function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.reject(n)},e.resolve=function(t){return new e(function(n,r){n(t)})},e.reject=function(t){return new e(function(n,r){r(t)})},e.waitFor=function(t){return new e(function(n,r){var i=0,s=0,a=!1;t.forEach(function(c){++i,c.next(function(){++s,a&&s===i&&n()},function(l){return r(l)})}),a=!0,s===i&&n()})},e.or=function(t){for(var n=e.resolve(!1),r=function(a){n=n.next(function(c){return c?e.resolve(c):a()})},i=0,s=t;i<s.length;i++)r(s[i]);return n},e.forEach=function(t,n){var r=this,i=[];return t.forEach(function(s,a){i.push(n.call(r,s,a))}),this.waitFor(i)},e}(),Mx=function(){function e(t,n){var r=this;this.action=t,this.transaction=n,this.aborted=!1,this.ft=new Rn,this.transaction.oncomplete=function(){r.ft.resolve()},this.transaction.onabort=function(){n.error?r.ft.reject(new ml(t,n.error)):r.ft.resolve()},this.transaction.onerror=function(i){var s=A0(i.target.error);r.ft.reject(new ml(t,s))}}return e.open=function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(s){throw new ml(n,s)}},Object.defineProperty(e.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),e.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Y("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},e.prototype.store=function(t){var n=this.transaction.objectStore(t);return new e$(n)},e}(),xu=function(){function e(t,n,r){this.name=t,this.version=n,this.wt=r,e._t(Ys())===12.2&&xt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return e.delete=function(t){return Y("SimpleDb","Removing database:",t),Ns(window.indexedDB.deleteDatabase(t)).toPromise()},e.yt=function(){if(typeof indexedDB>"u")return!1;if(e.gt())return!0;var t=Ys(),n=e._t(t),r=0<n&&n<10,i=e.Et(t),s=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||s)},e.gt=function(){var t;return typeof process<"u"&&((t=process.env)===null||t===void 0?void 0:t.Tt)==="YES"},e.It=function(t,n){return t.store(n)},e._t=function(t){var n=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)},e.Et=function(t){var n=t.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)},e.prototype.At=function(t){return A(this,void 0,void 0,function(){var n,r=this;return C(this,function(i){switch(i.label){case 0:return this.db?[3,2]:(Y("SimpleDb","Opening database:",this.name),n=this,[4,new Promise(function(s,a){var c=indexedDB.open(r.name,r.version);c.onsuccess=function(l){var h=l.target.result;s(h)},c.onblocked=function(){a(new ml(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},c.onerror=function(l){var h=l.target.error;h.name==="VersionError"?a(new q(x.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a(new ml(t,h))},c.onupgradeneeded=function(l){Y("SimpleDb",'Database "'+r.name+'" requires upgrade from version:',l.oldVersion);var h=l.target.result;r.wt.Rt(h,c.transaction,l.oldVersion,r.version).next(function(){Y("SimpleDb","Database upgrade to version "+r.version+" complete")})}})]);case 1:n.db=i.sent(),i.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(s){return r.bt(s)}),this.db)]}})})},e.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(n){return t(n)})},e.prototype.runTransaction=function(t,n,r,i){return A(this,void 0,void 0,function(){var s,a,c,l,h;return C(this,function(d){switch(d.label){case 0:s=n==="readonly",a=0,c=function(){var v,m,y,w,E;return C(this,function(T){switch(T.label){case 0:++a,T.label=1;case 1:return T.trys.push([1,4,,5]),[4,l.At(t)];case 2:return l.db=T.sent(),v=Mx.open(l.db,t,s?"readonly":"readwrite",r),m=i(v).catch(function(k){return v.abort(k),W.reject(k)}).toPromise(),y={},m.catch(function(){}),[4,v.dt];case 3:return[2,(y.value=(T.sent(),m),y)];case 4:return w=T.sent(),E=w.name!=="FirebaseError"&&a<3,Y("SimpleDb","Transaction failed with error:",w.message,"Retrying:",E),l.close(),E?[3,5]:[2,{value:Promise.reject(w)}];case 5:return[2]}})},l=this,d.label=1;case 1:return[5,c()];case 2:if(typeof(h=d.sent())=="object")return[2,h.value];d.label=3;case 3:return[3,1];case 4:return[2]}})})},e.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},e}(),ZW=function(){function e(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(e.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),e.prototype.done=function(){this.Vt=!0},e.prototype.Ct=function(t){this.St=t},e.prototype.delete=function(){return Ns(this.Pt.delete())},e}(),ml=function(e){function t(n,r){var i=this;return(i=e.call(this,x.UNAVAILABLE,"IndexedDB transaction '"+n+"' failed: "+r)||this).name="IndexedDbTransactionError",i}return te(t,e),t}(q);function ma(e){return e.name==="IndexedDbTransactionError"}var e$=function(){function e(t){this.store=t}return e.prototype.put=function(t,n){var r;return n!==void 0?(Y("SimpleDb","PUT",this.store.name,t,n),r=this.store.put(n,t)):(Y("SimpleDb","PUT",this.store.name,"<auto-key>",t),r=this.store.put(t)),Ns(r)},e.prototype.add=function(t){return Y("SimpleDb","ADD",this.store.name,t,t),Ns(this.store.add(t))},e.prototype.get=function(t){var n=this;return Ns(this.store.get(t)).next(function(r){return r===void 0&&(r=null),Y("SimpleDb","GET",n.store.name,t,r),r})},e.prototype.delete=function(t){return Y("SimpleDb","DELETE",this.store.name,t),Ns(this.store.delete(t))},e.prototype.count=function(){return Y("SimpleDb","COUNT",this.store.name),Ns(this.store.count())},e.prototype.Nt=function(t,n){var r=this.cursor(this.options(t,n)),i=[];return this.xt(r,function(s,a){i.push(a)}).next(function(){return i})},e.prototype.kt=function(t,n){Y("SimpleDb","DELETE ALL",this.store.name);var r=this.options(t,n);r.Ft=!1;var i=this.cursor(r);return this.xt(i,function(s,a,c){return c.delete()})},e.prototype.$t=function(t,n){var r;n?r=t:(r={},n=t);var i=this.cursor(r);return this.xt(i,n)},e.prototype.Ot=function(t){var n=this.cursor({});return new W(function(r,i){n.onerror=function(s){var a=A0(s.target.error);i(a)},n.onsuccess=function(s){var a=s.target.result;a?t(a.primaryKey,a.value).next(function(c){c?a.continue():r()}):r()}})},e.prototype.xt=function(t,n){var r=[];return new W(function(i,s){t.onerror=function(a){s(a.target.error)},t.onsuccess=function(a){var c=a.target.result;if(c){var l=new ZW(c),h=n(c.primaryKey,c.value,l);if(h instanceof W){var d=h.catch(function(v){return l.done(),W.reject(v)});r.push(d)}l.isDone?i():l.Dt===null?c.continue():c.continue(l.Dt)}else i()}}).next(function(){return W.waitFor(r)})},e.prototype.options=function(t,n){var r;return t!==void 0&&(typeof t=="string"?r=t:n=t),{index:r,range:n}},e.prototype.cursor=function(t){var n="next";if(t.reverse&&(n="prev"),t.index){var r=this.store.index(t.index);return t.Ft?r.openKeyCursor(t.range,n):r.openCursor(t.range,n)}return this.store.openCursor(t.range,n)},e}();function Ns(e){return new W(function(t,n){e.onsuccess=function(r){var i=r.target.result;t(i)},e.onerror=function(r){var i=A0(r.target.error);n(i)}})}var yk=!1;function A0(e){var t=xu._t(Ys());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new q("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return yk||(yk=!0,setTimeout(function(){throw r},0)),r}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _k=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).Mt=n,i.currentSequenceNumber=r,i}return te(t,e),t}(Lx);function ir(e,t){var n=ee(e);return xu.It(n.Mt,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var k0=function(){function e(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return e.prototype.applyToRemoteDocument=function(t,n){for(var r=n.mutationResults,i=0;i<this.mutations.length;i++){var s=this.mutations[i];s.key.isEqual(t.key)&&NW(s,t,r[i])}},e.prototype.applyToLocalView=function(t){for(var n=0,r=this.baseMutations;n<r.length;n++)(a=r[n]).key.isEqual(t.key)&&dw(a,t,this.localWriteTime);for(var i=0,s=this.mutations;i<s.length;i++){var a;(a=s[i]).key.isEqual(t.key)&&dw(a,t,this.localWriteTime)}},e.prototype.applyToLocalDocumentSet=function(t){var n=this;this.mutations.forEach(function(r){var i=t.get(r.key),s=i;n.applyToLocalView(s),i.isValidDocument()||s.convertToNoDocument(xe.min())})},e.prototype.keys=function(){return this.mutations.reduce(function(t,n){return t.add(n.key)},et())},e.prototype.isEqual=function(t){return this.batchId===t.batchId&&Iu(this.mutations,t.mutations,function(n,r){return ok(n,r)})&&Iu(this.baseMutations,t.baseMutations,function(n,r){return ok(n,r)})},e}(),t$=function(){function e(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return e.from=function(t,n,r){_e(t.mutations.length===r.length);for(var i=bx(),s=t.mutations,a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new e(t,n,r,i)},e}(),_v=function(){function e(t,n,r,i,s,a,c){s===void 0&&(s=xe.min()),a===void 0&&(a=xe.min()),c===void 0&&(c=zn.EMPTY_BYTE_STRING),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c}return e.prototype.withSequenceNumber=function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},e.prototype.withResumeToken=function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)},e.prototype.withLastLimboFreeSnapshotVersion=function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)},e}(),Fx=function(e){this.Lt=e};function gw(e,t){if(t.document)return kx(e.Lt,t.document,!!t.hasCommittedMutations);if(t.noDocument){var n=fe.fromSegments(t.noDocument.path),r=Lu(t.noDocument.readTime),i=mn.newNoDocument(n,r);return t.hasCommittedMutations?i.setHasCommittedMutations():i}if(t.unknownDocument){var s=fe.fromSegments(t.unknownDocument.path);return r=Lu(t.unknownDocument.version),mn.newUnknownDocument(s,r)}return le()}function wk(e,t,n){var r=R0(n),i=t.key.path.popLast().toArray();if(t.isFoundDocument()){var s=function(v,m){return{name:Gl(v,m.key),fields:m.data.value.mapValue.fields,updateTime:$l(v,m.version.toTimestamp())}}(e.Lt,t),a=t.hasCommittedMutations;return new It(null,null,s,a,r,i)}if(t.isNoDocument()){var c=t.key.path.toArray(),l=Du(t.version);return a=t.hasCommittedMutations,new It(null,new YW(c,l),null,a,r,i)}if(t.isUnknownDocument()){var h=t.key.path.toArray(),d=Du(t.version);return new It(new XW(h,d),null,null,!0,r,i)}return le()}function R0(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Ux(e){var t=new nr(e[0],e[1]);return xe.fromTimestamp(t)}function Du(e){var t=e.toTimestamp();return new QW(t.seconds,t.nanoseconds)}function Lu(e){var t=new nr(e.seconds,e.nanoseconds);return xe.fromTimestamp(t)}function eu(e,t){for(var n=(t.baseMutations||[]).map(function(l){return pk(e.Lt,l)}),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&t.mutations[r+1].transform!==void 0){var s=t.mutations[r+1];i.updateTransforms=s.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var a=t.mutations.map(function(l){return pk(e.Lt,l)}),c=nr.fromMillis(t.localWriteTimeMs);return new k0(t.batchId,c,n,a)}function il(e){var t,n,r=Lu(e.readTime),i=e.lastLimboFreeSnapshotVersion!==void 0?Lu(e.lastLimboFreeSnapshotVersion):xe.min();return e.query.documents!==void 0?(_e((n=e.query).documents.length===1),t=Fr(nc(Cx(n.documents[0])))):t=function(s){return Fr(Px(s))}(e.query),new _v(t,e.targetId,0,e.lastListenSequenceNumber,r,i,zn.fromBase64String(e.resumeToken))}function jx(e,t){var n,r=Du(t.snapshotVersion),i=Du(t.lastLimboFreeSnapshotVersion);n=tp(t.target)?Rx(e.Lt,t.target):Nx(e.Lt,t.target);var s=t.resumeToken.toBase64();return new er(t.targetId,Cf(t.target),r,s,t.sequenceNumber,i,n)}function N0(e){var t=Px({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?ux(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var n$=function(){function e(){}return e.prototype.getBundleMetadata=function(t,n){return bk(t).get(n).next(function(r){if(r)return{id:(i=r).bundleId,createTime:Lu(i.createTime),version:i.version};var i})},e.prototype.saveBundleMetadata=function(t,n){return bk(t).put({bundleId:(r=n).id,createTime:Du(en(r.createTime)),version:r.version});var r},e.prototype.getNamedQuery=function(t,n){return Ek(t).get(n).next(function(r){if(r)return{name:(i=r).name,query:N0(i.bundledQuery),readTime:Lu(i.readTime)};var i})},e.prototype.saveNamedQuery=function(t,n){return Ek(t).put(function(r){return{name:r.name,readTime:Du(en(r.readTime)),bundledQuery:r.bundledQuery}}(n))},e}();function bk(e){return ir(e,Pu.store)}function Ek(e){return ir(e,Ou.store)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var r$=function(){function e(){this.Bt=new P0}return e.prototype.addToCollectionParentIndex=function(t,n){return this.Bt.add(n),W.resolve()},e.prototype.getCollectionParents=function(t,n){return W.resolve(this.Bt.getEntries(n))},e}(),P0=function(){function e(){this.index={}}return e.prototype.add=function(t){var n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new Ht(Ge.comparator),s=!i.has(r);return this.index[n]=i.add(r),s},e.prototype.has=function(t){var n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)},e.prototype.getEntries=function(t){return(this.index[t]||new Ht(Ge.comparator)).toArray()},e}(),i$=function(){function e(){this.qt=new P0}return e.prototype.addToCollectionParentIndex=function(t,n){var r=this;if(!this.qt.has(n)){var i=n.lastSegment(),s=n.popLast();t.addOnCommittedListener(function(){r.qt.add(n)});var a={collectionId:i,parent:ni(s)};return Tk(t).put(a)}return W.resolve()},e.prototype.getCollectionParents=function(t,n){var r=[],i=IDBKeyRange.bound([n,""],[ex(n),""],!1,!0);return Tk(t).Nt(i).next(function(s){for(var a=0,c=s;a<c.length;a++){var l=c[a];if(l.collectionId!==n)break;r.push(zi(l.parent))}return r})},e}();function Tk(e){return ir(e,zs.store)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ik={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},gi=function(){function e(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return e.withCacheSize=function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vx(e,t,n){var r=e.store(ut.store),i=e.store(bn.store),s=[],a=IDBKeyRange.only(n.batchId),c=0,l=r.$t({range:a},function(w,E,T){return c++,T.delete()});s.push(l.next(function(){_e(c===1)}));for(var h=[],d=0,v=n.mutations;d<v.length;d++){var m=v[d],y=bn.key(t,m.key.path,n.batchId);s.push(i.delete(y)),h.push(m.key)}return W.waitFor(s).next(function(){return h})}function op(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw le();t=e.noDocument}return JSON.stringify(t).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gi.DEFAULT_COLLECTION_PERCENTILE=10,gi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gi.DEFAULT=new gi(41943040,gi.DEFAULT_COLLECTION_PERCENTILE,gi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gi.DISABLED=new gi(-1,0,0);var o$=function(){function e(t,n,r,i){this.userId=t,this.R=n,this.Ut=r,this.referenceDelegate=i,this.Kt={}}return e.Qt=function(t,n,r,i){return _e(t.uid!==""),new e(t.isAuthenticated()?t.uid:"",n,r,i)},e.prototype.checkEmpty=function(t){var n=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return yo(t).$t({index:ut.userMutationsIndex,range:r},function(i,s,a){n=!1,a.done()}).next(function(){return n})},e.prototype.addMutationBatch=function(t,n,r,i){var s=this,a=tu(t),c=yo(t);return c.add({}).next(function(l){_e(typeof l=="number");for(var h=new k0(l,n,r,i),d=function(k,P,O){var H=O.baseMutations.map(function(U){return ip(k.Lt,U)}),K=O.mutations.map(function(U){return ip(k.Lt,U)});return new ut(P,O.batchId,O.localWriteTime.toMillis(),H,K)}(s.R,s.userId,h),v=[],m=new Ht(function(k,P){return Ue(k.canonicalString(),P.canonicalString())}),y=0,w=i;y<w.length;y++){var E=w[y],T=bn.key(s.userId,E.key.path,l);m=m.add(E.key.path.popLast()),v.push(c.put(d)),v.push(a.put(T,bn.PLACEHOLDER))}return m.forEach(function(k){v.push(s.Ut.addToCollectionParentIndex(t,k))}),t.addOnCommittedListener(function(){s.Kt[l]=h.keys()}),W.waitFor(v).next(function(){return h})})},e.prototype.lookupMutationBatch=function(t,n){var r=this;return yo(t).get(n).next(function(i){return i?(_e(i.userId===r.userId),eu(r.R,i)):null})},e.prototype.jt=function(t,n){var r=this;return this.Kt[n]?W.resolve(this.Kt[n]):this.lookupMutationBatch(t,n).next(function(i){if(i){var s=i.keys();return r.Kt[n]=s,s}return null})},e.prototype.getNextMutationBatchAfterBatchId=function(t,n){var r=this,i=n+1,s=IDBKeyRange.lowerBound([this.userId,i]),a=null;return yo(t).$t({index:ut.userMutationsIndex,range:s},function(c,l,h){l.userId===r.userId&&(_e(l.batchId>=i),a=eu(r.R,l)),h.done()}).next(function(){return a})},e.prototype.getHighestUnacknowledgedBatchId=function(t){var n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return yo(t).$t({index:ut.userMutationsIndex,range:n,reverse:!0},function(i,s,a){r=s.batchId,a.done()}).next(function(){return r})},e.prototype.getAllMutationBatches=function(t){var n=this,r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return yo(t).Nt(ut.userMutationsIndex,r).next(function(i){return i.map(function(s){return eu(n.R,s)})})},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,n){var r=this,i=bn.prefixForPath(this.userId,n.path),s=IDBKeyRange.lowerBound(i),a=[];return tu(t).$t({range:s},function(c,l,h){var d=c[0],v=c[1],m=c[2],y=zi(v);if(d===r.userId&&n.path.isEqual(y))return yo(t).get(m).next(function(w){if(!w)throw le();_e(w.userId===r.userId),a.push(eu(r.R,w))});h.done()}).next(function(){return a})},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,n){var r=this,i=new Ht(Ue),s=[];return n.forEach(function(a){var c=bn.prefixForPath(r.userId,a.path),l=IDBKeyRange.lowerBound(c),h=tu(t).$t({range:l},function(d,v,m){var y=d[0],w=d[1],E=d[2],T=zi(w);y===r.userId&&a.path.isEqual(T)?i=i.add(E):m.done()});s.push(h)}),W.waitFor(s).next(function(){return r.Wt(t,i)})},e.prototype.getAllMutationBatchesAffectingQuery=function(t,n){var r=this,i=n.path,s=i.length+1,a=bn.prefixForPath(this.userId,i),c=IDBKeyRange.lowerBound(a),l=new Ht(Ue);return tu(t).$t({range:c},function(h,d,v){var m=h[0],y=h[1],w=h[2],E=zi(y);m===r.userId&&i.isPrefixOf(E)?E.length===s&&(l=l.add(w)):v.done()}).next(function(){return r.Wt(t,l)})},e.prototype.Wt=function(t,n){var r=this,i=[],s=[];return n.forEach(function(a){s.push(yo(t).get(a).next(function(c){if(c===null)throw le();_e(c.userId===r.userId),i.push(eu(r.R,c))}))}),W.waitFor(s).next(function(){return i})},e.prototype.removeMutationBatch=function(t,n){var r=this;return Vx(t.Mt,this.userId,n).next(function(i){return t.addOnCommittedListener(function(){r.Gt(n.batchId)}),W.forEach(i,function(s){return r.referenceDelegate.markPotentiallyOrphaned(t,s)})})},e.prototype.Gt=function(t){delete this.Kt[t]},e.prototype.performConsistencyCheck=function(t){var n=this;return this.checkEmpty(t).next(function(r){if(!r)return W.resolve();var i=IDBKeyRange.lowerBound(bn.prefixForUser(n.userId)),s=[];return tu(t).$t({range:i},function(a,c,l){if(a[0]===n.userId){var h=zi(a[1]);s.push(h)}else l.done()}).next(function(){_e(s.length===0)})})},e.prototype.containsKey=function(t,n){return Bx(t,this.userId,n)},e.prototype.zt=function(t){var n=this;return qx(t).get(this.userId).next(function(r){return r||new Lo(n.userId,-1,"")})},e}();function Bx(e,t,n){var r=bn.prefixForPath(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r),a=!1;return tu(e).$t({range:s,Ft:!0},function(c,l,h){var d=c[0],v=c[1];c[2],d===t&&v===i&&(a=!0),h.done()}).next(function(){return a})}function yo(e){return ir(e,ut.store)}function tu(e){return ir(e,bn.store)}function qx(e){return ir(e,Lo.store)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sp=function(){function e(t){this.Ht=t}return e.prototype.next=function(){return this.Ht+=2,this.Ht},e.Jt=function(){return new e(0)},e.Yt=function(){return new e(-1)},e}(),s$=function(){function e(t,n){this.referenceDelegate=t,this.R=n}return e.prototype.allocateTargetId=function(t){var n=this;return this.Xt(t).next(function(r){var i=new sp(r.highestTargetId);return r.highestTargetId=i.next(),n.Zt(t,r).next(function(){return r.highestTargetId})})},e.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(n){return xe.fromTimestamp(new nr(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds))})},e.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(n){return n.highestListenSequenceNumber})},e.prototype.setTargetsMetadata=function(t,n,r){var i=this;return this.Xt(t).next(function(s){return s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),i.Zt(t,s)})},e.prototype.addTargetData=function(t,n){var r=this;return this.te(t,n).next(function(){return r.Xt(t).next(function(i){return i.targetCount+=1,r.ee(n,i),r.Zt(t,i)})})},e.prototype.updateTargetData=function(t,n){return this.te(t,n)},e.prototype.removeTargetData=function(t,n){var r=this;return this.removeMatchingKeysForTargetId(t,n.targetId).next(function(){return Qa(t).delete(n.targetId)}).next(function(){return r.Xt(t)}).next(function(i){return _e(i.targetCount>0),i.targetCount-=1,r.Zt(t,i)})},e.prototype.removeTargets=function(t,n,r){var i=this,s=0,a=[];return Qa(t).$t(function(c,l){var h=il(l);h.sequenceNumber<=n&&r.get(h.targetId)===null&&(s++,a.push(i.removeTargetData(t,h)))}).next(function(){return W.waitFor(a)}).next(function(){return s})},e.prototype.forEachTarget=function(t,n){return Qa(t).$t(function(r,i){var s=il(i);n(s)})},e.prototype.Xt=function(t){return Sk(t).get(hr.key).next(function(n){return _e(n!==null),n})},e.prototype.Zt=function(t,n){return Sk(t).put(hr.key,n)},e.prototype.te=function(t,n){return Qa(t).put(jx(this.R,n))},e.prototype.ee=function(t,n){var r=!1;return t.targetId>n.highestTargetId&&(n.highestTargetId=t.targetId,r=!0),t.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=t.sequenceNumber,r=!0),r},e.prototype.getTargetCount=function(t){return this.Xt(t).next(function(n){return n.targetCount})},e.prototype.getTargetData=function(t,n){var r=Cf(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),s=null;return Qa(t).$t({range:i,index:er.queryTargetsIndexName},function(a,c,l){var h=il(c);vv(n,h.target)&&(s=h,l.done())}).next(function(){return s})},e.prototype.addMatchingKeys=function(t,n,r){var i=this,s=[],a=Ao(t);return n.forEach(function(c){var l=ni(c.path);s.push(a.put(new hn(r,l))),s.push(i.referenceDelegate.addReference(t,r,c))}),W.waitFor(s)},e.prototype.removeMatchingKeys=function(t,n,r){var i=this,s=Ao(t);return W.forEach(n,function(a){var c=ni(a.path);return W.waitFor([s.delete([r,c]),i.referenceDelegate.removeReference(t,r,a)])})},e.prototype.removeMatchingKeysForTargetId=function(t,n){var r=Ao(t),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)},e.prototype.getMatchingKeysForTargetId=function(t,n){var r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Ao(t),s=et();return i.$t({range:r,Ft:!0},function(a,c,l){var h=zi(a[1]),d=new fe(h);s=s.add(d)}).next(function(){return s})},e.prototype.containsKey=function(t,n){var r=ni(n.path),i=IDBKeyRange.bound([r],[ex(r)],!1,!0),s=0;return Ao(t).$t({index:hn.documentTargetsIndex,Ft:!0,range:i},function(a,c,l){var h=a[0];a[1],h!==0&&(s++,l.done())}).next(function(){return s>0})},e.prototype.lt=function(t,n){return Qa(t).get(n).next(function(r){return r?il(r):null})},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qa(e){return ir(e,er.store)}function Sk(e){return ir(e,hr.store)}function Ao(e){return ir(e,hn.store)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ya(e){return A(this,void 0,void 0,function(){return C(this,function(t){if(e.code!==x.FAILED_PRECONDITION||e.message!==Dx)throw e;return Y("LocalStore","Unexpectedly lost primary lease"),[2]})})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ck(e,t){var n=e[0],r=e[1],i=t[0],s=t[1],a=Ue(n,i);return a===0?Ue(r,s):a}var a$=function(){function e(t){this.ne=t,this.buffer=new Ht(Ck),this.se=0}return e.prototype.ie=function(){return++this.se},e.prototype.re=function(t){var n=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(n);else{var r=this.buffer.last();Ck(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}},Object.defineProperty(e.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),e}(),u$=function(){function e(t,n){this.garbageCollector=t,this.asyncQueue=n,this.oe=!1,this.ce=null}return e.prototype.start=function(t){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.ue(t)},e.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(e.prototype,"started",{get:function(){return this.ce!==null},enumerable:!1,configurable:!0}),e.prototype.ue=function(t){var n=this,r=this.oe?3e5:6e4;Y("LruGarbageCollector","Garbage collection scheduled in "+r+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,function(){return A(n,void 0,void 0,function(){var i;return C(this,function(s){switch(s.label){case 0:this.ce=null,this.oe=!0,s.label=1;case 1:return s.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return s.sent(),[3,7];case 3:return ma(i=s.sent())?(Y("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i),[3,6]):[3,4];case 4:return[4,ya(i)];case 5:s.sent(),s.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return s.sent(),[2]}})})})},e}(),c$=function(){function e(t,n){this.ae=t,this.params=n}return e.prototype.calculateTargetCount=function(t,n){return this.ae.he(t).next(function(r){return Math.floor(n/100*r)})},e.prototype.nthSequenceNumber=function(t,n){var r=this;if(n===0)return W.resolve(vr.o);var i=new a$(n);return this.ae.forEachTarget(t,function(s){return i.re(s.sequenceNumber)}).next(function(){return r.ae.le(t,function(s){return i.re(s)})}).next(function(){return i.maxValue})},e.prototype.removeTargets=function(t,n,r){return this.ae.removeTargets(t,n,r)},e.prototype.removeOrphanedDocuments=function(t,n){return this.ae.removeOrphanedDocuments(t,n)},e.prototype.collect=function(t,n){var r=this;return this.params.cacheSizeCollectionThreshold===-1?(Y("LruGarbageCollector","Garbage collection skipped; disabled"),W.resolve(Ik)):this.getCacheSize(t).next(function(i){return i<r.params.cacheSizeCollectionThreshold?(Y("LruGarbageCollector","Garbage collection skipped; Cache size "+i+" is lower than threshold "+r.params.cacheSizeCollectionThreshold),Ik):r.fe(t,n)})},e.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},e.prototype.fe=function(t,n){var r,i,s,a,c,l,h,d=this,v=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(m){return m>d.params.maximumSequenceNumbersToCollect?(Y("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+d.params.maximumSequenceNumbersToCollect+" from "+m),i=d.params.maximumSequenceNumbersToCollect):i=m,a=Date.now(),d.nthSequenceNumber(t,i)}).next(function(m){return r=m,c=Date.now(),d.removeTargets(t,r,n)}).next(function(m){return s=m,l=Date.now(),d.removeOrphanedDocuments(t,r)}).next(function(m){return h=Date.now(),cw()<=Le.DEBUG&&Y("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in `+(a-v)+`ms
	Determined least recently used `+i+" in "+(c-a)+`ms
	Removed `+s+" targets in "+(l-c)+`ms
	Removed `+m+" documents in "+(h-l)+`ms
Total Duration: `+(h-v)+"ms"),W.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:m})})},e}(),l$=function(){function e(t,n){this.db=t,this.garbageCollector=function(r,i){return new c$(r,i)}(this,n)}return e.prototype.he=function(t){var n=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(r){return n.next(function(i){return r+i})})},e.prototype.de=function(t){var n=0;return this.le(t,function(r){n++}).next(function(){return n})},e.prototype.forEachTarget=function(t,n){return this.db.getTargetCache().forEachTarget(t,n)},e.prototype.le=function(t,n){return this.we(t,function(r,i){return n(i)})},e.prototype.addReference=function(t,n,r){return ed(t,r)},e.prototype.removeReference=function(t,n,r){return ed(t,r)},e.prototype.removeTargets=function(t,n,r){return this.db.getTargetCache().removeTargets(t,n,r)},e.prototype.markPotentiallyOrphaned=function(t,n){return ed(t,n)},e.prototype._e=function(t,n){return function(r,i){var s=!1;return qx(r).Ot(function(a){return Bx(r,a,i).next(function(c){return c&&(s=!0),W.resolve(!c)})}).next(function(){return s})}(t,n)},e.prototype.removeOrphanedDocuments=function(t,n){var r=this,i=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[],a=0;return this.we(t,function(c,l){if(l<=n){var h=r._e(t,c).next(function(d){if(!d)return a++,i.getEntry(t,c).next(function(){return i.removeEntry(c),Ao(t).delete([0,ni(c.path)])})});s.push(h)}}).next(function(){return W.waitFor(s)}).next(function(){return i.apply(t)}).next(function(){return a})},e.prototype.removeTarget=function(t,n){var r=n.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,r)},e.prototype.updateLimboDocument=function(t,n){return ed(t,n)},e.prototype.we=function(t,n){var r,i=Ao(t),s=vr.o;return i.$t({index:hn.documentTargetsIndex},function(a,c){var l=a[0];a[1];var h=c.path,d=c.sequenceNumber;l===0?(s!==vr.o&&n(new fe(zi(r)),s),s=d,r=h):s=vr.o}).next(function(){s!==vr.o&&n(new fe(zi(r)),s)})},e.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},e}();function ed(e,t){return Ao(e).put(function(n,r){return new hn(0,ni(n.path),r)}(t,e.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rc=function(){function e(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={}}return e.prototype.get=function(t){var n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0)for(var i=0,s=r;i<s.length;i++){var a=s[i],c=a[0],l=a[1];if(this.equalsFn(c,t))return l}},e.prototype.has=function(t){return this.get(t)!==void 0},e.prototype.set=function(t,n){var r=this.mapKeyFn(t),i=this.inner[r];if(i!==void 0){for(var s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n])}else this.inner[r]=[[t,n]]},e.prototype.delete=function(t){var n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),!0;return!1},e.prototype.forEach=function(t){va(this.inner,function(n,r){for(var i=0,s=r;i<s.length;i++){var a=s[i],c=a[0],l=a[1];t(c,l)}})},e.prototype.isEmpty=function(){return tx(this.inner)},e}(),Hx=function(){function e(){this.changes=new rc(function(t){return t.toString()},function(t,n){return t.isEqual(n)}),this.changesApplied=!1}return e.prototype.getReadTime=function(t){var n=this.changes.get(t);return n?n.readTime:xe.min()},e.prototype.addEntry=function(t,n){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:n})},e.prototype.removeEntry=function(t,n){n===void 0&&(n=null),this.assertNotApplied(),this.changes.set(t,{document:mn.newInvalidDocument(t),readTime:n})},e.prototype.getEntry=function(t,n){this.assertNotApplied();var r=this.changes.get(n);return r!==void 0?W.resolve(r.document):this.getFromCache(t,n)},e.prototype.getEntries=function(t,n){return this.getAllFromCache(t,n)},e.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},e.prototype.assertNotApplied=function(){},e}(),f$=function(){function e(t,n){this.R=t,this.Ut=n}return e.prototype.addEntry=function(t,n,r){return Io(t).put(td(n),r)},e.prototype.removeEntry=function(t,n){var r=Io(t),i=td(n);return r.delete(i)},e.prototype.updateMetadata=function(t,n){var r=this;return this.getMetadata(t).next(function(i){return i.byteSize+=n,r.me(t,i)})},e.prototype.getEntry=function(t,n){var r=this;return Io(t).get(td(n)).next(function(i){return r.ye(n,i)})},e.prototype.ge=function(t,n){var r=this;return Io(t).get(td(n)).next(function(i){return{document:r.ye(n,i),size:op(i)}})},e.prototype.getEntries=function(t,n){var r=this,i=Dr();return this.pe(t,n,function(s,a){var c=r.ye(s,a);i=i.insert(s,c)}).next(function(){return i})},e.prototype.Ee=function(t,n){var r=this,i=Dr(),s=new Nn(fe.comparator);return this.pe(t,n,function(a,c){var l=r.ye(a,c);i=i.insert(a,l),s=s.insert(a,op(c))}).next(function(){return{documents:i,Te:s}})},e.prototype.pe=function(t,n,r){if(n.isEmpty())return W.resolve();var i=IDBKeyRange.bound(n.first().path.toArray(),n.last().path.toArray()),s=n.getIterator(),a=s.getNext();return Io(t).$t({range:i},function(c,l,h){for(var d=fe.fromSegments(c);a&&fe.comparator(a,d)<0;)r(a,null),a=s.getNext();a&&a.isEqual(d)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?h.Ct(a.path.toArray()):h.done()}).next(function(){for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})},e.prototype.getDocumentsMatchingQuery=function(t,n,r){var i=this,s=Dr(),a=n.path.length+1,c={};if(r.isEqual(xe.min())){var l=n.path.toArray();c.range=IDBKeyRange.lowerBound(l)}else{var h=n.path.toArray(),d=R0(r);c.range=IDBKeyRange.lowerBound([h,d],!0),c.index=It.collectionReadTimeIndex}return Io(t).$t(c,function(v,m,y){if(v.length===a){var w=gw(i.R,m);n.path.isPrefixOf(w.key.path)?kf(n,w)&&(s=s.insert(w.key,w)):y.done()}}).next(function(){return s})},e.prototype.newChangeBuffer=function(t){return new h$(this,!!t&&t.trackRemovals)},e.prototype.getSize=function(t){return this.getMetadata(t).next(function(n){return n.byteSize})},e.prototype.getMetadata=function(t){return Ak(t).get(_i.key).next(function(n){return _e(!!n),n})},e.prototype.me=function(t,n){return Ak(t).put(_i.key,n)},e.prototype.ye=function(t,n){if(n){var r=gw(this.R,n);if(!r.isNoDocument()||!r.version.isEqual(xe.min()))return r}return mn.newInvalidDocument(t)},e}(),h$=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).Ie=n,i.trackRemovals=r,i.Ae=new rc(function(s){return s.toString()},function(s,a){return s.isEqual(a)}),i}return te(t,e),t.prototype.applyChanges=function(n){var r=this,i=[],s=0,a=new Ht(function(c,l){return Ue(c.canonicalString(),l.canonicalString())});return this.changes.forEach(function(c,l){var h=r.Ae.get(c);if(l.document.isValidDocument()){var d=wk(r.Ie.R,l.document,r.getReadTime(c));a=a.add(c.path.popLast());var v=op(d);s+=v-h,i.push(r.Ie.addEntry(n,c,d))}else if(s-=h,r.trackRemovals){var m=wk(r.Ie.R,mn.newNoDocument(c,xe.min()),r.getReadTime(c));i.push(r.Ie.addEntry(n,c,m))}else i.push(r.Ie.removeEntry(n,c))}),a.forEach(function(c){i.push(r.Ie.Ut.addToCollectionParentIndex(n,c))}),i.push(this.Ie.updateMetadata(n,s)),W.waitFor(i)},t.prototype.getFromCache=function(n,r){var i=this;return this.Ie.ge(n,r).next(function(s){return i.Ae.set(r,s.size),s.document})},t.prototype.getAllFromCache=function(n,r){var i=this;return this.Ie.Ee(n,r).next(function(s){var a=s.documents;return s.Te.forEach(function(c,l){i.Ae.set(c,l)}),a})},t}(Hx);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ak(e){return ir(e,_i.store)}function Io(e){return ir(e,It.store)}function td(e){return e.path.toArray()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var d$=function(){function e(t){this.R=t}return e.prototype.Rt=function(t,n,r,i){var s=this;_e(r<i&&r>=0&&i<=11);var a=new Mx("createOrUpgrade",n);r<1&&i>=1&&(function(l){l.createObjectStore(lr.store)}(t),function(l){l.createObjectStore(Lo.store,{keyPath:Lo.keyPath}),l.createObjectStore(ut.store,{keyPath:ut.keyPath,autoIncrement:!0}).createIndex(ut.userMutationsIndex,ut.userMutationsKeyPath,{unique:!0}),l.createObjectStore(bn.store)}(t),kk(t),function(l){l.createObjectStore(It.store)}(t));var c=W.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore(hn.store),l.deleteObjectStore(er.store),l.deleteObjectStore(hr.store)}(t),kk(t)),c=c.next(function(){return function(l){var h=l.store(hr.store),d=new hr(0,0,xe.min().toTimestamp(),0);return h.put(hr.key,d)}(a)})),r<4&&i>=4&&(r!==0&&(c=c.next(function(){return function(l,h){return h.store(ut.store).Nt().next(function(d){l.deleteObjectStore(ut.store),l.createObjectStore(ut.store,{keyPath:ut.keyPath,autoIncrement:!0}).createIndex(ut.userMutationsIndex,ut.userMutationsKeyPath,{unique:!0});var v=h.store(ut.store),m=d.map(function(y){return v.put(y)});return W.waitFor(m)})}(t,a)})),c=c.next(function(){(function(l){l.createObjectStore(Gi.store,{keyPath:Gi.keyPath})})(t)})),r<5&&i>=5&&(c=c.next(function(){return s.Re(a)})),r<6&&i>=6&&(c=c.next(function(){return function(l){l.createObjectStore(_i.store)}(t),s.be(a)})),r<7&&i>=7&&(c=c.next(function(){return s.ve(a)})),r<8&&i>=8&&(c=c.next(function(){return s.Pe(t,a)})),r<9&&i>=9&&(c=c.next(function(){(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(t),function(l){var h=l.objectStore(It.store);h.createIndex(It.readTimeIndex,It.readTimeIndexPath,{unique:!1}),h.createIndex(It.collectionReadTimeIndex,It.collectionReadTimeIndexPath,{unique:!1})}(n)})),r<10&&i>=10&&(c=c.next(function(){return s.Ve(a)})),r<11&&i>=11&&(c=c.next(function(){(function(l){l.createObjectStore(Pu.store,{keyPath:Pu.keyPath})})(t),function(l){l.createObjectStore(Ou.store,{keyPath:Ou.keyPath})}(t)})),c},e.prototype.be=function(t){var n=0;return t.store(It.store).$t(function(r,i){n+=op(i)}).next(function(){var r=new _i(n);return t.store(_i.store).put(_i.key,r)})},e.prototype.Re=function(t){var n=this,r=t.store(Lo.store),i=t.store(ut.store);return r.Nt().next(function(s){return W.forEach(s,function(a){var c=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return i.Nt(ut.userMutationsIndex,c).next(function(l){return W.forEach(l,function(h){_e(h.userId===a.userId);var d=eu(n.R,h);return Vx(t,a.userId,d).next(function(){})})})})})},e.prototype.ve=function(t){var n=t.store(hn.store),r=t.store(It.store);return t.store(hr.store).get(hr.key).next(function(i){var s=[];return r.$t(function(a,c){var l=new Ge(a),h=function(d){return[0,ni(d)]}(l);s.push(n.get(h).next(function(d){return d?W.resolve():function(v){return n.put(new hn(0,ni(v),i.highestListenSequenceNumber))}(l)}))}).next(function(){return W.waitFor(s)})})},e.prototype.Pe=function(t,n){t.createObjectStore(zs.store,{keyPath:zs.keyPath});var r=n.store(zs.store),i=new P0,s=function(a){if(i.add(a)){var c=a.lastSegment(),l=a.popLast();return r.put({collectionId:c,parent:ni(l)})}};return n.store(It.store).$t({Ft:!0},function(a,c){var l=new Ge(a);return s(l.popLast())}).next(function(){return n.store(bn.store).$t({Ft:!0},function(a,c){a[0];var l=a[1];a[2];var h=zi(l);return s(h.popLast())})})},e.prototype.Ve=function(t){var n=this,r=t.store(er.store);return r.$t(function(i,s){var a=il(s),c=jx(n.R,a);return r.put(c)})},e}();function kk(e){e.createObjectStore(hn.store,{keyPath:hn.keyPath}).createIndex(hn.documentTargetsIndex,hn.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(er.store,{keyPath:er.keyPath}).createIndex(er.queryTargetsIndexName,er.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(hr.store)}var qy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",p$=function(){function e(t,n,r,i,s,a,c,l,h,d){if(this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Se=s,this.window=a,this.document=c,this.De=h,this.Ce=d,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ke=null,this.inForeground=!1,this.Fe=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(v){return Promise.resolve()},!e.yt())throw new q(x.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new l$(this,i),this.Le=n+"main",this.R=new Fx(l),this.Be=new xu(this.Le,11,new d$(this.R)),this.qe=new s$(this.referenceDelegate,this.R),this.Ut=new i$,this.Ue=function(v,m){return new f$(v,m)}(this.R,this.Ut),this.Ke=new n$,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,d===!1&&xt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return e.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new q(x.FAILED_PRECONDITION,qy);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(n){return t.qe.getHighestSequenceNumber(n)})}).then(function(n){t.Ne=new vr(n,t.De)}).then(function(){t.xe=!0}).catch(function(n){return t.Be&&t.Be.close(),Promise.reject(n)})},e.prototype.He=function(t){var n=this;return this.Me=function(r){return A(n,void 0,void 0,function(){return C(this,function(i){return this.started?[2,t(r)]:[2]})})},t(this.isPrimary)},e.prototype.setDatabaseDeletedListener=function(t){var n=this;this.Be.vt(function(r){return A(n,void 0,void 0,function(){return C(this,function(i){switch(i.label){case 0:return r.newVersion===null?[4,t()]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})})},e.prototype.setNetworkEnabled=function(t){var n=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return A(n,void 0,void 0,function(){return C(this,function(r){switch(r.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}})})}))},e.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(n){return nd(n).put(new Gi(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(n).next(function(r){r||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(n)}).next(function(r){return t.isPrimary&&!r?t.Xe(n).next(function(){return!1}):!!r&&t.Ze(n).next(function(){return!0})})}).catch(function(n){if(ma(n))return Y("IndexedDbPersistence","Failed to extend owner lease: ",n),t.isPrimary;if(!t.allowTabSynchronization)throw n;return Y("IndexedDbPersistence","Releasing owner lease after error during lease refresh",n),!1}).then(function(n){t.isPrimary!==n&&t.Se.enqueueRetryable(function(){return t.Me(n)}),t.isPrimary=n})},e.prototype.Je=function(t){var n=this;return Zc(t).get(lr.key).next(function(r){return W.resolve(n.tn(r))})},e.prototype.en=function(t){return nd(t).delete(this.clientId)},e.prototype.nn=function(){return A(this,void 0,void 0,function(){var t,n,r,i,s=this;return C(this,function(a){switch(a.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(c){var l=ir(c,Gi.store);return l.Nt().next(function(h){var d=s.rn(h,18e5),v=h.filter(function(m){return d.indexOf(m)===-1});return W.forEach(v,function(m){return l.delete(m.clientId)}).next(function(){return v})})}).catch(function(){return[]})]);case 1:if(t=a.sent(),this.Qe)for(n=0,r=t;n<r.length;n++)i=r[n],this.Qe.removeItem(this.on(i.clientId));a.label=2;case 2:return[2]}})})},e.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},e.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},e.prototype.Ye=function(t){var n=this;return this.Ce?W.resolve(!0):Zc(t).get(lr.key).next(function(r){if(r!==null&&n.sn(r.leaseTimestampMs,5e3)&&!n.cn(r.ownerId)){if(n.tn(r)&&n.networkEnabled)return!0;if(!n.tn(r)){if(!r.allowTabSynchronization)throw new q(x.FAILED_PRECONDITION,qy);return!1}}return!(!n.networkEnabled||!n.inForeground)||nd(t).Nt().next(function(i){return n.rn(i,5e3).find(function(s){if(n.clientId!==s.clientId){var a=!n.networkEnabled&&s.networkEnabled,c=!n.inForeground&&s.inForeground,l=n.networkEnabled===s.networkEnabled;if(a||c&&l)return!0}return!1})===void 0})}).next(function(r){return n.isPrimary!==r&&Y("IndexedDbPersistence","Client "+(r?"is":"is not")+" eligible for a primary lease."),r})},e.prototype.shutdown=function(){return A(this,void 0,void 0,function(){var t=this;return C(this,function(n){switch(n.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[lr.store,Gi.store],function(r){var i=new _k(r,vr.o);return t.Xe(i).next(function(){return t.en(i)})})];case 1:return n.sent(),this.Be.close(),this.ln(),[2]}})})},e.prototype.rn=function(t,n){var r=this;return t.filter(function(i){return r.sn(i.updateTimeMs,n)&&!r.cn(i.clientId)})},e.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(n){return nd(n).Nt().next(function(r){return t.rn(r,18e5).map(function(i){return i.clientId})})})},Object.defineProperty(e.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),e.prototype.getMutationQueue=function(t){return o$.Qt(t,this.R,this.Ut,this.referenceDelegate)},e.prototype.getTargetCache=function(){return this.qe},e.prototype.getRemoteDocumentCache=function(){return this.Ue},e.prototype.getIndexManager=function(){return this.Ut},e.prototype.getBundleCache=function(){return this.Ke},e.prototype.runTransaction=function(t,n,r){var i=this;Y("IndexedDbPersistence","Starting transaction:",t);var s,a=n==="readonly"?"readonly":"readwrite";return this.Be.runTransaction(t,a,JW,function(c){return s=new _k(c,i.Ne?i.Ne.next():vr.o),n==="readwrite-primary"?i.Je(s).next(function(l){return!!l||i.Ye(s)}).next(function(l){if(!l)throw xt("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new q(x.FAILED_PRECONDITION,Dx);return r(s)}).next(function(l){return i.Ze(s).next(function(){return l})}):i.dn(s).next(function(){return r(s)})}).then(function(c){return s.raiseOnCommittedEvent(),c})},e.prototype.dn=function(t){var n=this;return Zc(t).get(lr.key).next(function(r){if(r!==null&&n.sn(r.leaseTimestampMs,5e3)&&!n.cn(r.ownerId)&&!n.tn(r)&&!(n.Ce||n.allowTabSynchronization&&r.allowTabSynchronization))throw new q(x.FAILED_PRECONDITION,qy)})},e.prototype.Ze=function(t){var n=new lr(this.clientId,this.allowTabSynchronization,Date.now());return Zc(t).put(lr.key,n)},e.yt=function(){return xu.yt()},e.prototype.Xe=function(t){var n=this,r=Zc(t);return r.get(lr.key).next(function(i){return n.tn(i)?(Y("IndexedDbPersistence","Releasing primary lease."),r.delete(lr.key)):W.resolve()})},e.prototype.sn=function(t,n){var r=Date.now();return!(t<r-n||t>r&&(xt("Detected an update time that is in the future: "+t+" > "+r),1))},e.prototype.We=function(){var t=this;this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Fe=function(){t.Se.enqueueAndForget(function(){return t.inForeground=t.document.visibilityState==="visible",t.je()})},this.document.addEventListener("visibilitychange",this.Fe),this.inForeground=this.document.visibilityState==="visible")},e.prototype.an=function(){this.Fe&&(this.document.removeEventListener("visibilitychange",this.Fe),this.Fe=null)},e.prototype.Ge=function(){var t,n=this;typeof((t=this.window)===null||t===void 0?void 0:t.addEventListener)=="function"&&(this.ke=function(){n.un(),JV()&&navigator.appVersion.match("Version/14")&&n.Se.enterRestrictedMode(!0),n.Se.enqueueAndForget(function(){return n.shutdown()})},this.window.addEventListener("pagehide",this.ke))},e.prototype.hn=function(){this.ke&&(this.window.removeEventListener("pagehide",this.ke),this.ke=null)},e.prototype.cn=function(t){var n;try{var r=((n=this.Qe)===null||n===void 0?void 0:n.getItem(this.on(t)))!==null;return Y("IndexedDbPersistence","Client '"+t+"' "+(r?"is":"is not")+" zombied in LocalStorage"),r}catch(i){return xt("IndexedDbPersistence","Failed to get zombied client id.",i),!1}},e.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){xt("Failed to set zombie client id.",t)}},e.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch{}},e.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},e}();function Zc(e){return ir(e,lr.store)}function nd(e){return ir(e,Gi.store)}function O0(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var v$=function(e,t){this.progress=e,this.wn=t},Kx=function(){function e(t,n,r){this.Ue=t,this._n=n,this.Ut=r}return e.prototype.mn=function(t,n){var r=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,n).next(function(i){return r.yn(t,n,i)})},e.prototype.yn=function(t,n,r){return this.Ue.getEntry(t,n).next(function(i){for(var s=0,a=r;s<a.length;s++)a[s].applyToLocalView(i);return i})},e.prototype.gn=function(t,n){t.forEach(function(r,i){for(var s=0,a=n;s<a.length;s++)a[s].applyToLocalView(i)})},e.prototype.pn=function(t,n){var r=this;return this.Ue.getEntries(t,n).next(function(i){return r.En(t,i).next(function(){return i})})},e.prototype.En=function(t,n){var r=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,n).next(function(i){return r.gn(n,i)})},e.prototype.getDocumentsMatchingQuery=function(t,n,r){return function(i){return fe.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.Tn(t,n.path):E0(n)?this.In(t,n,r):this.An(t,n,r)},e.prototype.Tn=function(t,n){return this.mn(t,new fe(n)).next(function(r){var i=pw();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})},e.prototype.In=function(t,n,r){var i=this,s=n.collectionGroup,a=pw();return this.Ut.getCollectionParents(t,s).next(function(c){return W.forEach(c,function(l){var h=function(d,v){return new ro(v,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return i.An(t,h,r).next(function(d){d.forEach(function(v,m){a=a.insert(v,m)})})}).next(function(){return a})})},e.prototype.An=function(t,n,r){var i,s,a=this;return this.Ue.getDocumentsMatchingQuery(t,n,r).next(function(c){return i=c,a._n.getAllMutationBatchesAffectingQuery(t,n)}).next(function(c){return s=c,a.Rn(t,s,i).next(function(l){i=l;for(var h=0,d=s;h<d.length;h++)for(var v=d[h],m=0,y=v.mutations;m<y.length;m++){var w=y[m],E=w.key,T=i.get(E);T==null&&(T=mn.newInvalidDocument(E),i=i.insert(E,T)),dw(w,T,v.localWriteTime),T.isFoundDocument()||(i=i.remove(E))}})}).next(function(){return i.forEach(function(c,l){kf(n,l)||(i=i.remove(c))}),i})},e.prototype.Rn=function(t,n,r){for(var i=et(),s=0,a=n;s<a.length;s++)for(var c=0,l=a[s].mutations;c<l.length;c++){var h=l[c];h instanceof Yo&&r.get(h.key)===null&&(i=i.add(h.key))}var d=r;return this.Ue.getEntries(t,i).next(function(v){return v.forEach(function(m,y){y.isFoundDocument()&&(d=d.insert(m,y))}),d})},e}(),g$=function(){function e(t,n,r,i){this.targetId=t,this.fromCache=n,this.bn=r,this.vn=i}return e.Pn=function(t,n){for(var r=et(),i=et(),s=0,a=n.docChanges;s<a.length;s++){var c=a[s];switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:i=i.add(c.doc.key)}}return new e(t,n.fromCache,r,i)},e}(),zx=function(){function e(){}return e.prototype.Vn=function(t){this.Sn=t},e.prototype.getDocumentsMatchingQuery=function(t,n,r,i){var s=this;return function(a){return a.filters.length===0&&a.limit===null&&a.startAt==null&&a.endAt==null&&(a.explicitOrderBy.length===0||a.explicitOrderBy.length===1&&a.explicitOrderBy[0].field.isKeyField())}(n)||r.isEqual(xe.min())?this.Dn(t,n):this.Sn.pn(t,i).next(function(a){var c=s.Cn(n,a);return(md(n)||rp(n))&&s.Nn(n.limitType,c,i,r)?s.Dn(t,n):(cw()<=Le.DEBUG&&Y("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),hw(n)),s.Sn.getDocumentsMatchingQuery(t,n,r).next(function(l){return c.forEach(function(h){l=l.insert(h.key,h)}),l}))})},e.prototype.Cn=function(t,n){var r=new Ht(lx(t));return n.forEach(function(i,s){kf(t,s)&&(r=r.add(s))}),r},e.prototype.Nn=function(t,n,r,i){if(r.size!==n.size)return!0;var s=t==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)},e.prototype.Dn=function(t,n){return cw()<=Le.DEBUG&&Y("QueryEngine","Using full collection scan to execute query:",hw(n)),this.Sn.getDocumentsMatchingQuery(t,n,xe.min())},e}(),m$=function(){function e(t,n,r,i){this.persistence=t,this.xn=n,this.R=i,this.kn=new Nn(Ue),this.Fn=new rc(function(s){return Cf(s)},vv),this.$n=xe.min(),this._n=t.getMutationQueue(r),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new Kx(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return e.prototype.collectGarbage=function(t){var n=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(r){return t.collect(r,n.kn)})},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wx(e,t,n,r){return new m$(e,t,n,r)}function $x(e,t){return A(this,void 0,void 0,function(){var n,r,i,s;return C(this,function(a){switch(a.label){case 0:return n=ee(e),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(c){var l;return n._n.getAllMutationBatches(c).next(function(h){return l=h,r=n.persistence.getMutationQueue(t),i=new Kx(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(c)}).next(function(h){for(var d=[],v=[],m=et(),y=0,w=l;y<w.length;y++){var E=w[y];d.push(E.batchId);for(var T=0,k=E.mutations;T<k.length;T++){var P=k[T];m=m.add(P.key)}}for(var O=0,H=h;O<H.length;O++){var K=H[O];v.push(K.batchId);for(var U=0,ie=K.mutations;U<ie.length;U++){var F=ie[U];m=m.add(F.key)}}return i.pn(c,m).next(function(ge){return{Ln:ge,removedBatchIds:d,addedBatchIds:v}})})})];case 1:return s=a.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),s)]}})})}function y$(e,t){var n=ee(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(r){var i=t.batch.keys(),s=n.On.newChangeBuffer({trackRemovals:!0});return function(a,c,l,h){var d=l.batch,v=d.keys(),m=W.resolve();return v.forEach(function(y){m=m.next(function(){return h.getEntry(c,y)}).next(function(w){var E=l.docVersions.get(y);_e(E!==null),w.version.compareTo(E)<0&&(d.applyToRemoteDocument(w,l),w.isValidDocument()&&h.addEntry(w,l.commitVersion))})}),m.next(function(){return a._n.removeMutationBatch(c,d)})}(n,r,t,s).next(function(){return s.apply(r)}).next(function(){return n._n.performConsistencyCheck(r)}).next(function(){return n.Mn.pn(r,i)})})}function Gx(e){var t=ee(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",function(n){return t.qe.getLastRemoteSnapshotVersion(n)})}function _$(e,t){var n=ee(e),r=t.snapshotVersion,i=n.kn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(s){var a=n.On.newChangeBuffer({trackRemovals:!0});i=n.kn;var c=[];t.targetChanges.forEach(function(d,v){var m=i.get(v);if(m){c.push(n.qe.removeMatchingKeys(s,d.removedDocuments,v).next(function(){return n.qe.addMatchingKeys(s,d.addedDocuments,v)}));var y=d.resumeToken;if(y.approximateByteSize()>0){var w=m.withResumeToken(y,r).withSequenceNumber(s.currentSequenceNumber);i=i.insert(v,w),function(E,T,k){return _e(T.resumeToken.approximateByteSize()>0),E.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=3e8||k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(m,w,d)&&c.push(n.qe.updateTargetData(s,w))}}});var l=Dr();if(t.documentUpdates.forEach(function(d,v){t.resolvedLimboDocuments.has(d)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),c.push(Qx(s,a,t.documentUpdates,r,void 0).next(function(d){l=d})),!r.isEqual(xe.min())){var h=n.qe.getLastRemoteSnapshotVersion(s).next(function(d){return n.qe.setTargetsMetadata(s,s.currentSequenceNumber,r)});c.push(h)}return W.waitFor(c).next(function(){return a.apply(s)}).next(function(){return n.Mn.En(s,l)}).next(function(){return l})}).then(function(s){return n.kn=i,s})}function Qx(e,t,n,r,i){var s=et();return n.forEach(function(a){return s=s.add(a)}),t.getEntries(e,s).next(function(a){var c=Dr();return n.forEach(function(l,h){var d=a.get(l),v=(i==null?void 0:i.get(l))||r;h.isNoDocument()&&h.version.isEqual(xe.min())?(t.removeEntry(l,v),c=c.insert(l,h)):!d.isValidDocument()||h.version.compareTo(d.version)>0||h.version.compareTo(d.version)===0&&d.hasPendingWrites?(t.addEntry(h,v),c=c.insert(l,h)):Y("LocalStore","Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",h.version)}),c})}function w$(e,t){var n=ee(e);return n.persistence.runTransaction("Get next mutation batch","readonly",function(r){return t===void 0&&(t=-1),n._n.getNextMutationBatchAfterBatchId(r,t)})}function Mu(e,t){var n=ee(e);return n.persistence.runTransaction("Allocate target","readwrite",function(r){var i;return n.qe.getTargetData(r,t).next(function(s){return s?(i=s,W.resolve(i)):n.qe.allocateTargetId(r).next(function(a){return i=new _v(t,a,0,r.currentSequenceNumber),n.qe.addTargetData(r,i).next(function(){return i})})})}).then(function(r){var i=n.kn.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.kn=n.kn.insert(r.targetId,r),n.Fn.set(t,r.targetId)),r})}function Fu(e,t,n){return A(this,void 0,void 0,function(){var r,i,s,a;return C(this,function(c){switch(c.label){case 0:r=ee(e),i=r.kn.get(t),s=n?"readwrite":"readwrite-primary",c.label=1;case 1:return c.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",s,function(l){return r.persistence.referenceDelegate.removeTarget(l,i)})];case 2:c.sent(),c.label=3;case 3:return[3,5];case 4:if(!ma(a=c.sent()))throw a;return Y("LocalStore","Failed to update sequence numbers for target "+t+": "+a),[3,5];case 5:return r.kn=r.kn.remove(t),r.Fn.delete(i.target),[2]}})})}function ap(e,t,n){var r=ee(e),i=xe.min(),s=et();return r.persistence.runTransaction("Execute query","readonly",function(a){return function(c,l,h){var d=ee(c),v=d.Fn.get(h);return v!==void 0?W.resolve(d.kn.get(v)):d.qe.getTargetData(l,h)}(r,a,Fr(t)).next(function(c){if(c)return i=c.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(a,c.targetId).next(function(l){s=l})}).next(function(){return r.xn.getDocumentsMatchingQuery(a,t,n?i:xe.min(),n?s:et())}).next(function(c){return{documents:c,Bn:s}})})}function Yx(e,t){var n=ee(e),r=ee(n.qe),i=n.kn.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(s){return r.lt(s,t).next(function(a){return a?a.target:null})})}function Xx(e){var t=ee(e);return t.persistence.runTransaction("Get new document changes","readonly",function(n){return function(r,i,s){var a=ee(r),c=Dr(),l=R0(s),h=Io(i),d=IDBKeyRange.lowerBound(l,!0);return h.$t({index:It.readTimeIndex,range:d},function(v,m){var y=gw(a.R,m);c=c.insert(y.key,y),l=m.readTime}).next(function(){return{wn:c,readTime:Ux(l)}})}(t.On,n,t.$n)}).then(function(n){var r=n.wn,i=n.readTime;return t.$n=i,r})}function b$(e){return A(this,void 0,void 0,function(){var t;return C(this,function(n){return[2,(t=ee(e)).persistence.runTransaction("Synchronize last document change read time","readonly",function(r){return function(i){var s=Io(i),a=xe.min();return s.$t({index:It.readTimeIndex,reverse:!0},function(c,l,h){l.readTime&&(a=Ux(l.readTime)),h.done()}).next(function(){return a})}(r)}).then(function(r){t.$n=r})]})})}function E$(e,t,n,r){return A(this,void 0,void 0,function(){var i,s,a,c,l,h,d,v,m,y;return C(this,function(w){switch(w.label){case 0:for(i=ee(e),s=et(),a=Dr(),c=bx(),l=0,h=n;l<h.length;l++)d=h[l],v=t.qn(d.metadata.name),d.document&&(s=s.add(v)),a=a.insert(v,t.Un(d)),c=c.insert(v,t.Kn(d.metadata.readTime));return m=i.On.newChangeBuffer({trackRemovals:!0}),[4,Mu(i,function(E){return Fr(nc(Ge.fromString("__bundle__/docs/"+E)))}(r))];case 1:return y=w.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(E){return Qx(E,m,a,xe.min(),c).next(function(T){return m.apply(E),T}).next(function(T){return i.qe.removeMatchingKeysForTargetId(E,y.targetId).next(function(){return i.qe.addMatchingKeys(E,s,y.targetId)}).next(function(){return i.Mn.En(E,T)}).next(function(){return T})})})]}})})}function T$(e,t,n){return n===void 0&&(n=et()),A(this,void 0,void 0,function(){var r,i;return C(this,function(s){switch(s.label){case 0:return[4,Mu(e,Fr(N0(t.bundledQuery)))];case 1:return r=s.sent(),[2,(i=ee(e)).persistence.runTransaction("Save named query","readwrite",function(a){var c=en(t.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.Ke.saveNamedQuery(a,t);var l=r.withResumeToken(zn.EMPTY_BYTE_STRING,c);return i.kn=i.kn.insert(l.targetId,l),i.qe.updateTargetData(a,l).next(function(){return i.qe.removeMatchingKeysForTargetId(a,r.targetId)}).next(function(){return i.qe.addMatchingKeys(a,n,r.targetId)}).next(function(){return i.Ke.saveNamedQuery(a,t)})})]}})})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var I$=function(){function e(t){this.R=t,this.Qn=new Map,this.jn=new Map}return e.prototype.getBundleMetadata=function(t,n){return W.resolve(this.Qn.get(n))},e.prototype.saveBundleMetadata=function(t,n){var r;return this.Qn.set(n.id,{id:(r=n).id,version:r.version,createTime:en(r.createTime)}),W.resolve()},e.prototype.getNamedQuery=function(t,n){return W.resolve(this.jn.get(n))},e.prototype.saveNamedQuery=function(t,n){return this.jn.set(n.name,function(r){return{name:r.name,query:N0(r.bundledQuery),readTime:en(r.readTime)}}(n)),W.resolve()},e}(),x0=function(){function e(){this.Wn=new Ht($t.Gn),this.zn=new Ht($t.Hn)}return e.prototype.isEmpty=function(){return this.Wn.isEmpty()},e.prototype.addReference=function(t,n){var r=new $t(t,n);this.Wn=this.Wn.add(r),this.zn=this.zn.add(r)},e.prototype.Jn=function(t,n){var r=this;t.forEach(function(i){return r.addReference(i,n)})},e.prototype.removeReference=function(t,n){this.Yn(new $t(t,n))},e.prototype.Xn=function(t,n){var r=this;t.forEach(function(i){return r.removeReference(i,n)})},e.prototype.Zn=function(t){var n=this,r=new fe(new Ge([])),i=new $t(r,t),s=new $t(r,t+1),a=[];return this.zn.forEachInRange([i,s],function(c){n.Yn(c),a.push(c.key)}),a},e.prototype.ts=function(){var t=this;this.Wn.forEach(function(n){return t.Yn(n)})},e.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},e.prototype.es=function(t){var n=new fe(new Ge([])),r=new $t(n,t),i=new $t(n,t+1),s=et();return this.zn.forEachInRange([r,i],function(a){s=s.add(a.key)}),s},e.prototype.containsKey=function(t){var n=new $t(t,0),r=this.Wn.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)},e}(),$t=function(){function e(t,n){this.key=t,this.ns=n}return e.Gn=function(t,n){return fe.comparator(t.key,n.key)||Ue(t.ns,n.ns)},e.Hn=function(t,n){return Ue(t.ns,n.ns)||fe.comparator(t.key,n.key)},e}(),S$=function(){function e(t,n){this.Ut=t,this.referenceDelegate=n,this._n=[],this.ss=1,this.rs=new Ht($t.Gn)}return e.prototype.checkEmpty=function(t){return W.resolve(this._n.length===0)},e.prototype.addMutationBatch=function(t,n,r,i){var s=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var a=new k0(s,n,r,i);this._n.push(a);for(var c=0,l=i;c<l.length;c++){var h=l[c];this.rs=this.rs.add(new $t(h.key,s)),this.Ut.addToCollectionParentIndex(t,h.key.path.popLast())}return W.resolve(a)},e.prototype.lookupMutationBatch=function(t,n){return W.resolve(this.os(n))},e.prototype.getNextMutationBatchAfterBatchId=function(t,n){var r=n+1,i=this.cs(r),s=i<0?0:i;return W.resolve(this._n.length>s?this._n[s]:null)},e.prototype.getHighestUnacknowledgedBatchId=function(){return W.resolve(this._n.length===0?-1:this.ss-1)},e.prototype.getAllMutationBatches=function(t){return W.resolve(this._n.slice())},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,n){var r=this,i=new $t(n,0),s=new $t(n,Number.POSITIVE_INFINITY),a=[];return this.rs.forEachInRange([i,s],function(c){var l=r.os(c.ns);a.push(l)}),W.resolve(a)},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,n){var r=this,i=new Ht(Ue);return n.forEach(function(s){var a=new $t(s,0),c=new $t(s,Number.POSITIVE_INFINITY);r.rs.forEachInRange([a,c],function(l){i=i.add(l.ns)})}),W.resolve(this.us(i))},e.prototype.getAllMutationBatchesAffectingQuery=function(t,n){var r=n.path,i=r.length+1,s=r;fe.isDocumentKey(s)||(s=s.child(""));var a=new $t(new fe(s),0),c=new Ht(Ue);return this.rs.forEachWhile(function(l){var h=l.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(c=c.add(l.ns)),!0)},a),W.resolve(this.us(c))},e.prototype.us=function(t){var n=this,r=[];return t.forEach(function(i){var s=n.os(i);s!==null&&r.push(s)}),r},e.prototype.removeMutationBatch=function(t,n){var r=this;_e(this.hs(n.batchId,"removed")===0),this._n.shift();var i=this.rs;return W.forEach(n.mutations,function(s){var a=new $t(s.key,n.batchId);return i=i.delete(a),r.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(function(){r.rs=i})},e.prototype.Gt=function(t){},e.prototype.containsKey=function(t,n){var r=new $t(n,0),i=this.rs.firstAfterOrEqual(r);return W.resolve(n.isEqual(i&&i.key))},e.prototype.performConsistencyCheck=function(t){return this._n.length,W.resolve()},e.prototype.hs=function(t,n){return this.cs(t)},e.prototype.cs=function(t){return this._n.length===0?0:t-this._n[0].batchId},e.prototype.os=function(t){var n=this.cs(t);return n<0||n>=this._n.length?null:this._n[n]},e}(),C$=function(){function e(t,n){this.Ut=t,this.ls=n,this.docs=new Nn(fe.comparator),this.size=0}return e.prototype.addEntry=function(t,n,r){var i=n.key,s=this.docs.get(i),a=s?s.size:0,c=this.ls(n);return this.docs=this.docs.insert(i,{document:n.clone(),size:c,readTime:r}),this.size+=c-a,this.Ut.addToCollectionParentIndex(t,i.path.popLast())},e.prototype.removeEntry=function(t){var n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)},e.prototype.getEntry=function(t,n){var r=this.docs.get(n);return W.resolve(r?r.document.clone():mn.newInvalidDocument(n))},e.prototype.getEntries=function(t,n){var r=this,i=Dr();return n.forEach(function(s){var a=r.docs.get(s);i=i.insert(s,a?a.document.clone():mn.newInvalidDocument(s))}),W.resolve(i)},e.prototype.getDocumentsMatchingQuery=function(t,n,r){for(var i=Dr(),s=new fe(n.path.child("")),a=this.docs.getIteratorFrom(s);a.hasNext();){var c=a.getNext(),l=c.key,h=c.value,d=h.document,v=h.readTime;if(!n.path.isPrefixOf(l.path))break;v.compareTo(r)<=0||kf(n,d)&&(i=i.insert(d.key,d.clone()))}return W.resolve(i)},e.prototype.fs=function(t,n){return W.forEach(this.docs,function(r){return n(r)})},e.prototype.newChangeBuffer=function(t){return new A$(this)},e.prototype.getSize=function(t){return W.resolve(this.size)},e}(),A$=function(e){function t(n){var r=this;return(r=e.call(this)||this).Ie=n,r}return te(t,e),t.prototype.applyChanges=function(n){var r=this,i=[];return this.changes.forEach(function(s,a){a.document.isValidDocument()?i.push(r.Ie.addEntry(n,a.document,r.getReadTime(s))):r.Ie.removeEntry(s)}),W.waitFor(i)},t.prototype.getFromCache=function(n,r){return this.Ie.getEntry(n,r)},t.prototype.getAllFromCache=function(n,r){return this.Ie.getEntries(n,r)},t}(Hx),k$=function(){function e(t){this.persistence=t,this.ds=new rc(function(n){return Cf(n)},vv),this.lastRemoteSnapshotVersion=xe.min(),this.highestTargetId=0,this.ws=0,this._s=new x0,this.targetCount=0,this.ys=sp.Jt()}return e.prototype.forEachTarget=function(t,n){return this.ds.forEach(function(r,i){return n(i)}),W.resolve()},e.prototype.getLastRemoteSnapshotVersion=function(t){return W.resolve(this.lastRemoteSnapshotVersion)},e.prototype.getHighestSequenceNumber=function(t){return W.resolve(this.ws)},e.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),W.resolve(this.highestTargetId)},e.prototype.setTargetsMetadata=function(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ws&&(this.ws=n),W.resolve()},e.prototype.te=function(t){this.ds.set(t.target,t);var n=t.targetId;n>this.highestTargetId&&(this.ys=new sp(n),this.highestTargetId=n),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},e.prototype.addTargetData=function(t,n){return this.te(n),this.targetCount+=1,W.resolve()},e.prototype.updateTargetData=function(t,n){return this.te(n),W.resolve()},e.prototype.removeTargetData=function(t,n){return this.ds.delete(n.target),this._s.Zn(n.targetId),this.targetCount-=1,W.resolve()},e.prototype.removeTargets=function(t,n,r){var i=this,s=0,a=[];return this.ds.forEach(function(c,l){l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i.ds.delete(c),a.push(i.removeMatchingKeysForTargetId(t,l.targetId)),s++)}),W.waitFor(a).next(function(){return s})},e.prototype.getTargetCount=function(t){return W.resolve(this.targetCount)},e.prototype.getTargetData=function(t,n){var r=this.ds.get(n)||null;return W.resolve(r)},e.prototype.addMatchingKeys=function(t,n,r){return this._s.Jn(n,r),W.resolve()},e.prototype.removeMatchingKeys=function(t,n,r){this._s.Xn(n,r);var i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(function(a){s.push(i.markPotentiallyOrphaned(t,a))}),W.waitFor(s)},e.prototype.removeMatchingKeysForTargetId=function(t,n){return this._s.Zn(n),W.resolve()},e.prototype.getMatchingKeysForTargetId=function(t,n){var r=this._s.es(n);return W.resolve(r)},e.prototype.containsKey=function(t,n){return W.resolve(this._s.containsKey(n))},e}(),R$=function(){function e(t,n){var r=this;this.gs={},this.Ne=new vr(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new k$(this),this.Ut=new r$,this.Ue=function(i,s){return new C$(i,function(a){return r.referenceDelegate.ps(a)})}(this.Ut),this.R=new Fx(n),this.Ke=new I$(this.R)}return e.prototype.start=function(){return Promise.resolve()},e.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(e.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),e.prototype.setDatabaseDeletedListener=function(){},e.prototype.setNetworkEnabled=function(){},e.prototype.getIndexManager=function(){return this.Ut},e.prototype.getMutationQueue=function(t){var n=this.gs[t.toKey()];return n||(n=new S$(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=n),n},e.prototype.getTargetCache=function(){return this.qe},e.prototype.getRemoteDocumentCache=function(){return this.Ue},e.prototype.getBundleCache=function(){return this.Ke},e.prototype.runTransaction=function(t,n,r){var i=this;Y("MemoryPersistence","Starting transaction:",t);var s=new N$(this.Ne.next());return this.referenceDelegate.Es(),r(s).next(function(a){return i.referenceDelegate.Ts(s).next(function(){return a})}).toPromise().then(function(a){return s.raiseOnCommittedEvent(),a})},e.prototype.Is=function(t,n){return W.or(Object.values(this.gs).map(function(r){return function(){return r.containsKey(t,n)}}))},e}(),N$=function(e){function t(n){var r=this;return(r=e.call(this)||this).currentSequenceNumber=n,r}return te(t,e),t}(Lx),P$=function(){function e(t){this.persistence=t,this.As=new x0,this.Rs=null}return e.bs=function(t){return new e(t)},Object.defineProperty(e.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw le()},enumerable:!1,configurable:!0}),e.prototype.addReference=function(t,n,r){return this.As.addReference(r,n),this.vs.delete(r.toString()),W.resolve()},e.prototype.removeReference=function(t,n,r){return this.As.removeReference(r,n),this.vs.add(r.toString()),W.resolve()},e.prototype.markPotentiallyOrphaned=function(t,n){return this.vs.add(n.toString()),W.resolve()},e.prototype.removeTarget=function(t,n){var r=this;this.As.Zn(n.targetId).forEach(function(s){return r.vs.add(s.toString())});var i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next(function(s){s.forEach(function(a){return r.vs.add(a.toString())})}).next(function(){return i.removeTargetData(t,n)})},e.prototype.Es=function(){this.Rs=new Set},e.prototype.Ts=function(t){var n=this,r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.vs,function(i){var s=fe.fromPath(i);return n.Ps(t,s).next(function(a){a||r.removeEntry(s)})}).next(function(){return n.Rs=null,r.apply(t)})},e.prototype.updateLimboDocument=function(t,n){var r=this;return this.Ps(t,n).next(function(i){i?r.vs.delete(n.toString()):r.vs.add(n.toString())})},e.prototype.ps=function(t){return 0},e.prototype.Ps=function(t,n){var r=this;return W.or([function(){return W.resolve(r.As.containsKey(n))},function(){return r.persistence.getTargetCache().containsKey(t,n)},function(){return r.persistence.Is(t,n)}])},e}(),un=function(){function e(t){this.uid=t}return e.prototype.isAuthenticated=function(){return this.uid!=null},e.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},e.prototype.isEqual=function(t){return t.uid===this.uid},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rk(e,t){return"firestore_clients_"+e+"_"+t}function Nk(e,t,n){var r="firestore_mutations_"+e+"_"+n;return t.isAuthenticated()&&(r+="_"+t.uid),r}function Hy(e,t){return"firestore_targets_"+e+"_"+t}un.UNAUTHENTICATED=new un(null),un.GOOGLE_CREDENTIALS=new un("google-credentials-uid"),un.FIRST_PARTY=new un("first-party-uid"),un.MOCK_USER=new un("mock-user");var Pk=function(){function e(t,n,r,i){this.user=t,this.batchId=n,this.state=r,this.error=i}return e.Vs=function(t,n,r){var i,s=JSON.parse(r),a=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return a&&s.error&&(a=typeof s.error.message=="string"&&typeof s.error.code=="string")&&(i=new q(s.error.code,s.error.message)),a?new e(t,n,s.state,i):(xt("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},e.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},e}(),Ky=function(){function e(t,n,r){this.targetId=t,this.state=n,this.error=r}return e.Vs=function(t,n){var r,i=JSON.parse(n),s=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string")&&(r=new q(i.error.code,i.error.message)),s?new e(t,i.state,r):(xt("SharedClientState","Failed to parse target state for ID '"+t+"': "+n),null)},e.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},e}(),Ok=function(){function e(t,n){this.clientId=t,this.activeTargetIds=n}return e.Vs=function(t,n){for(var r=JSON.parse(n),i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=yv(),a=0;i&&a<r.activeTargetIds.length;++a)i=ix(r.activeTargetIds[a]),s=s.add(r.activeTargetIds[a]);return i?new e(t,s):(xt("SharedClientState","Failed to parse client data for instance '"+t+"': "+n),null)},e}(),O$=function(){function e(t,n){this.clientId=t,this.onlineState=n}return e.Vs=function(t){var n=JSON.parse(t);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new e(n.clientId,n.onlineState):(xt("SharedClientState","Failed to parse online state: "+t),null)},e}(),mw=function(){function e(){this.activeTargetIds=yv()}return e.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},e.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},e.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},e}(),zy=function(){function e(t,n,r,i,s){this.window=t,this.Se=n,this.persistenceKey=r,this.Ns=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.ks.bind(this),this.Fs=new Nn(Ue),this.started=!1,this.$s=[];var a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Os=Rk(this.persistenceKey,this.Ns),this.Ms=function(c){return"firestore_sequence_number_"+c}(this.persistenceKey),this.Fs=this.Fs.insert(this.Ns,new mw),this.Ls=new RegExp("^firestore_clients_"+a+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+a+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+a+"_(\\d+)$"),this.Us=function(c){return"firestore_online_state_"+c}(this.persistenceKey),this.Ks=function(c){return"firestore_bundle_loaded_"+c}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return e.yt=function(t){return!(!t||!t.localStorage)},e.prototype.start=function(){return A(this,void 0,void 0,function(){var t,n,r,i,s,a,c,l,h,d,v,m=this;return C(this,function(y){switch(y.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=y.sent(),n=0,r=t;n<r.length;n++)(i=r[n])!==this.Ns&&(s=this.getItem(Rk(this.persistenceKey,i)))&&(a=Ok.Vs(i,s))&&(this.Fs=this.Fs.insert(a.clientId,a));for(this.Qs(),(c=this.storage.getItem(this.Us))&&(l=this.js(c))&&this.Ws(l),h=0,d=this.$s;h<d.length;h++)v=d[h],this.ks(v);return this.$s=[],this.window.addEventListener("pagehide",function(){return m.shutdown()}),this.started=!0,[2]}})})},e.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},e.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.Fs)},e.prototype.isActiveQueryTarget=function(t){var n=!1;return this.Fs.forEach(function(r,i){i.activeTargetIds.has(t)&&(n=!0)}),n},e.prototype.addPendingMutation=function(t){this.zs(t,"pending")},e.prototype.updateMutationState=function(t,n,r){this.zs(t,n,r),this.Hs(t)},e.prototype.addLocalQueryTarget=function(t){var n="not-current";if(this.isActiveQueryTarget(t)){var r=this.storage.getItem(Hy(this.persistenceKey,t));if(r){var i=Ky.Vs(t,r);i&&(n=i.state)}}return this.Js.Ds(t),this.Qs(),n},e.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},e.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},e.prototype.clearQueryState=function(t){this.removeItem(Hy(this.persistenceKey,t))},e.prototype.updateQueryState=function(t,n,r){this.Ys(t,n,r)},e.prototype.handleUserChange=function(t,n,r){var i=this;n.forEach(function(s){i.Hs(s)}),this.currentUser=t,r.forEach(function(s){i.addPendingMutation(s)})},e.prototype.setOnlineState=function(t){this.Xs(t)},e.prototype.notifyBundleLoaded=function(){this.Zs()},e.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},e.prototype.getItem=function(t){var n=this.storage.getItem(t);return Y("SharedClientState","READ",t,n),n},e.prototype.setItem=function(t,n){Y("SharedClientState","SET",t,n),this.storage.setItem(t,n)},e.prototype.removeItem=function(t){Y("SharedClientState","REMOVE",t),this.storage.removeItem(t)},e.prototype.ks=function(t){var n=this,r=t;if(r.storageArea===this.storage){if(Y("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Os)return void xt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return A(n,void 0,void 0,function(){var i,s,a,c,l,h;return C(this,function(d){if(this.started){if(r.key!==null){if(this.Ls.test(r.key)){if(r.newValue==null)return i=this.ti(r.key),[2,this.ei(i,null)];if(s=this.ni(r.key,r.newValue))return[2,this.ei(s.clientId,s)]}else if(this.Bs.test(r.key)){if(r.newValue!==null&&(a=this.si(r.key,r.newValue)))return[2,this.ii(a)]}else if(this.qs.test(r.key)){if(r.newValue!==null&&(c=this.ri(r.key,r.newValue)))return[2,this.oi(c)]}else if(r.key===this.Us){if(r.newValue!==null&&(l=this.js(r.newValue)))return[2,this.Ws(l)]}else if(r.key===this.Ms)(h=function(v){var m=vr.o;if(v!=null)try{var y=JSON.parse(v);_e(typeof y=="number"),m=y}catch(w){xt("SharedClientState","Failed to read sequence number from WebStorage",w)}return m}(r.newValue))!==vr.o&&this.sequenceNumberHandler(h);else if(r.key===this.Ks)return[2,this.syncEngine.ci()]}}else this.$s.push(r);return[2]})})})}},Object.defineProperty(e.prototype,"Js",{get:function(){return this.Fs.get(this.Ns)},enumerable:!1,configurable:!0}),e.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},e.prototype.zs=function(t,n,r){var i=new Pk(this.currentUser,t,n,r),s=Nk(this.persistenceKey,this.currentUser,t);this.setItem(s,i.Ss())},e.prototype.Hs=function(t){var n=Nk(this.persistenceKey,this.currentUser,t);this.removeItem(n)},e.prototype.Xs=function(t){var n={clientId:this.Ns,onlineState:t};this.storage.setItem(this.Us,JSON.stringify(n))},e.prototype.Ys=function(t,n,r){var i=Hy(this.persistenceKey,t),s=new Ky(t,n,r);this.setItem(i,s.Ss())},e.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},e.prototype.ti=function(t){var n=this.Ls.exec(t);return n?n[1]:null},e.prototype.ni=function(t,n){var r=this.ti(t);return Ok.Vs(r,n)},e.prototype.si=function(t,n){var r=this.Bs.exec(t),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return Pk.Vs(new un(s),i,n)},e.prototype.ri=function(t,n){var r=this.qs.exec(t),i=Number(r[1]);return Ky.Vs(i,n)},e.prototype.js=function(t){return O$.Vs(t)},e.prototype.ii=function(t){return A(this,void 0,void 0,function(){return C(this,function(n){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(Y("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},e.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},e.prototype.ei=function(t,n){var r=this,i=n?this.Fs.insert(t,n):this.Fs.remove(t),s=this.Gs(this.Fs),a=this.Gs(i),c=[],l=[];return a.forEach(function(h){s.has(h)||c.push(h)}),s.forEach(function(h){a.has(h)||l.push(h)}),this.syncEngine.hi(c,l).then(function(){r.Fs=i})},e.prototype.Ws=function(t){this.Fs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},e.prototype.Gs=function(t){var n=yv();return t.forEach(function(r,i){n=n.unionWith(i.activeTargetIds)}),n},e}(),Jx=function(){function e(){this.li=new mw,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return e.prototype.addPendingMutation=function(t){},e.prototype.updateMutationState=function(t,n,r){},e.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},e.prototype.updateQueryState=function(t,n,r){this.fi[t]=n},e.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},e.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},e.prototype.clearQueryState=function(t){delete this.fi[t]},e.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},e.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},e.prototype.start=function(){return this.li=new mw,Promise.resolve()},e.prototype.handleUserChange=function(t,n,r){},e.prototype.setOnlineState=function(t){},e.prototype.shutdown=function(){},e.prototype.writeSequenceNumber=function(t){},e.prototype.notifyBundleLoaded=function(){},e}(),x$=function(){function e(){}return e.prototype.di=function(t){},e.prototype.shutdown=function(){},e}(),xk=function(){function e(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return e.prototype.di=function(t){this.gi.push(t)},e.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},e.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},e.prototype._i=function(){Y("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,n=this.gi;t<n.length;t++)(0,n[t])(0)},e.prototype.yi=function(){Y("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,n=this.gi;t<n.length;t++)(0,n[t])(1)},e.yt=function(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0},e}(),D$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},L$=function(){function e(t){this.Ei=t.Ei,this.Ti=t.Ti}return e.prototype.Ii=function(t){this.Ai=t},e.prototype.Ri=function(t){this.bi=t},e.prototype.onMessage=function(t){this.vi=t},e.prototype.close=function(){this.Ti()},e.prototype.send=function(t){this.Ei(t)},e.prototype.Pi=function(){this.Ai()},e.prototype.Vi=function(t){this.bi(t)},e.prototype.Si=function(t){this.vi(t)},e}(),M$=function(e){function t(n){var r=this;return(r=e.call(this,n)||this).forceLongPolling=n.forceLongPolling,r.autoDetectLongPolling=n.autoDetectLongPolling,r.useFetchStreams=n.useFetchStreams,r}return te(t,e),t.prototype.Fi=function(n,r,i,s){return new Promise(function(a,c){var l=new dW;l.listenOnce(lW.COMPLETE,function(){try{switch(l.getLastErrorCode()){case By.NO_ERROR:var d=l.getResponseJson();Y("Connection","XHR received:",JSON.stringify(d)),a(d);break;case By.TIMEOUT:Y("Connection",'RPC "'+n+'" timed out'),c(new q(x.DEADLINE_EXCEEDED,"Request time out"));break;case By.HTTP_ERROR:var v=l.getStatus();if(Y("Connection",'RPC "'+n+'" failed with status:',v,"response text:",l.getResponseText()),v>0){var m=l.getResponseJson().error;if(m&&m.status&&m.message){var y=function(w){var E=w.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(E)>=0?E:x.UNKNOWN}(m.status);c(new q(y,m.message))}else c(new q(x.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new q(x.UNAVAILABLE,"Connection failed."));break;default:le()}}finally{Y("Connection",'RPC "'+n+'" completed.')}});var h=JSON.stringify(s);l.send(r,"POST",h,i,15)})},t.prototype.Oi=function(n,r){var i=[this.Di,"/","google.firestore.v1.Firestore","/",n,"/channel"],s=uW(),a=cW(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(c.xmlHttpFactory=new hW({})),this.ki(c.initMessageHeaders,r),ob()||m1()||QV()||YV()||XV()||sb()||(c.httpHeadersOverwriteParam="$httpHeaders");var l=i.join("");Y("Connection","Creating WebChannel: "+l,c);var h=s.createWebChannel(l,c),d=!1,v=!1,m=new L$({Ei:function(w){v?Y("Connection","Not sending because WebChannel is closed:",w):(d||(Y("Connection","Opening WebChannel transport."),h.open(),d=!0),Y("Connection","WebChannel sending:",w),h.send(w))},Ti:function(){return h.close()}}),y=function(w,E,T){w.listen(E,function(k){try{T(k)}catch(P){setTimeout(function(){throw P},0)}})};return y(h,Jh.EventType.OPEN,function(){v||Y("Connection","WebChannel transport opened.")}),y(h,Jh.EventType.CLOSE,function(){v||(v=!0,Y("Connection","WebChannel transport closed"),m.Vi())}),y(h,Jh.EventType.ERROR,function(w){v||(v=!0,Hl("Connection","WebChannel transport errored:",w),m.Vi(new q(x.UNAVAILABLE,"The operation could not be completed")))}),y(h,Jh.EventType.MESSAGE,function(w){var E;if(!v){var T=w.data[0];_e(!!T);var k=T,P=k.error||((E=k[0])===null||E===void 0?void 0:E.error);if(P){Y("Connection","WebChannel received error:",P);var O=P.status,H=function(U){var ie=Pt[U];if(ie!==void 0)return wx(ie)}(O),K=P.message;H===void 0&&(H=x.INTERNAL,K="Unknown error status: "+O+" with message "+P.message),v=!0,m.Vi(new q(H,K)),h.close()}else Y("Connection","WebChannel received:",T),m.Si(T)}}),y(a,fW.STAT_EVENT,function(w){w.stat===YA.PROXY?Y("Connection","Detected buffering proxy"):w.stat===YA.NOPROXY&&Y("Connection","Detected no buffering proxy")}),setTimeout(function(){m.Pi()},0),m},t}(function(){function e(t){this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.Di=n+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return e.prototype.Ni=function(t,n,r,i){var s=this.xi(t,n);Y("RestConnection","Sending: ",s,r);var a={};return this.ki(a,i),this.Fi(t,s,a,r).then(function(c){return Y("RestConnection","Received: ",c),c},function(c){throw Hl("RestConnection",t+" failed with error: ",c,"url: ",s,"request:",r),c})},e.prototype.$i=function(t,n,r,i){return this.Ni(t,n,r,i)},e.prototype.ki=function(t,n){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.10.1",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n)for(var r in n.authHeaders)n.authHeaders.hasOwnProperty(r)&&(t[r]=n.authHeaders[r])},e.prototype.xi=function(t,n){var r=D$[t];return this.Di+"/v1/"+n+":"+r},e}());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zx(){return typeof window<"u"?window:null}function wd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Of(e){return new BW(e,!0)}var D0=function(){function e(t,n,r,i,s){r===void 0&&(r=1e3),i===void 0&&(i=1.5),s===void 0&&(s=6e4),this.Se=t,this.timerId=n,this.Mi=r,this.Li=i,this.Bi=s,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return e.prototype.reset=function(){this.qi=0},e.prototype.Qi=function(){this.qi=this.Bi},e.prototype.ji=function(t){var n=this;this.cancel();var r=Math.floor(this.qi+this.Wi()),i=Math.max(0,Date.now()-this.Ki),s=Math.max(0,r-i);s>0&&Y("ExponentialBackoff","Backing off for "+s+" ms (base delay: "+this.qi+" ms, delay with jitter: "+r+" ms, last attempt: "+i+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,s,function(){return n.Ki=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},e.prototype.Gi=function(){this.Ui!==null&&(this.Ui.skipDelay(),this.Ui=null)},e.prototype.cancel=function(){this.Ui!==null&&(this.Ui.cancel(),this.Ui=null)},e.prototype.Wi=function(){return(Math.random()-.5)*this.qi},e}(),eD=function(){function e(t,n,r,i,s,a){this.Se=t,this.zi=r,this.Hi=i,this.Ji=s,this.listener=a,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new D0(t,n)}return e.prototype.tr=function(){return this.state===1||this.state===2||this.state===4},e.prototype.er=function(){return this.state===2},e.prototype.start=function(){this.state!==3?this.auth():this.nr()},e.prototype.stop=function(){return A(this,void 0,void 0,function(){return C(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},e.prototype.sr=function(){this.state=0,this.Zi.reset()},e.prototype.ir=function(){var t=this;this.er()&&this.Xi===null&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},e.prototype.cr=function(t){this.ur(),this.stream.send(t)},e.prototype.rr=function(){return A(this,void 0,void 0,function(){return C(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},e.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},e.prototype.close=function(t,n){return A(this,void 0,void 0,function(){return C(this,function(r){switch(r.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,t!==3?this.Zi.reset():n&&n.code===x.RESOURCE_EXHAUSTED?(xt(n.toString()),xt("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):n&&n.code===x.UNAUTHENTICATED&&this.Ji.invalidateToken(),this.stream!==null&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(n)];case 1:return r.sent(),[2]}})})},e.prototype.ar=function(){},e.prototype.auth=function(){var t=this;this.state=1;var n=this.hr(this.Yi),r=this.Yi;this.Ji.getToken().then(function(i){t.Yi===r&&t.lr(i)},function(i){n(function(){var s=new q(x.UNKNOWN,"Fetching auth token failed: "+i.message);return t.dr(s)})})},e.prototype.lr=function(t){var n=this,r=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){r(function(){return n.state=2,n.listener.Ii()})}),this.stream.Ri(function(i){r(function(){return n.dr(i)})}),this.stream.onMessage(function(i){r(function(){return n.onMessage(i)})})},e.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return A(t,void 0,void 0,function(){return C(this,function(n){return this.state=0,this.start(),[2]})})})},e.prototype.dr=function(t){return Y("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},e.prototype.hr=function(t){var n=this;return function(r){n.Se.enqueueAndForget(function(){return n.Yi===t?r():(Y("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},e}(),F$=function(e){function t(n,r,i,s,a){var c=this;return(c=e.call(this,n,"listen_stream_connection_backoff","listen_stream_idle",r,i,a)||this).R=s,c}return te(t,e),t.prototype.wr=function(n){return this.Hi.Oi("Listen",n)},t.prototype.onMessage=function(n){this.Zi.reset();var r=function(s,a){var c;if("targetChange"in a){a.targetChange;var l=function(T){return T==="NO_CHANGE"?0:T==="ADD"?1:T==="REMOVE"?2:T==="CURRENT"?3:T==="RESET"?4:le()}(a.targetChange.targetChangeType||"NO_CHANGE"),h=a.targetChange.targetIds||[],d=function(T,k){return T.I?(_e(k===void 0||typeof k=="string"),zn.fromBase64String(k||"")):(_e(k===void 0||k instanceof Uint8Array),zn.fromUint8Array(k||new Uint8Array))}(s,a.targetChange.resumeToken),v=(m=a.targetChange.cause)&&function(T){var k=T.code===void 0?x.UNKNOWN:wx(T.code);return new q(k,T.message||"")}(m);c=new Tx(l,h,d,v||null)}else if("documentChange"in a){a.documentChange,(l=a.documentChange).document,l.document.name,l.document.updateTime,h=bi(s,l.document.name),d=en(l.document.updateTime);var m=new dr({mapValue:{fields:l.document.fields}}),y=(v=mn.newFoundDocument(h,d,m),l.targetIds||[]),w=l.removedTargetIds||[];c=new _d(y,w,v.key,v)}else if("documentDelete"in a)a.documentDelete,(l=a.documentDelete).document,h=bi(s,l.document),d=l.readTime?en(l.readTime):xe.min(),m=mn.newNoDocument(h,d),v=l.removedTargetIds||[],c=new _d([],v,m.key,m);else if("documentRemove"in a)a.documentRemove,(l=a.documentRemove).document,h=bi(s,l.document),d=l.removedTargetIds||[],c=new _d([],d,h,null);else{if(!("filter"in a))return le();a.filter;var E=a.filter;E.targetId,l=E.count||0,h=new OW(l),d=E.targetId,c=new Ex(d,h)}return c}(this.R,n),i=function(s){if(!("targetChange"in s))return xe.min();var a=s.targetChange;return a.targetIds&&a.targetIds.length?xe.min():a.readTime?en(a.readTime):xe.min()}(n);return this.listener._r(r,i)},t.prototype.mr=function(n){var r={};r.database=Ql(this.R),r.addTarget=function(s,a){var c,l=a.target;return(c=tp(l)?{documents:Rx(s,l)}:{query:Nx(s,l)}).targetId=a.targetId,a.resumeToken.approximateByteSize()>0?c.resumeToken=Ix(s,a.resumeToken):a.snapshotVersion.compareTo(xe.min())>0&&(c.readTime=$l(s,a.snapshotVersion.toTimestamp())),c}(this.R,n);var i=function(s,a){var c=function(l,h){switch(h){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return le()}}(0,a.purpose);return c==null?null:{"goog-listen-tags":c}}(this.R,n);i&&(r.labels=i),this.cr(r)},t.prototype.yr=function(n){var r={};r.database=Ql(this.R),r.removeTarget=n,this.cr(r)},t}(eD),U$=function(e){function t(n,r,i,s,a){var c=this;return(c=e.call(this,n,"write_stream_connection_backoff","write_stream_idle",r,i,a)||this).R=s,c.gr=!1,c}return te(t,e),Object.defineProperty(t.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,e.prototype.start.call(this)},t.prototype.ar=function(){this.gr&&this.Er([])},t.prototype.wr=function(n){return this.Hi.Oi("Write",n)},t.prototype.onMessage=function(n){if(_e(!!n.streamToken),this.lastStreamToken=n.streamToken,this.gr){this.Zi.reset();var r=function(s,a){return s&&s.length>0?(_e(a!==void 0),s.map(function(c){return function(l,h){var d=l.updateTime?en(l.updateTime):en(h);return d.isEqual(xe.min())&&(d=en(h)),new RW(d,l.transformResults||[])}(c,a)})):[]}(n.writeResults,n.commitTime),i=en(n.commitTime);return this.listener.Tr(i,r)}return _e(!n.writeResults||n.writeResults.length===0),this.gr=!0,this.listener.Ir()},t.prototype.Ar=function(){var n={};n.database=Ql(this.R),this.cr(n)},t.prototype.Er=function(n){var r=this,i={streamToken:this.lastStreamToken,writes:n.map(function(s){return ip(r.R,s)})};this.cr(i)},t}(eD),j$=function(e){function t(n,r,i){var s=this;return(s=e.call(this)||this).credentials=n,s.Hi=r,s.R=i,s.Rr=!1,s}return te(t,e),t.prototype.br=function(){if(this.Rr)throw new q(x.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.Ni=function(n,r,i){var s=this;return this.br(),this.credentials.getToken().then(function(a){return s.Hi.Ni(n,r,i,a)}).catch(function(a){throw a.name==="FirebaseError"?(a.code===x.UNAUTHENTICATED&&s.credentials.invalidateToken(),a):new q(x.UNKNOWN,a.toString())})},t.prototype.$i=function(n,r,i){var s=this;return this.br(),this.credentials.getToken().then(function(a){return s.Hi.$i(n,r,i,a)}).catch(function(a){throw a.name==="FirebaseError"?(a.code===x.UNAUTHENTICATED&&s.credentials.invalidateToken(),a):new q(x.UNKNOWN,a.toString())})},t.prototype.terminate=function(){this.Rr=!0},t}(function(){}),V$=function(){function e(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return e.prototype.Sr=function(){var t=this;this.vr===0&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},e.prototype.Nr=function(t){this.state==="Online"?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.kr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},e.prototype.set=function(t){this.kr(),this.vr=0,t==="Online"&&(this.Vr=!1),this.Dr(t)},e.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},e.prototype.Cr=function(t){var n="Could not reach Cloud Firestore backend. "+t+`
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Vr?(xt(n),this.Vr=!1):Y("OnlineStateTracker",n)},e.prototype.kr=function(){this.Pr!==null&&(this.Pr.cancel(),this.Pr=null)},e}(),B$=function(e,t,n,r,i){var s=this;this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Fr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(a){n.enqueueAndForget(function(){return A(s,void 0,void 0,function(){return C(this,function(c){switch(c.label){case 0:return Xo(this)?(Y("RemoteStore","Restarting streams for network reachability change."),[4,function(l){return A(this,void 0,void 0,function(){var h;return C(this,function(d){switch(d.label){case 0:return(h=ee(l)).Or.add(4),[4,ic(h)];case 1:return d.sent(),h.Br.set("Unknown"),h.Or.delete(4),[4,xf(h)];case 2:return d.sent(),[2]}})})}(this)]):[3,2];case 1:c.sent(),c.label=2;case 2:return[2]}})})})}),this.Br=new V$(n,r)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xf(e){return A(this,void 0,void 0,function(){var t,n;return C(this,function(r){switch(r.label){case 0:if(!Xo(e))return[3,4];t=0,n=e.Mr,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}})})}function ic(e){return A(this,void 0,void 0,function(){var t,n;return C(this,function(r){switch(r.label){case 0:t=0,n=e.Mr,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}})})}function wv(e,t){var n=ee(e);n.$r.has(t.targetId)||(n.$r.set(t.targetId,t),F0(n)?M0(n):sc(n).er()&&L0(n,t))}function Yl(e,t){var n=ee(e),r=sc(n);n.$r.delete(t),r.er()&&tD(n,t),n.$r.size===0&&(r.er()?r.ir():Xo(n)&&n.Br.set("Unknown"))}function L0(e,t){e.qr.U(t.targetId),sc(e).mr(t)}function tD(e,t){e.qr.U(t),sc(e).yr(t)}function M0(e){e.qr=new UW({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},lt:function(t){return e.$r.get(t)||null}}),sc(e).start(),e.Br.Sr()}function F0(e){return Xo(e)&&!sc(e).tr()&&e.$r.size>0}function Xo(e){return ee(e).Or.size===0}function nD(e){e.qr=void 0}function q$(e){return A(this,void 0,void 0,function(){return C(this,function(t){return e.$r.forEach(function(n,r){L0(e,n)}),[2]})})}function H$(e,t){return A(this,void 0,void 0,function(){return C(this,function(n){return nD(e),F0(e)?(e.Br.Nr(t),M0(e)):e.Br.set("Unknown"),[2]})})}function K$(e,t,n){return A(this,void 0,void 0,function(){var r,i,s;return C(this,function(a){switch(a.label){case 0:if(e.Br.set("Online"),!(t instanceof Tx&&t.state===2&&t.cause))return[3,6];a.label=1;case 1:return a.trys.push([1,3,,5]),[4,function(c,l){return A(this,void 0,void 0,function(){var h,d,v,m;return C(this,function(y){switch(y.label){case 0:h=l.cause,d=0,v=l.targetIds,y.label=1;case 1:return d<v.length?(m=v[d],c.$r.has(m)?[4,c.remoteSyncer.rejectListen(m,h)]:[3,3]):[3,5];case 2:y.sent(),c.$r.delete(m),c.qr.removeTarget(m),y.label=3;case 3:y.label=4;case 4:return d++,[3,1];case 5:return[2]}})})}(e,t)];case 2:return a.sent(),[3,5];case 3:return r=a.sent(),Y("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),[4,up(e,r)];case 4:return a.sent(),[3,5];case 5:return[3,13];case 6:if(t instanceof _d?e.qr.X(t):t instanceof Ex?e.qr.rt(t):e.qr.et(t),n.isEqual(xe.min()))return[3,13];a.label=7;case 7:return a.trys.push([7,11,,13]),[4,Gx(e.localStore)];case 8:return i=a.sent(),n.compareTo(i)>=0?[4,function(c,l){var h=c.qr.ut(l);return h.targetChanges.forEach(function(d,v){if(d.resumeToken.approximateByteSize()>0){var m=c.$r.get(v);m&&c.$r.set(v,m.withResumeToken(d.resumeToken,l))}}),h.targetMismatches.forEach(function(d){var v=c.$r.get(d);if(v){c.$r.set(d,v.withResumeToken(zn.EMPTY_BYTE_STRING,v.snapshotVersion)),tD(c,d);var m=new _v(v.target,d,1,v.sequenceNumber);L0(c,m)}}),c.remoteSyncer.applyRemoteEvent(h)}(e,n)]:[3,10];case 9:a.sent(),a.label=10;case 10:return[3,13];case 11:return Y("RemoteStore","Failed to raise snapshot:",s=a.sent()),[4,up(e,s)];case 12:return a.sent(),[3,13];case 13:return[2]}})})}function up(e,t,n){return A(this,void 0,void 0,function(){var r=this;return C(this,function(i){switch(i.label){case 0:if(!ma(t))throw t;return e.Or.add(1),[4,ic(e)];case 1:return i.sent(),e.Br.set("Offline"),n||(n=function(){return Gx(e.localStore)}),e.asyncQueue.enqueueRetryable(function(){return A(r,void 0,void 0,function(){return C(this,function(s){switch(s.label){case 0:return Y("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return s.sent(),e.Or.delete(1),[4,xf(e)];case 2:return s.sent(),[2]}})})}),[2]}})})}function rD(e,t){return t().catch(function(n){return up(e,n,t)})}function oc(e){return A(this,void 0,void 0,function(){var t,n,r,i,s;return C(this,function(a){switch(a.label){case 0:t=ee(e),n=Wo(t),r=t.Fr.length>0?t.Fr[t.Fr.length-1].batchId:-1,a.label=1;case 1:if(!function(c){return Xo(c)&&c.Fr.length<10}(t))return[3,7];a.label=2;case 2:return a.trys.push([2,4,,6]),[4,w$(t.localStore,r)];case 3:return(i=a.sent())===null?(t.Fr.length===0&&n.ir(),[3,7]):(r=i.batchId,function(c,l){c.Fr.push(l);var h=Wo(c);h.er()&&h.pr&&h.Er(l.mutations)}(t,i),[3,6]);case 4:return s=a.sent(),[4,up(t,s)];case 5:return a.sent(),[3,6];case 6:return[3,1];case 7:return iD(t)&&oD(t),[2]}})})}function iD(e){return Xo(e)&&!Wo(e).tr()&&e.Fr.length>0}function oD(e){Wo(e).start()}function z$(e){return A(this,void 0,void 0,function(){return C(this,function(t){return Wo(e).Ar(),[2]})})}function W$(e){return A(this,void 0,void 0,function(){var t,n,r,i;return C(this,function(s){for(t=Wo(e),n=0,r=e.Fr;n<r.length;n++)i=r[n],t.Er(i.mutations);return[2]})})}function $$(e,t,n){return A(this,void 0,void 0,function(){var r,i;return C(this,function(s){switch(s.label){case 0:return r=e.Fr.shift(),i=t$.from(r,t,n),[4,rD(e,function(){return e.remoteSyncer.applySuccessfulWrite(i)})];case 1:return s.sent(),[4,oc(e)];case 2:return s.sent(),[2]}})})}function G$(e,t){return A(this,void 0,void 0,function(){return C(this,function(n){switch(n.label){case 0:return t&&Wo(e).pr?[4,function(r,i){return A(this,void 0,void 0,function(){var s,a;return C(this,function(c){switch(c.label){case 0:return _x(a=i.code)&&a!==x.ABORTED?(s=r.Fr.shift(),Wo(r).sr(),[4,rD(r,function(){return r.remoteSyncer.rejectFailedWrite(s.batchId,i)})]):[3,3];case 1:return c.sent(),[4,oc(r)];case 2:c.sent(),c.label=3;case 3:return[2]}})})}(e,t)]:[3,2];case 1:n.sent(),n.label=2;case 2:return iD(e)&&oD(e),[2]}})})}function yw(e,t){return A(this,void 0,void 0,function(){var n;return C(this,function(r){switch(r.label){case 0:return n=ee(e),t?(n.Or.delete(2),[4,xf(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return t?[3,4]:(n.Or.add(2),[4,ic(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function sc(e){var t=this;return e.Ur||(e.Ur=function(n,r,i){var s=ee(n);return s.br(),new F$(r,s.Hi,s.credentials,s.R,i)}(e.datastore,e.asyncQueue,{Ii:q$.bind(null,e),Ri:H$.bind(null,e),_r:K$.bind(null,e)}),e.Mr.push(function(n){return A(t,void 0,void 0,function(){return C(this,function(r){switch(r.label){case 0:return n?(e.Ur.sr(),F0(e)?M0(e):e.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,e.Ur.stop()];case 2:r.sent(),nD(e),r.label=3;case 3:return[2]}})})})),e.Ur}function Wo(e){var t=this;return e.Kr||(e.Kr=function(n,r,i){var s=ee(n);return s.br(),new U$(r,s.Hi,s.credentials,s.R,i)}(e.datastore,e.asyncQueue,{Ii:z$.bind(null,e),Ri:G$.bind(null,e),Ir:W$.bind(null,e),Tr:$$.bind(null,e)}),e.Mr.push(function(n){return A(t,void 0,void 0,function(){return C(this,function(r){switch(r.label){case 0:return n?(e.Kr.sr(),[4,oc(e)]):[3,2];case 1:return r.sent(),[3,4];case 2:return[4,e.Kr.stop()];case 3:r.sent(),e.Fr.length>0&&(Y("RemoteStore","Stopping write stream with "+e.Fr.length+" pending writes"),e.Fr=[]),r.label=4;case 4:return[2]}})})})),e.Kr}var Q$=function(){function e(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Rn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(a){})}return e.createAndSchedule=function(t,n,r,i,s){var a=new e(t,n,Date.now()+r,i,s);return a.start(r),a},e.prototype.start=function(t){var n=this;this.timerHandle=setTimeout(function(){return n.handleDelayElapsed()},t)},e.prototype.skipDelay=function(){return this.handleDelayElapsed()},e.prototype.cancel=function(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new q(x.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},e.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return t.timerHandle!==null?(t.clearTimeout(),t.op().then(function(n){return t.deferred.resolve(n)})):Promise.resolve()})},e.prototype.clearTimeout=function(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},e}();function ac(e,t){if(xt("AsyncQueue",t+": "+e),ma(e))return new q(x.UNAVAILABLE,t+": "+e);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sD=function(){function e(t){this.comparator=t?function(n,r){return t(n,r)||fe.comparator(n.key,r.key)}:function(n,r){return fe.comparator(n.key,r.key)},this.keyedMap=pw(),this.sortedSet=new Nn(this.comparator)}return e.emptySet=function(t){return new e(t.comparator)},e.prototype.has=function(t){return this.keyedMap.get(t)!=null},e.prototype.get=function(t){return this.keyedMap.get(t)},e.prototype.first=function(){return this.sortedSet.minKey()},e.prototype.last=function(){return this.sortedSet.maxKey()},e.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},e.prototype.indexOf=function(t){var n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1},Object.defineProperty(e.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),e.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(n,r){return t(n),!1})},e.prototype.add=function(t){var n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))},e.prototype.delete=function(t){var n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this},e.prototype.isEqual=function(t){if(!(t instanceof e)||this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0},e.prototype.toString=function(){var t=[];return this.forEach(function(n){t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`},e.prototype.copy=function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r},e}(),Dk=function(){function e(){this.Qr=new Nn(fe.comparator)}return e.prototype.track=function(t){var n=t.doc.key,r=this.Qr.get(n);r?t.type!==0&&r.type===3?this.Qr=this.Qr.insert(n,t):t.type===3&&r.type!==1?this.Qr=this.Qr.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.Qr=this.Qr.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.Qr=this.Qr.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.Qr=this.Qr.remove(n):t.type===1&&r.type===2?this.Qr=this.Qr.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.Qr=this.Qr.insert(n,{type:2,doc:t.doc}):le():this.Qr=this.Qr.insert(n,t)},e.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal(function(n,r){t.push(r)}),t},e}(),cp=function(){function e(t,n,r,i,s,a,c,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=l}return e.fromInitialDocuments=function(t,n,r,i){var s=[];return n.forEach(function(a){s.push({type:0,doc:a})}),new e(t,n,sD.emptySet(n),s,r,i,!0,!1)},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Af(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0},e}(),Y$=function(){this.Wr=void 0,this.listeners=[]},X$=function(){this.queries=new rc(function(e){return cx(e)},Af),this.onlineState="Unknown",this.Gr=new Set};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U0(e,t){return A(this,void 0,void 0,function(){var n,r,i,s,a,c,l;return C(this,function(h){switch(h.label){case 0:if(n=ee(e),r=t.query,i=!1,(s=n.queries.get(r))||(i=!0,s=new Y$),!i)return[3,4];h.label=1;case 1:return h.trys.push([1,3,,4]),a=s,[4,n.onListen(r)];case 2:return a.Wr=h.sent(),[3,4];case 3:return c=h.sent(),l=ac(c,"Initialization of query '"+hw(t.query)+"' failed"),[2,void t.onError(l)];case 4:return n.queries.set(r,s),s.listeners.push(t),t.zr(n.onlineState),s.Wr&&t.Hr(s.Wr)&&V0(n),[2]}})})}function j0(e,t){return A(this,void 0,void 0,function(){var n,r,i,s,a;return C(this,function(c){return n=ee(e),r=t.query,i=!1,(s=n.queries.get(r))&&(a=s.listeners.indexOf(t))>=0&&(s.listeners.splice(a,1),i=s.listeners.length===0),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function J$(e,t){for(var n=ee(e),r=!1,i=0,s=t;i<s.length;i++){var a=s[i],c=a.query,l=n.queries.get(c);if(l){for(var h=0,d=l.listeners;h<d.length;h++)d[h].Hr(a)&&(r=!0);l.Wr=a}}r&&V0(n)}function Z$(e,t,n){var r=ee(e),i=r.queries.get(t);if(i)for(var s=0,a=i.listeners;s<a.length;s++)a[s].onError(n);r.queries.delete(t)}function V0(e){e.Gr.forEach(function(t){t.next()})}var B0=function(){function e(t,n,r){this.query=t,this.Jr=n,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=r||{}}return e.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var n=[],r=0,i=t.docChanges;r<i.length;r++){var s=i[r];s.type!==3&&n.push(s)}t=new cp(t.query,t.docs,t.oldDocs,n,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var a=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),a=!0):this.eo(t,this.onlineState)&&(this.no(t),a=!0),this.Xr=t,a},e.prototype.onError=function(t){this.Jr.error(t)},e.prototype.zr=function(t){this.onlineState=t;var n=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),n=!0),n},e.prototype.eo=function(t,n){if(!t.fromCache)return!0;var r=n!=="Offline";return!(this.options.so&&r||t.docs.isEmpty()&&n!=="Offline")},e.prototype.Zr=function(t){if(t.docChanges.length>0)return!0;var n=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0},e.prototype.no=function(t){t=cp.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},e}(),eG=function(){function e(t,n){this.payload=t,this.byteLength=n}return e.prototype.io=function(){return"metadata"in this.payload},e}(),Lk=function(){function e(t){this.R=t}return e.prototype.qn=function(t){return bi(this.R,t)},e.prototype.Un=function(t){return t.metadata.exists?kx(this.R,t.document,!1):mn.newNoDocument(this.qn(t.metadata.name),this.Kn(t.metadata.readTime))},e.prototype.Kn=function(t){return en(t)},e}(),tG=function(){function e(t,n,r){this.ro=t,this.localStore=n,this.R=r,this.queries=[],this.documents=[],this.progress=aD(t)}return e.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var n=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++n):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++n),n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null},e.prototype.co=function(t){for(var n=new Map,r=new Lk(this.R),i=0,s=t;i<s.length;i++){var a=s[i];if(a.metadata.queries)for(var c=r.qn(a.metadata.name),l=0,h=a.metadata.queries;l<h.length;l++){var d=h[l],v=(n.get(d)||et()).add(c);n.set(d,v)}}return n},e.prototype.complete=function(){return A(this,void 0,void 0,function(){var t,n,r,i,s;return C(this,function(a){switch(a.label){case 0:return[4,E$(this.localStore,new Lk(this.R),this.documents,this.ro.id)];case 1:t=a.sent(),n=this.co(this.documents),r=0,i=this.queries,a.label=2;case 2:return r<i.length?(s=i[r],[4,T$(this.localStore,s,n.get(s.name))]):[3,5];case 3:a.sent(),a.label=4;case 4:return r++,[3,2];case 5:return[2,(this.progress.taskState="Success",new v$(Object.assign({},this.progress),t))]}})})},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aD(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var uD=function(e){this.key=e},cD=function(e){this.key=e},lD=function(){function e(t,n){this.query=t,this.uo=n,this.ao=null,this.current=!1,this.ho=et(),this.mutatedKeys=et(),this.lo=lx(t),this.fo=new sD(this.lo)}return Object.defineProperty(e.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),e.prototype._o=function(t,n){var r=this,i=n?n.mo:new Dk,s=n?n.fo:this.fo,a=n?n.mutatedKeys:this.mutatedKeys,c=s,l=!1,h=md(this.query)&&s.size===this.query.limit?s.last():null,d=rp(this.query)&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal(function(m,y){var w=s.get(m),E=kf(r.query,y)?y:null,T=!!w&&r.mutatedKeys.has(w.key),k=!!E&&(E.hasLocalMutations||r.mutatedKeys.has(E.key)&&E.hasCommittedMutations),P=!1;w&&E?w.data.isEqual(E.data)?T!==k&&(i.track({type:3,doc:E}),P=!0):r.yo(w,E)||(i.track({type:2,doc:E}),P=!0,(h&&r.lo(E,h)>0||d&&r.lo(E,d)<0)&&(l=!0)):!w&&E?(i.track({type:0,doc:E}),P=!0):w&&!E&&(i.track({type:1,doc:w}),P=!0,(h||d)&&(l=!0)),P&&(E?(c=c.add(E),a=k?a.add(m):a.delete(m)):(c=c.delete(m),a=a.delete(m)))}),md(this.query)||rp(this.query))for(;c.size>this.query.limit;){var v=md(this.query)?c.last():c.first();c=c.delete(v.key),a=a.delete(v.key),i.track({type:1,doc:v})}return{fo:c,mo:i,Nn:l,mutatedKeys:a}},e.prototype.yo=function(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations},e.prototype.applyChanges=function(t,n,r){var i=this,s=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var a=t.mo.jr();a.sort(function(d,v){return function(m,y){var w=function(E){switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return le()}};return w(m)-w(y)}(d.type,v.type)||i.lo(d.doc,v.doc)}),this.po(r);var c=n?this.Eo():[],l=this.ho.size===0&&this.current?1:0,h=l!==this.ao;return this.ao=l,a.length!==0||h?{snapshot:new cp(this.query,t.fo,s,a,t.mutatedKeys,l===0,h,!1),To:c}:{To:c}},e.prototype.zr=function(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({fo:this.fo,mo:new Dk,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},e.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},e.prototype.po=function(t){var n=this;t&&(t.addedDocuments.forEach(function(r){return n.uo=n.uo.add(r)}),t.modifiedDocuments.forEach(function(r){}),t.removedDocuments.forEach(function(r){return n.uo=n.uo.delete(r)}),this.current=t.current)},e.prototype.Eo=function(){var t=this;if(!this.current)return[];var n=this.ho;this.ho=et(),this.fo.forEach(function(i){t.Io(i.key)&&(t.ho=t.ho.add(i.key))});var r=[];return n.forEach(function(i){t.ho.has(i)||r.push(new cD(i))}),this.ho.forEach(function(i){n.has(i)||r.push(new uD(i))}),r},e.prototype.Ao=function(t){this.uo=t.Bn,this.ho=et();var n=this._o(t.documents);return this.applyChanges(n,!0)},e.prototype.Ro=function(){return cp.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,this.ao===0)},e}(),nG=function(e,t,n){this.query=e,this.targetId=t,this.view=n},rG=function(e){this.key=e,this.bo=!1},iG=function(){function e(t,n,r,i,s,a){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.vo={},this.Po=new rc(function(c){return cx(c)},Af),this.Vo=new Map,this.So=new Set,this.Do=new Nn(fe.comparator),this.Co=new Map,this.No=new x0,this.xo={},this.ko=new Map,this.Fo=sp.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(e.prototype,"isPrimaryClient",{get:function(){return this.$o===!0},enumerable:!1,configurable:!0}),e}();function oG(e,t){return A(this,void 0,void 0,function(){var n,r,i,s,a,c;return C(this,function(l){switch(l.label){case 0:return n=W0(e),(s=n.Po.get(t))?(r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Ro(),[3,4]):[3,1];case 1:return[4,Mu(n.localStore,Fr(t))];case 2:return a=l.sent(),c=n.sharedClientState.addLocalQueryTarget(a.targetId),r=a.targetId,[4,q0(n,t,r,c==="current")];case 3:i=l.sent(),n.isPrimaryClient&&wv(n.remoteStore,a),l.label=4;case 4:return[2,i]}})})}function q0(e,t,n,r){return A(this,void 0,void 0,function(){var i,s,a,c,l,h;return C(this,function(d){switch(d.label){case 0:return e.Oo=function(v,m,y){return function(w,E,T,k){return A(this,void 0,void 0,function(){var P,O,H;return C(this,function(K){switch(K.label){case 0:return P=E.view._o(T),P.Nn?[4,ap(w.localStore,E.query,!1).then(function(U){var ie=U.documents;return E.view._o(ie,P)})]:[3,2];case 1:P=K.sent(),K.label=2;case 2:return O=k&&k.targetChanges.get(E.targetId),H=E.view.applyChanges(P,w.isPrimaryClient,O),[2,(_w(w,E.targetId,H.To),H.snapshot)]}})})}(e,v,m,y)},[4,ap(e.localStore,t,!0)];case 1:return i=d.sent(),s=new lD(t,i.Bn),a=s._o(i.documents),c=S0.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline"),l=s.applyChanges(a,e.isPrimaryClient,c),_w(e,n,l.To),h=new nG(t,n,s),[2,(e.Po.set(t,h),e.Vo.has(n)?e.Vo.get(n).push(t):e.Vo.set(n,[t]),l.snapshot)]}})})}function sG(e,t){return A(this,void 0,void 0,function(){var n,r,i;return C(this,function(s){switch(s.label){case 0:return n=ee(e),r=n.Po.get(t),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(a){return!Af(a,t)})),void n.Po.delete(t))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Fu(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),Yl(n.remoteStore,r.targetId),Uu(n,r.targetId)}).catch(ya)]):[3,3];case 1:s.sent(),s.label=2;case 2:return[3,5];case 3:return Uu(n,r.targetId),[4,Fu(n.localStore,r.targetId,!0)];case 4:s.sent(),s.label=5;case 5:return[2]}})})}function aG(e,t,n){return A(this,void 0,void 0,function(){var r,i,s,a;return C(this,function(c){switch(c.label){case 0:r=$0(e),c.label=1;case 1:return c.trys.push([1,5,,6]),[4,function(l,h){var d,v=ee(l),m=nr.now(),y=h.reduce(function(w,E){return w.add(E.key)},et());return v.persistence.runTransaction("Locally write mutations","readwrite",function(w){return v.Mn.pn(w,y).next(function(E){d=E;for(var T=[],k=0,P=h;k<P.length;k++){var O=P[k],H=PW(O,d.get(O.key));H!=null&&T.push(new Yo(O.key,H,ox(H.value.mapValue),Tn.exists(!0)))}return v._n.addMutationBatch(w,m,T,h)})}).then(function(w){return w.applyToLocalDocumentSet(d),{batchId:w.batchId,changes:d}})}(r.localStore,t)];case 2:return i=c.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(l,h,d){var v=l.xo[l.currentUser.toKey()];v||(v=new Nn(Ue)),v=v.insert(h,d),l.xo[l.currentUser.toKey()]=v}(r,i.batchId,n),[4,io(r,i.changes)];case 3:return c.sent(),[4,oc(r.remoteStore)];case 4:return c.sent(),[3,6];case 5:return s=c.sent(),a=ac(s,"Failed to persist write"),n.reject(a),[3,6];case 6:return[2]}})})}function fD(e,t){return A(this,void 0,void 0,function(){var n,r;return C(this,function(i){switch(i.label){case 0:n=ee(e),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,_$(n.localStore,t)];case 2:return r=i.sent(),t.targetChanges.forEach(function(s,a){var c=n.Co.get(a);c&&(_e(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?c.bo=!0:s.modifiedDocuments.size>0?_e(c.bo):s.removedDocuments.size>0&&(_e(c.bo),c.bo=!1))}),[4,io(n,r,t)];case 3:return i.sent(),[3,6];case 4:return[4,ya(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function Mk(e,t,n){var r=ee(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){var i=[];r.Po.forEach(function(s,a){var c=a.view.zr(t);c.snapshot&&i.push(c.snapshot)}),function(s,a){var c=ee(s);c.onlineState=a;var l=!1;c.queries.forEach(function(h,d){for(var v=0,m=d.listeners;v<m.length;v++)m[v].zr(a)&&(l=!0)}),l&&V0(c)}(r.eventManager,t),i.length&&r.vo._r(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function uG(e,t,n){return A(this,void 0,void 0,function(){var r,i,s,a,c,l;return C(this,function(h){switch(h.label){case 0:return(r=ee(e)).sharedClientState.updateQueryState(t,"rejected",n),i=r.Co.get(t),(s=i&&i.key)?(a=(a=new Nn(fe.comparator)).insert(s,mn.newNoDocument(s,xe.min())),c=et().add(s),l=new I0(xe.min(),new Map,new Ht(Ue),a,c),[4,fD(r,l)]):[3,2];case 1:return h.sent(),r.Do=r.Do.remove(s),r.Co.delete(t),z0(r),[3,4];case 2:return[4,Fu(r.localStore,t,!1).then(function(){return Uu(r,t,n)}).catch(ya)];case 3:h.sent(),h.label=4;case 4:return[2]}})})}function cG(e,t){return A(this,void 0,void 0,function(){var n,r,i;return C(this,function(s){switch(s.label){case 0:n=ee(e),r=t.batch.batchId,s.label=1;case 1:return s.trys.push([1,4,,6]),[4,y$(n.localStore,t)];case 2:return i=s.sent(),K0(n,r,null),H0(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,io(n,i)];case 3:return s.sent(),[3,6];case 4:return[4,ya(s.sent())];case 5:return s.sent(),[3,6];case 6:return[2]}})})}function lG(e,t,n){return A(this,void 0,void 0,function(){var r,i;return C(this,function(s){switch(s.label){case 0:r=ee(e),s.label=1;case 1:return s.trys.push([1,4,,6]),[4,function(a,c){var l=ee(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",function(h){var d;return l._n.lookupMutationBatch(h,c).next(function(v){return _e(v!==null),d=v.keys(),l._n.removeMutationBatch(h,v)}).next(function(){return l._n.performConsistencyCheck(h)}).next(function(){return l.Mn.pn(h,d)})})}(r.localStore,t)];case 2:return i=s.sent(),K0(r,t,n),H0(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),[4,io(r,i)];case 3:return s.sent(),[3,6];case 4:return[4,ya(s.sent())];case 5:return s.sent(),[3,6];case 6:return[2]}})})}function fG(e,t){return A(this,void 0,void 0,function(){var n,r,i,s,a;return C(this,function(c){switch(c.label){case 0:Xo((n=ee(e)).remoteStore)||Y("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,function(l){var h=ee(l);return h.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(d){return h._n.getHighestUnacknowledgedBatchId(d)})}(n.localStore)];case 2:return(r=c.sent())===-1?[2,void t.resolve()]:((i=n.ko.get(r)||[]).push(t),n.ko.set(r,i),[3,4]);case 3:return s=c.sent(),a=ac(s,"Initialization of waitForPendingWrites() operation failed"),t.reject(a),[3,4];case 4:return[2]}})})}function H0(e,t){(e.ko.get(t)||[]).forEach(function(n){n.resolve()}),e.ko.delete(t)}function K0(e,t,n){var r=ee(e),i=r.xo[r.currentUser.toKey()];if(i){var s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.xo[r.currentUser.toKey()]=i}}function Uu(e,t,n){n===void 0&&(n=null),e.sharedClientState.removeLocalQueryTarget(t);for(var r=0,i=e.Vo.get(t);r<i.length;r++){var s=i[r];e.Po.delete(s),n&&e.vo.Mo(s,n)}e.Vo.delete(t),e.isPrimaryClient&&e.No.Zn(t).forEach(function(a){e.No.containsKey(a)||hD(e,a)})}function hD(e,t){e.So.delete(t.path.canonicalString());var n=e.Do.get(t);n!==null&&(Yl(e.remoteStore,n),e.Do=e.Do.remove(t),e.Co.delete(n),z0(e))}function _w(e,t,n){for(var r=0,i=n;r<i.length;r++){var s=i[r];s instanceof uD?(e.No.addReference(s.key,t),hG(e,s)):s instanceof cD?(Y("SyncEngine","Document no longer in limbo: "+s.key),e.No.removeReference(s.key,t),e.No.containsKey(s.key)||hD(e,s.key)):le()}}function hG(e,t){var n=t.key,r=n.path.canonicalString();e.Do.get(n)||e.So.has(r)||(Y("SyncEngine","New document in limbo: "+n),e.So.add(r),z0(e))}function z0(e){for(;e.So.size>0&&e.Do.size<e.maxConcurrentLimboResolutions;){var t=e.So.values().next().value;e.So.delete(t);var n=new fe(Ge.fromString(t)),r=e.Fo.next();e.Co.set(r,new rG(n)),e.Do=e.Do.insert(n,r),wv(e.remoteStore,new _v(Fr(nc(n.path)),r,2,vr.o))}}function io(e,t,n){return A(this,void 0,void 0,function(){var r,i,s,a;return C(this,function(c){switch(c.label){case 0:return r=ee(e),i=[],s=[],a=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(l,h){a.push(r.Oo(h,t,n).then(function(d){if(d){r.isPrimaryClient&&r.sharedClientState.updateQueryState(h.targetId,d.fromCache?"not-current":"current"),i.push(d);var v=g$.Pn(h.targetId,d);s.push(v)}}))}),[4,Promise.all(a)]);case 1:return c.sent(),r.vo._r(i),[4,function(l,h){return A(this,void 0,void 0,function(){var d,v,m,y,w,E,T,k,P;return C(this,function(O){switch(O.label){case 0:d=ee(l),O.label=1;case 1:return O.trys.push([1,3,,4]),[4,d.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(H){return W.forEach(h,function(K){return W.forEach(K.bn,function(U){return d.persistence.referenceDelegate.addReference(H,K.targetId,U)}).next(function(){return W.forEach(K.vn,function(U){return d.persistence.referenceDelegate.removeReference(H,K.targetId,U)})})})})];case 2:return O.sent(),[3,4];case 3:if(!ma(v=O.sent()))throw v;return Y("LocalStore","Failed to update sequence numbers: "+v),[3,4];case 4:for(m=0,y=h;m<y.length;m++)w=y[m],E=w.targetId,w.fromCache||(T=d.kn.get(E),k=T.snapshotVersion,P=T.withLastLimboFreeSnapshotVersion(k),d.kn=d.kn.insert(E,P));return[2]}})})}(r.localStore,s)];case 2:c.sent(),c.label=3;case 3:return[2]}})})}function dG(e,t){return A(this,void 0,void 0,function(){var n,r;return C(this,function(i){switch(i.label){case 0:return(n=ee(e)).currentUser.isEqual(t)?[3,3]:(Y("SyncEngine","User change. New user:",t.toKey()),[4,$x(n.localStore,t)]);case 1:return r=i.sent(),n.currentUser=t,function(s,a){s.ko.forEach(function(c){c.forEach(function(l){l.reject(new q(x.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.ko.clear()}(n),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),[4,io(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function pG(e,t){var n=ee(e),r=n.Co.get(t);if(r&&r.bo)return et().add(r.key);var i=et(),s=n.Vo.get(t);if(!s)return i;for(var a=0,c=s;a<c.length;a++){var l=c[a],h=n.Po.get(l);i=i.unionWith(h.view.wo)}return i}function vG(e,t){return A(this,void 0,void 0,function(){var n,r,i;return C(this,function(s){switch(s.label){case 0:return[4,ap((n=ee(e)).localStore,t.query,!0)];case 1:return r=s.sent(),i=t.view.Ao(r),[2,(n.isPrimaryClient&&_w(n,t.targetId,i.To),i)]}})})}function gG(e){return A(this,void 0,void 0,function(){var t;return C(this,function(n){return[2,Xx((t=ee(e)).localStore).then(function(r){return io(t,r)})]})})}function mG(e,t,n,r){return A(this,void 0,void 0,function(){var i,s;return C(this,function(a){switch(a.label){case 0:return[4,function(c,l){var h=ee(c),d=ee(h._n);return h.persistence.runTransaction("Lookup mutation documents","readonly",function(v){return d.jt(v,l).next(function(m){return m?h.Mn.pn(v,m):W.resolve(null)})})}((i=ee(e)).localStore,t)];case 1:return(s=a.sent())===null?[3,6]:n!=="pending"?[3,3]:[4,oc(i.remoteStore)];case 2:return a.sent(),[3,4];case 3:n==="acknowledged"||n==="rejected"?(K0(i,t,r||null),H0(i,t),function(c,l){ee(ee(c)._n).Gt(l)}(i.localStore,t)):le(),a.label=4;case 4:return[4,io(i,s)];case 5:return a.sent(),[3,7];case 6:Y("SyncEngine","Cannot apply mutation batch with id: "+t),a.label=7;case 7:return[2]}})})}function yG(e,t){return A(this,void 0,void 0,function(){var n,r,i,s,a,c,l,h;return C(this,function(d){switch(d.label){case 0:return W0(n=ee(e)),$0(n),t!==!0||n.$o===!0?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,Fk(n,r.toArray())]);case 1:return i=d.sent(),n.$o=!0,[4,yw(n.remoteStore,!0)];case 2:for(d.sent(),s=0,a=i;s<a.length;s++)c=a[s],wv(n.remoteStore,c);return[3,7];case 3:return t!==!1||n.$o===!1?[3,7]:(l=[],h=Promise.resolve(),n.Vo.forEach(function(v,m){n.sharedClientState.isLocalQueryTarget(m)?l.push(m):h=h.then(function(){return Uu(n,m),Fu(n.localStore,m,!0)}),Yl(n.remoteStore,m)}),[4,h]);case 4:return d.sent(),[4,Fk(n,l)];case 5:return d.sent(),function(v){var m=ee(v);m.Co.forEach(function(y,w){Yl(m.remoteStore,w)}),m.No.ts(),m.Co=new Map,m.Do=new Nn(fe.comparator)}(n),n.$o=!1,[4,yw(n.remoteStore,!1)];case 6:d.sent(),d.label=7;case 7:return[2]}})})}function Fk(e,t,n){return A(this,void 0,void 0,function(){var r,i,s,a,c,l,h,d,v,m,y,w,E,T;return C(this,function(k){switch(k.label){case 0:r=ee(e),i=[],s=[],a=0,c=t,k.label=1;case 1:return a<c.length?(l=c[a],h=void 0,(d=r.Vo.get(l))&&d.length!==0?[4,Mu(r.localStore,Fr(d[0]))]:[3,7]):[3,13];case 2:h=k.sent(),v=0,m=d,k.label=3;case 3:return v<m.length?(y=m[v],w=r.Po.get(y),[4,vG(r,w)]):[3,6];case 4:(E=k.sent()).snapshot&&s.push(E.snapshot),k.label=5;case 5:return v++,[3,3];case 6:return[3,11];case 7:return[4,Yx(r.localStore,l)];case 8:return T=k.sent(),[4,Mu(r.localStore,T)];case 9:return h=k.sent(),[4,q0(r,dD(T),l,!1)];case 10:k.sent(),k.label=11;case 11:i.push(h),k.label=12;case 12:return a++,[3,1];case 13:return[2,(r.vo._r(s),i)]}})})}function dD(e){return ax(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function _G(e){var t=ee(e);return ee(ee(t.localStore).persistence).fn()}function wG(e,t,n,r){return A(this,void 0,void 0,function(){var i,s,a;return C(this,function(c){switch(c.label){case 0:return(i=ee(e)).$o?(Y("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(t))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Xx(i.localStore)];case 3:return s=c.sent(),a=I0.createSynthesizedRemoteEventForCurrentChange(t,n==="current"),[4,io(i,s,a)];case 4:return c.sent(),[3,8];case 5:return[4,Fu(i.localStore,t,!0)];case 6:return c.sent(),Uu(i,t,r),[3,8];case 7:le(),c.label=8;case 8:return[2]}})})}function bG(e,t,n){return A(this,void 0,void 0,function(){var r,i,s,a,c,l,h,d,v,m;return C(this,function(y){switch(y.label){case 0:if(!(r=W0(e)).$o)return[3,10];i=0,s=t,y.label=1;case 1:return i<s.length?(a=s[i],r.Vo.has(a)?(Y("SyncEngine","Adding an already active target "+a),[3,5]):[4,Yx(r.localStore,a)]):[3,6];case 2:return c=y.sent(),[4,Mu(r.localStore,c)];case 3:return l=y.sent(),[4,q0(r,dD(c),l.targetId,!1)];case 4:y.sent(),wv(r.remoteStore,l),y.label=5;case 5:return i++,[3,1];case 6:h=function(w){return C(this,function(E){switch(E.label){case 0:return r.Vo.has(w)?[4,Fu(r.localStore,w,!1).then(function(){Yl(r.remoteStore,w),Uu(r,w)}).catch(ya)]:[3,2];case 1:E.sent(),E.label=2;case 2:return[2]}})},d=0,v=n,y.label=7;case 7:return d<v.length?(m=v[d],[5,h(m)]):[3,10];case 8:y.sent(),y.label=9;case 9:return d++,[3,7];case 10:return[2]}})})}function W0(e){var t=ee(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=fD.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=pG.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=uG.bind(null,t),t.vo._r=J$.bind(null,t.eventManager),t.vo.Mo=Z$.bind(null,t.eventManager),t}function $0(e){var t=ee(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=cG.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=lG.bind(null,t),t}function EG(e,t,n){var r=ee(e);(function(i,s,a){return A(this,void 0,void 0,function(){var c,l,h,d,v,m;return C(this,function(y){switch(y.label){case 0:return y.trys.push([0,14,,15]),[4,s.getMetadata()];case 1:return c=y.sent(),[4,function(w,E){var T=ee(w),k=en(E.createTime);return T.persistence.runTransaction("hasNewerBundle","readonly",function(P){return T.Ke.getBundleMetadata(P,E.id)}).then(function(P){return!!P&&P.createTime.compareTo(k)>=0})}(i.localStore,c)];case 2:return y.sent()?[4,s.close()]:[3,4];case 3:return[2,(y.sent(),void a._completeWith(function(w){return{taskState:"Success",documentsLoaded:w.totalDocuments,bytesLoaded:w.totalBytes,totalDocuments:w.totalDocuments,totalBytes:w.totalBytes}}(c)))];case 4:return a._updateProgress(aD(c)),l=new tG(c,i.localStore,s.R),[4,s.Lo()];case 5:h=y.sent(),y.label=6;case 6:return h?[4,l.oo(h)]:[3,10];case 7:return(d=y.sent())&&a._updateProgress(d),[4,s.Lo()];case 8:h=y.sent(),y.label=9;case 9:return[3,6];case 10:return[4,l.complete()];case 11:return v=y.sent(),[4,io(i,v.wn,void 0)];case 12:return y.sent(),[4,function(w,E){var T=ee(w);return T.persistence.runTransaction("Save bundle","readwrite",function(k){return T.Ke.saveBundleMetadata(k,E)})}(i.localStore,c)];case 13:return y.sent(),a._completeWith(v.progress),[3,15];case 14:return Hl("SyncEngine","Loading bundle failed with "+(m=y.sent())),a._failWith(m),[3,15];case 15:return[2]}})})})(r,t,n).then(function(){r.sharedClientState.notifyBundleLoaded()})}var pD=function(){function e(){this.synchronizeTabs=!1}return e.prototype.initialize=function(t){return A(this,void 0,void 0,function(){return C(this,function(n){switch(n.label){case 0:return this.R=Of(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return n.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}})})},e.prototype.Uo=function(t){return null},e.prototype.Ko=function(t){return Wx(this.persistence,new zx,t.initialUser,this.R)},e.prototype.qo=function(t){return new R$(P$.bs,this.R)},e.prototype.Bo=function(t){return new Jx},e.prototype.terminate=function(){return A(this,void 0,void 0,function(){return C(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},e}(),vD=function(e){function t(n,r,i){var s=this;return(s=e.call(this)||this).Qo=n,s.cacheSizeBytes=r,s.forceOwnership=i,s.synchronizeTabs=!1,s}return te(t,e),t.prototype.initialize=function(n){return A(this,void 0,void 0,function(){var r=this;return C(this,function(i){switch(i.label){case 0:return[4,e.prototype.initialize.call(this,n)];case 1:return i.sent(),[4,b$(this.localStore)];case 2:return i.sent(),[4,this.Qo.initialize(this,n)];case 3:return i.sent(),[4,$0(this.Qo.syncEngine)];case 4:return i.sent(),[4,oc(this.Qo.remoteStore)];case 5:return i.sent(),[4,this.persistence.He(function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()})];case 6:return i.sent(),[2]}})})},t.prototype.Ko=function(n){return Wx(this.persistence,new zx,n.initialUser,this.R)},t.prototype.Uo=function(n){var r=this.persistence.referenceDelegate.garbageCollector;return new u$(r,n.asyncQueue)},t.prototype.qo=function(n){var r=O0(n.databaseInfo.databaseId,n.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?gi.withCacheSize(this.cacheSizeBytes):gi.DEFAULT;return new p$(this.synchronizeTabs,r,n.clientId,i,n.asyncQueue,Zx(),wd(),this.R,this.sharedClientState,!!this.forceOwnership)},t.prototype.Bo=function(n){return new Jx},t}(pD),TG=function(e){function t(n,r){var i=this;return(i=e.call(this,n,r,!1)||this).Qo=n,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return te(t,e),t.prototype.initialize=function(n){return A(this,void 0,void 0,function(){var r,i=this;return C(this,function(s){switch(s.label){case 0:return[4,e.prototype.initialize.call(this,n)];case 1:return s.sent(),r=this.Qo.syncEngine,this.sharedClientState instanceof zy?(this.sharedClientState.syncEngine={ui:mG.bind(null,r),ai:wG.bind(null,r),hi:bG.bind(null,r),fn:_G.bind(null,r),ci:gG.bind(null,r)},[4,this.sharedClientState.start()]):[3,3];case 2:s.sent(),s.label=3;case 3:return[4,this.persistence.He(function(a){return A(i,void 0,void 0,function(){return C(this,function(c){switch(c.label){case 0:return[4,yG(this.Qo.syncEngine,a)];case 1:return c.sent(),this.gcScheduler&&(a&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):a||this.gcScheduler.stop()),[2]}})})})];case 4:return s.sent(),[2]}})})},t.prototype.Bo=function(n){var r=Zx();if(!zy.yt(r))throw new q(x.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var i=O0(n.databaseInfo.databaseId,n.databaseInfo.persistenceKey);return new zy(r,n.asyncQueue,i,n.clientId,n.initialUser)},t}(vD),ww=function(){function e(){}return e.prototype.initialize=function(t,n){return A(this,void 0,void 0,function(){var r=this;return C(this,function(i){switch(i.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(s){return Mk(r.syncEngine,s,1)},this.remoteStore.remoteSyncer.handleCredentialChange=dG.bind(null,this.syncEngine),[4,yw(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:i.sent(),i.label=2;case 2:return[2]}})})},e.prototype.createEventManager=function(t){return new X$},e.prototype.createDatastore=function(t){var n,r=Of(t.databaseInfo.databaseId),i=(n=t.databaseInfo,new M$(n));return function(s,a,c){return new j$(s,a,c)}(t.credentials,i,r)},e.prototype.createRemoteStore=function(t){var n,r,i,s,a,c=this;return n=this.localStore,r=this.datastore,i=t.asyncQueue,s=function(l){return Mk(c.syncEngine,l,0)},a=xk.yt()?new xk:new x$,new B$(n,r,i,s,a)},e.prototype.createSyncEngine=function(t,n){return function(r,i,s,a,c,l,h){var d=new iG(r,i,s,a,c,l);return h&&(d.$o=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)},e.prototype.terminate=function(){return function(t){return A(this,void 0,void 0,function(){var n;return C(this,function(r){switch(r.label){case 0:return n=ee(t),Y("RemoteStore","RemoteStore shutting down."),n.Or.add(5),[4,ic(n)];case 1:return r.sent(),n.Lr.shutdown(),n.Br.set("Unknown"),[2]}})})}(this.remoteStore)},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uk(e,t){t===void 0&&(t=10240);var n=0;return{read:function(){return A(this,void 0,void 0,function(){var r;return C(this,function(i){return n<e.byteLength?(r={value:e.slice(n,n+t),done:!1},[2,(n+=t,r)]):[2,{done:!0}]})})},cancel:function(){return A(this,void 0,void 0,function(){return C(this,function(r){return[2]})})},releaseLock:function(){},closed:Promise.reject("unimplemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bv=function(){function e(t){this.observer=t,this.muted=!1}return e.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},e.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},e.prototype.Wo=function(){this.muted=!0},e.prototype.jo=function(t,n){var r=this;this.muted||setTimeout(function(){r.muted||t(n)},0)},e}(),IG=function(){function e(t,n){var r=this;this.Go=t,this.R=n,this.metadata=new Rn,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(i){i&&i.io()?r.metadata.resolve(i.payload.metadata):r.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             `+JSON.stringify(i==null?void 0:i.payload)))},function(i){return r.metadata.reject(i)})}return e.prototype.close=function(){return this.Go.cancel()},e.prototype.getMetadata=function(){return A(this,void 0,void 0,function(){return C(this,function(t){return[2,this.metadata.promise]})})},e.prototype.Lo=function(){return A(this,void 0,void 0,function(){return C(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},e.prototype.Ho=function(){return A(this,void 0,void 0,function(){var t,n,r,i;return C(this,function(s){switch(s.label){case 0:return[4,this.Jo()];case 1:return(t=s.sent())===null?[2,null]:(n=this.zo.decode(t),r=Number(n),isNaN(r)&&this.Yo("length string ("+n+") is not valid number"),[4,this.Xo(r)]);case 2:return i=s.sent(),[2,new eG(JSON.parse(i),t.length+r)]}})})},e.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},e.prototype.Jo=function(){return A(this,void 0,void 0,function(){var t,n;return C(this,function(r){switch(r.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(r.sent())return[3,3];r.label=2;case 2:return[3,0];case 3:return this.buffer.length===0?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),n)])}})})},e.prototype.Xo=function(t){return A(this,void 0,void 0,function(){var n;return C(this,function(r){switch(r.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:r.sent()&&this.Yo("Reached the end of bundle when more is expected."),r.label=2;case 2:return[3,0];case 3:return n=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),n)]}})})},e.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},e.prototype.tc=function(){return A(this,void 0,void 0,function(){var t,n;return C(this,function(r){switch(r.label){case 0:return[4,this.Go.read()];case 1:return(t=r.sent()).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),[2,t.done]}})})},e}(),SG=function(){function e(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return e.prototype.lookup=function(t){return A(this,void 0,void 0,function(){var n,r=this;return C(this,function(i){switch(i.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new q(x.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(s,a){return A(this,void 0,void 0,function(){var c,l,h,d,v,m;return C(this,function(y){switch(y.label){case 0:return c=ee(s),l=Ql(c.R)+"/documents",h={documents:a.map(function(w){return Gl(c.R,w)})},[4,c.$i("BatchGetDocuments",l,h)];case 1:return d=y.sent(),v=new Map,d.forEach(function(w){var E=function(T,k){return"found"in k?function(P,O){_e(!!O.found),O.found.name,O.found.updateTime;var H=bi(P,O.found.name),K=en(O.found.updateTime),U=new dr({mapValue:{fields:O.found.fields}});return mn.newFoundDocument(H,K,U)}(T,k):"missing"in k?function(P,O){_e(!!O.missing),_e(!!O.readTime);var H=bi(P,O.missing),K=en(O.readTime);return mn.newNoDocument(H,K)}(T,k):le()}(c.R,w);v.set(E.key.toString(),E)}),m=[],[2,(a.forEach(function(w){var E=v.get(w.toString());_e(!!E),m.push(E)}),m)]}})})}(this.datastore,t)];case 1:return[2,((n=i.sent()).forEach(function(s){return r.recordVersion(s)}),n)]}})})},e.prototype.set=function(t,n){this.write(n.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},e.prototype.update=function(t,n){try{this.write(n.toMutation(t,this.preconditionForUpdate(t)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(t.toString())},e.prototype.delete=function(t){this.write(new Pf(t,this.precondition(t))),this.writtenDocs.add(t.toString())},e.prototype.commit=function(){return A(this,void 0,void 0,function(){var t,n=this;return C(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(i){t.delete(i.key.toString())}),t.forEach(function(i,s){var a=fe.fromPath(s);n.mutations.push(new T0(a,n.precondition(a)))}),[4,function(i,s){return A(this,void 0,void 0,function(){var a,c,l;return C(this,function(h){switch(h.label){case 0:return a=ee(i),c=Ql(a.R)+"/documents",l={writes:s.map(function(d){return ip(a.R,d)})},[4,a.Ni("Commit",c,l)];case 1:return h.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return r.sent(),this.committed=!0,[2]}})})},e.prototype.recordVersion=function(t){var n;if(t.isFoundDocument())n=t.version;else{if(!t.isNoDocument())throw le();n=xe.min()}var r=this.readVersions.get(t.key.toString());if(r){if(!n.isEqual(r))throw new q(x.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),n)},e.prototype.precondition=function(t){var n=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&n?Tn.updateTime(n):Tn.none()},e.prototype.preconditionForUpdate=function(t){var n=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&n){if(n.isEqual(xe.min()))throw new q(x.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Tn.updateTime(n)}return Tn.exists(!0)},e.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},e.prototype.ensureCommitNotCalled=function(){},e}(),CG=function(){function e(t,n,r,i){this.asyncQueue=t,this.datastore=n,this.updateFunction=r,this.deferred=i,this.ec=5,this.Zi=new D0(this.asyncQueue,"transaction_retry")}return e.prototype.run=function(){this.ec-=1,this.nc()},e.prototype.nc=function(){var t=this;this.Zi.ji(function(){return A(t,void 0,void 0,function(){var n,r,i=this;return C(this,function(s){return n=new SG(this.datastore),(r=this.sc(n))&&r.then(function(a){i.asyncQueue.enqueueAndForget(function(){return n.commit().then(function(){i.deferred.resolve(a)}).catch(function(c){i.ic(c)})})}).catch(function(a){i.ic(a)}),[2]})})})},e.prototype.sc=function(t){try{var n=this.updateFunction(t);return!ga(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}},e.prototype.ic=function(t){var n=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return n.nc(),Promise.resolve()})):this.deferred.reject(t)},e.prototype.rc=function(t){if(t.name==="FirebaseError"){var n=t.code;return n==="aborted"||n==="failed-precondition"||!_x(n)}return!1},e}(),AG=function(){function e(t,n,r){var i=this;this.credentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=un.UNAUTHENTICATED,this.clientId=ZO.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(n,function(s){return A(i,void 0,void 0,function(){return C(this,function(a){switch(a.label){case 0:return Y("FirestoreClient","Received user=",s.uid),[4,this.credentialListener(s)];case 1:return a.sent(),this.user=s,[2]}})})})}return e.prototype.getConfiguration=function(){return A(this,void 0,void 0,function(){return C(this,function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},e.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},e.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new q(x.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var n=new Rn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return A(t,void 0,void 0,function(){var r,i;return C(this,function(s){switch(s.label){case 0:return s.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:s.sent(),s.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:s.sent(),s.label=4;case 4:return this.credentials.removeChangeListener(),n.resolve(),[3,6];case 5:return r=s.sent(),i=ac(r,"Failed to shutdown persistence"),n.reject(i),[3,6];case 6:return[2]}})})}),n.promise},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gD(e,t){return A(this,void 0,void 0,function(){var n,r,i=this;return C(this,function(s){switch(s.label){case 0:return e.asyncQueue.verifyOperationInProgress(),Y("FirestoreClient","Initializing OfflineComponentProvider"),[4,e.getConfiguration()];case 1:return n=s.sent(),[4,t.initialize(n)];case 2:return s.sent(),r=n.initialUser,e.setCredentialChangeListener(function(a){return A(i,void 0,void 0,function(){return C(this,function(c){switch(c.label){case 0:return r.isEqual(a)?[3,2]:[4,$x(t.localStore,a)];case 1:c.sent(),r=a,c.label=2;case 2:return[2]}})})}),t.persistence.setDatabaseDeletedListener(function(){return e.terminate()}),e.offlineComponents=t,[2]}})})}function mD(e,t){return A(this,void 0,void 0,function(){var n,r;return C(this,function(i){switch(i.label){case 0:return e.asyncQueue.verifyOperationInProgress(),[4,G0(e)];case 1:return n=i.sent(),Y("FirestoreClient","Initializing OnlineComponentProvider"),[4,e.getConfiguration()];case 2:return r=i.sent(),[4,t.initialize(n,r)];case 3:return i.sent(),e.setCredentialChangeListener(function(s){return function(a,c){return A(this,void 0,void 0,function(){var l,h;return C(this,function(d){switch(d.label){case 0:return(l=ee(a)).asyncQueue.verifyOperationInProgress(),Y("RemoteStore","RemoteStore received new credentials"),h=Xo(l),l.Or.add(3),[4,ic(l)];case 1:return d.sent(),h&&l.Br.set("Unknown"),[4,l.remoteSyncer.handleCredentialChange(c)];case 2:return d.sent(),l.Or.delete(3),[4,xf(l)];case 3:return d.sent(),[2]}})})}(t.remoteStore,s)}),e.onlineComponents=t,[2]}})})}function G0(e){return A(this,void 0,void 0,function(){return C(this,function(t){switch(t.label){case 0:return e.offlineComponents?[3,2]:(Y("FirestoreClient","Using default OfflineComponentProvider"),[4,gD(e,new pD)]);case 1:t.sent(),t.label=2;case 2:return[2,e.offlineComponents]}})})}function Ev(e){return A(this,void 0,void 0,function(){return C(this,function(t){switch(t.label){case 0:return e.onlineComponents?[3,2]:(Y("FirestoreClient","Using default OnlineComponentProvider"),[4,mD(e,new ww)]);case 1:t.sent(),t.label=2;case 2:return[2,e.onlineComponents]}})})}function jk(e){return G0(e).then(function(t){return t.persistence})}function Q0(e){return G0(e).then(function(t){return t.localStore})}function Vk(e){return Ev(e).then(function(t){return t.remoteStore})}function Y0(e){return Ev(e).then(function(t){return t.syncEngine})}function ju(e){return A(this,void 0,void 0,function(){var t,n;return C(this,function(r){switch(r.label){case 0:return[4,Ev(e)];case 1:return t=r.sent(),[2,((n=t.eventManager).onListen=oG.bind(null,t.syncEngine),n.onUnlisten=sG.bind(null,t.syncEngine),n)]}})})}function Bk(e,t,n){var r=this;n===void 0&&(n={});var i=new Rn;return e.asyncQueue.enqueueAndForget(function(){return A(r,void 0,void 0,function(){var s;return C(this,function(a){switch(a.label){case 0:return s=function(c,l,h,d,v){var m=new bv({next:function(w){l.enqueueAndForget(function(){return j0(c,y)});var E=w.docs.has(h);!E&&w.fromCache?v.reject(new q(x.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&w.fromCache&&d&&d.source==="server"?v.reject(new q(x.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(w)},error:function(w){return v.reject(w)}}),y=new B0(nc(h.path),m,{includeMetadataChanges:!0,so:!0});return U0(c,y)},[4,ju(e)];case 1:return[2,s.apply(void 0,[a.sent(),e.asyncQueue,t,n,i])]}})})}),i.promise}function qk(e,t,n){var r=this;n===void 0&&(n={});var i=new Rn;return e.asyncQueue.enqueueAndForget(function(){return A(r,void 0,void 0,function(){var s;return C(this,function(a){switch(a.label){case 0:return s=function(c,l,h,d,v){var m=new bv({next:function(w){l.enqueueAndForget(function(){return j0(c,y)}),w.fromCache&&d.source==="server"?v.reject(new q(x.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(w)},error:function(w){return v.reject(w)}}),y=new B0(h,m,{includeMetadataChanges:!0,so:!0});return U0(c,y)},[4,ju(e)];case 1:return[2,s.apply(void 0,[a.sent(),e.asyncQueue,t,n,i])]}})})}),i.promise}var kG=function(e,t,n,r,i,s,a,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.useFetchStreams=c},lp=function(){function e(t,n){this.projectId=t,this.database=n||"(default)"}return Object.defineProperty(e.prototype,"isDefaultDatabase",{get:function(){return this.database==="(default)"},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database},e}(),Hk=new Map,yD=function(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+e},Kk=function(){function e(){this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(null)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(t,n){this.changeListener=n,t.enqueueRetryable(function(){return n(un.UNAUTHENTICATED)})},e.prototype.removeChangeListener=function(){this.changeListener=null},e}(),RG=function(){function e(t){this.token=t,this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(this.token)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(t,n){var r=this;this.changeListener=n,t.enqueueRetryable(function(){return n(r.token.user)})},e.prototype.removeChangeListener=function(){this.changeListener=null},e}(),NG=function(){function e(t){var n=this;this.currentUser=un.UNAUTHENTICATED,this.oc=new Rn,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){n.cc++,n.currentUser=n.ac(),n.oc.resolve(),n.changeListener&&n.asyncQueue.enqueueRetryable(function(){return n.changeListener(n.currentUser)})};var r=function(i){Y("FirebaseCredentialsProvider","Auth detected"),n.auth=i,n.auth.addAuthTokenListener(n.uc)};t.onInit(function(i){return r(i)}),setTimeout(function(){if(!n.auth){var i=t.getImmediate({optional:!0});i?r(i):(Y("FirebaseCredentialsProvider","Auth not yet detected"),n.oc.resolve())}},0)}return e.prototype.getToken=function(){var t=this,n=this.cc,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(function(i){return t.cc!==n?(Y("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):i?(_e(typeof i.accessToken=="string"),new yD(i.accessToken,t.currentUser)):null}):Promise.resolve(null)},e.prototype.invalidateToken=function(){this.forceRefresh=!0},e.prototype.setChangeListener=function(t,n){var r=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable(function(){return A(r,void 0,void 0,function(){return C(this,function(i){switch(i.label){case 0:return[4,this.oc.promise];case 1:return i.sent(),[4,n(this.currentUser)];case 2:return i.sent(),this.changeListener=n,[2]}})})})},e.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},e.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return _e(t===null||typeof t=="string"),new un(t)},e}(),PG=function(){function e(t,n,r){this.hc=t,this.lc=n,this.fc=r,this.type="FirstParty",this.user=un.FIRST_PARTY}return Object.defineProperty(e.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},n=this.hc.auth.getAuthHeaderValueForFirstParty([]);return n&&(t.Authorization=n),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),e}(),OG=function(){function e(t,n,r){this.hc=t,this.lc=n,this.fc=r}return e.prototype.getToken=function(){return Promise.resolve(new PG(this.hc,this.lc,this.fc))},e.prototype.setChangeListener=function(t,n){t.enqueueRetryable(function(){return n(un.FIRST_PARTY)})},e.prototype.removeChangeListener=function(){},e.prototype.invalidateToken=function(){},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X0(e,t,n){if(!n)throw new q(x.INVALID_ARGUMENT,"Function "+e+"() cannot be called with an empty "+t+".")}function J0(e,t){if(t===void 0)return{merge:!1};if(t.mergeFields!==void 0&&t.merge!==void 0)throw new q(x.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');return t}function _D(e,t,n,r){if(t===!0&&r===!0)throw new q(x.INVALID_ARGUMENT,e+" and "+n+" cannot be used together.")}function zk(e){if(!fe.isDocumentKey(e))throw new q(x.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e+" has "+e.length+".")}function Wk(e){if(fe.isDocumentKey(e))throw new q(x.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e+" has "+e.length+".")}function Tv(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";var t=function(n){if(n.constructor){var r=/function\s+([^\s(]+)\s*\(/.exec(n.constructor.toString());if(r&&r.length>1)return r[1]}return null}(e);return t?"a custom "+t+" object":"an object"}return typeof e=="function"?"a function":le()}function We(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new q(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Tv(e);throw new q(x.INVALID_ARGUMENT,"Expected type '"+t.name+"', but it was: "+n)}return e}function $k(e,t){if(t<=0)throw new q(x.INVALID_ARGUMENT,"Function "+e+"() requires a positive number, but it was: "+t+".")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gk=function(){function e(t){var n;if(t.host===void 0){if(t.ssl!==void 0)throw new q(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new q(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,_D("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return e.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},e}(),Xl=function(){function e(t,n){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Gk({}),this._settingsFrozen=!1,t instanceof lp?(this._databaseId=t,this._credentials=new Kk):(this._app=t,this._databaseId=function(r){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new q(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new lp(r.options.projectId)}(t),this._credentials=new NG(n))}return Object.defineProperty(e.prototype,"app",{get:function(){if(!this._app)throw new q(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_terminated",{get:function(){return this._terminateTask!==void 0},enumerable:!1,configurable:!0}),e.prototype._setSettings=function(t){if(this._settingsFrozen)throw new q(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Gk(t),t.credentials!==void 0&&(this._credentials=function(n){if(!n)return new Kk;switch(n.type){case"gapi":var r=n.client;return _e(!(typeof r!="object"||r===null||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new OG(r,n.sessionIndex||"0",n.iamToken||null);case"provider":return n.client;default:throw new q(x.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},e.prototype._getSettings=function(){return this._settings},e.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},e.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},e.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},e.prototype._terminate=function(){return t=this,(n=Hk.get(t))&&(Y("ComponentProvider","Removing Datastore"),Hk.delete(t),n.terminate()),Promise.resolve();var t,n},e}(),_t=function(){function e(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}return Object.defineProperty(e.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Mo(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._key)},e}(),rr=function(){function e(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}return e.prototype.withConverter=function(t){return new e(this.firestore,t,this._query)},e}(),Mo=function(e){function t(n,r,i){var s=this;return(s=e.call(this,n,r,nc(i))||this)._path=i,s.type="collection",s}return te(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var n=this._path.popLast();return n.isEmpty()?null:new _t(this.firestore,null,new fe(n))},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(n){return new t(this.firestore,n,this._path)},t}(rr);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wD(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(e=Re(e),X0("collection","path",t),e instanceof Xl)return Wk(n=Ge.fromString.apply(Ge,Ne([t],r))),new Mo(e,null,n);if(!(e instanceof _t||e instanceof Mo))throw new q(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Wk(n=Ge.fromString.apply(Ge,Ne([e.path],r)).child(Ge.fromString(t))),new Mo(e.firestore,null,n)}function bd(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(e=Re(e),arguments.length===1&&(t=ZO.u()),X0("doc","path",t),e instanceof Xl)return zk(n=Ge.fromString.apply(Ge,Ne([t],r))),new _t(e,null,new fe(n));if(!(e instanceof _t||e instanceof Mo))throw new q(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return zk(n=e._path.child(Ge.fromString.apply(Ge,Ne([t],r)))),new _t(e.firestore,e instanceof Mo?e.converter:null,new fe(n))}function bD(e,t){return e=Re(e),t=Re(t),(e instanceof _t||e instanceof Mo)&&(t instanceof _t||t instanceof Mo)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function ED(e,t){return e=Re(e),t=Re(t),e instanceof rr&&t instanceof rr&&e.firestore===t.firestore&&Af(e._query,t._query)&&e.converter===t.converter}var xG=function(){function e(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new D0(this,"async_queue_retry"),this.Ic=function(){var r=wd();r&&Y("AsyncQueue","Visibility state changed to "+r.visibilityState),t.Zi.Gi()};var n=wd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(e.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),e.prototype.enqueueAndForget=function(t){this.enqueue(t)},e.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},e.prototype.enterRestrictedMode=function(t){if(!this._c){this._c=!0,this.Ec=t||!1;var n=wd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Ic)}},e.prototype.enqueue=function(t){var n=this;if(this.Ac(),this._c)return new Promise(function(){});var r=new Rn;return this.Rc(function(){return n._c&&n.Ec?Promise.resolve():(t().then(r.resolve,r.reject),r.promise)}).then(function(){return r.promise})},e.prototype.enqueueRetryable=function(t){var n=this;this.enqueueAndForget(function(){return n.wc.push(t),n.bc()})},e.prototype.bc=function(){return A(this,void 0,void 0,function(){var t,n=this;return C(this,function(r){switch(r.label){case 0:if(this.wc.length===0)return[3,5];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return r.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!ma(t=r.sent()))throw t;return Y("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji(function(){return n.bc()}),r.label=5;case 5:return[2]}})})},e.prototype.Rc=function(t){var n=this,r=this.dc.then(function(){return n.gc=!0,t().catch(function(i){throw n.yc=i,n.gc=!1,xt("INTERNAL UNHANDLED ERROR: ",function(s){var a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(i)),i}).then(function(i){return n.gc=!1,i})});return this.dc=r,r},e.prototype.enqueueAfterDelay=function(t,n,r){var i=this;this.Ac(),this.Tc.indexOf(t)>-1&&(n=0);var s=Q$.createAndSchedule(this,t,n,r,function(a){return i.vc(a)});return this.mc.push(s),s},e.prototype.Ac=function(){this.yc&&le()},e.prototype.verifyOperationInProgress=function(){},e.prototype.Pc=function(){return A(this,void 0,void 0,function(){var t;return C(this,function(n){switch(n.label){case 0:return[4,t=this.dc];case 1:n.sent(),n.label=2;case 2:if(t!==this.dc)return[3,0];n.label=3;case 3:return[2]}})})},e.prototype.Vc=function(t){for(var n=0,r=this.mc;n<r.length;n++)if(r[n].timerId===t)return!0;return!1},e.prototype.Sc=function(t){var n=this;return this.Pc().then(function(){n.mc.sort(function(a,c){return a.targetTimeMs-c.targetTimeMs});for(var r=0,i=n.mc;r<i.length;r++){var s=i[r];if(s.skipDelay(),t!=="all"&&s.timerId===t)break}return n.Pc()})},e.prototype.Dc=function(t){this.Tc.push(t)},e.prototype.vc=function(t){var n=this.mc.indexOf(t);this.mc.splice(n,1)},e}();function Vu(e){return function(t,n){if(typeof t!="object"||t===null)return!1;for(var r=t,i=0,s=["next","error","complete"];i<s.length;i++){var a=s[i];if(a in r&&typeof r[a]=="function")return!0}return!1}(e)}var DG=function(){function e(){this._progressObserver={},this._taskCompletionResolver=new Rn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return e.prototype.onProgress=function(t,n,r){this._progressObserver={next:t,error:n,complete:r}},e.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},e.prototype.then=function(t,n){return this._taskCompletionResolver.promise.then(t,n)},e.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},e.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},e.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)},e}(),LG=-1,Rt=function(e){function t(n,r){var i=this;return(i=e.call(this,n,r)||this).type="firestore",i._queue=new xG,i._persistenceKey="name"in n?n.name:"[DEFAULT]",i}return te(t,e),t.prototype._terminate=function(){return this._firestoreClient||TD(this),this._firestoreClient.terminate()},t}(Xl);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(e){return e._firestoreClient||TD(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function TD(e){var t,n=e._freezeSettings(),r=function(i,s,a,c){return new kG(i,s,a,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new AG(e._credentials,e._queue,r)}function Qk(e,t,n){var r=this,i=new Rn;return e.asyncQueue.enqueue(function(){return A(r,void 0,void 0,function(){var s;return C(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),[4,gD(e,n)];case 1:return a.sent(),[4,mD(e,t)];case 2:return a.sent(),i.resolve(),[3,4];case 3:if(!function(c){return c.name==="FirebaseError"?c.code===x.FAILED_PRECONDITION||c.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||c.code===22||c.code===20||c.code===11}(s=a.sent()))throw s;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+s),i.reject(s),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function Yk(e){if(e._initialized||e._terminated)throw new q(x.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ei=function(){function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=0;r<t.length;++r)if(t[r].length===0)throw new q(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ri(t)}return e.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},e}(),oa=function(){function e(t){this._byteString=t}return e.fromBase64String=function(t){try{return new e(zn.fromBase64String(t))}catch(n){throw new q(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}},e.fromUint8Array=function(t){return new e(zn.fromUint8Array(t))},e.prototype.toBase64=function(){return this._byteString.toBase64()},e.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},e.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},e.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},e}(),_a=function(e){this._methodName=e},Iv=function(){function e(t,n){if(!isFinite(t)||t<-90||t>90)throw new q(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new q(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return Object.defineProperty(e.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},e.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},e.prototype._compareTo=function(t){return Ue(this._lat,t._lat)||Ue(this._long,t._long)},e}(),MG=/^__.*__$/,FG=function(){function e(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}return e.prototype.toMutation=function(t,n){return this.fieldMask!==null?new Yo(t,this.data,this.fieldMask,n,this.fieldTransforms):new Nf(t,this.data,n,this.fieldTransforms)},e}(),ID=function(){function e(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}return e.prototype.toMutation=function(t,n){return new Yo(t,this.data,this.fieldMask,n,this.fieldTransforms)},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SD(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw le()}}var CD=function(){function e(t,n,r,i,s,a){this.settings=t,this.databaseId=n,this.R=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Cc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}return Object.defineProperty(e.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),e.prototype.xc=function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},e.prototype.kc=function(t){var n,r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.xc({path:r,Fc:!1});return i.$c(t),i},e.prototype.Oc=function(t){var n,r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.xc({path:r,Fc:!1});return i.Cc(),i},e.prototype.Mc=function(t){return this.xc({path:void 0,Fc:!0})},e.prototype.Lc=function(t){return fp(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},e.prototype.contains=function(t){return this.fieldMask.find(function(n){return t.isPrefixOf(n)})!==void 0||this.fieldTransforms.find(function(n){return t.isPrefixOf(n.field)})!==void 0},e.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},e.prototype.$c=function(t){if(t.length===0)throw this.Lc("Document fields must not be empty");if(SD(this.Nc)&&MG.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},e}(),UG=function(){function e(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.R=r||Of(t)}return e.prototype.Uc=function(t,n,r,i){return i===void 0&&(i=!1),new CD({Nc:t,methodName:n,qc:r,path:ri.emptyPath(),Fc:!1,Bc:i},this.databaseId,this.R,this.ignoreUndefinedProperties)},e}();function wa(e){var t=e._freezeSettings(),n=Of(e._databaseId);return new UG(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Sv(e,t,n,r,i,s){s===void 0&&(s={});var a=e.Uc(s.merge||s.mergeFields?2:0,t,n,i);nE("Data must be an object, but it was:",a,r);var c,l,h=RD(r,a);if(s.merge)c=new Su(a.fieldMask),l=a.fieldTransforms;else if(s.mergeFields){for(var d=[],v=0,m=s.mergeFields;v<m.length;v++){var y=bw(t,m[v],n);if(!a.contains(y))throw new q(x.INVALID_ARGUMENT,"Field '"+y+"' is specified in your field mask but missing from your input data.");PD(d,y)||d.push(y)}c=new Su(d),l=a.fieldTransforms.filter(function(w){return c.covers(w.field)})}else c=null,l=a.fieldTransforms;return new FG(new dr(h),c,l)}var Z0=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return te(t,e),t.prototype._toFieldTransform=function(n){if(n.Nc!==2)throw n.Nc===1?n.Lc(this._methodName+"() can only appear at the top level of your update data"):n.Lc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return n.fieldMask.push(n.path),null},t.prototype.isEqual=function(n){return n instanceof t},t}(_a);function AD(e,t,n){return new CD({Nc:3,qc:t.settings.qc,methodName:e._methodName,Fc:n},t.databaseId,t.R,t.ignoreUndefinedProperties)}var jG=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return te(t,e),t.prototype._toFieldTransform=function(n){return new Rf(n.path,new Ru)},t.prototype.isEqual=function(n){return n instanceof t},t}(_a),VG=function(e){function t(n,r){var i=this;return(i=e.call(this,n)||this).Kc=r,i}return te(t,e),t.prototype._toFieldTransform=function(n){var r=AD(this,n,!0),i=this.Kc.map(function(a){return ba(a,r)}),s=new ra(i);return new Rf(n.path,s)},t.prototype.isEqual=function(n){return this===n},t}(_a),BG=function(e){function t(n,r){var i=this;return(i=e.call(this,n)||this).Kc=r,i}return te(t,e),t.prototype._toFieldTransform=function(n){var r=AD(this,n,!0),i=this.Kc.map(function(a){return ba(a,r)}),s=new ia(i);return new Rf(n.path,s)},t.prototype.isEqual=function(n){return this===n},t}(_a),qG=function(e){function t(n,r){var i=this;return(i=e.call(this,n)||this).Qc=r,i}return te(t,e),t.prototype._toFieldTransform=function(n){var r=new Nu(n.R,dx(n.R,this.Qc));return new Rf(n.path,r)},t.prototype.isEqual=function(n){return this===n},t}(_a);function eE(e,t,n,r){var i=e.Uc(1,t,n);nE("Data must be an object, but it was:",i,r);var s=[],a=dr.empty();va(r,function(l,h){var d=rE(t,l,n);h=Re(h);var v=i.Oc(d);if(h instanceof Z0)s.push(d);else{var m=ba(h,v);m!=null&&(s.push(d),a.set(d,m))}});var c=new Su(s);return new ID(a,c,i.fieldTransforms)}function tE(e,t,n,r,i,s){var a=e.Uc(1,t,n),c=[bw(t,r,n)],l=[i];if(s.length%2!=0)throw new q(x.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var h=0;h<s.length;h+=2)c.push(bw(t,s[h])),l.push(s[h+1]);for(var d=[],v=dr.empty(),m=c.length-1;m>=0;--m)if(!PD(d,c[m])){var y=c[m],w=l[m];w=Re(w);var E=a.Oc(y);if(w instanceof Z0)d.push(y);else{var T=ba(w,E);T!=null&&(d.push(y),v.set(y,T))}}var k=new Su(d);return new ID(v,k,a.fieldTransforms)}function kD(e,t,n,r){return r===void 0&&(r=!1),ba(n,e.Uc(r?4:3,t))}function ba(e,t){if(ND(e=Re(e)))return nE("Unsupported field value:",t,e),RD(e,t);if(e instanceof _a)return function(n,r){if(!SD(r.Nc))throw r.Lc(n._methodName+"() can only be used with update() and set()");if(!r.path)throw r.Lc(n._methodName+"() is not currently supported inside arrays");var i=n._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Fc&&t.Nc!==4)throw t.Lc("Nested arrays are not supported");return function(n,r){for(var i=[],s=0,a=0,c=n;a<c.length;a++){var l=ba(c[a],r.Mc(s));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),s++}return{arrayValue:{values:i}}}(e,t)}return function(n,r){if((n=Re(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return dx(r.R,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){var i=nr.fromDate(n);return{timestampValue:$l(r.R,i)}}if(n instanceof nr)return i=new nr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3)),{timestampValue:$l(r.R,i)};if(n instanceof Iv)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof oa)return{bytesValue:Ix(r.R,n._byteString)};if(n instanceof _t){i=r.databaseId;var s=n.firestore._databaseId;if(!s.isEqual(i))throw r.Lc("Document reference is for database "+s.projectId+"/"+s.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:C0(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.Lc("Unsupported field value: "+Tv(n))}(e,t)}function RD(e,t){var n={};return tx(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):va(e,function(r,i){var s=ba(i,t.kc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function ND(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof nr||e instanceof Iv||e instanceof oa||e instanceof _t||e instanceof _a)}function nE(e,t,n){if(!ND(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){var r=Tv(n);throw r==="an object"?t.Lc(e+" a custom object"):t.Lc(e+" "+r)}}function bw(e,t,n){if((t=Re(t))instanceof Ei)return t._internalPath;if(typeof t=="string")return rE(e,t);throw fp("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}var HG=new RegExp("[~\\*/\\[\\]]");function rE(e,t,n){if(t.search(HG)>=0)throw fp("Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'",e,!1,void 0,n);try{return new(Ei.bind.apply(Ei,Ne([void 0],t.split("."))))()._internalPath}catch{throw fp("Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",e,!1,void 0,n)}}function fp(e,t,n,r,i){var s=r&&!r.isEmpty(),a=i!==void 0,c="Function "+t+"() called with invalid data";n&&(c+=" (via `toFirestore()`)");var l="";return(s||a)&&(l+=" (found",s&&(l+=" in field "+r),a&&(l+=" in document "+i),l+=")"),new q(x.INVALID_ARGUMENT,(c+=". ")+e+l)}function PD(e,t){return e.some(function(n){return n.isEqual(t)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jl=function(){function e(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}return Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new _t(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),e.prototype.exists=function(){return this._document!==null},e.prototype.data=function(){if(this._document){if(this._converter){var t=new KG(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},e.prototype.get=function(t){if(this._document){var n=this._document.data.field(hp("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}},e}(),KG=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return te(t,e),t.prototype.data=function(){return e.prototype.data.call(this)},t}(Jl);function hp(e,t){return typeof t=="string"?rE(e,t):t instanceof Ei?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ms=function(){function e(t,n){this.hasPendingWrites=t,this.fromCache=n}return e.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},e}(),Qi=function(e){function t(n,r,i,s,a,c){var l=this;return(l=e.call(this,n,r,i,s,c)||this)._firestore=n,l._firestoreImpl=n,l.metadata=a,l}return te(t,e),t.prototype.exists=function(){return e.prototype.exists.call(this)},t.prototype.data=function(n){if(n===void 0&&(n={}),this._document){if(this._converter){var r=new yl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,n)}return this._userDataWriter.convertValue(this._document.data.value,n.serverTimestamps)}},t.prototype.get=function(n,r){if(r===void 0&&(r={}),this._document){var i=this._document.data.field(hp("DocumentSnapshot.get",n));if(i!==null)return this._userDataWriter.convertValue(i,r.serverTimestamps)}},t}(Jl),yl=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return te(t,e),t.prototype.data=function(n){return n===void 0&&(n={}),e.prototype.data.call(this,n)},t}(Qi),ko=function(){function e(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ms(i.hasPendingWrites,i.fromCache),this.query=r}return Object.defineProperty(e.prototype,"docs",{get:function(){var t=[];return this.forEach(function(n){return t.push(n)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this.size===0},enumerable:!1,configurable:!0}),e.prototype.forEach=function(t,n){var r=this;this._snapshot.docs.forEach(function(i){t.call(n,new yl(r._firestore,r._userDataWriter,i.key,i,new Ms(r._snapshot.mutatedKeys.has(i.key),r._snapshot.fromCache),r.query.converter))})},e.prototype.docChanges=function(t){t===void 0&&(t={});var n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new q(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){var s=0;return r._snapshot.docChanges.map(function(c){return{type:"added",doc:new yl(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Ms(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}})}var a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(function(c){return i||c.type!==3}).map(function(c){var l=new yl(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Ms(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),h=-1,d=-1;return c.type!==0&&(h=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(d=(a=a.add(c.doc)).indexOf(c.doc.key)),{type:zG(c.type),doc:l,oldIndex:h,newIndex:d}})}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges},e}();function zG(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return le()}}function OD(e,t){return e instanceof Qi&&t instanceof Qi?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(e._document===null?t._document===null:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof ko&&t instanceof ko&&e._firestore===t._firestore&&ED(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xD(e){if(rp(e)&&e.explicitOrderBy.length===0)throw new q(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Df=function(){};function _o(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++){var s=i[r];e=s._apply(e)}return e}var WG=function(e){function t(n,r,i){var s=this;return(s=e.call(this)||this).jc=n,s.Wc=r,s.Gc=i,s.type="where",s}return te(t,e),t.prototype._apply=function(n){var r=wa(n.firestore),i=function(s,a,c,l,h,d,v){var m;if(h.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new q(x.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+d+"' queries on FieldPath.documentId().");if(d==="in"||d==="not-in"){tR(v,d);for(var y=[],w=0,E=v;w<E.length;w++){var T=E[w];y.push(eR(l,s,T))}m={arrayValue:{values:y}}}else m=eR(l,s,v)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||tR(v,d),m=kD(c,"where",v,d==="in"||d==="not-in");var k=gr.create(h,d,m);return function(P,O){if(O.g()){var H=b0(P);if(H!==null&&!H.isEqual(O.field))throw new q(x.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+H.toString()+"' and '"+O.field.toString()+"'");var K=w0(P);K!==null&&LD(P,O.field,K)}var U=function(ie,F){for(var ge=0,R=ie.filters;ge<R.length;ge++){var tt=R[ge];if(F.indexOf(tt.op)>=0)return tt.op}return null}(P,function(ie){switch(ie){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(O.op));if(U!==null)throw U===O.op?new q(x.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+O.op.toString()+"' filter."):new q(x.INVALID_ARGUMENT,"Invalid query. You cannot use '"+O.op.toString()+"' filters with '"+U.toString()+"' filters.")}(s,k),k}(n._query,0,r,n.firestore._databaseId,this.jc,this.Wc,this.Gc);return new rr(n.firestore,n.converter,function(s,a){var c=s.filters.concat([a]);return new ro(s.path,s.collectionGroup,s.explicitOrderBy.slice(),c,s.limit,s.limitType,s.startAt,s.endAt)}(n._query,i))},t}(Df),$G=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).jc=n,i.zc=r,i.type="orderBy",i}return te(t,e),t.prototype._apply=function(n){var r=function(i,s,a){if(i.startAt!==null)throw new q(x.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new q(x.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var c=new lu(s,a);return function(l,h){if(w0(l)===null){var d=b0(l);d!==null&&LD(l,d,h.field)}}(i,c),c}(n._query,this.jc,this.zc);return new rr(n.firestore,n.converter,function(i,s){var a=i.explicitOrderBy.concat([s]);return new ro(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(n._query,r))},t}(Df),Xk=function(e){function t(n,r,i){var s=this;return(s=e.call(this)||this).type=n,s.Hc=r,s.Jc=i,s}return te(t,e),t.prototype._apply=function(n){return new rr(n.firestore,n.converter,ux(n._query,this.Hc,this.Jc))},t}(Df),Jk=function(e){function t(n,r,i){var s=this;return(s=e.call(this)||this).type=n,s.Yc=r,s.Xc=i,s}return te(t,e),t.prototype._apply=function(n){var r=DD(n,this.type,this.Yc,this.Xc);return new rr(n.firestore,n.converter,function(i,s){return new ro(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(n._query,r))},t}(Df),Zk=function(e){function t(n,r,i){var s=this;return(s=e.call(this)||this).type=n,s.Yc=r,s.Xc=i,s}return te(t,e),t.prototype._apply=function(n){var r=DD(n,this.type,this.Yc,this.Xc);return new rr(n.firestore,n.converter,function(i,s){return new ro(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(n._query,r))},t}(Df);function DD(e,t,n,r){if(n[0]=Re(n[0]),n[0]instanceof Jl)return function(s,a,c,l,h){if(!l)throw new q(x.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+c+"().");for(var d=[],v=0,m=ku(s);v<m.length;v++){var y=m[v];if(y.field.isKeyField())d.push(ep(a,l.key));else{var w=l.data.field(y.field);if(m0(w))throw new q(x.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+y.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(w===null){var E=y.field.canonicalString();throw new q(x.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+E+"' (used as the orderBy) does not exist.")}d.push(w)}}return new Wl(d,h)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=wa(e.firestore);return function(s,a,c,l,h,d){var v=s.explicitOrderBy;if(h.length>v.length)throw new q(x.INVALID_ARGUMENT,"Too many arguments provided to "+l+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var m=[],y=0;y<h.length;y++){var w=h[y];if(v[y].field.isKeyField()){if(typeof w!="string")throw new q(x.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+l+"(), but got a "+typeof w);if(!E0(s)&&w.indexOf("/")!==-1)throw new q(x.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+l+"() must be a plain document ID, but '"+w+"' contains a slash.");var E=s.path.child(Ge.fromString(w));if(!fe.isDocumentKey(E))throw new q(x.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+l+"() must result in a valid document path, but '"+E+"' is not because it contains an odd number of segments.");var T=new fe(E);m.push(ep(a,T))}else{var k=kD(c,l,w);m.push(k)}}return new Wl(m,d)}(e._query,e.firestore._databaseId,i,t,n,r)}function eR(e,t,n){if(typeof(n=Re(n))=="string"){if(n==="")throw new q(x.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!E0(t)&&n.indexOf("/")!==-1)throw new q(x.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=t.path.child(Ge.fromString(n));if(!fe.isDocumentKey(r))throw new q(x.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return ep(e,new fe(r))}if(n instanceof _t)return ep(e,n._key);throw new q(x.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Tv(n)+".")}function tR(e,t){if(!Array.isArray(e)||e.length===0)throw new q(x.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(e.length>10)throw new q(x.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.")}function LD(e,t,n){if(!n.isEqual(t))throw new q(x.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var iE=function(){function e(){}return e.prototype.convertValue=function(t,n){switch(n===void 0&&(n="none"),na(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ot(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Cu(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw le()}},e.prototype.convertObject=function(t,n){var r=this,i={};return va(t.fields,function(s,a){i[s]=r.convertValue(a,n)}),i},e.prototype.convertGeoPoint=function(t){return new Iv(Ot(t.latitude),Ot(t.longitude))},e.prototype.convertArray=function(t,n){var r=this;return(t.values||[]).map(function(i){return r.convertValue(i,n)})},e.prototype.convertServerTimestamp=function(t,n){switch(n){case"previous":var r=rx(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Kl(t));default:return null}},e.prototype.convertTimestamp=function(t){var n=zo(t);return new nr(n.seconds,n.nanos)},e.prototype.convertDocumentKey=function(t,n){var r=Ge.fromString(t);_e(xx(r));var i=new lp(r.get(1),r.get(3)),s=new fe(r.popFirst(5));return i.isEqual(n)||xt("Document "+s+" contains a document reference within a different database ("+i.projectId+"/"+i.database+") which is not supported. It will be treated as a reference in the current database ("+n.projectId+"/"+n.database+") instead."),s},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cv(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var GG=function(e){function t(n){var r=this;return(r=e.call(this)||this).firestore=n,r}return te(t,e),t.prototype.convertBytes=function(n){return new oa(n)},t.prototype.convertReference=function(n){var r=this.convertDocumentKey(n,this.firestore._databaseId);return new _t(this.firestore,null,r)},t}(iE),QG=function(){function e(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=wa(t)}return e.prototype.set=function(t,n,r){this._verifyNotCommitted();var i=Ro(t,this._firestore),s=Cv(i.converter,n,r),a=Sv(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(a.toMutation(i._key,Tn.none())),this},e.prototype.update=function(t,n,r){for(var i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];this._verifyNotCommitted();var a,c=Ro(t,this._firestore);return a=typeof(n=Re(n))=="string"||n instanceof Ei?tE(this._dataReader,"WriteBatch.update",c._key,n,r,i):eE(this._dataReader,"WriteBatch.update",c._key,n),this._mutations.push(a.toMutation(c._key,Tn.exists(!0))),this},e.prototype.delete=function(t){this._verifyNotCommitted();var n=Ro(t,this._firestore);return this._mutations=this._mutations.concat(new Pf(n._key,Tn.none())),this},e.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},e.prototype._verifyNotCommitted=function(){if(this._committed)throw new q(x.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ro(e,t){if((e=Re(e)).firestore!==t)throw new q(x.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ws=function(e){function t(n){var r=this;return(r=e.call(this)||this).firestore=n,r}return te(t,e),t.prototype.convertBytes=function(n){return new oa(n)},t.prototype.convertReference=function(n){var r=this.convertDocumentKey(n,this.firestore._databaseId);return new _t(this.firestore,null,r)},t}(iE);function nR(e,t,n){e=We(e,_t);var r=We(e.firestore,Rt),i=Cv(e.converter,t,n);return Lf(r,[Sv(wa(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,Tn.none())])}function rR(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];e=We(e,_t);var s=We(e.firestore,Rt),a=wa(s);return Lf(s,[(typeof(t=Re(t))=="string"||t instanceof Ei?tE(a,"updateDoc",e._key,t,n,r):eE(a,"updateDoc",e._key,t)).toMutation(e._key,Tn.exists(!0))])}function MD(e){for(var t,n,r,i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];e=Re(e);var a={includeMetadataChanges:!1},c=0;typeof i[c]!="object"||Vu(i[c])||(a=i[c],c++);var l,h,d,v={includeMetadataChanges:a.includeMetadataChanges};if(Vu(i[c])){var m=i[c];i[c]=(t=m.next)===null||t===void 0?void 0:t.bind(m),i[c+1]=(n=m.error)===null||n===void 0?void 0:n.bind(m),i[c+2]=(r=m.complete)===null||r===void 0?void 0:r.bind(m)}if(e instanceof _t)h=We(e.firestore,Rt),d=nc(e._key.path),l={next:function(E){i[c]&&i[c](Ew(h,e,E))},error:i[c+1],complete:i[c+2]};else{var y=We(e,rr);h=We(y.firestore,Rt),d=y._query;var w=new Ws(h);l={next:function(E){i[c]&&i[c](new ko(h,w,y,E))},error:i[c+1],complete:i[c+2]},xD(e._query)}return function(E,T,k,P){var O=this,H=new bv(P),K=new B0(T,H,k);return E.asyncQueue.enqueueAndForget(function(){return A(O,void 0,void 0,function(){var U;return C(this,function(ie){switch(ie.label){case 0:return U=U0,[4,ju(E)];case 1:return[2,U.apply(void 0,[ie.sent(),K])]}})})}),function(){H.Wo(),E.asyncQueue.enqueueAndForget(function(){return A(O,void 0,void 0,function(){var U;return C(this,function(ie){switch(ie.label){case 0:return U=j0,[4,ju(E)];case 1:return[2,U.apply(void 0,[ie.sent(),K])]}})})})}}(Yt(h),d,v,l)}function Lf(e,t){return function(n,r){var i=this,s=new Rn;return n.asyncQueue.enqueueAndForget(function(){return A(i,void 0,void 0,function(){var a;return C(this,function(c){switch(c.label){case 0:return a=aG,[4,Y0(n)];case 1:return[2,a.apply(void 0,[c.sent(),r,s])]}})})}),s.promise}(Yt(e),t)}function Ew(e,t,n){var r=n.docs.get(t._key),i=new Ws(e);return new Qi(e,i,t._key,r,new Ms(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var YG=function(e){function t(n,r){var i=this;return(i=e.call(this,n,r)||this)._firestore=n,i}return te(t,e),t.prototype.get=function(n){var r=this,i=Ro(n,this._firestore),s=new Ws(this._firestore);return e.prototype.get.call(this,n).then(function(a){return new Qi(r._firestore,s,i._key,a._document,new Ms(!1,!1),i.converter)})},t}(function(){function e(t,n){this._firestore=t,this._transaction=n,this._dataReader=wa(t)}return e.prototype.get=function(t){var n=this,r=Ro(t,this._firestore),i=new GG(this._firestore);return this._transaction.lookup([r._key]).then(function(s){if(!s||s.length!==1)return le();var a=s[0];if(a.isFoundDocument())return new Jl(n._firestore,i,a.key,a,r.converter);if(a.isNoDocument())return new Jl(n._firestore,i,r._key,null,r.converter);throw le()})},e.prototype.set=function(t,n,r){var i=Ro(t,this._firestore),s=Cv(i.converter,n,r),a=Sv(this._dataReader,"Transaction.set",i._key,s,i.converter!==null,r);return this._transaction.set(i._key,a),this},e.prototype.update=function(t,n,r){for(var i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];var a,c=Ro(t,this._firestore);return a=typeof(n=Re(n))=="string"||n instanceof Ei?tE(this._dataReader,"Transaction.update",c._key,n,r,i):eE(this._dataReader,"Transaction.update",c._key,n),this._transaction.update(c._key,a),this},e.prototype.delete=function(t){var n=Ro(t,this._firestore);return this._transaction.delete(n._key),this},e}());/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iR(){if(typeof Uint8Array>"u")throw new q(x.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function oR(){if(typeof atob>"u")throw new q(x.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var FD=function(){function e(t){this._delegate=t}return e.fromBase64String=function(t){return oR(),new e(oa.fromBase64String(t))},e.fromUint8Array=function(t){return iR(),new e(oa.fromUint8Array(t))},e.prototype.toBase64=function(){return oR(),this._delegate.toBase64()},e.prototype.toUint8Array=function(){return iR(),this._delegate.toUint8Array()},e.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(),XG=function(){function e(){}return e.prototype.enableIndexedDbPersistence=function(t,n){return function(r,i){Yk(r=We(r,Rt));var s=Yt(r),a=r._freezeSettings(),c=new ww;return Qk(s,c,new vD(c,a.cacheSizeBytes,i==null?void 0:i.forceOwnership))}(t._delegate,{forceOwnership:n})},e.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(n){Yk(n=We(n,Rt));var r=Yt(n),i=n._freezeSettings(),s=new ww;return Qk(r,s,new TG(s,i.cacheSizeBytes))}(t._delegate)},e.prototype.clearIndexedDbPersistence=function(t){return function(n){var r=this;if(n._initialized&&!n._terminated)throw new q(x.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var i=new Rn;return n._queue.enqueueAndForgetEvenWhileRestricted(function(){return A(r,void 0,void 0,function(){var s;return C(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,function(c){return A(this,void 0,void 0,function(){var l;return C(this,function(h){switch(h.label){case 0:return xu.yt()?(l=c+"main",[4,xu.delete(l)]):[2,Promise.resolve()];case 1:return h.sent(),[2]}})})}(O0(n._databaseId,n._persistenceKey))];case 1:return a.sent(),i.resolve(),[3,3];case 2:return s=a.sent(),i.reject(s),[3,3];case 3:return[2]}})})}),i.promise}(t._delegate)},e}(),oE=function(){function e(t,n,r){var i=this;this._delegate=n,this.Zc=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof lp||(this.tu=t)}return Object.defineProperty(e.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){var n=this._delegate._getSettings();t.merge||n.host===t.host||Hl("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},n),t)).merge,this._delegate._setSettings(t)},e.prototype.useEmulator=function(t,n,r){r===void 0&&(r={}),function(i,s,a,c){var l;c===void 0&&(c={});var h=(i=We(i,Xl))._getSettings();if(h.host!=="firestore.googleapis.com"&&h.host!==s&&Hl("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},h),{host:s+":"+a,ssl:!1})),c.mockUserToken){var d,v;if(typeof c.mockUserToken=="string")d=c.mockUserToken,v=un.MOCK_USER;else{d=ib(c.mockUserToken,(l=i._app)===null||l===void 0?void 0:l.options.projectId);var m=c.mockUserToken.sub||c.mockUserToken.user_id;if(!m)throw new q(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new un(m)}i._credentials=new RG(new yD(d,v))}}(this._delegate,t,n,r)},e.prototype.enableNetwork=function(){return function(t){var n=this;return t.asyncQueue.enqueue(function(){return A(n,void 0,void 0,function(){var r,i;return C(this,function(s){switch(s.label){case 0:return[4,jk(t)];case 1:return r=s.sent(),[4,Vk(t)];case 2:return i=s.sent(),[2,(r.setNetworkEnabled(!0),function(a){var c=ee(a);return c.Or.delete(0),xf(c)}(i))]}})})})}(Yt(We(this._delegate,Rt)))},e.prototype.disableNetwork=function(){return function(t){var n=this;return t.asyncQueue.enqueue(function(){return A(n,void 0,void 0,function(){var r,i;return C(this,function(s){switch(s.label){case 0:return[4,jk(t)];case 1:return r=s.sent(),[4,Vk(t)];case 2:return i=s.sent(),[2,(r.setNetworkEnabled(!1),function(a){return A(this,void 0,void 0,function(){var c;return C(this,function(l){switch(l.label){case 0:return(c=ee(a)).Or.add(0),[4,ic(c)];case 1:return l.sent(),c.Br.set("Offline"),[2]}})})}(i))]}})})})}(Yt(We(this._delegate,Rt)))},e.prototype.enablePersistence=function(t){var n=!1,r=!1;return t&&_D("synchronizeTabs",n=!!t.synchronizeTabs,"experimentalForceOwningTab",r=!!t.experimentalForceOwningTab),n?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,r)},e.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var n=this,r=new Rn;return t.asyncQueue.enqueueAndForget(function(){return A(n,void 0,void 0,function(){var i;return C(this,function(s){switch(s.label){case 0:return i=fG,[4,Y0(t)];case 1:return[2,i.apply(void 0,[s.sent(),r])]}})})}),r.promise}(Yt(We(this._delegate,Rt)))},e.prototype.onSnapshotsInSync=function(t){return function(n,r){return function(i,s){var a=this,c=new bv(s);return i.asyncQueue.enqueueAndForget(function(){return A(a,void 0,void 0,function(){var l;return C(this,function(h){switch(h.label){case 0:return l=function(d,v){ee(d).Gr.add(v),v.next()},[4,ju(i)];case 1:return[2,l.apply(void 0,[h.sent(),c])]}})})}),function(){c.Wo(),i.asyncQueue.enqueueAndForget(function(){return A(a,void 0,void 0,function(){var l;return C(this,function(h){switch(h.label){case 0:return l=function(d,v){ee(d).Gr.delete(v)},[4,ju(i)];case 1:return[2,l.apply(void 0,[h.sent(),c])]}})})})}}(Yt(n=We(n,Rt)),Vu(r)?r:{next:r})}(this._delegate,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.tu)throw new q(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new dp(this,wD(this._delegate,t))}catch(n){throw jn(n,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new $s(this,bd(this._delegate,t))}catch(n){throw jn(n,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new Mf(this,function(n,r){if(n=We(n,Xl),X0("collectionGroup","collection id",r),r.indexOf("/")>=0)throw new q(x.INVALID_ARGUMENT,"Invalid collection ID '"+r+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new rr(n,null,function(i){return new ro(Ge.emptyPath(),i)}(r))}(this._delegate,t))}catch(n){throw jn(n,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var n=this;return function(r,i){return function(s,a){var c=this,l=new Rn;return s.asyncQueue.enqueueAndForget(function(){return A(c,void 0,void 0,function(){var h;return C(this,function(d){switch(d.label){case 0:return[4,function(v){return Ev(v).then(function(m){return m.datastore})}(s)];case 1:return h=d.sent(),new CG(s.asyncQueue,h,a,l).run(),[2]}})})}),l.promise}(Yt(r),function(s){return i(new YG(r,s))})}(this._delegate,function(r){return t(new UD(n,r))})},e.prototype.batch=function(){var t=this;return Yt(this._delegate),new jD(new QG(this._delegate,function(n){return Lf(t._delegate,n)}))},e.prototype.loadBundle=function(t){throw new q(x.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new q(x.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(),Av=function(e){function t(n){var r=this;return(r=e.call(this)||this).firestore=n,r}return te(t,e),t.prototype.convertBytes=function(n){return new FD(new oa(n))},t.prototype.convertReference=function(n){var r=this.convertDocumentKey(n,this.firestore._databaseId);return $s.eu(r,this.firestore,null)},t}(iE);function JG(e){var t;t=e,ti.setLogLevel(t)}var UD=function(){function e(t,n){this._firestore=t,this._delegate=n,this._userDataWriter=new Av(t)}return e.prototype.get=function(t){var n=this,r=Fs(t);return this._delegate.get(r).then(function(i){return new Zl(n._firestore,new Qi(n._firestore._delegate,n._userDataWriter,i._key,i._document,i.metadata,r.converter))})},e.prototype.set=function(t,n,r){var i=Fs(t);return r?(J0("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this},e.prototype.update=function(t,n,r){for(var i,s=[],a=3;a<arguments.length;a++)s[a-3]=arguments[a];var c=Fs(t);return arguments.length===2?this._delegate.update(c,n):(i=this._delegate).update.apply(i,Ne([c,n,r],s)),this},e.prototype.delete=function(t){var n=Fs(t);return this._delegate.delete(n),this},e}(),jD=function(){function e(t){this._delegate=t}return e.prototype.set=function(t,n,r){var i=Fs(t);return r?(J0("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this},e.prototype.update=function(t,n,r){for(var i,s=[],a=3;a<arguments.length;a++)s[a-3]=arguments[a];var c=Fs(t);return arguments.length===2?this._delegate.update(c,n):(i=this._delegate).update.apply(i,Ne([c,n,r],s)),this},e.prototype.delete=function(t){var n=Fs(t);return this._delegate.delete(n),this},e.prototype.commit=function(){return this._delegate.commit()},e}(),kv=function(){function e(t,n,r){this._firestore=t,this._userDataWriter=n,this._delegate=r}return e.prototype.fromFirestore=function(t,n){var r=new yl(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new ef(this._firestore,r),n??{})},e.prototype.toFirestore=function(t,n){return n?this._delegate.toFirestore(t,n):this._delegate.toFirestore(t)},e.nu=function(t,n){var r=e.su,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var s=i.get(n);return s||(s=new e(t,new Av(t),n),i.set(n,s)),s},e}();kv.su=new WeakMap;var $s=function(){function e(t,n){this.firestore=t,this._delegate=n,this._userDataWriter=new Av(t)}return e.iu=function(t,n,r){if(t.length%2!=0)throw new q(x.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new e(n,new _t(n._delegate,r,new fe(t)))},e.eu=function(t,n,r){return new e(n,new _t(n._delegate,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new dp(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new dp(this.firestore,wD(this._delegate,t))}catch(n){throw jn(n,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return(t=Re(t))instanceof _t&&bD(this._delegate,t)},e.prototype.set=function(t,n){n=J0("DocumentReference.set",n);try{return n?nR(this._delegate,t,n):nR(this._delegate,t)}catch(r){throw jn(r,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];try{return arguments.length===1?rR(this._delegate,t):rR.apply(void 0,Ne([this._delegate,t,n],r))}catch(s){throw jn(s,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return Lf(We((t=this._delegate).firestore,Rt),[new Pf(t._key,Tn.none())]);var t},e.prototype.onSnapshot=function(){for(var t=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=VD(n),s=BD(n,function(a){return new Zl(t.firestore,new Qi(t.firestore._delegate,t._userDataWriter,a._key,a._document,a.metadata,t._delegate.converter))});return MD(this._delegate,i,s)},e.prototype.get=function(t){var n=this;return((t==null?void 0:t.source)==="cache"?function(r){r=We(r,_t);var i=We(r.firestore,Rt),s=Yt(i),a=new Ws(i);return function(c,l){var h=this,d=new Rn;return c.asyncQueue.enqueueAndForget(function(){return A(h,void 0,void 0,function(){var v;return C(this,function(m){switch(m.label){case 0:return v=function(y,w,E){return A(this,void 0,void 0,function(){var T,k;return C(this,function(P){switch(P.label){case 0:return P.trys.push([0,2,,3]),[4,function(O,H){var K=ee(O);return K.persistence.runTransaction("read document","readonly",function(U){return K.Mn.mn(U,H)})}(y,w)];case 1:return(k=P.sent()).isFoundDocument()?E.resolve(k):k.isNoDocument()?E.resolve(null):E.reject(new q(x.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return T=P.sent(),k=ac(T,"Failed to get document '"+w+" from cache"),E.reject(k),[3,3];case 3:return[2]}})})},[4,Q0(c)];case 1:return[2,v.apply(void 0,[m.sent(),l,d])]}})})}),d.promise}(s,r._key).then(function(c){return new Qi(i,a,r._key,c,new Ms(c!==null&&c.hasLocalMutations,!0),r.converter)})}(this._delegate):(t==null?void 0:t.source)==="server"?function(r){r=We(r,_t);var i=We(r.firestore,Rt);return Bk(Yt(i),r._key,{source:"server"}).then(function(s){return Ew(i,r,s)})}(this._delegate):function(r){r=We(r,_t);var i=We(r.firestore,Rt);return Bk(Yt(i),r._key).then(function(s){return Ew(i,r,s)})}(this._delegate)).then(function(r){return new Zl(n.firestore,new Qi(n.firestore._delegate,n._userDataWriter,r._key,r._document,r.metadata,n._delegate.converter))})},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(kv.nu(this.firestore,t)):this._delegate.withConverter(null))},e}();function jn(e,t,n){return e.message=e.message.replace(t,n),e}function VD(e){for(var t=0,n=e;t<n.length;t++){var r=n[t];if(typeof r=="object"&&!Vu(r))return r}return{}}function BD(e,t){var n,r,i;return{next:function(s){i.next&&i.next(t(s))},error:(n=(i=Vu(e[0])?e[0]:Vu(e[1])?e[1]:typeof e[0]=="function"?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var Zl=function(){function e(t,n){this._firestore=t,this._delegate=n}return Object.defineProperty(e.prototype,"ref",{get:function(){return new $s(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this._delegate.data(t)},e.prototype.get=function(t,n){return this._delegate.get(t,n)},e.prototype.isEqual=function(t){return OD(this._delegate,t._delegate)},e}(),ef=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return te(t,e),t.prototype.data=function(n){return this._delegate.data(n)},t}(Zl),Mf=function(){function e(t,n){this.firestore=t,this._delegate=n,this._userDataWriter=new Av(t)}return e.prototype.where=function(t,n,r){try{return new e(this.firestore,_o(this._delegate,function(i,s,a){var c=s,l=hp("where",i);return new WG(l,c,a)}(t,n,r)))}catch(i){throw jn(i,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,_o(this._delegate,function(r,i){i===void 0&&(i="asc");var s=i,a=hp("orderBy",r);return new $G(a,s)}(t,n)))}catch(r){throw jn(r,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,_o(this._delegate,function(n){return $k("limit",n),new Xk("limit",n,"F")}(t)))}catch(n){throw jn(n,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,_o(this._delegate,function(n){return $k("limitToLast",n),new Xk("limitToLast",n,"L")}(t)))}catch(n){throw jn(n,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,_o(this._delegate,function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new Jk("startAt",r,!0)}.apply(void 0,t)))}catch(r){throw jn(r,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,_o(this._delegate,function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new Jk("startAfter",r,!1)}.apply(void 0,t)))}catch(r){throw jn(r,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,_o(this._delegate,function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new Zk("endBefore",r,!0)}.apply(void 0,t)))}catch(r){throw jn(r,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,_o(this._delegate,function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new Zk("endAt",r,!1)}.apply(void 0,t)))}catch(r){throw jn(r,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return ED(this._delegate,t._delegate)},e.prototype.get=function(t){var n=this;return((t==null?void 0:t.source)==="cache"?function(r){r=We(r,rr);var i=We(r.firestore,Rt),s=Yt(i),a=new Ws(i);return function(c,l){var h=this,d=new Rn;return c.asyncQueue.enqueueAndForget(function(){return A(h,void 0,void 0,function(){var v;return C(this,function(m){switch(m.label){case 0:return v=function(y,w,E){return A(this,void 0,void 0,function(){var T,k,P,O,H;return C(this,function(K){switch(K.label){case 0:return K.trys.push([0,2,,3]),[4,ap(y,w,!0)];case 1:return H=K.sent(),T=new lD(w,H.Bn),k=T._o(H.documents),P=T.applyChanges(k,!1),E.resolve(P.snapshot),[3,3];case 2:return O=K.sent(),H=ac(O,"Failed to execute query '"+w+" against cache"),E.reject(H),[3,3];case 3:return[2]}})})},[4,Q0(c)];case 1:return[2,v.apply(void 0,[m.sent(),l,d])]}})})}),d.promise}(s,r._query).then(function(c){return new ko(i,a,r,c)})}(this._delegate):(t==null?void 0:t.source)==="server"?function(r){r=We(r,rr);var i=We(r.firestore,Rt),s=Yt(i),a=new Ws(i);return qk(s,r._query,{source:"server"}).then(function(c){return new ko(i,a,r,c)})}(this._delegate):function(r){r=We(r,rr);var i=We(r.firestore,Rt),s=Yt(i),a=new Ws(i);return xD(r._query),qk(s,r._query).then(function(c){return new ko(i,a,r,c)})}(this._delegate)).then(function(r){return new Tw(n.firestore,new ko(n.firestore._delegate,n._userDataWriter,n._delegate,r._snapshot))})},e.prototype.onSnapshot=function(){for(var t=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=VD(n),s=BD(n,function(a){return new Tw(t.firestore,new ko(t.firestore._delegate,t._userDataWriter,t._delegate,a._snapshot))});return MD(this._delegate,i,s)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(kv.nu(this.firestore,t)):this._delegate.withConverter(null))},e}(),ZG=function(){function e(t,n){this._firestore=t,this._delegate=n}return Object.defineProperty(e.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new ef(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),e}(),Tw=function(){function e(t,n){this._firestore=t,this._delegate=n}return Object.defineProperty(e.prototype,"query",{get:function(){return new Mf(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(n){return new ef(t._firestore,n)})},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var n=this;return this._delegate.docChanges(t).map(function(r){return new ZG(n._firestore,r)})},e.prototype.forEach=function(t,n){var r=this;this._delegate.forEach(function(i){t.call(n,new ef(r._firestore,i))})},e.prototype.isEqual=function(t){return OD(this._delegate,t._delegate)},e}(),dp=function(e){function t(n,r){var i=this;return(i=e.call(this,n,r)||this).firestore=n,i._delegate=r,i}return te(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var n=this._delegate.parent;return n?new $s(this.firestore,n):null},enumerable:!1,configurable:!0}),t.prototype.doc=function(n){try{return new $s(this.firestore,n===void 0?bd(this._delegate):bd(this._delegate,n))}catch(r){throw jn(r,"doc()","CollectionReference.doc()")}},t.prototype.add=function(n){var r=this;return function(i,s){var a=We(i.firestore,Rt),c=bd(i),l=Cv(i.converter,s);return Lf(a,[Sv(wa(i.firestore),"addDoc",c._key,l,i.converter!==null,{}).toMutation(c._key,Tn.exists(!1))]).then(function(){return c})}(this._delegate,n).then(function(i){return new $s(r.firestore,i)})},t.prototype.isEqual=function(n){return bD(this._delegate,n._delegate)},t.prototype.withConverter=function(n){return new t(this.firestore,n?this._delegate.withConverter(kv.nu(this.firestore,n)):this._delegate.withConverter(null))},t}(Mf);function Fs(e){return We(e,_t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var e6=function(){function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._delegate=new(Ei.bind.apply(Ei,Ne([void 0],t)))}return e.documentId=function(){return new e(ri.keyField().canonicalString())},e.prototype.isEqual=function(t){return(t=Re(t))instanceof Ei&&this._delegate._internalPath.isEqual(t._internalPath)},e}(),t6=function(){function e(t){this._delegate=t}return e.serverTimestamp=function(){var t=new jG("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new Z0("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return new VG("arrayUnion",i)}.apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return new BG("arrayRemove",i)}.apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(r){return new qG("increment",r)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n6(e){return function(t,n){var r=Yt(t=We(t,Rt)),i=new DG;return function(s,a,c,l){var h=this,d=function(v,m){return function(y,w){return new IG(y,w)}(function(y,w){if(y instanceof Uint8Array)return Uk(y,w);if(y instanceof ArrayBuffer)return Uk(new Uint8Array(y),w);if(y instanceof ReadableStream)return y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(typeof v=="string"?new TextEncoder().encode(v):v),m)}(c,Of(a));s.asyncQueue.enqueueAndForget(function(){return A(h,void 0,void 0,function(){var v;return C(this,function(m){switch(m.label){case 0:return v=EG,[4,Y0(s)];case 1:return v.apply(void 0,[m.sent(),d,l]),[2]}})})})}(r,t._databaseId,n,i),i}(this._delegate,e)}function r6(e){var t,n,r=this;return(t=this._delegate,n=e,function(i,s){var a=this;return i.asyncQueue.enqueue(function(){return A(a,void 0,void 0,function(){var c;return C(this,function(l){switch(l.label){case 0:return c=function(h,d){var v=ee(h);return v.persistence.runTransaction("Get named query","readonly",function(m){return v.Ke.getNamedQuery(m,d)})},[4,Q0(i)];case 1:return[2,c.apply(void 0,[l.sent(),s])]}})})})}(Yt(t=We(t,Rt)),n).then(function(i){return i?new rr(t,null,i.query):null})).then(function(i){return i?new Mf(r,i):null})}var i6={Firestore:oE,GeoPoint:Iv,Timestamp:nr,Blob:FD,Transaction:UD,WriteBatch:jD,DocumentReference:$s,DocumentSnapshot:Zl,Query:Mf,QueryDocumentSnapshot:ef,QuerySnapshot:Tw,CollectionReference:dp,FieldPath:e6,FieldValue:t6,setLogLevel:JG,CACHE_SIZE_UNLIMITED:LG};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o6(e){(function(t,n){t.INTERNAL.registerComponent(new kn("firestore",function(r){var i=r.getProvider("app").getImmediate();return n(i,r.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},i6)))})(e,function(t,n){return new oE(t,new Rt(t,n),new XG)}),e.registerVersion("@firebase/firestore","2.4.1")}o6(ue);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s6(e){e.prototype.loadBundle=n6,e.prototype.namedQuery=r6}s6(oE);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sR={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},fu=function(e){te(t,e);function t(n,r,i){var s=e.call(this,r)||this;return Object.setPrototypeOf(s,t.prototype),s.code=n,s.details=i,s}return t}(Error);function a6(e){if(e>=200&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function u6(e,t,n){var r=a6(e),i=r,s=void 0;try{var a=t&&t.error;if(a){var c=a.status;if(typeof c=="string"){if(!sR[c])return new fu("internal","internal");r=sR[c],i=c}var l=a.message;typeof l=="string"&&(i=l),s=a.details,s!==void 0&&(s=n.decode(s))}}catch{}return r==="ok"?null:new fu(r,i,s)}var c6=function(){function e(t,n){var r=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||t.get().then(function(i){return r.auth=i},function(){}),this.messaging||n.get().then(function(i){return r.messaging=i},function(){})}return e.prototype.getAuthToken=function(){return A(this,void 0,void 0,function(){var t;return C(this,function(n){switch(n.label){case 0:if(!this.auth)return[2,void 0];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return t=n.sent(),t?[2,t.accessToken]:[2,void 0];case 3:return n.sent(),[2,void 0];case 4:return[2]}})})},e.prototype.getInstanceIdToken=function(){return A(this,void 0,void 0,function(){return C(this,function(t){switch(t.label){case 0:if(!this.messaging||!("Notification"in self)||Notification.permission!=="granted")return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.messaging.getToken()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,void 0];case 4:return[2]}})})},e.prototype.getContext=function(){return A(this,void 0,void 0,function(){var t,n;return C(this,function(r){switch(r.label){case 0:return[4,this.getAuthToken()];case 1:return t=r.sent(),[4,this.getInstanceIdToken()];case 2:return n=r.sent(),[2,{authToken:t,instanceIdToken:n}]}})})},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var l6="type.googleapis.com/google.protobuf.Int64Value",f6="type.googleapis.com/google.protobuf.UInt64Value";function aR(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r]));return n}var h6=function(){function e(){}return e.prototype.encode=function(t){var n=this;if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(function(r){return n.encode(r)});if(typeof t=="function"||typeof t=="object")return aR(t,function(r){return n.encode(r)});throw new Error("Data cannot be encoded in JSON: "+t)},e.prototype.decode=function(t){var n=this;if(t==null)return t;if(t["@type"])switch(t["@type"]){case l6:case f6:{var r=Number(t.value);if(isNaN(r))throw new Error("Data cannot be decoded from JSON: "+t);return r}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(function(i){return n.decode(i)}):typeof t=="function"||typeof t=="object"?aR(t,function(i){return n.decode(i)}):t},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d6(e){var t,n=new Promise(function(r,i){t=setTimeout(function(){i(new fu("deadline-exceeded","deadline-exceeded"))},e)});return{timer:t,promise:n}}var uR=function(){function e(t,n,r,i,s,a){var c=this;s===void 0&&(s="us-central1"),this.app_=t,this.appCheckProvider=i,this.fetchImpl=a,this.serializer=new h6,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(c.deleteService())}},this.contextProvider=new c6(n,r),this.cancelAllRequests=new Promise(function(h){c.deleteService=function(){return h()}});try{var l=new URL(s);this.customDomain=l.origin,this.region="us-central1"}catch{this.customDomain=null,this.region=s}}return Object.defineProperty(e.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),e.prototype._url=function(t){var n=this.app_.options.projectId;if(this.emulatorOrigin!==null){var r=this.emulatorOrigin;return r+"/"+n+"/"+this.region+"/"+t}return this.customDomain!==null?this.customDomain+"/"+t:"https://"+this.region+"-"+n+".cloudfunctions.net/"+t},e.prototype.useEmulator=function(t,n){this.emulatorOrigin="http://"+t+":"+n},e.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},e.prototype.httpsCallable=function(t,n){var r=this;return function(i){return r.call(t,i,n||{})}},e.prototype.postJSON=function(t,n,r){return A(this,void 0,void 0,function(){var i,s,a;return C(this,function(c){switch(c.label){case 0:return r["Content-Type"]="application/json",[4,this.getAppCheckToken()];case 1:i=c.sent(),i!==null&&(r["X-Firebase-AppCheck"]=i),c.label=2;case 2:return c.trys.push([2,4,,5]),[4,this.fetchImpl(t,{method:"POST",body:JSON.stringify(n),headers:r})];case 3:return s=c.sent(),[3,5];case 4:return c.sent(),[2,{status:0,json:null}];case 5:a=null,c.label=6;case 6:return c.trys.push([6,8,,9]),[4,s.json()];case 7:return a=c.sent(),[3,9];case 8:return c.sent(),[3,9];case 9:return[2,{status:s.status,json:a}]}})})},e.prototype.getAppCheckToken=function(){return A(this,void 0,void 0,function(){var t,n;return C(this,function(r){switch(r.label){case 0:return t=this.appCheckProvider.getImmediate({optional:!0}),t?[4,t.getToken()]:[3,2];case 1:return n=r.sent(),[2,n.token];case 2:return[2,null]}})})},e.prototype.call=function(t,n,r){return A(this,void 0,void 0,function(){var i,s,a,c,l,h,d,v,m,y,w,E;return C(this,function(T){switch(T.label){case 0:return i=this._url(t),n=this.serializer.encode(n),s={data:n},a={},[4,this.contextProvider.getContext()];case 1:return c=T.sent(),c.authToken&&(a.Authorization="Bearer "+c.authToken),c.instanceIdToken&&(a["Firebase-Instance-ID-Token"]=c.instanceIdToken),l=r.timeout||7e4,h=d6(l),d=h.timer,v=h.promise,[4,Promise.race([cR(d,this.postJSON(i,s,a)),v,cR(d,this.cancelAllRequests)])];case 2:if(m=T.sent(),!m)throw new fu("cancelled","Firebase Functions instance was deleted.");if(y=u6(m.status,m.json,this.serializer),y)throw y;if(!m.json)throw new fu("internal","Response is not valid JSON object.");if(w=m.json.data,typeof w>"u"&&(w=m.json.result),typeof w>"u")throw new fu("internal","Response is missing data field.");return E=this.serializer.decode(w),[2,{data:E}]}})})},e}();function cR(e,t){return A(this,void 0,void 0,function(){var n;return C(this,function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),clearTimeout(e),[2,n]}})})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var p6="functions";function v6(e,t){var n={Functions:uR};function r(i,s){var a=s.instanceIdentifier,c=i.getProvider("app").getImmediate(),l=i.getProvider("auth-internal"),h=i.getProvider("app-check-internal"),d=i.getProvider("messaging");return new uR(c,l,d,h,a,t)}e.INTERNAL.registerComponent(new kn(p6,r,"PUBLIC").setServiceProps(n).setMultipleInstances(!0))}var g6="@firebase/functions",m6="0.6.16";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */v6(ue,fetch.bind(self));ue.registerVersion(g6,m6);function y6(e){return Array.prototype.slice.call(e)}function qD(e){return new Promise(function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function Rv(e,t,n){var r,i=new Promise(function(s,a){r=e[t].apply(e,n),qD(r).then(s,a)});return i.request=r,i}function _6(e,t,n){var r=Rv(e,t,n);return r.then(function(i){if(i)return new tf(i,r.request)})}function uc(e,t,n){n.forEach(function(r){Object.defineProperty(e.prototype,r,{get:function(){return this[t][r]},set:function(i){this[t][r]=i}})})}function sE(e,t,n,r){r.forEach(function(i){i in n.prototype&&(e.prototype[i]=function(){return Rv(this[t],i,arguments)})})}function Nv(e,t,n,r){r.forEach(function(i){i in n.prototype&&(e.prototype[i]=function(){return this[t][i].apply(this[t],arguments)})})}function HD(e,t,n,r){r.forEach(function(i){i in n.prototype&&(e.prototype[i]=function(){return _6(this[t],i,arguments)})})}function Ea(e){this._index=e}uc(Ea,"_index",["name","keyPath","multiEntry","unique"]);sE(Ea,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]);HD(Ea,"_index",IDBIndex,["openCursor","openKeyCursor"]);function tf(e,t){this._cursor=e,this._request=t}uc(tf,"_cursor",["direction","key","primaryKey","value"]);sE(tf,"_cursor",IDBCursor,["update","delete"]);["advance","continue","continuePrimaryKey"].forEach(function(e){e in IDBCursor.prototype&&(tf.prototype[e]=function(){var t=this,n=arguments;return Promise.resolve().then(function(){return t._cursor[e].apply(t._cursor,n),qD(t._request).then(function(r){if(r)return new tf(r,t._request)})})})});function Pi(e){this._store=e}Pi.prototype.createIndex=function(){return new Ea(this._store.createIndex.apply(this._store,arguments))};Pi.prototype.index=function(){return new Ea(this._store.index.apply(this._store,arguments))};uc(Pi,"_store",["name","keyPath","indexNames","autoIncrement"]);sE(Pi,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]);HD(Pi,"_store",IDBObjectStore,["openCursor","openKeyCursor"]);Nv(Pi,"_store",IDBObjectStore,["deleteIndex"]);function Ff(e){this._tx=e,this.complete=new Promise(function(t,n){e.oncomplete=function(){t()},e.onerror=function(){n(e.error)},e.onabort=function(){n(e.error)}})}Ff.prototype.objectStore=function(){return new Pi(this._tx.objectStore.apply(this._tx,arguments))};uc(Ff,"_tx",["objectStoreNames","mode"]);Nv(Ff,"_tx",IDBTransaction,["abort"]);function Pv(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new Ff(n)}Pv.prototype.createObjectStore=function(){return new Pi(this._db.createObjectStore.apply(this._db,arguments))};uc(Pv,"_db",["name","version","objectStoreNames"]);Nv(Pv,"_db",IDBDatabase,["deleteObjectStore","close"]);function Ov(e){this._db=e}Ov.prototype.transaction=function(){return new Ff(this._db.transaction.apply(this._db,arguments))};uc(Ov,"_db",["name","version","objectStoreNames"]);Nv(Ov,"_db",IDBDatabase,["close"]);["openCursor","openKeyCursor"].forEach(function(e){[Pi,Ea].forEach(function(t){e in t.prototype&&(t.prototype[e.replace("open","iterate")]=function(){var n=y6(arguments),r=n[n.length-1],i=this._store||this._index,s=i[e].apply(i,n.slice(0,-1));s.onsuccess=function(){r(s.result)}})})});[Ea,Pi].forEach(function(e){e.prototype.getAll||(e.prototype.getAll=function(t,n){var r=this,i=[];return new Promise(function(s){r.iterateCursor(t,function(a){if(!a){s(i);return}if(i.push(a.value),n!==void 0&&i.length==n){s(i);return}a.continue()})})})});function aE(e,t,n){var r=Rv(indexedDB,"open",[e,t]),i=r.request;return i&&(i.onupgradeneeded=function(s){n&&n(new Pv(i.result,s.oldVersion,i.transaction))}),r.then(function(s){return new Ov(s)})}function Wy(e){return Rv(indexedDB,"deleteDatabase",[e])}var w6="@firebase/installations",KD="0.4.32";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zD=1e4,WD="w:"+KD,$D="FIS_v2",b6="https://firebaseinstallations.googleapis.com/v1",E6=60*60*1e3,T6="installations",I6="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wo,S6=(wo={},wo["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',wo["not-registered"]="Firebase Installation is not registered.",wo["installation-not-found"]="Firebase Installation not found.",wo["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',wo["app-offline"]="Could not process request. Application offline.",wo["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",wo),Zi=new no(T6,I6,S6);function GD(e){return e instanceof Gu&&e.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uE(e){var t=e.projectId;return b6+"/projects/"+t+"/installations"}function QD(e){return{token:e.token,requestStatus:2,expiresIn:C6(e.expiresIn),creationTime:Date.now()}}function cE(e,t){return A(this,void 0,void 0,function(){var n,r;return C(this,function(i){switch(i.label){case 0:return[4,t.json()];case 1:return n=i.sent(),r=n.error,[2,Zi.create("request-failed",{requestName:e,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}})})}function YD(e){var t=e.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function XD(e,t){var n=t.refreshToken,r=YD(e);return r.append("Authorization",A6(n)),r}function lE(e){return A(this,void 0,void 0,function(){var t;return C(this,function(n){switch(n.label){case 0:return[4,e()];case 1:return t=n.sent(),t.status>=500&&t.status<600?[2,e()]:[2,t]}})})}function C6(e){return Number(e.replace("s","000"))}function A6(e){return $D+" "+e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k6(e,t){var n=t.fid;return A(this,void 0,void 0,function(){var r,i,s,a,c,l,h;return C(this,function(d){switch(d.label){case 0:return r=uE(e),i=YD(e),s={fid:n,authVersion:$D,appId:e.appId,sdkVersion:WD},a={method:"POST",headers:i,body:JSON.stringify(s)},[4,lE(function(){return fetch(r,a)})];case 1:return c=d.sent(),c.ok?[4,c.json()]:[3,3];case 2:return l=d.sent(),h={fid:l.fid||n,registrationStatus:2,refreshToken:l.refreshToken,authToken:QD(l.authToken)},[2,h];case 3:return[4,cE("Create Installation",c)];case 4:throw d.sent()}})})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JD(e){return new Promise(function(t){setTimeout(t,e)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R6(e){var t=btoa(String.fromCharCode.apply(String,Ne([],fn(e))));return t.replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var N6=/^[cdef][\w-]{21}$/,Iw="";function P6(){try{var e=new Uint8Array(17),t=self.crypto||self.msCrypto;t.getRandomValues(e),e[0]=112+e[0]%16;var n=O6(e);return N6.test(n)?n:Iw}catch{return Iw}}function O6(e){var t=R6(e);return t.substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cc(e){return e.appName+"!"+e.appId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bu=new Map;function ZD(e,t){var n=cc(e);eL(n,t),L6(n,t)}function x6(e,t){tL();var n=cc(e),r=Bu.get(n);r||(r=new Set,Bu.set(n,r)),r.add(t)}function D6(e,t){var n=cc(e),r=Bu.get(n);r&&(r.delete(t),r.size===0&&Bu.delete(n),nL())}function eL(e,t){var n,r,i=Bu.get(e);if(i)try{for(var s=tn(i),a=s.next();!a.done;a=s.next()){var c=a.value;c(t)}}catch(l){n={error:l}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}function L6(e,t){var n=tL();n&&n.postMessage({key:e,fid:t}),nL()}var Us=null;function tL(){return!Us&&"BroadcastChannel"in self&&(Us=new BroadcastChannel("[Firebase] FID Change"),Us.onmessage=function(e){eL(e.data.key,e.data.fid)}),Us}function nL(){Bu.size===0&&Us&&(Us.close(),Us=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var M6="firebase-installations-database",F6=1,sa="firebase-installations-store",$y=null;function fE(){return $y||($y=aE(M6,F6,function(e){switch(e.oldVersion){case 0:e.createObjectStore(sa)}})),$y}function pp(e,t){return A(this,void 0,void 0,function(){var n,r,i,s,a;return C(this,function(c){switch(c.label){case 0:return n=cc(e),[4,fE()];case 1:return r=c.sent(),i=r.transaction(sa,"readwrite"),s=i.objectStore(sa),[4,s.get(n)];case 2:return a=c.sent(),[4,s.put(t,n)];case 3:return c.sent(),[4,i.complete];case 4:return c.sent(),(!a||a.fid!==t.fid)&&ZD(e,t.fid),[2,t]}})})}function hE(e){return A(this,void 0,void 0,function(){var t,n,r;return C(this,function(i){switch(i.label){case 0:return t=cc(e),[4,fE()];case 1:return n=i.sent(),r=n.transaction(sa,"readwrite"),[4,r.objectStore(sa).delete(t)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}})})}function Uf(e,t){return A(this,void 0,void 0,function(){var n,r,i,s,a,c;return C(this,function(l){switch(l.label){case 0:return n=cc(e),[4,fE()];case 1:return r=l.sent(),i=r.transaction(sa,"readwrite"),s=i.objectStore(sa),[4,s.get(n)];case 2:return a=l.sent(),c=t(a),c!==void 0?[3,4]:[4,s.delete(n)];case 3:return l.sent(),[3,6];case 4:return[4,s.put(c,n)];case 5:l.sent(),l.label=6;case 6:return[4,i.complete];case 7:return l.sent(),c&&(!a||a.fid!==c.fid)&&ZD(e,c.fid),[2,c]}})})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dE(e){return A(this,void 0,void 0,function(){var t,n,r;return C(this,function(i){switch(i.label){case 0:return[4,Uf(e,function(s){var a=U6(s),c=j6(e,a);return t=c.registrationPromise,c.installationEntry})];case 1:return n=i.sent(),n.fid!==Iw?[3,3]:(r={},[4,t]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:t}]}})})}function U6(e){var t=e||{fid:P6(),registrationStatus:0};return rL(t)}function j6(e,t){if(t.registrationStatus===0){if(!navigator.onLine){var n=Promise.reject(Zi.create("app-offline"));return{installationEntry:t,registrationPromise:n}}var r={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=V6(e,r);return{installationEntry:r,registrationPromise:i}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:B6(e)}:{installationEntry:t}}function V6(e,t){return A(this,void 0,void 0,function(){var n,r;return C(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,k6(e,t)];case 1:return n=i.sent(),[2,pp(e,n)];case 2:return r=i.sent(),GD(r)&&r.customData.serverCode===409?[4,hE(e)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,pp(e,{fid:t.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}})})}function B6(e){return A(this,void 0,void 0,function(){var t,n,r,i;return C(this,function(s){switch(s.label){case 0:return[4,lR(e)];case 1:t=s.sent(),s.label=2;case 2:return t.registrationStatus!==1?[3,5]:[4,JD(100)];case 3:return s.sent(),[4,lR(e)];case 4:return t=s.sent(),[3,2];case 5:return t.registrationStatus!==0?[3,7]:[4,dE(e)];case 6:return n=s.sent(),r=n.installationEntry,i=n.registrationPromise,i?[2,i]:[2,r];case 7:return[2,t]}})})}function lR(e){return Uf(e,function(t){if(!t)throw Zi.create("installation-not-found");return rL(t)})}function rL(e){return q6(e)?{fid:e.fid,registrationStatus:0}:e}function q6(e){return e.registrationStatus===1&&e.registrationTime+zD<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H6(e,t){var n=e.appConfig,r=e.platformLoggerProvider;return A(this,void 0,void 0,function(){var i,s,a,c,l,h,d,v;return C(this,function(m){switch(m.label){case 0:return i=K6(n,t),s=XD(n,t),a=r.getImmediate({optional:!0}),a&&s.append("x-firebase-client",a.getPlatformInfoString()),c={installation:{sdkVersion:WD}},l={method:"POST",headers:s,body:JSON.stringify(c)},[4,lE(function(){return fetch(i,l)})];case 1:return h=m.sent(),h.ok?[4,h.json()]:[3,3];case 2:return d=m.sent(),v=QD(d),[2,v];case 3:return[4,cE("Generate Auth Token",h)];case 4:throw m.sent()}})})}function K6(e,t){var n=t.fid;return uE(e)+"/"+n+"/authTokens:generate"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pE(e,t){return t===void 0&&(t=!1),A(this,void 0,void 0,function(){var n,r,i,s;return C(this,function(a){switch(a.label){case 0:return[4,Uf(e.appConfig,function(c){if(!iL(c))throw Zi.create("not-registered");var l=c.authToken;if(!t&&$6(l))return c;if(l.requestStatus===1)return n=z6(e,t),c;if(!navigator.onLine)throw Zi.create("app-offline");var h=Q6(c);return n=W6(e,h),h})];case 1:return r=a.sent(),n?[4,n]:[3,3];case 2:return s=a.sent(),[3,4];case 3:s=r.authToken,a.label=4;case 4:return i=s,[2,i]}})})}function z6(e,t){return A(this,void 0,void 0,function(){var n,r;return C(this,function(i){switch(i.label){case 0:return[4,fR(e.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return n.authToken.requestStatus!==1?[3,5]:[4,JD(100)];case 3:return i.sent(),[4,fR(e.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return r=n.authToken,r.requestStatus===0?[2,pE(e,t)]:[2,r]}})})}function fR(e){return Uf(e,function(t){if(!iL(t))throw Zi.create("not-registered");var n=t.authToken;return Y6(n)?me(me({},t),{authToken:{requestStatus:0}}):t})}function W6(e,t){return A(this,void 0,void 0,function(){var n,i,r,i;return C(this,function(s){switch(s.label){case 0:return s.trys.push([0,3,,8]),[4,H6(e,t)];case 1:return n=s.sent(),i=me(me({},t),{authToken:n}),[4,pp(e.appConfig,i)];case 2:return s.sent(),[2,n];case 3:return r=s.sent(),GD(r)&&(r.customData.serverCode===401||r.customData.serverCode===404)?[4,hE(e.appConfig)]:[3,5];case 4:return s.sent(),[3,7];case 5:return i=me(me({},t),{authToken:{requestStatus:0}}),[4,pp(e.appConfig,i)];case 6:s.sent(),s.label=7;case 7:throw r;case 8:return[2]}})})}function iL(e){return e!==void 0&&e.registrationStatus===2}function $6(e){return e.requestStatus===2&&!G6(e)}function G6(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+E6}function Q6(e){var t={requestStatus:1,requestTime:Date.now()};return me(me({},e),{authToken:t})}function Y6(e){return e.requestStatus===1&&e.requestTime+zD<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X6(e){return A(this,void 0,void 0,function(){var t,n,r;return C(this,function(i){switch(i.label){case 0:return[4,dE(e.appConfig)];case 1:return t=i.sent(),n=t.installationEntry,r=t.registrationPromise,r?r.catch(console.error):pE(e).catch(console.error),[2,n.fid]}})})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J6(e,t){return t===void 0&&(t=!1),A(this,void 0,void 0,function(){var n;return C(this,function(r){switch(r.label){case 0:return[4,Z6(e.appConfig)];case 1:return r.sent(),[4,pE(e,t)];case 2:return n=r.sent(),[2,n.token]}})})}function Z6(e){return A(this,void 0,void 0,function(){var t;return C(this,function(n){switch(n.label){case 0:return[4,dE(e)];case 1:return t=n.sent().registrationPromise,t?[4,t]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}})})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eQ(e,t){return A(this,void 0,void 0,function(){var n,r,i,s;return C(this,function(a){switch(a.label){case 0:return n=tQ(e,t),r=XD(e,t),i={method:"DELETE",headers:r},[4,lE(function(){return fetch(n,i)})];case 1:return s=a.sent(),s.ok?[3,3]:[4,cE("Delete Installation",s)];case 2:throw a.sent();case 3:return[2]}})})}function tQ(e,t){var n=t.fid;return uE(e)+"/"+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nQ(e){return A(this,void 0,void 0,function(){var t,n;return C(this,function(r){switch(r.label){case 0:return t=e.appConfig,[4,Uf(t,function(i){if(!(i&&i.registrationStatus===0))return i})];case 1:if(n=r.sent(),!n)return[3,6];if(n.registrationStatus!==1)return[3,2];throw Zi.create("delete-pending-registration");case 2:if(n.registrationStatus!==2)return[3,6];if(navigator.onLine)return[3,3];throw Zi.create("app-offline");case 3:return[4,eQ(t,n)];case 4:return r.sent(),[4,hE(t)];case 5:r.sent(),r.label=6;case 6:return[2]}})})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rQ(e,t){var n=e.appConfig;return x6(n,t),function(){D6(n,t)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iQ(e){var t,n;if(!e||!e.options)throw Gy("App Configuration");if(!e.name)throw Gy("App Name");var r=["projectId","apiKey","appId"];try{for(var i=tn(r),s=i.next();!s.done;s=i.next()){var a=s.value;if(!e.options[a])throw Gy(a)}}catch(c){t={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function Gy(e){return Zi.create("missing-app-config-values",{valueName:e})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oQ(e){var t="installations";e.INTERNAL.registerComponent(new kn(t,function(n){var r=n.getProvider("app").getImmediate(),i=iQ(r),s=n.getProvider("platform-logger"),a={appConfig:i,platformLoggerProvider:s},c={app:r,getId:function(){return X6(a)},getToken:function(l){return J6(a,l)},delete:function(){return nQ(a)},onIdChange:function(l){return rQ(a,l)}};return c},"PUBLIC")),e.registerVersion(w6,KD)}oQ(ue);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jt,sQ=(jt={},jt["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',jt["only-available-in-window"]="This method is available in a Window context.",jt["only-available-in-sw"]="This method is available in a service worker context.",jt["permission-default"]="The notification permission was not granted and dismissed instead.",jt["permission-blocked"]="The notification permission was not granted and blocked instead.",jt["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",jt["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",jt["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",jt["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",jt["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",jt["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",jt["token-update-no-token"]="FCM returned no token when updating the user to push.",jt["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",jt["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",jt["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",jt["invalid-vapid-key"]="The public VAPID key must be a string.",jt["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",jt),Ze=new no("messaging","Messaging",sQ);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var aQ="/firebase-messaging-sw.js",uQ="/firebase-cloud-messaging-push-scope",vp="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",cQ="https://fcmregistrations.googleapis.com/v1",oL="FCM_MSG",lQ="FirebaseMessaging: ",fQ="google.c.a.e",sL="google.c.a.c_id",hQ="google.c.a.ts",dQ="google.c.a.c_l",pQ=1e3,vQ=3e3;/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var aa;(function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"})(aa||(aa={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qi(e){var t=new Uint8Array(e),n=btoa(String.fromCharCode.apply(String,Ne([],fn(t))));return n.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function gQ(e){for(var t="=".repeat((4-e.length%4)%4),n=(e+t).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length),s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qy="fcm_token_details_db",mQ=5,hR="fcm_token_object_Store";function yQ(e){return A(this,void 0,void 0,function(){var t,n,r,i,s=this;return C(this,function(a){switch(a.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(t=a.sent(),n=t.map(function(c){return c.name}),!n.includes(Qy))return[2,null];a.label=2;case 2:return r=null,[4,aE(Qy,mQ,function(c){return A(s,void 0,void 0,function(){var l,h,d,d,d,v;return C(this,function(m){switch(m.label){case 0:return c.oldVersion<2?[2]:c.objectStoreNames.contains(hR)?(l=c.transaction.objectStore(hR),[4,l.index("fcmSenderId").get(e)]):[2];case 1:return h=m.sent(),[4,l.clear()];case 2:if(m.sent(),!h)return[2];if(c.oldVersion===2){if(d=h,!d.auth||!d.p256dh||!d.endpoint)return[2];r={token:d.fcmToken,createTime:(v=d.createTime)!==null&&v!==void 0?v:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:typeof d.vapidKey=="string"?d.vapidKey:qi(d.vapidKey)}}}else c.oldVersion===3?(d=h,r={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:qi(d.auth),p256dh:qi(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:qi(d.vapidKey)}}):c.oldVersion===4&&(d=h,r={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:qi(d.auth),p256dh:qi(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:qi(d.vapidKey)}});return[2]}})})})];case 3:return i=a.sent(),i.close(),[4,Wy(Qy)];case 4:return a.sent(),[4,Wy("fcm_vapid_details_db")];case 5:return a.sent(),[4,Wy("undefined")];case 6:return a.sent(),[2,_Q(r)?r:null]}})})}function _Q(e){if(!e||!e.subscriptionOptions)return!1;var t=e.subscriptionOptions;return typeof e.createTime=="number"&&e.createTime>0&&typeof e.token=="string"&&e.token.length>0&&typeof t.auth=="string"&&t.auth.length>0&&typeof t.p256dh=="string"&&t.p256dh.length>0&&typeof t.endpoint=="string"&&t.endpoint.length>0&&typeof t.swScope=="string"&&t.swScope.length>0&&typeof t.vapidKey=="string"&&t.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wQ="firebase-messaging-database",bQ=1,ua="firebase-messaging-store",Yy=null;function vE(){return Yy||(Yy=aE(wQ,bQ,function(e){switch(e.oldVersion){case 0:e.createObjectStore(ua)}})),Yy}function gp(e){return A(this,void 0,void 0,function(){var t,n,r,i;return C(this,function(s){switch(s.label){case 0:return t=mE(e),[4,vE()];case 1:return n=s.sent(),[4,n.transaction(ua).objectStore(ua).get(t)];case 2:return r=s.sent(),r?[2,r]:[3,3];case 3:return[4,yQ(e.appConfig.senderId)];case 4:return i=s.sent(),i?[4,gE(e,i)]:[3,6];case 5:return s.sent(),[2,i];case 6:return[2]}})})}function gE(e,t){return A(this,void 0,void 0,function(){var n,r,i;return C(this,function(s){switch(s.label){case 0:return n=mE(e),[4,vE()];case 1:return r=s.sent(),i=r.transaction(ua,"readwrite"),[4,i.objectStore(ua).put(t,n)];case 2:return s.sent(),[4,i.complete];case 3:return s.sent(),[2,t]}})})}function EQ(e){return A(this,void 0,void 0,function(){var t,n,r;return C(this,function(i){switch(i.label){case 0:return t=mE(e),[4,vE()];case 1:return n=i.sent(),r=n.transaction(ua,"readwrite"),[4,r.objectStore(ua).delete(t)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}})})}function mE(e){var t=e.appConfig;return t.appId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TQ(e,t){return A(this,void 0,void 0,function(){var n,r,i,s,a,c,l;return C(this,function(h){switch(h.label){case 0:return[4,_E(e)];case 1:n=h.sent(),r=uL(t),i={method:"POST",headers:n,body:JSON.stringify(r)},h.label=2;case 2:return h.trys.push([2,5,,6]),[4,fetch(yE(e.appConfig),i)];case 3:return a=h.sent(),[4,a.json()];case 4:return s=h.sent(),[3,6];case 5:throw c=h.sent(),Ze.create("token-subscribe-failed",{errorInfo:c});case 6:if(s.error)throw l=s.error.message,Ze.create("token-subscribe-failed",{errorInfo:l});if(!s.token)throw Ze.create("token-subscribe-no-token");return[2,s.token]}})})}function IQ(e,t){return A(this,void 0,void 0,function(){var n,r,i,s,a,c,l;return C(this,function(h){switch(h.label){case 0:return[4,_E(e)];case 1:n=h.sent(),r=uL(t.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},h.label=2;case 2:return h.trys.push([2,5,,6]),[4,fetch(yE(e.appConfig)+"/"+t.token,i)];case 3:return a=h.sent(),[4,a.json()];case 4:return s=h.sent(),[3,6];case 5:throw c=h.sent(),Ze.create("token-update-failed",{errorInfo:c});case 6:if(s.error)throw l=s.error.message,Ze.create("token-update-failed",{errorInfo:l});if(!s.token)throw Ze.create("token-update-no-token");return[2,s.token]}})})}function aL(e,t){return A(this,void 0,void 0,function(){var n,r,i,s,a,c;return C(this,function(l){switch(l.label){case 0:return[4,_E(e)];case 1:n=l.sent(),r={method:"DELETE",headers:n},l.label=2;case 2:return l.trys.push([2,5,,6]),[4,fetch(yE(e.appConfig)+"/"+t,r)];case 3:return i=l.sent(),[4,i.json()];case 4:if(s=l.sent(),s.error)throw a=s.error.message,Ze.create("token-unsubscribe-failed",{errorInfo:a});return[3,6];case 5:throw c=l.sent(),Ze.create("token-unsubscribe-failed",{errorInfo:c});case 6:return[2]}})})}function yE(e){var t=e.projectId;return cQ+"/projects/"+t+"/registrations"}function _E(e){var t=e.appConfig,n=e.installations;return A(this,void 0,void 0,function(){var r;return C(this,function(i){switch(i.label){case 0:return[4,n.getToken()];case 1:return r=i.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":"FIS "+r})]}})})}function uL(e){var t=e.p256dh,n=e.auth,r=e.endpoint,i=e.vapidKey,s={web:{endpoint:r,auth:n,p256dh:t}};return i!==vp&&(s.web.applicationPubKey=i),s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var SQ=7*24*60*60*1e3;function Sw(e,t,n){return A(this,void 0,void 0,function(){var r,i,s,a;return C(this,function(c){switch(c.label){case 0:if(Notification.permission!=="granted")throw Ze.create("permission-blocked");return[4,AQ(t,n)];case 1:return r=c.sent(),[4,gp(e)];case 2:return i=c.sent(),s={vapidKey:n,swScope:t.scope,endpoint:r.endpoint,auth:qi(r.getKey("auth")),p256dh:qi(r.getKey("p256dh"))},i?[3,3]:[2,dR(e,s)];case 3:if(kQ(i.subscriptionOptions,s))return[3,8];c.label=4;case 4:return c.trys.push([4,6,,7]),[4,aL(e,i.token)];case 5:return c.sent(),[3,7];case 6:return a=c.sent(),console.warn(a),[3,7];case 7:return[2,dR(e,s)];case 8:return Date.now()>=i.createTime+SQ?[2,CQ({token:i.token,createTime:Date.now(),subscriptionOptions:s},e,t)]:[2,i.token];case 9:return[2]}})})}function _l(e,t){return A(this,void 0,void 0,function(){var n,r;return C(this,function(i){switch(i.label){case 0:return[4,gp(e)];case 1:return n=i.sent(),n?[4,aL(e,n.token)]:[3,4];case 2:return i.sent(),[4,EQ(e)];case 3:i.sent(),i.label=4;case 4:return[4,t.pushManager.getSubscription()];case 5:return r=i.sent(),r?[2,r.unsubscribe()]:[2,!0]}})})}function CQ(e,t,n){return A(this,void 0,void 0,function(){var r,i,s;return C(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,,5]),[4,IQ(t,e)];case 1:return r=a.sent(),i=me(me({},e),{token:r,createTime:Date.now()}),[4,gE(t,i)];case 2:return a.sent(),[2,r];case 3:return s=a.sent(),[4,_l(t,n)];case 4:throw a.sent(),s;case 5:return[2]}})})}function dR(e,t){return A(this,void 0,void 0,function(){var n,r;return C(this,function(i){switch(i.label){case 0:return[4,TQ(e,t)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:t},[4,gE(e,r)];case 2:return i.sent(),[2,r.token]}})})}function AQ(e,t){return A(this,void 0,void 0,function(){var n;return C(this,function(r){switch(r.label){case 0:return[4,e.pushManager.getSubscription()];case 1:return n=r.sent(),n?[2,n]:[2,e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:gQ(t)})]}})})}function kQ(e,t){var n=t.vapidKey===e.vapidKey,r=t.endpoint===e.endpoint,i=t.auth===e.auth,s=t.p256dh===e.p256dh;return n&&r&&i&&s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RQ(e){var t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcm_message_id};return NQ(t,e),PQ(t,e),OQ(t,e),t}function NQ(e,t){if(t.notification){e.notification={};var n=t.notification.title;n&&(e.notification.title=n);var r=t.notification.body;r&&(e.notification.body=r);var i=t.notification.image;i&&(e.notification.image=i)}}function PQ(e,t){t.data&&(e.data=t.data)}function OQ(e,t){if(t.fcmOptions){e.fcmOptions={};var n=t.fcmOptions.link;n&&(e.fcmOptions.link=n);var r=t.fcmOptions.analytics_label;r&&(e.fcmOptions.analyticsLabel=r)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cL(e){return typeof e=="object"&&!!e&&sL in e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pR(e){return new Promise(function(t){setTimeout(t,e)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xQ=function(){function e(t){var n=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",function(r){r.waitUntil(n.onPush(r))}),self.addEventListener("pushsubscriptionchange",function(r){r.waitUntil(n.onSubChange(r))}),self.addEventListener("notificationclick",function(r){r.waitUntil(n.onNotificationClick(r))})}return Object.defineProperty(e.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),e.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||typeof t!="function")throw Ze.create("invalid-bg-handler");this.bgMessageHandler=t},e.prototype.onBackgroundMessage=function(t){var n=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){n.bgMessageHandler=null}},e.prototype.getToken=function(){var t,n;return A(this,void 0,void 0,function(){var r;return C(this,function(i){switch(i.label){case 0:return this.vapidKey?[3,2]:[4,gp(this.firebaseDependencies)];case 1:r=i.sent(),this.vapidKey=(n=(t=r==null?void 0:r.subscriptionOptions)===null||t===void 0?void 0:t.vapidKey)!==null&&n!==void 0?n:vp,i.label=2;case 2:return[2,Sw(this.firebaseDependencies,self.registration,this.vapidKey)]}})})},e.prototype.deleteToken=function(){return _l(this.firebaseDependencies,self.registration)},e.prototype.requestPermission=function(){throw Ze.create("only-available-in-window")},e.prototype.usePublicVapidKey=function(t){if(this.vapidKey!==null)throw Ze.create("use-vapid-key-after-get-token");if(typeof t!="string"||t.length===0)throw Ze.create("invalid-vapid-key");this.vapidKey=t},e.prototype.useServiceWorker=function(){throw Ze.create("only-available-in-window")},e.prototype.onMessage=function(){throw Ze.create("only-available-in-window")},e.prototype.onTokenRefresh=function(){throw Ze.create("only-available-in-window")},e.prototype.onPush=function(t){return A(this,void 0,void 0,function(){var n,r,i,s;return C(this,function(a){switch(a.label){case 0:return n=LQ(t),n?[4,lL()]:(console.debug(lQ+"failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return r=a.sent(),FQ(r)?[2,UQ(r,n)]:(i=!1,n.notification?[4,jQ(DQ(n))]:[3,3]);case 2:a.sent(),i=!0,a.label=3;case 3:return i===!0&&this.isOnBackgroundMessageUsed===!1?[2]:(this.bgMessageHandler&&(s=RQ(n),typeof this.bgMessageHandler=="function"?this.bgMessageHandler(s):this.bgMessageHandler.next(s)),[4,pR(pQ)]);case 4:return a.sent(),[2]}})})},e.prototype.onSubChange=function(t){var n,r;return A(this,void 0,void 0,function(){var i,s;return C(this,function(a){switch(a.label){case 0:return i=t.newSubscription,i?[3,2]:[4,_l(this.firebaseDependencies,self.registration)];case 1:return a.sent(),[2];case 2:return[4,gp(this.firebaseDependencies)];case 3:return s=a.sent(),[4,_l(this.firebaseDependencies,self.registration)];case 4:return a.sent(),[4,Sw(this.firebaseDependencies,self.registration,(r=(n=s==null?void 0:s.subscriptionOptions)===null||n===void 0?void 0:n.vapidKey)!==null&&r!==void 0?r:vp)];case 5:return a.sent(),[2]}})})},e.prototype.onNotificationClick=function(t){var n,r;return A(this,void 0,void 0,function(){var i,s,a,c,l;return C(this,function(h){switch(h.label){case 0:if(i=(r=(n=t.notification)===null||n===void 0?void 0:n.data)===null||r===void 0?void 0:r[oL],i){if(t.action)return[2]}else return[2];return t.stopImmediatePropagation(),t.notification.close(),s=VQ(i),s?(a=new URL(s,self.location.href),c=new URL(self.location.origin),a.host!==c.host?[2]:[4,MQ(a)]):[2];case 1:return l=h.sent(),l?[3,4]:[4,self.clients.openWindow(s)];case 2:return l=h.sent(),[4,pR(vQ)];case 3:return h.sent(),[3,6];case 4:return[4,l.focus()];case 5:l=h.sent(),h.label=6;case 6:return l?(i.messageType=aa.NOTIFICATION_CLICKED,i.isFirebaseMessaging=!0,[2,l.postMessage(i)]):[2]}})})},e}();function DQ(e){var t,n=me({},e.notification);return n.data=(t={},t[oL]=e,t),n}function LQ(e){var t=e.data;if(!t)return null;try{return t.json()}catch{return null}}function MQ(e){return A(this,void 0,void 0,function(){var t,n,r,i,s,a,c;return C(this,function(l){switch(l.label){case 0:return[4,lL()];case 1:t=l.sent();try{for(n=tn(t),r=n.next();!r.done;r=n.next())if(i=r.value,s=new URL(i.url,self.location.href),e.host===s.host)return[2,i]}catch(h){a={error:h}}finally{try{r&&!r.done&&(c=n.return)&&c.call(n)}finally{if(a)throw a.error}}return[2,null]}})})}function FQ(e){return e.some(function(t){return t.visibilityState==="visible"&&!t.url.startsWith("chrome-extension://")})}function UQ(e,t){var n,r;t.isFirebaseMessaging=!0,t.messageType=aa.PUSH_RECEIVED;try{for(var i=tn(e),s=i.next();!s.done;s=i.next()){var a=s.value;a.postMessage(t)}}catch(c){n={error:c}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function lL(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function jQ(e){var t,n=e.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification((t=e.title)!==null&&t!==void 0?t:"",e)}function VQ(e){var t,n,r,i=(n=(t=e.fcmOptions)===null||t===void 0?void 0:t.link)!==null&&n!==void 0?n:(r=e.notification)===null||r===void 0?void 0:r.click_action;return i||(cL(e.data)?self.location.origin:null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var BQ=function(){function e(t){var n=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",function(r){return n.messageEventListener(r)})}return Object.defineProperty(e.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),e.prototype.messageEventListener=function(t){return A(this,void 0,void 0,function(){var n,r;return C(this,function(i){switch(i.label){case 0:return n=t.data,n.isFirebaseMessaging?(this.onMessageCallback&&n.messageType===aa.PUSH_RECEIVED&&(typeof this.onMessageCallback=="function"?this.onMessageCallback(HQ(Object.assign({},n))):this.onMessageCallback.next(Object.assign({},n))),r=n.data,cL(r)&&r[fQ]==="1"?[4,this.logEvent(n.messageType,r)]:[3,2]):[2];case 1:i.sent(),i.label=2;case 2:return[2]}})})},e.prototype.getVapidKey=function(){return this.vapidKey},e.prototype.getSwReg=function(){return this.swRegistration},e.prototype.getToken=function(t){return A(this,void 0,void 0,function(){return C(this,function(n){switch(n.label){case 0:return Notification.permission!=="default"?[3,2]:[4,Notification.requestPermission()];case 1:n.sent(),n.label=2;case 2:if(Notification.permission!=="granted")throw Ze.create("permission-blocked");return[4,this.updateVapidKey(t==null?void 0:t.vapidKey)];case 3:return n.sent(),[4,this.updateSwReg(t==null?void 0:t.serviceWorkerRegistration)];case 4:return n.sent(),[2,Sw(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}})})},e.prototype.updateVapidKey=function(t){return A(this,void 0,void 0,function(){return C(this,function(n){return t?this.vapidKey=t:this.vapidKey||(this.vapidKey=vp),[2]})})},e.prototype.updateSwReg=function(t){return A(this,void 0,void 0,function(){return C(this,function(n){switch(n.label){case 0:return!t&&!this.swRegistration?[4,this.registerDefaultSw()]:[3,2];case 1:n.sent(),n.label=2;case 2:if(!t&&this.swRegistration)return[2];if(!(t instanceof ServiceWorkerRegistration))throw Ze.create("invalid-sw-registration");return this.swRegistration=t,[2]}})})},e.prototype.registerDefaultSw=function(){return A(this,void 0,void 0,function(){var t,n;return C(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),t=this,[4,navigator.serviceWorker.register(aQ,{scope:uQ})];case 1:return t.swRegistration=r.sent(),this.swRegistration.update().catch(function(){}),[3,3];case 2:throw n=r.sent(),Ze.create("failed-service-worker-registration",{browserErrorMessage:n.message});case 3:return[2]}})})},e.prototype.deleteToken=function(){return A(this,void 0,void 0,function(){return C(this,function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,_l(this.firebaseDependencies,this.swRegistration)]}})})},e.prototype.requestPermission=function(){return A(this,void 0,void 0,function(){var t;return C(this,function(n){switch(n.label){case 0:return Notification.permission==="granted"?[2]:[4,Notification.requestPermission()];case 1:if(t=n.sent(),t==="granted")return[2];throw t==="denied"?Ze.create("permission-blocked"):Ze.create("permission-default")}})})},e.prototype.usePublicVapidKey=function(t){if(this.vapidKey!==null)throw Ze.create("use-vapid-key-after-get-token");if(typeof t!="string"||t.length===0)throw Ze.create("invalid-vapid-key");this.vapidKey=t},e.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw Ze.create("invalid-sw-registration");if(this.swRegistration)throw Ze.create("use-sw-after-get-token");this.swRegistration=t},e.prototype.onMessage=function(t){var n=this;return this.onMessageCallback=t,function(){n.onMessageCallback=null}},e.prototype.setBackgroundMessageHandler=function(){throw Ze.create("only-available-in-sw")},e.prototype.onBackgroundMessage=function(){throw Ze.create("only-available-in-sw")},e.prototype.onTokenRefresh=function(){return function(){}},e.prototype.logEvent=function(t,n){return A(this,void 0,void 0,function(){var r,i;return C(this,function(s){switch(s.label){case 0:return r=qQ(t),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return i=s.sent(),i.logEvent(r,{message_id:n[sL],message_name:n[dQ],message_time:n[hQ],message_device_time:Math.floor(Date.now()/1e3)}),[2]}})})},e}();function qQ(e){switch(e){case aa.NOTIFICATION_CLICKED:return"notification_open";case aa.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function HQ(e){return delete e.messageType,delete e.isFirebaseMessaging,e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KQ(e){var t,n;if(!e||!e.options)throw Xy("App Configuration Object");if(!e.name)throw Xy("App Name");var r=["projectId","apiKey","appId","messagingSenderId"],i=e.options;try{for(var s=tn(r),a=s.next();!a.done;a=s.next()){var c=a.value;if(!i[c])throw Xy(c)}}catch(l){t={error:l}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return{appName:e.name,projectId:i.projectId,apiKey:i.apiKey,appId:i.appId,senderId:i.messagingSenderId}}function Xy(e){return Ze.create("missing-app-config-values",{valueName:e})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zQ="messaging";function WQ(e){var t=e.getProvider("app").getImmediate(),n=KQ(t),r=e.getProvider("installations").getImmediate(),i=e.getProvider("analytics-internal"),s={app:t,appConfig:n,installations:r,analyticsProvider:i};if(!fL())throw Ze.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new xQ(s):new BQ(s)}var $Q={isSupported:fL};ue.INTERNAL.registerComponent(new kn(zQ,WQ,"PUBLIC").setServiceProps($Q));function fL(){return self&&"ServiceWorkerGlobalScope"in self?QQ():GQ()}function GQ(){return"indexedDB"in window&&indexedDB!==null&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function QQ(){return"indexedDB"in self&&indexedDB!==null&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hL="firebasestorage.googleapis.com",dL="storageBucket",YQ=2*60*1e3,XQ=10*60*1e3,Mt=function(e){te(t,e);function t(n,r){var i=e.call(this,Jy(n),"Firebase Storage: "+r+" ("+Jy(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,t.prototype),i}return t.prototype._codeEquals=function(n){return Jy(n)===this.code},Object.defineProperty(t.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(n){this.customData.serverResponse=n,this.customData.serverResponse?this.message=this._baseMessage+`
`+this.customData.serverResponse:this.message=this._baseMessage},enumerable:!1,configurable:!0}),t}(Gu);function Jy(e){return"storage/"+e}function wE(){var e="An unknown error occurred, please check the error payload for server response.";return new Mt("unknown",e)}function JQ(e){return new Mt("object-not-found","Object '"+e+"' does not exist.")}function ZQ(e){return new Mt("quota-exceeded","Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function e5(){var e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Mt("unauthenticated",e)}function t5(){return new Mt("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}function n5(e){return new Mt("unauthorized","User does not have permission to access '"+e+"'.")}function r5(){return new Mt("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function pL(){return new Mt("canceled","User canceled the upload/download.")}function i5(e){return new Mt("invalid-url","Invalid URL '"+e+"'.")}function o5(e){return new Mt("invalid-default-bucket","Invalid default bucket '"+e+"'.")}function s5(){return new Mt("no-default-bucket","No default bucket found. Did you set the '"+dL+"' property when initializing the app?")}function vL(){return new Mt("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function a5(){return new Mt("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}function u5(){return new Mt("no-download-url","The given file does not have any download URLs.")}function hu(e){return new Mt("invalid-argument",e)}function gL(){return new Mt("app-deleted","The Firebase app was deleted.")}function mL(e){return new Mt("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function wl(e,t){return new Mt("invalid-format","String does not match format '"+e+"': "+t)}function rd(e){throw new Mt("internal-error","Internal error: "+e)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c5(e){return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Zy=function(){function e(t,n){this.data=t,this.contentType=n||null}return e}();function yL(e,t){switch(e){case Rr.RAW:return new Zy(_L(t));case Rr.BASE64:case Rr.BASE64URL:return new Zy(wL(e,t));case Rr.DATA_URL:return new Zy(f5(t),h5(t))}throw wE()}function _L(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296){var i=n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320;if(!i)t.push(239,191,189);else{var s=r,a=e.charCodeAt(++n);r=65536|(s&1023)<<10|a&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function l5(e){var t;try{t=decodeURIComponent(e)}catch{throw wl(Rr.DATA_URL,"Malformed data URL.")}return _L(t)}function wL(e,t){switch(e){case Rr.BASE64:{var n=t.indexOf("-")!==-1,r=t.indexOf("_")!==-1;if(n||r){var i=n?"-":"_";throw wl(e,"Invalid character '"+i+"' found: is it base64url encoded?")}break}case Rr.BASE64URL:{var s=t.indexOf("+")!==-1,a=t.indexOf("/")!==-1;if(s||a){var i=s?"+":"/";throw wl(e,"Invalid character '"+i+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}var c;try{c=c5(t)}catch{throw wl(e,"Invalid character found")}for(var l=new Uint8Array(c.length),h=0;h<c.length;h++)l[h]=c.charCodeAt(h);return l}var bL=function(){function e(t){this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(n===null)throw wl(Rr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;r!=null&&(this.base64=d5(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}return e}();function f5(e){var t=new bL(e);return t.base64?wL(Rr.BASE64,t.rest):l5(t.rest)}function h5(e){var t=new bL(e);return t.contentType}function d5(e,t){var n=e.length>=t.length;return n?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var p5={STATE_CHANGED:"state_changed"},Vn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function e_(e){switch(e){case"running":case"pausing":case"canceling":return Vn.RUNNING;case"paused":return Vn.PAUSED;case"success":return Vn.SUCCESS;case"canceled":return Vn.CANCELED;case"error":return Vn.ERROR;default:return Vn.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gs;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(Gs||(Gs={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var v5=function(){function e(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=Gs.NO_ERROR,this.sendPromise_=new Promise(function(n){t.xhr_.addEventListener("abort",function(){t.errorCode_=Gs.ABORT,n()}),t.xhr_.addEventListener("error",function(){t.errorCode_=Gs.NETWORK_ERROR,n()}),t.xhr_.addEventListener("load",function(){n()})})}return e.prototype.send=function(t,n,r,i){if(this.sent_)throw rd("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(var s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_},e.prototype.getErrorCode=function(){if(!this.sent_)throw rd("cannot .getErrorCode() before sending");return this.errorCode_},e.prototype.getStatus=function(){if(!this.sent_)throw rd("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}},e.prototype.getResponseText=function(){if(!this.sent_)throw rd("cannot .getResponseText() before sending");return this.xhr_.responseText},e.prototype.abort=function(){this.xhr_.abort()},e.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},e.prototype.addUploadProgressListener=function(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)},e.prototype.removeUploadProgressListener=function(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)},e}();function g5(){return new v5}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var m5=function(){function e(){}return e.prototype.createConnection=function(){return g5()},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nr=function(){function e(t,n){this.bucket=t,this.path_=n}return Object.defineProperty(e.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isRoot",{get:function(){return this.path.length===0},enumerable:!1,configurable:!0}),e.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},e.prototype.bucketOnlyServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o"},e.makeFromBucketSpec=function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch{return new e(t,"")}if(r.path==="")return r;throw o5(t)},e.makeFromUrl=function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";function s(ge){ge.path.charAt(ge.path.length-1)==="/"&&(ge.path_=ge.path_.slice(0,-1))}var a="(/(.*))?$",c=new RegExp("^gs://"+i+a,"i"),l={bucket:1,path:3};function h(ge){ge.path_=decodeURIComponent(ge.path)}for(var d="v[A-Za-z0-9_]+",v=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",y=new RegExp("^https?://"+v+"/"+d+"/b/"+i+"/o"+m,"i"),w={bucket:1,path:3},E=n===hL?"(?:storage.googleapis.com|storage.cloud.google.com)":n,T="([^?#]*)",k=new RegExp("^https?://"+E+"/"+i+"/"+T,"i"),P={bucket:1,path:2},O=[{regex:c,indices:l,postModify:s},{regex:y,indices:w,postModify:h},{regex:k,indices:P,postModify:h}],H=0;H<O.length;H++){var K=O[H],U=K.regex.exec(t);if(U){var ie=U[K.indices.bucket],F=U[K.indices.path];F||(F=""),r=new e(ie,F),K.postModify(r);break}}if(r==null)throw i5(t);return r},e}(),y5=function(){function e(t){this.promise_=Promise.reject(t)}return e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(t){},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _5(e,t,n){var r=1,i=null,s=!1,a=0;function c(){return a===2}var l=!1;function h(){for(var w=[],E=0;E<arguments.length;E++)w[E]=arguments[E];l||(l=!0,t.apply(null,w))}function d(w){i=setTimeout(function(){i=null,e(v,c())},w)}function v(w){for(var E=[],T=1;T<arguments.length;T++)E[T-1]=arguments[T];if(!l){if(w){h.call.apply(h,Ne([null,w],E));return}var k=c()||s;if(k){h.call.apply(h,Ne([null,w],E));return}r<64&&(r*=2);var P;a===1?(a=2,P=0):P=(r+Math.random())*1e3,d(P)}}var m=!1;function y(w){m||(m=!0,!l&&(i!==null?(w||(a=2),clearTimeout(i),d(0)):w||(a=1)))}return d(0),setTimeout(function(){s=!0,y(!0)},n),y}function w5(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b5(e){return e!==void 0}function E5(e){return typeof e=="function"}function T5(e){return typeof e=="object"&&!Array.isArray(e)}function xv(e){return typeof e=="string"||e instanceof String}function vR(e){return bE()&&e instanceof Blob}function bE(){return typeof Blob<"u"}function Cw(e,t,n,r){if(r<t)throw hu("Invalid value for '"+e+"'. Expected "+t+" or greater.");if(r>n)throw hu("Invalid value for '"+e+"'. Expected "+n+" or less.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jo(e,t){var n=t.match(/^(\w+):\/\/.+/),r=n==null?void 0:n[1],i=t;return r==null&&(i="https://"+t),i+"/v0"+e}function EL(e){var t=encodeURIComponent,n="?";for(var r in e)if(e.hasOwnProperty(r)){var i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var I5=function(){function e(t,n,r,i,s,a,c,l,h,d,v){var m=this;this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s.slice(),this.additionalRetryCodes_=a.slice(),this.callback_=c,this.errorCallback_=l,this.progressCallback_=d,this.timeout_=h,this.pool_=v,this.promise_=new Promise(function(y,w){m.resolve_=y,m.reject_=w,m.start_()})}return e.prototype.start_=function(){var t=this;function n(i,s){if(s){i(!1,new id(!1,null,!0));return}var a=t.pool_.createConnection();t.pendingConnection_=a;function c(l){var h=l.loaded,d=l.lengthComputable?l.total:-1;t.progressCallback_!==null&&t.progressCallback_(h,d)}t.progressCallback_!==null&&a.addUploadProgressListener(c),a.send(t.url_,t.method_,t.body_,t.headers_).then(function(){t.progressCallback_!==null&&a.removeUploadProgressListener(c),t.pendingConnection_=null;var l=a.getErrorCode()===Gs.NO_ERROR,h=a.getStatus();if(!l||t.isRetryStatusCode_(h)){var d=a.getErrorCode()===Gs.ABORT;i(!1,new id(!1,null,d));return}var v=t.successCodes_.indexOf(h)!==-1;i(!0,new id(v,a))})}function r(i,s){var a=t.resolve_,c=t.reject_,l=s.connection;if(s.wasSuccessCode)try{var h=t.callback_(l,l.getResponseText());b5(h)?a(h):a()}catch(v){c(v)}else if(l!==null){var d=wE();d.serverResponse=l.getResponseText(),t.errorCallback_?c(t.errorCallback_(l,d)):c(d)}else if(s.canceled){var d=t.appDelete_?gL():pL();c(d)}else{var d=r5();c(d)}}this.canceled_?r(!1,new id(!1,null,!0)):this.backoffId_=_5(n,r,this.timeout_)},e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&w5(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()},e.prototype.isRetryStatusCode_=function(t){var n=t>=500&&t<600,r=[408,429],i=r.indexOf(t)!==-1,s=this.additionalRetryCodes_.indexOf(t)!==-1;return n||i||s},e}(),id=function(){function e(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}return e}();function S5(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function C5(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function A5(e,t){t&&(e["X-Firebase-GMPID"]=t)}function k5(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function R5(e,t,n,r,i,s){var a=EL(e.urlParams),c=e.url+a,l=Object.assign({},e.headers);return A5(l,t),S5(l,n),C5(l,s),k5(l,r),new I5(c,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N5(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function P5(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=N5();if(n!==void 0){for(var r=new n,i=0;i<e.length;i++)r.append(e[i]);return r.getBlob()}else{if(bE())return new Blob(e);throw new Mt("unsupported-environment","This browser doesn't seem to support creating Blobs")}}function O5(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var EE=function(){function e(t,n){var r=0,i="";vR(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return e.prototype.size=function(){return this.size_},e.prototype.type=function(){return this.type_},e.prototype.slice=function(t,n){if(vR(this.data_)){var r=this.data_,i=O5(r,t,n);return i===null?null:new e(i)}else{var s=new Uint8Array(this.data_.buffer,t,n-t);return new e(s,!0)}},e.getBlob=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(bE()){var r=t.map(function(l){return l instanceof e?l.data_:l});return new e(P5.apply(null,r))}else{var i=t.map(function(l){return xv(l)?yL(Rr.RAW,l).data:l.data_}),s=0;i.forEach(function(l){s+=l.byteLength});var a=new Uint8Array(s),c=0;return i.forEach(function(l){for(var h=0;h<l.length;h++)a[c++]=l[h]}),new e(a,!0)}},e.prototype.uploadData=function(){return this.data_},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TE(e){var t;try{t=JSON.parse(e)}catch{return null}return T5(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x5(e){if(e.length===0)return null;var t=e.lastIndexOf("/");if(t===-1)return"";var n=e.slice(0,t);return n}function D5(e,t){var n=t.split("/").filter(function(r){return r.length>0}).join("/");return e.length===0?n:e+"/"+n}function TL(e){var t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L5(e,t){return t}var Mn=function(){function e(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||L5}return e}(),od=null;function M5(e){return!xv(e)||e.length<2?e:TL(e)}function Dv(){if(od)return od;var e=[];e.push(new Mn("bucket")),e.push(new Mn("generation")),e.push(new Mn("metageneration")),e.push(new Mn("name","fullPath",!0));function t(s,a){return M5(a)}var n=new Mn("name");n.xform=t,e.push(n);function r(s,a){return a!==void 0?Number(a):a}var i=new Mn("size");return i.xform=r,e.push(i),e.push(new Mn("timeCreated")),e.push(new Mn("updated")),e.push(new Mn("md5Hash",null,!0)),e.push(new Mn("cacheControl",null,!0)),e.push(new Mn("contentDisposition",null,!0)),e.push(new Mn("contentEncoding",null,!0)),e.push(new Mn("contentLanguage",null,!0)),e.push(new Mn("contentType",null,!0)),e.push(new Mn("metadata","customMetadata",!0)),od=e,od}function F5(e,t){function n(){var r=e.bucket,i=e.fullPath,s=new Nr(r,i);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function U5(e,t,n){var r={};r.type="file";for(var i=n.length,s=0;s<i;s++){var a=n[s];r[a.local]=a.xform(r,t[a.server])}return F5(r,e),r}function IL(e,t,n){var r=TE(t);if(r===null)return null;var i=r;return U5(e,i,n)}function j5(e,t,n){var r=TE(t);if(r===null||!xv(r.downloadTokens))return null;var i=r.downloadTokens;if(i.length===0)return null;var s=encodeURIComponent,a=i.split(","),c=a.map(function(l){var h=e.bucket,d=e.fullPath,v="/b/"+s(h)+"/o/"+s(d),m=Jo(v,n),y=EL({alt:"media",token:l});return m+y});return c[0]}function IE(e,t){for(var n={},r=t.length,i=0;i<r;i++){var s=t[i];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gR="prefixes",mR="items";function V5(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[gR])for(var i=0,s=n[gR];i<s.length;i++){var a=s[i],c=a.replace(/\/$/,""),l=e._makeStorageReference(new Nr(t,c));r.prefixes.push(l)}if(n[mR])for(var h=0,d=n[mR];h<d.length;h++){var v=d[h],l=e._makeStorageReference(new Nr(t,v.name));r.items.push(l)}return r}function B5(e,t,n){var r=TE(n);if(r===null)return null;var i=r;return V5(e,t,i)}var oo=function(){function e(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}return e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ti(e){if(!e)throw wE()}function Lv(e,t){function n(r,i){var s=IL(e,i,t);return Ti(s!==null),s}return n}function q5(e,t){function n(r,i){var s=B5(e,t,i);return Ti(s!==null),s}return n}function H5(e,t){function n(r,i){var s=IL(e,i,t);return Ti(s!==null),j5(s,i,e.host)}return n}function lc(e){function t(n,r){var i;return n.getStatus()===401?n.getResponseText().includes("Firebase App Check token is invalid")?i=t5():i=e5():n.getStatus()===402?i=ZQ(e.bucket):n.getStatus()===403?i=n5(e.path):i=r,i.serverResponse=r.serverResponse,i}return t}function Mv(e){var t=lc(e);function n(r,i){var s=t(r,i);return r.getStatus()===404&&(s=JQ(e.path)),s.serverResponse=i.serverResponse,s}return n}function SL(e,t,n){var r=t.fullServerUrl(),i=Jo(r,e.host),s="GET",a=e.maxOperationRetryTime,c=new oo(i,s,Lv(e,n),a);return c.errorHandler=Mv(t),c}function K5(e,t,n,r,i){var s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n&&n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);var a=t.bucketOnlyServerUrl(),c=Jo(a,e.host),l="GET",h=e.maxOperationRetryTime,d=new oo(c,l,q5(e,t.bucket),h);return d.urlParams=s,d.errorHandler=lc(t),d}function z5(e,t,n){var r=t.fullServerUrl(),i=Jo(r,e.host),s="GET",a=e.maxOperationRetryTime,c=new oo(i,s,H5(e,n),a);return c.errorHandler=Mv(t),c}function W5(e,t,n,r){var i=t.fullServerUrl(),s=Jo(i,e.host),a="PATCH",c=IE(n,r),l={"Content-Type":"application/json; charset=utf-8"},h=e.maxOperationRetryTime,d=new oo(s,a,Lv(e,r),h);return d.headers=l,d.body=c,d.errorHandler=Mv(t),d}function $5(e,t){var n=t.fullServerUrl(),r=Jo(n,e.host),i="DELETE",s=e.maxOperationRetryTime;function a(l,h){}var c=new oo(r,i,a,s);return c.successCodes=[200,204],c.errorHandler=Mv(t),c}function G5(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function CL(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=G5(null,t)),r}function Q5(e,t,n,r,i){var s=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function c(){for(var O="",H=0;H<2;H++)O=O+Math.random().toString().slice(2);return O}var l=c();a["Content-Type"]="multipart/related; boundary="+l;var h=CL(t,r,i),d=IE(h,n),v="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+h.contentType+`\r
\r
`,m=`\r
--`+l+"--",y=EE.getBlob(v,r,m);if(y===null)throw vL();var w={name:h.fullPath},E=Jo(s,e.host),T="POST",k=e.maxUploadRetryTime,P=new oo(E,T,Lv(e,n),k);return P.urlParams=w,P.headers=a,P.body=y.uploadData(),P.errorHandler=lc(t),P}var mp=function(){function e(t,n,r,i){this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null}return e}();function SE(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch{Ti(!1)}var r=t||["active"];return Ti(!!n&&r.indexOf(n)!==-1),n}function Y5(e,t,n,r,i){var s=t.bucketOnlyServerUrl(),a=CL(t,r,i),c={name:a.fullPath},l=Jo(s,e.host),h="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":""+r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},v=IE(a,n),m=e.maxUploadRetryTime;function y(E){SE(E);var T;try{T=E.getResponseHeader("X-Goog-Upload-URL")}catch{Ti(!1)}return Ti(xv(T)),T}var w=new oo(l,h,y,m);return w.urlParams=c,w.headers=d,w.body=v,w.errorHandler=lc(t),w}function X5(e,t,n,r){var i={"X-Goog-Upload-Command":"query"};function s(h){var d=SE(h,["active","final"]),v=null;try{v=h.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Ti(!1)}v||Ti(!1);var m=Number(v);return Ti(!isNaN(m)),new mp(m,r.size(),d==="final")}var a="POST",c=e.maxUploadRetryTime,l=new oo(n,a,s,c);return l.headers=i,l.errorHandler=lc(t),l}var yR=256*1024;function J5(e,t,n,r,i,s,a,c){var l=new mp(0,0);if(a?(l.current=a.current,l.total=a.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw a5();var h=l.total-l.current,d=h;i>0&&(d=Math.min(d,i));var v=l.current,m=v+d,y=d===h?"upload, finalize":"upload",w={"X-Goog-Upload-Command":y,"X-Goog-Upload-Offset":""+l.current},E=r.slice(v,m);if(E===null)throw vL();function T(H,K){var U=SE(H,["active","final"]),ie=l.current+d,F=r.size(),ge;return U==="final"?ge=Lv(t,s)(H,K):ge=null,new mp(ie,F,U==="final",ge)}var k="POST",P=t.maxUploadRetryTime,O=new oo(n,k,T,P);return O.headers=w,O.body=E.uploadData(),O.progressCallback=c||null,O.errorHandler=lc(e),O}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Z5=function(){function e(t,n,r){var i=E5(t)||n!=null||r!=null;if(i)this.next=t,this.error=n,this.complete=r;else{var s=t;this.next=s.next,this.error=s.error,this.complete=s.complete}}return e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ya(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];Promise.resolve().then(function(){return e.apply(void 0,t)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var AL=function(){function e(t,n,r){var i=this;r===void 0&&(r=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=r,this._mappings=Dv(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(s){i._request=void 0,i._chunkMultiplier=1,s._codeEquals("canceled")?(i._needToFetchStatus=!0,i.completeTransitions_()):(i._error=s,i._transition("error"))},this._metadataErrorHandler=function(s){i._request=void 0,s._codeEquals("canceled")?i.completeTransitions_():(i._error=s,i._transition("error"))},this._promise=new Promise(function(s,a){i._resolve=s,i._reject=a,i._start()}),this._promise.then(null,function(){})}return e.prototype._makeProgressCallback=function(){var t=this,n=this._transferred;return function(r){return t._updateProgress(n+r)}},e.prototype._shouldDoResumable=function(t){return t.size()>256*1024},e.prototype._start=function(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},e.prototype._resolveToken=function(t){var n=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(function(r){var i=r[0],s=r[1];switch(n._state){case"running":t(i,s);break;case"canceling":n._transition("canceled");break;case"pausing":n._transition("paused");break}})},e.prototype._createResumable=function(){var t=this;this._resolveToken(function(n,r){var i=Y5(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),s=t._ref.storage._makeRequest(i,n,r);t._request=s,s.getPromise().then(function(a){t._request=void 0,t._uploadUrl=a,t._needToFetchStatus=!1,t.completeTransitions_()},t._errorHandler)})},e.prototype._fetchStatus=function(){var t=this,n=this._uploadUrl;this._resolveToken(function(r,i){var s=X5(t._ref.storage,t._ref._location,n,t._blob),a=t._ref.storage._makeRequest(s,r,i);t._request=a,a.getPromise().then(function(c){c=c,t._request=void 0,t._updateProgress(c.current),t._needToFetchStatus=!1,c.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()},t._errorHandler)})},e.prototype._continueUpload=function(){var t=this,n=yR*this._chunkMultiplier,r=new mp(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken(function(s,a){var c;try{c=J5(t._ref._location,t._ref.storage,i,t._blob,n,t._mappings,r,t._makeProgressCallback())}catch(h){t._error=h,t._transition("error");return}var l=t._ref.storage._makeRequest(c,s,a);t._request=l,l.getPromise().then(function(h){t._increaseMultiplier(),t._request=void 0,t._updateProgress(h.current),h.finalized?(t._metadata=h.metadata,t._transition("success")):t.completeTransitions_()},t._errorHandler)})},e.prototype._increaseMultiplier=function(){var t=yR*this._chunkMultiplier;t<32*1024*1024&&(this._chunkMultiplier*=2)},e.prototype._fetchMetadata=function(){var t=this;this._resolveToken(function(n,r){var i=SL(t._ref.storage,t._ref._location,t._mappings),s=t._ref.storage._makeRequest(i,n,r);t._request=s,s.getPromise().then(function(a){t._request=void 0,t._metadata=a,t._transition("success")},t._metadataErrorHandler)})},e.prototype._oneShotUpload=function(){var t=this;this._resolveToken(function(n,r){var i=Q5(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),s=t._ref.storage._makeRequest(i,n,r);t._request=s,s.getPromise().then(function(a){t._request=void 0,t._metadata=a,t._updateProgress(t._blob.size()),t._transition("success")},t._errorHandler)})},e.prototype._updateProgress=function(t){var n=this._transferred;this._transferred=t,this._transferred!==n&&this._notifyObservers()},e.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":this._state=t,this._request!==void 0&&this._request.cancel();break;case"pausing":this._state=t,this._request!==void 0&&this._request.cancel();break;case"running":var n=this._state==="paused";this._state=t,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=pL(),this._state=t,this._notifyObservers();break;case"error":this._state=t,this._notifyObservers();break;case"success":this._state=t,this._notifyObservers();break}},e.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}},Object.defineProperty(e.prototype,"snapshot",{get:function(){var t=e_(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),e.prototype.on=function(t,n,r,i){var s=this,a=new Z5(n,r,i);return this._addObserver(a),function(){s._removeObserver(a)}},e.prototype.then=function(t,n){return this._promise.then(t,n)},e.prototype.catch=function(t){return this.then(null,t)},e.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},e.prototype._removeObserver=function(t){var n=this._observers.indexOf(t);n!==-1&&this._observers.splice(n,1)},e.prototype._notifyObservers=function(){var t=this;this._finishPromise();var n=this._observers.slice();n.forEach(function(r){t._notifyObserver(r)})},e.prototype._finishPromise=function(){if(this._resolve!==void 0){var t=!0;switch(e_(this._state)){case Vn.SUCCESS:Ya(this._resolve.bind(null,this.snapshot))();break;case Vn.CANCELED:case Vn.ERROR:var n=this._reject;Ya(n.bind(null,this._error))();break;default:t=!1;break}t&&(this._resolve=void 0,this._reject=void 0)}},e.prototype._notifyObserver=function(t){var n=e_(this._state);switch(n){case Vn.RUNNING:case Vn.PAUSED:t.next&&Ya(t.next.bind(t,this.snapshot))();break;case Vn.SUCCESS:t.complete&&Ya(t.complete.bind(t))();break;case Vn.CANCELED:case Vn.ERROR:t.error&&Ya(t.error.bind(t,this._error))();break;default:t.error&&Ya(t.error.bind(t,this._error))()}},e.prototype.resume=function(){var t=this._state==="paused"||this._state==="pausing";return t&&this._transition("running"),t},e.prototype.pause=function(){var t=this._state==="running";return t&&this._transition("pausing"),t},e.prototype.cancel=function(){var t=this._state==="running"||this._state==="pausing";return t&&this._transition("canceling"),t},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fv=function(){function e(t,n){this._service=t,n instanceof Nr?this._location=n:this._location=Nr.makeFromUrl(n,t.host)}return e.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},e.prototype._newRef=function(t,n){return new e(t,n)},Object.defineProperty(e.prototype,"root",{get:function(){var t=new Nr(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return TL(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=x5(this._location.path);if(t===null)return null;var n=new Nr(this._location.bucket,t);return new e(this._service,n)},enumerable:!1,configurable:!0}),e.prototype._throwIfRoot=function(t){if(this._location.path==="")throw mL(t)},e}();function eY(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new AL(e,new EE(t),n)}function tY(e){var t={prefixes:[],items:[]};return kL(e,t).then(function(){return t})}function kL(e,t,n){return A(this,void 0,void 0,function(){var r,i,s,a;return C(this,function(c){switch(c.label){case 0:return r={pageToken:n},[4,RL(e,r)];case 1:return i=c.sent(),(s=t.prefixes).push.apply(s,i.prefixes),(a=t.items).push.apply(a,i.items),i.nextPageToken==null?[3,3]:[4,kL(e,t,i.nextPageToken)];case 2:c.sent(),c.label=3;case 3:return[2]}})})}function RL(e,t){return A(this,void 0,void 0,function(){var n,r;return C(this,function(i){switch(i.label){case 0:return t!=null&&typeof t.maxResults=="number"&&Cw("options.maxResults",1,1e3,t.maxResults),n=t||{},r=K5(e.storage,e._location,"/",n.pageToken,n.maxResults),[4,e.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}})})}function nY(e){return A(this,void 0,void 0,function(){var t;return C(this,function(n){switch(n.label){case 0:return e._throwIfRoot("getMetadata"),t=SL(e.storage,e._location,Dv()),[4,e.storage.makeRequestWithTokens(t)];case 1:return[2,n.sent().getPromise()]}})})}function rY(e,t){return A(this,void 0,void 0,function(){var n;return C(this,function(r){switch(r.label){case 0:return e._throwIfRoot("updateMetadata"),n=W5(e.storage,e._location,t,Dv()),[4,e.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}})})}function iY(e){return A(this,void 0,void 0,function(){var t;return C(this,function(n){switch(n.label){case 0:return e._throwIfRoot("getDownloadURL"),t=z5(e.storage,e._location,Dv()),[4,e.storage.makeRequestWithTokens(t)];case 1:return[2,n.sent().getPromise().then(function(r){if(r===null)throw u5();return r})]}})})}function oY(e){return A(this,void 0,void 0,function(){var t;return C(this,function(n){switch(n.label){case 0:return e._throwIfRoot("deleteObject"),t=$5(e.storage,e._location),[4,e.storage.makeRequestWithTokens(t)];case 1:return[2,n.sent().getPromise()]}})})}function NL(e,t){var n=D5(e._location.path,t),r=new Nr(e._location.bucket,n);return new Fv(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aw(e){return/^[A-Za-z]+:\/\//.test(e)}function sY(e,t){return new Fv(e,t)}function PL(e,t){if(e instanceof Uv){var n=e;if(n._bucket==null)throw s5();var r=new Fv(n,n._bucket);return t!=null?PL(r,t):r}else return t!==void 0?NL(e,t):e}function aY(e,t){if(t&&Aw(t)){if(e instanceof Uv)return sY(e,t);throw hu("To use ref(service, url), the first argument must be a Storage instance.")}else return PL(e,t)}function _R(e,t){var n=t==null?void 0:t[dL];return n==null?null:Nr.makeFromBucketSpec(n,e)}function uY(e,t,n,r){r===void 0&&(r={}),e.host="http://"+t+":"+n;var i=r.mockUserToken;i&&(e._overrideAuthToken=typeof i=="string"?i:ib(i,e.app.options.projectId))}var Uv=function(){function e(t,n,r,i,s,a){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._pool=i,this._url=s,this._firebaseVersion=a,this._bucket=null,this._host=hL,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=YQ,this._maxUploadRetryTime=XQ,this._requests=new Set,s!=null?this._bucket=Nr.makeFromBucketSpec(s,this._host):this._bucket=_R(this._host,this.app.options)}return Object.defineProperty(e.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,this._url!=null?this._bucket=Nr.makeFromBucketSpec(this._url,t):this._bucket=_R(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){Cw("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){Cw("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),e.prototype._getAuthToken=function(){return A(this,void 0,void 0,function(){var t,n;return C(this,function(r){switch(r.label){case 0:return this._overrideAuthToken?[2,this._overrideAuthToken]:(t=this._authProvider.getImmediate({optional:!0}),t?[4,t.getToken()]:[3,2]);case 1:if(n=r.sent(),n!==null)return[2,n.accessToken];r.label=2;case 2:return[2,null]}})})},e.prototype._getAppCheckToken=function(){return A(this,void 0,void 0,function(){var t,n;return C(this,function(r){switch(r.label){case 0:return t=this._appCheckProvider.getImmediate({optional:!0}),t?[4,t.getToken()]:[3,2];case 1:return n=r.sent(),[2,n.token];case 2:return[2,null]}})})},e.prototype._delete=function(){return this._deleted||(this._deleted=!0,this._requests.forEach(function(t){return t.cancel()}),this._requests.clear()),Promise.resolve()},e.prototype._makeStorageReference=function(t){return new Fv(this,t)},e.prototype._makeRequest=function(t,n,r){var i=this;if(this._deleted)return new y5(gL());var s=R5(t,this._appId,n,r,this._pool,this._firebaseVersion);return this._requests.add(s),s.getPromise().then(function(){return i._requests.delete(s)},function(){return i._requests.delete(s)}),s},e.prototype.makeRequestWithTokens=function(t){return A(this,void 0,void 0,function(){var n,r,i;return C(this,function(s){switch(s.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return n=s.sent(),r=n[0],i=n[1],[2,this._makeRequest(t,r,i)]}})})},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cY(e,t,n){return e=Re(e),eY(e,t,n)}function lY(e){return e=Re(e),nY(e)}function fY(e,t){return e=Re(e),rY(e,t)}function hY(e,t){return e=Re(e),RL(e,t)}function dY(e){return e=Re(e),tY(e)}function pY(e){return e=Re(e),iY(e)}function vY(e){return e=Re(e),oY(e)}function wR(e,t){return e=Re(e),aY(e,t)}function gY(e,t){return NL(e,t)}function mY(e,t,n,r){r===void 0&&(r={}),uY(e,t,n,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sd=function(){function e(t,n,r){this._delegate=t,this.task=n,this.ref=r}return Object.defineProperty(e.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bR=function(){function e(t,n){this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(e.prototype,"snapshot",{get:function(){return new sd(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),e.prototype.then=function(t,n){var r=this;return this._delegate.then(function(i){if(t)return t(new sd(i,r,r._ref))},n)},e.prototype.on=function(t,n,r,i){var s=this,a=void 0;return n&&(typeof n=="function"?a=function(c){return n(new sd(c,s,s._ref))}:a={next:n.next?function(c){return n.next(new sd(c,s,s._ref))}:void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(t,a,r||void 0,i||void 0)},e}(),ER=function(){function e(t,n){this._delegate=t,this._service=n}return Object.defineProperty(e.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map(function(n){return new nf(n,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){var t=this;return this._delegate.items.map(function(n){return new nf(n,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nf=function(){function e(t,n){this._delegate=t,this.storage=n}return Object.defineProperty(e.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return this._delegate.toString()},e.prototype.child=function(t){var n=gY(this._delegate,t);return new e(n,this.storage)},Object.defineProperty(e.prototype,"root",{get:function(){return new e(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t==null?null:new e(t,this.storage)},enumerable:!1,configurable:!0}),e.prototype.put=function(t,n){return this._throwIfRoot("put"),new bR(cY(this._delegate,t,n),this)},e.prototype.putString=function(t,n,r){n===void 0&&(n=Rr.RAW),this._throwIfRoot("putString");var i=yL(n,t),s=me({},r);return s.contentType==null&&i.contentType!=null&&(s.contentType=i.contentType),new bR(new AL(this._delegate,new EE(i.data,!0),s),this)},e.prototype.listAll=function(){var t=this;return dY(this._delegate).then(function(n){return new ER(n,t.storage)})},e.prototype.list=function(t){var n=this;return hY(this._delegate,t||void 0).then(function(r){return new ER(r,n.storage)})},e.prototype.getMetadata=function(){return lY(this._delegate)},e.prototype.updateMetadata=function(t){return fY(this._delegate,t)},e.prototype.getDownloadURL=function(){return pY(this._delegate)},e.prototype.delete=function(){return this._throwIfRoot("delete"),vY(this._delegate)},e.prototype._throwIfRoot=function(t){if(this._delegate._location.path==="")throw mL(t)},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yY=function(){function e(t,n){this.app=t,this._delegate=n}return Object.defineProperty(e.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),e.prototype.ref=function(t){if(Aw(t))throw hu("ref() expected a child path but got a URL, use refFromURL instead.");return new nf(wR(this._delegate,t),this)},e.prototype.refFromURL=function(t){if(!Aw(t))throw hu("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Nr.makeFromUrl(t,this._delegate.host)}catch{throw hu("refFromUrl() expected a valid full URL but got an invalid one.")}return new nf(wR(this._delegate,t),this)},e.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},e.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},e.prototype.useEmulator=function(t,n,r){r===void 0&&(r={}),mY(this._delegate,t,n,r)},e}(),_Y="@firebase/storage",wY="0.7.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bY="storage";function EY(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal"),a=new yY(r,new Uv(r,i,s,new m5,n,ue.SDK_VERSION));return a}function TY(e){var t={TaskState:Vn,TaskEvent:p5,StringFormat:Rr,Storage:Uv,Reference:nf};e.INTERNAL.registerComponent(new kn(bY,EY,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion(_Y,wY)}TY(ue);var IY="@firebase/performance",OL="0.4.18";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xL=OL,SY="FB-PERF-TRACE-START",CY="FB-PERF-TRACE-STOP",kw="FB-PERF-TRACE-MEASURE",DL="_wt_",LL="_fp",ML="_fcp",FL="_fid",UL="@firebase/performance/config",jL="@firebase/performance/configexpire",AY="performance",VL="Performance";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var an,kY=(an={},an["trace started"]="Trace {$traceName} was started before.",an["trace stopped"]="Trace {$traceName} is not running.",an["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",an["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",an["no window"]="Window is not available.",an["no app id"]="App id is not available.",an["no project id"]="Project id is not available.",an["no api key"]="Api key is not available.",an["invalid cc log"]="Attempted to queue invalid cc event",an["FB not default"]="Performance can only start when Firebase app instance is the default one.",an["RC response not ok"]="RC response is not ok",an["invalid attribute name"]="Attribute name {$attributeName} is invalid.",an["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",an["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",an["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",an),wn=new no(AY,VL,kY);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var eo=new la(VL);eo.logLevel=Le.INFO;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var t_,BL,Sn=function(){function e(t){if(this.window=t,!t)throw wn.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}return e.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},e.prototype.mark=function(t){!this.performance||!this.performance.mark||this.performance.mark(t)},e.prototype.measure=function(t,n,r){!this.performance||!this.performance.measure||this.performance.measure(t,n,r)},e.prototype.getEntriesByType=function(t){return!this.performance||!this.performance.getEntriesByType?[]:this.performance.getEntriesByType(t)},e.prototype.getEntriesByName=function(t){return!this.performance||!this.performance.getEntriesByName?[]:this.performance.getEntriesByName(t)},e.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},e.prototype.requiredApisAvailable=function(){return!fetch||!Promise||!this.navigator||!this.navigator.cookieEnabled?(eo.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1):af()?!0:(eo.info("IndexedDB is not supported by current browswer"),!1)},e.prototype.setupObserver=function(t,n){if(this.PerformanceObserver){var r=new this.PerformanceObserver(function(i){for(var s=0,a=i.getEntries();s<a.length;s++){var c=a[s];n(c)}});r.observe({entryTypes:[t]})}},e.getInstance=function(){return t_===void 0&&(t_=new e(BL)),t_},e}();function RY(e){BL=e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TR(e,t){var n=e.length-t.length;if(n<0||n>1)throw wn.create("invalid String merger input");for(var r=[],i=0;i<e.length;i++)r.push(e.charAt(i)),t.length>i&&r.push(t.charAt(i));return r.join("")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var n_,qt=function(){function e(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=TR("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=TR("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return e.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw wn.create("no app id");return t},e.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw wn.create("no project id");return t},e.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw wn.create("no api key");return t},e.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},e.getInstance=function(){return n_===void 0&&(n_=new e),n_},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qL;function NY(){var e=qt.getInstance().installationsService.getId();return e.then(function(t){qL=t}),e}function CE(){return qL}function PY(){var e=qt.getInstance().installationsService.getToken();return e.then(function(t){}),e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var du;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.VISIBLE=1]="VISIBLE",e[e.HIDDEN=2]="HIDDEN"})(du||(du={}));var OY=["firebase_","google_","ga_"],xY=new RegExp("^[a-zA-Z]\\w*$"),DY=40,LY=100;function MY(){var e=Sn.getInstance().navigator;return"serviceWorker"in e?e.serviceWorker.controller?2:3:1}function HL(){var e=Sn.getInstance().document,t=e.visibilityState;switch(t){case"visible":return du.VISIBLE;case"hidden":return du.HIDDEN;default:return du.UNKNOWN}}function FY(){var e=Sn.getInstance().navigator,t=e.connection,n=t&&t.effectiveType;switch(n){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function UY(e){if(e.length===0||e.length>DY)return!1;var t=OY.some(function(n){return e.startsWith(n)});return!t&&!!e.match(xY)}function jY(e){return e.length!==0&&e.length<=LY}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var VY="0.0.1",BY={loggingEnabled:!0},qY="FIREBASE_INSTALLATIONS_AUTH";function HY(e){var t=KY();return t?(IR(t),Promise.resolve()):$Y(e).then(IR).then(function(n){return zY(n)},function(){})}function KY(){var e=Sn.getInstance().localStorage;if(e){var t=e.getItem(jL);if(!(!t||!GY(t))){var n=e.getItem(UL);if(n)try{var r=JSON.parse(n);return r}catch{return}}}}function zY(e){var t=Sn.getInstance().localStorage;!e||!t||(t.setItem(UL,JSON.stringify(e)),t.setItem(jL,String(Date.now()+qt.getInstance().configTimeToLive*60*60*1e3)))}var WY="Could not fetch config, will use default configs";function $Y(e){return PY().then(function(t){var n=qt.getInstance().getProjectId(),r="https://firebaseremoteconfig.googleapis.com/v1/projects/"+n+"/namespaces/fireperf:fetch?key="+qt.getInstance().getApiKey(),i=new Request(r,{method:"POST",headers:{Authorization:qY+" "+t},body:JSON.stringify({app_instance_id:e,app_instance_id_token:t,app_id:qt.getInstance().getAppId(),app_version:xL,sdk_version:VY})});return fetch(i).then(function(s){if(s.ok)return s.json();throw wn.create("RC response not ok")})}).catch(function(){eo.info(WY)})}function IR(e){if(!e)return e;var t=qt.getInstance(),n=e.entries||{};return n.fpr_enabled!==void 0?t.loggingEnabled=String(n.fpr_enabled)==="true":t.loggingEnabled=BY.loggingEnabled,n.fpr_log_source&&(t.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(t.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(t.transportKey=n.fpr_log_transport_key),n.fpr_vc_network_request_sampling_rate!==void 0&&(t.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),n.fpr_vc_trace_sampling_rate!==void 0&&(t.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),t.logTraceAfterSampling=SR(t.tracesSamplingRate),t.logNetworkAfterSampling=SR(t.networkRequestsSamplingRate),e}function GY(e){return Number(e)>Date.now()}function SR(e){return Math.random()<=e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var AE=1,r_;function KL(){return AE=2,r_=r_||YY(),r_}function QY(){return AE===3}function YY(){return XY().then(function(){return NY()}).then(function(e){return HY(e)}).then(function(){return CR()},function(){return CR()})}function XY(){var e=Sn.getInstance().document;return new Promise(function(t){if(e&&e.readyState!=="complete"){var n=function(){e.readyState==="complete"&&(e.removeEventListener("readystatechange",n),t())};e.addEventListener("readystatechange",n)}else t()})}function CR(){AE=3}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kE=10*1e3,JY=5.5*1e3,zL=3,ZY=1e3,yp=zL,Fo=[],AR=!1;function eX(){AR||(jv(JY),AR=!0)}function jv(e){setTimeout(function(){if(yp!==0){if(!Fo.length)return jv(kE);tX()}},e)}function tX(){var e=Fo.splice(0,ZY),t=e.map(function(r){return{source_extension_json_proto3:r.message,event_time_ms:String(r.eventTime)}}),n={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:qt.getInstance().logSource,log_event:t};nX(n,e).catch(function(){Fo=Ne(Ne([],e),Fo),yp--,eo.info("Tries left: "+yp+"."),jv(kE)})}function nX(e,t){return rX(e).then(function(n){return n.ok||eo.info("Call to Firebase backend failed."),n.json()}).then(function(n){var r=Number(n.nextRequestWaitMillis),i=kE;isNaN(r)||(i=Math.max(r,i));var s=n.logResponseDetails;Array.isArray(s)&&s.length>0&&s[0].responseAction==="RETRY_REQUEST_LATER"&&(Fo=Ne(Ne([],t),Fo),eo.info("Retry transport request later.")),yp=zL,jv(i)})}function rX(e){var t=qt.getInstance().getFlTransportFullUrl();return fetch(t,{method:"POST",body:JSON.stringify(e)})}function iX(e){if(!e.eventTime||!e.message)throw wn.create("invalid cc log");Fo=Ne(Ne([],Fo),[e])}function oX(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=e.apply(void 0,t);iX({message:r,eventTime:Date.now()})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var i_;function WL(e,t){i_||(i_=oX(aX)),i_(e,t)}function ad(e){var t=qt.getInstance();!t.instrumentationEnabled&&e.isAuto||!t.dataCollectionEnabled&&!e.isAuto||Sn.getInstance().requiredApisAvailable()&&(e.isAuto&&HL()!==du.VISIBLE||(QY()?o_(e):KL().then(function(){return o_(e)},function(){return o_(e)})))}function o_(e){if(CE()){var t=qt.getInstance();!t.loggingEnabled||!t.logTraceAfterSampling||setTimeout(function(){return WL(e,1)},0)}}function sX(e){var t=qt.getInstance();if(t.instrumentationEnabled){var n=e.url,r=t.logEndPointUrl.split("?")[0],i=t.flTransportEndpointUrl.split("?")[0];n===r||n===i||!t.loggingEnabled||!t.logNetworkAfterSampling||setTimeout(function(){return WL(e,0)},0)}}function aX(e,t){return t===0?uX(e):cX(e)}function uX(e){var t={url:e.url,http_method:e.httpMethod||0,http_response_code:200,response_payload_bytes:e.responsePayloadBytes,client_start_time_us:e.startTimeUs,time_to_response_initiated_us:e.timeToResponseInitiatedUs,time_to_response_completed_us:e.timeToResponseCompletedUs},n={application_info:$L(),network_request_metric:t};return JSON.stringify(n)}function cX(e){var t={name:e.name,is_auto:e.isAuto,client_start_time_us:e.startTimeUs,duration_us:e.durationUs};Object.keys(e.counters).length!==0&&(t.counters=e.counters);var n=e.getAttributes();Object.keys(n).length!==0&&(t.custom_attributes=n);var r={application_info:$L(),trace_metric:t};return JSON.stringify(r)}function $L(){return{google_app_id:qt.getInstance().getAppId(),app_instance_id:CE(),web_app_info:{sdk_version:xL,page_url:Sn.getInstance().getUrl(),service_worker_status:MY(),visibility_state:HL(),effective_connection_type:FY()},application_process_state:0}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lX=100,fX="_",hX=[LL,ML,FL];function dX(e,t){return e.length===0||e.length>lX?!1:t&&t.startsWith(DL)&&hX.indexOf(e)>-1||!e.startsWith(fX)}function pX(e){var t=Math.floor(e);return t<e&&eo.info("Metric value should be an Integer, setting the value as : "+t+"."),t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bl=function(){function e(t,n,r){n===void 0&&(n=!1),this.name=t,this.isAuto=n,this.state=1,this.customAttributes={},this.counters={},this.api=Sn.getInstance(),this.randomId=Math.floor(Math.random()*1e6),this.isAuto||(this.traceStartMark=SY+"-"+this.randomId+"-"+this.name,this.traceStopMark=CY+"-"+this.randomId+"-"+this.name,this.traceMeasure=r||kw+"-"+this.randomId+"-"+this.name,r&&this.calculateTraceMetrics())}return e.prototype.start=function(){if(this.state!==1)throw wn.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},e.prototype.stop=function(){if(this.state!==2)throw wn.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),ad(this)},e.prototype.record=function(t,n,r){if(t<=0)throw wn.create("nonpositive trace startTime",{traceName:this.name});if(n<=0)throw wn.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(n*1e3),this.startTimeUs=Math.floor(t*1e3),r&&r.attributes&&(this.customAttributes=me({},r.attributes)),r&&r.metrics)for(var i=0,s=Object.keys(r.metrics);i<s.length;i++){var a=s[i];isNaN(Number(r.metrics[a]))||(this.counters[a]=Number(Math.floor(r.metrics[a])))}ad(this)},e.prototype.incrementMetric=function(t,n){n===void 0&&(n=1),this.counters[t]===void 0?this.putMetric(t,n):this.putMetric(t,this.counters[t]+n)},e.prototype.putMetric=function(t,n){if(dX(t,this.name))this.counters[t]=pX(n);else throw wn.create("invalid custom metric name",{customMetricName:t})},e.prototype.getMetric=function(t){return this.counters[t]||0},e.prototype.putAttribute=function(t,n){var r=UY(t),i=jY(n);if(r&&i){this.customAttributes[t]=n;return}if(!r)throw wn.create("invalid attribute name",{attributeName:t});if(!i)throw wn.create("invalid attribute value",{attributeValue:n})},e.prototype.getAttribute=function(t){return this.customAttributes[t]},e.prototype.removeAttribute=function(t){this.customAttributes[t]!==void 0&&delete this.customAttributes[t]},e.prototype.getAttributes=function(){return me({},this.customAttributes)},e.prototype.setStartTime=function(t){this.startTimeUs=t},e.prototype.setDuration=function(t){this.durationUs=t},e.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),n=t&&t[0];n&&(this.durationUs=Math.floor(n.duration*1e3),this.startTimeUs=Math.floor((n.startTime+this.api.getTimeOrigin())*1e3))},e.createOobTrace=function(t,n,r){var i=Sn.getInstance().getUrl();if(i){var s=new e(DL+i,!0),a=Math.floor(Sn.getInstance().getTimeOrigin()*1e3);s.setStartTime(a),t&&t[0]&&(s.setDuration(Math.floor(t[0].duration*1e3)),s.putMetric("domInteractive",Math.floor(t[0].domInteractive*1e3)),s.putMetric("domContentLoadedEventEnd",Math.floor(t[0].domContentLoadedEventEnd*1e3)),s.putMetric("loadEventEnd",Math.floor(t[0].loadEventEnd*1e3)));var c="first-paint",l="first-contentful-paint";if(n){var h=n.find(function(v){return v.name===c});h&&h.startTime&&s.putMetric(LL,Math.floor(h.startTime*1e3));var d=n.find(function(v){return v.name===l});d&&d.startTime&&s.putMetric(ML,Math.floor(d.startTime*1e3)),r&&s.putMetric(FL,Math.floor(r*1e3))}ad(s)}},e.createUserTimingTrace=function(t){var n=new e(t,!1,t);ad(n)},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kR(e){var t=e;if(!(!t||t.responseStart===void 0)){var n=Sn.getInstance().getTimeOrigin(),r=Math.floor((t.startTime+n)*1e3),i=t.responseStart?Math.floor((t.responseStart-t.startTime)*1e3):void 0,s=Math.floor((t.responseEnd-t.startTime)*1e3),a=t.name&&t.name.split("?")[0],c={url:a,responsePayloadBytes:t.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:s};sX(c)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vX=5e3;function RR(){CE()&&(setTimeout(function(){return mX()},0),setTimeout(function(){return gX()},0),setTimeout(function(){return yX()},0))}function gX(){for(var e=Sn.getInstance(),t=e.getEntriesByType("resource"),n=0,r=t;n<r.length;n++){var i=r[n];kR(i)}e.setupObserver("resource",kR)}function mX(){var e=Sn.getInstance(),t=e.getEntriesByType("navigation"),n=e.getEntriesByType("paint");if(e.onFirstInputDelay){var r=setTimeout(function(){bl.createOobTrace(t,n),r=void 0},vX);e.onFirstInputDelay(function(i){r&&(clearTimeout(r),bl.createOobTrace(t,n,i))})}else bl.createOobTrace(t,n)}function yX(){for(var e=Sn.getInstance(),t=e.getEntriesByType("measure"),n=0,r=t;n<r.length;n++){var i=r[n];NR(i)}e.setupObserver("measure",NR)}function NR(e){var t=e.name;t.substring(0,kw.length)!==kw&&bl.createUserTimingTrace(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _X=function(){function e(t){this.app=t,Sn.getInstance().requiredApisAvailable()&&ab().then(function(n){n&&(eX(),KL().then(RR,RR))}).catch(function(n){eo.info("Environment doesn't support IndexedDB: "+n)})}return e.prototype.trace=function(t){return new bl(t)},Object.defineProperty(e.prototype,"instrumentationEnabled",{get:function(){return qt.getInstance().instrumentationEnabled},set:function(t){qt.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataCollectionEnabled",{get:function(){return qt.getInstance().dataCollectionEnabled},set:function(t){qt.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wX="[DEFAULT]";function bX(e){var t=function(n,r){if(n.name!==wX)throw wn.create("FB not default");if(typeof window>"u")throw wn.create("no window");return RY(window),qt.getInstance().firebaseAppInstance=n,qt.getInstance().installationsService=r,new _X(n)};e.INTERNAL.registerComponent(new kn("performance",function(n){var r=n.getProvider("app").getImmediate(),i=n.getProvider("installations").getImmediate();return t(r,i)},"PUBLIC")),e.registerVersion(IY,OL)}bX(ue);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var EX="firebase_id",TX="origin",IX=60*1e3,SX="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",GL="https://www.googletagmanager.com/gtag/js",Cn;(function(e){e.EVENT="event",e.SET="set",e.CONFIG="config"})(Cn||(Cn={}));var Rw;(function(e){e.ADD_SHIPPING_INFO="add_shipping_info",e.ADD_PAYMENT_INFO="add_payment_info",e.ADD_TO_CART="add_to_cart",e.ADD_TO_WISHLIST="add_to_wishlist",e.BEGIN_CHECKOUT="begin_checkout",e.CHECKOUT_PROGRESS="checkout_progress",e.EXCEPTION="exception",e.GENERATE_LEAD="generate_lead",e.LOGIN="login",e.PAGE_VIEW="page_view",e.PURCHASE="purchase",e.REFUND="refund",e.REMOVE_FROM_CART="remove_from_cart",e.SCREEN_VIEW="screen_view",e.SEARCH="search",e.SELECT_CONTENT="select_content",e.SELECT_ITEM="select_item",e.SELECT_PROMOTION="select_promotion",e.SET_CHECKOUT_OPTION="set_checkout_option",e.SHARE="share",e.SIGN_UP="sign_up",e.TIMING_COMPLETE="timing_complete",e.VIEW_CART="view_cart",e.VIEW_ITEM="view_item",e.VIEW_ITEM_LIST="view_item_list",e.VIEW_PROMOTION="view_promotion",e.VIEW_SEARCH_RESULTS="view_search_results"})(Rw||(Rw={}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CX(e,t,n,r,i){return A(this,void 0,void 0,function(){var s,a;return C(this,function(c){switch(c.label){case 0:return i&&i.global?(e(Cn.EVENT,n,r),[2]):[3,1];case 1:return[4,t];case 2:s=c.sent(),a=me(me({},r),{send_to:s}),e(Cn.EVENT,n,a),c.label=3;case 3:return[2]}})})}function AX(e,t,n,r){return A(this,void 0,void 0,function(){var i;return C(this,function(s){switch(s.label){case 0:return r&&r.global?(e(Cn.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,t];case 2:i=s.sent(),e(Cn.CONFIG,i,{update:!0,screen_name:n}),s.label=3;case 3:return[2]}})})}function kX(e,t,n,r){return A(this,void 0,void 0,function(){var i;return C(this,function(s){switch(s.label){case 0:return r&&r.global?(e(Cn.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,t];case 2:i=s.sent(),e(Cn.CONFIG,i,{update:!0,user_id:n}),s.label=3;case 3:return[2]}})})}function RX(e,t,n,r){return A(this,void 0,void 0,function(){var i,s,a,c,l;return C(this,function(h){switch(h.label){case 0:if(!(r&&r.global))return[3,1];for(i={},s=0,a=Object.keys(n);s<a.length;s++)c=a[s],i["user_properties."+c]=n[c];return e(Cn.SET,i),[2,Promise.resolve()];case 1:return[4,t];case 2:l=h.sent(),e(Cn.CONFIG,l,{update:!0,user_properties:n}),h.label=3;case 3:return[2]}})})}function NX(e,t){return A(this,void 0,void 0,function(){var n;return C(this,function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),window["ga-disable-"+n]=!t,[2]}})})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cn=new la("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PX(e,t){var n=document.createElement("script");n.src=GL+"?l="+e+"&id="+t,n.async=!0,document.head.appendChild(n)}function OX(e){var t=[];return Array.isArray(window[e])?t=window[e]:window[e]=t,t}function xX(e,t,n,r,i,s){return A(this,void 0,void 0,function(){var a,c,l,h;return C(this,function(d){switch(d.label){case 0:a=r[i],d.label=1;case 1:return d.trys.push([1,7,,8]),a?[4,t[a]]:[3,3];case 2:return d.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return c=d.sent(),l=c.find(function(v){return v.measurementId===i}),l?[4,t[l.appId]]:[3,6];case 5:d.sent(),d.label=6;case 6:return[3,8];case 7:return h=d.sent(),cn.error(h),[3,8];case 8:return e(Cn.CONFIG,i,s),[2]}})})}function DX(e,t,n,r,i){return A(this,void 0,void 0,function(){var s,a,c,l,h,d,v,m,y;return C(this,function(w){switch(w.label){case 0:return w.trys.push([0,4,,5]),s=[],i&&i.send_to?(a=i.send_to,Array.isArray(a)||(a=[a]),[4,Promise.all(n)]):[3,2];case 1:for(c=w.sent(),l=function(E){var T=c.find(function(P){return P.measurementId===E}),k=T&&t[T.appId];if(k)s.push(k);else return s=[],"break"},h=0,d=a;h<d.length&&(v=d[h],m=l(v),m!=="break");h++);w.label=2;case 2:return s.length===0&&(s=Object.values(t)),[4,Promise.all(s)];case 3:return w.sent(),e(Cn.EVENT,r,i||{}),[3,5];case 4:return y=w.sent(),cn.error(y),[3,5];case 5:return[2]}})})}function LX(e,t,n,r){function i(s,a,c){return A(this,void 0,void 0,function(){var l;return C(this,function(h){switch(h.label){case 0:return h.trys.push([0,6,,7]),s!==Cn.EVENT?[3,2]:[4,DX(e,t,n,a,c)];case 1:return h.sent(),[3,5];case 2:return s!==Cn.CONFIG?[3,4]:[4,xX(e,t,n,r,a,c)];case 3:return h.sent(),[3,5];case 4:e(Cn.SET,a),h.label=5;case 5:return[3,7];case 6:return l=h.sent(),cn.error(l),[3,7];case 7:return[2]}})})}return i}function MX(e,t,n,r,i){var s=function(){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=LX(s,e,t,n),{gtagCore:s,wrappedGtag:window[i]}}function FX(){for(var e=window.document.getElementsByTagName("script"),t=0,n=Object.values(e);t<n.length;t++){var r=n[t];if(r.src&&r.src.includes(GL))return r}return null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wr,UX=(Wr={},Wr["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",Wr["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",Wr["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",Wr["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",Wr["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",Wr["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",Wr["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",Wr["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',Wr["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',Wr),Lr=new no("analytics","Analytics",UX);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jX=30,VX=1e3,BX=function(){function e(t,n){t===void 0&&(t={}),n===void 0&&(n=VX),this.throttleMetadata=t,this.intervalMillis=n}return e.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},e.prototype.setThrottleMetadata=function(t,n){this.throttleMetadata[t]=n},e.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},e}(),QL=new BX;function qX(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function HX(e){var t;return A(this,void 0,void 0,function(){var n,r,i,s,a,c,l;return C(this,function(h){switch(h.label){case 0:return n=e.appId,r=e.apiKey,i={method:"GET",headers:qX(r)},s=SX.replace("{app-id}",n),[4,fetch(s,i)];case 1:if(a=h.sent(),!(a.status!==200&&a.status!==304))return[3,6];c="",h.label=2;case 2:return h.trys.push([2,4,,5]),[4,a.json()];case 3:return l=h.sent(),!((t=l.error)===null||t===void 0)&&t.message&&(c=l.error.message),[3,5];case 4:return h.sent(),[3,5];case 5:throw Lr.create("config-fetch-failed",{httpStatus:a.status,responseMessage:c});case 6:return[2,a.json()]}})})}function KX(e,t,n){return t===void 0&&(t=QL),A(this,void 0,void 0,function(){var r,i,s,a,c,l,h=this;return C(this,function(d){if(r=e.options,i=r.appId,s=r.apiKey,a=r.measurementId,!i)throw Lr.create("no-app-id");if(!s){if(a)return[2,{measurementId:a,appId:i}];throw Lr.create("no-api-key")}return c=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new $X,setTimeout(function(){return A(h,void 0,void 0,function(){return C(this,function(v){return l.abort(),[2]})})},n!==void 0?n:IX),[2,YL({appId:i,apiKey:s,measurementId:a},c,l,t)]})})}function YL(e,t,n,r){var i=t.throttleEndTimeMillis,s=t.backoffCount;return r===void 0&&(r=QL),A(this,void 0,void 0,function(){var a,c,l,h,d,v,m;return C(this,function(y){switch(y.label){case 0:a=e.appId,c=e.measurementId,y.label=1;case 1:return y.trys.push([1,3,,4]),[4,zX(n,i)];case 2:return y.sent(),[3,4];case 3:if(l=y.sent(),c)return cn.warn("Timed out fetching this Firebase app's measurement ID from the server."+(" Falling back to the measurement ID "+c)+(' provided in the "measurementId" field in the local Firebase config. ['+l.message+"]")),[2,{appId:a,measurementId:c}];throw l;case 4:return y.trys.push([4,6,,7]),[4,HX(e)];case 5:return h=y.sent(),r.deleteThrottleMetadata(a),[2,h];case 6:if(d=y.sent(),!WX(d)){if(r.deleteThrottleMetadata(a),c)return cn.warn("Failed to fetch this Firebase app's measurement ID from the server."+(" Falling back to the measurement ID "+c)+(' provided in the "measurementId" field in the local Firebase config. ['+d.message+"]")),[2,{appId:a,measurementId:c}];throw d}return v=Number(d.customData.httpStatus)===503?R_(s,r.intervalMillis,jX):R_(s,r.intervalMillis),m={throttleEndTimeMillis:Date.now()+v,backoffCount:s+1},r.setThrottleMetadata(a,m),cn.debug("Calling attemptFetch again in "+v+" millis"),[2,YL(e,m,n,r)];case 7:return[2]}})})}function zX(e,t){return new Promise(function(n,r){var i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener(function(){clearTimeout(s),r(Lr.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function WX(e){if(!(e instanceof Gu)||!e.customData)return!1;var t=Number(e.customData.httpStatus);return t===429||t===500||t===503||t===504}var $X=function(){function e(){this.listeners=[]}return e.prototype.addEventListener=function(t){this.listeners.push(t)},e.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GX(){return A(this,void 0,void 0,function(){var e;return C(this,function(t){switch(t.label){case 0:return af()?[3,1]:(cn.warn(Lr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return t.trys.push([1,3,,4]),[4,ab()];case 2:return t.sent(),[3,4];case 3:return e=t.sent(),cn.warn(Lr.create("indexeddb-unavailable",{errorInfo:e}).message),[2,!1];case 4:return[2,!0]}})})}function QX(e,t,n,r,i,s){return A(this,void 0,void 0,function(){var a,c,l,h,d,v,m;return C(this,function(y){switch(y.label){case 0:return a=KX(e),a.then(function(w){n[w.measurementId]=w.appId,e.options.measurementId&&w.measurementId!==e.options.measurementId&&cn.warn("The measurement ID in the local Firebase config ("+e.options.measurementId+")"+(" does not match the measurement ID fetched from the server ("+w.measurementId+").")+" To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")}).catch(function(w){return cn.error(w)}),t.push(a),c=GX().then(function(w){if(w)return r.getId()}),[4,Promise.all([a,c])];case 1:return l=y.sent(),h=l[0],d=l[1],FX()||PX(s,h.measurementId),i("js",new Date),v=(m={},m[TX]="firebase",m.update=!0,m),d!=null&&(v[EX]=d),i(Cn.CONFIG,h.measurementId,v),[2,h.measurementId]}})})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ji={},PR=[],OR={},Ed="dataLayer",XL="gtag",xR,el,Nw=!1;function YX(e){if(Nw)throw Lr.create("already-initialized");e.dataLayerName&&(Ed=e.dataLayerName),e.gtagName&&(XL=e.gtagName)}function XX(){var e=[];if(sb()&&e.push("This is a browser extension environment."),_1()||e.push("Cookies are not available."),e.length>0){var t=e.map(function(r,i){return"("+(i+1)+") "+r}).join(" "),n=Lr.create("invalid-analytics-context",{errorInfo:t});cn.warn(n.message)}}function JX(e,t){XX();var n=e.options.appId;if(!n)throw Lr.create("no-app-id");if(!e.options.apiKey)if(e.options.measurementId)cn.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest'+(" measurement ID for this Firebase app. Falling back to the measurement ID "+e.options.measurementId)+' provided in the "measurementId" field in the local Firebase config.');else throw Lr.create("no-api-key");if(ji[n]!=null)throw Lr.create("already-exists",{id:n});if(!Nw){OX(Ed);var r=MX(ji,PR,OR,Ed,XL),i=r.wrappedGtag,s=r.gtagCore;el=i,xR=s,Nw=!0}ji[n]=QX(e,PR,OR,t,xR,Ed);var a={app:e,logEvent:function(c,l,h){CX(el,ji[n],c,l,h).catch(function(d){return cn.error(d)})},setCurrentScreen:function(c,l){AX(el,ji[n],c,l).catch(function(h){return cn.error(h)})},setUserId:function(c,l){kX(el,ji[n],c,l).catch(function(h){return cn.error(h)})},setUserProperties:function(c,l){RX(el,ji[n],c,l).catch(function(h){return cn.error(h)})},setAnalyticsCollectionEnabled:function(c){NX(ji[n],c).catch(function(l){return cn.error(l)})},INTERNAL:{delete:function(){return delete ji[n],Promise.resolve()}}};return a}var ZX="@firebase/analytics",e8="0.6.18",DR="analytics";function t8(e){e.INTERNAL.registerComponent(new kn(DR,function(n){var r=n.getProvider("app").getImmediate(),i=n.getProvider("installations").getImmediate();return JX(r,i)},"PUBLIC").setServiceProps({settings:YX,EventName:Rw,isSupported:n8})),e.INTERNAL.registerComponent(new kn("analytics-internal",t,"PRIVATE")),e.registerVersion(ZX,e8);function t(n){try{var r=n.getProvider(DR).getImmediate();return{logEvent:r.logEvent}}catch(i){throw Lr.create("interop-component-reg-failed",{reason:i})}}}t8(ue);function n8(){return A(this,void 0,void 0,function(){var e;return C(this,function(t){switch(t.label){case 0:if(sb())return[2,!1];if(!_1())return[2,!1];if(!af())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,ab()];case 2:return e=t.sent(),[2,e];case 3:return t.sent(),[2,!1];case 4:return[2]}})})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var r8=function(){function e(t,n,r,i){this.client=t,this.storage=n,this.storageCache=r,this.logger=i}return e.prototype.isCachedDataFresh=function(t,n){if(!n)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var r=Date.now()-n,i=r<=t;return this.logger.debug("Config fetch cache check."+(" Cache age millis: "+r+".")+(" Cache max age millis (minimumFetchIntervalMillis setting): "+t+".")+(" Is cache hit: "+i+".")),i},e.prototype.fetch=function(t){return A(this,void 0,void 0,function(){var n,r,i,s,a;return C(this,function(c){switch(c.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return n=c.sent(),r=n[0],i=n[1],i&&this.isCachedDataFresh(t.cacheMaxAgeMillis,r)?[2,i]:(t.eTag=i&&i.eTag,[4,this.client.fetch(t)]);case 2:return s=c.sent(),a=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],s.status===200&&a.push(this.storage.setLastSuccessfulFetchResponse(s)),[4,Promise.all(a)];case 3:return c.sent(),[2,s]}})})},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fn,i8=(Fn={},Fn["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",Fn["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",Fn["registration-api-key"]="Undefined API key. Check Firebase app initialization.",Fn["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",Fn["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",Fn["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",Fn["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",Fn["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",Fn["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",Fn["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',Fn["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',Fn["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",Fn["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",Fn),Pr=new no("remoteconfig","Remote Config",i8);function o8(e,t){return e instanceof Gu&&e.code.indexOf(t)!==-1}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s8(e){return e===void 0&&(e=navigator),e.languages&&e.languages[0]||e.language}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var a8=function(){function e(t,n,r,i,s,a){this.firebaseInstallations=t,this.sdkVersion=n,this.namespace=r,this.projectId=i,this.apiKey=s,this.appId=a}return e.prototype.fetch=function(t){return A(this,void 0,void 0,function(){var n,r,i,s,a,c,l,h,d,v,m,y,w,E,T,k,P,O,H;return C(this,function(K){switch(K.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:n=K.sent(),r=n[0],i=n[1],s=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",a=s+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,c={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},l={sdk_version:this.sdkVersion,app_instance_id:r,app_instance_id_token:i,app_id:this.appId,language_code:s8()},h={method:"POST",headers:c,body:JSON.stringify(l)},d=fetch(a,h),v=new Promise(function(U,ie){t.signal.addEventListener(function(){var F=new Error("The operation was aborted.");F.name="AbortError",ie(F)})}),K.label=2;case 2:return K.trys.push([2,5,,6]),[4,Promise.race([d,v])];case 3:return K.sent(),[4,d];case 4:return m=K.sent(),[3,6];case 5:throw y=K.sent(),w="fetch-client-network",y.name==="AbortError"&&(w="fetch-timeout"),Pr.create(w,{originalErrorMessage:y.message});case 6:if(E=m.status,T=m.headers.get("ETag")||void 0,m.status!==200)return[3,11];O=void 0,K.label=7;case 7:return K.trys.push([7,9,,10]),[4,m.json()];case 8:return O=K.sent(),[3,10];case 9:throw H=K.sent(),Pr.create("fetch-client-parse",{originalErrorMessage:H.message});case 10:k=O.entries,P=O.state,K.label=11;case 11:if(P==="INSTANCE_STATE_UNSPECIFIED"?E=500:P==="NO_CHANGE"?E=304:(P==="NO_TEMPLATE"||P==="EMPTY_CONFIG")&&(k={}),E!==304&&E!==200)throw Pr.create("fetch-status",{httpStatus:E});return[2,{status:E,eTag:T,config:k}]}})})},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var u8=function(){function e(){this.listeners=[]}return e.prototype.addEventListener=function(t){this.listeners.push(t)},e.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var c8=!1,l8="",LR=0,f8=["1","true","t","yes","y","on"],s_=function(){function e(t,n){n===void 0&&(n=l8),this._source=t,this._value=n}return e.prototype.asString=function(){return this._value},e.prototype.asBoolean=function(){return this._source==="static"?c8:f8.indexOf(this._value.toLowerCase())>=0},e.prototype.asNumber=function(){if(this._source==="static")return LR;var t=Number(this._value);return isNaN(t)&&(t=LR),t},e.prototype.getSource=function(){return this._source},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var h8=60*1e3,d8=12*60*60*1e3,p8=function(){function e(t,n,r,i,s){this.app=t,this._client=n,this._storageCache=r,this._storage=i,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:h8,minimumFetchIntervalMillis:d8},this.defaultConfig={}}return e.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=Le.DEBUG;break;case"silent":this._logger.logLevel=Le.SILENT;break;default:this._logger.logLevel=Le.ERROR}},Object.defineProperty(e.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),e.prototype.activate=function(){return A(this,void 0,void 0,function(){var t,n,r;return C(this,function(i){switch(i.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return t=i.sent(),n=t[0],r=t[1],!n||!n.config||!n.eTag||n.eTag===r?[2,!1]:[4,Promise.all([this._storageCache.setActiveConfig(n.config),this._storage.setActiveConfigEtag(n.eTag)])];case 2:return i.sent(),[2,!0]}})})},e.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then(function(){t._isInitializationComplete=!0})),this._initializePromise},e.prototype.fetch=function(){return A(this,void 0,void 0,function(){var t,n,r,i=this;return C(this,function(s){switch(s.label){case 0:t=new u8,setTimeout(function(){return A(i,void 0,void 0,function(){return C(this,function(a){return t.abort(),[2]})})},this.settings.fetchTimeoutMillis),s.label=1;case 1:return s.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:t})];case 2:return s.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return s.sent(),[3,6];case 4:return n=s.sent(),r=o8(n,"fetch-throttle")?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(r)];case 5:throw s.sent(),n;case 6:return[2]}})})},e.prototype.fetchAndActivate=function(){return A(this,void 0,void 0,function(){return C(this,function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}})})},e.prototype.getAll=function(){var t=this;return v8(this._storageCache.getActiveConfig(),this.defaultConfig).reduce(function(n,r){return n[r]=t.getValue(r),n},{})},e.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},e.prototype.getNumber=function(t){return this.getValue(t).asNumber()},e.prototype.getString=function(t){return this.getValue(t).asString()},e.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var n=this._storageCache.getActiveConfig();return n&&n[t]!==void 0?new s_("remote",n[t]):this.defaultConfig&&this.defaultConfig[t]!==void 0?new s_("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new s_("static"))},e}();function v8(e,t){return e===void 0&&(e={}),t===void 0&&(t={}),Object.keys(me(me({},e),t))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Td(e,t){var n=e.target.error||void 0;return Pr.create(t,{originalErrorMessage:n&&n.message})}var Ss="app_namespace_store",g8="firebase_remote_config",m8=1;function y8(){return new Promise(function(e,t){var n=indexedDB.open(g8,m8);n.onerror=function(r){t(Td(r,"storage-open"))},n.onsuccess=function(r){e(r.target.result)},n.onupgradeneeded=function(r){var i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Ss,{keyPath:"compositeKey"})}}})}var _8=function(){function e(t,n,r,i){i===void 0&&(i=y8()),this.appId=t,this.appName=n,this.namespace=r,this.openDbPromise=i}return e.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},e.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},e.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},e.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},e.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},e.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},e.prototype.getActiveConfig=function(){return this.get("active_config")},e.prototype.setActiveConfig=function(t){return this.set("active_config",t)},e.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},e.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},e.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},e.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},e.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},e.prototype.get=function(t){return A(this,void 0,void 0,function(){var n,r=this;return C(this,function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise(function(s,a){var c=n.transaction([Ss],"readonly"),l=c.objectStore(Ss),h=r.createCompositeKey(t);try{var d=l.get(h);d.onerror=function(v){a(Td(v,"storage-get"))},d.onsuccess=function(v){var m=v.target.result;s(m?m.value:void 0)}}catch(v){a(Pr.create("storage-get",{originalErrorMessage:v&&v.message}))}})]}})})},e.prototype.set=function(t,n){return A(this,void 0,void 0,function(){var r,i=this;return C(this,function(s){switch(s.label){case 0:return[4,this.openDbPromise];case 1:return r=s.sent(),[2,new Promise(function(a,c){var l=r.transaction([Ss],"readwrite"),h=l.objectStore(Ss),d=i.createCompositeKey(t);try{var v=h.put({compositeKey:d,value:n});v.onerror=function(m){c(Td(m,"storage-set"))},v.onsuccess=function(){a()}}catch(m){c(Pr.create("storage-set",{originalErrorMessage:m&&m.message}))}})]}})})},e.prototype.delete=function(t){return A(this,void 0,void 0,function(){var n,r=this;return C(this,function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise(function(s,a){var c=n.transaction([Ss],"readwrite"),l=c.objectStore(Ss),h=r.createCompositeKey(t);try{var d=l.delete(h);d.onerror=function(v){a(Td(v,"storage-delete"))},d.onsuccess=function(){s()}}catch(v){a(Pr.create("storage-delete",{originalErrorMessage:v&&v.message}))}})]}})})},e.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var w8=function(){function e(t){this.storage=t}return e.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},e.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},e.prototype.getActiveConfig=function(){return this.activeConfig},e.prototype.loadFromStorage=function(){return A(this,void 0,void 0,function(){var t,n,r,i,s,a;return C(this,function(c){switch(c.label){case 0:return t=this.storage.getLastFetchStatus(),n=this.storage.getLastSuccessfulFetchTimestampMillis(),r=this.storage.getActiveConfig(),[4,t];case 1:return i=c.sent(),i&&(this.lastFetchStatus=i),[4,n];case 2:return s=c.sent(),s&&(this.lastSuccessfulFetchTimestampMillis=s),[4,r];case 3:return a=c.sent(),a&&(this.activeConfig=a),[2]}})})},e.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},e.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},e.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b8(e,t){return new Promise(function(n,r){var i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener(function(){clearTimeout(s),r(Pr.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function E8(e){if(!(e instanceof Gu)||!e.customData)return!1;var t=Number(e.customData.httpStatus);return t===429||t===500||t===503||t===504}var T8=function(){function e(t,n){this.client=t,this.storage=n}return e.prototype.fetch=function(t){return A(this,void 0,void 0,function(){var n;return C(this,function(r){switch(r.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return n=r.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(t,n)]}})})},e.prototype.attemptFetch=function(t,n){var r=n.throttleEndTimeMillis,i=n.backoffCount;return A(this,void 0,void 0,function(){var s,a,c;return C(this,function(l){switch(l.label){case 0:return[4,b8(t.signal,r)];case 1:l.sent(),l.label=2;case 2:return l.trys.push([2,5,,7]),[4,this.client.fetch(t)];case 3:return s=l.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return l.sent(),[2,s];case 5:if(a=l.sent(),!E8(a))throw a;return c={throttleEndTimeMillis:Date.now()+R_(i),backoffCount:i+1},[4,this.storage.setThrottleMetadata(c)];case 6:return l.sent(),[2,this.attemptFetch(t,c)];case 7:return[2]}})})},e}(),MR="@firebase/remote-config",I8="0.1.43";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S8(e){e.INTERNAL.registerComponent(new kn("remoteConfig",t,"PUBLIC").setMultipleInstances(!0)),e.registerVersion(MR,I8);function t(n,r){var i=r.instanceIdentifier,s=n.getProvider("app").getImmediate(),a=n.getProvider("installations").getImmediate();if(typeof window>"u")throw Pr.create("registration-window");var c=s.options,l=c.projectId,h=c.apiKey,d=c.appId;if(!l)throw Pr.create("registration-project-id");if(!h)throw Pr.create("registration-api-key");if(!d)throw Pr.create("registration-app-id");i=i||"firebase";var v=new _8(d,s.name,i),m=new w8(v),y=new la(MR);y.logLevel=Le.ERROR;var w=new a8(a,e.SDK_VERSION,i,l,h,d),E=new T8(w,v),T=new r8(E,v,m,y),k=new p8(s,T,m,v,y);return k.ensureInitialized(),k}}S8(ue);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $r,C8=($r={},$r["already-activated"]="You are trying to activate AppCheck for FirebaseApp {$appName}, while it is already activated. AppCheck can only be activated once.",$r["use-before-activation"]="AppCheck is being used before activate() is called for FirebaseApp {$appName}. Please make sure you call activate() before instantiating other Firebase services.",$r["fetch-network-error"]="Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",$r["fetch-parse-error"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",$r["fetch-status-error"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",$r["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",$r["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",$r["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",$r["recaptcha-error"]="ReCAPTCHA error.",$r),mr=new no("appCheck","AppCheck",C8);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var JL=new Map,A8={activated:!1,tokenObservers:[]},k8={enabled:!1};function Wn(e){return JL.get(e)||A8}function Ii(e,t){JL.set(e,t)}function RE(){return k8}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ZL="https://content-firebaseappcheck.googleapis.com/v1beta",R8="exchangeRecaptchaToken",N8="exchangeDebugToken",FR={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var P8=function(){function e(t,n,r,i,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}return e.prototype.start=function(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(function(){})},e.prototype.stop=function(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)},e.prototype.isRunning=function(){return!!this.pending},e.prototype.process=function(t){return A(this,void 0,void 0,function(){var n;return C(this,function(r){switch(r.label){case 0:this.stop(),r.label=1;case 1:return r.trys.push([1,6,,7]),this.pending=new Jt,[4,O8(this.getNextRun(t))];case 2:return r.sent(),this.pending.resolve(),[4,this.pending.promise];case 3:return r.sent(),this.pending=new Jt,[4,this.operation()];case 4:return r.sent(),this.pending.resolve(),[4,this.pending.promise];case 5:return r.sent(),this.process(!0).catch(function(){}),[3,7];case 6:return n=r.sent(),this.retryPolicy(n)?this.process(!1).catch(function(){}):this.stop(),[3,7];case 7:return[2]}})})},e.prototype.getNextRun=function(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();var n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n},e}();function O8(e){return new Promise(function(t){setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UR(){return self.grecaptcha}function eM(e){if(!Wn(e).activated)throw mr.create("use-before-activation",{appName:e.name})}function x8(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,n=e==="x"?t:t&3|8;return n.toString(16)})}function D8(e){return Lp.encodeString(JSON.stringify(e),!1)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tM(e,t){var n=e.url,r=e.body;return A(this,void 0,void 0,function(){var i,s,a,c,l,h,d,v,m,y;return C(this,function(w){switch(w.label){case 0:i={"Content-Type":"application/json"},s=t.getImmediate({optional:!0}),s&&(i["X-Firebase-Client"]=s.getPlatformInfoString()),a={method:"POST",body:JSON.stringify(r),headers:i},w.label=1;case 1:return w.trys.push([1,3,,4]),[4,fetch(n,a)];case 2:return c=w.sent(),[3,4];case 3:throw l=w.sent(),mr.create("fetch-network-error",{originalErrorMessage:l.message});case 4:if(c.status!==200)throw mr.create("fetch-status-error",{httpStatus:c.status});w.label=5;case 5:return w.trys.push([5,7,,8]),[4,c.json()];case 6:return h=w.sent(),[3,8];case 7:throw d=w.sent(),mr.create("fetch-parse-error",{originalErrorMessage:d.message});case 8:if(v=h.ttl.match(/^([\d.]+)(s)$/),!v||!v[2]||isNaN(Number(v[1])))throw mr.create("fetch-parse-error",{originalErrorMessage:"ttl field (timeToLive) is not in standard Protobuf Duration "+("format: "+h.ttl)});return m=Number(v[1])*1e3,y=Date.now(),[2,{token:h.attestationToken,expireTimeMillis:y+m,issuedAtTimeMillis:y}]}})})}function L8(e,t){var n=e.options,r=n.projectId,i=n.appId,s=n.apiKey;return{url:ZL+"/projects/"+r+"/apps/"+i+":"+R8+"?key="+s,body:{recaptcha_token:t}}}function M8(e,t){var n=e.options,r=n.projectId,i=n.appId,s=n.apiKey;return{url:ZL+"/projects/"+r+"/apps/"+i+":"+N8+"?key="+s,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var F8="firebase-app-check-database",U8=1,rf="firebase-app-check-store",nM="debug-token",ud=null;function rM(){return ud||(ud=new Promise(function(e,t){try{var n=indexedDB.open(F8,U8);n.onsuccess=function(r){e(r.target.result)},n.onerror=function(r){var i;t(mr.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=function(r){var i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(rf,{keyPath:"compositeKey"})}}}catch(r){t(mr.create("storage-open",{originalErrorMessage:r.message}))}}),ud)}function j8(e){return oM(sM(e))}function V8(e,t){return iM(sM(e),t)}function B8(e){return iM(nM,e)}function q8(){return oM(nM)}function iM(e,t){return A(this,void 0,void 0,function(){var n,r,i,s;return C(this,function(a){switch(a.label){case 0:return[4,rM()];case 1:return n=a.sent(),r=n.transaction(rf,"readwrite"),i=r.objectStore(rf),s=i.put({compositeKey:e,value:t}),[2,new Promise(function(c,l){s.onsuccess=function(h){c()},r.onerror=function(h){var d;l(mr.create("storage-set",{originalErrorMessage:(d=h.target.error)===null||d===void 0?void 0:d.message}))}})]}})})}function oM(e){return A(this,void 0,void 0,function(){var t,n,r,i;return C(this,function(s){switch(s.label){case 0:return[4,rM()];case 1:return t=s.sent(),n=t.transaction(rf,"readonly"),r=n.objectStore(rf),i=r.get(e),[2,new Promise(function(a,c){i.onsuccess=function(l){var h=l.target.result;a(h?h.value:void 0)},n.onerror=function(l){var h;c(mr.create("storage-get",{originalErrorMessage:(h=l.target.error)===null||h===void 0?void 0:h.message}))}})]}})})}function sM(e){return e.options.appId+"-"+e.name}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vv=new la("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H8(e){return A(this,void 0,void 0,function(){var t,n;return C(this,function(r){switch(r.label){case 0:if(!af())return[3,5];t=void 0,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,j8(e)];case 2:return t=r.sent(),[3,4];case 3:return n=r.sent(),Vv.warn("Failed to read token from indexeddb. Error: "+n),[3,4];case 4:return[2,t];case 5:return[2,void 0]}})})}function jR(e,t){return af()?V8(e,t).catch(function(n){Vv.warn("Failed to write token to indexeddb. Error: "+n)}):Promise.resolve()}function K8(){return A(this,void 0,void 0,function(){var e,t;return C(this,function(n){switch(n.label){case 0:e=void 0,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,q8()];case 2:return e=n.sent(),[3,4];case 3:return n.sent(),[3,4];case 4:return e?[2,e]:(t=x8(),B8(t).catch(function(r){return Vv.warn("Failed to persist debug token to indexeddb. Error: "+r)}),console.log("AppCheck debug token: "+t+". You will need to whitelist it in the Firebase console for it to work"),[2,t])}})})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z8(){var e=RE();return e.enabled}function W8(){return A(this,void 0,void 0,function(){var e;return C(this,function(t){if(e=RE(),e.enabled&&e.token)return[2,e.token.promise];throw Error(`
            Can't get debug token in production mode.
        `)})})}function $8(){var e=ZV();if(!(typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)){var t=RE();t.enabled=!0;var n=new Jt;t.token=n,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(K8())}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var G8={error:"UNKNOWN_ERROR"};function _p(e,t,n){return n===void 0&&(n=!1),A(this,void 0,void 0,function(){var r,i,s,a,c,l,h,d,v,m;return C(this,function(y){switch(y.label){case 0:return eM(e),r=Wn(e),i=r.token,s=void 0,i?[3,2]:[4,r.cachedTokenPromise];case 1:a=y.sent(),a&&of(a)&&(i=a,Ii(e,me(me({},r),{token:i})),VR(e,{token:i.token})),y.label=2;case 2:return!n&&i&&of(i)?[2,{token:i.token}]:z8()?(l=tM,h=M8,d=[e],[4,W8()]):[3,6];case 3:return[4,l.apply(void 0,[h.apply(void 0,d.concat([y.sent()])),t])];case 4:return c=y.sent(),[4,jR(e,c)];case 5:return y.sent(),Ii(e,me(me({},r),{token:c})),[2,{token:c.token}];case 6:return y.trys.push([6,8,,9]),[4,r.provider.getToken()];case 7:return i=y.sent(),[3,9];case 8:return v=y.sent(),Vv.error(v),s=v,[3,9];case 9:return i?[3,10]:(m=Y8(s),[3,12]);case 10:return m={token:i.token},Ii(e,me(me({},r),{token:i})),[4,jR(e,i)];case 11:y.sent(),y.label=12;case 12:return VR(e,m),[2,m]}})})}function aM(e,t,n,r,i){var s=Wn(e),a={next:r,error:i,type:n},c=me(me({},s),{tokenObservers:Ne(Ne([],s.tokenObservers),[a])});if(!c.tokenRefresher){var l=Q8(e,t);c.tokenRefresher=l}if(!c.tokenRefresher.isRunning()&&s.isTokenAutoRefreshEnabled&&c.tokenRefresher.start(),s.token&&of(s.token)){var h=s.token;Promise.resolve().then(function(){return r({token:h.token})}).catch(function(){})}else s.token==null&&s.cachedTokenPromise.then(function(d){d&&of(d)&&r({token:d.token})}).catch(function(){});Ii(e,c)}function NE(e,t){var n=Wn(e),r=n.tokenObservers.filter(function(i){return i.next!==t});r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),Ii(e,me(me({},n),{tokenObservers:r}))}function Q8(e,t){var n=this;return new P8(function(){return A(n,void 0,void 0,function(){var r,i;return C(this,function(s){switch(s.label){case 0:return r=Wn(e),r.token?[3,2]:[4,_p(e,t)];case 1:return i=s.sent(),[3,4];case 2:return[4,_p(e,t,!0)];case 3:i=s.sent(),s.label=4;case 4:if(i.error)throw i.error;return[2]}})})},function(){return!0},function(){var r=Wn(e);if(r.token){var i=r.token.issuedAtTimeMillis+(r.token.expireTimeMillis-r.token.issuedAtTimeMillis)*.5+3e5,s=r.token.expireTimeMillis-5*60*1e3;return i=Math.min(i,s),Math.max(0,i-Date.now())}else return 0},FR.RETRIAL_MIN_WAIT,FR.RETRIAL_MAX_WAIT)}function VR(e,t){for(var n=Wn(e).tokenObservers,r=0,i=n;r<i.length;r++){var s=i[r];try{s.type==="EXTERNAL"&&t.error!=null?s.error(t.error):s.next(t)}catch{}}}function of(e){return e.expireTimeMillis-Date.now()>0}function Y8(e){return{token:D8(G8),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var X8="https://www.google.com/recaptcha/api.js";function J8(e,t){var n=Wn(e),r=new Jt;Ii(e,me(me({},n),{reCAPTCHAState:{initialized:r}}));var i="fire_app_check_"+e.name,s=document.createElement("div");s.id=i,s.style.display="none",document.body.appendChild(s);var a=UR();return a?a.ready(function(){BR(e,t,a,i),r.resolve(a)}):eJ(function(){var c=UR();if(!c)throw new Error("no recaptcha");c.ready(function(){BR(e,t,c,i),r.resolve(c)})}),r.promise}function Z8(e){return A(this,void 0,void 0,function(){var t,n;return C(this,function(r){switch(r.label){case 0:return eM(e),t=Wn(e).reCAPTCHAState,[4,t.initialized.promise];case 1:return n=r.sent(),[2,new Promise(function(i,s){var a=Wn(e).reCAPTCHAState;n.ready(function(){i(n.execute(a.widgetId,{action:"fire_app_check"}))})})]}})})}function BR(e,t,n,r){var i=n.render(r,{sitekey:t,size:"invisible"}),s=Wn(e);Ii(e,me(me({},s),{reCAPTCHAState:me(me({},s.reCAPTCHAState),{widgetId:i})}))}function eJ(e){var t=document.createElement("script");t.src=""+X8,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pw=function(){function e(t){this._siteKey=t}return e.prototype.getToken=function(){return A(this,void 0,void 0,function(){var t;return C(this,function(n){switch(n.label){case 0:if(!this._app||!this._platformLoggerProvider)throw mr.create("use-before-activation",{appName:""});n.label=1;case 1:return n.trys.push([1,3,,4]),[4,Z8(this._app)];case 2:return t=n.sent(),[3,4];case 3:throw n.sent(),mr.create("recaptcha-error");case 4:return[2,tM(L8(this._app,t),this._platformLoggerProvider)]}})})},e.prototype.initialize=function(t,n){this._app=t,this._platformLoggerProvider=n,J8(t,this._siteKey).catch(function(){})},e}(),Ow=function(){function e(t){this._customProviderOptions=t}return e.prototype.getToken=function(){return A(this,void 0,void 0,function(){var t,n,r;return C(this,function(i){switch(i.label){case 0:if(!this._app)throw mr.create("use-before-activation",{appName:""});return[4,this._customProviderOptions.getToken()];case 1:return t=i.sent(),n=rB(t.token),r=n!==null&&n<Date.now()&&n>0?n*1e3:Date.now(),[2,me(me({},t),{issuedAtTimeMillis:r})]}})})},e.prototype.initialize=function(t){this._app=t},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tJ(e,t,n,r){var i=Wn(e);if(i.activated)throw mr.create("already-activated",{appName:e.name});var s=me(me({},i),{activated:!0});s.cachedTokenPromise=H8(e).then(function(a){return a&&of(a)&&Ii(e,me(me({},Wn(e)),{token:a})),a}),typeof t=="string"?s.provider=new Pw(t):t instanceof Pw||t instanceof Ow?s.provider=t:s.provider=new Ow({getToken:t.getToken}),s.isTokenAutoRefreshEnabled=r===void 0?e.automaticDataCollectionEnabled:r,Ii(e,s),s.provider.initialize(e,n)}function nJ(e,t){var n=Wn(e);n.tokenRefresher&&(t===!0?n.tokenRefresher.start():n.tokenRefresher.stop()),Ii(e,me(me({},n),{isTokenAutoRefreshEnabled:t}))}function rJ(e,t,n){return A(this,void 0,void 0,function(){var r;return C(this,function(i){switch(i.label){case 0:return[4,_p(e,t,n)];case 1:if(r=i.sent(),r.error)throw r.error;return[2,{token:r.token}]}})})}function iJ(e,t,n,r,i){var s=function(){},a=function(){};return n.next!=null?s=n.next.bind(n):s=n,n.error!=null?a=n.error.bind(n):r&&(a=r),aM(e,t,"EXTERNAL",s,a),function(){return NE(e,s)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oJ(e,t){return{app:e,activate:function(n,r){return tJ(e,n,t,r)},setTokenAutoRefreshEnabled:function(n){return nJ(e,n)},getToken:function(n){return rJ(e,t,n)},onTokenChanged:function(n,r,i){return iJ(e,t,n,r)},INTERNAL:{delete:function(){for(var n=Wn(e).tokenObservers,r=0,i=n;r<i.length;r++){var s=i[r];NE(e,s.next)}return Promise.resolve()}}}}function sJ(e,t){return{getToken:function(n){return _p(e,t,n)},addTokenListener:function(n){return aM(e,t,"INTERNAL",n)},removeTokenListener:function(n){return NE(e,n)}}}var aJ="@firebase/app-check",uJ="0.3.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cJ="appCheck",qR="app-check-internal";function lJ(e){e.INTERNAL.registerComponent(new kn(cJ,function(t){var n=t.getProvider("app").getImmediate(),r=t.getProvider("platform-logger");return oJ(n,r)},"PUBLIC").setServiceProps({ReCaptchaV3Provider:Pw,CustomProvider:Ow}).setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(function(t,n,r){var i=t.getProvider(qR);i.initialize()})),e.INTERNAL.registerComponent(new kn(qR,function(t){var n=t.getProvider("app").getImmediate(),r=t.getProvider("platform-logger");return sJ(n,r)},"PUBLIC").setInstantiationMode("EXPLICIT")),e.registerVersion(aJ,uJ)}lJ(ue);$8();var fJ="firebase",uM="8.10.1";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ue.registerVersion(fJ,uM,"app");ue.SDK_VERSION=uM;var hJ="firebase",dJ="8.10.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */console.warn(`
It looks like you're using the development build of the Firebase JS SDK.
When deploying Firebase apps to production, it is advisable to only import
the individual SDK components you intend to use.

For the module builds, these are available in the following manner
(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):

CommonJS Modules:
const firebase = require('firebase/app');
require('firebase/<PACKAGE>');

ES Modules:
import firebase from 'firebase/app';
import 'firebase/<PACKAGE>';

Typescript:
import firebase from 'firebase/app';
import 'firebase/<PACKAGE>';
`);ue.registerVersion(hJ,dJ);function pJ(e){for(let t=e.length-1;t>0;t--){let n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e}function vJ(e){return new Promise(t=>setTimeout(t,e))}const HR=4,jf=f1("quizesStore",{state:()=>({quizesPerPage:HR,currentPage:0,quizesList:[],quizesIdsList:[],isQuizesLoading:!1}),getters:{getQuizesQuantity(){return this.quizesIdsList.length},hasNextPage(){return this.getQuizesQuantity>(this.currentPage+1)*this.quizesPerPage},hasPreviousPage(){return this.currentPage>0}},actions:{async getQuizes(e=""){this.isQuizesLoading=!0;const n=(await ue.database().ref("quizes").orderByKey().startAfter(e).limitToFirst(HR).once("value")).val();if(!n)return[];this.quizesList=Object.entries(n).map(r=>({key:r[0],...r[1]})),await vJ(1e3),this.isQuizesLoading=!1},addQuiz(e){this.quizesList.push(e),console.log(this.quizesList)},async getQuizesIds(){const e=await ue.database().ref("quizesIds").once("value"),t=Object.values(e.val());console.log(t),this.quizesIdsList=t},addQuizId(e){this.quizesIdsList.push(e)},async getNextPage(){console.log("page next"),await this.getQuizes(this.quizesList.at(-1).key),this.currentPage+=1},async getPreviousPage(){console.log("page prev"),this.currentPage-=1,this.currentPage==0?await this.getQuizes():await this.getQuizes(this.quizesIdsList.at(this.currentPage*this.quizesPerPage-1))}}}),gJ={class:"bg-temnoFioletoviy text-bezheviy h-screen text-amber-950"},mJ={__name:"App",setup(e){const t=jf();return KN(async()=>{await t.getQuizesIds(),await t.getQuizes()}),(n,r)=>{const i=D4("router-view");return wt(),ln("div",gJ,[Zt(i)])}}};/*!
  * vue-router v4.1.6
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const nu=typeof window<"u";function yJ(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const Je=Object.assign;function a_(e,t){const n={};for(const r in t){const i=t[r];n[r]=ii(i)?i.map(e):e(i)}return n}const El=()=>{},ii=Array.isArray,_J=/\/$/,wJ=e=>e.replace(_J,"");function u_(e,t,n="/"){let r,i={},s="",a="";const c=t.indexOf("#");let l=t.indexOf("?");return c<l&&c>=0&&(l=-1),l>-1&&(r=t.slice(0,l),s=t.slice(l+1,c>-1?c:t.length),i=e(s)),c>-1&&(r=r||t.slice(0,c),a=t.slice(c,t.length)),r=IJ(r??t,n),{fullPath:r+(s&&"?")+s+a,path:r,query:i,hash:a}}function bJ(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function KR(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function EJ(e,t,n){const r=t.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&qu(t.matched[r],n.matched[i])&&cM(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function qu(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function cM(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!TJ(e[n],t[n]))return!1;return!0}function TJ(e,t){return ii(e)?zR(e,t):ii(t)?zR(t,e):e===t}function zR(e,t){return ii(t)?e.length===t.length&&e.every((n,r)=>n===t[r]):e.length===1&&e[0]===t}function IJ(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/");let i=n.length-1,s,a;for(s=0;s<r.length;s++)if(a=r[s],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(s-(s===r.length?1:0)).join("/")}var sf;(function(e){e.pop="pop",e.push="push"})(sf||(sf={}));var Tl;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Tl||(Tl={}));function SJ(e){if(!e)if(nu){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),wJ(e)}const CJ=/^[^#]+#/;function AJ(e,t){return e.replace(CJ,"#")+t}function kJ(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const Bv=()=>({left:window.pageXOffset,top:window.pageYOffset});function RJ(e){let t;if("el"in e){const n=e.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;t=kJ(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function WR(e,t){return(history.state?history.state.position-t:-1)+e}const xw=new Map;function NJ(e,t){xw.set(e,t)}function PJ(e){const t=xw.get(e);return xw.delete(e),t}let OJ=()=>location.protocol+"//"+location.host;function lM(e,t){const{pathname:n,search:r,hash:i}=t,s=e.indexOf("#");if(s>-1){let c=i.includes(e.slice(s))?e.slice(s).length:1,l=i.slice(c);return l[0]!=="/"&&(l="/"+l),KR(l,"")}return KR(n,e)+r+i}function xJ(e,t,n,r){let i=[],s=[],a=null;const c=({state:m})=>{const y=lM(e,location),w=n.value,E=t.value;let T=0;if(m){if(n.value=y,t.value=m,a&&a===w){a=null;return}T=E?m.position-E.position:0}else r(y);i.forEach(k=>{k(n.value,w,{delta:T,type:sf.pop,direction:T?T>0?Tl.forward:Tl.back:Tl.unknown})})};function l(){a=n.value}function h(m){i.push(m);const y=()=>{const w=i.indexOf(m);w>-1&&i.splice(w,1)};return s.push(y),y}function d(){const{history:m}=window;m.state&&m.replaceState(Je({},m.state,{scroll:Bv()}),"")}function v(){for(const m of s)m();s=[],window.removeEventListener("popstate",c),window.removeEventListener("beforeunload",d)}return window.addEventListener("popstate",c),window.addEventListener("beforeunload",d),{pauseListeners:l,listen:h,destroy:v}}function $R(e,t,n,r=!1,i=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:i?Bv():null}}function DJ(e){const{history:t,location:n}=window,r={value:lM(e,n)},i={value:t.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function s(l,h,d){const v=e.indexOf("#"),m=v>-1?(n.host&&document.querySelector("base")?e:e.slice(v))+l:OJ()+e+l;try{t[d?"replaceState":"pushState"](h,"",m),i.value=h}catch(y){console.error(y),n[d?"replace":"assign"](m)}}function a(l,h){const d=Je({},t.state,$R(i.value.back,l,i.value.forward,!0),h,{position:i.value.position});s(l,d,!0),r.value=l}function c(l,h){const d=Je({},i.value,t.state,{forward:l,scroll:Bv()});s(d.current,d,!0);const v=Je({},$R(r.value,l,null),{position:d.position+1},h);s(l,v,!1),r.value=l}return{location:r,state:i,push:c,replace:a}}function LJ(e){e=SJ(e);const t=DJ(e),n=xJ(e,t.state,t.location,t.replace);function r(s,a=!0){a||n.pauseListeners(),history.go(s)}const i=Je({location:"",base:e,go:r,createHref:AJ.bind(null,e)},t,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function MJ(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),LJ(e)}function FJ(e){return typeof e=="string"||e&&typeof e=="object"}function fM(e){return typeof e=="string"||typeof e=="symbol"}const bo={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},hM=Symbol("");var GR;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(GR||(GR={}));function Hu(e,t){return Je(new Error,{type:e,[hM]:!0},t)}function Vi(e,t){return e instanceof Error&&hM in e&&(t==null||!!(e.type&t))}const QR="[^/]+?",UJ={sensitive:!1,strict:!1,start:!0,end:!0},jJ=/[.+*?^${}()[\]/\\]/g;function VJ(e,t){const n=Je({},UJ,t),r=[];let i=n.start?"^":"";const s=[];for(const h of e){const d=h.length?[]:[90];n.strict&&!h.length&&(i+="/");for(let v=0;v<h.length;v++){const m=h[v];let y=40+(n.sensitive?.25:0);if(m.type===0)v||(i+="/"),i+=m.value.replace(jJ,"\\$&"),y+=40;else if(m.type===1){const{value:w,repeatable:E,optional:T,regexp:k}=m;s.push({name:w,repeatable:E,optional:T});const P=k||QR;if(P!==QR){y+=10;try{new RegExp(`(${P})`)}catch(H){throw new Error(`Invalid custom RegExp for param "${w}" (${P}): `+H.message)}}let O=E?`((?:${P})(?:/(?:${P}))*)`:`(${P})`;v||(O=T&&h.length<2?`(?:/${O})`:"/"+O),T&&(O+="?"),i+=O,y+=20,T&&(y+=-8),E&&(y+=-20),P===".*"&&(y+=-50)}d.push(y)}r.push(d)}if(n.strict&&n.end){const h=r.length-1;r[h][r[h].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const a=new RegExp(i,n.sensitive?"":"i");function c(h){const d=h.match(a),v={};if(!d)return null;for(let m=1;m<d.length;m++){const y=d[m]||"",w=s[m-1];v[w.name]=y&&w.repeatable?y.split("/"):y}return v}function l(h){let d="",v=!1;for(const m of e){(!v||!d.endsWith("/"))&&(d+="/"),v=!1;for(const y of m)if(y.type===0)d+=y.value;else if(y.type===1){const{value:w,repeatable:E,optional:T}=y,k=w in h?h[w]:"";if(ii(k)&&!E)throw new Error(`Provided param "${w}" is an array but it is not repeatable (* or + modifiers)`);const P=ii(k)?k.join("/"):k;if(!P)if(T)m.length<2&&(d.endsWith("/")?d=d.slice(0,-1):v=!0);else throw new Error(`Missing required param "${w}"`);d+=P}}return d||"/"}return{re:a,score:r,keys:s,parse:c,stringify:l}}function BJ(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function qJ(e,t){let n=0;const r=e.score,i=t.score;for(;n<r.length&&n<i.length;){const s=BJ(r[n],i[n]);if(s)return s;n++}if(Math.abs(i.length-r.length)===1){if(YR(r))return 1;if(YR(i))return-1}return i.length-r.length}function YR(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const HJ={type:0,value:""},KJ=/[a-zA-Z0-9_]/;function zJ(e){if(!e)return[[]];if(e==="/")return[[HJ]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(y){throw new Error(`ERR (${n})/"${h}": ${y}`)}let n=0,r=n;const i=[];let s;function a(){s&&i.push(s),s=[]}let c=0,l,h="",d="";function v(){h&&(n===0?s.push({type:0,value:h}):n===1||n===2||n===3?(s.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${h}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:h,regexp:d,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),h="")}function m(){h+=l}for(;c<e.length;){if(l=e[c++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(h&&v(),a()):l===":"?(v(),n=1):m();break;case 4:m(),n=r;break;case 1:l==="("?n=2:KJ.test(l)?m():(v(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&c--);break;case 2:l===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+l:n=3:d+=l;break;case 3:v(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&c--,d="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${h}"`),v(),a(),i}function WJ(e,t,n){const r=VJ(zJ(e.path),n),i=Je(r,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function $J(e,t){const n=[],r=new Map;t=ZR({strict:!1,end:!0,sensitive:!1},t);function i(d){return r.get(d)}function s(d,v,m){const y=!m,w=GJ(d);w.aliasOf=m&&m.record;const E=ZR(t,d),T=[w];if("alias"in d){const O=typeof d.alias=="string"?[d.alias]:d.alias;for(const H of O)T.push(Je({},w,{components:m?m.record.components:w.components,path:H,aliasOf:m?m.record:w}))}let k,P;for(const O of T){const{path:H}=O;if(v&&H[0]!=="/"){const K=v.record.path,U=K[K.length-1]==="/"?"":"/";O.path=v.record.path+(H&&U+H)}if(k=WJ(O,v,E),m?m.alias.push(k):(P=P||k,P!==k&&P.alias.push(k),y&&d.name&&!JR(k)&&a(d.name)),w.children){const K=w.children;for(let U=0;U<K.length;U++)s(K[U],k,m&&m.children[U])}m=m||k,(k.record.components&&Object.keys(k.record.components).length||k.record.name||k.record.redirect)&&l(k)}return P?()=>{a(P)}:El}function a(d){if(fM(d)){const v=r.get(d);v&&(r.delete(d),n.splice(n.indexOf(v),1),v.children.forEach(a),v.alias.forEach(a))}else{const v=n.indexOf(d);v>-1&&(n.splice(v,1),d.record.name&&r.delete(d.record.name),d.children.forEach(a),d.alias.forEach(a))}}function c(){return n}function l(d){let v=0;for(;v<n.length&&qJ(d,n[v])>=0&&(d.record.path!==n[v].record.path||!dM(d,n[v]));)v++;n.splice(v,0,d),d.record.name&&!JR(d)&&r.set(d.record.name,d)}function h(d,v){let m,y={},w,E;if("name"in d&&d.name){if(m=r.get(d.name),!m)throw Hu(1,{location:d});E=m.record.name,y=Je(XR(v.params,m.keys.filter(P=>!P.optional).map(P=>P.name)),d.params&&XR(d.params,m.keys.map(P=>P.name))),w=m.stringify(y)}else if("path"in d)w=d.path,m=n.find(P=>P.re.test(w)),m&&(y=m.parse(w),E=m.record.name);else{if(m=v.name?r.get(v.name):n.find(P=>P.re.test(v.path)),!m)throw Hu(1,{location:d,currentLocation:v});E=m.record.name,y=Je({},v.params,d.params),w=m.stringify(y)}const T=[];let k=m;for(;k;)T.unshift(k.record),k=k.parent;return{name:E,path:w,params:y,matched:T,meta:YJ(T)}}return e.forEach(d=>s(d)),{addRoute:s,resolve:h,removeRoute:a,getRoutes:c,getRecordMatcher:i}}function XR(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function GJ(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:QJ(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function QJ(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]=typeof n=="boolean"?n:n[r];return t}function JR(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function YJ(e){return e.reduce((t,n)=>Je(t,n.meta),{})}function ZR(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function dM(e,t){return t.children.some(n=>n===e||dM(e,n))}const pM=/#/g,XJ=/&/g,JJ=/\//g,ZJ=/=/g,e7=/\?/g,vM=/\+/g,t7=/%5B/g,n7=/%5D/g,gM=/%5E/g,r7=/%60/g,mM=/%7B/g,i7=/%7C/g,yM=/%7D/g,o7=/%20/g;function PE(e){return encodeURI(""+e).replace(i7,"|").replace(t7,"[").replace(n7,"]")}function s7(e){return PE(e).replace(mM,"{").replace(yM,"}").replace(gM,"^")}function Dw(e){return PE(e).replace(vM,"%2B").replace(o7,"+").replace(pM,"%23").replace(XJ,"%26").replace(r7,"`").replace(mM,"{").replace(yM,"}").replace(gM,"^")}function a7(e){return Dw(e).replace(ZJ,"%3D")}function u7(e){return PE(e).replace(pM,"%23").replace(e7,"%3F")}function c7(e){return e==null?"":u7(e).replace(JJ,"%2F")}function wp(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function l7(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let i=0;i<r.length;++i){const s=r[i].replace(vM," "),a=s.indexOf("="),c=wp(a<0?s:s.slice(0,a)),l=a<0?null:wp(s.slice(a+1));if(c in t){let h=t[c];ii(h)||(h=t[c]=[h]),h.push(l)}else t[c]=l}return t}function eN(e){let t="";for(let n in e){const r=e[n];if(n=a7(n),r==null){r!==void 0&&(t+=(t.length?"&":"")+n);continue}(ii(r)?r.map(s=>s&&Dw(s)):[r&&Dw(r)]).forEach(s=>{s!==void 0&&(t+=(t.length?"&":"")+n,s!=null&&(t+="="+s))})}return t}function f7(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=ii(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return t}const h7=Symbol(""),tN=Symbol(""),qv=Symbol(""),OE=Symbol(""),Lw=Symbol("");function tl(){let e=[];function t(r){return e.push(r),()=>{const i=e.indexOf(r);i>-1&&e.splice(i,1)}}function n(){e=[]}return{add:t,list:()=>e,reset:n}}function So(e,t,n,r,i){const s=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((a,c)=>{const l=v=>{v===!1?c(Hu(4,{from:n,to:t})):v instanceof Error?c(v):FJ(v)?c(Hu(2,{from:t,to:v})):(s&&r.enterCallbacks[i]===s&&typeof v=="function"&&s.push(v),a())},h=e.call(r&&r.instances[i],t,n,l);let d=Promise.resolve(h);e.length<3&&(d=d.then(l)),d.catch(v=>c(v))})}function c_(e,t,n,r){const i=[];for(const s of e)for(const a in s.components){let c=s.components[a];if(!(t!=="beforeRouteEnter"&&!s.instances[a]))if(d7(c)){const h=(c.__vccOpts||c)[t];h&&i.push(So(h,n,r,s,a))}else{let l=c();i.push(()=>l.then(h=>{if(!h)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${s.path}"`));const d=yJ(h)?h.default:h;s.components[a]=d;const m=(d.__vccOpts||d)[t];return m&&So(m,n,r,s,a)()}))}}return i}function d7(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function nN(e){const t=xr(qv),n=xr(OE),r=Vt(()=>t.resolve(Dt(e.to))),i=Vt(()=>{const{matched:l}=r.value,{length:h}=l,d=l[h-1],v=n.matched;if(!d||!v.length)return-1;const m=v.findIndex(qu.bind(null,d));if(m>-1)return m;const y=rN(l[h-2]);return h>1&&rN(d)===y&&v[v.length-1].path!==y?v.findIndex(qu.bind(null,l[h-2])):m}),s=Vt(()=>i.value>-1&&m7(n.params,r.value.params)),a=Vt(()=>i.value>-1&&i.value===n.matched.length-1&&cM(n.params,r.value.params));function c(l={}){return g7(l)?t[Dt(e.replace)?"replace":"push"](Dt(e.to)).catch(El):Promise.resolve()}return{route:r,href:Vt(()=>r.value.href),isActive:s,isExactActive:a,navigate:c}}const p7=qN({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:nN,setup(e,{slots:t}){const n=ca(nN(e)),{options:r}=xr(qv),i=Vt(()=>({[iN(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[iN(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=t.default&&t.default(n);return e.custom?s:rb("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},s)}}}),v7=p7;function g7(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function m7(e,t){for(const n in t){const r=t[n],i=e[n];if(typeof r=="string"){if(r!==i)return!1}else if(!ii(i)||i.length!==r.length||r.some((s,a)=>s!==i[a]))return!1}return!0}function rN(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const iN=(e,t,n)=>e??t??n,y7=qN({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const r=xr(Lw),i=Vt(()=>e.route||r.value),s=xr(tN,0),a=Vt(()=>{let h=Dt(s);const{matched:d}=i.value;let v;for(;(v=d[h])&&!v.components;)h++;return h}),c=Vt(()=>i.value.matched[a.value]);fd(tN,Vt(()=>a.value+1)),fd(h7,c),fd(Lw,i);const l=Cp();return Vs(()=>[l.value,c.value,e.name],([h,d,v],[m,y,w])=>{d&&(d.instances[v]=h,y&&y!==d&&h&&h===m&&(d.leaveGuards.size||(d.leaveGuards=y.leaveGuards),d.updateGuards.size||(d.updateGuards=y.updateGuards))),h&&d&&(!y||!qu(d,y)||!m)&&(d.enterCallbacks[v]||[]).forEach(E=>E(h))},{flush:"post"}),()=>{const h=i.value,d=e.name,v=c.value,m=v&&v.components[d];if(!m)return oN(n.default,{Component:m,route:h});const y=v.props[d],w=y?y===!0?h.params:typeof y=="function"?y(h):y:null,T=rb(m,Je({},w,t,{onVnodeUnmounted:k=>{k.component.isUnmounted&&(v.instances[d]=null)},ref:l}));return oN(n.default,{Component:T,route:h})||T}}});function oN(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const _7=y7;function w7(e){const t=$J(e.routes,e),n=e.parseQuery||l7,r=e.stringifyQuery||eN,i=e.history,s=tl(),a=tl(),c=tl(),l=t4(bo);let h=bo;nu&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=a_.bind(null,V=>""+V),v=a_.bind(null,c7),m=a_.bind(null,wp);function y(V,re){let ne,J;return fM(V)?(ne=t.getRecordMatcher(V),J=re):J=V,t.addRoute(J,ne)}function w(V){const re=t.getRecordMatcher(V);re&&t.removeRoute(re)}function E(){return t.getRoutes().map(V=>V.record)}function T(V){return!!t.getRecordMatcher(V)}function k(V,re){if(re=Je({},re||l.value),typeof V=="string"){const I=u_(n,V,re.path),N=t.resolve({path:I.path},re),D=i.createHref(I.fullPath);return Je(I,N,{params:m(N.params),hash:wp(I.hash),redirectedFrom:void 0,href:D})}let ne;if("path"in V)ne=Je({},V,{path:u_(n,V.path,re.path).path});else{const I=Je({},V.params);for(const N in I)I[N]==null&&delete I[N];ne=Je({},V,{params:v(V.params)}),re.params=v(re.params)}const J=t.resolve(ne,re),Ve=V.hash||"";J.params=d(m(J.params));const at=bJ(r,Je({},V,{hash:s7(Ve),path:J.path})),Ie=i.createHref(at);return Je({fullPath:at,hash:Ve,query:r===eN?f7(V.query):V.query||{}},J,{redirectedFrom:void 0,href:Ie})}function P(V){return typeof V=="string"?u_(n,V,l.value.path):Je({},V)}function O(V,re){if(h!==V)return Hu(8,{from:re,to:V})}function H(V){return ie(V)}function K(V){return H(Je(P(V),{replace:!0}))}function U(V){const re=V.matched[V.matched.length-1];if(re&&re.redirect){const{redirect:ne}=re;let J=typeof ne=="function"?ne(V):ne;return typeof J=="string"&&(J=J.includes("?")||J.includes("#")?J=P(J):{path:J},J.params={}),Je({query:V.query,hash:V.hash,params:"path"in J?{}:V.params},J)}}function ie(V,re){const ne=h=k(V),J=l.value,Ve=V.state,at=V.force,Ie=V.replace===!0,I=U(ne);if(I)return ie(Je(P(I),{state:typeof I=="object"?Je({},Ve,I.state):Ve,force:at,replace:Ie}),re||ne);const N=ne;N.redirectedFrom=re;let D;return!at&&EJ(r,J,ne)&&(D=Hu(16,{to:N,from:J}),$n(J,J,!0,!1)),(D?Promise.resolve(D):ge(N,J)).catch(M=>Vi(M)?Vi(M,2)?M:On(M):Ye(M,N,J)).then(M=>{if(M){if(Vi(M,2))return ie(Je({replace:Ie},P(M.to),{state:typeof M.to=="object"?Je({},Ve,M.to.state):Ve,force:at}),re||N)}else M=tt(N,J,!0,Ie,Ve);return R(N,J,M),M})}function F(V,re){const ne=O(V,re);return ne?Promise.reject(ne):Promise.resolve()}function ge(V,re){let ne;const[J,Ve,at]=b7(V,re);ne=c_(J.reverse(),"beforeRouteLeave",V,re);for(const I of J)I.leaveGuards.forEach(N=>{ne.push(So(N,V,re))});const Ie=F.bind(null,V,re);return ne.push(Ie),Xa(ne).then(()=>{ne=[];for(const I of s.list())ne.push(So(I,V,re));return ne.push(Ie),Xa(ne)}).then(()=>{ne=c_(Ve,"beforeRouteUpdate",V,re);for(const I of Ve)I.updateGuards.forEach(N=>{ne.push(So(N,V,re))});return ne.push(Ie),Xa(ne)}).then(()=>{ne=[];for(const I of V.matched)if(I.beforeEnter&&!re.matched.includes(I))if(ii(I.beforeEnter))for(const N of I.beforeEnter)ne.push(So(N,V,re));else ne.push(So(I.beforeEnter,V,re));return ne.push(Ie),Xa(ne)}).then(()=>(V.matched.forEach(I=>I.enterCallbacks={}),ne=c_(at,"beforeRouteEnter",V,re),ne.push(Ie),Xa(ne))).then(()=>{ne=[];for(const I of a.list())ne.push(So(I,V,re));return ne.push(Ie),Xa(ne)}).catch(I=>Vi(I,8)?I:Promise.reject(I))}function R(V,re,ne){for(const J of c.list())J(V,re,ne)}function tt(V,re,ne,J,Ve){const at=O(V,re);if(at)return at;const Ie=re===bo,I=nu?history.state:{};ne&&(J||Ie?i.replace(V.fullPath,Je({scroll:Ie&&I&&I.scroll},Ve)):i.push(V.fullPath,Ve)),l.value=V,$n(V,re,ne,Ie),On()}let lt;function Pn(){lt||(lt=i.listen((V,re,ne)=>{if(!Zo.listening)return;const J=k(V),Ve=U(J);if(Ve){ie(Je(Ve,{replace:!0}),J).catch(El);return}h=J;const at=l.value;nu&&NJ(WR(at.fullPath,ne.delta),Bv()),ge(J,at).catch(Ie=>Vi(Ie,12)?Ie:Vi(Ie,2)?(ie(Ie.to,J).then(I=>{Vi(I,20)&&!ne.delta&&ne.type===sf.pop&&i.go(-1,!1)}).catch(El),Promise.reject()):(ne.delta&&i.go(-ne.delta,!1),Ye(Ie,J,at))).then(Ie=>{Ie=Ie||tt(J,at,!1),Ie&&(ne.delta&&!Vi(Ie,8)?i.go(-ne.delta,!1):ne.type===sf.pop&&Vi(Ie,20)&&i.go(-1,!1)),R(J,at,Ie)}).catch(El)}))}let Ft=tl(),ft=tl(),ot;function Ye(V,re,ne){On(V);const J=ft.list();return J.length?J.forEach(Ve=>Ve(V,re,ne)):console.error(V),Promise.reject(V)}function Ce(){return ot&&l.value!==bo?Promise.resolve():new Promise((V,re)=>{Ft.add([V,re])})}function On(V){return ot||(ot=!V,Pn(),Ft.list().forEach(([re,ne])=>V?ne(V):re()),Ft.reset()),V}function $n(V,re,ne,J){const{scrollBehavior:Ve}=e;if(!nu||!Ve)return Promise.resolve();const at=!ne&&PJ(WR(V.fullPath,0))||(J||!ne)&&history.state&&history.state.scroll||null;return Yw().then(()=>Ve(V,re,at)).then(Ie=>Ie&&RJ(Ie)).catch(Ie=>Ye(Ie,V,re))}const xn=V=>i.go(V);let rn;const Oi=new Set,Zo={currentRoute:l,listening:!0,addRoute:y,removeRoute:w,hasRoute:T,getRoutes:E,resolve:k,options:e,push:H,replace:K,go:xn,back:()=>xn(-1),forward:()=>xn(1),beforeEach:s.add,beforeResolve:a.add,afterEach:c.add,onError:ft.add,isReady:Ce,install(V){const re=this;V.component("RouterLink",v7),V.component("RouterView",_7),V.config.globalProperties.$router=re,Object.defineProperty(V.config.globalProperties,"$route",{enumerable:!0,get:()=>Dt(l)}),nu&&!rn&&l.value===bo&&(rn=!0,H(i.location).catch(Ve=>{}));const ne={};for(const Ve in bo)ne[Ve]=Vt(()=>l.value[Ve]);V.provide(qv,re),V.provide(OE,ca(ne)),V.provide(Lw,l);const J=V.unmount;Oi.add(V),V.unmount=function(){Oi.delete(V),Oi.size<1&&(h=bo,lt&&lt(),lt=null,l.value=bo,rn=!1,ot=!1),J()}}};return Zo}function Xa(e){return e.reduce((t,n)=>t.then(()=>n()),Promise.resolve())}function b7(e,t){const n=[],r=[],i=[],s=Math.max(t.matched.length,e.matched.length);for(let a=0;a<s;a++){const c=t.matched[a];c&&(e.matched.find(h=>qu(h,c))?r.push(c):n.push(c));const l=e.matched[a];l&&(t.matched.find(h=>qu(h,l))||i.push(l))}return[n,r,i]}function _M(){return xr(qv)}function E7(){return xr(OE)}const T7={__name:"QuizLabel",props:{quiz:{required:!0}},setup(e){const t=e,n=_M(),r=Vt(()=>t.quiz.quizName),i=()=>{n.push({name:"quiz",params:{quizId:t.quiz.key}})};return(s,a)=>(wt(),ln("div",null,[Bs(Uo(Dt(r))+" | ",1),dn("span",{role:"button",onClick:i},"go")]))}},xE=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n},I7={},S7={class:"loader"};function C7(e,t){return wt(),ln("div",S7," loading... ")}const A7=xE(I7,[["render",C7]]),k7={class:"pagination flex"},R7={__name:"QuizesPagination",setup(e){const t=jf(),{hasNextPage:n,hasPreviousPage:r,isQuizesLoading:i}=Qs(t),s=()=>{n.value&&!i.value&&t.getNextPage()},a=()=>{r.value&&!i.value&&t.getPreviousPage()};return(c,l)=>(wt(),ln("div",k7,[dn("div",{onClick:a,class:Il(["pagination__page w-[50px] aspect-square bg-orangeviy cursor-pointer",{"opacity-50 cursor-not-allowed":!Dt(r)||Dt(i)}])}," prev ",2),dn("div",{onClick:l[0]||(l[0]=h=>s()),class:Il(["pagination__page w-[50px] aspect-square bg-orangeviy cursor-pointer ml-[20px]",{"opacity-50 cursor-not-allowed":!Dt(n)||Dt(i)}])}," next ",2)]))}},N7={class:"home"},P7=dn("p",{class:"text-orangeviy flex justify-center bg-fioletoviy p-[40px] text-4xl border-b-2 border-orangeviy"}," Quiz App ",-1),O7={key:1,class:"flex flex-col"},x7={__name:"Home",setup(e){const t=jf(),{quizesList:n,isQuizesLoading:r}=Qs(t);return(i,s)=>(wt(),ln("div",N7,[P7,Dt(r)?(wt(),uu(A7,{key:0})):(wt(),ln("div",O7,[(wt(!0),ln(fr,null,m_(Dt(n),a=>(wt(),uu(T7,{key:a.key,quiz:a},null,8,["quiz"]))),128))])),Zt(R7)]))}},Hv=f1("questionsStore",{state:()=>({questions:[],randomizedQuestions:[],userAnswers:[],timeStart:null,timeEnd:null,isUserReady:!1}),getters:{correctAnswers(e){return e.userAnswers.filter(t=>t.correct)},questionsLeft(e){return e.randomizedQuestions.length-e.userAnswers.length},currentQuestionNumber(e){return e.userAnswers.length},getTimeTotal(e){const t=e.timeEnd-e.timeStart;return new Date(t).toISOString().slice(11,19)},getQuestionsAmount(e){return e.questions.length}},actions:{setTimeStart(){this.timeStart=performance.now()},randomizeQuestions(){this.randomizedQuestions=pJ(this==null?void 0:this.questions)},setQuestions(e){this.questions=e},addUserQuestion(e){this.userAnswers.push(e)},eraseData(){this.randomizedQuestions=[],this.userAnswers=[],this.timeStart=null,this.timeEnd=null},restartQuiz(){this.userAnswers=[],this.timeEnd=null,this.randomizeQuestions()}}});const D7={__name:"CustomButton",props:{label:{required:!0,default:"button"},type:{required:!1,default:"home"}},setup(e){const t=e,n=_M(),r=()=>{n.push({name:"home"})},i=()=>{switch(t.type){case"home":r();break;default:console.error(`there is no ${t.type} in button types`);break}};return(s,a)=>(wt(),ln("div",{role:"button",class:"button bg-orangeviy pointer",onClick:i},Uo(t.label),1))}},DE=xE(D7,[["__scopeId","data-v-47e10a13"]]),L7={class:"result"},M7=dn("br",null,null,-1),F7=dn("br",null,null,-1),U7={__name:"FinalResult",setup(e){const t=Hv(),{getTimeTotal:n}=Qs(t),r=Vt(()=>t.correctAnswers.length),i=()=>{t.eraseData(),t.isUserReady=!1};return(s,a)=>(wt(),ln("div",L7,[Bs(" quiz is over! "),M7,Bs(" Your time: "+Uo(Dt(n))+" ",1),F7,Bs(" you got "+Uo(Dt(r))+" correct answers ",1),dn("p",null,[Zt(DE,{onClick:i,type:"custom",label:"restart"})])]))}},j7={key:0,class:"getReady"},V7=dn("br",null,null,-1),B7={__name:"StartQuiz",setup(e){const t=Hv(),{isUserReady:n,getQuestionsAmount:r}=Qs(t),i=()=>{t.restartQuiz(),t.setTimeStart(),n.value=!0};return(s,a)=>Dt(n)?pd("",!0):(wt(),ln("div",j7,[Bs(" get ready "),V7,dn("p",null,"Questions amount: "+Uo(Dt(r)),1),Zt(DE,{label:"Start",type:"custom",onClick:i})]))}},q7=["onClick"],H7={__name:"Question",setup(e){const t=Hv(),{randomizedQuestions:n,currentQuestionNumber:r}=Qs(t),i=s=>{t.addUserQuestion(s)};return(s,a)=>(wt(),ln("div",null,[(wt(!0),ln(fr,null,m_(Dt(n),(c,l)=>WN((wt(),ln("div",{key:c.questionId,class:"question"},[dn("p",null,Uo(`#${l+1} ${c.questionText}`),1),dn("ol",null,[(wt(!0),ln(fr,null,m_(c.answers,h=>(wt(),ln("li",{key:h.answerId},[Bs(Uo(h.answerText)+" ",1),dn("button",{onClick:d=>i(h)},"add",8,q7)]))),128))])])),[[LV,l===Dt(r)]])),128))]))}},K7={__name:"Quiz",setup(e){const t=E7(),n=Vt(()=>t.params.quizId),r=Hv(),i=jf(),{timeEnd:s,questionsLeft:a,questions:c,isUserReady:l}=Qs(r),{quizesList:h,isQuizesLoading:d}=Qs(i),v=ca([{name:"start",condition:()=>!l.value},{name:"inProgress",condition:()=>l.value&&a.value>0},{name:"finish",condition:()=>l.value&&a.value==0&&!d.value}]),m=Vt(()=>v.reverse().find(E=>E.condition()).name),y=E=>m.value===E,w=Vt(()=>h.value.length?h.value.find(E=>E.key===n.value).quizQuestions:[]);return Vs(a,()=>{a.value==0&&(s.value=performance.now())}),Vs(w,()=>{w.value.length&&(c.value=w.value)},{immediate:!0}),Zw(()=>{r.eraseData(),r.isUserReady=!1}),(E,T)=>(wt(),ln("div",null,[y("start")?(wt(),uu(B7,{key:0})):pd("",!0),y("inProgress")?(wt(),uu(H7,{key:1})):pd("",!0),y("finish")?(wt(),uu(U7,{key:2})):pd("",!0),dn("p",null,"Current stage: "+Uo(Dt(m)),1),Zt(DE,{label:"Back to menu"})]))}};const z7={__name:"QuizAdd",setup(e){const t=jf(),n=Cp(1),r=async()=>{const s=await ue.database().ref("quizes").push(i.value);await ue.database().ref("quizesIds").push(s.key),t.addQuizId(s.key),console.log({...i.value,key:s.key}),t.addQuiz({...i.value,key:s.key})},i=Vt(()=>({quizName:`quiz${n.value} name`,quizQuestions:[{questionText:`quiz${n.value} first question`,questionId:1,answers:[{answerId:1,answerText:`quiz${n.value} question1 answer1`,correct:!1},{answerId:2,answerText:`quiz${n.value} question1 answer2`,correct:!0},{answerId:3,answerText:`quiz${n.value} question1 answer3`,correct:!1},{answerId:4,answerText:`quiz${n.value} question1 answer4`,correct:!1}]},{questionText:`quiz${n.value} second question`,questionId:2,answers:[{answerId:1,answerText:`quiz${n.value} question2 answer1`,correct:!1},{answerId:2,answerText:`quiz${n.value} question2 answer2`,correct:!0},{answerId:3,answerText:`quiz${n.value} question2 answer3`,correct:!1},{answerId:4,answerText:`quiz${n.value} question2 answer4`,correct:!1}]},{questionText:`quiz${n.value} third question`,questionId:3,answers:[{answerId:1,answerText:`quiz${n.value} question3 answer1`,correct:!1},{answerId:2,answerText:`quiz${n.value} question3 answer2`,correct:!0},{answerId:3,answerText:`quiz${n.value} question3 answer3`,correct:!1},{answerId:4,answerText:`quiz${n.value} question3 answer4`,correct:!1}]},{questionText:`quiz${n.value} fourth question`,questionId:4,answers:[{answerId:1,answerText:`quiz${n.value} question4 answer1`,correct:!1},{answerId:2,answerText:`quiz${n.value} question4 answer2`,correct:!0},{answerId:3,answerText:`quiz${n.value} question4 answer3`,correct:!1},{answerId:4,answerText:`quiz${n.value} question4 answer4`,correct:!1}]}]}));return Jw(async()=>{}),(s,a)=>(wt(),ln("div",null,[WN(dn("input",{type:"","onUpdate:modelValue":a[0]||(a[0]=c=>n.value=c)},null,512),[[DV,n.value]]),dn("button",{onClick:r},"add")]))}},W7=xE(z7,[["__scopeId","data-v-4ca75b69"]]),$7=[{path:"/",name:"home",component:x7},{path:"/add",name:"add",component:W7},{path:"/quiz/:quizId",name:"quiz",component:K7}],G7=w7({history:MJ(),routes:$7});var Q7="firebase",wM="8.10.1";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ue.registerVersion(Q7,wM,"app");ue.SDK_VERSION=wM;UV({created(){const e=JSON.parse({}.VITE_FIREBASE_CONFIG);ue.initializeApp(e)},render:()=>rb(mJ)}).use(G7).use(BV()).mount("#app");
